# Comparing `tmp/azureml_acft_contrib_hf_diffusion-0.0.9-py3-none-any.whl.zip` & `tmp/azureml_acft_contrib_hf_diffusion-47.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,40 @@
-Zip file size: 191747 bytes, number of entries: 38
--rw-rw-rw-  2.0 fat      267 b- defN 23-May-17 17:31 azureml/__init__.py
--rw-rw-rw-  2.0 fat      267 b- defN 23-May-17 17:31 azureml/acft/__init__.py
--rw-rw-rw-  2.0 fat      267 b- defN 23-May-17 17:31 azureml/acft/contrib/__init__.py
--rw-rw-rw-  2.0 fat      267 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/__init__.py
--rw-rw-rw-  2.0 fat   891219 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/NOTICE
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/__init__.py
--rw-rw-rw-  2.0 fat     2833 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/base_runner.py
--rw-rw-rw-  2.0 fat     1434 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/task_factory.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/constants/__init__.py
--rw-rw-rw-  2.0 fat     5544 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/constants/constants.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/diffusion_auto/__init__.py
--rw-rw-rw-  2.0 fat     1900 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/diffusion_auto/config.py
--rw-rw-rw-  2.0 fat     7344 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/diffusion_auto/model.py
--rw-rw-rw-  2.0 fat      638 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/diffusion_auto/scheduler.py
--rw-rw-rw-  2.0 fat     2632 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/diffusion_auto/tokenizer.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/__init__.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/__init__.py
--rw-rw-rw-  2.0 fat     2550 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/runner.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/__init__.py
--rw-rw-rw-  2.0 fat     8657 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/finetune.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/__init__.py
--rw-rw-rw-  2.0 fat     8672 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/base.py
--rw-rw-rw-  2.0 fat     7313 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_finetune.py
--rw-rw-rw-  2.0 fat     2682 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_inference.py
--rw-rw-rw-  2.0 fat      298 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/__init__.py
--rw-rw-rw-  2.0 fat     7076 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/data_utils.py
--rw-rw-rw-  2.0 fat    19641 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/hf_argparser.py
--rw-rw-rw-  2.0 fat     1170 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/mlflow_preprocess.py
--rw-rw-rw-  2.0 fat     6200 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/mlflow_utils.py
--rw-rw-rw-  2.0 fat     7879 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/model_selector_utils.py
--rw-rw-rw-  2.0 fat      799 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/preprocess.py
--rw-rw-rw-  2.0 fat     9650 b- defN 23-May-17 17:31 azureml/acft/contrib/hf/diffusion/utils/validation_utils.py
--rw-rw-rw-  2.0 fat   891219 b- defN 23-May-17 17:31 azureml_acft_contrib_hf_diffusion-0.0.9.data/data/azureml-acft-contrib-hf-diffusion/NOTICE
--rw-rw-rw-  2.0 fat      859 b- defN 23-May-17 17:36 azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/LICENSE.txt
--rw-rw-rw-  2.0 fat     1471 b- defN 23-May-17 17:36 azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/METADATA
--rw-rw-rw-  2.0 fat       97 b- defN 23-May-17 17:36 azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        8 b- defN 23-May-17 17:36 azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     4311 b- defN 23-May-17 17:36 azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/RECORD
-38 files, 1897250 bytes uncompressed, 184409 bytes compressed:  90.3%
+Zip file size: 192405 bytes, number of entries: 38
+-rw-rw-rw-  2.0 fat      267 b- defN 24-Mar-22 10:04 azureml/__init__.py
+-rw-rw-rw-  2.0 fat      267 b- defN 24-Mar-22 10:04 azureml/acft/__init__.py
+-rw-rw-rw-  2.0 fat      267 b- defN 24-Mar-22 10:04 azureml/acft/contrib/__init__.py
+-rw-rw-rw-  2.0 fat      267 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/__init__.py
+-rw-rw-rw-  2.0 fat   891219 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/NOTICE
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/__init__.py
+-rw-rw-rw-  2.0 fat     2833 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/base_runner.py
+-rw-rw-rw-  2.0 fat     1434 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/task_factory.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/constants/__init__.py
+-rw-rw-rw-  2.0 fat     5544 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/constants/constants.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/diffusion_auto/__init__.py
+-rw-rw-rw-  2.0 fat     1900 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/diffusion_auto/config.py
+-rw-rw-rw-  2.0 fat     7408 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/diffusion_auto/model.py
+-rw-rw-rw-  2.0 fat      638 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/diffusion_auto/scheduler.py
+-rw-rw-rw-  2.0 fat     2632 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/diffusion_auto/tokenizer.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/__init__.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/__init__.py
+-rw-rw-rw-  2.0 fat     2780 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/runner.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/__init__.py
+-rw-rw-rw-  2.0 fat     9174 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/finetune.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/__init__.py
+-rw-rw-rw-  2.0 fat     8672 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/base.py
+-rw-rw-rw-  2.0 fat     7313 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_finetune.py
+-rw-rw-rw-  2.0 fat     2682 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_inference.py
+-rw-rw-rw-  2.0 fat      298 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/__init__.py
+-rw-rw-rw-  2.0 fat     7076 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/data_utils.py
+-rw-rw-rw-  2.0 fat    19641 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/hf_argparser.py
+-rw-rw-rw-  2.0 fat     1170 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/mlflow_preprocess.py
+-rw-rw-rw-  2.0 fat     8078 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/mlflow_utils.py
+-rw-rw-rw-  2.0 fat     7879 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/model_selector_utils.py
+-rw-rw-rw-  2.0 fat      799 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/preprocess.py
+-rw-rw-rw-  2.0 fat     9650 b- defN 24-Mar-22 10:04 azureml/acft/contrib/hf/diffusion/utils/validation_utils.py
+-rw-rw-rw-  2.0 fat   891219 b- defN 24-Mar-22 10:04 azureml_acft_contrib_hf_diffusion-47.0.0.data/data/azureml-acft-contrib-hf-diffusion/NOTICE
+-rw-rw-rw-  2.0 fat      859 b- defN 24-Mar-22 10:09 azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/LICENSE.txt
+-rw-rw-rw-  2.0 fat     1489 b- defN 24-Mar-22 10:09 azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Mar-22 10:09 azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        8 b- defN 24-Mar-22 10:09 azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     4317 b- defN 24-Mar-22 10:09 azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/RECORD
+38 files, 1899958 bytes uncompressed, 185055 bytes compressed:  90.3%
```

## zipnote {}

```diff
@@ -90,26 +90,26 @@
 
 Filename: azureml/acft/contrib/hf/diffusion/utils/preprocess.py
 Comment: 
 
 Filename: azureml/acft/contrib/hf/diffusion/utils/validation_utils.py
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.data/data/azureml-acft-contrib-hf-diffusion/NOTICE
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.data/data/azureml-acft-contrib-hf-diffusion/NOTICE
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/LICENSE.txt
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/LICENSE.txt
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/METADATA
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/METADATA
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/WHEEL
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/top_level.txt
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/RECORD
+Filename: azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## azureml/acft/contrib/hf/diffusion/diffusion_auto/model.py

```diff
@@ -163,14 +163,17 @@
             text_encoder=self.text_encoder,
             vae=self.vae,
             unet=self.unet,
             revision=self.revision,
         )
         pipeline.save_pretrained(output_dir)
 
+    @property
+    def config(self) -> str:
+        return ""
 
 class AzuremlCLIPTextEncoder():
 
     @classmethod
     def from_pretrained(cls, hf_model_name_or_path: str, **kwargs) -> CLIPTextModel:
 
         revision = kwargs["revision"]
```

## azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/runner.py

```diff
@@ -22,28 +22,36 @@
 from ...constants.constants import Tasks
 from ...base_runner import BaseRunner
 from .preprocess.base import StableDiffusionPreprocessArgs
 
 # from .preprocess.preprocess_for_inference import MultiLabelPreprocessForInfer
 from ...utils.hf_argparser import HfArgumentParser
 
+from azureml.acft.accelerator.utils.logging_utils import get_logger_app
+
+
+logger = get_logger_app()
+
 
 class StableDiffusionRunner(BaseRunner):
 
     def run_preprocess_for_finetune(self, component_args: Namespace, unknown_args: List[str]) -> None:
 
         from .preprocess.preprocess_for_finetune import StableDiffusionPreprocessForFinetune
 
         # TODO - add model task compatability check
         # self.check_model_task_compatibility(
         #     model_name_or_path=component_args.model_name_or_path, task_name=Tasks.MULTI_LABEL_CLASSIFICATION
         # )
         
         preprocess_arg_parser = HfArgumentParser([StableDiffusionPreprocessArgs])
-        preprocess_args: StableDiffusionPreprocessArgs = preprocess_arg_parser.parse_args_into_dataclasses(unknown_args)[0]
+        output_args = preprocess_arg_parser.parse_args_into_dataclasses(unknown_args, return_remaining_strings=True)
+        preprocess_args: StableDiffusionPreprocessArgs = output_args[0]
+
+        logger.info(f"unused args - {output_args[1]}")
 
         preprocess_obj = StableDiffusionPreprocessForFinetune(component_args, preprocess_args)
         preprocess_obj.preprocess()
 
     def run_preprocess_for_infer(self, *args, **kwargs) -> None:
         pass
```

## azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/finetune.py

```diff
@@ -25,28 +25,29 @@
 import torch
 import torch.nn as nn
 from torchvision import transforms
 
 from azureml.acft.accelerator.finetune import AzuremlFinetuneArgs, AzuremlDatasetArgs
 from azureml.acft.accelerator.finetune import AzuremlTrainer
 from azureml.acft.accelerator.constants import HfTrainerType
+from azureml.acft.common_components.model_selector.constants import ModelSelectorConstants
 
 from ..preprocess.base import StableDiffusionDataset
 from ..preprocess.preprocess_for_finetune import StableDiffusionPreprocessForFinetune
 from ....diffusion_auto.tokenizer import AzuremlCLIPTokenizer
 from ....diffusion_auto.model import AzuremlStableDiffusionPipeline
 from ....constants.constants import SaveFileConstants, MLFlowHFFlavourConstants, Tasks
 from ....utils.mlflow_utils import SaveMLflowModelCallback
 
 from transformers import PreTrainedTokenizerBase
 
 from azureml.acft.accelerator.finetune import get_logger_app
 
 
-logger = get_logger_app()
+logger = get_logger_app(name="Stable Diffusion Logger")
 
 
 class StableDiffusionFinetune:
 
     def __init__(self, finetune_params: Dict[str, Any]) -> None:
         # finetune params is finetune component args + args saved as part of preprocess
         self.finetune_params = finetune_params
@@ -163,20 +164,28 @@
 
         self.finetune_params["model_name_or_path"] = str(self.finetune_params["model_name_or_path"])
 
         # configure MLflow save callback
         mlflow_infer_params_file_path = Path(
             self.finetune_params["preprocess_output"], MLFlowHFFlavourConstants.INFERENCE_PARAMS_SAVE_NAME_WITH_EXT
         )
+        base_model_asset_id = self.finetune_params.get("model_asset_id", None)
+        base_model_task = self.finetune_params.get(ModelSelectorConstants.BASE_MODEL_TASK, None)
+
         save_mlflow_callback = SaveMLflowModelCallback(
             mlflow_infer_params_file_path=mlflow_infer_params_file_path,
             mlflow_model_save_path=self.finetune_params["mlflow_model_folder"],
             mlflow_task_type=self.finetune_params["mlflow_task_type"],
             model_name=self.finetune_params["model_name"],
             model_name_or_path=self.finetune_params["model_name_or_path"],
+            base_model_asset_id=base_model_asset_id,
+            base_model_task=base_model_task,
+            **{
+                "mlflow_ft_conf": self.finetune_params.get("mlflow_ft_conf", {})
+            },
         )
 
         model, model_type, new_initialized_params = self._load_model()
         tokenizer=self._get_tokenizer()
         trainer = AzuremlTrainer(
             finetune_args=self._get_finetune_args(model_type),
             dataset_args=self._get_dataset_args(tokenizer),
```

## azureml/acft/contrib/hf/diffusion/utils/mlflow_utils.py

```diff
@@ -22,14 +22,15 @@
 import json
 import shutil
 import yaml
 from distutils.dir_util import copy_tree
 from typing import List, Union, Optional
 
 from pathlib import Path
+from mlflow.models import Model
 
 from ..constants.constants import MLFlowHFFlavourConstants
 
 from ..diffusion_auto.model import StableDiffusionPipeline, AzuremlStableDiffusionPipeline
 
 from transformers import TrainerCallback, TrainingArguments, TrainerState, TrainerControl
 from transformers import PreTrainedModel
@@ -58,25 +59,30 @@
         self,
         mlflow_model_save_path: Union[str, Path],
         mlflow_infer_params_file_path: Union[str, Path],
         mlflow_task_type: str,
         model_name: str,
         model_name_or_path: Optional[str] = None,
         class_names: Optional[List[str]] = None,
+        metadata: dict = {},
         **kwargs
     ) -> None:
         """
         init azureml_run which is azureml Run object
         """
         self.mlflow_model_save_path = mlflow_model_save_path
         self.mlflow_infer_params_file_path = mlflow_infer_params_file_path
         self.mlflow_task_type = mlflow_task_type
         self.class_names = class_names
         self.model_name = model_name
         self.model_name_or_path = model_name_or_path
+        self.mlflow_ft_conf = kwargs.get("mlflow_ft_conf", {})
+        self.mlflow_hftransformers_misc_conf = self.mlflow_ft_conf.get("mlflow_hftransformers_misc_conf", {})
+        self.mlflow_model_signature = self.mlflow_ft_conf.get("mlflow_model_signature", None)
+        self.metadata = metadata
 
     def on_train_end(self, args: TrainingArguments, state: TrainerState, control: TrainerControl, **kwargs):
         """
         Event called at the end of training.
         Save MLflow model at the end of training
 
         Model and Tokenizer information is part of kwargs
@@ -97,14 +103,16 @@
                 MLFlowHFFlavourConstants.HUGGINGFACE_ID: self.model_name,
                 # **mlflow_inference_params,
                 "custom_config_module": "diffusers",
                 "custom_tokenizer_module": "diffusers",
                 "custom_model_module": "diffusers",
                 "force_load_tokenizer": False,
                 "force_load_config": False,
+                "hf_config_class": "AutoConfig",
+                "hf_tokenizer_class": "AutoTokenizer",
             }
 
             if isinstance(model, AzuremlStableDiffusionPipeline):
                 acft_model = model
             else:
                 raise LLMException._with_error(
                     AzureMLError.create(LLMInternalError, error=(
@@ -123,24 +131,48 @@
                 vae=acft_model.vae, # type: ignore
                 unet=acft_model.unet, # type: ignore
                 revision=acft_model.revision, # type: ignore
             )
 
             misc_conf["hf_pretrained_class"] = diffusion_model.__class__.__name__
 
+            logger.info(f"Adding additional misc to MLModel - {self.mlflow_hftransformers_misc_conf}")
+            misc_conf.update(self.mlflow_hftransformers_misc_conf)
+            mlflow_model = Model(metadata=self.metadata)
+
             mlflow.hftransformers.save_model(
                 diffusion_model,
                 self.mlflow_model_save_path,
                 hf_conf=misc_conf,
+                mlflow_model=mlflow_model
             ) # type: ignore
 
             # save LICENSE file to MlFlow model
             if self.model_name_or_path:
                 license_file_path = Path(self.model_name_or_path, MLFlowHFFlavourConstants.LICENSE_FILE)
                 if license_file_path.is_file():
                     shutil.copy(str(license_file_path), self.mlflow_model_save_path)
                     logger.info("LICENSE file is copied to mlflow model folder")
                 else:
                     download_license_file(self.model_name, str(self.mlflow_model_save_path))
-            
+
+            # setting mlflow model signature for inference
+            if self.mlflow_model_signature is not None:
+                logger.info(f"Adding mlflow model signature - {self.mlflow_model_signature}")
+                mlflow_model_file = Path(self.mlflow_model_save_path, MLFlowHFFlavourConstants.MISC_CONFIG_FILE)
+                if mlflow_model_file.is_file():
+                    mlflow_model_data = {}
+                    with open(str(mlflow_model_file), "r") as fp:
+                        yaml_data = yaml.safe_load(fp)
+                        mlflow_model_data.update(yaml_data)
+                        mlflow_model_data["signature"] = self.mlflow_model_signature
+                    
+                    with open(str(mlflow_model_file), "w") as fp:
+                        yaml.dump(mlflow_model_data, fp)
+                        logger.info(f"Updated mlflow model file with 'signature': {self.mlflow_model_signature}")
+                else:
+                    logger.info("No MLmodel file to update signature")
+            else:
+                logger.info("No signature will be added to mlflow model")
+
             logger.info("Saved as mlflow model at {}".format(self.mlflow_model_save_path))
```

## Comparing `azureml_acft_contrib_hf_diffusion-0.0.9.data/data/azureml-acft-contrib-hf-diffusion/NOTICE` & `azureml_acft_contrib_hf_diffusion-47.0.0.data/data/azureml-acft-contrib-hf-diffusion/NOTICE`

 * *Files identical despite different names*

## Comparing `azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/LICENSE.txt` & `azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/METADATA` & `azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/METADATA`

 * *Files 13% similar despite different names*

```diff
@@ -1,34 +1,32 @@
-Metadata-Version: 2.1
-Name: azureml-acft-contrib-hf-diffusion
-Version: 0.0.9
-Summary: Contains the acft nlp-hf-contrib package used in script to build azureml components.
-Home-page: UNKNOWN
-Author: Microsoft Corp
-License: inline_license
-Platform: UNKNOWN
-Classifier: Development Status :: 3 - Alpha
-Classifier: Intended Audience :: Developers
-Classifier: Intended Audience :: Science/Research
-Classifier: License :: Other/Proprietary License
-Classifier: Programming Language :: Python :: 3.7
-Classifier: Programming Language :: Python :: 3.8
-Classifier: Programming Language :: Python :: 3.9
-Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
-Classifier: Operating System :: Microsoft :: Windows
-Classifier: Operating System :: MacOS
-Classifier: Operating System :: POSIX :: Linux
-Requires-Python: >=3.7,<3.10
-Description-Content-Type: text/x-rst
-Requires-Dist: datasets (==2.9.0)
-Requires-Dist: sacremoses (==0.0.53)
-Requires-Dist: scikit-learn (~=0.24.0)
-Requires-Dist: seqeval (==1.2.2)
-Provides-Extra: dev
-Requires-Dist: twine (==3.3.0) ; extra == 'dev'
-Requires-Dist: wheel (==0.37.0) ; extra == 'dev'
-Provides-Extra: test
-Requires-Dist: pytest (~=5.3.0) ; extra == 'test'
-
-The azureml-acft-contrib-hf-diffusion package is a package containing functionality used by the the generic components for large language model for data preprocessing and fine-tuning. This package is not designed for end-user consumption and not to be released to pypi.
-
-
+Metadata-Version: 2.1
+Name: azureml-acft-contrib-hf-diffusion
+Version: 47.0.0
+Summary: Contains the acft nlp-hf-contrib package used in script to build azureml components.
+Home-page: 
+Author: Microsoft Corp
+License: inline_license
+Classifier: Development Status :: 3 - Alpha
+Classifier: Intended Audience :: Developers
+Classifier: Intended Audience :: Science/Research
+Classifier: License :: Other/Proprietary License
+Classifier: Programming Language :: Python :: 3.7
+Classifier: Programming Language :: Python :: 3.8
+Classifier: Programming Language :: Python :: 3.9
+Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
+Classifier: Operating System :: Microsoft :: Windows
+Classifier: Operating System :: MacOS
+Classifier: Operating System :: POSIX :: Linux
+Requires-Python: >=3.7,<3.10
+Description-Content-Type: text/x-rst
+License-File: LICENSE.txt
+Requires-Dist: datasets ==2.9.0
+Requires-Dist: sacremoses ==0.0.53
+Requires-Dist: scikit-learn ~=0.24.0
+Requires-Dist: seqeval ==1.2.2
+Provides-Extra: dev
+Requires-Dist: twine ==3.3.0 ; extra == 'dev'
+Requires-Dist: wheel ==0.37.0 ; extra == 'dev'
+Provides-Extra: test
+Requires-Dist: pytest ~=5.3.0 ; extra == 'test'
+
+The azureml-acft-contrib-hf-diffusion package is a package containing functionality used by the the generic components for large language model for data preprocessing and fine-tuning. This package is not designed for end-user consumption and not to be released to pypi.
```

## Comparing `azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/RECORD` & `azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -6,33 +6,33 @@
 azureml/acft/contrib/hf/diffusion/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/base_runner.py,sha256=qGQcJmnVkD0seA5PM5gdgEiSeYa34d9mYMkjJy5-gcQ,2833
 azureml/acft/contrib/hf/diffusion/task_factory.py,sha256=dCxJsuWSRjRnTwWd0R1sYwqwgdv793JtsLn2RmXSM8M,1434
 azureml/acft/contrib/hf/diffusion/constants/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/constants/constants.py,sha256=212wZ-7qNUGTQdEqGQDvw2sL_q8r4OZ1MfJtBwK3kyw,5544
 azureml/acft/contrib/hf/diffusion/diffusion_auto/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/diffusion_auto/config.py,sha256=QEBAKvoBLd1kTqnnt68_NkPWplvlh3-YAnV4jtUaSlQ,1900
-azureml/acft/contrib/hf/diffusion/diffusion_auto/model.py,sha256=o8A2iktc5LMawIur_t8BCRrA8tF30LMNFCmZP8UDKG0,7344
+azureml/acft/contrib/hf/diffusion/diffusion_auto/model.py,sha256=-hVOHc5njy3zVGZkuvs5U0aYBYNTgbZxWyoX8tDYEFY,7408
 azureml/acft/contrib/hf/diffusion/diffusion_auto/scheduler.py,sha256=lrq1MCn_Z11odskeLYIq9ACGsAkMYDSHIqGkGQgKCDg,638
 azureml/acft/contrib/hf/diffusion/diffusion_auto/tokenizer.py,sha256=ay62kn2CfbLx1rqTj77cGewfYFpqtv4MC7KtuMd6A6A,2632
 azureml/acft/contrib/hf/diffusion/tasks/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
-azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/runner.py,sha256=_q0O3TIqPiBMhsJSw5pOtaQ2d1jwLPMNEY2SvzJmeJw,2550
+azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/runner.py,sha256=u4w594ekljt7nriAu-iF7sMaLKiJN_O-i31cbEx40-Y,2780
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
-azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/finetune.py,sha256=tvFAlcQiHLb_d6Z1QkZki77koOu9IG3rJO_lmrF9N6U,8657
+azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/finetune/finetune.py,sha256=upd63OCyhnplroa1wS3geqFJBdErBANeE7q0Uk4hotw,9174
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/base.py,sha256=NnzcA6HOYibcqi7fPyo7v8A2dr2Pg-CNfOgNNd9W19A,8672
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_finetune.py,sha256=wyPqr23r-WJVa9kJBaHB_9VAec_gM56g2Z_Tt9jJp4k,7313
 azureml/acft/contrib/hf/diffusion/tasks/stable_diffusion/preprocess/preprocess_for_inference.py,sha256=lOq824zkZTlylZBJ7EgKRAuwHjL4Je6sX2aSq1crBwA,2682
 azureml/acft/contrib/hf/diffusion/utils/__init__.py,sha256=ouf2rAWSHFJAg_qtQ9B9JwI7xakZ69hDiMGqpDuzL-c,298
 azureml/acft/contrib/hf/diffusion/utils/data_utils.py,sha256=4PpTysPZAkrDjh0ErxXVFonmbIhxutK4ABRc1X2Vq0A,7076
 azureml/acft/contrib/hf/diffusion/utils/hf_argparser.py,sha256=n0eDuBW-rPZ5FF_1JomIGf8A4nAC4hNTarPstKEvSWU,19641
 azureml/acft/contrib/hf/diffusion/utils/mlflow_preprocess.py,sha256=Y60mlfKG03WyP0blLw6SVThIShxY4AtqOCZrPamrMRk,1170
-azureml/acft/contrib/hf/diffusion/utils/mlflow_utils.py,sha256=yeokZKfiIl1E1w5lxy0S_tUVoVAmvgjNTxOyOjD5RIA,6200
+azureml/acft/contrib/hf/diffusion/utils/mlflow_utils.py,sha256=YmgaXGljMj1D9P0V0_5Ut4FPwfPWEcXltIKnxTRg4zU,8078
 azureml/acft/contrib/hf/diffusion/utils/model_selector_utils.py,sha256=OULGfCLSoRqPZ4sHVf1SggGmtEtBkDfFrIu1Yn18tqE,7879
 azureml/acft/contrib/hf/diffusion/utils/preprocess.py,sha256=ntAosCPNIrizH2wJSaa73jSRvOJUFx-RQitlnwKDRzc,799
 azureml/acft/contrib/hf/diffusion/utils/validation_utils.py,sha256=3Bw_6FQlNfilPHCGPSOnngk5AS06Z2PjuAKi4VVEgRU,9650
-azureml_acft_contrib_hf_diffusion-0.0.9.data/data/azureml-acft-contrib-hf-diffusion/NOTICE,sha256=vJahxYgBMuGf9lBH7WJHs12oUWN8a4z9xfj3kQFOPlc,891219
-azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/LICENSE.txt,sha256=GBoIyZ-6vJ4xjRc8U3wTw4EfkuaEdVTm_gbr1Nm8uDI,859
-azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/METADATA,sha256=Wipo1DZ1O2F_WNRCVbeyrz_QWQbjCwmNYmG3nVB6Hd8,1471
-azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/WHEEL,sha256=YUYzQ6UQdoqxXjimOitTqynltBCkwY6qlTfTh2IzqQU,97
-azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/top_level.txt,sha256=ZOeEa0TAXo6i5wOjwBoqfIGEuxOcKuscGgNSpizqREY,8
-azureml_acft_contrib_hf_diffusion-0.0.9.dist-info/RECORD,,
+azureml_acft_contrib_hf_diffusion-47.0.0.data/data/azureml-acft-contrib-hf-diffusion/NOTICE,sha256=vJahxYgBMuGf9lBH7WJHs12oUWN8a4z9xfj3kQFOPlc,891219
+azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/LICENSE.txt,sha256=GBoIyZ-6vJ4xjRc8U3wTw4EfkuaEdVTm_gbr1Nm8uDI,859
+azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/METADATA,sha256=f8lDmYWwrl8TR-U5PQVzMszbkL9b4Gc3hmlaW2CAD_Y,1489
+azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/top_level.txt,sha256=ZOeEa0TAXo6i5wOjwBoqfIGEuxOcKuscGgNSpizqREY,8
+azureml_acft_contrib_hf_diffusion-47.0.0.dist-info/RECORD,,
```

