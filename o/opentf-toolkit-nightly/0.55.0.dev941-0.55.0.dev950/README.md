# Comparing `tmp/opentf_toolkit_nightly-0.55.0.dev941-py3-none-any.whl.zip` & `tmp/opentf_toolkit_nightly-0.55.0.dev950-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,57 +1,57 @@
-Zip file size: 91263 bytes, number of entries: 55
--rw-r--r--  2.0 unx    21839 b- defN 24-Apr-23 10:10 opentf/commons/__init__.py
--rw-r--r--  2.0 unx    15899 b- defN 24-Apr-23 10:10 opentf/commons/auth.py
--rw-r--r--  2.0 unx     7828 b- defN 24-Apr-23 10:10 opentf/commons/config.py
--rw-r--r--  2.0 unx    18191 b- defN 24-Apr-23 10:10 opentf/commons/datasources.py
--rw-r--r--  2.0 unx    19251 b- defN 24-Apr-23 10:10 opentf/commons/expressions.py
--rw-r--r--  2.0 unx     5894 b- defN 24-Apr-23 10:10 opentf/commons/pubsub.py
--rw-r--r--  2.0 unx     4044 b- defN 24-Apr-23 10:10 opentf/commons/schemas.py
--rw-r--r--  2.0 unx     7134 b- defN 24-Apr-23 10:10 opentf/commons/selectors.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-23 10:10 opentf/schemas/__init__.py
--rw-rw-rw-  2.0 unx     2105 b- defN 24-Apr-23 10:10 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json
--rw-rw-rw-  2.0 unx     1230 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json
--rw-rw-rw-  2.0 unx     1366 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/AllureCollectorOutput.json
--rw-rw-rw-  2.0 unx     1239 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ChannelHandlerHooks.json
--rw-rw-rw-  2.0 unx     2174 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/EventBusConfig.json
--rw-rw-rw-  2.0 unx     2702 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionCommand.json
--rw-rw-rw-  2.0 unx     1347 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionError.json
--rw-rw-rw-  2.0 unx     3050 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionResult.json
--rw-rw-rw-  2.0 unx     1754 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorCommand.json
--rw-rw-rw-  2.0 unx     6633 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorResult.json
--rw-rw-rw-  2.0 unx     8565 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/InsightCollector.json
--rw-rw-rw-  2.0 unx     3790 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/Notification.json
--rw-rw-rw-  2.0 unx     2803 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/PluginMetadata.json
--rw-rw-rw-  2.0 unx     2875 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ProviderCommand.json
--rw-rw-rw-  2.0 unx     3878 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ProviderConfig.json
--rw-rw-rw-  2.0 unx     4259 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ProviderResult.json
--rw-rw-rw-  2.0 unx     2910 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/QualityGate.json
--rw-rw-rw-  2.0 unx     1182 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/RetentionPolicy.json
--rw-rw-rw-  2.0 unx     6301 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/SSHServiceConfig.json
--rw-rw-rw-  2.0 unx     2835 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/ServiceConfig.json
--rw-rw-rw-  2.0 unx     5031 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/Subscription.json
--rw-rw-rw-  2.0 unx     1405 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/TrackerPublisher.json
--rw-rw-rw-  2.0 unx     9899 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/Workflow.json
--rw-rw-rw-  2.0 unx     1351 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCanceled.json
--rw-rw-rw-  2.0 unx     1292 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCompleted.json
--rw-rw-rw-  2.0 unx     1577 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowResult.json
--rw-rw-rw-  2.0 unx     2232 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha2/Notification.json
--rw-rw-rw-  2.0 unx     6612 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1alpha2/SSHServiceConfig.json
--rw-rw-rw-  2.0 unx     4273 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/ExecutionCommand.json
--rw-rw-rw-  2.0 unx    10205 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/GeneratorResult.json
--rw-rw-rw-  2.0 unx     4581 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/ProviderCommand.json
--rw-rw-rw-  2.0 unx     4563 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/ProviderConfig.json
--rw-rw-rw-  2.0 unx     7494 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/ProviderResult.json
--rw-rw-rw-  2.0 unx     2850 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/ServiceConfig.json
--rw-rw-rw-  2.0 unx    15424 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json
--rw-rw-rw-  2.0 unx     3517 b- defN 24-Apr-23 10:10 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json
--rw-rw-rw-  2.0 unx     2423 b- defN 24-Apr-23 10:10 opentf/scripts/launch_java_service.sh
--rw-r--r--  2.0 unx    21279 b- defN 24-Apr-23 10:10 opentf/scripts/startup.py
--rw-r--r--  2.0 unx    19610 b- defN 24-Apr-23 10:10 opentf/toolkit/__init__.py
--rw-r--r--  2.0 unx    17156 b- defN 24-Apr-23 10:10 opentf/toolkit/channels.py
--rw-r--r--  2.0 unx     9320 b- defN 24-Apr-23 10:10 opentf/toolkit/core.py
--rw-rw-rw-  2.0 unx    11357 b- defN 24-Apr-23 10:10 opentf_toolkit_nightly-0.55.0.dev941.dist-info/LICENSE
--rw-r--r--  2.0 unx     1945 b- defN 24-Apr-23 10:10 opentf_toolkit_nightly-0.55.0.dev941.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-23 10:10 opentf_toolkit_nightly-0.55.0.dev941.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 24-Apr-23 10:10 opentf_toolkit_nightly-0.55.0.dev941.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5998 b- defN 24-Apr-23 10:10 opentf_toolkit_nightly-0.55.0.dev941.dist-info/RECORD
-55 files, 334571 bytes uncompressed, 81231 bytes compressed:  75.7%
+Zip file size: 91386 bytes, number of entries: 55
+-rw-r--r--  2.0 unx    21952 b- defN 24-Apr-30 16:39 opentf/commons/__init__.py
+-rw-r--r--  2.0 unx    15899 b- defN 24-Apr-30 16:39 opentf/commons/auth.py
+-rw-r--r--  2.0 unx     7828 b- defN 24-Apr-30 16:39 opentf/commons/config.py
+-rw-r--r--  2.0 unx    18412 b- defN 24-Apr-30 16:39 opentf/commons/datasources.py
+-rw-r--r--  2.0 unx    19251 b- defN 24-Apr-30 16:39 opentf/commons/expressions.py
+-rw-r--r--  2.0 unx     5894 b- defN 24-Apr-30 16:39 opentf/commons/pubsub.py
+-rw-r--r--  2.0 unx     4044 b- defN 24-Apr-30 16:39 opentf/commons/schemas.py
+-rw-r--r--  2.0 unx     7134 b- defN 24-Apr-30 16:39 opentf/commons/selectors.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-30 16:39 opentf/schemas/__init__.py
+-rw-rw-rw-  2.0 unx     2105 b- defN 24-Apr-30 16:39 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json
+-rw-rw-rw-  2.0 unx     1230 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json
+-rw-rw-rw-  2.0 unx     1366 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/AllureCollectorOutput.json
+-rw-rw-rw-  2.0 unx     1239 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ChannelHandlerHooks.json
+-rw-rw-rw-  2.0 unx     2174 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/EventBusConfig.json
+-rw-rw-rw-  2.0 unx     2702 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionCommand.json
+-rw-rw-rw-  2.0 unx     1347 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionError.json
+-rw-rw-rw-  2.0 unx     3050 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionResult.json
+-rw-rw-rw-  2.0 unx     1754 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorCommand.json
+-rw-rw-rw-  2.0 unx     6633 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorResult.json
+-rw-rw-rw-  2.0 unx     8565 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/InsightCollector.json
+-rw-rw-rw-  2.0 unx     3790 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/Notification.json
+-rw-rw-rw-  2.0 unx     2803 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/PluginMetadata.json
+-rw-rw-rw-  2.0 unx     2875 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ProviderCommand.json
+-rw-rw-rw-  2.0 unx     3878 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ProviderConfig.json
+-rw-rw-rw-  2.0 unx     4259 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ProviderResult.json
+-rw-rw-rw-  2.0 unx     2910 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/QualityGate.json
+-rw-rw-rw-  2.0 unx     1182 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/RetentionPolicy.json
+-rw-rw-rw-  2.0 unx     6301 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/SSHServiceConfig.json
+-rw-rw-rw-  2.0 unx     2835 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/ServiceConfig.json
+-rw-rw-rw-  2.0 unx     5031 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/Subscription.json
+-rw-rw-rw-  2.0 unx     1405 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/TrackerPublisher.json
+-rw-rw-rw-  2.0 unx     9899 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/Workflow.json
+-rw-rw-rw-  2.0 unx     1351 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCanceled.json
+-rw-rw-rw-  2.0 unx     1292 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCompleted.json
+-rw-rw-rw-  2.0 unx     1577 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowResult.json
+-rw-rw-rw-  2.0 unx     2232 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha2/Notification.json
+-rw-rw-rw-  2.0 unx     6612 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1alpha2/SSHServiceConfig.json
+-rw-rw-rw-  2.0 unx     4273 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/ExecutionCommand.json
+-rw-rw-rw-  2.0 unx    10205 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/GeneratorResult.json
+-rw-rw-rw-  2.0 unx     4581 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/ProviderCommand.json
+-rw-rw-rw-  2.0 unx     4563 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/ProviderConfig.json
+-rw-rw-rw-  2.0 unx     7494 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/ProviderResult.json
+-rw-rw-rw-  2.0 unx     2850 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/ServiceConfig.json
+-rw-rw-rw-  2.0 unx    15424 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json
+-rw-rw-rw-  2.0 unx     3517 b- defN 24-Apr-30 16:39 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json
+-rw-rw-rw-  2.0 unx     2423 b- defN 24-Apr-30 16:39 opentf/scripts/launch_java_service.sh
+-rw-r--r--  2.0 unx    21279 b- defN 24-Apr-30 16:39 opentf/scripts/startup.py
+-rw-r--r--  2.0 unx    19610 b- defN 24-Apr-30 16:39 opentf/toolkit/__init__.py
+-rw-r--r--  2.0 unx    17156 b- defN 24-Apr-30 16:39 opentf/toolkit/channels.py
+-rw-r--r--  2.0 unx     9320 b- defN 24-Apr-30 16:39 opentf/toolkit/core.py
+-rw-rw-rw-  2.0 unx    11357 b- defN 24-Apr-30 16:39 opentf_toolkit_nightly-0.55.0.dev950.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1945 b- defN 24-Apr-30 16:39 opentf_toolkit_nightly-0.55.0.dev950.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-30 16:39 opentf_toolkit_nightly-0.55.0.dev950.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-30 16:39 opentf_toolkit_nightly-0.55.0.dev950.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     5998 b- defN 24-Apr-30 16:39 opentf_toolkit_nightly-0.55.0.dev950.dist-info/RECORD
+55 files, 334905 bytes uncompressed, 81354 bytes compressed:  75.7%
```

## zipnote {}

```diff
@@ -144,23 +144,23 @@
 
 Filename: opentf/toolkit/channels.py
 Comment: 
 
 Filename: opentf/toolkit/core.py
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev941.dist-info/LICENSE
+Filename: opentf_toolkit_nightly-0.55.0.dev950.dist-info/LICENSE
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev941.dist-info/METADATA
+Filename: opentf_toolkit_nightly-0.55.0.dev950.dist-info/METADATA
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev941.dist-info/WHEEL
+Filename: opentf_toolkit_nightly-0.55.0.dev950.dist-info/WHEEL
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev941.dist-info/top_level.txt
+Filename: opentf_toolkit_nightly-0.55.0.dev950.dist-info/top_level.txt
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev941.dist-info/RECORD
+Filename: opentf_toolkit_nightly-0.55.0.dev950.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## opentf/commons/__init__.py

```diff
@@ -581,26 +581,30 @@
 
 
 ########################################################################
 # API Server Helpers
 
 
 def make_status_response(
-    reason: str, message: str, details: Optional[Dict[str, Any]] = None
+    reason: str,
+    message: str,
+    details: Optional[Dict[str, Any]] = None,
+    silent: bool = False,
 ) -> Response:
     """Return a new status response object.
 
     # Required parameters
 
     - reason: a non-empty string (must exist in `REASON_STATUS`)
     - message: a string
 
     # Optional parameters:
 
     - details: a dictionary or None (None by default)
+    - silent: a boolean (False by default)
 
     # Returned value
 
     A _flask.Response_.  Its body is a _status_ JSON object.  It has
     the following entries:
 
     - kind: a string (`'Status'`)
@@ -609,18 +613,19 @@
     - status: a string (either `'Success'` or `'Failure'`)
     - message: a string (`message`)
     - reason: a string (`reason`)
     - details: a dictionary or None (`details`)
     - code: an integer (derived from `reason`)
     """
     code = REASON_STATUS[reason]
-    if code // 100 == 4:
-        logging.warning(message)
-    elif code // 100 == 5:
-        logging.error(message)
+    if not silent:
+        if code // 100 == 4:
+            logging.warning(message)
+        elif code // 100 == 5:
+            logging.error(message)
     return make_response(
         {
             'kind': 'Status',
             'apiVersion': 'v1',
             'metadata': {},
             'status': 'Success' if code // 100 == 2 else 'Failure',
             'message': message,
```

## opentf/commons/datasources.py

```diff
@@ -10,15 +10,16 @@
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 """Test case metadata retrieval helpers"""
 
-from typing import Any, Dict, Generator, List, Optional, Set
+from typing import Any, Dict, List, Optional
+
 from collections import defaultdict
 
 from opentf.commons.expressions import evaluate_bool
 from opentf.toolkit.core import warning
 
 
 ########################################################################
@@ -64,25 +65,22 @@
     return [what] if isinstance(what, str) else what
 
 
 ########################################################################
 ## Datasource: Testcases
 
 
-def in_scope(expr: str, contexts: Dict[str, Any], scopes_errors: Set[str]) -> bool:
-    """Safely evaluate quality gate scope."""
+def in_scope(expr: str, contexts: Dict[str, Any]) -> bool:
+    """Safely evaluate datasource scope."""
     try:
         return evaluate_bool(expr, contexts)
     except ValueError as err:
-        msg = f'Invalid conditional {expr}: {err}.'
-        scopes_errors.add(msg)
+        raise ValueError(f'Invalid conditional {expr}: {err}.')
     except KeyError as err:
-        msg = f'Nonexisting context entry in expression {expr}: {err}.'
-        scopes_errors.add(msg)
-    return False
+        raise ValueError(f'Nonexisting context entry in expression {expr}: {err}.')
 
 
 def get_testresults(events: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
     """Return a possibly empty list of Notifications.
 
     Each notification in the list is guaranteed to have a
     `spec.testResults` entry.
@@ -296,41 +294,63 @@
         if origin_id in providerid_creationtimestamps:
             return providerid_creationtimestamps[origin_id]
     return ''
 
 
 def _get_testresult_timestamps(
     events: List[Dict[str, Any]],
-    testresults: List[Dict[str, Any]],
-    testcase_metadata: Dict[str, Any],
+    testcases: Dict[str, Any],
 ):
-    """Set timestamp for each testcase in testcase_metadata.
+    """Set timestamp for each testcase in testcases.
 
     The timestamp is the one of the originating ProviderResult.
     """
     providerid_creationtimestamps = {
         event['metadata']['step_id']: event['metadata'].get('creationTimestamp', '')
         for event in events
         if event['kind'] == 'ProviderResult'
     }
 
     origins_results = defaultdict(list)
-    for item in testresults:
-        for result in item['spec']['testResults']:
-            origins_results[result['attachment_origin']].append(result['id'])
+    for uuid, data in testcases.items():
+        origins_results[data['execution']].append(uuid)
 
     for event in filter(lambda event: event['kind'] == 'ExecutionResult', events):
         for attachment in event['metadata'].get('attachments', {}).values():
             if attachment['uuid'] in origins_results:
                 timestamp = _get_timestamp(event, providerid_creationtimestamps)
                 for result_id in origins_results[attachment['uuid']]:
-                    testcase_metadata[result_id]['timestamp'] = timestamp
+                    testcases[result_id]['timestamp'] = timestamp
+
+
+def _make_testcase_from_testresult(
+    item: Dict[str, Any], execution_id: str, labels: Dict[str, Any], scope: str
+) -> Dict[str, Any]:
+    testcase = {
+        'name': item['name'],
+        'status': item['status'],
+        'duration': item.get('duration', 0),
+        'execution': execution_id,
+        'test': labels.copy(),
+    }
+    testcase['test']['status'] = item['status']
+    if item['status'] in FAILURE_STATUSES:
+        for key in DETAILS_KEYS:
+            if item.get(key):
+                testcase[key] = item[key]
+    if item.get('errorsList'):
+        testcase['errorsList'] = item['errorsList']
+    if not in_scope(scope, testcase):
+        return {}
+    return testcase
 
 
-def get_testcases(events: List[Dict[str, Any]]) -> Dict[str, Dict[str, Any]]:
+def get_testcases(
+    events: List[Dict[str, Any]], scope: str = 'true'
+) -> Dict[str, Dict[str, Any]]:
     """Extract metadata for each test result.
 
     Test results are Notification events with a `.spec.testResults`
     entry.
 
     # Required parameters
 
@@ -340,29 +360,31 @@
 
     A possibly empty dictionary.  Keys are the testresult IDs, values
     are dictionaries with the following entries:
 
     - name: a string, the test case name
     - status: a string, the test case status
     - duration: a string, the test case execution time in ms
+    - execution: a string, the test case execution (=related attachment) uuid
     - timestamp: a string, provider creation timestamp
     - test: a dictionary, the test case metadata
     - failureDetails|errorDetails|warningDetails: a dictionary with test
       case failure details
-    - errorsList: a Robot Framework specific list with execution general
-      errors
+    - errorsList: a provider generated attachment specific list with execution general
+      errors (currently for Robot Framework only)
 
     `testcases` is a dictionary of entries like:
 
     ```
     "<<<testcase_uuid>>>": {
         "name": "<<<[Test suite#]Test case name>>>",
         "status": "<<<SUCCESS|FAILURE|ERROR|SKIPPED>>>",
         "duration": "<<<test execution time in ms>>>",
-        "timestamp": "<<<provider creation timestamp>>>"
+        "timestamp": "<<<provider creation timestamp>>>",
+        "execution": "<<<execution ID>>>",
         "test": {
             "job": "<<<job name>>>",
             "uses": "<<<provider function>>>",
             "technology": "<<<test technology>>>",
             "runs-on": [<<<list of execution environment tags>>>],
             "managed": boolean, True for test cases managed by a test referential
             "status": "<<<SUCCESS|FAILURE|ERROR|SKIPPED>>>"
@@ -380,57 +402,48 @@
         ]
     }
     ```
 
     # Raised exceptions
 
     A _ValueError_ exception is raised if there were no test results in
-    `events`.
+    `events` or some scope errors occured retrieving test results.
     """
-    testcases = {}
-    results = False
     if _uses_inception(events):
         testresults = _get_inception_testresults(events)
     else:
         testresults = get_testresults(events)
 
+    if not testresults:
+        raise ValueError('No test results in events.')
+
+    testcases = {}
     for testresult in testresults:
-        results = True
-        labels = _get_testresult_labels(
-            testresult['metadata']['attachment_origin'][0], events
-        )
+        execution_id = testresult['metadata']['attachment_origin'][0]
+        labels = _get_testresult_labels(execution_id, events)
         if not labels:
             continue
-        for testcase in testresult['spec']['testResults']:
-            testcases[testcase['id']] = {
-                'name': testcase['name'],
-                'status': testcase['status'],
-                'duration': testcase.get('duration', 0),
-                'test': labels.copy(),
-            }
-            testcases[testcase['id']]['test']['status'] = testcase['status']
-            data = {}
-            if testcase['status'] in FAILURE_STATUSES:
-                data = {key: testcase[key] for key in DETAILS_KEYS if testcase.get(key)}
-            if testcase.get('errorsList'):
-                data['errorsList'] = testcase['errorsList']
-            testcases[testcase['id']].update(data)
-    if not results:
-        raise ValueError('No test results in events.')
-    _get_testresult_timestamps(events, testresults, testcases)
+        for item in testresult['spec']['testResults']:
+            if testcase := _make_testcase_from_testresult(
+                item, execution_id, labels, scope
+            ):
+                testcases[item['id']] = testcase
+    if not testcases:
+        raise ValueError(f'No test cases matching scope `{scope}`.')
+
+    _get_testresult_timestamps(events, testcases)
+
     return testcases
 
 
 ########################################################################
 ## Datasource: Tags
 
 
-def get_tags(
-    events: List[Dict[str, Any]], testcase_metadata: Optional[Dict[str, Any]] = None
-) -> Dict[str, Any]:
+def get_tags(events: List[Dict[str, Any]], scope: str = 'true') -> Dict[str, Any]:
     """Extract metadata for each execution environment tag.
 
     # Required parameters:
 
     - events: a list of events
 
     # Returned value:
@@ -448,15 +461,15 @@
         "ERROR": <<<technical KO tests count>>>,
         'total': <<<total tests count>>>,
         'other': <<<SKIPPED + ERROR tests count>>>
     }
     ```
     """
     try:
-        testcase_metadata = testcase_metadata or get_testcases(events)
+        testcase_metadata = get_testcases(events, scope)
     except ValueError as err:
         raise ValueError(str(err) + ' Cannot extract metadata for tags.')
     tags = {}
     for testcase in testcase_metadata.values():
         for tag in testcase['test']['runs-on']:
             tags.setdefault(tag, {SUCCESS: 0, FAILURE: 0, ERROR: 0, SKIPPED: 0})
             tags[tag][testcase['status']] += 1
@@ -467,15 +480,15 @@
     return tags
 
 
 ########################################################################
 ## Datasource: Jobs
 
 
-def _evaluate_test_results(jobs_testcases: Dict[str, Any]) -> Dict[str, Any]:
+def _evaluate_test_results(jobs_testcases: Dict[str, Any]) -> Dict[str, Dict[str, int]]:
     """Summarize job testcases.
 
     # Returned value
 
     A dictionary with one entry per job (a dictionary with keys being
     statuses and values being counts).
     """
@@ -490,17 +503,15 @@
             ERROR: errors,
             SKIPPED: skipped,
             TOTAL: len(testcases),
         }
     return summaries
 
 
-def get_jobs(
-    events: List[Dict[str, Any]], testcase_metadata: Optional[Dict[str, Any]] = None
-) -> Dict[str, Any]:
+def get_jobs(events: List[Dict[str, Any]], scope: str = 'true') -> Dict[str, Any]:
     """Extract metadata for each job.
 
     # Required parameters:
 
     - events: a list of events
 
     # Returned value:
@@ -530,15 +541,15 @@
             "<<<variable name>>>": "<<<variable value>>>",
             ...
         }
     }
     ```
     """
     try:
-        testcase_metadata = testcase_metadata or get_testcases(events)
+        testcase_metadata = get_testcases(events, scope)
     except ValueError as err:
         raise ValueError(str(err) + ' Cannot extract metadata for jobs.')
     jobs_testcases = _get_sorted_testcases(testcase_metadata, ['test', 'job'])
     if 'KeyError' in jobs_testcases:
         raise ValueError('Cannot get jobs-ordered dataset from testcases.')
     job_events = [
         event
```

## Comparing `opentf_toolkit_nightly-0.55.0.dev941.dist-info/LICENSE` & `opentf_toolkit_nightly-0.55.0.dev950.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `opentf_toolkit_nightly-0.55.0.dev941.dist-info/METADATA` & `opentf_toolkit_nightly-0.55.0.dev950.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: opentf-toolkit-nightly
-Version: 0.55.0.dev941
+Version: 0.55.0.dev950
 Summary: OpenTestFactory Orchestrator Toolkit
 Home-page: https://gitlab.com/henixdevelopment/open-source/opentestfactory/python-toolkit
 Author: Martin Lafaix
 Author-email: mlafaix@henix.com
 Maintainer: Henix
 Maintainer-email: opentestfactory@henix.com
 License: Apache Software License (https://www.apache.org/licenses/LICENSE-2.0)
```

## Comparing `opentf_toolkit_nightly-0.55.0.dev941.dist-info/RECORD` & `opentf_toolkit_nightly-0.55.0.dev950.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
-opentf/commons/__init__.py,sha256=ITzg1zfZgA5-4wvmJfjLN94_Z06HeMl0szd6dalrrKY,21839
+opentf/commons/__init__.py,sha256=KRY8ShQw_0ZZ0oEOiKi4-xnWofE_QsFjEe1T8wUxJ-w,21952
 opentf/commons/auth.py,sha256=bM2Z3kxm2Wku1lKXaRAIg37LHvXWAXIZIqjplDfN2P8,15899
 opentf/commons/config.py,sha256=GmvInVnUsXIwlNfgTQeQ_pPs97GeGTGn2S2QZEFwss8,7828
-opentf/commons/datasources.py,sha256=IKljfR59JSRutXF1Q10MwCuhH5bnVLjo0h7IteNFn_U,18191
+opentf/commons/datasources.py,sha256=EIssc6CyC8s5FYVZtdEo7IpCQxX92mFntYWmsoO62go,18412
 opentf/commons/expressions.py,sha256=A68F27Our8oVVphUrRvB5haSlqj2YCrH2OxHPNLBio4,19251
 opentf/commons/pubsub.py,sha256=7khxAHVZiwJRcwIBJ6MPR-f3xY9144-2eNLROwq5F-4,5894
 opentf/commons/schemas.py,sha256=lokZCU-wmsIkzVA-TVENtC7Io_GmYxrP-FQaOOowg4s,4044
 opentf/commons/selectors.py,sha256=DEpLgRAr5HXSpSYI4liXP2hLUTvOSexFa9Vfa1xIQTk,7134
 opentf/schemas/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json,sha256=JXsfNAPSEYggeyaDutSQBeG38o4Bmcr70dPLWWeqIh8,2105
 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json,sha256=NQykqU-lKE8LtBhBiFUcpVJq00MRG6dZsoM1xedx6uQ,1230
@@ -44,12 +44,12 @@
 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json,sha256=QZ8mM9PhzsI9gTmwmKTWYNoRn--rtcM3L0PzgnPBfMU,15424
 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json,sha256=rEvK2YWL5lG94_qYgR_GnLWNsaQhaQ-2kuZdWJr5NnY,3517
 opentf/scripts/launch_java_service.sh,sha256=S0jAaCuv2sZy0Gf2NGBuPX-eD531rcM-b0fNyhmzSjw,2423
 opentf/scripts/startup.py,sha256=Da2zo93pBWbdRmj-wgekgLcF94rpNc3ZkbvR8R0w8XY,21279
 opentf/toolkit/__init__.py,sha256=g3DiTZlSvvzZWKgM8qU47muLqjQrpWZ6M6PWZ-sBsvQ,19610
 opentf/toolkit/channels.py,sha256=Cng3b4LUsxvCHUbp_skys9CFcKZMfcKhA_ODg_EAlIE,17156
 opentf/toolkit/core.py,sha256=L1fT4YzwZjqE7PUXhJL6jSVQge3ohBQv5UBb9DAC6oo,9320
-opentf_toolkit_nightly-0.55.0.dev941.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-opentf_toolkit_nightly-0.55.0.dev941.dist-info/METADATA,sha256=Z6JJRflN4y9tRp6aCn8WWhNF3b6J6PIU1jbndC5ys_4,1945
-opentf_toolkit_nightly-0.55.0.dev941.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-opentf_toolkit_nightly-0.55.0.dev941.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
-opentf_toolkit_nightly-0.55.0.dev941.dist-info/RECORD,,
+opentf_toolkit_nightly-0.55.0.dev950.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+opentf_toolkit_nightly-0.55.0.dev950.dist-info/METADATA,sha256=gT2hqExdA5awFpPmq43fIso434TuFdAQOrSlqz1EsG4,1945
+opentf_toolkit_nightly-0.55.0.dev950.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+opentf_toolkit_nightly-0.55.0.dev950.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
+opentf_toolkit_nightly-0.55.0.dev950.dist-info/RECORD,,
```

