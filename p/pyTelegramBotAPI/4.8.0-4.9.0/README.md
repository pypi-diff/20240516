# Comparing `tmp/pyTelegramBotAPI-4.8.0.tar.gz` & `tmp/pyTelegramBotAPI-4.9.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist\pyTelegramBotAPI-4.8.0.tar", last modified: Mon Nov 28 16:28:01 2022, max compression
+gzip compressed data, was "dist\pyTelegramBotAPI-4.9.0.tar", last modified: Mon Jan  2 15:03:55 2023, max compression
```

## Comparing `pyTelegramBotAPI-4.8.0.tar` & `pyTelegramBotAPI-4.9.0.tar`

### file list

```diff
@@ -1,47 +1,47 @@
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.225506 pyTelegramBotAPI-4.8.0/
--rw-rw-rw-   0        0        0    18387 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/LICENSE
--rw-rw-rw-   0        0        0    45305 2022-11-28 16:28:01.224493 pyTelegramBotAPI-4.8.0/PKG-INFO
--rw-rw-rw-   0        0        0    43623 2022-11-28 16:16:57.000000 pyTelegramBotAPI-4.8.0/README.md
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.172143 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/
--rw-rw-rw-   0        0        0    45305 2022-11-28 16:28:00.000000 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0     1057 2022-11-28 16:28:00.000000 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2022-11-28 16:28:00.000000 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0      202 2022-11-28 16:28:00.000000 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/requires.txt
--rw-rw-rw-   0        0        0        8 2022-11-28 16:28:00.000000 pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       42 2022-11-28 16:28:01.225506 pyTelegramBotAPI-4.8.0/setup.cfg
--rw-rw-rw-   0        0        0     1507 2022-10-21 07:16:54.000000 pyTelegramBotAPI-4.8.0/setup.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.198635 pyTelegramBotAPI-4.8.0/telebot/
--rw-rw-rw-   0        0        0   299103 2022-11-28 16:12:26.000000 pyTelegramBotAPI-4.8.0/telebot/__init__.py
--rw-rw-rw-   0        0        0    81205 2022-11-13 10:05:37.000000 pyTelegramBotAPI-4.8.0/telebot/apihelper.py
--rw-rw-rw-   0        0        0   272383 2022-11-28 16:12:26.000000 pyTelegramBotAPI-4.8.0/telebot/async_telebot.py
--rw-rw-rw-   0        0        0    13458 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_filters.py
--rw-rw-rw-   0        0        0     3579 2022-10-21 07:16:54.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_handler_backends.py
--rw-rw-rw-   0        0        0    81493 2022-11-13 10:05:37.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_helper.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.205796 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/
--rw-rw-rw-   0        0        0      425 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/__init__.py
--rw-rw-rw-   0        0        0     1808 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/base_storage.py
--rw-rw-rw-   0        0        0     2396 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/memory_storage.py
--rw-rw-rw-   0        0        0     3897 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/pickle_storage.py
--rw-rw-rw-   0        0        0     5864 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/redis_storage.py
--rw-rw-rw-   0        0        0     5358 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/callback_data.py
--rw-rw-rw-   0        0        0    13560 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/custom_filters.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.207704 pyTelegramBotAPI-4.8.0/telebot/ext/
--rw-rw-rw-   0        0        0       66 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/ext/__init__.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.210707 pyTelegramBotAPI-4.8.0/telebot/ext/aio/
--rw-rw-rw-   0        0        0      143 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/ext/aio/__init__.py
--rw-rw-rw-   0        0        0     3650 2022-11-13 10:05:37.000000 pyTelegramBotAPI-4.8.0/telebot/ext/aio/webhooks.py
--rw-rw-rw-   0        0        0      663 2022-10-21 07:16:54.000000 pyTelegramBotAPI-4.8.0/telebot/ext/reloader.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.215877 pyTelegramBotAPI-4.8.0/telebot/ext/sync/
--rw-rw-rw-   0        0        0      140 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/ext/sync/__init__.py
--rw-rw-rw-   0        0        0     3381 2022-11-13 10:05:37.000000 pyTelegramBotAPI-4.8.0/telebot/ext/sync/webhooks.py
--rw-rw-rw-   0        0        0     8999 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/formatting.py
--rw-rw-rw-   0        0        0     8741 2022-10-21 07:16:54.000000 pyTelegramBotAPI-4.8.0/telebot/handler_backends.py
-drwxrwxrwx   0        0        0        0 2022-11-28 16:28:01.222511 pyTelegramBotAPI-4.8.0/telebot/storage/
--rw-rw-rw-   0        0        0      393 2022-09-10 12:08:21.000000 pyTelegramBotAPI-4.8.0/telebot/storage/__init__.py
--rw-rw-rw-   0        0        0     1784 2022-09-17 08:45:55.000000 pyTelegramBotAPI-4.8.0/telebot/storage/base_storage.py
--rw-rw-rw-   0        0        0     2377 2022-09-17 08:45:25.000000 pyTelegramBotAPI-4.8.0/telebot/storage/memory_storage.py
--rw-rw-rw-   0        0        0     4067 2022-09-17 08:46:31.000000 pyTelegramBotAPI-4.8.0/telebot/storage/pickle_storage.py
--rw-rw-rw-   0        0        0     5692 2022-09-17 08:46:46.000000 pyTelegramBotAPI-4.8.0/telebot/storage/redis_storage.py
--rw-rw-rw-   0        0        0   284671 2022-11-28 16:12:26.000000 pyTelegramBotAPI-4.8.0/telebot/types.py
--rw-rw-rw-   0        0        0    20339 2022-11-13 10:18:11.000000 pyTelegramBotAPI-4.8.0/telebot/util.py
--rw-rw-rw-   0        0        0       98 2022-11-28 16:13:39.000000 pyTelegramBotAPI-4.8.0/telebot/version.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.183984 pyTelegramBotAPI-4.9.0/
+-rw-rw-rw-   0        0        0    18387 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/LICENSE
+-rw-rw-rw-   0        0        0    45477 2023-01-02 15:03:55.168370 pyTelegramBotAPI-4.9.0/PKG-INFO
+-rw-rw-rw-   0        0        0    44685 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/README.md
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.121489 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/
+-rw-rw-rw-   0        0        0    45477 2023-01-02 15:03:54.000000 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     1057 2023-01-02 15:03:54.000000 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-01-02 15:03:54.000000 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0      202 2023-01-02 15:03:54.000000 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        8 2023-01-02 15:03:54.000000 pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       42 2023-01-02 15:03:55.183984 pyTelegramBotAPI-4.9.0/setup.cfg
+-rw-rw-rw-   0        0        0     1552 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/setup.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.152746 pyTelegramBotAPI-4.9.0/telebot/
+-rw-rw-rw-   0        0        0   310248 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/__init__.py
+-rw-rw-rw-   0        0        0    84643 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/apihelper.py
+-rw-rw-rw-   0        0        0   283155 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/async_telebot.py
+-rw-rw-rw-   0        0        0    13458 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_filters.py
+-rw-rw-rw-   0        0        0     3710 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_handler_backends.py
+-rw-rw-rw-   0        0        0    84986 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_helper.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.152746 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/
+-rw-rw-rw-   0        0        0      425 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/__init__.py
+-rw-rw-rw-   0        0        0     1808 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/base_storage.py
+-rw-rw-rw-   0        0        0     2396 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/memory_storage.py
+-rw-rw-rw-   0        0        0     3897 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/pickle_storage.py
+-rw-rw-rw-   0        0        0     5864 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/redis_storage.py
+-rw-rw-rw-   0        0        0     5358 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/callback_data.py
+-rw-rw-rw-   0        0        0    13560 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/custom_filters.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.152746 pyTelegramBotAPI-4.9.0/telebot/ext/
+-rw-rw-rw-   0        0        0       66 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/__init__.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.168370 pyTelegramBotAPI-4.9.0/telebot/ext/aio/
+-rw-rw-rw-   0        0        0      143 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/aio/__init__.py
+-rw-rw-rw-   0        0        0     3788 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/aio/webhooks.py
+-rw-rw-rw-   0        0        0      826 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/reloader.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.168370 pyTelegramBotAPI-4.9.0/telebot/ext/sync/
+-rw-rw-rw-   0        0        0      140 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/sync/__init__.py
+-rw-rw-rw-   0        0        0     3513 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/ext/sync/webhooks.py
+-rw-rw-rw-   0        0        0     9009 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/formatting.py
+-rw-rw-rw-   0        0        0     9029 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/handler_backends.py
+drwxrwxrwx   0        0        0        0 2023-01-02 15:03:55.168370 pyTelegramBotAPI-4.9.0/telebot/storage/
+-rw-rw-rw-   0        0        0      393 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/storage/__init__.py
+-rw-rw-rw-   0        0        0     1784 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/storage/base_storage.py
+-rw-rw-rw-   0        0        0     2377 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/storage/memory_storage.py
+-rw-rw-rw-   0        0        0     4067 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/storage/pickle_storage.py
+-rw-rw-rw-   0        0        0     5692 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/storage/redis_storage.py
+-rw-rw-rw-   0        0        0   298123 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/types.py
+-rw-rw-rw-   0        0        0    21107 2023-01-02 14:58:39.000000 pyTelegramBotAPI-4.9.0/telebot/util.py
+-rw-rw-rw-   0        0        0       98 2023-01-02 15:00:00.000000 pyTelegramBotAPI-4.9.0/telebot/version.py
```

### Comparing `pyTelegramBotAPI-4.8.0/LICENSE` & `pyTelegramBotAPI-4.9.0/LICENSE`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/PKG-INFO` & `pyTelegramBotAPI-4.9.0/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyTelegramBotAPI
-Version: 4.8.0
+Version: 4.9.0
 Summary: Python Telegram bot api. 
 Home-page: https://github.com/eternnoir/pyTelegramBotAPI
 Author: eternnoir
 Author-email: eternnoir@gmail.com
 License: GPL2
 Keywords: telegram bot api tools
 Classifier: Development Status :: 5 - Production/Stable
@@ -33,15 +33,15 @@
 [![PyPi status](https://img.shields.io/pypi/status/pytelegrambotapi.svg?style=flat-square)](https://pypi.python.org/pypi/pytelegrambotapi)
 
 # <p align="center">pyTelegramBotAPI
 
 <p align="center">A simple, but extensible Python implementation for the <a href="https://core.telegram.org/bots/api">Telegram Bot API</a>.</p>
 <p align="center">Both synchronous and asynchronous.</p>
 
-## <p align="center">Supported Bot API version: <a href="https://core.telegram.org/bots/api#november-5-2022">6.3</a>!
+## <p align="center">Supported Bot API version: <a href="https://core.telegram.org/bots/api#december-30-2022">6.4</a>!
 
 <h2><a href='https://pytba.readthedocs.io/en/latest/index.html'>Official documentation</a></h2>
 	
 ## Contents
 
   * [Getting started](#getting-started)
   * [Writing your first bot](#writing-your-first-bot)
@@ -899,14 +899,15 @@
 * [ETHLectureBot](https://t.me/ETHLectureBot) ([source](https://github.com/TrevorWinstral/ETHLectureBot)) by *TrevorWinstral* - Notifies ETH students when their lectures have been uploaded
 * [Vlun Finder Bot](https://github.com/resinprotein2333/Vlun-Finder-bot) by [Resinprotein2333](https://github.com/resinprotein2333). This bot can help you to find The information of CVE vulnerabilities.
 * [ETHGasFeeTrackerBot](https://t.me/ETHGasFeeTrackerBot) ([Source](https://github.com/DevAdvik/ETHGasFeeTrackerBot]) by *DevAdvik* - Get Live Ethereum Gas Fees in GWEI
 * [Google Sheet Bot](https://github.com/JoachimStanislaus/Tele_Sheet_bot) by [JoachimStanislaus](https://github.com/JoachimStanislaus). This bot can help you to track your expenses by uploading your bot entries to your google sheet.
 * [GrandQuiz Bot](https://github.com/Carlosma7/TFM-GrandQuiz) by [Carlosma7](https://github.com/Carlosma7). This bot is a trivia game that allows you to play with people from different ages. This project addresses the use of a system through chatbots to carry out a social and intergenerational game as an alternative to traditional game development.
 * [Diccionario de la RAE](https://t.me/dleraebot) ([source](https://github.com/studentenherz/dleraebot)) This bot lets you find difinitions of words in Spanish using [RAE's dictionary](https://dle.rae.es/). It features direct message and inline search.
 * [remoteTelegramShell](https://github.com/EnriqueMoran/remoteTelegramShell) by [EnriqueMoran](https://github.com/EnriqueMoran). Control your LinuxOS computer through Telegram.
+* [Commerce Telegram Bot](https://github.com/ayitinya/commerce-telegram-bot/). Make purchases of items in a store with an Admin panel for data control and notifications.
 * [Pyfram-telegram-bot](https://github.com/skelly37/pyfram-telegram-bot) Query wolframalpha.com and make use of its API through Telegram.
 * [TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo) This Bot can understand spoken text in videos and translate it to English
 * [Zyprexa](https://t.me/mathemathicsBot) ([source](https://github.com/atif5/zyprexa)) Zyprexa can solve, help you solve any mathematical problem you encounter and convert your regular mathematical expressions into beautiful imagery using LaTeX.
 * [Bincode-telegram-bot](https://github.com/tusharhero/bincode-telegram-bot) by [tusharhero](https://github.com/tusharhero) - Makes [bincodes](https://github.com/tusharhero/bincode) from text provides and also converts them back to text.
 * [hydrolib_bot](https://github.com/Mayson90/hydrolib_bot) Toolset for Hydrophilia tabletop game (game cards, rules, structure...).
 * [Gugumoe-bot](http://t.me/gugumoe_bot) ([source](https://github.com/GooGuJiang/Gugumoe-bot)) by [咕谷酱](https://gmoe.cc) GuXiaoJiang is a multi-functional robot, such as OSU game information query, IP test, animation screenshot search and other functions.
 * [Feedback-bot](https://github.com/coder2020official/feedbackbot) A feedback bot for user-admin communication. Made on AsyncTeleBot, using [template](https://github.com/coder2020official/asynctelebot_template).
```

#### html2text {}

```diff
@@ -1,8 +1,8 @@
-Metadata-Version: 2.1 Name: pyTelegramBotAPI Version: 4.8.0 Summary: Python
+Metadata-Version: 2.1 Name: pyTelegramBotAPI Version: 4.9.0 Summary: Python
 Telegram bot api. Home-page: https://github.com/eternnoir/pyTelegramBotAPI
 Author: eternnoir Author-email: eternnoir@gmail.com License: GPL2 Keywords:
 telegram bot api tools Classifier: Development Status :: 5 - Production/Stable
 Classifier: Programming Language :: Python :: 3 Classifier: Environment ::
 Console Classifier: License :: OSI Approved :: GNU General Public License v2
 (GPLv2) Description-Content-Type: text/markdown Provides-Extra: json Provides-
 Extra: PIL Provides-Extra: redis Provides-Extra: aioredis Provides-Extra:
@@ -19,15 +19,15 @@
 pyTelegramBotAPI.svg)](https://pypi.org/project/pyTelegramBotAPI/) [![PyPi
 status](https://img.shields.io/pypi/status/pytelegrambotapi.svg?style=flat-
 square)](https://pypi.python.org/pypi/pytelegrambotapi) #
                                pyTelegramBotAPI
    A simple, but extensible Python implementation for the _T_e_l_e_g_r_a_m_ _B_o_t_ _A_P_I.
                       Both synchronous and asynchronous.
 ##
-                        Supported Bot API version: _6_._3!
+                        Supported Bot API version: _6_._4!
 ********** _OO_ff_ff_ii_cc_ii_aa_ll_ _dd_oo_cc_uu_mm_ee_nn_tt_aa_tt_ii_oo_nn **********
 ## Contents * [Getting started](#getting-started) * [Writing your first bot]
 (#writing-your-first-bot) * [Prerequisites](#prerequisites) * [A simple echo
 bot](#a-simple-echo-bot) * [General API Documentation](#general-api-
 documentation) * [Types](#types) * [Methods](#methods) * [General use of the
 API](#general-use-of-the-api) * [Message handlers](#message-handlers) * [Edited
 Message handler](#edited-message-handler) * [Channel Post handler](#channel-
@@ -550,19 +550,21 @@
 addresses the use of a system through chatbots to carry out a social and
 intergenerational game as an alternative to traditional game development. *
 [Diccionario de la RAE](https://t.me/dleraebot) ([source](https://github.com/
 studentenherz/dleraebot)) This bot lets you find difinitions of words in
 Spanish using [RAE's dictionary](https://dle.rae.es/). It features direct
 message and inline search. * [remoteTelegramShell](https://github.com/
 EnriqueMoran/remoteTelegramShell) by [EnriqueMoran](https://github.com/
-EnriqueMoran). Control your LinuxOS computer through Telegram. * [Pyfram-
-telegram-bot](https://github.com/skelly37/pyfram-telegram-bot) Query
-wolframalpha.com and make use of its API through Telegram. *
-[TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo) This
-Bot can understand spoken text in videos and translate it to English *
+EnriqueMoran). Control your LinuxOS computer through Telegram. * [Commerce
+Telegram Bot](https://github.com/ayitinya/commerce-telegram-bot/). Make
+purchases of items in a store with an Admin panel for data control and
+notifications. * [Pyfram-telegram-bot](https://github.com/skelly37/pyfram-
+telegram-bot) Query wolframalpha.com and make use of its API through Telegram.
+* [TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo)
+This Bot can understand spoken text in videos and translate it to English *
 [Zyprexa](https://t.me/mathemathicsBot) ([source](https://github.com/atif5/
 zyprexa)) Zyprexa can solve, help you solve any mathematical problem you
 encounter and convert your regular mathematical expressions into beautiful
 imagery using LaTeX. * [Bincode-telegram-bot](https://github.com/tusharhero/
 bincode-telegram-bot) by [tusharhero](https://github.com/tusharhero) - Makes
 [bincodes](https://github.com/tusharhero/bincode) from text provides and also
 converts them back to text. * [hydrolib_bot](https://github.com/Mayson90/
```

### Comparing `pyTelegramBotAPI-4.8.0/README.md` & `pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/PKG-INFO`

 * *Files 10% similar despite different names*

```diff
@@ -1,2727 +1,2843 @@
-00000000: 0a5b 215b 5079 5069 2050 6163 6b61 6765  .[![PyPi Package
-00000010: 2056 6572 7369 6f6e 5d28 6874 7470 733a   Version](https:
-00000020: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
-00000030: 2f70 7970 692f 762f 7079 5465 6c65 6772  /pypi/v/pyTelegr
-00000040: 616d 426f 7441 5049 2e73 7667 295d 2868  amBotAPI.svg)](h
-00000050: 7474 7073 3a2f 2f70 7970 692e 7079 7468  ttps://pypi.pyth
-00000060: 6f6e 2e6f 7267 2f70 7970 692f 7079 5465  on.org/pypi/pyTe
-00000070: 6c65 6772 616d 426f 7441 5049 290a 5b21  legramBotAPI).[!
-00000080: 5b53 7570 706f 7274 6564 2050 7974 686f  [Supported Pytho
-00000090: 6e20 7665 7273 696f 6e73 5d28 6874 7470  n versions](http
-000000a0: 733a 2f2f 696d 672e 7368 6965 6c64 732e  s://img.shields.
-000000b0: 696f 2f70 7970 692f 7079 7665 7273 696f  io/pypi/pyversio
-000000c0: 6e73 2f70 7954 656c 6567 7261 6d42 6f74  ns/pyTelegramBot
-000000d0: 4150 492e 7376 6729 5d28 6874 7470 733a  API.svg)](https:
-000000e0: 2f2f 7079 7069 2e70 7974 686f 6e2e 6f72  //pypi.python.or
-000000f0: 672f 7079 7069 2f70 7954 656c 6567 7261  g/pypi/pyTelegra
-00000100: 6d42 6f74 4150 4929 0a5b 215b 446f 6375  mBotAPI).[![Docu
-00000110: 6d65 6e74 6174 696f 6e20 5374 6174 7573  mentation Status
-00000120: 5d28 6874 7470 733a 2f2f 7265 6164 7468  ](https://readth
-00000130: 6564 6f63 732e 6f72 672f 7072 6f6a 6563  edocs.org/projec
-00000140: 7473 2f70 7974 6261 2f62 6164 6765 2f3f  ts/pytba/badge/?
-00000150: 7665 7273 696f 6e3d 6c61 7465 7374 295d  version=latest)]
-00000160: 2868 7474 7073 3a2f 2f70 7974 6261 2e72  (https://pytba.r
-00000170: 6561 6474 6865 646f 6373 2e69 6f2f 656e  eadthedocs.io/en
-00000180: 2f6c 6174 6573 742f 3f62 6164 6765 3d6c  /latest/?badge=l
-00000190: 6174 6573 7429 0a5b 215b 4275 696c 6420  atest).[![Build 
-000001a0: 5374 6174 7573 5d28 6874 7470 733a 2f2f  Status](https://
-000001b0: 7472 6176 6973 2d63 692e 6f72 672f 6574  travis-ci.org/et
-000001c0: 6572 6e6e 6f69 722f 7079 5465 6c65 6772  ernnoir/pyTelegr
-000001d0: 616d 426f 7441 5049 2e73 7667 3f62 7261  amBotAPI.svg?bra
-000001e0: 6e63 683d 6d61 7374 6572 295d 2868 7474  nch=master)](htt
-000001f0: 7073 3a2f 2f74 7261 7669 732d 6369 2e6f  ps://travis-ci.o
-00000200: 7267 2f65 7465 726e 6e6f 6972 2f70 7954  rg/eternnoir/pyT
-00000210: 656c 6567 7261 6d42 6f74 4150 4929 0a5b  elegramBotAPI).[
-00000220: 215b 5079 5069 2064 6f77 6e6c 6f61 6473  ![PyPi downloads
-00000230: 5d28 6874 7470 733a 2f2f 696d 672e 7368  ](https://img.sh
-00000240: 6965 6c64 732e 696f 2f70 7970 692f 646d  ields.io/pypi/dm
-00000250: 2f70 7954 656c 6567 7261 6d42 6f74 4150  /pyTelegramBotAP
-00000260: 492e 7376 6729 5d28 6874 7470 733a 2f2f  I.svg)](https://
-00000270: 7079 7069 2e6f 7267 2f70 726f 6a65 6374  pypi.org/project
-00000280: 2f70 7954 656c 6567 7261 6d42 6f74 4150  /pyTelegramBotAP
-00000290: 492f 290a 5b21 5b50 7950 6920 7374 6174  I/).[![PyPi stat
-000002a0: 7573 5d28 6874 7470 733a 2f2f 696d 672e  us](https://img.
-000002b0: 7368 6965 6c64 732e 696f 2f70 7970 692f  shields.io/pypi/
-000002c0: 7374 6174 7573 2f70 7974 656c 6567 7261  status/pytelegra
-000002d0: 6d62 6f74 6170 692e 7376 673f 7374 796c  mbotapi.svg?styl
-000002e0: 653d 666c 6174 2d73 7175 6172 6529 5d28  e=flat-square)](
-000002f0: 6874 7470 733a 2f2f 7079 7069 2e70 7974  https://pypi.pyt
-00000300: 686f 6e2e 6f72 672f 7079 7069 2f70 7974  hon.org/pypi/pyt
-00000310: 656c 6567 7261 6d62 6f74 6170 6929 0a0a  elegrambotapi)..
-00000320: 2320 3c70 2061 6c69 676e 3d22 6365 6e74  # <p align="cent
-00000330: 6572 223e 7079 5465 6c65 6772 616d 426f  er">pyTelegramBo
-00000340: 7441 5049 0a0a 3c70 2061 6c69 676e 3d22  tAPI..<p align="
-00000350: 6365 6e74 6572 223e 4120 7369 6d70 6c65  center">A simple
-00000360: 2c20 6275 7420 6578 7465 6e73 6962 6c65  , but extensible
-00000370: 2050 7974 686f 6e20 696d 706c 656d 656e   Python implemen
-00000380: 7461 7469 6f6e 2066 6f72 2074 6865 203c  tation for the <
-00000390: 6120 6872 6566 3d22 6874 7470 733a 2f2f  a href="https://
-000003a0: 636f 7265 2e74 656c 6567 7261 6d2e 6f72  core.telegram.or
-000003b0: 672f 626f 7473 2f61 7069 223e 5465 6c65  g/bots/api">Tele
-000003c0: 6772 616d 2042 6f74 2041 5049 3c2f 613e  gram Bot API</a>
-000003d0: 2e3c 2f70 3e0a 3c70 2061 6c69 676e 3d22  .</p>.<p align="
-000003e0: 6365 6e74 6572 223e 426f 7468 2073 796e  center">Both syn
-000003f0: 6368 726f 6e6f 7573 2061 6e64 2061 7379  chronous and asy
-00000400: 6e63 6872 6f6e 6f75 732e 3c2f 703e 0a0a  nchronous.</p>..
-00000410: 2323 203c 7020 616c 6967 6e3d 2263 656e  ## <p align="cen
-00000420: 7465 7222 3e53 7570 706f 7274 6564 2042  ter">Supported B
-00000430: 6f74 2041 5049 2076 6572 7369 6f6e 3a20  ot API version: 
-00000440: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
-00000450: 2f63 6f72 652e 7465 6c65 6772 616d 2e6f  /core.telegram.o
-00000460: 7267 2f62 6f74 732f 6170 6923 6e6f 7665  rg/bots/api#nove
-00000470: 6d62 6572 2d35 2d32 3032 3222 3e36 2e33  mber-5-2022">6.3
-00000480: 3c2f 613e 210a 0a3c 6832 3e3c 6120 6872  </a>!..<h2><a hr
-00000490: 6566 3d27 6874 7470 733a 2f2f 7079 7462  ef='https://pytb
-000004a0: 612e 7265 6164 7468 6564 6f63 732e 696f  a.readthedocs.io
-000004b0: 2f65 6e2f 6c61 7465 7374 2f69 6e64 6578  /en/latest/index
-000004c0: 2e68 746d 6c27 3e4f 6666 6963 6961 6c20  .html'>Official 
-000004d0: 646f 6375 6d65 6e74 6174 696f 6e3c 2f61  documentation</a
-000004e0: 3e3c 2f68 323e 0a09 0a23 2320 436f 6e74  ></h2>...## Cont
-000004f0: 656e 7473 0a0a 2020 2a20 5b47 6574 7469  ents..  * [Getti
-00000500: 6e67 2073 7461 7274 6564 5d28 2367 6574  ng started](#get
-00000510: 7469 6e67 2d73 7461 7274 6564 290a 2020  ting-started).  
-00000520: 2a20 5b57 7269 7469 6e67 2079 6f75 7220  * [Writing your 
-00000530: 6669 7273 7420 626f 745d 2823 7772 6974  first bot](#writ
-00000540: 696e 672d 796f 7572 2d66 6972 7374 2d62  ing-your-first-b
-00000550: 6f74 290a 2020 2020 2a20 5b50 7265 7265  ot).    * [Prere
-00000560: 7175 6973 6974 6573 5d28 2370 7265 7265  quisites](#prere
-00000570: 7175 6973 6974 6573 290a 2020 2020 2a20  quisites).    * 
-00000580: 5b41 2073 696d 706c 6520 6563 686f 2062  [A simple echo b
-00000590: 6f74 5d28 2361 2d73 696d 706c 652d 6563  ot](#a-simple-ec
-000005a0: 686f 2d62 6f74 290a 2020 2a20 5b47 656e  ho-bot).  * [Gen
-000005b0: 6572 616c 2041 5049 2044 6f63 756d 656e  eral API Documen
-000005c0: 7461 7469 6f6e 5d28 2367 656e 6572 616c  tation](#general
-000005d0: 2d61 7069 2d64 6f63 756d 656e 7461 7469  -api-documentati
-000005e0: 6f6e 290a 2020 2020 2a20 5b54 7970 6573  on).    * [Types
-000005f0: 5d28 2374 7970 6573 290a 2020 2020 2a20  ](#types).    * 
-00000600: 5b4d 6574 686f 6473 5d28 236d 6574 686f  [Methods](#metho
-00000610: 6473 290a 2020 2020 2a20 5b47 656e 6572  ds).    * [Gener
-00000620: 616c 2075 7365 206f 6620 7468 6520 4150  al use of the AP
-00000630: 495d 2823 6765 6e65 7261 6c2d 7573 652d  I](#general-use-
-00000640: 6f66 2d74 6865 2d61 7069 290a 2020 2020  of-the-api).    
-00000650: 2020 2a20 5b4d 6573 7361 6765 2068 616e    * [Message han
-00000660: 646c 6572 735d 2823 6d65 7373 6167 652d  dlers](#message-
-00000670: 6861 6e64 6c65 7273 290a 2020 2020 2020  handlers).      
-00000680: 2a20 5b45 6469 7465 6420 4d65 7373 6167  * [Edited Messag
-00000690: 6520 6861 6e64 6c65 725d 2823 6564 6974  e handler](#edit
-000006a0: 6564 2d6d 6573 7361 6765 2d68 616e 646c  ed-message-handl
-000006b0: 6572 290a 2020 2020 2020 2a20 5b43 6861  er).      * [Cha
-000006c0: 6e6e 656c 2050 6f73 7420 6861 6e64 6c65  nnel Post handle
-000006d0: 725d 2823 6368 616e 6e65 6c2d 706f 7374  r](#channel-post
-000006e0: 2d68 616e 646c 6572 290a 2020 2020 2020  -handler).      
-000006f0: 2a20 5b45 6469 7465 6420 4368 616e 6e65  * [Edited Channe
-00000700: 6c20 506f 7374 2068 616e 646c 6572 5d28  l Post handler](
-00000710: 2365 6469 7465 642d 6368 616e 6e65 6c2d  #edited-channel-
-00000720: 706f 7374 2d68 616e 646c 6572 290a 2020  post-handler).  
-00000730: 2020 2020 2a20 5b43 616c 6c62 6163 6b20      * [Callback 
-00000740: 5175 6572 7920 6861 6e64 6c65 7273 5d28  Query handlers](
-00000750: 2363 616c 6c62 6163 6b2d 7175 6572 792d  #callback-query-
-00000760: 6861 6e64 6c65 7229 0a20 2020 2020 202a  handler).      *
-00000770: 205b 5368 6970 7069 6e67 2051 7565 7279   [Shipping Query
-00000780: 2048 616e 646c 6572 5d28 2373 6869 7070   Handler](#shipp
-00000790: 696e 672d 7175 6572 792d 6861 6e64 6c65  ing-query-handle
-000007a0: 7229 0a20 2020 2020 202a 205b 5072 6520  r).      * [Pre 
-000007b0: 4368 6563 6b6f 7574 2051 7565 7279 2048  Checkout Query H
-000007c0: 616e 646c 6572 5d28 2370 7265 2d63 6865  andler](#pre-che
-000007d0: 636b 6f75 742d 7175 6572 792d 6861 6e64  ckout-query-hand
-000007e0: 6c65 7229 0a20 2020 2020 202a 205b 506f  ler).      * [Po
-000007f0: 6c6c 2048 616e 646c 6572 5d28 2370 6f6c  ll Handler](#pol
-00000800: 6c2d 6861 6e64 6c65 7229 0a20 2020 2020  l-handler).     
-00000810: 202a 205b 506f 6c6c 2041 6e73 7765 7220   * [Poll Answer 
-00000820: 4861 6e64 6c65 725d 2823 706f 6c6c 2d61  Handler](#poll-a
-00000830: 6e73 7765 722d 6861 6e64 6c65 7229 0a20  nswer-handler). 
-00000840: 2020 2020 202a 205b 4d79 2043 6861 7420       * [My Chat 
-00000850: 4d65 6d62 6572 2048 616e 646c 6572 5d28  Member Handler](
-00000860: 236d 792d 6368 6174 2d6d 656d 6265 722d  #my-chat-member-
-00000870: 6861 6e64 6c65 7229 0a20 2020 2020 202a  handler).      *
-00000880: 205b 4368 6174 204d 656d 6265 7220 4861   [Chat Member Ha
-00000890: 6e64 6c65 725d 2823 6368 6174 2d6d 656d  ndler](#chat-mem
-000008a0: 6265 722d 6861 6e64 6c65 7229 0a20 2020  ber-handler).   
-000008b0: 2020 202a 205b 4368 6174 204a 6f69 6e20     * [Chat Join 
-000008c0: 7265 7175 6573 7420 6861 6e64 6c65 725d  request handler]
-000008d0: 2823 6368 6174 2d6a 6f69 6e2d 7265 7175  (#chat-join-requ
-000008e0: 6573 742d 6861 6e64 6c65 7229 0a20 2020  est-handler).   
-000008f0: 202a 205b 496e 6c69 6e65 204d 6f64 655d   * [Inline Mode]
-00000900: 2823 696e 6c69 6e65 2d6d 6f64 6529 0a20  (#inline-mode). 
-00000910: 2020 2020 202a 205b 496e 6c69 6e65 2068       * [Inline h
-00000920: 616e 646c 6572 5d28 2369 6e6c 696e 652d  andler](#inline-
-00000930: 6861 6e64 6c65 7229 0a20 2020 2020 202a  handler).      *
-00000940: 205b 4368 6f73 656e 2049 6e6c 696e 6520   [Chosen Inline 
-00000950: 6861 6e64 6c65 725d 2823 6368 6f73 656e  handler](#chosen
-00000960: 2d69 6e6c 696e 652d 6861 6e64 6c65 7229  -inline-handler)
-00000970: 0a20 2020 2020 202a 205b 416e 7377 6572  .      * [Answer
-00000980: 2049 6e6c 696e 6520 5175 6572 795d 2823   Inline Query](#
-00000990: 616e 7377 6572 2d69 6e6c 696e 652d 7175  answer-inline-qu
-000009a0: 6572 7929 0a20 2020 202a 205b 4164 6469  ery).    * [Addi
-000009b0: 7469 6f6e 616c 2041 5049 2066 6561 7475  tional API featu
-000009c0: 7265 735d 2823 6164 6469 7469 6f6e 616c  res](#additional
-000009d0: 2d61 7069 2d66 6561 7475 7265 7329 0a20  -api-features). 
-000009e0: 2020 2020 202a 205b 4d69 6464 6c65 7761       * [Middlewa
-000009f0: 7265 2068 616e 646c 6572 735d 2823 6d69  re handlers](#mi
-00000a00: 6464 6c65 7761 7265 2d68 616e 646c 6572  ddleware-handler
-00000a10: 7329 0a20 2020 2020 202a 205b 4375 7374  s).      * [Cust
-00000a20: 6f6d 2066 696c 7465 7273 5d28 2363 7573  om filters](#cus
-00000a30: 746f 6d2d 6669 6c74 6572 7329 0a20 2020  tom-filters).   
-00000a40: 2020 202a 205b 5465 6c65 426f 745d 2823     * [TeleBot](#
-00000a50: 7465 6c65 626f 7429 0a20 2020 2020 202a  telebot).      *
-00000a60: 205b 5265 706c 7920 6d61 726b 7570 5d28   [Reply markup](
-00000a70: 2372 6570 6c79 2d6d 6172 6b75 7029 0a20  #reply-markup). 
-00000a80: 202a 205b 4164 7661 6e63 6564 2075 7365   * [Advanced use
-00000a90: 206f 6620 7468 6520 4150 495d 2823 6164   of the API](#ad
-00000aa0: 7661 6e63 6564 2d75 7365 2d6f 662d 7468  vanced-use-of-th
-00000ab0: 652d 6170 6929 0a20 2020 202a 205b 5573  e-api).    * [Us
-00000ac0: 696e 6720 6c6f 6361 6c20 426f 7420 4150  ing local Bot AP
-00000ad0: 4920 5365 7276 6572 5d28 2375 7369 6e67  I Server](#using
-00000ae0: 2d6c 6f63 616c 2d62 6f74 2d61 7069 2d73  -local-bot-api-s
-00000af0: 6576 6572 290a 2020 2020 2a20 5b41 7379  ever).    * [Asy
-00000b00: 6e63 6872 6f6e 6f75 7320 5465 6c65 426f  nchronous TeleBo
-00000b10: 745d 2823 6173 796e 6368 726f 6e6f 7573  t](#asynchronous
-00000b20: 2d74 656c 6562 6f74 290a 2020 2020 2a20  -telebot).    * 
-00000b30: 5b53 656e 6469 6e67 206c 6172 6765 2074  [Sending large t
-00000b40: 6578 7420 6d65 7373 6167 6573 5d28 2373  ext messages](#s
-00000b50: 656e 6469 6e67 2d6c 6172 6765 2d74 6578  ending-large-tex
-00000b60: 742d 6d65 7373 6167 6573 290a 2020 2020  t-messages).    
-00000b70: 2a20 5b43 6f6e 7472 6f6c 6c69 6e67 2074  * [Controlling t
-00000b80: 6865 2061 6d6f 756e 7420 6f66 2054 6872  he amount of Thr
-00000b90: 6561 6473 2075 7365 6420 6279 2054 656c  eads used by Tel
-00000ba0: 6542 6f74 5d28 2363 6f6e 7472 6f6c 6c69  eBot](#controlli
-00000bb0: 6e67 2d74 6865 2d61 6d6f 756e 742d 6f66  ng-the-amount-of
-00000bc0: 2d74 6872 6561 6473 2d75 7365 642d 6279  -threads-used-by
-00000bd0: 2d74 656c 6562 6f74 290a 2020 2020 2a20  -telebot).    * 
-00000be0: 5b54 6865 206c 6973 7465 6e65 7220 6d65  [The listener me
-00000bf0: 6368 616e 6973 6d5d 2823 7468 652d 6c69  chanism](#the-li
-00000c00: 7374 656e 6572 2d6d 6563 6861 6e69 736d  stener-mechanism
-00000c10: 290a 2020 2020 2a20 5b55 7369 6e67 2077  ).    * [Using w
-00000c20: 6562 2068 6f6f 6b73 5d28 2375 7369 6e67  eb hooks](#using
-00000c30: 2d77 6562 2d68 6f6f 6b73 290a 2020 2020  -web-hooks).    
-00000c40: 2a20 5b4c 6f67 6769 6e67 5d28 236c 6f67  * [Logging](#log
-00000c50: 6769 6e67 290a 2020 2020 2a20 5b50 726f  ging).    * [Pro
-00000c60: 7879 5d28 2370 726f 7879 290a 2020 2020  xy](#proxy).    
-00000c70: 2a20 5b54 6573 7469 6e67 5d28 2374 6573  * [Testing](#tes
-00000c80: 7469 6e67 290a 2020 2a20 5b41 5049 2063  ting).  * [API c
-00000c90: 6f6e 666f 726d 616e 6365 206c 696d 6974  onformance limit
-00000ca0: 6174 696f 6e73 5d28 2361 7069 2d63 6f6e  ations](#api-con
-00000cb0: 666f 726d 616e 6365 2d6c 696d 6974 6174  formance-limitat
-00000cc0: 696f 6e73 290a 2020 2a20 5b41 7379 6e63  ions).  * [Async
-00000cd0: 5465 6c65 426f 745d 2823 6173 796e 6374  TeleBot](#asynct
-00000ce0: 656c 6562 6f74 290a 2020 2a20 5b46 2e41  elebot).  * [F.A
-00000cf0: 2e51 2e5d 2823 6661 7129 0a20 2020 202a  .Q.](#faq).    *
-00000d00: 205b 486f 7720 6361 6e20 4920 6469 7374   [How can I dist
-00000d10: 696e 6775 6973 6820 6120 5573 6572 2061  inguish a User a
-00000d20: 6e64 2061 2047 726f 7570 4368 6174 2069  nd a GroupChat i
-00000d30: 6e20 6d65 7373 6167 652e 6368 6174 3f5d  n message.chat?]
-00000d40: 2823 686f 772d 6361 6e2d 692d 6469 7374  (#how-can-i-dist
-00000d50: 696e 6775 6973 682d 612d 7573 6572 2d61  inguish-a-user-a
-00000d60: 6e64 2d61 2d67 726f 7570 6368 6174 2d69  nd-a-groupchat-i
-00000d70: 6e2d 6d65 7373 6167 6563 6861 7429 0a20  n-messagechat). 
-00000d80: 2020 202a 205b 486f 7720 6361 6e20 4920     * [How can I 
-00000d90: 6861 6e64 6c65 2072 656f 6375 7272 696e  handle reocurrin
-00000da0: 6720 436f 6e6e 6563 7469 6f6e 5265 7365  g ConnectionRese
-00000db0: 7445 7272 6f72 733f 5d28 2368 6f77 2d63  tErrors?](#how-c
-00000dc0: 616e 2d69 2d68 616e 646c 652d 7265 6f63  an-i-handle-reoc
-00000dd0: 7572 7269 6e67 2d63 6f6e 6e65 6374 696f  urring-connectio
-00000de0: 6e72 6573 6574 6572 726f 7273 290a 2020  nreseterrors).  
-00000df0: 2a20 5b54 6865 2054 656c 6567 7261 6d20  * [The Telegram 
-00000e00: 4368 6174 2047 726f 7570 5d28 2374 6865  Chat Group](#the
-00000e10: 2d74 656c 6567 7261 6d2d 6368 6174 2d67  -telegram-chat-g
-00000e20: 726f 7570 290a 2020 2a20 5b54 656c 6567  roup).  * [Teleg
-00000e30: 7261 6d20 4368 616e 6e65 6c5d 2823 7465  ram Channel](#te
-00000e40: 6c65 6772 616d 2d63 6861 6e6e 656c 290a  legram-channel).
-00000e50: 2020 2a20 5b4d 6f72 6520 6578 616d 706c    * [More exampl
-00000e60: 6573 5d28 236d 6f72 652d 6578 616d 706c  es](#more-exampl
-00000e70: 6573 290a 2020 2a20 5b43 6f64 6520 5465  es).  * [Code Te
-00000e80: 6d70 6c61 7465 5d28 2363 6f64 652d 7465  mplate](#code-te
-00000e90: 6d70 6c61 7465 290a 2020 2a20 5b42 6f74  mplate).  * [Bot
-00000ea0: 7320 7573 696e 6720 7468 6973 206c 6962  s using this lib
-00000eb0: 7261 7279 5d28 2362 6f74 732d 7573 696e  rary](#bots-usin
-00000ec0: 672d 7468 6973 2d6c 6962 7261 7279 290a  g-this-library).
-00000ed0: 0a23 2320 4765 7474 696e 6720 7374 6172  .## Getting star
-00000ee0: 7465 640a 0a54 6869 7320 4150 4920 6973  ted..This API is
-00000ef0: 2074 6573 7465 6420 7769 7468 2050 7974   tested with Pyt
-00000f00: 686f 6e20 332e 372d 332e 3131 2061 6e64  hon 3.7-3.11 and
-00000f10: 2050 7970 7920 332e 0a54 6865 7265 2061   Pypy 3..There a
-00000f20: 7265 2074 776f 2077 6179 7320 746f 2069  re two ways to i
-00000f30: 6e73 7461 6c6c 2074 6865 206c 6962 7261  nstall the libra
-00000f40: 7279 3a0a 0a2a 2049 6e73 7461 6c6c 6174  ry:..* Installat
-00000f50: 696f 6e20 7573 696e 6720 7069 7020 2861  ion using pip (a
-00000f60: 2050 7974 686f 6e20 7061 636b 6167 6520   Python package 
-00000f70: 6d61 6e61 6765 7229 3a0a 0a60 6060 0a24  manager):..```.$
-00000f80: 2070 6970 2069 6e73 7461 6c6c 2070 7954   pip install pyT
-00000f90: 656c 6567 7261 6d42 6f74 4150 490a 6060  elegramBotAPI.``
-00000fa0: 600a 2a20 496e 7374 616c 6c61 7469 6f6e  `.* Installation
-00000fb0: 2066 726f 6d20 736f 7572 6365 2028 7265   from source (re
-00000fc0: 7175 6972 6573 2067 6974 293a 0a0a 6060  quires git):..``
-00000fd0: 600a 2420 6769 7420 636c 6f6e 6520 6874  `.$ git clone ht
-00000fe0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00000ff0: 2f65 7465 726e 6e6f 6972 2f70 7954 656c  /eternnoir/pyTel
-00001000: 6567 7261 6d42 6f74 4150 492e 6769 740a  egramBotAPI.git.
-00001010: 2420 6364 2070 7954 656c 6567 7261 6d42  $ cd pyTelegramB
-00001020: 6f74 4150 490a 2420 7079 7468 6f6e 2073  otAPI.$ python s
-00001030: 6574 7570 2e70 7920 696e 7374 616c 6c0a  etup.py install.
-00001040: 6060 600a 6f72 3a0a 6060 600a 2420 7069  ```.or:.```.$ pi
-00001050: 7020 696e 7374 616c 6c20 6769 742b 6874  p install git+ht
-00001060: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00001070: 2f65 7465 726e 6e6f 6972 2f70 7954 656c  /eternnoir/pyTel
-00001080: 6567 7261 6d42 6f74 4150 492e 6769 740a  egramBotAPI.git.
-00001090: 6060 600a 0a49 7420 6973 2067 656e 6572  ```..It is gener
-000010a0: 616c 6c79 2072 6563 6f6d 6d65 6e64 6564  ally recommended
-000010b0: 2074 6f20 7573 6520 7468 6520 6669 7273   to use the firs
-000010c0: 7420 6f70 7469 6f6e 2e0a 0a2a 5768 696c  t option...*Whil
-000010d0: 6520 7468 6520 4150 4920 6973 2070 726f  e the API is pro
-000010e0: 6475 6374 696f 6e2d 7265 6164 792c 2069  duction-ready, i
-000010f0: 7420 6973 2073 7469 6c6c 2075 6e64 6572  t is still under
-00001100: 2064 6576 656c 6f70 6d65 6e74 2061 6e64   development and
-00001110: 2069 7420 6861 7320 7265 6775 6c61 7220   it has regular 
-00001120: 7570 6461 7465 732c 2064 6f20 6e6f 7420  updates, do not 
-00001130: 666f 7267 6574 2074 6f20 7570 6461 7465  forget to update
-00001140: 2069 7420 7265 6775 6c61 726c 7920 6279   it regularly by
-00001150: 2063 616c 6c69 6e67 2a0a 6060 600a 7069   calling*.```.pi
-00001160: 7020 696e 7374 616c 6c20 7079 7465 6c65  p install pytele
-00001170: 6772 616d 626f 7461 7069 202d 2d75 7067  grambotapi --upg
-00001180: 7261 6465 0a60 6060 0a0a 2323 2057 7269  rade.```..## Wri
-00001190: 7469 6e67 2079 6f75 7220 6669 7273 7420  ting your first 
-000011a0: 626f 740a 0a23 2323 2050 7265 7265 7175  bot..### Prerequ
-000011b0: 6973 6974 6573 0a0a 4974 2069 7320 7072  isites..It is pr
-000011c0: 6573 756d 6564 2074 6861 7420 796f 7520  esumed that you 
-000011d0: 5b68 6176 6520 6f62 7461 696e 6564 2061  [have obtained a
-000011e0: 6e20 4150 4920 746f 6b65 6e20 7769 7468  n API token with
-000011f0: 2040 426f 7446 6174 6865 725d 2868 7474   @BotFather](htt
-00001200: 7073 3a2f 2f63 6f72 652e 7465 6c65 6772  ps://core.telegr
-00001210: 616d 2e6f 7267 2f62 6f74 7323 626f 7466  am.org/bots#botf
-00001220: 6174 6865 7229 2e20 5765 2077 696c 6c20  ather). We will 
-00001230: 6361 6c6c 2074 6869 7320 746f 6b65 6e20  call this token 
-00001240: 6054 4f4b 454e 602e 0a46 7572 7468 6572  `TOKEN`..Further
-00001250: 6d6f 7265 2c20 796f 7520 6861 7665 2062  more, you have b
-00001260: 6173 6963 206b 6e6f 776c 6564 6765 206f  asic knowledge o
-00001270: 6620 7468 6520 5079 7468 6f6e 2070 726f  f the Python pro
-00001280: 6772 616d 6d69 6e67 206c 616e 6775 6167  gramming languag
-00001290: 6520 616e 6420 6d6f 7265 2069 6d70 6f72  e and more impor
-000012a0: 7461 6e74 6c79 205b 7468 6520 5465 6c65  tantly [the Tele
-000012b0: 6772 616d 2042 6f74 2041 5049 5d28 6874  gram Bot API](ht
-000012c0: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
-000012d0: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
-000012e0: 292e 0a0a 2323 2320 4120 7369 6d70 6c65  )...### A simple
-000012f0: 2065 6368 6f20 626f 740a 0a54 6865 2054   echo bot..The T
-00001300: 656c 6542 6f74 2063 6c61 7373 2028 6465  eleBot class (de
-00001310: 6669 6e65 6420 696e 205c 5f5f 696e 6974  fined in \__init
-00001320: 5f5f 2e70 7929 2065 6e63 6170 7375 6c61  __.py) encapsula
-00001330: 7465 7320 616c 6c20 4150 4920 6361 6c6c  tes all API call
-00001340: 7320 696e 2061 2073 696e 676c 6520 636c  s in a single cl
-00001350: 6173 732e 2049 7420 7072 6f76 6964 6573  ass. It provides
-00001360: 2066 756e 6374 696f 6e73 2073 7563 6820   functions such 
-00001370: 6173 2060 7365 6e64 5f78 797a 6020 2860  as `send_xyz` (`
-00001380: 7365 6e64 5f6d 6573 7361 6765 602c 2060  send_message`, `
-00001390: 7365 6e64 5f64 6f63 756d 656e 7460 2065  send_document` e
-000013a0: 7463 2e29 2061 6e64 2073 6576 6572 616c  tc.) and several
-000013b0: 2077 6179 7320 746f 206c 6973 7465 6e20   ways to listen 
-000013c0: 666f 7220 696e 636f 6d69 6e67 206d 6573  for incoming mes
-000013d0: 7361 6765 732e 0a0a 4372 6561 7465 2061  sages...Create a
-000013e0: 2066 696c 6520 6361 6c6c 6564 2060 6563   file called `ec
-000013f0: 686f 5f62 6f74 2e70 7960 2e0a 5468 656e  ho_bot.py`..Then
-00001400: 2c20 6f70 656e 2074 6865 2066 696c 6520  , open the file 
-00001410: 616e 6420 6372 6561 7465 2061 6e20 696e  and create an in
-00001420: 7374 616e 6365 206f 6620 7468 6520 5465  stance of the Te
-00001430: 6c65 426f 7420 636c 6173 732e 0a60 6060  leBot class..```
-00001440: 7079 7468 6f6e 0a69 6d70 6f72 7420 7465  python.import te
-00001450: 6c65 626f 740a 0a62 6f74 203d 2074 656c  lebot..bot = tel
-00001460: 6562 6f74 2e54 656c 6542 6f74 2822 544f  ebot.TeleBot("TO
-00001470: 4b45 4e22 2c20 7061 7273 655f 6d6f 6465  KEN", parse_mode
-00001480: 3d4e 6f6e 6529 2023 2059 6f75 2063 616e  =None) # You can
-00001490: 2073 6574 2070 6172 7365 5f6d 6f64 6520   set parse_mode 
-000014a0: 6279 2064 6566 6175 6c74 2e20 4854 4d4c  by default. HTML
-000014b0: 206f 7220 4d41 524b 444f 574e 0a60 6060   or MARKDOWN.```
-000014c0: 0a2a 4e6f 7465 3a20 4d61 6b65 2073 7572  .*Note: Make sur
-000014d0: 6520 746f 2061 6374 7561 6c6c 7920 7265  e to actually re
-000014e0: 706c 6163 6520 544f 4b45 4e20 7769 7468  place TOKEN with
-000014f0: 2079 6f75 7220 6f77 6e20 4150 4920 746f   your own API to
-00001500: 6b65 6e2e 2a0a 0a41 6674 6572 2074 6861  ken.*..After tha
-00001510: 7420 6465 636c 6172 6174 696f 6e2c 2077  t declaration, w
-00001520: 6520 6e65 6564 2074 6f20 7265 6769 7374  e need to regist
-00001530: 6572 2073 6f6d 6520 736f 2d63 616c 6c65  er some so-calle
-00001540: 6420 6d65 7373 6167 6520 6861 6e64 6c65  d message handle
-00001550: 7273 2e20 4d65 7373 6167 6520 6861 6e64  rs. Message hand
-00001560: 6c65 7273 2064 6566 696e 6520 6669 6c74  lers define filt
-00001570: 6572 7320 7768 6963 6820 6120 6d65 7373  ers which a mess
-00001580: 6167 6520 6d75 7374 2070 6173 732e 2049  age must pass. I
-00001590: 6620 6120 6d65 7373 6167 6520 7061 7373  f a message pass
-000015a0: 6573 2074 6865 2066 696c 7465 722c 2074  es the filter, t
-000015b0: 6865 2064 6563 6f72 6174 6564 2066 756e  he decorated fun
-000015c0: 6374 696f 6e20 6973 2063 616c 6c65 6420  ction is called 
-000015d0: 616e 6420 7468 6520 696e 636f 6d69 6e67  and the incoming
-000015e0: 206d 6573 7361 6765 2069 7320 7061 7373   message is pass
-000015f0: 6564 2061 7320 616e 2061 7267 756d 656e  ed as an argumen
-00001600: 742e 0a0a 4c65 7427 7320 6465 6669 6e65  t...Let's define
-00001610: 2061 206d 6573 7361 6765 2068 616e 646c   a message handl
-00001620: 6572 2077 6869 6368 2068 616e 646c 6573  er which handles
-00001630: 2069 6e63 6f6d 696e 6720 602f 7374 6172   incoming `/star
-00001640: 7460 2061 6e64 2060 2f68 656c 7060 2063  t` and `/help` c
-00001650: 6f6d 6d61 6e64 732e 0a60 6060 7079 7468  ommands..```pyth
-00001660: 6f6e 0a40 626f 742e 6d65 7373 6167 655f  on.@bot.message_
-00001670: 6861 6e64 6c65 7228 636f 6d6d 616e 6473  handler(commands
-00001680: 3d5b 2773 7461 7274 272c 2027 6865 6c70  =['start', 'help
-00001690: 275d 290a 6465 6620 7365 6e64 5f77 656c  ']).def send_wel
-000016a0: 636f 6d65 286d 6573 7361 6765 293a 0a09  come(message):..
-000016b0: 626f 742e 7265 706c 795f 746f 286d 6573  bot.reply_to(mes
-000016c0: 7361 6765 2c20 2248 6f77 6479 2c20 686f  sage, "Howdy, ho
-000016d0: 7720 6172 6520 796f 7520 646f 696e 673f  w are you doing?
-000016e0: 2229 0a60 6060 0a41 2066 756e 6374 696f  ").```.A functio
-000016f0: 6e20 7768 6963 6820 6973 2064 6563 6f72  n which is decor
-00001700: 6174 6564 2062 7920 6120 6d65 7373 6167  ated by a messag
-00001710: 6520 6861 6e64 6c65 7220 5f5f 6361 6e20  e handler __can 
-00001720: 6861 7665 2061 6e20 6172 6269 7472 6172  have an arbitrar
-00001730: 7920 6e61 6d65 2c20 686f 7765 7665 722c  y name, however,
-00001740: 2069 7420 6d75 7374 2068 6176 6520 6f6e   it must have on
-00001750: 6c79 206f 6e65 2070 6172 616d 6574 6572  ly one parameter
-00001760: 2028 7468 6520 6d65 7373 6167 6529 5f5f   (the message)__
-00001770: 2e0a 0a4c 6574 2773 2061 6464 2061 6e6f  ...Let's add ano
-00001780: 7468 6572 2068 616e 646c 6572 3a0a 6060  ther handler:.``
-00001790: 6070 7974 686f 6e0a 4062 6f74 2e6d 6573  `python.@bot.mes
-000017a0: 7361 6765 5f68 616e 646c 6572 2866 756e  sage_handler(fun
-000017b0: 633d 6c61 6d62 6461 206d 3a20 5472 7565  c=lambda m: True
-000017c0: 290a 6465 6620 6563 686f 5f61 6c6c 286d  ).def echo_all(m
-000017d0: 6573 7361 6765 293a 0a09 626f 742e 7265  essage):..bot.re
-000017e0: 706c 795f 746f 286d 6573 7361 6765 2c20  ply_to(message, 
-000017f0: 6d65 7373 6167 652e 7465 7874 290a 6060  message.text).``
-00001800: 600a 5468 6973 206f 6e65 2065 6368 6f65  `.This one echoe
-00001810: 7320 616c 6c20 696e 636f 6d69 6e67 2074  s all incoming t
-00001820: 6578 7420 6d65 7373 6167 6573 2062 6163  ext messages bac
-00001830: 6b20 746f 2074 6865 2073 656e 6465 722e  k to the sender.
-00001840: 2049 7420 7573 6573 2061 206c 616d 6264   It uses a lambd
-00001850: 6120 6675 6e63 7469 6f6e 2074 6f20 7465  a function to te
-00001860: 7374 2061 206d 6573 7361 6765 2e20 4966  st a message. If
-00001870: 2074 6865 206c 616d 6264 6120 7265 7475   the lambda retu
-00001880: 726e 7320 5472 7565 2c20 7468 6520 6d65  rns True, the me
-00001890: 7373 6167 6520 6973 2068 616e 646c 6564  ssage is handled
-000018a0: 2062 7920 7468 6520 6465 636f 7261 7465   by the decorate
-000018b0: 6420 6675 6e63 7469 6f6e 2e20 5369 6e63  d function. Sinc
-000018c0: 6520 7765 2077 616e 7420 616c 6c20 6d65  e we want all me
-000018d0: 7373 6167 6573 2074 6f20 6265 2068 616e  ssages to be han
-000018e0: 646c 6564 2062 7920 7468 6973 2066 756e  dled by this fun
-000018f0: 6374 696f 6e2c 2077 6520 7369 6d70 6c79  ction, we simply
-00001900: 2061 6c77 6179 7320 7265 7475 726e 2054   always return T
-00001910: 7275 652e 0a0a 2a4e 6f74 653a 2061 6c6c  rue...*Note: all
-00001920: 2068 616e 646c 6572 7320 6172 6520 7465   handlers are te
-00001930: 7374 6564 2069 6e20 7468 6520 6f72 6465  sted in the orde
-00001940: 7220 696e 2077 6869 6368 2074 6865 7920  r in which they 
-00001950: 7765 7265 2064 6563 6c61 7265 642a 0a0a  were declared*..
-00001960: 5765 206e 6f77 2068 6176 6520 6120 6261  We now have a ba
-00001970: 7369 6320 626f 7420 7768 6963 6820 7265  sic bot which re
-00001980: 706c 6965 7320 6120 7374 6174 6963 206d  plies a static m
-00001990: 6573 7361 6765 2074 6f20 222f 7374 6172  essage to "/star
-000019a0: 7422 2061 6e64 2022 2f68 656c 7022 2063  t" and "/help" c
-000019b0: 6f6d 6d61 6e64 7320 616e 6420 7768 6963  ommands and whic
-000019c0: 6820 6563 686f 6573 2074 6865 2072 6573  h echoes the res
-000019d0: 7420 6f66 2074 6865 2073 656e 7420 6d65  t of the sent me
-000019e0: 7373 6167 6573 2e20 546f 2073 7461 7274  ssages. To start
-000019f0: 2074 6865 2062 6f74 2c20 6164 6420 7468   the bot, add th
-00001a00: 6520 666f 6c6c 6f77 696e 6720 746f 206f  e following to o
-00001a10: 7572 2073 6f75 7263 6520 6669 6c65 3a0a  ur source file:.
-00001a20: 6060 6070 7974 686f 6e0a 626f 742e 696e  ```python.bot.in
-00001a30: 6669 6e69 7479 5f70 6f6c 6c69 6e67 2829  finity_polling()
-00001a40: 0a60 6060 0a41 6c72 6967 6874 2c20 7468  .```.Alright, th
-00001a50: 6174 2773 2069 7421 204f 7572 2073 6f75  at's it! Our sou
-00001a60: 7263 6520 6669 6c65 206e 6f77 206c 6f6f  rce file now loo
-00001a70: 6b73 206c 696b 6520 7468 6973 3a0a 6060  ks like this:.``
-00001a80: 6070 7974 686f 6e0a 696d 706f 7274 2074  `python.import t
-00001a90: 656c 6562 6f74 0a0a 626f 7420 3d20 7465  elebot..bot = te
-00001aa0: 6c65 626f 742e 5465 6c65 426f 7428 2259  lebot.TeleBot("Y
-00001ab0: 4f55 525f 424f 545f 544f 4b45 4e22 290a  OUR_BOT_TOKEN").
-00001ac0: 0a40 626f 742e 6d65 7373 6167 655f 6861  .@bot.message_ha
-00001ad0: 6e64 6c65 7228 636f 6d6d 616e 6473 3d5b  ndler(commands=[
-00001ae0: 2773 7461 7274 272c 2027 6865 6c70 275d  'start', 'help']
-00001af0: 290a 6465 6620 7365 6e64 5f77 656c 636f  ).def send_welco
-00001b00: 6d65 286d 6573 7361 6765 293a 0a09 626f  me(message):..bo
-00001b10: 742e 7265 706c 795f 746f 286d 6573 7361  t.reply_to(messa
-00001b20: 6765 2c20 2248 6f77 6479 2c20 686f 7720  ge, "Howdy, how 
-00001b30: 6172 6520 796f 7520 646f 696e 673f 2229  are you doing?")
-00001b40: 0a0a 4062 6f74 2e6d 6573 7361 6765 5f68  ..@bot.message_h
-00001b50: 616e 646c 6572 2866 756e 633d 6c61 6d62  andler(func=lamb
-00001b60: 6461 206d 6573 7361 6765 3a20 5472 7565  da message: True
-00001b70: 290a 6465 6620 6563 686f 5f61 6c6c 286d  ).def echo_all(m
-00001b80: 6573 7361 6765 293a 0a09 626f 742e 7265  essage):..bot.re
-00001b90: 706c 795f 746f 286d 6573 7361 6765 2c20  ply_to(message, 
-00001ba0: 6d65 7373 6167 652e 7465 7874 290a 0a62  message.text)..b
-00001bb0: 6f74 2e69 6e66 696e 6974 795f 706f 6c6c  ot.infinity_poll
-00001bc0: 696e 6728 290a 6060 600a 546f 2073 7461  ing().```.To sta
-00001bd0: 7274 2074 6865 2062 6f74 2c20 7369 6d70  rt the bot, simp
-00001be0: 6c79 206f 7065 6e20 7570 2061 2074 6572  ly open up a ter
-00001bf0: 6d69 6e61 6c20 616e 6420 656e 7465 7220  minal and enter 
-00001c00: 6070 7974 686f 6e20 6563 686f 5f62 6f74  `python echo_bot
-00001c10: 2e70 7960 2074 6f20 7275 6e20 7468 6520  .py` to run the 
-00001c20: 626f 7421 2054 6573 7420 6974 2062 7920  bot! Test it by 
-00001c30: 7365 6e64 696e 6720 636f 6d6d 616e 6473  sending commands
-00001c40: 2028 272f 7374 6172 7427 2061 6e64 2027   ('/start' and '
-00001c50: 2f68 656c 7027 2920 616e 6420 6172 6269  /help') and arbi
-00001c60: 7472 6172 7920 7465 7874 206d 6573 7361  trary text messa
-00001c70: 6765 732e 0a0a 2323 2047 656e 6572 616c  ges...## General
-00001c80: 2041 5049 2044 6f63 756d 656e 7461 7469   API Documentati
-00001c90: 6f6e 0a0a 2323 2320 5479 7065 730a 0a41  on..### Types..A
-00001ca0: 6c6c 2074 7970 6573 2061 7265 2064 6566  ll types are def
-00001cb0: 696e 6564 2069 6e20 7479 7065 732e 7079  ined in types.py
-00001cc0: 2e20 5468 6579 2061 7265 2061 6c6c 2063  . They are all c
-00001cd0: 6f6d 706c 6574 656c 7920 696e 206c 696e  ompletely in lin
-00001ce0: 6520 7769 7468 2074 6865 205b 5465 6c65  e with the [Tele
-00001cf0: 6772 616d 2041 5049 2773 2064 6566 696e  gram API's defin
-00001d00: 6974 696f 6e20 6f66 2074 6865 2074 7970  ition of the typ
-00001d10: 6573 5d28 6874 7470 733a 2f2f 636f 7265  es](https://core
-00001d20: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
-00001d30: 7473 2f61 7069 2361 7661 696c 6162 6c65  ts/api#available
-00001d40: 2d74 7970 6573 292c 2065 7863 6570 7420  -types), except 
-00001d50: 666f 7220 7468 6520 4d65 7373 6167 6527  for the Message'
-00001d60: 7320 6066 726f 6d60 2066 6965 6c64 2c20  s `from` field, 
-00001d70: 7768 6963 6820 6973 2072 656e 616d 6564  which is renamed
-00001d80: 2074 6f20 6066 726f 6d5f 7573 6572 6020   to `from_user` 
-00001d90: 2862 6563 6175 7365 2060 6672 6f6d 6020  (because `from` 
-00001da0: 6973 2061 2050 7974 686f 6e20 7265 7365  is a Python rese
-00001db0: 7276 6564 2074 6f6b 656e 292e 2054 6875  rved token). Thu
-00001dc0: 732c 2061 7474 7269 6275 7465 7320 7375  s, attributes su
-00001dd0: 6368 2061 7320 606d 6573 7361 6765 5f69  ch as `message_i
-00001de0: 6460 2063 616e 2062 6520 6163 6365 7373  d` can be access
-00001df0: 6564 2064 6972 6563 746c 7920 7769 7468  ed directly with
-00001e00: 2060 6d65 7373 6167 652e 6d65 7373 6167   `message.messag
-00001e10: 655f 6964 602e 204e 6f74 6520 7468 6174  e_id`. Note that
-00001e20: 2060 6d65 7373 6167 652e 6368 6174 6020   `message.chat` 
-00001e30: 6361 6e20 6265 2065 6974 6865 7220 616e  can be either an
-00001e40: 2069 6e73 7461 6e63 6520 6f66 2060 5573   instance of `Us
-00001e50: 6572 6020 6f72 2060 4772 6f75 7043 6861  er` or `GroupCha
-00001e60: 7460 2028 7365 6520 5b48 6f77 2063 616e  t` (see [How can
-00001e70: 2049 2064 6973 7469 6e67 7569 7368 2061   I distinguish a
-00001e80: 2055 7365 7220 616e 6420 6120 4772 6f75   User and a Grou
-00001e90: 7043 6861 7420 696e 206d 6573 7361 6765  pChat in message
-00001ea0: 2e63 6861 743f 5d28 2368 6f77 2d63 616e  .chat?](#how-can
-00001eb0: 2d69 2d64 6973 7469 6e67 7569 7368 2d61  -i-distinguish-a
-00001ec0: 2d75 7365 722d 616e 642d 612d 6772 6f75  -user-and-a-grou
-00001ed0: 7063 6861 742d 696e 2d6d 6573 7361 6765  pchat-in-message
-00001ee0: 6368 6174 2929 2e0a 0a54 6865 204d 6573  chat))...The Mes
-00001ef0: 7361 6765 206f 626a 6563 7420 616c 736f  sage object also
-00001f00: 2068 6173 2061 2060 636f 6e74 656e 745f   has a `content_
-00001f10: 7479 7065 6061 7474 7269 6275 7465 2c20  type`attribute, 
-00001f20: 7768 6963 6820 6465 6669 6e65 7320 7468  which defines th
-00001f30: 6520 7479 7065 206f 6620 7468 6520 4d65  e type of the Me
-00001f40: 7373 6167 652e 2060 636f 6e74 656e 745f  ssage. `content_
-00001f50: 7479 7065 6020 6361 6e20 6265 206f 6e65  type` can be one
-00001f60: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
-00001f70: 6720 7374 7269 6e67 733a 0a60 7465 7874  g strings:.`text
-00001f80: 602c 2060 6175 6469 6f60 2c20 6064 6f63  `, `audio`, `doc
-00001f90: 756d 656e 7460 2c20 6070 686f 746f 602c  ument`, `photo`,
-00001fa0: 2060 7374 6963 6b65 7260 2c20 6076 6964   `sticker`, `vid
-00001fb0: 656f 602c 2060 7669 6465 6f5f 6e6f 7465  eo`, `video_note
-00001fc0: 602c 2060 766f 6963 6560 2c20 606c 6f63  `, `voice`, `loc
-00001fd0: 6174 696f 6e60 2c20 6063 6f6e 7461 6374  ation`, `contact
-00001fe0: 602c 2060 6e65 775f 6368 6174 5f6d 656d  `, `new_chat_mem
-00001ff0: 6265 7273 602c 2060 6c65 6674 5f63 6861  bers`, `left_cha
-00002000: 745f 6d65 6d62 6572 602c 2060 6e65 775f  t_member`, `new_
-00002010: 6368 6174 5f74 6974 6c65 602c 2060 6e65  chat_title`, `ne
-00002020: 775f 6368 6174 5f70 686f 746f 602c 2060  w_chat_photo`, `
-00002030: 6465 6c65 7465 5f63 6861 745f 7068 6f74  delete_chat_phot
-00002040: 6f60 2c20 6067 726f 7570 5f63 6861 745f  o`, `group_chat_
-00002050: 6372 6561 7465 6460 2c20 6073 7570 6572  created`, `super
-00002060: 6772 6f75 705f 6368 6174 5f63 7265 6174  group_chat_creat
-00002070: 6564 602c 2060 6368 616e 6e65 6c5f 6368  ed`, `channel_ch
-00002080: 6174 5f63 7265 6174 6564 602c 2060 6d69  at_created`, `mi
-00002090: 6772 6174 655f 746f 5f63 6861 745f 6964  grate_to_chat_id
-000020a0: 602c 2060 6d69 6772 6174 655f 6672 6f6d  `, `migrate_from
-000020b0: 5f63 6861 745f 6964 602c 2060 7069 6e6e  _chat_id`, `pinn
-000020c0: 6564 5f6d 6573 7361 6765 602c 2060 7765  ed_message`, `we
-000020d0: 625f 6170 705f 6461 7461 602e 0a0a 596f  b_app_data`...Yo
-000020e0: 7520 6361 6e20 7573 6520 736f 6d65 2074  u can use some t
-000020f0: 7970 6573 2069 6e20 6f6e 6520 6675 6e63  ypes in one func
-00002100: 7469 6f6e 2e20 4578 616d 706c 653a 0a0a  tion. Example:..
-00002110: 6060 6063 6f6e 7465 6e74 5f74 7970 6573  ```content_types
-00002120: 3d5b 2274 6578 7422 2c20 2273 7469 636b  =["text", "stick
-00002130: 6572 222c 2022 7069 6e6e 6564 5f6d 6573  er", "pinned_mes
-00002140: 7361 6765 222c 2022 7068 6f74 6f22 2c20  sage", "photo", 
-00002150: 2261 7564 696f 225d 6060 600a 0a23 2323  "audio"]```..###
-00002160: 204d 6574 686f 6473 0a0a 416c 6c20 5b41   Methods..All [A
-00002170: 5049 206d 6574 686f 6473 5d28 6874 7470  PI methods](http
-00002180: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
-00002190: 6d2e 6f72 672f 626f 7473 2f61 7069 2361  m.org/bots/api#a
-000021a0: 7661 696c 6162 6c65 2d6d 6574 686f 6473  vailable-methods
-000021b0: 2920 6172 6520 6c6f 6361 7465 6420 696e  ) are located in
-000021c0: 2074 6865 2054 656c 6542 6f74 2063 6c61   the TeleBot cla
-000021d0: 7373 2e20 5468 6579 2061 7265 2072 656e  ss. They are ren
-000021e0: 616d 6564 2074 6f20 666f 6c6c 6f77 2063  amed to follow c
-000021f0: 6f6d 6d6f 6e20 5079 7468 6f6e 206e 616d  ommon Python nam
-00002200: 696e 6720 636f 6e76 656e 7469 6f6e 732e  ing conventions.
-00002210: 2045 2e67 2e20 6067 6574 4d65 6020 6973   E.g. `getMe` is
-00002220: 2072 656e 616d 6564 2074 6f20 6067 6574   renamed to `get
-00002230: 5f6d 6560 2061 6e64 2060 7365 6e64 4d65  _me` and `sendMe
-00002240: 7373 6167 6560 2074 6f20 6073 656e 645f  ssage` to `send_
-00002250: 6d65 7373 6167 6560 2e0a 0a23 2323 2047  message`...### G
-00002260: 656e 6572 616c 2075 7365 206f 6620 7468  eneral use of th
-00002270: 6520 4150 490a 0a4f 7574 6c69 6e65 6420  e API..Outlined 
-00002280: 6265 6c6f 7720 6172 6520 736f 6d65 2067  below are some g
-00002290: 656e 6572 616c 2075 7365 2063 6173 6573  eneral use cases
-000022a0: 206f 6620 7468 6520 4150 492e 0a0a 2323   of the API...##
-000022b0: 2323 204d 6573 7361 6765 2068 616e 646c  ## Message handl
-000022c0: 6572 730a 4120 6d65 7373 6167 6520 6861  ers.A message ha
-000022d0: 6e64 6c65 7220 6973 2061 2066 756e 6374  ndler is a funct
-000022e0: 696f 6e20 7468 6174 2069 7320 6465 636f  ion that is deco
-000022f0: 7261 7465 6420 7769 7468 2074 6865 2060  rated with the `
-00002300: 6d65 7373 6167 655f 6861 6e64 6c65 7260  message_handler`
-00002310: 2064 6563 6f72 6174 6f72 206f 6620 6120   decorator of a 
-00002320: 5465 6c65 426f 7420 696e 7374 616e 6365  TeleBot instance
-00002330: 2e20 4d65 7373 6167 6520 6861 6e64 6c65  . Message handle
-00002340: 7273 2063 6f6e 7369 7374 206f 6620 6f6e  rs consist of on
-00002350: 6520 6f72 206d 756c 7469 706c 6520 6669  e or multiple fi
-00002360: 6c74 6572 732e 0a45 6163 6820 6669 6c74  lters..Each filt
-00002370: 6572 206d 7573 7420 7265 7475 726e 2054  er must return T
-00002380: 7275 6520 666f 7220 6120 6365 7274 6169  rue for a certai
-00002390: 6e20 6d65 7373 6167 6520 696e 206f 7264  n message in ord
-000023a0: 6572 2066 6f72 2061 206d 6573 7361 6765  er for a message
-000023b0: 2068 616e 646c 6572 2074 6f20 6265 636f   handler to beco
-000023c0: 6d65 2065 6c69 6769 626c 6520 746f 2068  me eligible to h
-000023d0: 616e 646c 6520 7468 6174 206d 6573 7361  andle that messa
-000023e0: 6765 2e20 4120 6d65 7373 6167 6520 6861  ge. A message ha
-000023f0: 6e64 6c65 7220 6973 2064 6563 6c61 7265  ndler is declare
-00002400: 6420 696e 2074 6865 2066 6f6c 6c6f 7769  d in the followi
-00002410: 6e67 2077 6179 2028 7072 6f76 6964 6564  ng way (provided
-00002420: 2060 626f 7460 2069 7320 616e 2069 6e73   `bot` is an ins
-00002430: 7461 6e63 6520 6f66 2054 656c 6542 6f74  tance of TeleBot
-00002440: 293a 0a60 6060 7079 7468 6f6e 0a40 626f  ):.```python.@bo
-00002450: 742e 6d65 7373 6167 655f 6861 6e64 6c65  t.message_handle
-00002460: 7228 6669 6c74 6572 7329 0a64 6566 2066  r(filters).def f
-00002470: 756e 6374 696f 6e5f 6e61 6d65 286d 6573  unction_name(mes
-00002480: 7361 6765 293a 0a09 626f 742e 7265 706c  sage):..bot.repl
-00002490: 795f 746f 286d 6573 7361 6765 2c20 2254  y_to(message, "T
-000024a0: 6869 7320 6973 2061 206d 6573 7361 6765  his is a message
-000024b0: 2068 616e 646c 6572 2229 0a60 6060 0a60   handler").```.`
-000024c0: 6675 6e63 7469 6f6e 5f6e 616d 6560 2069  function_name` i
-000024d0: 7320 6e6f 7420 626f 756e 6420 746f 2061  s not bound to a
-000024e0: 6e79 2072 6573 7472 6963 7469 6f6e 732e  ny restrictions.
-000024f0: 2041 6e79 2066 756e 6374 696f 6e20 6e61   Any function na
-00002500: 6d65 2069 7320 7065 726d 6974 7465 6420  me is permitted 
-00002510: 7769 7468 206d 6573 7361 6765 2068 616e  with message han
-00002520: 646c 6572 732e 2054 6865 2066 756e 6374  dlers. The funct
-00002530: 696f 6e20 6d75 7374 2061 6363 6570 7420  ion must accept 
-00002540: 6174 206d 6f73 7420 6f6e 6520 6172 6775  at most one argu
-00002550: 6d65 6e74 2c20 7768 6963 6820 7769 6c6c  ment, which will
-00002560: 2062 6520 7468 6520 6d65 7373 6167 6520   be the message 
-00002570: 7468 6174 2074 6865 2066 756e 6374 696f  that the functio
-00002580: 6e20 6d75 7374 2068 616e 646c 652e 0a60  n must handle..`
-00002590: 6669 6c74 6572 7360 2069 7320 6120 6c69  filters` is a li
-000025a0: 7374 206f 6620 6b65 7977 6f72 6420 6172  st of keyword ar
-000025b0: 6775 6d65 6e74 732e 0a41 2066 696c 7465  guments..A filte
-000025c0: 7220 6973 2064 6563 6c61 7265 6420 696e  r is declared in
-000025d0: 2074 6865 2066 6f6c 6c6f 7769 6e67 206d   the following m
-000025e0: 616e 6e65 723a 2060 6e61 6d65 3d61 7267  anner: `name=arg
-000025f0: 756d 656e 7460 2e20 4f6e 6520 6861 6e64  ument`. One hand
-00002600: 6c65 7220 6d61 7920 6861 7665 206d 756c  ler may have mul
-00002610: 7469 706c 6520 6669 6c74 6572 732e 0a54  tiple filters..T
-00002620: 656c 6542 6f74 2073 7570 706f 7274 7320  eleBot supports 
-00002630: 7468 6520 666f 6c6c 6f77 696e 6720 6669  the following fi
-00002640: 6c74 6572 733a 0a0a 7c6e 616d 657c 6172  lters:..|name|ar
-00002650: 6775 6d65 6e74 2873 297c 436f 6e64 6974  gument(s)|Condit
-00002660: 696f 6e7c 0a7c 3a2d 2d2d 3a7c 2d2d 2d7c  ion|.|:---:|---|
-00002670: 202d 2d2d 7c0a 7c63 6f6e 7465 6e74 5f74   ---|.|content_t
-00002680: 7970 6573 7c6c 6973 7420 6f66 2073 7472  ypes|list of str
-00002690: 696e 6773 2028 6465 6661 756c 7420 605b  ings (default `[
-000026a0: 2774 6578 7427 5d60 297c 6054 7275 6560  'text']`)|`True`
-000026b0: 2069 6620 6d65 7373 6167 652e 636f 6e74   if message.cont
-000026c0: 656e 745f 7479 7065 2069 7320 696e 2074  ent_type is in t
-000026d0: 6865 206c 6973 7420 6f66 2073 7472 696e  he list of strin
-000026e0: 6773 2e7c 0a7c 7265 6765 7870 7c61 2072  gs.|.|regexp|a r
-000026f0: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-00002700: 6e20 6173 2061 2073 7472 696e 677c 6054  n as a string|`T
-00002710: 7275 6560 2069 6620 6072 652e 7365 6172  rue` if `re.sear
-00002720: 6368 2872 6567 6578 705f 6172 6729 6020  ch(regexp_arg)` 
-00002730: 7265 7475 726e 7320 6054 7275 6560 2061  returns `True` a
-00002740: 6e64 2060 6d65 7373 6167 652e 636f 6e74  nd `message.cont
-00002750: 656e 745f 7479 7065 203d 3d20 2774 6578  ent_type == 'tex
-00002760: 7427 6020 2853 6565 205b 5079 7468 6f6e  t'` (See [Python
-00002770: 2052 6567 756c 6172 2045 7870 7265 7373   Regular Express
-00002780: 696f 6e73 5d28 6874 7470 733a 2f2f 646f  ions](https://do
-00002790: 6373 2e70 7974 686f 6e2e 6f72 672f 322f  cs.python.org/2/
-000027a0: 6c69 6272 6172 792f 7265 2e68 746d 6c29  library/re.html)
-000027b0: 297c 0a7c 636f 6d6d 616e 6473 7c6c 6973  )|.|commands|lis
-000027c0: 7420 6f66 2073 7472 696e 6773 7c60 5472  t of strings|`Tr
-000027d0: 7565 6020 6966 2060 6d65 7373 6167 652e  ue` if `message.
-000027e0: 636f 6e74 656e 745f 7479 7065 203d 3d20  content_type == 
-000027f0: 2774 6578 7427 6020 616e 6420 606d 6573  'text'` and `mes
-00002800: 7361 6765 2e74 6578 7460 2073 7461 7274  sage.text` start
-00002810: 7320 7769 7468 2061 2063 6f6d 6d61 6e64  s with a command
-00002820: 2074 6861 7420 6973 2069 6e20 7468 6520   that is in the 
-00002830: 6c69 7374 206f 6620 7374 7269 6e67 732e  list of strings.
-00002840: 7c0a 7c63 6861 745f 7479 7065 737c 6c69  |.|chat_types|li
-00002850: 7374 206f 6620 6368 6174 2074 7970 6573  st of chat types
-00002860: 7c60 5472 7565 6020 6966 2060 6d65 7373  |`True` if `mess
-00002870: 6167 652e 6368 6174 2e74 7970 6560 2069  age.chat.type` i
-00002880: 6e20 796f 7572 2066 696c 7465 727c 0a7c  n your filter|.|
-00002890: 6675 6e63 7c61 2066 756e 6374 696f 6e20  func|a function 
-000028a0: 286c 616d 6264 6120 6f72 2066 756e 6374  (lambda or funct
-000028b0: 696f 6e20 7265 6665 7265 6e63 6529 7c60  ion reference)|`
-000028c0: 5472 7565 6020 6966 2074 6865 206c 616d  True` if the lam
-000028d0: 6264 6120 6f72 2066 756e 6374 696f 6e20  bda or function 
-000028e0: 7265 6665 7265 6e63 6520 7265 7475 726e  reference return
-000028f0: 7320 6054 7275 6560 7c0a 090a 4865 7265  s `True`|...Here
-00002900: 2061 7265 2073 6f6d 6520 6578 616d 706c   are some exampl
-00002910: 6573 206f 6620 7573 696e 6720 7468 6520  es of using the 
-00002920: 6669 6c74 6572 7320 616e 6420 6d65 7373  filters and mess
-00002930: 6167 6520 6861 6e64 6c65 7273 3a0a 0a60  age handlers:..`
-00002940: 6060 7079 7468 6f6e 0a69 6d70 6f72 7420  ``python.import 
-00002950: 7465 6c65 626f 740a 626f 7420 3d20 7465  telebot.bot = te
-00002960: 6c65 626f 742e 5465 6c65 426f 7428 2254  lebot.TeleBot("T
-00002970: 4f4b 454e 2229 0a0a 2320 4861 6e64 6c65  OKEN")..# Handle
-00002980: 7320 616c 6c20 7465 7874 206d 6573 7361  s all text messa
-00002990: 6765 7320 7468 6174 2063 6f6e 7461 696e  ges that contain
-000029a0: 7320 7468 6520 636f 6d6d 616e 6473 2027  s the commands '
-000029b0: 2f73 7461 7274 2720 6f72 2027 2f68 656c  /start' or '/hel
-000029c0: 7027 2e0a 4062 6f74 2e6d 6573 7361 6765  p'..@bot.message
-000029d0: 5f68 616e 646c 6572 2863 6f6d 6d61 6e64  _handler(command
-000029e0: 733d 5b27 7374 6172 7427 2c20 2768 656c  s=['start', 'hel
-000029f0: 7027 5d29 0a64 6566 2068 616e 646c 655f  p']).def handle_
-00002a00: 7374 6172 745f 6865 6c70 286d 6573 7361  start_help(messa
-00002a10: 6765 293a 0a09 7061 7373 0a0a 2320 4861  ge):..pass..# Ha
-00002a20: 6e64 6c65 7320 616c 6c20 7365 6e74 2064  ndles all sent d
-00002a30: 6f63 756d 656e 7473 2061 6e64 2061 7564  ocuments and aud
-00002a40: 696f 2066 696c 6573 0a40 626f 742e 6d65  io files.@bot.me
-00002a50: 7373 6167 655f 6861 6e64 6c65 7228 636f  ssage_handler(co
-00002a60: 6e74 656e 745f 7479 7065 733d 5b27 646f  ntent_types=['do
-00002a70: 6375 6d65 6e74 272c 2027 6175 6469 6f27  cument', 'audio'
-00002a80: 5d29 0a64 6566 2068 616e 646c 655f 646f  ]).def handle_do
-00002a90: 6373 5f61 7564 696f 286d 6573 7361 6765  cs_audio(message
-00002aa0: 293a 0a09 7061 7373 0a0a 2320 4861 6e64  ):..pass..# Hand
-00002ab0: 6c65 7320 616c 6c20 7465 7874 206d 6573  les all text mes
-00002ac0: 7361 6765 7320 7468 6174 206d 6174 6368  sages that match
-00002ad0: 2074 6865 2072 6567 756c 6172 2065 7870   the regular exp
-00002ae0: 7265 7373 696f 6e0a 4062 6f74 2e6d 6573  ression.@bot.mes
-00002af0: 7361 6765 5f68 616e 646c 6572 2872 6567  sage_handler(reg
-00002b00: 6578 703d 2253 4f4d 455f 5245 4745 5850  exp="SOME_REGEXP
-00002b10: 2229 0a64 6566 2068 616e 646c 655f 6d65  ").def handle_me
-00002b20: 7373 6167 6528 6d65 7373 6167 6529 3a0a  ssage(message):.
-00002b30: 0970 6173 730a 0a23 2048 616e 646c 6573  .pass..# Handles
-00002b40: 2061 6c6c 206d 6573 7361 6765 7320 666f   all messages fo
-00002b50: 7220 7768 6963 6820 7468 6520 6c61 6d62  r which the lamb
-00002b60: 6461 2072 6574 7572 6e73 2054 7275 650a  da returns True.
-00002b70: 4062 6f74 2e6d 6573 7361 6765 5f68 616e  @bot.message_han
-00002b80: 646c 6572 2866 756e 633d 6c61 6d62 6461  dler(func=lambda
-00002b90: 206d 6573 7361 6765 3a20 6d65 7373 6167   message: messag
-00002ba0: 652e 646f 6375 6d65 6e74 2e6d 696d 655f  e.document.mime_
-00002bb0: 7479 7065 203d 3d20 2774 6578 742f 706c  type == 'text/pl
-00002bc0: 6169 6e27 2c20 636f 6e74 656e 745f 7479  ain', content_ty
-00002bd0: 7065 733d 5b27 646f 6375 6d65 6e74 275d  pes=['document']
-00002be0: 290a 6465 6620 6861 6e64 6c65 5f74 6578  ).def handle_tex
-00002bf0: 745f 646f 6328 6d65 7373 6167 6529 3a0a  t_doc(message):.
-00002c00: 0970 6173 730a 0a23 2057 6869 6368 2063  .pass..# Which c
-00002c10: 6f75 6c64 2061 6c73 6f20 6265 2064 6566  ould also be def
-00002c20: 696e 6564 2061 733a 0a64 6566 2074 6573  ined as:.def tes
-00002c30: 745f 6d65 7373 6167 6528 6d65 7373 6167  t_message(messag
-00002c40: 6529 3a0a 0972 6574 7572 6e20 6d65 7373  e):..return mess
-00002c50: 6167 652e 646f 6375 6d65 6e74 2e6d 696d  age.document.mim
-00002c60: 655f 7479 7065 203d 3d20 2774 6578 742f  e_type == 'text/
-00002c70: 706c 6169 6e27 0a0a 4062 6f74 2e6d 6573  plain'..@bot.mes
-00002c80: 7361 6765 5f68 616e 646c 6572 2866 756e  sage_handler(fun
-00002c90: 633d 7465 7374 5f6d 6573 7361 6765 2c20  c=test_message, 
-00002ca0: 636f 6e74 656e 745f 7479 7065 733d 5b27  content_types=['
-00002cb0: 646f 6375 6d65 6e74 275d 290a 6465 6620  document']).def 
-00002cc0: 6861 6e64 6c65 5f74 6578 745f 646f 6328  handle_text_doc(
-00002cd0: 6d65 7373 6167 6529 3a0a 0970 6173 730a  message):..pass.
-00002ce0: 0a23 2048 616e 646c 6572 7320 6361 6e20  .# Handlers can 
-00002cf0: 6265 2073 7461 636b 6564 2074 6f20 6372  be stacked to cr
-00002d00: 6561 7465 2061 2066 756e 6374 696f 6e20  eate a function 
-00002d10: 7768 6963 6820 7769 6c6c 2062 6520 6361  which will be ca
-00002d20: 6c6c 6564 2069 6620 6569 7468 6572 206d  lled if either m
-00002d30: 6573 7361 6765 5f68 616e 646c 6572 2069  essage_handler i
-00002d40: 7320 656c 6967 6962 6c65 0a23 2054 6869  s eligible.# Thi
-00002d50: 7320 6861 6e64 6c65 7220 7769 6c6c 2062  s handler will b
-00002d60: 6520 6361 6c6c 6564 2069 6620 7468 6520  e called if the 
-00002d70: 6d65 7373 6167 6520 7374 6172 7473 2077  message starts w
-00002d80: 6974 6820 272f 6865 6c6c 6f27 204f 5220  ith '/hello' OR 
-00002d90: 6973 2073 6f6d 6520 656d 6f6a 690a 4062  is some emoji.@b
-00002da0: 6f74 2e6d 6573 7361 6765 5f68 616e 646c  ot.message_handl
-00002db0: 6572 2863 6f6d 6d61 6e64 733d 5b27 6865  er(commands=['he
-00002dc0: 6c6c 6f27 5d29 0a40 626f 742e 6d65 7373  llo']).@bot.mess
-00002dd0: 6167 655f 6861 6e64 6c65 7228 6675 6e63  age_handler(func
-00002de0: 3d6c 616d 6264 6120 6d73 673a 206d 7367  =lambda msg: msg
-00002df0: 2e74 6578 742e 656e 636f 6465 2822 7574  .text.encode("ut
-00002e00: 662d 3822 2920 3d3d 2053 4f4d 455f 4641  f-8") == SOME_FA
-00002e10: 4e43 595f 454d 4f4a 4929 0a64 6566 2073  NCY_EMOJI).def s
-00002e20: 656e 645f 736f 6d65 7468 696e 6728 6d65  end_something(me
-00002e30: 7373 6167 6529 3a0a 2020 2020 7061 7373  ssage):.    pass
-00002e40: 0a60 6060 0a2a 2a49 6d70 6f72 7461 6e74  .```.**Important
-00002e50: 3a20 616c 6c20 6861 6e64 6c65 7273 2061  : all handlers a
-00002e60: 7265 2074 6573 7465 6420 696e 2074 6865  re tested in the
-00002e70: 206f 7264 6572 2069 6e20 7768 6963 6820   order in which 
-00002e80: 7468 6579 2077 6572 6520 6465 636c 6172  they were declar
-00002e90: 6564 2a2a 0a0a 2323 2323 2045 6469 7465  ed**..#### Edite
-00002ea0: 6420 4d65 7373 6167 6520 6861 6e64 6c65  d Message handle
-00002eb0: 720a 4861 6e64 6c65 2065 6469 7465 6420  r.Handle edited 
-00002ec0: 6d65 7373 6167 6573 0a60 4062 6f74 2e65  messages.`@bot.e
-00002ed0: 6469 7465 645f 6d65 7373 6167 655f 6861  dited_message_ha
-00002ee0: 6e64 6c65 7228 6669 6c74 6572 7329 2023  ndler(filters) #
-00002ef0: 203c 2d20 7061 7373 6573 2061 204d 6573   <- passes a Mes
-00002f00: 7361 6765 2074 7970 6520 6f62 6a65 6374  sage type object
-00002f10: 2074 6f20 796f 7572 2066 756e 6374 696f   to your functio
-00002f20: 6e60 0a0a 2323 2323 2043 6861 6e6e 656c  n`..#### Channel
-00002f30: 2050 6f73 7420 6861 6e64 6c65 720a 4861   Post handler.Ha
-00002f40: 6e64 6c65 2063 6861 6e6e 656c 2070 6f73  ndle channel pos
-00002f50: 7420 6d65 7373 6167 6573 0a60 4062 6f74  t messages.`@bot
-00002f60: 2e63 6861 6e6e 656c 5f70 6f73 745f 6861  .channel_post_ha
-00002f70: 6e64 6c65 7228 6669 6c74 6572 7329 2023  ndler(filters) #
-00002f80: 203c 2d20 7061 7373 6573 2061 204d 6573   <- passes a Mes
-00002f90: 7361 6765 2074 7970 6520 6f62 6a65 6374  sage type object
-00002fa0: 2074 6f20 796f 7572 2066 756e 6374 696f   to your functio
-00002fb0: 6e60 0a0a 2323 2323 2045 6469 7465 6420  n`..#### Edited 
-00002fc0: 4368 616e 6e65 6c20 506f 7374 2068 616e  Channel Post han
-00002fd0: 646c 6572 0a48 616e 646c 6520 6564 6974  dler.Handle edit
-00002fe0: 6564 2063 6861 6e6e 656c 2070 6f73 7420  ed channel post 
-00002ff0: 6d65 7373 6167 6573 0a60 4062 6f74 2e65  messages.`@bot.e
-00003000: 6469 7465 645f 6368 616e 6e65 6c5f 706f  dited_channel_po
-00003010: 7374 5f68 616e 646c 6572 2866 696c 7465  st_handler(filte
-00003020: 7273 2920 2320 3c2d 2070 6173 7365 7320  rs) # <- passes 
-00003030: 6120 4d65 7373 6167 6520 7479 7065 206f  a Message type o
-00003040: 626a 6563 7420 746f 2079 6f75 7220 6675  bject to your fu
-00003050: 6e63 7469 6f6e 600a 0a23 2323 2320 4361  nction`..#### Ca
-00003060: 6c6c 6261 636b 2051 7565 7279 2048 616e  llback Query Han
-00003070: 646c 6572 0a48 616e 646c 6520 6361 6c6c  dler.Handle call
-00003080: 6261 636b 2071 7565 7269 6573 0a60 6060  back queries.```
-00003090: 7079 7468 6f6e 0a40 626f 742e 6361 6c6c  python.@bot.call
-000030a0: 6261 636b 5f71 7565 7279 5f68 616e 646c  back_query_handl
-000030b0: 6572 2866 756e 633d 6c61 6d62 6461 2063  er(func=lambda c
-000030c0: 616c 6c3a 2054 7275 6529 0a64 6566 2074  all: True).def t
-000030d0: 6573 745f 6361 6c6c 6261 636b 2863 616c  est_callback(cal
-000030e0: 6c29 3a20 2320 3c2d 2070 6173 7365 7320  l): # <- passes 
-000030f0: 6120 4361 6c6c 6261 636b 5175 6572 7920  a CallbackQuery 
-00003100: 7479 7065 206f 626a 6563 7420 746f 2079  type object to y
-00003110: 6f75 7220 6675 6e63 7469 6f6e 0a20 2020  our function.   
-00003120: 206c 6f67 6765 722e 696e 666f 2863 616c   logger.info(cal
-00003130: 6c29 0a60 6060 0a0a 2323 2323 2053 6869  l).```..#### Shi
-00003140: 7070 696e 6720 5175 6572 7920 4861 6e64  pping Query Hand
-00003150: 6c65 720a 4861 6e64 6c65 2073 6869 7070  ler.Handle shipp
-00003160: 696e 6720 7175 6572 6965 730a 6040 626f  ing queries.`@bo
-00003170: 742e 7368 6970 7069 6e67 5f71 7565 7279  t.shipping_query
-00003180: 5f68 616e 6465 6c65 7228 2920 2320 3c2d  _handeler() # <-
-00003190: 2070 6173 7365 7320 6120 5368 6970 7069   passes a Shippi
-000031a0: 6e67 5175 6572 7920 7479 7065 206f 626a  ngQuery type obj
-000031b0: 6563 7420 746f 2079 6f75 7220 6675 6e63  ect to your func
-000031c0: 7469 6f6e 600a 0a23 2323 2320 5072 6520  tion`..#### Pre 
-000031d0: 4368 6563 6b6f 7574 2051 7565 7279 2048  Checkout Query H
-000031e0: 616e 646c 6572 0a48 616e 646c 6520 7072  andler.Handle pr
-000031f0: 6520 6368 6563 6b6f 7570 7420 7175 6572  e checkoupt quer
-00003200: 6965 730a 6040 626f 742e 7072 655f 6368  ies.`@bot.pre_ch
-00003210: 6563 6b6f 7574 5f71 7565 7279 5f68 616e  eckout_query_han
-00003220: 646c 6572 2829 2023 203c 2d20 7061 7373  dler() # <- pass
-00003230: 6573 2061 2050 7265 4368 6563 6b6f 7574  es a PreCheckout
-00003240: 5175 6572 7920 7479 7065 206f 626a 6563  Query type objec
-00003250: 7420 746f 2079 6f75 7220 6675 6e63 7469  t to your functi
-00003260: 6f6e 600a 0a23 2323 2320 506f 6c6c 2048  on`..#### Poll H
-00003270: 616e 646c 6572 0a48 616e 646c 6520 706f  andler.Handle po
-00003280: 6c6c 2075 7064 6174 6573 0a60 4062 6f74  ll updates.`@bot
-00003290: 2e70 6f6c 6c5f 6861 6e64 6c65 7228 2920  .poll_handler() 
-000032a0: 2320 3c2d 2070 6173 7365 7320 6120 506f  # <- passes a Po
-000032b0: 6c6c 2074 7970 6520 6f62 6a65 6374 2074  ll type object t
-000032c0: 6f20 796f 7572 2066 756e 6374 696f 6e60  o your function`
-000032d0: 0a0a 2323 2323 2050 6f6c 6c20 416e 7377  ..#### Poll Answ
-000032e0: 6572 2048 616e 646c 6572 0a48 616e 646c  er Handler.Handl
-000032f0: 6520 706f 6c6c 2061 6e73 7765 7273 0a60  e poll answers.`
-00003300: 4062 6f74 2e70 6f6c 6c5f 616e 7377 6572  @bot.poll_answer
-00003310: 5f68 616e 646c 6572 2829 2023 203c 2d20  _handler() # <- 
-00003320: 7061 7373 6573 2061 2050 6f6c 6c41 6e73  passes a PollAns
-00003330: 7765 7220 7479 7065 206f 626a 6563 7420  wer type object 
-00003340: 746f 2079 6f75 7220 6675 6e63 7469 6f6e  to your function
-00003350: 600a 0a23 2323 2320 4d79 2043 6861 7420  `..#### My Chat 
-00003360: 4d65 6d62 6572 2048 616e 646c 6572 0a48  Member Handler.H
-00003370: 616e 646c 6520 7570 6461 7465 7320 6f66  andle updates of
-00003380: 2061 2074 6865 2062 6f74 2773 206d 656d   a the bot's mem
-00003390: 6265 7220 7374 6174 7573 2069 6e20 6120  ber status in a 
-000033a0: 6368 6174 0a60 4062 6f74 2e6d 795f 6368  chat.`@bot.my_ch
-000033b0: 6174 5f6d 656d 6265 725f 6861 6e64 6c65  at_member_handle
-000033c0: 7228 2920 2320 3c2d 2070 6173 7365 7320  r() # <- passes 
-000033d0: 6120 4368 6174 4d65 6d62 6572 5570 6461  a ChatMemberUpda
-000033e0: 7465 6420 7479 7065 206f 626a 6563 7420  ted type object 
-000033f0: 746f 2079 6f75 7220 6675 6e63 7469 6f6e  to your function
-00003400: 600a 0a23 2323 2320 4368 6174 204d 656d  `..#### Chat Mem
-00003410: 6265 7220 4861 6e64 6c65 720a 4861 6e64  ber Handler.Hand
-00003420: 6c65 2075 7064 6174 6573 206f 6620 6120  le updates of a 
-00003430: 6368 6174 206d 656d 6265 7227 7320 7374  chat member's st
-00003440: 6174 7573 2069 6e20 6120 6368 6174 0a60  atus in a chat.`
-00003450: 4062 6f74 2e63 6861 745f 6d65 6d62 6572  @bot.chat_member
-00003460: 5f68 616e 646c 6572 2829 2023 203c 2d20  _handler() # <- 
-00003470: 7061 7373 6573 2061 2043 6861 744d 656d  passes a ChatMem
-00003480: 6265 7255 7064 6174 6564 2074 7970 6520  berUpdated type 
-00003490: 6f62 6a65 6374 2074 6f20 796f 7572 2066  object to your f
-000034a0: 756e 6374 696f 6e60 0a2a 4e6f 7465 3a20  unction`.*Note: 
-000034b0: 2263 6861 745f 6d65 6d62 6572 2220 7570  "chat_member" up
-000034c0: 6461 7465 7320 6172 6520 6e6f 7420 7265  dates are not re
-000034d0: 7175 6573 7465 6420 6279 2064 6566 6175  quested by defau
-000034e0: 6c74 2e20 4966 2079 6f75 2077 616e 7420  lt. If you want 
-000034f0: 746f 2061 6c6c 6f77 2061 6c6c 2075 7064  to allow all upd
-00003500: 6174 6520 7479 7065 732c 2073 6574 2060  ate types, set `
-00003510: 616c 6c6f 7765 645f 7570 6461 7465 7360  allowed_updates`
-00003520: 2069 6e20 6062 6f74 2e70 6f6c 6c69 6e67   in `bot.polling
-00003530: 2829 6020 2f20 6062 6f74 2e69 6e66 696e  ()` / `bot.infin
-00003540: 6974 795f 706f 6c6c 696e 6728 2960 2074  ity_polling()` t
-00003550: 6f20 6075 7469 6c2e 7570 6461 7465 5f74  o `util.update_t
-00003560: 7970 6573 602a 0a0a 2323 2323 2043 6861  ypes`*..#### Cha
-00003570: 7420 4a6f 696e 2052 6571 7565 7374 2048  t Join Request H
-00003580: 616e 646c 6572 090a 4861 6e64 6c65 2063  andler..Handle c
-00003590: 6861 7420 6a6f 696e 2072 6571 7565 7374  hat join request
-000035a0: 7320 7573 696e 673a 0a60 4062 6f74 2e63  s using:.`@bot.c
-000035b0: 6861 745f 6a6f 696e 5f72 6571 7565 7374  hat_join_request
-000035c0: 5f68 616e 646c 6572 2829 2023 203c 2d20  _handler() # <- 
-000035d0: 7061 7373 6573 2043 6861 7449 6e76 6974  passes ChatInvit
-000035e0: 654c 696e 6b20 7479 7065 206f 626a 6563  eLink type objec
-000035f0: 7420 746f 2079 6f75 7220 6675 6e63 7469  t to your functi
-00003600: 6f6e 600a 0a23 2323 2049 6e6c 696e 6520  on`..### Inline 
-00003610: 4d6f 6465 0a0a 4d6f 7265 2069 6e66 6f72  Mode..More infor
-00003620: 6d61 7469 6f6e 2061 626f 7574 205b 496e  mation about [In
-00003630: 6c69 6e65 206d 6f64 655d 2868 7474 7073  line mode](https
-00003640: 3a2f 2f63 6f72 652e 7465 6c65 6772 616d  ://core.telegram
-00003650: 2e6f 7267 2f62 6f74 732f 696e 6c69 6e65  .org/bots/inline
-00003660: 292e 0a0a 2323 2323 2049 6e6c 696e 6520  )...#### Inline 
-00003670: 6861 6e64 6c65 720a 0a4e 6f77 2c20 796f  handler..Now, yo
-00003680: 7520 6361 6e20 7573 6520 696e 6c69 6e65  u can use inline
-00003690: 5f68 616e 646c 6572 2074 6f20 6765 7420  _handler to get 
-000036a0: 696e 6c69 6e65 2071 7565 7269 6573 2069  inline queries i
-000036b0: 6e20 7465 6c65 626f 742e 0a0a 6060 6070  n telebot...```p
-000036c0: 7974 686f 6e0a 0a40 626f 742e 696e 6c69  ython..@bot.inli
-000036d0: 6e65 5f68 616e 646c 6572 286c 616d 6264  ne_handler(lambd
-000036e0: 6120 7175 6572 793a 2071 7565 7279 2e71  a query: query.q
-000036f0: 7565 7279 203d 3d20 2774 6578 7427 290a  uery == 'text').
-00003700: 6465 6620 7175 6572 795f 7465 7874 2869  def query_text(i
-00003710: 6e6c 696e 655f 7175 6572 7929 3a0a 2020  nline_query):.  
-00003720: 2020 2320 5175 6572 7920 6d65 7373 6167    # Query messag
-00003730: 6520 6973 2074 6578 740a 6060 600a 0a23  e is text.```..#
-00003740: 2323 2320 4368 6f73 656e 2049 6e6c 696e  ### Chosen Inlin
-00003750: 6520 6861 6e64 6c65 720a 0a55 7365 2063  e handler..Use c
-00003760: 686f 7365 6e5f 696e 6c69 6e65 5f68 616e  hosen_inline_han
-00003770: 646c 6572 2074 6f20 6765 7420 6368 6f73  dler to get chos
-00003780: 656e 5f69 6e6c 696e 655f 7265 7375 6c74  en_inline_result
-00003790: 2069 6e20 7465 6c65 626f 742e 2044 6f6e   in telebot. Don
-000037a0: 2774 2066 6f72 676f 7420 6164 6420 7468  't forgot add th
-000037b0: 6520 2f73 6574 696e 6c69 6e65 6665 6564  e /setinlinefeed
-000037c0: 6261 636b 0a63 6f6d 6d61 6e64 2066 6f72  back.command for
-000037d0: 2040 426f 7466 6174 6865 722e 0a0a 4d6f   @Botfather...Mo
-000037e0: 7265 2069 6e66 6f72 6d61 7469 6f6e 203a  re information :
-000037f0: 205b 636f 6c6c 6563 7469 6e67 2d66 6565   [collecting-fee
-00003800: 6462 6163 6b5d 2868 7474 7073 3a2f 2f63  dback](https://c
-00003810: 6f72 652e 7465 6c65 6772 616d 2e6f 7267  ore.telegram.org
-00003820: 2f62 6f74 732f 696e 6c69 6e65 2363 6f6c  /bots/inline#col
-00003830: 6c65 6374 696e 672d 6665 6564 6261 636b  lecting-feedback
-00003840: 290a 0a60 6060 7079 7468 6f6e 0a40 626f  )..```python.@bo
-00003850: 742e 6368 6f73 656e 5f69 6e6c 696e 655f  t.chosen_inline_
-00003860: 6861 6e64 6c65 7228 6675 6e63 3d6c 616d  handler(func=lam
-00003870: 6264 6120 6368 6f73 656e 5f69 6e6c 696e  bda chosen_inlin
-00003880: 655f 7265 7375 6c74 3a20 5472 7565 290a  e_result: True).
-00003890: 6465 6620 7465 7374 5f63 686f 7365 6e28  def test_chosen(
-000038a0: 6368 6f73 656e 5f69 6e6c 696e 655f 7265  chosen_inline_re
-000038b0: 7375 6c74 293a 0a20 2020 2023 2050 726f  sult):.    # Pro
-000038c0: 6365 7373 2061 6c6c 2063 686f 7365 6e5f  cess all chosen_
-000038d0: 696e 6c69 6e65 5f72 6573 756c 742e 0a60  inline_result..`
-000038e0: 6060 0a0a 2323 2323 2041 6e73 7765 7220  ``..#### Answer 
-000038f0: 496e 6c69 6e65 2051 7565 7279 0a0a 6060  Inline Query..``
-00003900: 6070 7974 686f 6e0a 4062 6f74 2e69 6e6c  `python.@bot.inl
-00003910: 696e 655f 6861 6e64 6c65 7228 6c61 6d62  ine_handler(lamb
-00003920: 6461 2071 7565 7279 3a20 7175 6572 792e  da query: query.
-00003930: 7175 6572 7920 3d3d 2027 7465 7874 2729  query == 'text')
-00003940: 0a64 6566 2071 7565 7279 5f74 6578 7428  .def query_text(
-00003950: 696e 6c69 6e65 5f71 7565 7279 293a 0a20  inline_query):. 
-00003960: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00003970: 7220 3d20 7479 7065 732e 496e 6c69 6e65  r = types.Inline
-00003980: 5175 6572 7952 6573 756c 7441 7274 6963  QueryResultArtic
-00003990: 6c65 2827 3127 2c20 2752 6573 756c 7427  le('1', 'Result'
-000039a0: 2c20 7479 7065 732e 496e 7075 7454 6578  , types.InputTex
-000039b0: 744d 6573 7361 6765 436f 6e74 656e 7428  tMessageContent(
-000039c0: 2752 6573 756c 7420 6d65 7373 6167 652e  'Result message.
-000039d0: 2729 290a 2020 2020 2020 2020 7232 203d  ')).        r2 =
-000039e0: 2074 7970 6573 2e49 6e6c 696e 6551 7565   types.InlineQue
-000039f0: 7279 5265 7375 6c74 4172 7469 636c 6528  ryResultArticle(
-00003a00: 2732 272c 2027 5265 7375 6c74 3227 2c20  '2', 'Result2', 
-00003a10: 7479 7065 732e 496e 7075 7454 6578 744d  types.InputTextM
-00003a20: 6573 7361 6765 436f 6e74 656e 7428 2752  essageContent('R
-00003a30: 6573 756c 7420 6d65 7373 6167 6532 2e27  esult message2.'
-00003a40: 2929 0a20 2020 2020 2020 2062 6f74 2e61  )).        bot.a
-00003a50: 6e73 7765 725f 696e 6c69 6e65 5f71 7565  nswer_inline_que
-00003a60: 7279 2869 6e6c 696e 655f 7175 6572 792e  ry(inline_query.
-00003a70: 6964 2c20 5b72 2c20 7232 5d29 0a20 2020  id, [r, r2]).   
-00003a80: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00003a90: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
-00003aa0: 7072 696e 7428 6529 0a0a 6060 600a 0a23  print(e)..```..#
-00003ab0: 2323 2041 6464 6974 696f 6e61 6c20 4150  ## Additional AP
-00003ac0: 4920 6665 6174 7572 6573 0a0a 2323 2323  I features..####
-00003ad0: 204d 6964 646c 6577 6172 6520 4861 6e64   Middleware Hand
-00003ae0: 6c65 7273 0a0a 4120 6d69 6464 6c65 7761  lers..A middlewa
-00003af0: 7265 2068 616e 646c 6572 2069 7320 6120  re handler is a 
-00003b00: 6675 6e63 7469 6f6e 2074 6861 7420 616c  function that al
-00003b10: 6c6f 7773 2079 6f75 2074 6f20 6d6f 6469  lows you to modi
-00003b20: 6679 2072 6571 7565 7374 7320 6f72 2074  fy requests or t
-00003b30: 6865 2062 6f74 2063 6f6e 7465 7874 2061  he bot context a
-00003b40: 7320 7468 6579 2070 6173 7320 7468 726f  s they pass thro
-00003b50: 7567 6820 7468 6520 0a54 656c 6567 7261  ugh the .Telegra
-00003b60: 6d20 746f 2074 6865 2062 6f74 2e20 596f  m to the bot. Yo
-00003b70: 7520 6361 6e20 696d 6167 696e 6520 6d69  u can imagine mi
-00003b80: 6464 6c65 7761 7265 2061 7320 6120 6368  ddleware as a ch
-00003b90: 6169 6e20 6f66 206c 6f67 6963 2063 6f6e  ain of logic con
-00003ba0: 6e65 6374 696f 6e20 6861 6e64 6c65 6420  nection handled 
-00003bb0: 6265 666f 7265 2061 6e79 206f 7468 6572  before any other
-00003bc0: 2068 616e 646c 6572 7320 6172 650a 6578   handlers are.ex
-00003bd0: 6563 7574 6564 2e20 4d69 6464 6c65 7761  ecuted. Middlewa
-00003be0: 7265 2070 726f 6365 7373 696e 6720 6973  re processing is
-00003bf0: 2064 6973 6162 6c65 6420 6279 2064 6566   disabled by def
-00003c00: 6175 6c74 2c20 656e 6162 6c65 2069 7420  ault, enable it 
-00003c10: 6279 2073 6574 7469 6e67 2060 6170 6968  by setting `apih
-00003c20: 656c 7065 722e 454e 4142 4c45 5f4d 4944  elper.ENABLE_MID
-00003c30: 444c 4557 4152 4520 3d20 5472 7565 602e  DLEWARE = True`.
-00003c40: 200a 0a60 6060 7079 7468 6f6e 0a61 7069   ..```python.api
-00003c50: 6865 6c70 6572 2e45 4e41 424c 455f 4d49  helper.ENABLE_MI
-00003c60: 4444 4c45 5741 5245 203d 2054 7275 650a  DDLEWARE = True.
-00003c70: 0a40 626f 742e 6d69 6464 6c65 7761 7265  .@bot.middleware
-00003c80: 5f68 616e 646c 6572 2875 7064 6174 655f  _handler(update_
-00003c90: 7479 7065 733d 5b27 6d65 7373 6167 6527  types=['message'
-00003ca0: 5d29 0a64 6566 206d 6f64 6966 795f 6d65  ]).def modify_me
-00003cb0: 7373 6167 6528 626f 745f 696e 7374 616e  ssage(bot_instan
-00003cc0: 6365 2c20 6d65 7373 6167 6529 3a0a 2020  ce, message):.  
-00003cd0: 2020 2320 6d6f 6469 6679 696e 6720 7468    # modifying th
-00003ce0: 6520 6d65 7373 6167 6520 6265 666f 7265  e message before
-00003cf0: 2069 7420 7265 6163 6865 7320 616e 7920   it reaches any 
-00003d00: 6f74 6865 7220 6861 6e64 6c65 7220 0a20  other handler . 
-00003d10: 2020 206d 6573 7361 6765 2e61 6e6f 7468     message.anoth
-00003d20: 6572 5f74 6578 7420 3d20 6d65 7373 6167  er_text = messag
-00003d30: 652e 7465 7874 202b 2027 3a63 6861 6e67  e.text + ':chang
-00003d40: 6564 270a 0a40 626f 742e 6d65 7373 6167  ed'..@bot.messag
-00003d50: 655f 6861 6e64 6c65 7228 636f 6d6d 616e  e_handler(comman
-00003d60: 6473 3d5b 2773 7461 7274 275d 290a 6465  ds=['start']).de
-00003d70: 6620 7374 6172 7428 6d65 7373 6167 6529  f start(message)
-00003d80: 3a0a 2020 2020 2320 7468 6520 6d65 7373  :.    # the mess
-00003d90: 6167 6520 6973 2061 6c72 6561 6479 206d  age is already m
-00003da0: 6f64 6966 6965 6420 7768 656e 2069 7420  odified when it 
-00003db0: 7265 6163 6865 7320 6d65 7373 6167 6520  reaches message 
-00003dc0: 6861 6e64 6c65 720a 2020 2020 6173 7365  handler.    asse
-00003dd0: 7274 206d 6573 7361 6765 2e61 6e6f 7468  rt message.anoth
-00003de0: 6572 5f74 6578 7420 3d3d 206d 6573 7361  er_text == messa
-00003df0: 6765 2e74 6578 7420 2b20 273a 6368 616e  ge.text + ':chan
-00003e00: 6765 6427 0a60 6060 0a54 6865 7265 2061  ged'.```.There a
-00003e10: 7265 206f 7468 6572 2065 7861 6d70 6c65  re other example
-00003e20: 7320 7573 696e 6720 6d69 6464 6c65 7761  s using middlewa
-00003e30: 7265 2068 616e 646c 6572 2069 6e20 7468  re handler in th
-00003e40: 6520 5b65 7861 6d70 6c65 732f 6d69 6464  e [examples/midd
-00003e50: 6c65 7761 7265 5d28 6578 616d 706c 6573  leware](examples
-00003e60: 2f6d 6964 646c 6577 6172 6529 2064 6972  /middleware) dir
-00003e70: 6563 746f 7279 2e0a 0a23 2323 2320 436c  ectory...#### Cl
-00003e80: 6173 732d 6261 7365 6420 6d69 6464 6c65  ass-based middle
-00003e90: 7761 7265 730a 5468 6572 6520 6172 6520  wares.There are 
-00003ea0: 636c 6173 732d 6261 7365 6420 6d69 6464  class-based midd
-00003eb0: 6c65 7761 7265 732e 200a 4261 7369 6320  lewares. .Basic 
-00003ec0: 636c 6173 732d 6261 7365 6420 6d69 6464  class-based midd
-00003ed0: 6c65 7761 7265 206c 6f6f 6b73 206c 696b  leware looks lik
-00003ee0: 6520 7468 6973 3a0a 6060 6070 7974 686f  e this:.```pytho
-00003ef0: 6e0a 636c 6173 7320 4d69 6464 6c65 7761  n.class Middlewa
-00003f00: 7265 2842 6173 654d 6964 646c 6577 6172  re(BaseMiddlewar
-00003f10: 6529 3a0a 2020 2020 6465 6620 5f5f 696e  e):.    def __in
-00003f20: 6974 5f5f 2873 656c 6629 3a0a 2020 2020  it__(self):.    
-00003f30: 2020 2020 7365 6c66 2e75 7064 6174 655f      self.update_
-00003f40: 7479 7065 7320 3d20 5b27 6d65 7373 6167  types = ['messag
-00003f50: 6527 5d0a 2020 2020 6465 6620 7072 655f  e'].    def pre_
-00003f60: 7072 6f63 6573 7328 7365 6c66 2c20 6d65  process(self, me
-00003f70: 7373 6167 652c 2064 6174 6129 3a0a 2020  ssage, data):.  
-00003f80: 2020 2020 2020 6461 7461 5b27 666f 6f27        data['foo'
-00003f90: 5d20 3d20 2748 656c 6c6f 2720 2320 6a75  ] = 'Hello' # ju
-00003fa0: 7374 2066 6f72 2065 7861 6d70 6c65 0a20  st for example. 
-00003fb0: 2020 2020 2020 2023 2077 6520 6564 6974         # we edit
-00003fc0: 6564 2074 6865 2064 6174 612e 206e 6f77  ed the data. now
-00003fd0: 2c20 7468 6973 2064 6174 6120 6973 2070  , this data is p
-00003fe0: 6173 7365 6420 746f 2068 616e 646c 6572  assed to handler
-00003ff0: 2e0a 2020 2020 2020 2020 2320 7265 7475  ..        # retu
-00004000: 726e 2053 6b69 7048 616e 646c 6572 2829  rn SkipHandler()
-00004010: 202d 3e20 7468 6973 2077 696c 6c20 736b   -> this will sk
-00004020: 6970 2068 616e 646c 6572 0a20 2020 2020  ip handler.     
-00004030: 2020 2023 2072 6574 7572 6e20 4361 6e63     # return Canc
-00004040: 656c 5570 6461 7465 2829 202d 3e20 7468  elUpdate() -> th
-00004050: 6973 2077 696c 6c20 6361 6e63 656c 2075  is will cancel u
-00004060: 7064 6174 650a 2020 2020 6465 6620 706f  pdate.    def po
-00004070: 7374 5f70 726f 6365 7373 2873 656c 662c  st_process(self,
-00004080: 206d 6573 7361 6765 2c20 6461 7461 2c20   message, data, 
-00004090: 6578 6365 7074 696f 6e3d 4e6f 6e65 293a  exception=None):
-000040a0: 0a20 2020 2020 2020 2070 7269 6e74 2864  .        print(d
-000040b0: 6174 615b 2766 6f6f 275d 290a 2020 2020  ata['foo']).    
-000040c0: 2020 2020 6966 2065 7863 6570 7469 6f6e      if exception
-000040d0: 3a20 2320 6368 6563 6b20 666f 7220 6578  : # check for ex
-000040e0: 6365 7074 696f 6e0a 2020 2020 2020 2020  ception.        
-000040f0: 2020 2020 7072 696e 7428 6578 6365 7074      print(except
-00004100: 696f 6e29 0a60 6060 0a43 6c61 7373 2d62  ion).```.Class-b
-00004110: 6173 6564 206d 6964 646c 6577 6172 6520  ased middleware 
-00004120: 7368 6f75 6c64 2068 6176 6520 746f 2066  should have to f
-00004130: 756e 6374 696f 6e73 3a20 706f 7374 2061  unctions: post a
-00004140: 6e64 2070 7265 2070 726f 6365 7373 2e0a  nd pre process..
-00004150: 536f 2c20 6173 2079 6f75 2063 616e 2073  So, as you can s
-00004160: 6565 2c20 636c 6173 732d 6261 7365 6420  ee, class-based 
-00004170: 6d69 6464 6c65 7761 7265 7320 776f 726b  middlewares work
-00004180: 2062 6566 6f72 6520 616e 6420 6166 7465   before and afte
-00004190: 7220 6861 6e64 6c65 7220 6578 6563 7574  r handler execut
-000041a0: 696f 6e2e 0a46 6f72 206d 6f72 652c 2063  ion..For more, c
-000041b0: 6865 636b 206f 7574 2069 6e20 5b65 7861  heck out in [exa
-000041c0: 6d70 6c65 735d 2868 7474 7073 3a2f 2f67  mples](https://g
-000041d0: 6974 6875 622e 636f 6d2f 6574 6572 6e6e  ithub.com/eternn
-000041e0: 6f69 722f 7079 5465 6c65 6772 616d 426f  oir/pyTelegramBo
-000041f0: 7441 5049 2f74 7265 652f 6d61 7374 6572  tAPI/tree/master
-00004200: 2f65 7861 6d70 6c65 732f 6d69 6464 6c65  /examples/middle
-00004210: 7761 7265 2f63 6c61 7373 5f62 6173 6564  ware/class_based
-00004220: 2909 0a09 0a23 2323 2320 4375 7374 6f6d  )....#### Custom
-00004230: 2066 696c 7465 7273 0a41 6c73 6f2c 2079   filters.Also, y
-00004240: 6f75 2063 616e 2075 7365 2062 7569 6c74  ou can use built
-00004250: 2d69 6e20 6375 7374 6f6d 2066 696c 7465  -in custom filte
-00004260: 7273 2e20 4f72 2c20 796f 7520 6361 6e20  rs. Or, you can 
-00004270: 6372 6561 7465 2079 6f75 7220 6f77 6e20  create your own 
-00004280: 6669 6c74 6572 2e09 0a0a 5b45 7861 6d70  filter....[Examp
-00004290: 6c65 206f 6620 6375 7374 6f6d 2066 696c  le of custom fil
-000042a0: 7465 725d 2868 7474 7073 3a2f 2f67 6974  ter](https://git
-000042b0: 6875 622e 636f 6d2f 6574 6572 6e6e 6f69  hub.com/eternnoi
-000042c0: 722f 7079 5465 6c65 6772 616d 426f 7441  r/pyTelegramBotA
-000042d0: 5049 2f62 6c6f 622f 6d61 7374 6572 2f65  PI/blob/master/e
-000042e0: 7861 6d70 6c65 732f 6375 7374 6f6d 5f66  xamples/custom_f
-000042f0: 696c 7465 7273 2f67 656e 6572 616c 5f63  ilters/general_c
-00004300: 7573 746f 6d5f 6669 6c74 6572 732e 7079  ustom_filters.py
-00004310: 290a 090a 416c 736f 2c20 7765 2068 6176  )...Also, we hav
-00004320: 6520 6578 616d 706c 6573 206f 6e20 7468  e examples on th
-00004330: 656d 2e20 4368 6563 6b20 7468 6973 206c  em. Check this l
-00004340: 696e 6b73 3a0a 090a 596f 7520 6361 6e20  inks:...You can 
-00004350: 6368 6563 6b20 736f 6d65 2062 7569 6c74  check some built
-00004360: 2d69 6e20 6669 6c74 6572 7320 696e 2073  -in filters in s
-00004370: 6f75 7263 6520 5b63 6f64 655d 2868 7474  ource [code](htt
-00004380: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00004390: 6574 6572 6e6e 6f69 722f 7079 5465 6c65  eternnoir/pyTele
-000043a0: 6772 616d 426f 7441 5049 2f62 6c6f 622f  gramBotAPI/blob/
-000043b0: 6d61 7374 6572 2f74 656c 6562 6f74 2f63  master/telebot/c
-000043c0: 7573 746f 6d5f 6669 6c74 6572 732e 7079  ustom_filters.py
-000043d0: 290a 090a 4578 616d 706c 6520 6f66 205b  )...Example of [
-000043e0: 6669 6c74 6572 696e 6720 6279 2069 645d  filtering by id]
-000043f0: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-00004400: 636f 6d2f 6574 6572 6e6e 6f69 722f 7079  com/eternnoir/py
-00004410: 5465 6c65 6772 616d 426f 7441 5049 2f62  TelegramBotAPI/b
-00004420: 6c6f 622f 6d61 7374 6572 2f65 7861 6d70  lob/master/examp
-00004430: 6c65 732f 6375 7374 6f6d 5f66 696c 7465  les/custom_filte
-00004440: 7273 2f69 645f 6669 6c74 6572 5f65 7861  rs/id_filter_exa
-00004450: 6d70 6c65 2e70 7929 0a09 0a45 7861 6d70  mple.py)...Examp
-00004460: 6c65 206f 6620 5b66 696c 7465 7269 6e67  le of [filtering
-00004470: 2062 7920 7465 7874 5d28 6874 7470 733a   by text](https:
-00004480: 2f2f 6769 7468 7562 2e63 6f6d 2f65 7465  //github.com/ete
-00004490: 726e 6e6f 6972 2f70 7954 656c 6567 7261  rnnoir/pyTelegra
-000044a0: 6d42 6f74 4150 492f 626c 6f62 2f6d 6173  mBotAPI/blob/mas
-000044b0: 7465 722f 6578 616d 706c 6573 2f63 7573  ter/examples/cus
-000044c0: 746f 6d5f 6669 6c74 6572 732f 7465 7874  tom_filters/text
-000044d0: 5f66 696c 7465 725f 6578 616d 706c 652e  _filter_example.
-000044e0: 7079 290a 090a 4966 2079 6f75 2077 616e  py)...If you wan
-000044f0: 7420 746f 2061 6464 2073 6f6d 6520 6275  t to add some bu
-00004500: 696c 742d 696e 2066 696c 7465 722c 2079  ilt-in filter, y
-00004510: 6f75 2061 7265 2077 656c 636f 6d65 2074  ou are welcome t
-00004520: 6f20 6164 6420 6974 2069 6e20 6375 7374  o add it in cust
-00004530: 6f6d 5f66 696c 7465 7273 2e70 7920 6669  om_filters.py fi
-00004540: 6c65 2e0a 090a 4865 7265 2069 7320 6578  le....Here is ex
-00004550: 616d 706c 6520 6f66 2063 7265 6174 696e  ample of creatin
-00004560: 6720 6669 6c74 6572 2d63 6c61 7373 3a0a  g filter-class:.
-00004570: 090a 6060 6070 7974 686f 6e0a 636c 6173  ..```python.clas
-00004580: 7320 4973 4164 6d69 6e28 7465 6c65 626f  s IsAdmin(telebo
-00004590: 742e 6375 7374 6f6d 5f66 696c 7465 7273  t.custom_filters
-000045a0: 2e53 696d 706c 6543 7573 746f 6d46 696c  .SimpleCustomFil
-000045b0: 7465 7229 3a0a 2020 2020 2320 436c 6173  ter):.    # Clas
-000045c0: 7320 7769 6c6c 2063 6865 636b 2077 6865  s will check whe
-000045d0: 7468 6572 2074 6865 2075 7365 7220 6973  ther the user is
-000045e0: 2061 646d 696e 206f 7220 6372 6561 746f   admin or creato
-000045f0: 7220 696e 2067 726f 7570 206f 7220 6e6f  r in group or no
-00004600: 740a 2020 2020 6b65 793d 2769 735f 6368  t.    key='is_ch
-00004610: 6174 5f61 646d 696e 270a 2020 2020 4073  at_admin'.    @s
-00004620: 7461 7469 636d 6574 686f 640a 2020 2020  taticmethod.    
-00004630: 6465 6620 6368 6563 6b28 6d65 7373 6167  def check(messag
-00004640: 653a 2074 656c 6562 6f74 2e74 7970 6573  e: telebot.types
-00004650: 2e4d 6573 7361 6765 293a 0a20 2020 2020  .Message):.     
-00004660: 2020 2072 6574 7572 6e20 626f 742e 6765     return bot.ge
-00004670: 745f 6368 6174 5f6d 656d 6265 7228 6d65  t_chat_member(me
-00004680: 7373 6167 652e 6368 6174 2e69 642c 6d65  ssage.chat.id,me
-00004690: 7373 6167 652e 6672 6f6d 5f75 7365 722e  ssage.from_user.
-000046a0: 6964 292e 7374 6174 7573 2069 6e20 5b27  id).status in ['
-000046b0: 6164 6d69 6e69 7374 7261 746f 7227 2c27  administrator','
-000046c0: 6372 6561 746f 7227 5d0a 090a 2320 546f  creator']...# To
-000046d0: 2072 6567 6973 7465 7220 6669 6c74 6572   register filter
-000046e0: 2c20 796f 7520 6e65 6564 2074 6f20 7573  , you need to us
-000046f0: 6520 6d65 7468 6f64 2061 6464 5f63 7573  e method add_cus
-00004700: 746f 6d5f 6669 6c74 6572 2e0a 626f 742e  tom_filter..bot.
-00004710: 6164 645f 6375 7374 6f6d 5f66 696c 7465  add_custom_filte
-00004720: 7228 4973 4164 6d69 6e28 2929 0a09 0a23  r(IsAdmin())...#
-00004730: 204e 6f77 2c20 796f 7520 6361 6e20 7573   Now, you can us
-00004740: 6520 6974 2069 6e20 6861 6e64 6c65 722e  e it in handler.
-00004750: 0a40 626f 742e 6d65 7373 6167 655f 6861  .@bot.message_ha
-00004760: 6e64 6c65 7228 6973 5f63 6861 745f 6164  ndler(is_chat_ad
-00004770: 6d69 6e3d 5472 7565 290a 6465 6620 6164  min=True).def ad
-00004780: 6d69 6e5f 6f66 5f67 726f 7570 286d 6573  min_of_group(mes
-00004790: 7361 6765 293a 0a09 626f 742e 7365 6e64  sage):..bot.send
-000047a0: 5f6d 6573 7361 6765 286d 6573 7361 6765  _message(message
-000047b0: 2e63 6861 742e 6964 2c20 2759 6f75 2061  .chat.id, 'You a
-000047c0: 7265 2061 646d 696e 206f 6620 7468 6973  re admin of this
-000047d0: 2067 726f 7570 2127 290a 0a60 6060 0a09   group!')..```..
-000047e0: 0a0a 2323 2323 2054 656c 6542 6f74 0a60  ..#### TeleBot.`
-000047f0: 6060 7079 7468 6f6e 0a69 6d70 6f72 7420  ``python.import 
-00004800: 7465 6c65 626f 740a 0a54 4f4b 454e 203d  telebot..TOKEN =
-00004810: 2027 3c74 6f6b 656e 5f73 7472 696e 673e   '<token_string>
-00004820: 270a 7462 203d 2074 656c 6562 6f74 2e54  '.tb = telebot.T
-00004830: 656c 6542 6f74 2854 4f4b 454e 2909 2363  eleBot(TOKEN).#c
-00004840: 7265 6174 6520 6120 6e65 7720 5465 6c65  reate a new Tele
-00004850: 6772 616d 2042 6f74 206f 626a 6563 740a  gram Bot object.
-00004860: 0a23 2055 706f 6e20 6361 6c6c 696e 6720  .# Upon calling 
-00004870: 7468 6973 2066 756e 6374 696f 6e2c 2054  this function, T
-00004880: 656c 6542 6f74 2073 7461 7274 7320 706f  eleBot starts po
-00004890: 6c6c 696e 6720 7468 6520 5465 6c65 6772  lling the Telegr
-000048a0: 616d 2073 6572 7665 7273 2066 6f72 206e  am servers for n
-000048b0: 6577 206d 6573 7361 6765 732e 0a23 202d  ew messages..# -
-000048c0: 2069 6e74 6572 7661 6c3a 2069 6e74 2028   interval: int (
-000048d0: 6465 6661 756c 7420 3029 202d 2054 6865  default 0) - The
-000048e0: 2069 6e74 6572 7661 6c20 6265 7477 6565   interval betwee
-000048f0: 6e20 706f 6c6c 696e 6720 7265 7175 6573  n polling reques
-00004900: 7473 0a23 202d 2074 696d 656f 7574 3a20  ts.# - timeout: 
-00004910: 696e 7465 6765 7220 2864 6566 6175 6c74  integer (default
-00004920: 2032 3029 202d 2054 696d 656f 7574 2069   20) - Timeout i
-00004930: 6e20 7365 636f 6e64 7320 666f 7220 6c6f  n seconds for lo
-00004940: 6e67 2070 6f6c 6c69 6e67 2e0a 2320 2d20  ng polling..# - 
-00004950: 616c 6c6f 7765 645f 7570 6461 7465 733a  allowed_updates:
-00004960: 204c 6973 7420 6f66 2053 7472 696e 6773   List of Strings
-00004970: 2028 6465 6661 756c 7420 4e6f 6e65 2920   (default None) 
-00004980: 2d20 4c69 7374 206f 6620 7570 6461 7465  - List of update
-00004990: 2074 7970 6573 2074 6f20 7265 7175 6573   types to reques
-000049a0: 7420 0a74 622e 696e 6669 6e69 7479 5f70  t .tb.infinity_p
-000049b0: 6f6c 6c69 6e67 2869 6e74 6572 7661 6c3d  olling(interval=
-000049c0: 302c 2074 696d 656f 7574 3d32 3029 0a0a  0, timeout=20)..
-000049d0: 2320 6765 744d 650a 7573 6572 203d 2074  # getMe.user = t
-000049e0: 622e 6765 745f 6d65 2829 0a0a 2320 7365  b.get_me()..# se
-000049f0: 7457 6562 686f 6f6b 0a74 622e 7365 745f  tWebhook.tb.set_
-00004a00: 7765 6268 6f6f 6b28 7572 6c3d 2268 7474  webhook(url="htt
-00004a10: 703a 2f2f 6578 616d 706c 652e 636f 6d22  p://example.com"
-00004a20: 2c20 6365 7274 6966 6963 6174 653d 6f70  , certificate=op
-00004a30: 656e 2827 6d79 6365 7274 2e70 656d 2729  en('mycert.pem')
-00004a40: 290a 2320 756e 7365 7420 7765 6268 6f6f  ).# unset webhoo
-00004a50: 6b0a 7462 2e72 656d 6f76 655f 7765 6268  k.tb.remove_webh
-00004a60: 6f6f 6b28 290a 0a23 2067 6574 5570 6461  ook()..# getUpda
-00004a70: 7465 730a 7570 6461 7465 7320 3d20 7462  tes.updates = tb
-00004a80: 2e67 6574 5f75 7064 6174 6573 2829 0a23  .get_updates().#
-00004a90: 206f 720a 7570 6461 7465 7320 3d20 7462   or.updates = tb
-00004aa0: 2e67 6574 5f75 7064 6174 6573 2831 3233  .get_updates(123
-00004ab0: 342c 3130 302c 3230 2920 2367 6574 5f55  4,100,20) #get_U
-00004ac0: 7064 6174 6573 286f 6666 7365 742c 206c  pdates(offset, l
-00004ad0: 696d 6974 2c20 7469 6d65 6f75 7429 3a0a  imit, timeout):.
-00004ae0: 0a23 2073 656e 644d 6573 7361 6765 0a74  .# sendMessage.t
-00004af0: 622e 7365 6e64 5f6d 6573 7361 6765 2863  b.send_message(c
-00004b00: 6861 745f 6964 2c20 7465 7874 290a 0a23  hat_id, text)..#
-00004b10: 2065 6469 744d 6573 7361 6765 5465 7874   editMessageText
-00004b20: 0a74 622e 6564 6974 5f6d 6573 7361 6765  .tb.edit_message
-00004b30: 5f74 6578 7428 6e65 775f 7465 7874 2c20  _text(new_text, 
-00004b40: 6368 6174 5f69 642c 206d 6573 7361 6765  chat_id, message
-00004b50: 5f69 6429 0a0a 2320 666f 7277 6172 644d  _id)..# forwardM
-00004b60: 6573 7361 6765 0a74 622e 666f 7277 6172  essage.tb.forwar
-00004b70: 645f 6d65 7373 6167 6528 746f 5f63 6861  d_message(to_cha
-00004b80: 745f 6964 2c20 6672 6f6d 5f63 6861 745f  t_id, from_chat_
-00004b90: 6964 2c20 6d65 7373 6167 655f 6964 290a  id, message_id).
-00004ba0: 0a23 2041 6c6c 2073 656e 645f 7879 7a20  .# All send_xyz 
-00004bb0: 6675 6e63 7469 6f6e 7320 7768 6963 6820  functions which 
-00004bc0: 6361 6e20 7461 6b65 2061 2066 696c 6520  can take a file 
-00004bd0: 6173 2061 6e20 6172 6775 6d65 6e74 2c20  as an argument, 
-00004be0: 6361 6e20 616c 736f 2074 616b 6520 6120  can also take a 
-00004bf0: 6669 6c65 5f69 6420 696e 7374 6561 6420  file_id instead 
-00004c00: 6f66 2061 2066 696c 652e 0a23 2073 656e  of a file..# sen
-00004c10: 6450 686f 746f 0a70 686f 746f 203d 206f  dPhoto.photo = o
-00004c20: 7065 6e28 272f 746d 702f 7068 6f74 6f2e  pen('/tmp/photo.
-00004c30: 706e 6727 2c20 2772 6227 290a 7462 2e73  png', 'rb').tb.s
-00004c40: 656e 645f 7068 6f74 6f28 6368 6174 5f69  end_photo(chat_i
-00004c50: 642c 2070 686f 746f 290a 7462 2e73 656e  d, photo).tb.sen
-00004c60: 645f 7068 6f74 6f28 6368 6174 5f69 642c  d_photo(chat_id,
-00004c70: 2022 4649 4c45 4944 2229 0a0a 2320 7365   "FILEID")..# se
-00004c80: 6e64 4175 6469 6f0a 6175 6469 6f20 3d20  ndAudio.audio = 
-00004c90: 6f70 656e 2827 2f74 6d70 2f61 7564 696f  open('/tmp/audio
-00004ca0: 2e6d 7033 272c 2027 7262 2729 0a74 622e  .mp3', 'rb').tb.
-00004cb0: 7365 6e64 5f61 7564 696f 2863 6861 745f  send_audio(chat_
-00004cc0: 6964 2c20 6175 6469 6f29 0a74 622e 7365  id, audio).tb.se
-00004cd0: 6e64 5f61 7564 696f 2863 6861 745f 6964  nd_audio(chat_id
-00004ce0: 2c20 2246 494c 4549 4422 290a 0a23 2320  , "FILEID")..## 
-00004cf0: 7365 6e64 4175 6469 6f20 7769 7468 2064  sendAudio with d
-00004d00: 7572 6174 696f 6e2c 2070 6572 666f 726d  uration, perform
-00004d10: 6572 2061 6e64 2074 6974 6c65 2e0a 7462  er and title..tb
-00004d20: 2e73 656e 645f 6175 6469 6f28 4348 4154  .send_audio(CHAT
-00004d30: 5f49 442c 2066 696c 655f 6461 7461 2c20  _ID, file_data, 
-00004d40: 312c 2027 6574 6572 6e6e 6f69 7227 2c20  1, 'eternnoir', 
-00004d50: 2770 7954 656c 6567 7261 6d27 290a 0a23  'pyTelegram')..#
-00004d60: 2073 656e 6456 6f69 6365 0a76 6f69 6365   sendVoice.voice
-00004d70: 203d 206f 7065 6e28 272f 746d 702f 766f   = open('/tmp/vo
-00004d80: 6963 652e 6f67 6727 2c20 2772 6227 290a  ice.ogg', 'rb').
-00004d90: 7462 2e73 656e 645f 766f 6963 6528 6368  tb.send_voice(ch
-00004da0: 6174 5f69 642c 2076 6f69 6365 290a 7462  at_id, voice).tb
-00004db0: 2e73 656e 645f 766f 6963 6528 6368 6174  .send_voice(chat
-00004dc0: 5f69 642c 2022 4649 4c45 4944 2229 0a0a  _id, "FILEID")..
-00004dd0: 2320 7365 6e64 446f 6375 6d65 6e74 0a64  # sendDocument.d
-00004de0: 6f63 203d 206f 7065 6e28 272f 746d 702f  oc = open('/tmp/
-00004df0: 6669 6c65 2e74 7874 272c 2027 7262 2729  file.txt', 'rb')
-00004e00: 0a74 622e 7365 6e64 5f64 6f63 756d 656e  .tb.send_documen
-00004e10: 7428 6368 6174 5f69 642c 2064 6f63 290a  t(chat_id, doc).
-00004e20: 7462 2e73 656e 645f 646f 6375 6d65 6e74  tb.send_document
-00004e30: 2863 6861 745f 6964 2c20 2246 494c 4549  (chat_id, "FILEI
-00004e40: 4422 290a 0a23 2073 656e 6453 7469 636b  D")..# sendStick
-00004e50: 6572 0a73 7469 203d 206f 7065 6e28 272f  er.sti = open('/
-00004e60: 746d 702f 7374 692e 7765 6270 272c 2027  tmp/sti.webp', '
-00004e70: 7262 2729 0a74 622e 7365 6e64 5f73 7469  rb').tb.send_sti
-00004e80: 636b 6572 2863 6861 745f 6964 2c20 7374  cker(chat_id, st
-00004e90: 6929 0a74 622e 7365 6e64 5f73 7469 636b  i).tb.send_stick
-00004ea0: 6572 2863 6861 745f 6964 2c20 2246 494c  er(chat_id, "FIL
-00004eb0: 4549 4422 290a 0a23 2073 656e 6456 6964  EID")..# sendVid
-00004ec0: 656f 0a76 6964 656f 203d 206f 7065 6e28  eo.video = open(
-00004ed0: 272f 746d 702f 7669 6465 6f2e 6d70 3427  '/tmp/video.mp4'
-00004ee0: 2c20 2772 6227 290a 7462 2e73 656e 645f  , 'rb').tb.send_
-00004ef0: 7669 6465 6f28 6368 6174 5f69 642c 2076  video(chat_id, v
-00004f00: 6964 656f 290a 7462 2e73 656e 645f 7669  ideo).tb.send_vi
-00004f10: 6465 6f28 6368 6174 5f69 642c 2022 4649  deo(chat_id, "FI
-00004f20: 4c45 4944 2229 0a0a 2320 7365 6e64 5669  LEID")..# sendVi
-00004f30: 6465 6f4e 6f74 650a 7669 6465 6f6e 6f74  deoNote.videonot
-00004f40: 6520 3d20 6f70 656e 2827 2f74 6d70 2f76  e = open('/tmp/v
-00004f50: 6964 656f 6e6f 7465 2e6d 7034 272c 2027  ideonote.mp4', '
-00004f60: 7262 2729 0a74 622e 7365 6e64 5f76 6964  rb').tb.send_vid
-00004f70: 656f 5f6e 6f74 6528 6368 6174 5f69 642c  eo_note(chat_id,
-00004f80: 2076 6964 656f 6e6f 7465 290a 7462 2e73   videonote).tb.s
-00004f90: 656e 645f 7669 6465 6f5f 6e6f 7465 2863  end_video_note(c
-00004fa0: 6861 745f 6964 2c20 2246 494c 4549 4422  hat_id, "FILEID"
-00004fb0: 290a 0a23 2073 656e 644c 6f63 6174 696f  )..# sendLocatio
-00004fc0: 6e0a 7462 2e73 656e 645f 6c6f 6361 7469  n.tb.send_locati
-00004fd0: 6f6e 2863 6861 745f 6964 2c20 6c61 742c  on(chat_id, lat,
-00004fe0: 206c 6f6e 290a 0a23 2073 656e 6443 6861   lon)..# sendCha
-00004ff0: 7441 6374 696f 6e0a 2320 6163 7469 6f6e  tAction.# action
-00005000: 5f73 7472 696e 6720 6361 6e20 6265 206f  _string can be o
-00005010: 6e65 206f 6620 7468 6520 666f 6c6c 6f77  ne of the follow
-00005020: 696e 6720 7374 7269 6e67 733a 2027 7479  ing strings: 'ty
-00005030: 7069 6e67 272c 2027 7570 6c6f 6164 5f70  ping', 'upload_p
-00005040: 686f 746f 272c 2027 7265 636f 7264 5f76  hoto', 'record_v
-00005050: 6964 656f 272c 2027 7570 6c6f 6164 5f76  ideo', 'upload_v
-00005060: 6964 656f 272c 0a23 2027 7265 636f 7264  ideo',.# 'record
-00005070: 5f61 7564 696f 272c 2027 7570 6c6f 6164  _audio', 'upload
-00005080: 5f61 7564 696f 272c 2027 7570 6c6f 6164  _audio', 'upload
-00005090: 5f64 6f63 756d 656e 7427 206f 7220 2766  _document' or 'f
-000050a0: 696e 645f 6c6f 6361 7469 6f6e 272e 0a74  ind_location'..t
-000050b0: 622e 7365 6e64 5f63 6861 745f 6163 7469  b.send_chat_acti
-000050c0: 6f6e 2863 6861 745f 6964 2c20 6163 7469  on(chat_id, acti
-000050d0: 6f6e 5f73 7472 696e 6729 0a0a 2320 6765  on_string)..# ge
-000050e0: 7446 696c 650a 2320 446f 776e 6c6f 6164  tFile.# Download
-000050f0: 696e 6720 6120 6669 6c65 2069 7320 7374  ing a file is st
-00005100: 7261 6967 6874 666f 7277 6172 640a 2320  raightforward.# 
-00005110: 5265 7475 726e 7320 6120 4669 6c65 206f  Returns a File o
-00005120: 626a 6563 740a 696d 706f 7274 2072 6571  bject.import req
-00005130: 7565 7374 730a 6669 6c65 5f69 6e66 6f20  uests.file_info 
-00005140: 3d20 7462 2e67 6574 5f66 696c 6528 6669  = tb.get_file(fi
-00005150: 6c65 5f69 6429 0a0a 6669 6c65 203d 2072  le_id)..file = r
-00005160: 6571 7565 7374 732e 6765 7428 2768 7474  equests.get('htt
-00005170: 7073 3a2f 2f61 7069 2e74 656c 6567 7261  ps://api.telegra
-00005180: 6d2e 6f72 672f 6669 6c65 2f62 6f74 7b30  m.org/file/bot{0
-00005190: 7d2f 7b31 7d27 2e66 6f72 6d61 7428 4150  }/{1}'.format(AP
-000051a0: 495f 544f 4b45 4e2c 2066 696c 655f 696e  I_TOKEN, file_in
-000051b0: 666f 2e66 696c 655f 7061 7468 2929 0a0a  fo.file_path))..
-000051c0: 0a60 6060 0a23 2323 2320 5265 706c 7920  .```.#### Reply 
-000051d0: 6d61 726b 7570 0a41 6c6c 2060 7365 6e64  markup.All `send
-000051e0: 5f78 797a 6020 6675 6e63 7469 6f6e 7320  _xyz` functions 
-000051f0: 6f66 2054 656c 6542 6f74 2074 616b 6520  of TeleBot take 
-00005200: 616e 206f 7074 696f 6e61 6c20 6072 6570  an optional `rep
-00005210: 6c79 5f6d 6172 6b75 7060 2061 7267 756d  ly_markup` argum
-00005220: 656e 742e 2054 6869 7320 6172 6775 6d65  ent. This argume
-00005230: 6e74 206d 7573 7420 6265 2061 6e20 696e  nt must be an in
-00005240: 7374 616e 6365 206f 6620 6052 6570 6c79  stance of `Reply
-00005250: 4b65 7962 6f61 7264 4d61 726b 7570 602c  KeyboardMarkup`,
-00005260: 2060 5265 706c 794b 6579 626f 6172 6452   `ReplyKeyboardR
-00005270: 656d 6f76 6560 206f 7220 6046 6f72 6365  emove` or `Force
-00005280: 5265 706c 7960 2c20 7768 6963 6820 6172  Reply`, which ar
-00005290: 6520 6465 6669 6e65 6420 696e 2074 7970  e defined in typ
-000052a0: 6573 2e70 792e 0a0a 6060 6070 7974 686f  es.py...```pytho
-000052b0: 6e0a 6672 6f6d 2074 656c 6562 6f74 2069  n.from telebot i
-000052c0: 6d70 6f72 7420 7479 7065 730a 0a23 2055  mport types..# U
-000052d0: 7369 6e67 2074 6865 2052 6570 6c79 4b65  sing the ReplyKe
-000052e0: 7962 6f61 7264 4d61 726b 7570 2063 6c61  yboardMarkup cla
-000052f0: 7373 0a23 2049 7427 7320 636f 6e73 7472  ss.# It's constr
-00005300: 7563 746f 7220 6361 6e20 7461 6b65 2074  uctor can take t
-00005310: 6865 2066 6f6c 6c6f 7769 6e67 206f 7074  he following opt
-00005320: 696f 6e61 6c20 6172 6775 6d65 6e74 733a  ional arguments:
-00005330: 0a23 202d 2072 6573 697a 655f 6b65 7962  .# - resize_keyb
-00005340: 6f61 7264 3a20 5472 7565 2f46 616c 7365  oard: True/False
-00005350: 2028 6465 6661 756c 7420 4661 6c73 6529   (default False)
-00005360: 0a23 202d 206f 6e65 5f74 696d 655f 6b65  .# - one_time_ke
-00005370: 7962 6f61 7264 3a20 5472 7565 2f46 616c  yboard: True/Fal
-00005380: 7365 2028 6465 6661 756c 7420 4661 6c73  se (default Fals
-00005390: 6529 0a23 202d 2073 656c 6563 7469 7665  e).# - selective
-000053a0: 3a20 5472 7565 2f46 616c 7365 2028 6465  : True/False (de
-000053b0: 6661 756c 7420 4661 6c73 6529 0a23 202d  fault False).# -
-000053c0: 2072 6f77 5f77 6964 7468 3a20 696e 7465   row_width: inte
-000053d0: 6765 7220 2864 6566 6175 6c74 2033 290a  ger (default 3).
-000053e0: 2320 726f 775f 7769 6474 6820 6973 2075  # row_width is u
-000053f0: 7365 6420 696e 2063 6f6d 6269 6e61 7469  sed in combinati
-00005400: 6f6e 2077 6974 6820 7468 6520 6164 6428  on with the add(
-00005410: 2920 6675 6e63 7469 6f6e 2e0a 2320 4974  ) function..# It
-00005420: 2064 6566 696e 6573 2068 6f77 206d 616e   defines how man
-00005430: 7920 6275 7474 6f6e 7320 6172 6520 6669  y buttons are fi
-00005440: 7420 6f6e 2065 6163 6820 726f 7720 6265  t on each row be
-00005450: 666f 7265 2063 6f6e 7469 6e75 696e 6720  fore continuing 
-00005460: 6f6e 2074 6865 206e 6578 7420 726f 772e  on the next row.
-00005470: 0a6d 6172 6b75 7020 3d20 7479 7065 732e  .markup = types.
-00005480: 5265 706c 794b 6579 626f 6172 644d 6172  ReplyKeyboardMar
-00005490: 6b75 7028 726f 775f 7769 6474 683d 3229  kup(row_width=2)
-000054a0: 0a69 7465 6d62 746e 3120 3d20 7479 7065  .itembtn1 = type
-000054b0: 732e 4b65 7962 6f61 7264 4275 7474 6f6e  s.KeyboardButton
-000054c0: 2827 6127 290a 6974 656d 6274 6e32 203d  ('a').itembtn2 =
-000054d0: 2074 7970 6573 2e4b 6579 626f 6172 6442   types.KeyboardB
-000054e0: 7574 746f 6e28 2776 2729 0a69 7465 6d62  utton('v').itemb
-000054f0: 746e 3320 3d20 7479 7065 732e 4b65 7962  tn3 = types.Keyb
-00005500: 6f61 7264 4275 7474 6f6e 2827 6427 290a  oardButton('d').
-00005510: 6d61 726b 7570 2e61 6464 2869 7465 6d62  markup.add(itemb
-00005520: 746e 312c 2069 7465 6d62 746e 322c 2069  tn1, itembtn2, i
-00005530: 7465 6d62 746e 3329 0a74 622e 7365 6e64  tembtn3).tb.send
-00005540: 5f6d 6573 7361 6765 2863 6861 745f 6964  _message(chat_id
-00005550: 2c20 2243 686f 6f73 6520 6f6e 6520 6c65  , "Choose one le
-00005560: 7474 6572 3a22 2c20 7265 706c 795f 6d61  tter:", reply_ma
-00005570: 726b 7570 3d6d 6172 6b75 7029 0a0a 2320  rkup=markup)..# 
-00005580: 6f72 2061 6464 204b 6579 626f 6172 6442  or add KeyboardB
-00005590: 7574 746f 6e20 6f6e 6520 726f 7720 6174  utton one row at
-000055a0: 2061 2074 696d 653a 0a6d 6172 6b75 7020   a time:.markup 
-000055b0: 3d20 7479 7065 732e 5265 706c 794b 6579  = types.ReplyKey
-000055c0: 626f 6172 644d 6172 6b75 7028 290a 6974  boardMarkup().it
-000055d0: 656d 6274 6e61 203d 2074 7970 6573 2e4b  embtna = types.K
-000055e0: 6579 626f 6172 6442 7574 746f 6e28 2761  eyboardButton('a
-000055f0: 2729 0a69 7465 6d62 746e 7620 3d20 7479  ').itembtnv = ty
-00005600: 7065 732e 4b65 7962 6f61 7264 4275 7474  pes.KeyboardButt
-00005610: 6f6e 2827 7627 290a 6974 656d 6274 6e63  on('v').itembtnc
-00005620: 203d 2074 7970 6573 2e4b 6579 626f 6172   = types.Keyboar
-00005630: 6442 7574 746f 6e28 2763 2729 0a69 7465  dButton('c').ite
-00005640: 6d62 746e 6420 3d20 7479 7065 732e 4b65  mbtnd = types.Ke
-00005650: 7962 6f61 7264 4275 7474 6f6e 2827 6427  yboardButton('d'
-00005660: 290a 6974 656d 6274 6e65 203d 2074 7970  ).itembtne = typ
-00005670: 6573 2e4b 6579 626f 6172 6442 7574 746f  es.KeyboardButto
-00005680: 6e28 2765 2729 0a6d 6172 6b75 702e 726f  n('e').markup.ro
-00005690: 7728 6974 656d 6274 6e61 2c20 6974 656d  w(itembtna, item
-000056a0: 6274 6e76 290a 6d61 726b 7570 2e72 6f77  btnv).markup.row
-000056b0: 2869 7465 6d62 746e 632c 2069 7465 6d62  (itembtnc, itemb
-000056c0: 746e 642c 2069 7465 6d62 746e 6529 0a74  tnd, itembtne).t
-000056d0: 622e 7365 6e64 5f6d 6573 7361 6765 2863  b.send_message(c
-000056e0: 6861 745f 6964 2c20 2243 686f 6f73 6520  hat_id, "Choose 
-000056f0: 6f6e 6520 6c65 7474 6572 3a22 2c20 7265  one letter:", re
-00005700: 706c 795f 6d61 726b 7570 3d6d 6172 6b75  ply_markup=marku
-00005710: 7029 0a60 6060 0a54 6865 206c 6173 7420  p).```.The last 
-00005720: 6578 616d 706c 6520 7969 656c 6473 2074  example yields t
-00005730: 6869 7320 7265 7375 6c74 3a0a 0a21 5b52  his result:..![R
-00005740: 6570 6c79 4b65 7962 6f61 7264 4d61 726b  eplyKeyboardMark
-00005750: 7570 5d28 6874 7470 733a 2f2f 6661 726d  up](https://farm
-00005760: 332e 7374 6174 6963 666c 6963 6b72 2e63  3.staticflickr.c
-00005770: 6f6d 2f32 3933 332f 3332 3431 3837 3236  om/2933/32418726
-00005780: 3730 345f 3965 6637 3630 3933 6366 5f6f  704_9ef76093cf_o
-00005790: 5f64 2e6a 7067 2022 5265 706c 794b 6579  _d.jpg "ReplyKey
-000057a0: 626f 6172 644d 6172 6b75 7022 290a 0a60  boardMarkup")..`
-000057b0: 6060 7079 7468 6f6e 0a23 2052 6570 6c79  ``python.# Reply
-000057c0: 4b65 7962 6f61 7264 5265 6d6f 7665 3a20  KeyboardRemove: 
-000057d0: 6869 6465 7320 6120 7072 6576 696f 7573  hides a previous
-000057e0: 6c79 2073 656e 7420 5265 706c 794b 6579  ly sent ReplyKey
-000057f0: 626f 6172 644d 6172 6b75 700a 2320 5461  boardMarkup.# Ta
-00005800: 6b65 7320 616e 206f 7074 696f 6e61 6c20  kes an optional 
-00005810: 7365 6c65 6374 6976 6520 6172 6775 6d65  selective argume
-00005820: 6e74 2028 5472 7565 2f46 616c 7365 2c20  nt (True/False, 
-00005830: 6465 6661 756c 7420 4661 6c73 6529 0a6d  default False).m
-00005840: 6172 6b75 7020 3d20 7479 7065 732e 5265  arkup = types.Re
-00005850: 706c 794b 6579 626f 6172 6452 656d 6f76  plyKeyboardRemov
-00005860: 6528 7365 6c65 6374 6976 653d 4661 6c73  e(selective=Fals
-00005870: 6529 0a74 622e 7365 6e64 5f6d 6573 7361  e).tb.send_messa
-00005880: 6765 2863 6861 745f 6964 2c20 6d65 7373  ge(chat_id, mess
-00005890: 6167 652c 2072 6570 6c79 5f6d 6172 6b75  age, reply_marku
-000058a0: 703d 6d61 726b 7570 290a 6060 600a 0a60  p=markup).```..`
-000058b0: 6060 7079 7468 6f6e 0a23 2046 6f72 6365  ``python.# Force
-000058c0: 5265 706c 793a 2066 6f72 6365 7320 6120  Reply: forces a 
-000058d0: 7573 6572 2074 6f20 7265 706c 7920 746f  user to reply to
-000058e0: 2061 206d 6573 7361 6765 0a23 2054 616b   a message.# Tak
-000058f0: 6573 2061 6e20 6f70 7469 6f6e 616c 2073  es an optional s
-00005900: 656c 6563 7469 7665 2061 7267 756d 656e  elective argumen
-00005910: 7420 2854 7275 652f 4661 6c73 652c 2064  t (True/False, d
-00005920: 6566 6175 6c74 2046 616c 7365 290a 6d61  efault False).ma
-00005930: 726b 7570 203d 2074 7970 6573 2e46 6f72  rkup = types.For
-00005940: 6365 5265 706c 7928 7365 6c65 6374 6976  ceReply(selectiv
-00005950: 653d 4661 6c73 6529 0a74 622e 7365 6e64  e=False).tb.send
-00005960: 5f6d 6573 7361 6765 2863 6861 745f 6964  _message(chat_id
-00005970: 2c20 2253 656e 6420 6d65 2061 6e6f 7468  , "Send me anoth
-00005980: 6572 2077 6f72 643a 222c 2072 6570 6c79  er word:", reply
-00005990: 5f6d 6172 6b75 703d 6d61 726b 7570 290a  _markup=markup).
-000059a0: 6060 600a 466f 7263 6552 6570 6c79 3a0a  ```.ForceReply:.
-000059b0: 0a21 5b46 6f72 6365 5265 706c 795d 2868  .![ForceReply](h
-000059c0: 7474 7073 3a2f 2f66 6172 6d34 2e73 7461  ttps://farm4.sta
-000059d0: 7469 6366 6c69 636b 722e 636f 6d2f 3338  ticflickr.com/38
-000059e0: 3039 2f33 3234 3138 3732 3638 3134 5f64  09/32418726814_d
-000059f0: 3162 6165 6330 6663 325f 6f5f 642e 6a70  1baec0fc2_o_d.jp
-00005a00: 6720 2246 6f72 6365 5265 706c 7922 290a  g "ForceReply").
-00005a10: 0a0a 2323 2320 576f 726b 696e 6720 7769  ..### Working wi
-00005a20: 7468 2065 6e74 6974 6965 730a 5468 6973  th entities.This
-00005a30: 206f 626a 6563 7420 7265 7072 6573 656e   object represen
-00005a40: 7473 206f 6e65 2073 7065 6369 616c 2065  ts one special e
-00005a50: 6e74 6974 7920 696e 2061 2074 6578 7420  ntity in a text 
-00005a60: 6d65 7373 6167 652e 2046 6f72 2065 7861  message. For exa
-00005a70: 6d70 6c65 2c20 6861 7368 7461 6773 2c20  mple, hashtags, 
-00005a80: 7573 6572 6e61 6d65 732c 2055 524c 732c  usernames, URLs,
-00005a90: 2065 7463 2e0a 4174 7472 6962 7574 6573   etc..Attributes
-00005aa0: 3a0a 2a20 6074 7970 6560 0a2a 2060 7572  :.* `type`.* `ur
-00005ab0: 6c60 0a2a 2060 6f66 6673 6574 600a 2a20  l`.* `offset`.* 
-00005ac0: 606c 656e 6774 6860 0a2a 2060 7573 6572  `length`.* `user
-00005ad0: 600a 0a0a 2a2a 4865 7265 2773 2061 6e20  `...**Here's an 
-00005ae0: 4578 616d 706c 653a 2a2a 606d 6573 7361  Example:**`messa
-00005af0: 6765 2e65 6e74 6974 6965 735b 6e75 6d5d  ge.entities[num]
-00005b00: 2e3c 6174 7472 6962 7574 653e 603c 6272  .<attribute>`<br
-00005b10: 3e0a 4865 7265 2060 6e75 6d60 2069 7320  >.Here `num` is 
-00005b20: 7468 6520 656e 7469 7479 206e 756d 6265  the entity numbe
-00005b30: 7220 6f72 206f 7264 6572 206f 6620 656e  r or order of en
-00005b40: 7469 7479 2069 6e20 6120 7265 706c 792c  tity in a reply,
-00005b50: 2066 6f72 2069 6620 696e 6361 7365 2074   for if incase t
-00005b60: 6865 7265 2061 7265 206d 756c 7469 706c  here are multipl
-00005b70: 6520 656e 7469 7469 6573 2069 6e20 7468  e entities in th
-00005b80: 6520 7265 706c 792f 6d65 7373 6167 652e  e reply/message.
-00005b90: 3c62 723e 0a60 6d65 7373 6167 652e 656e  <br>.`message.en
-00005ba0: 7469 7469 6573 6020 7265 7475 726e 7320  tities` returns 
-00005bb0: 6120 6c69 7374 206f 6620 656e 7469 7469  a list of entiti
-00005bc0: 6573 206f 626a 6563 742e 203c 6272 3e0a  es object. <br>.
-00005bd0: 606d 6573 7361 6765 2e65 6e74 6974 6965  `message.entitie
-00005be0: 735b 305d 2e74 7970 6560 2077 6f75 6c64  s[0].type` would
-00005bf0: 2067 6976 6520 7468 6520 7479 7065 206f   give the type o
-00005c00: 6620 7468 6520 6669 7273 7420 656e 7469  f the first enti
-00005c10: 7479 3c62 723e 0a52 6566 6572 205b 426f  ty<br>.Refer [Bo
-00005c20: 7420 4170 695d 2868 7474 7073 3a2f 2f63  t Api](https://c
-00005c30: 6f72 652e 7465 6c65 6772 616d 2e6f 7267  ore.telegram.org
-00005c40: 2f62 6f74 732f 6170 6923 6d65 7373 6167  /bots/api#messag
-00005c50: 6565 6e74 6974 7929 2066 6f72 2065 7874  eentity) for ext
-00005c60: 7261 2064 6574 6169 6c73 0a0a 2323 2041  ra details..## A
-00005c70: 6476 616e 6365 6420 7573 6520 6f66 2074  dvanced use of t
-00005c80: 6865 2041 5049 0a0a 2323 2320 5573 696e  he API..### Usin
-00005c90: 6720 6c6f 6361 6c20 426f 7420 4150 4920  g local Bot API 
-00005ca0: 5365 7665 720a 5369 6e63 6520 7665 7273  Sever.Since vers
-00005cb0: 696f 6e20 352e 3020 6f66 2074 6865 2042  ion 5.0 of the B
-00005cc0: 6f74 2041 5049 2c20 796f 7520 6861 7665  ot API, you have
-00005cd0: 2074 6865 2070 6f73 7369 6269 6c69 7479   the possibility
-00005ce0: 2074 6f20 7275 6e20 796f 7572 206f 776e   to run your own
-00005cf0: 205b 4c6f 6361 6c20 426f 7420 4150 4920   [Local Bot API 
-00005d00: 5365 7276 6572 5d28 6874 7470 733a 2f2f  Server](https://
-00005d10: 636f 7265 2e74 656c 6567 7261 6d2e 6f72  core.telegram.or
-00005d20: 672f 626f 7473 2f61 7069 2375 7369 6e67  g/bots/api#using
-00005d30: 2d61 2d6c 6f63 616c 2d62 6f74 2d61 7069  -a-local-bot-api
-00005d40: 2d73 6572 7665 7229 2e0a 7079 5465 6c65  -server)..pyTele
-00005d50: 6772 616d 426f 7441 5049 2061 6c73 6f20  gramBotAPI also 
-00005d60: 7375 7070 6f72 7473 2074 6869 7320 6665  supports this fe
-00005d70: 6174 7572 652e 0a60 6060 7079 7468 6f6e  ature..```python
-00005d80: 0a66 726f 6d20 7465 6c65 626f 7420 696d  .from telebot im
-00005d90: 706f 7274 2061 7069 6865 6c70 6572 0a0a  port apihelper..
-00005da0: 6170 6968 656c 7065 722e 4150 495f 5552  apihelper.API_UR
-00005db0: 4c20 3d20 2268 7474 703a 2f2f 6c6f 6361  L = "http://loca
-00005dc0: 6c68 6f73 743a 3432 3030 2f62 6f74 7b30  lhost:4200/bot{0
-00005dd0: 7d2f 7b31 7d22 0a60 6060 0a2a 2a49 6d70  }/{1}".```.**Imp
-00005de0: 6f72 7461 6e74 3a20 4c69 6b65 2064 6573  ortant: Like des
-00005df0: 6372 6962 6564 205b 6865 7265 5d28 6874  cribed [here](ht
-00005e00: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
-00005e10: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
-00005e20: 236c 6f67 6f75 7429 2c20 796f 7520 6861  #logout), you ha
-00005e30: 7665 2074 6f20 6c6f 6720 6f75 7420 796f  ve to log out yo
-00005e40: 7572 2062 6f74 2066 726f 6d20 7468 6520  ur bot from the 
-00005e50: 5465 6c65 6772 616d 2073 6572 7665 7220  Telegram server 
-00005e60: 6265 666f 7265 2073 7769 7463 6869 6e67  before switching
-00005e70: 2074 6f20 796f 7572 206c 6f63 616c 2041   to your local A
-00005e80: 5049 2073 6572 7665 722e 2069 6e20 7079  PI server. in py
-00005e90: 5465 6c65 6772 616d 426f 7441 5049 2075  TelegramBotAPI u
-00005ea0: 7365 2060 626f 742e 6c6f 675f 6f75 7428  se `bot.log_out(
-00005eb0: 2960 2a2a 0a0a 2a4e 6f74 653a 2034 3230  )`**..*Note: 420
-00005ec0: 3020 6973 2061 6e20 6578 616d 706c 6520  0 is an example 
-00005ed0: 706f 7274 2a0a 0a23 2323 2041 7379 6e63  port*..### Async
-00005ee0: 6872 6f6e 6f75 7320 5465 6c65 426f 740a  hronous TeleBot.
-00005ef0: 4e65 773a 2054 6865 7265 2069 7320 616e  New: There is an
-00005f00: 2061 7379 6e63 6872 6f6e 6f75 7320 696d   asynchronous im
-00005f10: 706c 656d 656e 7461 7469 6f6e 206f 6620  plementation of 
-00005f20: 7465 6c65 626f 742e 0a54 6f20 656e 6162  telebot..To enab
-00005f30: 6c65 2074 6869 7320 6265 6861 7669 6f75  le this behaviou
-00005f40: 722c 2063 7265 6174 6520 616e 2069 6e73  r, create an ins
-00005f50: 7461 6e63 6520 6f66 2041 7379 6e63 5465  tance of AsyncTe
-00005f60: 6c65 426f 7420 696e 7374 6561 6420 6f66  leBot instead of
-00005f70: 2054 656c 6542 6f74 2e0a 6060 6070 7974   TeleBot..```pyt
-00005f80: 686f 6e0a 7462 203d 2074 656c 6562 6f74  hon.tb = telebot
-00005f90: 2e41 7379 6e63 5465 6c65 426f 7428 2254  .AsyncTeleBot("T
-00005fa0: 4f4b 454e 2229 0a60 6060 0a4e 6f77 2c20  OKEN").```.Now, 
-00005fb0: 6576 6572 7920 6675 6e63 7469 6f6e 2074  every function t
-00005fc0: 6861 7420 6361 6c6c 7320 7468 6520 5465  hat calls the Te
-00005fd0: 6c65 6772 616d 2041 5049 2069 7320 6578  legram API is ex
-00005fe0: 6563 7574 6564 2069 6e20 6120 7365 7061  ecuted in a sepa
-00005ff0: 7261 7465 2061 7379 6e63 6872 6f6e 6f75  rate asynchronou
-00006000: 7320 7461 736b 2e0a 5573 696e 6720 4173  s task..Using As
-00006010: 796e 6354 656c 6542 6f74 2061 6c6c 6f77  yncTeleBot allow
-00006020: 7320 796f 7520 746f 2064 6f20 7468 6520  s you to do the 
-00006030: 666f 6c6c 6f77 696e 673a 0a60 6060 7079  following:.```py
-00006040: 7468 6f6e 0a69 6d70 6f72 7420 7465 6c65  thon.import tele
-00006050: 626f 740a 0a74 6220 3d20 7465 6c65 626f  bot..tb = telebo
-00006060: 742e 4173 796e 6354 656c 6542 6f74 2822  t.AsyncTeleBot("
-00006070: 544f 4b45 4e22 290a 0a40 7462 2e6d 6573  TOKEN")..@tb.mes
-00006080: 7361 6765 5f68 616e 646c 6572 2863 6f6d  sage_handler(com
-00006090: 6d61 6e64 733d 5b27 7374 6172 7427 5d29  mands=['start'])
-000060a0: 0a61 7379 6e63 2064 6566 2073 7461 7274  .async def start
-000060b0: 5f6d 6573 7361 6765 286d 6573 7361 6765  _message(message
-000060c0: 293a 0a09 6177 6169 7420 626f 742e 7365  ):..await bot.se
-000060d0: 6e64 5f6d 6573 7361 6765 286d 6573 7361  nd_message(messa
-000060e0: 6765 2e63 6861 742e 6964 2c20 2748 656c  ge.chat.id, 'Hel
-000060f0: 6c6f 2127 290a 0a60 6060 0a0a 5365 6520  lo!')..```..See 
-00006100: 6d6f 7265 2069 6e20 5b65 7861 6d70 6c65  more in [example
-00006110: 735d 2868 7474 7073 3a2f 2f67 6974 6875  s](https://githu
-00006120: 622e 636f 6d2f 6574 6572 6e6e 6f69 722f  b.com/eternnoir/
-00006130: 7079 5465 6c65 6772 616d 426f 7441 5049  pyTelegramBotAPI
-00006140: 2f74 7265 652f 6d61 7374 6572 2f65 7861  /tree/master/exa
-00006150: 6d70 6c65 732f 6173 796e 6368 726f 6e6f  mples/asynchrono
-00006160: 7573 5f74 656c 6562 6f74 290a 0a23 2323  us_telebot)..###
-00006170: 2053 656e 6469 6e67 206c 6172 6765 2074   Sending large t
-00006180: 6578 7420 6d65 7373 6167 6573 0a53 6f6d  ext messages.Som
-00006190: 6574 696d 6573 2079 6f75 206d 7573 7420  etimes you must 
-000061a0: 7365 6e64 206d 6573 7361 6765 7320 7468  send messages th
-000061b0: 6174 2065 7863 6565 6420 3530 3030 2063  at exceed 5000 c
-000061c0: 6861 7261 6374 6572 732e 2054 6865 2054  haracters. The T
-000061d0: 656c 6567 7261 6d20 4150 4920 6361 6e20  elegram API can 
-000061e0: 6e6f 7420 6861 6e64 6c65 2074 6861 7420  not handle that 
-000061f0: 6d61 6e79 2063 6861 7261 6374 6572 7320  many characters 
-00006200: 696e 206f 6e65 2072 6571 7565 7374 2c20  in one request, 
-00006210: 736f 2077 6520 6e65 6564 2074 6f20 7370  so we need to sp
-00006220: 6c69 7420 7468 6520 6d65 7373 6167 6520  lit the message 
-00006230: 696e 206d 756c 7469 706c 6573 2e20 4865  in multiples. He
-00006240: 7265 2069 7320 686f 7720 746f 2064 6f20  re is how to do 
-00006250: 7468 6174 2075 7369 6e67 2074 6865 2041  that using the A
-00006260: 5049 3a0a 6060 6070 7974 686f 6e0a 6672  PI:.```python.fr
-00006270: 6f6d 2074 656c 6562 6f74 2069 6d70 6f72  om telebot impor
-00006280: 7420 7574 696c 0a6c 6172 6765 5f74 6578  t util.large_tex
-00006290: 7420 3d20 6f70 656e 2822 6c61 7267 655f  t = open("large_
-000062a0: 7465 7874 2e74 7874 222c 2022 7262 2229  text.txt", "rb")
-000062b0: 2e72 6561 6428 290a 0a23 2053 706c 6974  .read()..# Split
-000062c0: 2074 6865 2074 6578 7420 6561 6368 2033   the text each 3
-000062d0: 3030 3020 6368 6172 6163 7465 7273 2e0a  000 characters..
-000062e0: 2320 7370 6c69 745f 7374 7269 6e67 2072  # split_string r
-000062f0: 6574 7572 6e73 2061 206c 6973 7420 7769  eturns a list wi
-00006300: 7468 2074 6865 2073 706c 6974 7465 6420  th the splitted 
-00006310: 7465 7874 2e0a 7370 6c69 7474 6564 5f74  text..splitted_t
-00006320: 6578 7420 3d20 7574 696c 2e73 706c 6974  ext = util.split
-00006330: 5f73 7472 696e 6728 6c61 7267 655f 7465  _string(large_te
-00006340: 7874 2c20 3330 3030 290a 0a66 6f72 2074  xt, 3000)..for t
-00006350: 6578 7420 696e 2073 706c 6974 7465 645f  ext in splitted_
-00006360: 7465 7874 3a0a 0974 622e 7365 6e64 5f6d  text:..tb.send_m
-00006370: 6573 7361 6765 2863 6861 745f 6964 2c20  essage(chat_id, 
-00006380: 7465 7874 290a 6060 600a 0a4f 7220 796f  text).```..Or yo
-00006390: 7520 6361 6e20 7573 6520 7468 6520 6e65  u can use the ne
-000063a0: 7720 6073 6d61 7274 5f73 706c 6974 6020  w `smart_split` 
-000063b0: 6675 6e63 7469 6f6e 2074 6f20 6765 7420  function to get 
-000063c0: 6d6f 7265 206d 6561 6e69 6e67 6675 6c20  more meaningful 
-000063d0: 7375 6273 7472 696e 6773 3a0a 6060 6070  substrings:.```p
-000063e0: 7974 686f 6e0a 6672 6f6d 2074 656c 6562  ython.from teleb
-000063f0: 6f74 2069 6d70 6f72 7420 7574 696c 0a6c  ot import util.l
-00006400: 6172 6765 5f74 6578 7420 3d20 6f70 656e  arge_text = open
-00006410: 2822 6c61 7267 655f 7465 7874 2e74 7874  ("large_text.txt
-00006420: 222c 2022 7262 2229 2e72 6561 6428 290a  ", "rb").read().
-00006430: 2320 5370 6c69 7473 206f 6e65 2073 7472  # Splits one str
-00006440: 696e 6720 696e 746f 206d 756c 7469 706c  ing into multipl
-00006450: 6520 7374 7269 6e67 732c 2077 6974 6820  e strings, with 
-00006460: 6120 6d61 7869 6d75 6d20 616d 6f75 6e74  a maximum amount
-00006470: 206f 6620 6063 6861 7273 5f70 6572 5f73   of `chars_per_s
-00006480: 7472 696e 6760 2028 6d61 782e 2034 3039  tring` (max. 409
-00006490: 3629 0a23 2053 706c 6974 7320 6279 206c  6).# Splits by l
-000064a0: 6173 7420 275c 6e27 2c20 272e 2027 206f  ast '\n', '. ' o
-000064b0: 7220 2720 2720 696e 2065 7861 6374 6c79  r ' ' in exactly
-000064c0: 2074 6869 7320 7072 696f 7269 7479 2e0a   this priority..
-000064d0: 2320 736d 6172 745f 7370 6c69 7420 7265  # smart_split re
-000064e0: 7475 726e 7320 6120 6c69 7374 2077 6974  turns a list wit
-000064f0: 6820 7468 6520 7370 6c69 7474 6564 2074  h the splitted t
-00006500: 6578 742e 0a73 706c 6974 7465 645f 7465  ext..splitted_te
-00006510: 7874 203d 2075 7469 6c2e 736d 6172 745f  xt = util.smart_
-00006520: 7370 6c69 7428 6c61 7267 655f 7465 7874  split(large_text
-00006530: 2c20 6368 6172 735f 7065 725f 7374 7269  , chars_per_stri
-00006540: 6e67 3d33 3030 3029 0a66 6f72 2074 6578  ng=3000).for tex
-00006550: 7420 696e 2073 706c 6974 7465 645f 7465  t in splitted_te
-00006560: 7874 3a0a 0974 622e 7365 6e64 5f6d 6573  xt:..tb.send_mes
-00006570: 7361 6765 2863 6861 745f 6964 2c20 7465  sage(chat_id, te
-00006580: 7874 290a 6060 600a 2323 2320 436f 6e74  xt).```.### Cont
-00006590: 726f 6c6c 696e 6720 7468 6520 616d 6f75  rolling the amou
-000065a0: 6e74 206f 6620 5468 7265 6164 7320 7573  nt of Threads us
-000065b0: 6564 2062 7920 5465 6c65 426f 740a 5468  ed by TeleBot.Th
-000065c0: 6520 5465 6c65 426f 7420 636f 6e73 7472  e TeleBot constr
-000065d0: 7563 746f 7220 7461 6b65 7320 7468 6520  uctor takes the 
-000065e0: 666f 6c6c 6f77 696e 6720 6f70 7469 6f6e  following option
-000065f0: 616c 2061 7267 756d 656e 7473 3a0a 0a20  al arguments:.. 
-00006600: 2d20 7468 7265 6164 6564 3a20 5472 7565  - threaded: True
-00006610: 2f46 616c 7365 2028 6465 6661 756c 7420  /False (default 
-00006620: 5472 7565 292e 2041 2066 6c61 6720 746f  True). A flag to
-00006630: 2069 6e64 6963 6174 6520 7768 6574 6865   indicate whethe
-00006640: 720a 2020 2054 656c 6542 6f74 2073 686f  r.   TeleBot sho
-00006650: 756c 6420 6578 6563 7574 6520 6d65 7373  uld execute mess
-00006660: 6167 6520 6861 6e64 6c65 7273 206f 6e20  age handlers on 
-00006670: 6974 2773 2070 6f6c 6c69 6e67 2054 6872  it's polling Thr
-00006680: 6561 642e 0a0a 2323 2320 5468 6520 6c69  ead...### The li
-00006690: 7374 656e 6572 206d 6563 6861 6e69 736d  stener mechanism
-000066a0: 0a41 7320 616e 2061 6c74 6572 6e61 7469  .As an alternati
-000066b0: 7665 2074 6f20 7468 6520 6d65 7373 6167  ve to the messag
-000066c0: 6520 6861 6e64 6c65 7273 2c20 6f6e 6520  e handlers, one 
-000066d0: 6361 6e20 616c 736f 2072 6567 6973 7465  can also registe
-000066e0: 7220 6120 6675 6e63 7469 6f6e 2061 7320  r a function as 
-000066f0: 6120 6c69 7374 656e 6572 2074 6f20 5465  a listener to Te
-00006700: 6c65 426f 742e 0a0a 4e4f 5449 4345 3a20  leBot...NOTICE: 
-00006710: 6861 6e64 6c65 7273 2077 6f6e 2774 2064  handlers won't d
-00006720: 6973 6170 7065 6172 2120 596f 7572 206d  isappear! Your m
-00006730: 6573 7361 6765 2077 696c 6c20 6265 2070  essage will be p
-00006740: 726f 6365 7373 6564 2062 6f74 6820 6279  rocessed both by
-00006750: 2068 616e 646c 6572 7320 616e 6420 6c69   handlers and li
-00006760: 7374 656e 6572 732e 2041 6c73 6f2c 2069  steners. Also, i
-00006770: 7427 7320 696d 706f 7373 6962 6c65 2074  t's impossible t
-00006780: 6f20 7072 6564 6963 7420 7768 6963 6820  o predict which 
-00006790: 7769 6c6c 2077 6f72 6b20 6174 2066 6972  will work at fir
-000067a0: 7374 2062 6563 6175 7365 206f 6620 7468  st because of th
-000067b0: 7265 6164 696e 672e 2049 6620 796f 7520  reading. If you 
-000067c0: 7573 6520 7468 7265 6164 6564 3d46 616c  use threaded=Fal
-000067d0: 7365 2c20 6375 7374 6f6d 206c 6973 7465  se, custom liste
-000067e0: 6e65 7273 2077 696c 6c20 776f 726b 2065  ners will work e
-000067f0: 6172 6c69 6572 2c20 6166 7465 7220 7468  arlier, after th
-00006800: 656d 2068 616e 646c 6572 7320 7769 6c6c  em handlers will
-00006810: 2062 6520 6361 6c6c 6564 2e20 0a45 7861   be called. .Exa
-00006820: 6d70 6c65 3a0a 6060 6070 7974 686f 6e0a  mple:.```python.
-00006830: 6465 6620 6861 6e64 6c65 5f6d 6573 7361  def handle_messa
-00006840: 6765 7328 6d65 7373 6167 6573 293a 0a09  ges(messages):..
-00006850: 666f 7220 6d65 7373 6167 6520 696e 206d  for message in m
-00006860: 6573 7361 6765 733a 0a09 0923 2044 6f20  essages:...# Do 
-00006870: 736f 6d65 7468 696e 6720 7769 7468 2074  something with t
-00006880: 6865 206d 6573 7361 6765 0a09 0962 6f74  he message...bot
-00006890: 2e72 6570 6c79 5f74 6f28 6d65 7373 6167  .reply_to(messag
-000068a0: 652c 2027 4869 2729 0a0a 626f 742e 7365  e, 'Hi')..bot.se
-000068b0: 745f 7570 6461 7465 5f6c 6973 7465 6e65  t_update_listene
-000068c0: 7228 6861 6e64 6c65 5f6d 6573 7361 6765  r(handle_message
-000068d0: 7329 0a62 6f74 2e69 6e66 696e 6974 795f  s).bot.infinity_
-000068e0: 706f 6c6c 696e 6728 290a 6060 600a 0a23  polling().```..#
-000068f0: 2323 2055 7369 6e67 2077 6562 2068 6f6f  ## Using web hoo
-00006900: 6b73 0a57 6865 6e20 7573 696e 6720 7765  ks.When using we
-00006910: 6268 6f6f 6b73 2074 656c 6567 7261 6d20  bhooks telegram 
-00006920: 7365 6e64 7320 6f6e 6520 5570 6461 7465  sends one Update
-00006930: 2070 6572 2063 616c 6c2c 2066 6f72 2070   per call, for p
-00006940: 726f 6365 7373 696e 6720 6974 2079 6f75  rocessing it you
-00006950: 2073 686f 756c 6420 6361 6c6c 2070 726f   should call pro
-00006960: 6365 7373 5f6e 6577 5f6d 6573 7361 6765  cess_new_message
-00006970: 7328 5b75 7064 6174 652e 6d65 7373 6167  s([update.messag
-00006980: 655d 2920 7768 656e 2079 6f75 2072 6563  e]) when you rec
-00006990: 6965 7665 2069 742e 0a0a 5468 6572 6520  ieve it...There 
-000069a0: 6172 6520 736f 6d65 2065 7861 6d70 6c65  are some example
-000069b0: 7320 7573 696e 6720 7765 6268 6f6f 6b73  s using webhooks
-000069c0: 2069 6e20 7468 6520 5b65 7861 6d70 6c65   in the [example
-000069d0: 732f 7765 6268 6f6f 6b5f 6578 616d 706c  s/webhook_exampl
-000069e0: 6573 5d28 6578 616d 706c 6573 2f77 6562  es](examples/web
-000069f0: 686f 6f6b 5f65 7861 6d70 6c65 7329 2064  hook_examples) d
-00006a00: 6972 6563 746f 7279 2e0a 0a23 2323 204c  irectory...### L
-00006a10: 6f67 6769 6e67 0a59 6f75 2063 616e 2075  ogging.You can u
-00006a20: 7365 2074 6865 2054 656c 6562 6f74 206d  se the Telebot m
-00006a30: 6f64 756c 6520 6c6f 6767 6572 2074 6f20  odule logger to 
-00006a40: 6c6f 6720 6465 6275 6720 696e 666f 2061  log debug info a
-00006a50: 626f 7574 2054 656c 6562 6f74 2e20 5573  bout Telebot. Us
-00006a60: 6520 6074 656c 6562 6f74 2e6c 6f67 6765  e `telebot.logge
-00006a70: 7260 2074 6f20 6765 7420 7468 6520 6c6f  r` to get the lo
-00006a80: 6767 6572 206f 6620 7468 6520 5465 6c65  gger of the Tele
-00006a90: 426f 7420 6d6f 6475 6c65 2e0a 4974 2069  Bot module..It i
-00006aa0: 7320 706f 7373 6962 6c65 2074 6f20 6164  s possible to ad
-00006ab0: 6420 6375 7374 6f6d 206c 6f67 6769 6e67  d custom logging
-00006ac0: 2048 616e 646c 6572 7320 746f 2074 6865   Handlers to the
-00006ad0: 206c 6f67 6765 722e 2052 6566 6572 2074   logger. Refer t
-00006ae0: 6f20 7468 6520 5b50 7974 686f 6e20 6c6f  o the [Python lo
-00006af0: 6767 696e 6720 6d6f 6475 6c65 2070 6167  gging module pag
-00006b00: 655d 2868 7474 7073 3a2f 2f64 6f63 732e  e](https://docs.
-00006b10: 7079 7468 6f6e 2e6f 7267 2f32 2f6c 6962  python.org/2/lib
-00006b20: 7261 7279 2f6c 6f67 6769 6e67 2e68 746d  rary/logging.htm
-00006b30: 6c29 2066 6f72 206d 6f72 6520 696e 666f  l) for more info
-00006b40: 2e0a 0a60 6060 7079 7468 6f6e 0a69 6d70  ...```python.imp
-00006b50: 6f72 7420 6c6f 6767 696e 670a 0a6c 6f67  ort logging..log
-00006b60: 6765 7220 3d20 7465 6c65 626f 742e 6c6f  ger = telebot.lo
-00006b70: 6767 6572 0a74 656c 6562 6f74 2e6c 6f67  gger.telebot.log
-00006b80: 6765 722e 7365 744c 6576 656c 286c 6f67  ger.setLevel(log
-00006b90: 6769 6e67 2e44 4542 5547 2920 2320 4f75  ging.DEBUG) # Ou
-00006ba0: 7470 7574 7320 6465 6275 6720 6d65 7373  tputs debug mess
-00006bb0: 6167 6573 2074 6f20 636f 6e73 6f6c 652e  ages to console.
-00006bc0: 0a60 6060 0a0a 2323 2320 5072 6f78 790a  .```..### Proxy.
-00006bd0: 466f 7220 7379 6e63 3a0a 0a59 6f75 2063  For sync:..You c
-00006be0: 616e 2075 7365 2070 726f 7879 2066 6f72  an use proxy for
-00006bf0: 2072 6571 7565 7374 2e20 6061 7069 6865   request. `apihe
-00006c00: 6c70 6572 2e70 726f 7879 6020 6f62 6a65  lper.proxy` obje
-00006c10: 6374 2077 696c 6c20 7573 6520 6279 2063  ct will use by c
-00006c20: 616c 6c20 6072 6571 7565 7374 7360 2070  all `requests` p
-00006c30: 726f 7869 6573 2061 7267 756d 656e 742e  roxies argument.
-00006c40: 0a0a 6060 6070 7974 686f 6e0a 6672 6f6d  ..```python.from
-00006c50: 2074 656c 6562 6f74 2069 6d70 6f72 7420   telebot import 
-00006c60: 6170 6968 656c 7065 720a 0a61 7069 6865  apihelper..apihe
-00006c70: 6c70 6572 2e70 726f 7879 203d 207b 2768  lper.proxy = {'h
-00006c80: 7474 7027 3a27 6874 7470 3a2f 2f31 3237  ttp':'http://127
-00006c90: 2e30 2e30 2e31 3a33 3132 3827 7d0a 6060  .0.0.1:3128'}.``
-00006ca0: 600a 0a49 6620 796f 7520 7761 6e74 2074  `..If you want t
-00006cb0: 6f20 7573 6520 736f 636b 6574 3520 7072  o use socket5 pr
-00006cc0: 6f78 7920 796f 7520 6e65 6564 2069 6e73  oxy you need ins
-00006cd0: 7461 6c6c 2064 6570 656e 6465 6e63 7920  tall dependency 
-00006ce0: 6070 6970 2069 6e73 7461 6c6c 2072 6571  `pip install req
-00006cf0: 7565 7374 735b 736f 636b 735d 6020 616e  uests[socks]` an
-00006d00: 6420 6d61 6b65 2073 7572 652c 2074 6861  d make sure, tha
-00006d10: 7420 796f 7520 6861 7665 2074 6865 206c  t you have the l
-00006d20: 6174 6573 7420 7665 7273 696f 6e20 6f66  atest version of
-00006d30: 2060 6775 6e69 636f 726e 602c 2060 5079   `gunicorn`, `Py
-00006d40: 536f 636b 7360 2c20 6070 7954 656c 6567  Socks`, `pyTeleg
-00006d50: 7261 6d42 6f74 4150 4960 2c20 6072 6571  ramBotAPI`, `req
-00006d60: 7565 7374 7360 2061 6e64 2060 7572 6c6c  uests` and `urll
-00006d70: 6962 3360 2e0a 0a60 6060 7079 7468 6f6e  ib3`...```python
-00006d80: 0a61 7069 6865 6c70 6572 2e70 726f 7879  .apihelper.proxy
-00006d90: 203d 207b 2768 7474 7073 273a 2773 6f63   = {'https':'soc
-00006da0: 6b73 353a 2f2f 7573 6572 7072 6f78 793a  ks5://userproxy:
-00006db0: 7061 7373 776f 7264 4070 726f 7879 5f61  password@proxy_a
-00006dc0: 6464 7265 7373 3a70 6f72 7427 7d0a 6060  ddress:port'}.``
-00006dd0: 600a 0a46 6f72 2061 7379 6e63 3a0a 6060  `..For async:.``
-00006de0: 6070 7974 686f 6e0a 6672 6f6d 2074 656c  `python.from tel
-00006df0: 6562 6f74 2069 6d70 6f72 7420 6173 796e  ebot import asyn
-00006e00: 6369 6f5f 6865 6c70 6572 0a0a 6173 796e  cio_helper..asyn
-00006e10: 6369 6f5f 6865 6c70 6572 2e70 726f 7879  cio_helper.proxy
-00006e20: 203d 2027 6874 7470 3a2f 2f31 3237 2e30   = 'http://127.0
-00006e30: 2e30 2e31 3a33 3132 3827 2023 7572 6c0a  .0.1:3128' #url.
-00006e40: 6060 600a 0a0a 2323 2320 5465 7374 696e  ```...### Testin
-00006e50: 670a 596f 7520 6361 6e20 6469 7361 626c  g.You can disabl
-00006e60: 6520 6f72 2063 6861 6e67 6520 7468 6520  e or change the 
-00006e70: 696e 7465 7261 6374 696f 6e20 7769 7468  interaction with
-00006e80: 2072 6561 6c20 5465 6c65 6772 616d 2073   real Telegram s
-00006e90: 6572 7665 7220 6279 2075 7369 6e67 0a60  erver by using.`
-00006ea0: 6060 7079 7468 6f6e 0a61 7069 6865 6c70  ``python.apihelp
-00006eb0: 6572 2e43 5553 544f 4d5f 5245 5155 4553  er.CUSTOM_REQUES
-00006ec0: 545f 5345 4e44 4552 203d 2079 6f75 725f  T_SENDER = your_
-00006ed0: 6861 6e64 6c65 720a 6060 600a 7061 7261  handler.```.para
-00006ee0: 6d65 7465 722e 2059 6f75 2063 616e 2070  meter. You can p
-00006ef0: 6173 7320 7468 6572 6520 796f 7572 206f  ass there your o
-00006f00: 776e 2066 756e 6374 696f 6e20 7468 6174  wn function that
-00006f10: 2077 696c 6c20 6265 2063 616c 6c65 6420   will be called 
-00006f20: 696e 7374 6561 6420 6f66 205f 7265 7175  instead of _requ
-00006f30: 6573 7473 2e72 6571 7565 7374 5f2e 0a0a  ests.request_...
-00006f40: 466f 7220 6578 616d 706c 653a 0a60 6060  For example:.```
-00006f50: 7079 7468 6f6e 0a64 6566 2063 7573 746f  python.def custo
-00006f60: 6d5f 7365 6e64 6572 286d 6574 686f 642c  m_sender(method,
-00006f70: 2075 726c 2c20 2a2a 6b77 6172 6773 293a   url, **kwargs):
-00006f80: 0a20 2020 2070 7269 6e74 2822 6375 7374  .    print("cust
-00006f90: 6f6d 5f73 656e 6465 722e 206d 6574 686f  om_sender. metho
-00006fa0: 643a 207b 7d2c 2075 726c 3a20 7b7d 2c20  d: {}, url: {}, 
-00006fb0: 7061 7261 6d73 3a20 7b7d 222e 666f 726d  params: {}".form
-00006fc0: 6174 286d 6574 686f 642c 2075 726c 2c20  at(method, url, 
-00006fd0: 6b77 6172 6773 2e67 6574 2822 7061 7261  kwargs.get("para
-00006fe0: 6d73 2229 2929 0a20 2020 2072 6573 756c  ms"))).    resul
-00006ff0: 7420 3d20 7574 696c 2e43 7573 746f 6d52  t = util.CustomR
-00007000: 6571 7565 7374 5265 7370 6f6e 7365 2827  equestResponse('
-00007010: 7b22 6f6b 223a 7472 7565 2c22 7265 7375  {"ok":true,"resu
-00007020: 6c74 223a 7b22 6d65 7373 6167 655f 6964  lt":{"message_id
-00007030: 223a 2031 2c20 2264 6174 6522 3a20 312c  ": 1, "date": 1,
-00007040: 2022 6368 6174 223a 207b 2269 6422 3a20   "chat": {"id": 
-00007050: 312c 2022 7479 7065 223a 2022 7072 6976  1, "type": "priv
-00007060: 6174 6522 7d7d 7d27 290a 2020 2020 7265  ate"}}}').    re
-00007070: 7475 726e 2072 6573 756c 740a 6060 600a  turn result.```.
-00007080: 0a54 6865 6e20 796f 7520 6361 6e20 7573  .Then you can us
-00007090: 6520 4150 4920 616e 6420 7072 6f63 6565  e API and procee
-000070a0: 6420 7265 7175 6573 7473 2069 6e20 796f  d requests in yo
-000070b0: 7572 2068 616e 646c 6572 2063 6f64 652e  ur handler code.
-000070c0: 0a60 6060 7079 7468 6f6e 0a61 7069 6865  .```python.apihe
-000070d0: 6c70 6572 2e43 5553 544f 4d5f 5245 5155  lper.CUSTOM_REQU
-000070e0: 4553 545f 5345 4e44 4552 203d 2063 7573  EST_SENDER = cus
-000070f0: 746f 6d5f 7365 6e64 6572 0a74 6220 3d20  tom_sender.tb = 
-00007100: 5465 6c65 426f 7428 2274 6573 7422 290a  TeleBot("test").
-00007110: 7265 7320 3d20 7462 2e73 656e 645f 6d65  res = tb.send_me
-00007120: 7373 6167 6528 3132 332c 2022 5465 7374  ssage(123, "Test
-00007130: 2229 0a60 6060 0a0a 5265 7375 6c74 2077  ").```..Result w
-00007140: 696c 6c20 6265 3a0a 0a60 6375 7374 6f6d  ill be:..`custom
-00007150: 5f73 656e 6465 722e 206d 6574 686f 643a  _sender. method:
-00007160: 2070 6f73 742c 2075 726c 3a20 6874 7470   post, url: http
-00007170: 733a 2f2f 6170 692e 7465 6c65 6772 616d  s://api.telegram
-00007180: 2e6f 7267 2f62 6f74 6f6c 6f6c 6f2f 7365  .org/botololo/se
-00007190: 6e64 4d65 7373 6167 652c 2070 6172 616d  ndMessage, param
-000071a0: 733a 207b 2763 6861 745f 6964 273a 2027  s: {'chat_id': '
-000071b0: 3132 3327 2c20 2774 6578 7427 3a20 2754  123', 'text': 'T
-000071c0: 6573 7427 7d60 0a0a 0a0a 2323 2041 5049  est'}`....## API
-000071d0: 2063 6f6e 666f 726d 616e 6365 206c 696d   conformance lim
-000071e0: 6974 6174 696f 6e73 0a2a 20e2 9e95 205b  itations.* ... [
-000071f0: 426f 7420 4150 4920 342e 355d 2868 7474  Bot API 4.5](htt
-00007200: 7073 3a2f 2f63 6f72 652e 7465 6c65 6772  ps://core.telegr
-00007210: 616d 2e6f 7267 2f62 6f74 732f 6170 692d  am.org/bots/api-
-00007220: 6368 616e 6765 6c6f 6723 6465 6365 6d62  changelog#decemb
-00007230: 6572 2d33 312d 3230 3139 2920 2d20 4e6f  er-31-2019) - No
-00007240: 206e 6573 7465 6420 4d65 7373 6167 6545   nested MessageE
-00007250: 6e74 6974 6965 7320 616e 6420 4d61 726b  ntities and Mark
-00007260: 646f 776e 3220 7375 7070 6f72 740a 2a20  down2 support.* 
-00007270: e29e 9520 5b42 6f74 2041 5049 2034 2e31  ... [Bot API 4.1
-00007280: 5d28 6874 7470 733a 2f2f 636f 7265 2e74  ](https://core.t
-00007290: 656c 6567 7261 6d2e 6f72 672f 626f 7473  elegram.org/bots
-000072a0: 2f61 7069 2d63 6861 6e67 656c 6f67 2361  /api-changelog#a
-000072b0: 7567 7573 742d 3237 2d32 3031 3829 2020  ugust-27-2018)  
-000072c0: 202d 204e 6f20 5061 7373 706f 7274 2073   - No Passport s
-000072d0: 7570 706f 7274 0a2a 20e2 9e95 205b 426f  upport.* ... [Bo
-000072e0: 7420 4150 4920 342e 305d 2868 7474 7073  t API 4.0](https
-000072f0: 3a2f 2f63 6f72 652e 7465 6c65 6772 616d  ://core.telegram
-00007300: 2e6f 7267 2f62 6f74 732f 6170 692d 6368  .org/bots/api-ch
-00007310: 616e 6765 6c6f 6723 6a75 6c79 2d32 362d  angelog#july-26-
-00007320: 3230 3138 2920 2020 2020 2d20 4e6f 2050  2018)     - No P
-00007330: 6173 7370 6f72 7420 7375 7070 6f72 740a  assport support.
-00007340: 0a0a 2323 2041 7379 6e63 5465 6c65 426f  ..## AsyncTeleBo
-00007350: 740a 2323 2320 4173 796e 6368 726f 6e6f  t.### Asynchrono
-00007360: 7573 2076 6572 7369 6f6e 206f 6620 7465  us version of te
-00007370: 6c65 626f 740a 5765 2068 6176 6520 6120  lebot.We have a 
-00007380: 6675 6c6c 7920 6173 796e 6368 726f 6e6f  fully asynchrono
-00007390: 7573 2076 6572 7369 6f6e 206f 6620 5465  us version of Te
-000073a0: 6c65 426f 742e 0a54 6869 7320 636c 6173  leBot..This clas
-000073b0: 7320 6973 206e 6f74 2063 6f6e 7472 6f6c  s is not control
-000073c0: 6c65 6420 6279 2074 6872 6561 6473 2e20  led by threads. 
-000073d0: 4173 796e 6369 6f20 7461 736b 7320 6172  Asyncio tasks ar
-000073e0: 6520 6372 6561 7465 6420 746f 2065 7865  e created to exe
-000073f0: 6375 7465 2061 6c6c 2074 6865 2073 7475  cute all the stu
-00007400: 6666 2e0a 0a23 2323 2045 6368 6f42 6f74  ff...### EchoBot
-00007410: 0a45 6368 6f20 426f 7420 6578 616d 706c  .Echo Bot exampl
-00007420: 6520 6f6e 2041 7379 6e63 5465 6c65 426f  e on AsyncTeleBo
-00007430: 743a 0a09 0a60 6060 7079 7468 6f6e 0a23  t:...```python.#
-00007440: 2054 6869 7320 6973 2061 2073 696d 706c   This is a simpl
-00007450: 6520 6563 686f 2062 6f74 2075 7369 6e67  e echo bot using
-00007460: 2074 6865 2064 6563 6f72 6174 6f72 206d   the decorator m
-00007470: 6563 6861 6e69 736d 2e0a 2320 4974 2065  echanism..# It e
-00007480: 6368 6f65 7320 616e 7920 696e 636f 6d69  choes any incomi
-00007490: 6e67 2074 6578 7420 6d65 7373 6167 6573  ng text messages
-000074a0: 2e0a 0a66 726f 6d20 7465 6c65 626f 742e  ...from telebot.
-000074b0: 6173 796e 635f 7465 6c65 626f 7420 696d  async_telebot im
-000074c0: 706f 7274 2041 7379 6e63 5465 6c65 426f  port AsyncTeleBo
-000074d0: 740a 696d 706f 7274 2061 7379 6e63 696f  t.import asyncio
-000074e0: 0a62 6f74 203d 2041 7379 6e63 5465 6c65  .bot = AsyncTele
-000074f0: 426f 7428 2754 4f4b 454e 2729 0a0a 0a0a  Bot('TOKEN')....
-00007500: 2320 4861 6e64 6c65 2027 2f73 7461 7274  # Handle '/start
-00007510: 2720 616e 6420 272f 6865 6c70 270a 4062  ' and '/help'.@b
-00007520: 6f74 2e6d 6573 7361 6765 5f68 616e 646c  ot.message_handl
-00007530: 6572 2863 6f6d 6d61 6e64 733d 5b27 6865  er(commands=['he
-00007540: 6c70 272c 2027 7374 6172 7427 5d29 0a61  lp', 'start']).a
-00007550: 7379 6e63 2064 6566 2073 656e 645f 7765  sync def send_we
-00007560: 6c63 6f6d 6528 6d65 7373 6167 6529 3a0a  lcome(message):.
-00007570: 2020 2020 6177 6169 7420 626f 742e 7265      await bot.re
-00007580: 706c 795f 746f 286d 6573 7361 6765 2c20  ply_to(message, 
-00007590: 2222 225c 0a48 6920 7468 6572 652c 2049  """\.Hi there, I
-000075a0: 2061 6d20 4563 686f 426f 742e 0a49 2061   am EchoBot..I a
-000075b0: 6d20 6865 7265 2074 6f20 6563 686f 2079  m here to echo y
-000075c0: 6f75 7220 6b69 6e64 2077 6f72 6473 2062  our kind words b
-000075d0: 6163 6b20 746f 2079 6f75 2e20 4a75 7374  ack to you. Just
-000075e0: 2073 6179 2061 6e79 7468 696e 6720 6e69   say anything ni
-000075f0: 6365 2061 6e64 2049 276c 6c20 7361 7920  ce and I'll say 
-00007600: 7468 6520 6578 6163 7420 7361 6d65 2074  the exact same t
-00007610: 6869 6e67 2074 6f20 796f 7521 5c0a 2222  hing to you!\.""
-00007620: 2229 0a0a 0a23 2048 616e 646c 6520 616c  ")...# Handle al
-00007630: 6c20 6f74 6865 7220 6d65 7373 6167 6573  l other messages
-00007640: 2077 6974 6820 636f 6e74 656e 745f 7479   with content_ty
-00007650: 7065 2027 7465 7874 2720 2863 6f6e 7465  pe 'text' (conte
-00007660: 6e74 5f74 7970 6573 2064 6566 6175 6c74  nt_types default
-00007670: 7320 746f 205b 2774 6578 7427 5d29 0a40  s to ['text']).@
-00007680: 626f 742e 6d65 7373 6167 655f 6861 6e64  bot.message_hand
-00007690: 6c65 7228 6675 6e63 3d6c 616d 6264 6120  ler(func=lambda 
-000076a0: 6d65 7373 6167 653a 2054 7275 6529 0a61  message: True).a
-000076b0: 7379 6e63 2064 6566 2065 6368 6f5f 6d65  sync def echo_me
-000076c0: 7373 6167 6528 6d65 7373 6167 6529 3a0a  ssage(message):.
-000076d0: 2020 2020 6177 6169 7420 626f 742e 7265      await bot.re
-000076e0: 706c 795f 746f 286d 6573 7361 6765 2c20  ply_to(message, 
-000076f0: 6d65 7373 6167 652e 7465 7874 290a 0a0a  message.text)...
-00007700: 6173 796e 6369 6f2e 7275 6e28 626f 742e  asyncio.run(bot.
-00007710: 706f 6c6c 696e 6728 2929 0a60 6060 0a41  polling()).```.A
-00007720: 7320 796f 7520 6361 6e20 7365 6520 6865  s you can see he
-00007730: 7265 2c20 6b65 7977 6f72 6473 2061 7265  re, keywords are
-00007740: 2061 7761 6974 2061 6e64 2061 7379 6e63   await and async
-00007750: 2e20 0a09 0a23 2323 2057 6879 2073 686f  . ...### Why sho
-00007760: 756c 6420 4920 7573 6520 6173 796e 633f  uld I use async?
-00007770: 0a41 7379 6e63 6872 6f6e 6f75 7320 7461  .Asynchronous ta
-00007780: 736b 7320 6465 7065 6e64 206f 6e20 7072  sks depend on pr
-00007790: 6f63 6573 736f 7220 7065 7266 6f72 6d61  ocessor performa
-000077a0: 6e63 652e 204d 616e 7920 6173 796e 6368  nce. Many asynch
-000077b0: 726f 6e6f 7573 2074 6173 6b73 2063 616e  ronous tasks can
-000077c0: 2072 756e 2070 6172 616c 6c65 6c6c 792c   run parallelly,
-000077d0: 2077 6869 6c65 2074 6872 6561 6420 7461   while thread ta
-000077e0: 736b 7320 7769 6c6c 2062 6c6f 636b 2065  sks will block e
-000077f0: 6163 6820 6f74 6865 722e 0a0a 2323 2320  ach other...### 
-00007800: 4469 6666 6572 656e 6365 7320 696e 2041  Differences in A
-00007810: 7379 6e63 5465 6c65 426f 740a 4173 796e  syncTeleBot.Asyn
-00007820: 6354 656c 6542 6f74 2069 7320 6173 796e  cTeleBot is asyn
-00007830: 6368 726f 6e6f 7573 2e20 4974 2075 7365  chronous. It use
-00007840: 7320 6169 6f68 7474 7020 696e 7374 6561  s aiohttp instea
-00007850: 6420 6f66 2072 6571 7565 7374 7320 6d6f  d of requests mo
-00007860: 6475 6c65 2e0a 090a 2323 2320 4578 616d  dule....### Exam
-00007870: 706c 6573 0a53 6565 206d 6f72 6520 6578  ples.See more ex
-00007880: 616d 706c 6573 2069 6e20 6f75 7220 5b65  amples in our [e
-00007890: 7861 6d70 6c65 735d 2868 7474 7073 3a2f  xamples](https:/
-000078a0: 2f67 6974 6875 622e 636f 6d2f 6574 6572  /github.com/eter
-000078b0: 6e6e 6f69 722f 7079 5465 6c65 6772 616d  nnoir/pyTelegram
-000078c0: 426f 7441 5049 2f74 7265 652f 6d61 7374  BotAPI/tree/mast
-000078d0: 6572 2f65 7861 6d70 6c65 732f 6173 796e  er/examples/asyn
-000078e0: 6368 726f 6e6f 7573 5f74 656c 6562 6f74  chronous_telebot
-000078f0: 2920 666f 6c64 6572 0a09 0a0a 2323 2046  ) folder....## F
-00007900: 2e41 2e51 2e0a 0a23 2323 2048 6f77 2063  .A.Q...### How c
-00007910: 616e 2049 2064 6973 7469 6e67 7569 7368  an I distinguish
-00007920: 2061 2055 7365 7220 616e 6420 6120 4772   a User and a Gr
-00007930: 6f75 7043 6861 7420 696e 206d 6573 7361  oupChat in messa
-00007940: 6765 2e63 6861 743f 0a54 656c 6567 7261  ge.chat?.Telegra
-00007950: 6d20 426f 7420 4150 4920 7375 7070 6f72  m Bot API suppor
-00007960: 7420 6e65 7720 7479 7065 2043 6861 7420  t new type Chat 
-00007970: 666f 7220 6d65 7373 6167 652e 6368 6174  for message.chat
-00007980: 2e0a 0a2d 2043 6865 636b 2074 6865 2060  ...- Check the `
-00007990: 6060 7479 7065 6060 6020 6174 7472 6962  ``type``` attrib
-000079a0: 7574 6520 696e 2060 6060 4368 6174 6060  ute in ```Chat``
-000079b0: 6020 6f62 6a65 6374 3a0a 6060 6070 7974  ` object:.```pyt
-000079c0: 686f 6e0a 6966 206d 6573 7361 6765 2e63  hon.if message.c
-000079d0: 6861 742e 7479 7065 203d 3d20 2270 7269  hat.type == "pri
-000079e0: 7661 7465 223a 0a20 2020 2023 2070 7269  vate":.    # pri
-000079f0: 7661 7465 2063 6861 7420 6d65 7373 6167  vate chat messag
-00007a00: 650a 0a69 6620 6d65 7373 6167 652e 6368  e..if message.ch
-00007a10: 6174 2e74 7970 6520 3d3d 2022 6772 6f75  at.type == "grou
-00007a20: 7022 3a0a 0923 2067 726f 7570 2063 6861  p":..# group cha
-00007a30: 7420 6d65 7373 6167 650a 0a69 6620 6d65  t message..if me
-00007a40: 7373 6167 652e 6368 6174 2e74 7970 6520  ssage.chat.type 
-00007a50: 3d3d 2022 7375 7065 7267 726f 7570 223a  == "supergroup":
-00007a60: 0a09 2320 7375 7065 7267 726f 7570 2063  ..# supergroup c
-00007a70: 6861 7420 6d65 7373 6167 650a 0a69 6620  hat message..if 
-00007a80: 6d65 7373 6167 652e 6368 6174 2e74 7970  message.chat.typ
-00007a90: 6520 3d3d 2022 6368 616e 6e65 6c22 3a0a  e == "channel":.
-00007aa0: 0923 2063 6861 6e6e 656c 206d 6573 7361  .# channel messa
-00007ab0: 6765 0a0a 6060 600a 0a23 2323 2048 6f77  ge..```..### How
-00007ac0: 2063 616e 2049 2068 616e 646c 6520 7265   can I handle re
-00007ad0: 6f63 7572 7269 6e67 2043 6f6e 6e65 6374  ocurring Connect
-00007ae0: 696f 6e52 6573 6574 4572 726f 7273 3f0a  ionResetErrors?.
-00007af0: 0a42 6f74 2069 6e73 7461 6e63 6573 2074  .Bot instances t
-00007b00: 6861 7420 7765 7265 2069 646c 6520 666f  hat were idle fo
-00007b10: 7220 6120 6c6f 6e67 2074 696d 6520 6d69  r a long time mi
-00007b20: 6768 7420 6265 2072 656a 6563 7465 6420  ght be rejected 
-00007b30: 6279 2074 6865 2073 6572 7665 7220 7768  by the server wh
-00007b40: 656e 2073 656e 6469 6e67 2061 206d 6573  en sending a mes
-00007b50: 7361 6765 2064 7565 2074 6f20 6120 7469  sage due to a ti
-00007b60: 6d65 6f75 7420 6f66 2074 6865 206c 6173  meout of the las
-00007b70: 7420 7573 6564 2073 6573 7369 6f6e 2e20  t used session. 
-00007b80: 4164 6420 6061 7069 6865 6c70 6572 2e53  Add `apihelper.S
-00007b90: 4553 5349 4f4e 5f54 494d 455f 544f 5f4c  ESSION_TIME_TO_L
-00007ba0: 4956 4520 3d20 3520 2a20 3630 6020 746f  IVE = 5 * 60` to
-00007bb0: 2079 6f75 7220 696e 6974 6961 6c69 7361   your initialisa
-00007bc0: 7469 6f6e 2074 6f20 666f 7263 6520 7265  tion to force re
-00007bd0: 6372 6561 7469 6f6e 2061 6674 6572 2035  creation after 5
-00007be0: 206d 696e 7574 6573 2077 6974 686f 7574   minutes without
-00007bf0: 2061 6e79 2061 6374 6976 6974 792e 200a   any activity. .
-00007c00: 0a23 2320 5468 6520 5465 6c65 6772 616d  .## The Telegram
-00007c10: 2043 6861 7420 4772 6f75 700a 0a47 6574   Chat Group..Get
-00007c20: 2068 656c 702e 2044 6973 6375 7373 2e20   help. Discuss. 
-00007c30: 4368 6174 2e0a 0a2a 204a 6f69 6e20 7468  Chat...* Join th
-00007c40: 6520 5b70 7954 656c 6567 7261 6d42 6f74  e [pyTelegramBot
-00007c50: 4150 4920 5465 6c65 6772 616d 2043 6861  API Telegram Cha
-00007c60: 7420 4772 6f75 705d 2868 7474 7073 3a2f  t Group](https:/
-00007c70: 2f74 656c 6567 7261 6d2e 6d65 2f6a 6f69  /telegram.me/joi
-00007c80: 6e63 6861 742f 426e 3469 786a 3834 4649  nchat/Bn4ixj84FI
-00007c90: 5a56 6b77 686b 326a 6167 3641 290a 090a  ZVkwhk2jag6A)...
-00007ca0: 2323 2054 656c 6567 7261 6d20 4368 616e  ## Telegram Chan
-00007cb0: 6e65 6c0a 0a4a 6f69 6e20 7468 6520 5b4e  nel..Join the [N
-00007cc0: 6577 7320 6368 616e 6e65 6c5d 2868 7474  ews channel](htt
-00007cd0: 7073 3a2f 2f74 2e6d 652f 7079 5465 6c65  ps://t.me/pyTele
-00007ce0: 6772 616d 426f 7441 5049 292e 2048 6572  gramBotAPI). Her
-00007cf0: 6520 7765 2077 696c 6c20 706f 7374 2072  e we will post r
-00007d00: 656c 6561 7365 7320 616e 6420 7570 6461  eleases and upda
-00007d10: 7465 732e 0a09 0a23 2320 4d6f 7265 2065  tes....## More e
-00007d20: 7861 6d70 6c65 730a 0a2a 205b 4563 686f  xamples..* [Echo
-00007d30: 2042 6f74 5d28 6874 7470 733a 2f2f 6769   Bot](https://gi
-00007d40: 7468 7562 2e63 6f6d 2f65 7465 726e 6e6f  thub.com/eternno
-00007d50: 6972 2f70 7954 656c 6567 7261 6d42 6f74  ir/pyTelegramBot
-00007d60: 4150 492f 626c 6f62 2f6d 6173 7465 722f  API/blob/master/
-00007d70: 6578 616d 706c 6573 2f65 6368 6f5f 626f  examples/echo_bo
-00007d80: 742e 7079 290a 2a20 5b44 6565 7020 4c69  t.py).* [Deep Li
-00007d90: 6e6b 696e 675d 2868 7474 7073 3a2f 2f67  nking](https://g
-00007da0: 6974 6875 622e 636f 6d2f 6574 6572 6e6e  ithub.com/eternn
-00007db0: 6f69 722f 7079 5465 6c65 6772 616d 426f  oir/pyTelegramBo
-00007dc0: 7441 5049 2f62 6c6f 622f 6d61 7374 6572  tAPI/blob/master
-00007dd0: 2f65 7861 6d70 6c65 732f 6465 6570 5f6c  /examples/deep_l
-00007de0: 696e 6b69 6e67 2e70 7929 0a2a 205b 6e65  inking.py).* [ne
-00007df0: 7874 5f73 7465 705f 6861 6e64 6c65 7220  xt_step_handler 
-00007e00: 4578 616d 706c 655d 2868 7474 7073 3a2f  Example](https:/
-00007e10: 2f67 6974 6875 622e 636f 6d2f 6574 6572  /github.com/eter
-00007e20: 6e6e 6f69 722f 7079 5465 6c65 6772 616d  nnoir/pyTelegram
-00007e30: 426f 7441 5049 2f62 6c6f 622f 6d61 7374  BotAPI/blob/mast
-00007e40: 6572 2f65 7861 6d70 6c65 732f 7374 6570  er/examples/step
-00007e50: 5f65 7861 6d70 6c65 2e70 7929 0a0a 2323  _example.py)..##
-00007e60: 2043 6f64 6520 5465 6d70 6c61 7465 0a54   Code Template.T
-00007e70: 656d 706c 6174 6520 6973 2061 2072 6561  emplate is a rea
-00007e80: 6479 2066 6f6c 6465 7220 7468 6174 2063  dy folder that c
-00007e90: 6f6e 7461 696e 7320 6172 6368 6974 6563  ontains architec
-00007ea0: 7475 7265 206f 6620 6261 7369 6320 7072  ture of basic pr
-00007eb0: 6f6a 6563 742e 0a48 6572 6520 6172 6520  oject..Here are 
-00007ec0: 736f 6d65 2065 7861 6d70 6c65 7320 6f66  some examples of
-00007ed0: 2074 656d 706c 6174 653a 0a09 0a2a 205b   template:...* [
-00007ee0: 4173 796e 6354 656c 6542 6f74 2074 656d  AsyncTeleBot tem
-00007ef0: 706c 6174 655d 2868 7474 7073 3a2f 2f67  plate](https://g
-00007f00: 6974 6875 622e 636f 6d2f 636f 6465 7232  ithub.com/coder2
-00007f10: 3032 306f 6666 6963 6961 6c2f 6173 796e  020official/asyn
-00007f20: 6374 656c 6562 6f74 5f74 656d 706c 6174  ctelebot_templat
-00007f30: 6529 0a2a 205b 5465 6c65 426f 7420 7465  e).* [TeleBot te
-00007f40: 6d70 6c61 7465 5d28 6874 7470 733a 2f2f  mplate](https://
-00007f50: 6769 7468 7562 2e63 6f6d 2f63 6f64 6572  github.com/coder
-00007f60: 3230 3230 6f66 6669 6369 616c 2f74 656c  2020official/tel
-00007f70: 6562 6f74 5f74 656d 706c 6174 6529 0a09  ebot_template)..
-00007f80: 0a09 0a23 2320 426f 7473 2075 7369 6e67  ...## Bots using
-00007f90: 2074 6869 7320 6c69 6272 6172 790a 2a20   this library.* 
-00007fa0: 5b53 6974 6541 6c65 7274 2062 6f74 5d28  [SiteAlert bot](
-00007fb0: 6874 7470 733a 2f2f 7465 6c65 6772 616d  https://telegram
-00007fc0: 2e6d 652f 5369 7465 416c 6572 745f 626f  .me/SiteAlert_bo
-00007fd0: 7429 2028 5b73 6f75 7263 655d 2868 7474  t) ([source](htt
-00007fe0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00007ff0: 696c 7465 6f6f 6f64 2f53 6974 6541 6c65  ilteoood/SiteAle
-00008000: 7274 2d50 7974 686f 6e29 2920 6279 202a  rt-Python)) by *
-00008010: 696c 7465 6f6f 6f64 2a20 2d20 4d6f 6e69  ilteoood* - Moni
-00008020: 746f 7273 2077 6562 7369 7465 7320 616e  tors websites an
-00008030: 6420 7365 6e64 7320 6120 6e6f 7469 6669  d sends a notifi
-00008040: 6361 7469 6f6e 206f 6e20 6368 616e 6765  cation on change
-00008050: 730a 2a20 5b54 656c 6567 7261 6d4c 6f67  s.* [TelegramLog
-00008060: 6769 6e67 426f 745d 2868 7474 7073 3a2f  gingBot](https:/
-00008070: 2f67 6974 6875 622e 636f 6d2f 6152 616e  /github.com/aRan
-00008080: 646f 6d53 7472 616e 6765 722f 5465 6c65  domStranger/Tele
-00008090: 6772 616d 4c6f 6767 696e 6742 6f74 2920  gramLoggingBot) 
-000080a0: 6279 202a 6152 616e 646f 6d53 7472 616e  by *aRandomStran
-000080b0: 6765 722a 0a2a 205b 5465 6c65 6772 616d  ger*.* [Telegram
-000080c0: 204c 4d47 5446 595f 626f 745d 2868 7474   LMGTFY_bot](htt
-000080d0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-000080e0: 4761 6272 6965 6c52 462f 7465 6c65 6772  GabrielRF/telegr
-000080f0: 616d 2d6c 6d67 7466 795f 626f 7429 2062  am-lmgtfy_bot) b
-00008100: 7920 2a47 6162 7269 656c 5246 2a20 2d20  y *GabrielRF* - 
-00008110: 4c65 7420 6d65 2047 6f6f 676c 6520 7468  Let me Google th
-00008120: 6174 2066 6f72 2079 6f75 2e0a 2a20 5b54  at for you..* [T
-00008130: 656c 6567 7261 6d20 5072 6f78 7920 426f  elegram Proxy Bo
-00008140: 745d 2868 7474 7073 3a2f 2f67 6974 6875  t](https://githu
-00008150: 622e 636f 6d2f 6d72 6769 6761 6279 7465  b.com/mrgigabyte
-00008160: 2f70 726f 7879 626f 7429 2062 7920 2a6d  /proxybot) by *m
-00008170: 7267 6967 6162 7974 652a 200a 2a20 5b52  rgigabyte* .* [R
-00008180: 6164 5265 7472 6f52 6f62 6f74 5d28 6874  adRetroRobot](ht
-00008190: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-000081a0: 2f54 726f 6e69 6b61 7274 2f52 6164 5265  /Tronikart/RadRe
-000081b0: 7472 6f52 6f62 6f74 2920 6279 202a 5472  troRobot) by *Tr
-000081c0: 6f6e 696b 6172 742a 202d 204d 756c 7469  onikart* - Multi
-000081d0: 6675 6e63 7469 6f6e 616c 2054 656c 6567  functional Teleg
-000081e0: 7261 6d20 426f 7420 5261 6452 6574 726f  ram Bot RadRetro
-000081f0: 526f 626f 742e 0a2a 205b 4c65 6167 7565  Robot..* [League
-00008200: 206f 6620 4c65 6765 6e64 7320 626f 745d   of Legends bot]
-00008210: 2868 7474 7073 3a2f 2f74 656c 6567 7261  (https://telegra
-00008220: 6d2e 6d65 2f4c 6561 6775 655f 6f66 5f4c  m.me/League_of_L
-00008230: 6567 656e 6473 5f62 6f74 2920 285b 736f  egends_bot) ([so
-00008240: 7572 6365 5d28 6874 7470 733a 2f2f 6769  urce](https://gi
-00008250: 7468 7562 2e63 6f6d 2f69 3332 726f 7069  thub.com/i32ropi
-00008260: 652f 6c6f 6c29 2920 6279 202a 6933 3272  e/lol)) by *i32r
-00008270: 6f70 6965 2a0a 2a20 5b4e 656f 426f 745d  opie*.* [NeoBot]
-00008280: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-00008290: 636f 6d2f 6e65 6f72 616e 6765 722f 4e65  com/neoranger/Ne
-000082a0: 6f42 6f74 2920 6279 205b 404e 656f 5261  oBot) by [@NeoRa
-000082b0: 6e67 6572 5d28 6874 7470 733a 2f2f 6769  nger](https://gi
-000082c0: 7468 7562 2e63 6f6d 2f6e 656f 7261 6e67  thub.com/neorang
-000082d0: 6572 290a 2a20 5b43 6f6c 6f72 436f 6465  er).* [ColorCode
-000082e0: 426f 745d 2868 7474 7073 3a2f 2f74 2e6d  Bot](https://t.m
-000082f0: 652f 636f 6c6f 7263 6f64 6562 6f74 2920  e/colorcodebot) 
-00008300: 285b 736f 7572 6365 5d28 6874 7470 733a  ([source](https:
-00008310: 2f2f 6769 7468 7562 2e63 6f6d 2f61 6e64  //github.com/and
-00008320: 7964 6563 6c65 7972 652f 636f 6c6f 7263  ydecleyre/colorc
-00008330: 6f64 6562 6f74 2929 202d 2053 6861 7265  odebot)) - Share
-00008340: 2063 6f64 6520 736e 6970 7065 7473 2061   code snippets a
-00008350: 7320 6265 6175 7469 6675 6c6c 7920 7379  s beautifully sy
-00008360: 6e74 6178 2d68 6967 686c 6967 6874 6564  ntax-highlighted
-00008370: 2048 544d 4c20 616e 642f 6f72 2069 6d61   HTML and/or ima
-00008380: 6765 732e 0a2a 205b 436f 6d65 646f 7265  ges..* [Comedore
-00008390: 7355 4752 626f 745d 2868 7474 703a 2f2f  sUGRbot](http://
-000083a0: 7465 6c65 6772 616d 2e6d 652f 436f 6d65  telegram.me/Come
-000083b0: 646f 7265 7355 4752 626f 7429 2028 5b73  doresUGRbot) ([s
-000083c0: 6f75 7263 655d 2868 7474 7073 3a2f 2f67  ource](https://g
-000083d0: 6974 6875 622e 636f 6d2f 616c 656a 616e  ithub.com/alejan
-000083e0: 6472 6f63 712f 436f 6d65 646f 7265 7355  drocq/ComedoresU
-000083f0: 4752 626f 7429 2920 6279 205b 2a61 6c65  GRbot)) by [*ale
-00008400: 6a61 6e64 726f 6371 2a5d 2868 7474 7073  jandrocq*](https
-00008410: 3a2f 2f67 6974 6875 622e 636f 6d2f 616c  ://github.com/al
-00008420: 656a 616e 6472 6f63 7129 202d 2054 656c  ejandrocq) - Tel
-00008430: 6567 7261 6d20 626f 7420 746f 2063 6865  egram bot to che
-00008440: 636b 2074 6865 206d 656e 7520 6f66 2055  ck the menu of U
-00008450: 6e69 7665 7273 6964 6164 2064 6520 4772  niversidad de Gr
-00008460: 616e 6164 6120 6469 6e69 6e67 2068 616c  anada dining hal
-00008470: 6c2e 0a2a 205b 7072 6f78 7962 6f74 5d28  l..* [proxybot](
-00008480: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00008490: 6f6d 2f70 2d68 6173 682f 7072 6f78 7962  om/p-hash/proxyb
-000084a0: 6f74 2920 2d20 5369 6d70 6c65 2050 726f  ot) - Simple Pro
-000084b0: 7879 2042 6f74 2066 6f72 2054 656c 6567  xy Bot for Teleg
-000084c0: 7261 6d2e 2062 7920 702d 6861 7368 0a2a  ram. by p-hash.*
-000084d0: 205b 446f 6e61 6e74 6573 4d61 6c61 6761   [DonantesMalaga
-000084e0: 426f 745d 2868 7474 7073 3a2f 2f67 6974  Bot](https://git
-000084f0: 6875 622e 636f 6d2f 7666 7261 6e63 682f  hub.com/vfranch/
-00008500: 446f 6e61 6e74 6573 4d61 6c61 6761 426f  DonantesMalagaBo
-00008510: 7429 202d 2044 6f6e 616e 7465 734d 616c  t) - DonantesMal
-00008520: 6167 6142 6f74 2066 6163 696c 6974 6174  agaBot facilitat
-00008530: 6573 2069 6e66 6f72 6d61 7469 6f6e 2074  es information t
-00008540: 6f20 4d61 6c61 6761 2062 6c6f 6f64 2064  o Malaga blood d
-00008550: 6f6e 6f72 7320 6162 6f75 7420 7468 6520  onors about the 
-00008560: 706c 6163 6573 2077 6865 7265 2074 6865  places where the
-00008570: 7920 6361 6e20 646f 6e61 7465 2074 6f64  y can donate tod
-00008580: 6179 206f 7220 696e 2074 6865 2069 6e63  ay or in the inc
-00008590: 6f6d 696e 6720 6461 7973 2e20 4974 2061  oming days. It a
-000085a0: 6c73 6f20 7265 636f 7264 7320 7468 6520  lso records the 
-000085b0: 6461 7465 206f 6620 7468 6520 6c61 7374  date of the last
-000085c0: 2064 6f6e 6174 696f 6e20 736f 2074 6861   donation so tha
-000085d0: 7420 6974 2068 656c 7073 2074 6865 2064  t it helps the d
-000085e0: 6f6e 6f72 7320 746f 206b 6e6f 7720 7768  onors to know wh
-000085f0: 656e 2074 6865 7920 6361 6e20 646f 6e61  en they can dona
-00008600: 7465 2061 6761 696e 2e20 2d20 6279 2076  te again. - by v
-00008610: 6672 616e 6368 0a2a 205b 4475 7474 7942  franch.* [DuttyB
-00008620: 6f74 5d28 6874 7470 733a 2f2f 6769 7468  ot](https://gith
-00008630: 7562 2e63 6f6d 2f44 6d79 7472 7969 5374  ub.com/DmytryiSt
-00008640: 7269 6c65 7473 6b79 692f 4475 7474 7942  riletskyi/DuttyB
-00008650: 6f74 2920 6279 202a 446d 7974 7279 6920  ot) by *Dmytryi 
-00008660: 5374 7269 6c65 7473 6b79 692a 202d 2054  Striletskyi* - T
-00008670: 696d 6574 6162 6c65 2066 6f72 206f 6e65  imetable for one
-00008680: 2075 6e69 7665 7273 6974 7920 696e 204b   university in K
-00008690: 6965 762e 0a2a 205b 7761 742d 6272 6964  iev..* [wat-brid
-000086a0: 6765 5d28 6874 7470 733a 2f2f 6769 7468  ge](https://gith
-000086b0: 7562 2e63 6f6d 2f72 6d65 642f 7761 742d  ub.com/rmed/wat-
-000086c0: 6272 6964 6765 2920 6279 205b 2a72 6d65  bridge) by [*rme
-000086d0: 642a 5d28 6874 7470 733a 2f2f 6769 7468  d*](https://gith
-000086e0: 7562 2e63 6f6d 2f72 6d65 6429 202d 2053  ub.com/rmed) - S
-000086f0: 656e 6420 616e 6420 7265 6365 6976 6520  end and receive 
-00008700: 6d65 7373 6167 6573 2074 6f2f 6672 6f6d  messages to/from
-00008710: 2057 6861 7473 4170 7020 7468 726f 7567   WhatsApp throug
-00008720: 6820 5465 6c65 6772 616d 0a2a 205b 6669  h Telegram.* [fi
-00008730: 6c6d 7261 7469 6e67 626f 745d 2868 7474  lmratingbot](htt
-00008740: 703a 2f2f 742e 6d65 2f66 696c 6d72 6174  p://t.me/filmrat
-00008750: 696e 6762 6f74 2928 5b73 6f75 7263 655d  ingbot)([source]
-00008760: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-00008770: 636f 6d2f 6a63 6f6c 6c61 646f 7370 2f66  com/jcolladosp/f
-00008780: 696c 6d2d 7261 7469 6e67 2d62 6f74 2929  ilm-rating-bot))
-00008790: 2062 7920 5b2a 6a63 6f6c 6c61 646f 7370   by [*jcolladosp
-000087a0: 2a5d 2868 7474 7073 3a2f 2f67 6974 6875  *](https://githu
-000087b0: 622e 636f 6d2f 6a63 6f6c 6c61 646f 7370  b.com/jcolladosp
-000087c0: 2920 2d20 5465 6c65 6772 616d 2062 6f74  ) - Telegram bot
-000087d0: 2075 7369 6e67 2074 6865 2050 7974 686f   using the Pytho
-000087e0: 6e20 4150 4920 7468 6174 2067 6574 7320  n API that gets 
-000087f0: 6669 6c6d 7320 7261 7469 6e67 2066 726f  films rating fro
-00008800: 6d20 494d 4462 2061 6e64 206d 6574 6163  m IMDb and metac
-00008810: 7269 7469 630a 2a20 5b53 656e 6432 4b69  ritic.* [Send2Ki
-00008820: 6e64 6c65 626f 745d 2868 7474 703a 2f2f  ndlebot](http://
-00008830: 742e 6d65 2f53 656e 6432 4b69 6e64 6c65  t.me/Send2Kindle
-00008840: 426f 7429 2028 5b73 6f75 7263 655d 2868  Bot) ([source](h
-00008850: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00008860: 6d2f 4761 6272 6965 6c52 462f 5365 6e64  m/GabrielRF/Send
-00008870: 324b 696e 646c 6542 6f74 2929 2062 7920  2KindleBot)) by 
-00008880: 2a47 6162 7269 656c 5246 2a20 2d20 5365  *GabrielRF* - Se
-00008890: 6e64 2074 6f20 4b69 6e64 6c65 2073 6572  nd to Kindle ser
-000088a0: 7669 6365 2e0a 2a20 5b52 6173 7472 6569  vice..* [Rastrei
-000088b0: 6f42 6f74 5d28 6874 7470 3a2f 2f74 2e6d  oBot](http://t.m
-000088c0: 652f 5261 7374 7265 696f 426f 7429 2028  e/RastreioBot) (
-000088d0: 5b73 6f75 7263 655d 2868 7474 7073 3a2f  [source](https:/
-000088e0: 2f67 6974 6875 622e 636f 6d2f 4761 6272  /github.com/Gabr
-000088f0: 6965 6c52 462f 5261 7374 7265 696f 426f  ielRF/RastreioBo
-00008900: 7429 2920 6279 202a 4761 6272 6965 6c52  t)) by *GabrielR
-00008910: 462a 202d 2042 6f74 2075 7365 6420 746f  F* - Bot used to
-00008920: 2074 7261 636b 2070 6163 6b61 6765 7320   track packages 
-00008930: 6f6e 2074 6865 2042 7261 7a69 6c69 616e  on the Brazilian
-00008940: 204d 6169 6c20 5365 7276 6963 652e 0a2a   Mail Service..*
-00008950: 205b 5370 6275 3455 426f 745d 2868 7474   [Spbu4UBot](htt
-00008960: 703a 2f2f 742e 6d65 2f53 7062 7534 5542  p://t.me/Spbu4UB
-00008970: 6f74 2928 5b6c 696e 6b5d 2868 7474 7073  ot)([link](https
-00008980: 3a2f 2f67 6974 6875 622e 636f 6d2f 4565  ://github.com/Ee
-00008990: 4f6e 6544 6f77 6e2f 7370 6275 3475 2929  OneDown/spbu4u))
-000089a0: 2062 7920 2a45 654f 6e65 446f 776e 2a20   by *EeOneDown* 
-000089b0: 2d20 426f 7420 7769 7468 2074 696d 6574  - Bot with timet
-000089c0: 6162 6c65 7320 666f 7220 5350 6255 2073  ables for SPbU s
-000089d0: 7475 6465 6e74 732e 0a2a 205b 536d 6172  tudents..* [Smar
-000089e0: 7479 5342 6f74 5d28 6874 7470 3a2f 2f74  tySBot](http://t
-000089f0: 2e6d 652f 5a44 555f 626f 7429 285b 6c69  .me/ZDU_bot)([li
-00008a00: 6e6b 5d28 6874 7470 733a 2f2f 6769 7468  nk](https://gith
-00008a10: 7562 2e63 6f6d 2f30 7856 4b2f 536d 6172  ub.com/0xVK/Smar
-00008a20: 7479 5342 6f74 2929 2062 7920 2a30 7856  tySBot)) by *0xV
-00008a30: 4b2a 202d 2054 656c 6567 7261 6d20 7469  K* - Telegram ti
-00008a40: 6d65 7461 626c 6520 626f 742c 2066 6f72  metable bot, for
-00008a50: 205a 6879 746f 6d79 7220 4976 616e 2046   Zhytomyr Ivan F
-00008a60: 7261 6e6b 6f20 5374 6174 6520 556e 6976  ranko State Univ
-00008a70: 6572 7369 7479 2073 7475 6465 6e74 732e  ersity students.
-00008a80: 0a2a 205b 4c65 6172 6e49 745d 2868 7474  .* [LearnIt](htt
-00008a90: 7073 3a2f 2f74 2e6d 652f 4c65 6172 6e49  ps://t.me/LearnI
-00008aa0: 7462 6f74 2928 5b6c 696e 6b5d 2868 7474  tbot)([link](htt
-00008ab0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00008ac0: 7469 6167 6f6e 6170 6f6c 692f 4c65 6172  tiagonapoli/Lear
-00008ad0: 6e49 7429 2920 2d20 4120 5465 6c65 6772  nIt)) - A Telegr
-00008ae0: 616d 2042 6f74 2063 7265 6174 6564 2074  am Bot created t
-00008af0: 6f20 6865 6c70 2070 656f 706c 6520 746f  o help people to
-00008b00: 206d 656d 6f72 697a 6520 6f74 6865 7220   memorize other 
-00008b10: 6c61 6e67 7561 6765 73e2 8099 2076 6f63  languages... voc
-00008b20: 6162 756c 6172 792e 0a2a 205b 426f 742d  abulary..* [Bot-
-00008b30: 5465 6c65 6772 616d 2d53 686f 6461 6e20  Telegram-Shodan 
-00008b40: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
-00008b50: 2e63 6f6d 2f72 7562 656e 6c65 6f6e 2f42  .com/rubenleon/B
-00008b60: 6f74 2d54 656c 6567 7261 6d2d 5368 6f64  ot-Telegram-Shod
-00008b70: 616e 2920 6279 205b 7275 6265 6e6c 656f  an) by [rubenleo
-00008b80: 6e5d 2868 7474 7073 3a2f 2f67 6974 6875  n](https://githu
-00008b90: 622e 636f 6d2f 7275 6265 6e6c 656f 6e29  b.com/rubenleon)
-00008ba0: 0a2a 205b 5669 676f 4275 7354 656c 6567  .* [VigoBusTeleg
-00008bb0: 7261 6d42 6f74 5d28 6874 7470 733a 2f2f  ramBot](https://
-00008bc0: 742e 6d65 2f76 6967 6f62 7573 626f 7429  t.me/vigobusbot)
-00008bd0: 2028 5b47 6974 4875 625d 2868 7474 7073   ([GitHub](https
-00008be0: 3a2f 2f67 6974 6875 622e 636f 6d2f 5079  ://github.com/Py
-00008bf0: 7468 6f6e 6569 726f 2f56 6967 6f42 7573  thoneiro/VigoBus
-00008c00: 2d54 656c 6567 7261 6d42 6f74 2929 202d  -TelegramBot)) -
-00008c10: 2042 6f74 2074 6861 7420 7072 6f76 6964   Bot that provid
-00008c20: 6573 2062 7573 6573 2063 6f6d 696e 6720  es buses coming 
-00008c30: 746f 2061 2063 6572 7461 696e 2073 746f  to a certain sto
-00008c40: 7020 616e 6420 7468 6569 7220 7265 6d61  p and their rema
-00008c50: 696e 696e 6720 7469 6d65 2066 6f72 2074  ining time for t
-00008c60: 6865 2063 6974 7920 6f66 2056 6967 6f20  he city of Vigo 
-00008c70: 2847 616c 6963 6961 202d 2053 7061 696e  (Galicia - Spain
-00008c80: 290a 2a20 5b6b 6169 7368 6e69 6b2d 626f  ).* [kaishnik-bo
-00008c90: 745d 2868 7474 7073 3a2f 2f74 2e6d 652f  t](https://t.me/
-00008ca0: 6b61 6973 686e 696b 5f62 6f74 2920 285b  kaishnik_bot) ([
-00008cb0: 736f 7572 6365 5d28 6874 7470 733a 2f2f  source](https://
-00008cc0: 6769 7468 7562 2e63 6f6d 2f61 6972 6174  github.com/airat
-00008cd0: 6b2f 6b61 6973 686e 696b 2d62 6f74 2929  k/kaishnik-bot))
-00008ce0: 2062 7920 2a61 6972 6174 6b2a 202d 2062   by *airatk* - b
-00008cf0: 6f74 2077 6869 6368 2073 686f 7773 2061  ot which shows a
-00008d00: 6c6c 2074 6865 206e 6563 6573 7361 7279  ll the necessary
-00008d10: 2069 6e66 6f72 6d61 7469 6f6e 2074 6f20   information to 
-00008d20: 4b4e 5452 552d 4b41 4920 7374 7564 656e  KNTRU-KAI studen
-00008d30: 7473 2e0a 2a20 5b52 6f62 6269 655d 2868  ts..* [Robbie](h
-00008d40: 7474 7073 3a2f 2f74 2e6d 652f 726f 6d64  ttps://t.me/romd
-00008d50: 656c 6976 6572 7962 6f74 2920 285b 736f  eliverybot) ([so
-00008d60: 7572 6365 5d28 6874 7470 733a 2f2f 6769  urce](https://gi
-00008d70: 7468 7562 2e63 6f6d 2f46 6163 754d 2f72  thub.com/FacuM/r
-00008d80: 6f6d 6465 6c69 7665 7279 626f 745f 7375  omdeliverybot_su
-00008d90: 7070 6f72 7429 2920 6279 2040 4661 6375  pport)) by @Facu
-00008da0: 4d20 2d20 5375 7070 6f72 7420 5465 6c65  M - Support Tele
-00008db0: 6772 616d 2062 6f74 2066 6f72 2064 6576  gram bot for dev
-00008dc0: 656c 6f70 6572 7320 616e 6420 6d61 696e  elopers and main
-00008dd0: 7461 696e 6572 732e 0a2a 205b 4173 6164  tainers..* [Asad
-00008de0: 6f76 426f 745d 2868 7474 7073 3a2f 2f74  ovBot](https://t
-00008df0: 2e6d 652f 6173 6164 6f76 5f62 6f74 2920  .me/asadov_bot) 
-00008e00: 285b 736f 7572 6365 5d28 6874 7470 733a  ([source](https:
-00008e10: 2f2f 6769 7468 7562 2e63 6f6d 2f64 6573  //github.com/des
-00008e20: 6578 6369 6c65 2f42 6f74 4170 6929 2920  excile/BotApi)) 
-00008e30: 6279 2040 4465 7345 7863 696c 6520 2d20  by @DesExcile - 
-00008e40: d0a1 6174 616c 6f67 206f 6620 706f 656d  ..atalog of poem
-00008e50: 7320 6279 2045 6475 6172 6420 4173 6164  s by Eduard Asad
-00008e60: 6f76 2e0a 2a20 5b74 6865 7361 7572 7573  ov..* [thesaurus
-00008e70: 5f63 6f6d 5f62 6f74 5d28 6874 7470 733a  _com_bot](https:
-00008e80: 2f2f 742e 6d65 2f74 6865 7361 7572 7573  //t.me/thesaurus
-00008e90: 5f63 6f6d 5f62 6f74 2920 285b 736f 7572  _com_bot) ([sour
-00008ea0: 6365 5d28 6874 7470 733a 2f2f 6769 7468  ce](https://gith
-00008eb0: 7562 2e63 6f6d 2f4c 656f 5376 616c 6f76  ub.com/LeoSvalov
-00008ec0: 2f77 6f72 6473 2d69 2d6c 6561 726e 2d62  /words-i-learn-b
-00008ed0: 6f74 2929 2062 7920 404c 656f 5376 616c  ot)) by @LeoSval
-00008ee0: 6f76 202d 2077 6f72 6473 2061 6e64 2073  ov - words and s
-00008ef0: 796e 6f6e 796d 7320 6672 6f6d 205b 6469  ynonyms from [di
-00008f00: 6374 696f 6e61 7279 2e63 6f6d 5d28 6874  ctionary.com](ht
-00008f10: 7470 733a 2f2f 7777 772e 6469 6374 696f  tps://www.dictio
-00008f20: 6e61 7279 2e63 6f6d 2920 616e 6420 5b74  nary.com) and [t
-00008f30: 6865 7361 7572 7573 2e63 6f6d 5d28 6874  hesaurus.com](ht
-00008f40: 7470 733a 2f2f 7777 772e 7468 6573 6175  tps://www.thesau
-00008f50: 7275 732e 636f 6d29 2069 6e20 7468 6520  rus.com) in the 
-00008f60: 7465 6c65 6772 616d 2e0a 2a20 5b49 6e66  telegram..* [Inf
-00008f70: 6f42 6f74 5d28 6874 7470 733a 2f2f 742e  oBot](https://t.
-00008f80: 6d65 2f69 6e66 6f32 3031 395f 626f 7429  me/info2019_bot)
-00008f90: 2028 5b73 6f75 7263 655d 2868 7474 7073   ([source](https
-00008fa0: 3a2f 2f67 6974 6875 622e 636f 6d2f 6972  ://github.com/ir
-00008fb0: 6576 656e 6b6f 2f69 6e66 6f2d 626f 7429  evenko/info-bot)
-00008fc0: 2920 6279 2040 6972 6576 656e 6b6f 202d  ) by @irevenko -
-00008fd0: 2041 6e20 616c 6c2d 726f 756e 6420 626f   An all-round bo
-00008fe0: 7420 7468 6174 2064 6973 706c 6179 7320  t that displays 
-00008ff0: 736f 6d65 2073 7461 7469 7374 6963 7320  some statistics 
-00009000: 2877 6561 7468 6572 2c20 7469 6d65 2c20  (weather, time, 
-00009010: 6372 7970 746f 2065 7463 2e2e 2e29 0a2a  crypto etc...).*
-00009020: 205b 466f 6f64 426f 745d 2868 7474 7073   [FoodBot](https
-00009030: 3a2f 2f74 2e6d 652f 4368 656e 736f 6e55  ://t.me/ChensonU
-00009040: 7a5f 626f 7429 2028 5b73 6f75 7263 655d  z_bot) ([source]
-00009050: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-00009060: 636f 6d2f 466c 6965 676f 2f6f 6c64 5f72  com/Fliego/old_r
-00009070: 6573 7461 7572 616e 745f 7465 6c65 6772  estaurant_telegr
-00009080: 616d 5f63 6861 7462 6f74 2929 2062 7920  am_chatbot)) by 
-00009090: 4046 6c69 6567 6f20 2d20 6120 7369 6d70  @Fliego - a simp
-000090a0: 6c65 2062 6f74 2066 6f72 2066 6f6f 6420  le bot for food 
-000090b0: 6f72 6465 7269 6e67 0a2a 205b 5370 6f72  ordering.* [Spor
-000090c0: 7479 5d28 6874 7470 733a 2f2f 742e 6d65  ty](https://t.me
-000090d0: 2f53 706f 7274 7964 426f 7429 2028 5b73  /SportydBot) ([s
-000090e0: 6f75 7263 655d 2868 7474 7073 3a2f 2f67  ource](https://g
-000090f0: 6974 6875 622e 636f 6d2f 3078 6e75 2f73  ithub.com/0xnu/s
-00009100: 706f 7274 7929 2920 6279 2040 3078 6e75  porty)) by @0xnu
-00009110: 202d 2054 656c 6567 7261 6d20 626f 7420   - Telegram bot 
-00009120: 666f 7220 6469 7370 6c61 7969 6e67 2074  for displaying t
-00009130: 6865 206c 6174 6573 7420 6e65 7773 2c20  he latest news, 
-00009140: 7370 6f72 7473 2073 6368 6564 756c 6573  sports schedules
-00009150: 2061 6e64 2069 6e6a 7572 7920 7570 6461   and injury upda
-00009160: 7465 732e 0a2a 205b 4a6f 696e 4772 6f75  tes..* [JoinGrou
-00009170: 7020 5369 6c65 6e63 6572 2042 6f74 5d28  p Silencer Bot](
-00009180: 6874 7470 733a 2f2f 742e 6d65 2f6a 6f69  https://t.me/joi
-00009190: 6e67 726f 7570 5f73 696c 656e 6365 725f  ngroup_silencer_
-000091a0: 626f 7429 2028 5b73 6f75 7263 655d 2868  bot) ([source](h
-000091b0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-000091c0: 6d2f 7a65 7068 3139 3937 2f54 656c 6567  m/zeph1997/Teleg
-000091d0: 7261 6d2d 4772 6f75 702d 5369 6c65 6e63  ram-Group-Silenc
-000091e0: 6572 2d42 6f74 2929 2062 7920 5b40 7a65  er-Bot)) by [@ze
-000091f0: 7068 3139 3937 5d28 6874 7470 733a 2f2f  ph1997](https://
-00009200: 6769 7468 7562 2e63 6f6d 2f7a 6570 6831  github.com/zeph1
-00009210: 3939 3729 202d 2041 2054 656c 6567 7261  997) - A Telegra
-00009220: 6d20 426f 7420 746f 2072 656d 6f76 6520  m Bot to remove 
-00009230: 226a 6f69 6e20 6772 6f75 7022 2061 6e64  "join group" and
-00009240: 2022 7265 6d6f 7665 6420 6672 6f6d 2067   "removed from g
-00009250: 726f 7570 2220 6e6f 7469 6669 6361 7469  roup" notificati
-00009260: 6f6e 732e 0a2a 205b 5461 736b 734c 6973  ons..* [TasksLis
-00009270: 7473 426f 745d 2868 7474 7073 3a2f 2f74  tsBot](https://t
-00009280: 2e6d 652f 5461 736b 734c 6973 7473 426f  .me/TasksListsBo
-00009290: 7429 2028 5b73 6f75 7263 655d 2868 7474  t) ([source](htt
-000092a0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-000092b0: 5061 626c 6f2d 4461 7669 6c61 2f54 6173  Pablo-Davila/Tas
-000092c0: 6b73 4c69 7374 7342 6f74 2929 2062 7920  ksListsBot)) by 
-000092d0: 5b40 5061 626c 6f2d 4461 7669 6c61 5d28  [@Pablo-Davila](
-000092e0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-000092f0: 6f6d 2f50 6162 6c6f 2d44 6176 696c 6129  om/Pablo-Davila)
-00009300: 202d 2041 2028 7461 736b 7329 206c 6973   - A (tasks) lis
-00009310: 7473 206d 616e 6167 6572 2062 6f74 2066  ts manager bot f
-00009320: 6f72 2054 656c 6567 7261 6d2e 0a2a 205b  or Telegram..* [
-00009330: 4d79 456c 697a 6150 7379 6368 6f6c 6f67  MyElizaPsycholog
-00009340: 6973 7442 6f74 5d28 6874 7470 733a 2f2f  istBot](https://
-00009350: 742e 6d65 2f54 6173 6b73 4c69 7374 7342  t.me/TasksListsB
-00009360: 6f74 2920 285b 736f 7572 6365 5d28 6874  ot) ([source](ht
-00009370: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00009380: 2f50 6162 6c6f 2d44 6176 696c 612f 4d79  /Pablo-Davila/My
-00009390: 456c 697a 6150 7379 6368 6f6c 6f67 6973  ElizaPsychologis
-000093a0: 7442 6f74 2929 2062 7920 5b40 5061 626c  tBot)) by [@Pabl
-000093b0: 6f2d 4461 7669 6c61 5d28 6874 7470 733a  o-Davila](https:
-000093c0: 2f2f 6769 7468 7562 2e63 6f6d 2f50 6162  //github.com/Pab
-000093d0: 6c6f 2d44 6176 696c 6129 202d 2041 6e20  lo-Davila) - An 
-000093e0: 696d 706c 656d 656e 7461 7469 6f6e 206f  implementation o
-000093f0: 6620 7468 6520 6661 6d6f 7573 2045 6c69  f the famous Eli
-00009400: 7a61 2070 7379 6368 6f6c 6f67 6973 7420  za psychologist 
-00009410: 6368 6174 626f 742e 0a2a 205b 4672 6373  chatbot..* [Frcs
-00009420: 7462 6f74 5d28 6874 7470 733a 2f2f 742e  tbot](https://t.
-00009430: 6d65 2f66 7263 7374 626f 7429 2028 5b73  me/frcstbot) ([s
-00009440: 6f75 7263 655d 2868 7474 7073 3a2f 2f67  ource](https://g
-00009450: 6974 6875 622e 636f 6d2f 4d72 7371 642f  ithub.com/Mrsqd/
-00009460: 6672 6373 7462 6f74 5f70 7562 6c69 6329  frcstbot_public)
-00009470: 2920 6279 205b 4d72 7371 645d 2868 7474  ) by [Mrsqd](htt
-00009480: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00009490: 4d72 7371 6429 2e20 4120 5465 6c65 6772  Mrsqd). A Telegr
-000094a0: 616d 2062 6f74 2074 6861 7420 7769 6c6c  am bot that will
-000094b0: 2061 6c77 6179 7320 6265 2068 6170 7079   always be happy
-000094c0: 2074 6f20 7368 6f77 2079 6f75 2074 6865   to show you the
-000094d0: 2077 6561 7468 6572 2066 6f72 6563 6173   weather forecas
-000094e0: 742e 0a2a 205b 4d69 6e65 4772 616d 426f  t..* [MineGramBo
-000094f0: 745d 2868 7474 7073 3a2f 2f67 6974 6875  t](https://githu
-00009500: 622e 636f 6d2f 4d6f 6469 7363 6846 6162  b.com/ModischFab
-00009510: 7269 6361 7469 6f6e 732f 4d69 6e65 4772  rications/MineGr
-00009520: 616d 426f 7429 2062 7920 5b4d 6f64 6973  amBot) by [Modis
-00009530: 6368 4661 6272 6963 6174 696f 6e73 5d28  chFabrications](
-00009540: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00009550: 6f6d 2f4d 6f64 6973 6368 4661 6272 6963  om/ModischFabric
-00009560: 6174 696f 6e73 292e 2054 6869 7320 626f  ations). This bo
-00009570: 7420 6361 6e20 7374 6172 742c 2073 746f  t can start, sto
-00009580: 7020 616e 6420 6d6f 6e69 746f 7220 6120  p and monitor a 
-00009590: 6d69 6e65 6372 6166 7420 7365 7276 6572  minecraft server
-000095a0: 2e0a 2a20 5b54 6162 6c65 746f 7020 4469  ..* [Tabletop Di
-000095b0: 6365 426f 745d 2868 7474 7073 3a2f 2f67  ceBot](https://g
-000095c0: 6974 6875 622e 636f 6d2f 6465 7870 6970  ithub.com/dexpip
-000095d0: 6572 2f74 6162 6c65 746f 7064 6963 6562  er/tabletopdiceb
-000095e0: 6f74 2920 6279 205b 6465 7870 6970 6572  ot) by [dexpiper
-000095f0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
-00009600: 2e63 6f6d 2f64 6578 7069 7065 7229 2e20  .com/dexpiper). 
-00009610: 5468 6973 2062 6f74 2063 616e 2072 6f6c  This bot can rol
-00009620: 6c20 6d75 6c74 6970 6c65 2064 6963 6573  l multiple dices
-00009630: 2066 6f72 2052 5047 2d6c 696b 6520 6761   for RPG-like ga
-00009640: 6d65 732c 2061 6464 2070 6f73 6974 6976  mes, add positiv
-00009650: 6520 616e 6420 6e65 6761 7469 7665 206d  e and negative m
-00009660: 6f64 6966 6965 7273 2061 6e64 2073 686f  odifiers and sho
-00009670: 7720 7368 6f72 7420 6465 7363 7269 7074  w short descript
-00009680: 696f 6e73 2074 6f20 7468 6520 726f 6c6c  ions to the roll
-00009690: 732e 0a2a 205b 4261 726e 616d 654b 6f6e  s..* [BarnameKon
-000096a0: 5d28 6874 7470 733a 2f2f 742e 6d65 2f42  ](https://t.me/B
-000096b0: 6172 6e61 6d65 4b6f 6e42 6f74 2920 6279  arnameKonBot) by
-000096c0: 205b 416e 7661 6172 695d 2868 7474 7073   [Anvaari](https
-000096d0: 3a2f 2f67 6974 6875 622e 636f 6d2f 616e  ://github.com/an
-000096e0: 7661 6172 6929 2e20 5468 6973 2042 6f74  vaari). This Bot
-000096f0: 206d 616b 6520 2241 6464 2074 6f20 676f   make "Add to go
-00009700: 6f67 6c65 2063 616c 656e 6461 7222 206c  ogle calendar" l
-00009710: 696e 6b20 666f 7220 796f 7572 2065 7665  ink for your eve
-00009720: 6e74 732e 2049 7420 6769 7665 2069 6e66  nts. It give inf
-00009730: 6f72 6d61 7469 6f6e 2061 626f 7574 2065  ormation about e
-00009740: 7665 6e74 2061 6e64 2072 6574 7572 6e20  vent and return 
-00009750: 6c69 6e6b 2e20 4974 2077 6f72 6b20 666f  link. It work fo
-00009760: 7220 4a61 6c61 6c69 2063 616c 656e 6461  r Jalali calenda
-00009770: 7220 616e 6420 696e 2054 6568 7261 6e20  r and in Tehran 
-00009780: 5469 6d65 2e20 5b53 6f75 7263 6520 636f  Time. [Source co
-00009790: 6465 5d28 6874 7470 733a 2f2f 6769 7468  de](https://gith
-000097a0: 7562 2e63 6f6d 2f61 6e76 6161 7269 2f42  ub.com/anvaari/B
-000097b0: 6172 6e61 6d65 4b6f 6e29 0a2a 205b 5472  arnameKon).* [Tr
-000097c0: 616e 736c 6174 6f72 2062 6f74 5d28 6874  anslator bot](ht
-000097d0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-000097e0: 2f41 5245 4547 3934 4641 4841 442f 7472  /AREEG94FAHAD/tr
-000097f0: 616e 736c 6174 655f 7465 7874 5f62 6f74  anslate_text_bot
-00009800: 2920 6279 2041 7265 6567 2046 6168 6164  ) by Areeg Fahad
-00009810: 2e20 5468 6973 2062 6f74 2063 616e 2062  . This bot can b
-00009820: 6520 7573 6564 2074 6f20 7472 616e 736c  e used to transl
-00009830: 6174 6520 7465 7874 732e 200a 2a20 5b44  ate texts. .* [D
-00009840: 6967 6974 616c 2043 7279 7074 6f63 7572  igital Cryptocur
-00009850: 7265 6e63 7920 626f 745d 2868 7474 7073  rency bot](https
-00009860: 3a2f 2f67 6974 6875 622e 636f 6d2f 4152  ://github.com/AR
-00009870: 4545 4739 3446 4148 4144 2f63 7572 7265  EEG94FAHAD/curre
-00009880: 6e63 6965 735f 626f 7429 2062 7920 4172  ncies_bot) by Ar
-00009890: 6565 6720 4661 6861 642e 2057 6974 6820  eeg Fahad. With 
-000098a0: 7468 6973 2062 6f74 2c20 796f 7520 6361  this bot, you ca
-000098b0: 6e20 6e6f 7720 6d6f 6e69 746f 7220 7468  n now monitor th
-000098c0: 6520 7072 6963 6573 206f 6620 6d6f 7265  e prices of more
-000098d0: 2074 6861 6e20 3132 2064 6967 6974 616c   than 12 digital
-000098e0: 2043 7279 7074 6f63 7572 7265 6e63 792e   Cryptocurrency.
-000098f0: 200a 2a20 5b41 6e74 692d 5472 6163 6b69   .* [Anti-Tracki
-00009900: 6e67 2042 6f74 5d28 6874 7470 733a 2f2f  ng Bot](https://
-00009910: 742e 6d65 2f41 6e74 6954 7261 636b 696e  t.me/AntiTrackin
-00009920: 6742 6f74 2920 6279 204c 656f 6e20 4865  gBot) by Leon He
-00009930: 6573 7320 5b28 736f 7572 6365 295d 2868  ess [(source)](h
-00009940: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00009950: 6d2f 6c65 6f6e 6865 6573 732f 416e 7469  m/leonheess/Anti
-00009960: 5472 6163 6b69 6e67 426f 7429 2e20 5365  TrackingBot). Se
-00009970: 6e64 2061 6e79 206c 696e 6b2c 2061 6e64  nd any link, and
-00009980: 2074 6865 2062 6f74 2074 7269 6573 2069   the bot tries i
-00009990: 7473 2062 6573 7420 746f 2072 656d 6f76  ts best to remov
-000099a0: 6520 616c 6c20 7472 6163 6b69 6e67 2066  e all tracking f
-000099b0: 726f 6d20 7468 6520 6c69 6e6b 2079 6f75  rom the link you
-000099c0: 2073 656e 742e 0a2a 205b 4465 7665 6c6f   sent..* [Develo
-000099d0: 7065 7220 426f 745d 2868 7474 7073 3a2f  per Bot](https:/
-000099e0: 2f74 2e6d 652f 496e 6444 6576 656c 6f70  /t.me/IndDevelop
-000099f0: 6572 5f62 6f74 2920 6279 205b 5669 7368  er_bot) by [Vish
-00009a00: 616c 2053 696e 6768 5d28 6874 7470 733a  al Singh](https:
-00009a10: 2f2f 6769 7468 7562 2e63 6f6d 2f76 6973  //github.com/vis
-00009a20: 6861 6c32 3337 3629 205b 2873 6f75 7263  hal2376) [(sourc
-00009a30: 6520 636f 6465 295d 2868 7474 7073 3a2f  e code)](https:/
-00009a40: 2f67 6974 6875 622e 636f 6d2f 7669 7368  /github.com/vish
-00009a50: 616c 3233 3736 2f74 656c 6567 7261 6d2d  al2376/telegram-
-00009a60: 626f 7429 2054 6869 7320 7465 6c65 6772  bot) This telegr
-00009a70: 616d 2062 6f74 2063 616e 2064 6f20 7461  am bot can do ta
-00009a80: 736b 7320 6c69 6b65 2047 6974 4875 6220  sks like GitHub 
-00009a90: 7365 6172 6368 2026 2063 6c6f 6e65 2c70  search & clone,p
-00009aa0: 726f 7669 6465 2063 2b2b 206c 6561 726e  rovide c++ learn
-00009ab0: 696e 6720 7265 736f 7572 6365 7320 2c53  ing resources ,S
-00009ac0: 7461 636b 6f76 6572 666c 6f77 2073 6561  tackoverflow sea
-00009ad0: 7263 682c 2043 6f64 6566 6f72 6365 7328  rch, Codeforces(
-00009ae0: 7072 6f66 696c 6520 7669 7375 616c 697a  profile visualiz
-00009af0: 6572 2c72 616e 646f 6d20 7072 6f62 6c65  er,random proble
-00009b00: 6d73 290a 2a20 5b6f 6e65 4950 4f20 626f  ms).* [oneIPO bo
-00009b10: 745d 2868 7474 7073 3a2f 2f67 6974 6875  t](https://githu
-00009b20: 622e 636f 6d2f 6161 6469 7479 6132 3230  b.com/aaditya220
-00009b30: 302f 4950 4f2d 7072 6f6a 2920 6279 205b  0/IPO-proj) by [
-00009b40: 4161 6469 7468 7961 5d28 6874 7470 733a  Aadithya](https:
-00009b50: 2f2f 6769 7468 7562 2e63 6f6d 2f61 6164  //github.com/aad
-00009b60: 6974 7961 3232 3030 2920 2620 5b41 6d6f  itya2200) & [Amo
-00009b70: 6c20 536f 616e 735d 2868 7474 7073 3a2f  l Soans](https:/
-00009b80: 2f67 6974 6875 622e 636f 6d2f 416d 6f6c  /github.com/Amol
-00009b90: 4465 7269 636b 536f 616e 7329 2054 6869  DerickSoans) Thi
-00009ba0: 7320 5465 6c65 6772 616d 2062 6f74 2070  s Telegram bot p
-00009bb0: 726f 7669 6465 7320 6c69 7665 2075 7064  rovides live upd
-00009bc0: 6174 6573 202c 2064 6174 6120 616e 6420  ates , data and 
-00009bd0: 646f 6375 6d65 6e74 7320 6f6e 2063 7572  documents on cur
-00009be0: 7265 6e74 2061 6e64 2075 7063 6f6d 696e  rent and upcomin
-00009bf0: 6720 4950 4f73 2849 6e69 7469 616c 2050  g IPOs(Initial P
-00009c00: 7562 6c69 6320 4f66 6665 7269 6e67 7329  ublic Offerings)
-00009c10: 200a 2a20 5b43 6f72 6f6e 6147 7261 7068   .* [CoronaGraph
-00009c20: 7342 6f74 5d28 6874 7470 733a 2f2f 742e  sBot](https://t.
-00009c30: 6d65 2f43 6f76 6964 4772 6170 685f 626f  me/CovidGraph_bo
-00009c40: 7429 2028 5b73 6f75 7263 655d 2868 7474  t) ([source](htt
-00009c50: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00009c60: 5472 6576 6f72 5769 6e73 7472 616c 2f43  TrevorWinstral/C
-00009c70: 6f72 6f6e 6147 7261 7068 7342 6f74 2929  oronaGraphsBot))
-00009c80: 2062 7920 2a54 7265 766f 7257 696e 7374   by *TrevorWinst
-00009c90: 7261 6c2a 202d 2047 6574 7320 6c69 7665  ral* - Gets live
-00009ca0: 2043 4f56 4944 2043 6f75 6e74 7279 2064   COVID Country d
-00009cb0: 6174 612c 2070 6c6f 7473 2069 742c 2061  ata, plots it, a
-00009cc0: 6e64 2062 7269 6566 7320 7468 6520 7573  nd briefs the us
-00009cd0: 6572 0a2a 205b 4554 484c 6563 7475 7265  er.* [ETHLecture
-00009ce0: 426f 745d 2868 7474 7073 3a2f 2f74 2e6d  Bot](https://t.m
-00009cf0: 652f 4554 484c 6563 7475 7265 426f 7429  e/ETHLectureBot)
-00009d00: 2028 5b73 6f75 7263 655d 2868 7474 7073   ([source](https
-00009d10: 3a2f 2f67 6974 6875 622e 636f 6d2f 5472  ://github.com/Tr
-00009d20: 6576 6f72 5769 6e73 7472 616c 2f45 5448  evorWinstral/ETH
-00009d30: 4c65 6374 7572 6542 6f74 2929 2062 7920  LectureBot)) by 
-00009d40: 2a54 7265 766f 7257 696e 7374 7261 6c2a  *TrevorWinstral*
-00009d50: 202d 204e 6f74 6966 6965 7320 4554 4820   - Notifies ETH 
-00009d60: 7374 7564 656e 7473 2077 6865 6e20 7468  students when th
-00009d70: 6569 7220 6c65 6374 7572 6573 2068 6176  eir lectures hav
-00009d80: 6520 6265 656e 2075 706c 6f61 6465 640a  e been uploaded.
-00009d90: 2a20 5b56 6c75 6e20 4669 6e64 6572 2042  * [Vlun Finder B
-00009da0: 6f74 5d28 6874 7470 733a 2f2f 6769 7468  ot](https://gith
-00009db0: 7562 2e63 6f6d 2f72 6573 696e 7072 6f74  ub.com/resinprot
-00009dc0: 6569 6e32 3333 332f 566c 756e 2d46 696e  ein2333/Vlun-Fin
-00009dd0: 6465 722d 626f 7429 2062 7920 5b52 6573  der-bot) by [Res
-00009de0: 696e 7072 6f74 6569 6e32 3333 335d 2868  inprotein2333](h
-00009df0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00009e00: 6d2f 7265 7369 6e70 726f 7465 696e 3233  m/resinprotein23
-00009e10: 3333 292e 2054 6869 7320 626f 7420 6361  33). This bot ca
-00009e20: 6e20 6865 6c70 2079 6f75 2074 6f20 6669  n help you to fi
-00009e30: 6e64 2054 6865 2069 6e66 6f72 6d61 7469  nd The informati
-00009e40: 6f6e 206f 6620 4356 4520 7675 6c6e 6572  on of CVE vulner
-00009e50: 6162 696c 6974 6965 732e 0a2a 205b 4554  abilities..* [ET
-00009e60: 4847 6173 4665 6554 7261 636b 6572 426f  HGasFeeTrackerBo
-00009e70: 745d 2868 7474 7073 3a2f 2f74 2e6d 652f  t](https://t.me/
-00009e80: 4554 4847 6173 4665 6554 7261 636b 6572  ETHGasFeeTracker
-00009e90: 426f 7429 2028 5b53 6f75 7263 655d 2868  Bot) ([Source](h
-00009ea0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00009eb0: 6d2f 4465 7641 6476 696b 2f45 5448 4761  m/DevAdvik/ETHGa
-00009ec0: 7346 6565 5472 6163 6b65 7242 6f74 5d29  sFeeTrackerBot])
-00009ed0: 2062 7920 2a44 6576 4164 7669 6b2a 202d   by *DevAdvik* -
-00009ee0: 2047 6574 204c 6976 6520 4574 6865 7265   Get Live Ethere
-00009ef0: 756d 2047 6173 2046 6565 7320 696e 2047  um Gas Fees in G
-00009f00: 5745 490a 2a20 5b47 6f6f 676c 6520 5368  WEI.* [Google Sh
-00009f10: 6565 7420 426f 745d 2868 7474 7073 3a2f  eet Bot](https:/
-00009f20: 2f67 6974 6875 622e 636f 6d2f 4a6f 6163  /github.com/Joac
-00009f30: 6869 6d53 7461 6e69 736c 6175 732f 5465  himStanislaus/Te
-00009f40: 6c65 5f53 6865 6574 5f62 6f74 2920 6279  le_Sheet_bot) by
-00009f50: 205b 4a6f 6163 6869 6d53 7461 6e69 736c   [JoachimStanisl
-00009f60: 6175 735d 2868 7474 7073 3a2f 2f67 6974  aus](https://git
-00009f70: 6875 622e 636f 6d2f 4a6f 6163 6869 6d53  hub.com/JoachimS
-00009f80: 7461 6e69 736c 6175 7329 2e20 5468 6973  tanislaus). This
-00009f90: 2062 6f74 2063 616e 2068 656c 7020 796f   bot can help yo
-00009fa0: 7520 746f 2074 7261 636b 2079 6f75 7220  u to track your 
-00009fb0: 6578 7065 6e73 6573 2062 7920 7570 6c6f  expenses by uplo
-00009fc0: 6164 696e 6720 796f 7572 2062 6f74 2065  ading your bot e
-00009fd0: 6e74 7269 6573 2074 6f20 796f 7572 2067  ntries to your g
-00009fe0: 6f6f 676c 6520 7368 6565 742e 0a2a 205b  oogle sheet..* [
-00009ff0: 4772 616e 6451 7569 7a20 426f 745d 2868  GrandQuiz Bot](h
-0000a000: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0000a010: 6d2f 4361 726c 6f73 6d61 372f 5446 4d2d  m/Carlosma7/TFM-
-0000a020: 4772 616e 6451 7569 7a29 2062 7920 5b43  GrandQuiz) by [C
-0000a030: 6172 6c6f 736d 6137 5d28 6874 7470 733a  arlosma7](https:
-0000a040: 2f2f 6769 7468 7562 2e63 6f6d 2f43 6172  //github.com/Car
-0000a050: 6c6f 736d 6137 292e 2054 6869 7320 626f  losma7). This bo
-0000a060: 7420 6973 2061 2074 7269 7669 6120 6761  t is a trivia ga
-0000a070: 6d65 2074 6861 7420 616c 6c6f 7773 2079  me that allows y
-0000a080: 6f75 2074 6f20 706c 6179 2077 6974 6820  ou to play with 
-0000a090: 7065 6f70 6c65 2066 726f 6d20 6469 6666  people from diff
-0000a0a0: 6572 656e 7420 6167 6573 2e20 5468 6973  erent ages. This
-0000a0b0: 2070 726f 6a65 6374 2061 6464 7265 7373   project address
-0000a0c0: 6573 2074 6865 2075 7365 206f 6620 6120  es the use of a 
-0000a0d0: 7379 7374 656d 2074 6872 6f75 6768 2063  system through c
-0000a0e0: 6861 7462 6f74 7320 746f 2063 6172 7279  hatbots to carry
-0000a0f0: 206f 7574 2061 2073 6f63 6961 6c20 616e   out a social an
-0000a100: 6420 696e 7465 7267 656e 6572 6174 696f  d intergeneratio
-0000a110: 6e61 6c20 6761 6d65 2061 7320 616e 2061  nal game as an a
-0000a120: 6c74 6572 6e61 7469 7665 2074 6f20 7472  lternative to tr
-0000a130: 6164 6974 696f 6e61 6c20 6761 6d65 2064  aditional game d
-0000a140: 6576 656c 6f70 6d65 6e74 2e0a 2a20 5b44  evelopment..* [D
-0000a150: 6963 6369 6f6e 6172 696f 2064 6520 6c61  iccionario de la
-0000a160: 2052 4145 5d28 6874 7470 733a 2f2f 742e   RAE](https://t.
-0000a170: 6d65 2f64 6c65 7261 6562 6f74 2920 285b  me/dleraebot) ([
-0000a180: 736f 7572 6365 5d28 6874 7470 733a 2f2f  source](https://
-0000a190: 6769 7468 7562 2e63 6f6d 2f73 7475 6465  github.com/stude
-0000a1a0: 6e74 656e 6865 727a 2f64 6c65 7261 6562  ntenherz/dleraeb
-0000a1b0: 6f74 2929 2054 6869 7320 626f 7420 6c65  ot)) This bot le
-0000a1c0: 7473 2079 6f75 2066 696e 6420 6469 6669  ts you find difi
-0000a1d0: 6e69 7469 6f6e 7320 6f66 2077 6f72 6473  nitions of words
-0000a1e0: 2069 6e20 5370 616e 6973 6820 7573 696e   in Spanish usin
-0000a1f0: 6720 5b52 4145 2773 2064 6963 7469 6f6e  g [RAE's diction
-0000a200: 6172 795d 2868 7474 7073 3a2f 2f64 6c65  ary](https://dle
-0000a210: 2e72 6165 2e65 732f 292e 2049 7420 6665  .rae.es/). It fe
-0000a220: 6174 7572 6573 2064 6972 6563 7420 6d65  atures direct me
-0000a230: 7373 6167 6520 616e 6420 696e 6c69 6e65  ssage and inline
-0000a240: 2073 6561 7263 682e 0a2a 205b 7265 6d6f   search..* [remo
-0000a250: 7465 5465 6c65 6772 616d 5368 656c 6c5d  teTelegramShell]
-0000a260: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-0000a270: 636f 6d2f 456e 7269 7175 654d 6f72 616e  com/EnriqueMoran
-0000a280: 2f72 656d 6f74 6554 656c 6567 7261 6d53  /remoteTelegramS
-0000a290: 6865 6c6c 2920 6279 205b 456e 7269 7175  hell) by [Enriqu
-0000a2a0: 654d 6f72 616e 5d28 6874 7470 733a 2f2f  eMoran](https://
-0000a2b0: 6769 7468 7562 2e63 6f6d 2f45 6e72 6971  github.com/Enriq
-0000a2c0: 7565 4d6f 7261 6e29 2e20 436f 6e74 726f  ueMoran). Contro
-0000a2d0: 6c20 796f 7572 204c 696e 7578 4f53 2063  l your LinuxOS c
-0000a2e0: 6f6d 7075 7465 7220 7468 726f 7567 6820  omputer through 
-0000a2f0: 5465 6c65 6772 616d 2e0a 2a20 5b50 7966  Telegram..* [Pyf
-0000a300: 7261 6d2d 7465 6c65 6772 616d 2d62 6f74  ram-telegram-bot
-0000a310: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
-0000a320: 2e63 6f6d 2f73 6b65 6c6c 7933 372f 7079  .com/skelly37/py
-0000a330: 6672 616d 2d74 656c 6567 7261 6d2d 626f  fram-telegram-bo
-0000a340: 7429 2051 7565 7279 2077 6f6c 6672 616d  t) Query wolfram
-0000a350: 616c 7068 612e 636f 6d20 616e 6420 6d61  alpha.com and ma
-0000a360: 6b65 2075 7365 206f 6620 6974 7320 4150  ke use of its AP
-0000a370: 4920 7468 726f 7567 6820 5465 6c65 6772  I through Telegr
-0000a380: 616d 2e0a 2a20 5b54 7261 6e73 6c61 7465  am..* [Translate
-0000a390: 5468 6973 5669 6465 6f42 6f74 5d28 6874  ThisVideoBot](ht
-0000a3a0: 7470 733a 2f2f 6769 746c 6162 2e63 6f6d  tps://gitlab.com
-0000a3b0: 2f57 7565 7266 656c 4465 762f 7472 616e  /WuerfelDev/tran
-0000a3c0: 736c 6174 6574 6869 7376 6964 656f 2920  slatethisvideo) 
-0000a3d0: 5468 6973 2042 6f74 2063 616e 2075 6e64  This Bot can und
-0000a3e0: 6572 7374 616e 6420 7370 6f6b 656e 2074  erstand spoken t
-0000a3f0: 6578 7420 696e 2076 6964 656f 7320 616e  ext in videos an
-0000a400: 6420 7472 616e 736c 6174 6520 6974 2074  d translate it t
-0000a410: 6f20 456e 676c 6973 680a 2a20 5b5a 7970  o English.* [Zyp
-0000a420: 7265 7861 5d28 6874 7470 733a 2f2f 742e  rexa](https://t.
-0000a430: 6d65 2f6d 6174 6865 6d61 7468 6963 7342  me/mathemathicsB
-0000a440: 6f74 2920 285b 736f 7572 6365 5d28 6874  ot) ([source](ht
-0000a450: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-0000a460: 2f61 7469 6635 2f7a 7970 7265 7861 2929  /atif5/zyprexa))
-0000a470: 205a 7970 7265 7861 2063 616e 2073 6f6c   Zyprexa can sol
-0000a480: 7665 2c20 6865 6c70 2079 6f75 2073 6f6c  ve, help you sol
-0000a490: 7665 2061 6e79 206d 6174 6865 6d61 7469  ve any mathemati
-0000a4a0: 6361 6c20 7072 6f62 6c65 6d20 796f 7520  cal problem you 
-0000a4b0: 656e 636f 756e 7465 7220 616e 6420 636f  encounter and co
-0000a4c0: 6e76 6572 7420 796f 7572 2072 6567 756c  nvert your regul
-0000a4d0: 6172 206d 6174 6865 6d61 7469 6361 6c20  ar mathematical 
-0000a4e0: 6578 7072 6573 7369 6f6e 7320 696e 746f  expressions into
-0000a4f0: 2062 6561 7574 6966 756c 2069 6d61 6765   beautiful image
-0000a500: 7279 2075 7369 6e67 204c 6154 6558 2e0a  ry using LaTeX..
-0000a510: 2a20 5b42 696e 636f 6465 2d74 656c 6567  * [Bincode-teleg
-0000a520: 7261 6d2d 626f 745d 2868 7474 7073 3a2f  ram-bot](https:/
-0000a530: 2f67 6974 6875 622e 636f 6d2f 7475 7368  /github.com/tush
-0000a540: 6172 6865 726f 2f62 696e 636f 6465 2d74  arhero/bincode-t
-0000a550: 656c 6567 7261 6d2d 626f 7429 2062 7920  elegram-bot) by 
-0000a560: 5b74 7573 6861 7268 6572 6f5d 2868 7474  [tusharhero](htt
-0000a570: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-0000a580: 7475 7368 6172 6865 726f 2920 2d20 4d61  tusharhero) - Ma
-0000a590: 6b65 7320 5b62 696e 636f 6465 735d 2868  kes [bincodes](h
-0000a5a0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0000a5b0: 6d2f 7475 7368 6172 6865 726f 2f62 696e  m/tusharhero/bin
-0000a5c0: 636f 6465 2920 6672 6f6d 2074 6578 7420  code) from text 
-0000a5d0: 7072 6f76 6964 6573 2061 6e64 2061 6c73  provides and als
-0000a5e0: 6f20 636f 6e76 6572 7473 2074 6865 6d20  o converts them 
-0000a5f0: 6261 636b 2074 6f20 7465 7874 2e0a 2a20  back to text..* 
-0000a600: 5b68 7964 726f 6c69 625f 626f 745d 2868  [hydrolib_bot](h
-0000a610: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0000a620: 6d2f 4d61 7973 6f6e 3930 2f68 7964 726f  m/Mayson90/hydro
-0000a630: 6c69 625f 626f 7429 2054 6f6f 6c73 6574  lib_bot) Toolset
-0000a640: 2066 6f72 2048 7964 726f 7068 696c 6961   for Hydrophilia
-0000a650: 2074 6162 6c65 746f 7020 6761 6d65 2028   tabletop game (
-0000a660: 6761 6d65 2063 6172 6473 2c20 7275 6c65  game cards, rule
-0000a670: 732c 2073 7472 7563 7475 7265 2e2e 2e29  s, structure...)
-0000a680: 2e0a 2a20 5b47 7567 756d 6f65 2d62 6f74  ..* [Gugumoe-bot
-0000a690: 5d28 6874 7470 3a2f 2f74 2e6d 652f 6775  ](http://t.me/gu
-0000a6a0: 6775 6d6f 655f 626f 7429 2028 5b73 6f75  gumoe_bot) ([sou
-0000a6b0: 7263 655d 2868 7474 7073 3a2f 2f67 6974  rce](https://git
-0000a6c0: 6875 622e 636f 6d2f 476f 6f47 754a 6961  hub.com/GooGuJia
-0000a6d0: 6e67 2f47 7567 756d 6f65 2d62 6f74 2929  ng/Gugumoe-bot))
-0000a6e0: 2062 7920 5be5 9295 e8b0 b7e9 85b1 5d28   by [.........](
-0000a6f0: 6874 7470 733a 2f2f 676d 6f65 2e63 6329  https://gmoe.cc)
-0000a700: 2047 7558 6961 6f4a 6961 6e67 2069 7320   GuXiaoJiang is 
-0000a710: 6120 6d75 6c74 692d 6675 6e63 7469 6f6e  a multi-function
-0000a720: 616c 2072 6f62 6f74 2c20 7375 6368 2061  al robot, such a
-0000a730: 7320 4f53 5520 6761 6d65 2069 6e66 6f72  s OSU game infor
-0000a740: 6d61 7469 6f6e 2071 7565 7279 2c20 4950  mation query, IP
-0000a750: 2074 6573 742c 2061 6e69 6d61 7469 6f6e   test, animation
-0000a760: 2073 6372 6565 6e73 686f 7420 7365 6172   screenshot sear
-0000a770: 6368 2061 6e64 206f 7468 6572 2066 756e  ch and other fun
-0000a780: 6374 696f 6e73 2e0a 2a20 5b46 6565 6462  ctions..* [Feedb
-0000a790: 6163 6b2d 626f 745d 2868 7474 7073 3a2f  ack-bot](https:/
-0000a7a0: 2f67 6974 6875 622e 636f 6d2f 636f 6465  /github.com/code
-0000a7b0: 7232 3032 306f 6666 6963 6961 6c2f 6665  r2020official/fe
-0000a7c0: 6564 6261 636b 626f 7429 2041 2066 6565  edbackbot) A fee
-0000a7d0: 6462 6163 6b20 626f 7420 666f 7220 7573  dback bot for us
-0000a7e0: 6572 2d61 646d 696e 2063 6f6d 6d75 6e69  er-admin communi
-0000a7f0: 6361 7469 6f6e 2e20 4d61 6465 206f 6e20  cation. Made on 
-0000a800: 4173 796e 6354 656c 6542 6f74 2c20 7573  AsyncTeleBot, us
-0000a810: 696e 6720 5b74 656d 706c 6174 655d 2868  ing [template](h
-0000a820: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0000a830: 6d2f 636f 6465 7232 3032 306f 6666 6963  m/coder2020offic
-0000a840: 6961 6c2f 6173 796e 6374 656c 6562 6f74  ial/asynctelebot
-0000a850: 5f74 656d 706c 6174 6529 2e0a 2a20 5b54  _template)..* [T
-0000a860: 656c 6553 6572 765d 2868 7474 7073 3a2f  eleServ](https:/
-0000a870: 2f67 6974 6875 622e 636f 6d2f 6162 6c61  /github.com/abla
-0000a880: 6b65 6c79 2f54 656c 6553 6572 7629 2062  kely/TeleServ) b
-0000a890: 7920 5b61 626c 616b 656c 795d 2868 7474  y [ablakely](htt
-0000a8a0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-0000a8b0: 6162 6c61 6b65 6c79 2920 5468 6973 2069  ablakely) This i
-0000a8c0: 7320 6120 5465 6c65 6772 616d 2074 6f20  s a Telegram to 
-0000a8d0: 4952 4320 6272 6964 6765 2077 6869 6368  IRC bridge which
-0000a8e0: 206c 696e 6b73 2061 7320 616e 2049 5243   links as an IRC
-0000a8f0: 2073 6572 7665 7220 616e 6420 6d61 6b65   server and make
-0000a900: 7320 5465 6c65 6772 616d 2075 7365 7273  s Telegram users
-0000a910: 2061 7070 6561 7220 6173 206e 6174 6976   appear as nativ
-0000a920: 6520 4952 4320 7573 6572 732e 0a2a 205b  e IRC users..* [
-0000a930: 5369 6d70 6c65 2053 746f 7265 2042 6f74  Simple Store Bot
-0000a940: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
-0000a950: 2e63 6f6d 2f41 6e74 6f6e 476c 797a 696e  .com/AntonGlyzin
-0000a960: 2f6d 7973 686f 7062 6f74 2920 6279 205b  /myshopbot) by [
-0000a970: 416e 746f 6e20 476c 797a 696e 5d28 6874  Anton Glyzin](ht
-0000a980: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-0000a990: 2f41 6e74 6f6e 476c 797a 696e 2920 5468  /AntonGlyzin) Th
-0000a9a0: 6973 2069 7320 6120 7369 6d70 6c65 2074  is is a simple t
-0000a9b0: 656c 6567 7261 6d2d 7374 6f72 6520 7769  elegram-store wi
-0000a9c0: 7468 2061 6e20 6164 6d69 6e20 7061 6e65  th an admin pane
-0000a9d0: 6c2e 2044 6573 6967 6e65 6420 6163 636f  l. Designed acco
-0000a9e0: 7264 696e 6720 746f 2061 2074 656d 706c  rding to a templ
-0000a9f0: 6174 652e 0a0a 2a2a 5761 6e74 2074 6f20  ate...**Want to 
-0000aa00: 6861 7665 2079 6f75 7220 626f 7420 6c69  have your bot li
-0000aa10: 7374 6564 2068 6572 653f 204a 7573 7420  sted here? Just 
-0000aa20: 6d61 6b65 2061 2070 756c 6c20 7265 7175  make a pull requ
-0000aa30: 6573 742e 204f 6e6c 7920 626f 7473 2077  est. Only bots w
-0000aa40: 6974 6820 7075 626c 6963 2073 6f75 7263  ith public sourc
-0000aa50: 6520 636f 6465 2061 7265 2061 6363 6570  e code are accep
-0000aa60: 7465 642e 2a2a 0a                        ted.**.
+00000000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
+00000010: 3a20 322e 310d 0a4e 616d 653a 2070 7954  : 2.1..Name: pyT
+00000020: 656c 6567 7261 6d42 6f74 4150 490d 0a56  elegramBotAPI..V
+00000030: 6572 7369 6f6e 3a20 342e 392e 300d 0a53  ersion: 4.9.0..S
+00000040: 756d 6d61 7279 3a20 5079 7468 6f6e 2054  ummary: Python T
+00000050: 656c 6567 7261 6d20 626f 7420 6170 692e  elegram bot api.
+00000060: 200d 0a48 6f6d 652d 7061 6765 3a20 6874   ..Home-page: ht
+00000070: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00000080: 2f65 7465 726e 6e6f 6972 2f70 7954 656c  /eternnoir/pyTel
+00000090: 6567 7261 6d42 6f74 4150 490d 0a41 7574  egramBotAPI..Aut
+000000a0: 686f 723a 2065 7465 726e 6e6f 6972 0d0a  hor: eternnoir..
+000000b0: 4175 7468 6f72 2d65 6d61 696c 3a20 6574  Author-email: et
+000000c0: 6572 6e6e 6f69 7240 676d 6169 6c2e 636f  ernnoir@gmail.co
+000000d0: 6d0d 0a4c 6963 656e 7365 3a20 4750 4c32  m..License: GPL2
+000000e0: 0d0a 4b65 7977 6f72 6473 3a20 7465 6c65  ..Keywords: tele
+000000f0: 6772 616d 2062 6f74 2061 7069 2074 6f6f  gram bot api too
+00000100: 6c73 0d0a 436c 6173 7369 6669 6572 3a20  ls..Classifier: 
+00000110: 4465 7665 6c6f 706d 656e 7420 5374 6174  Development Stat
+00000120: 7573 203a 3a20 3520 2d20 5072 6f64 7563  us :: 5 - Produc
+00000130: 7469 6f6e 2f53 7461 626c 650d 0a43 6c61  tion/Stable..Cla
+00000140: 7373 6966 6965 723a 2050 726f 6772 616d  ssifier: Program
+00000150: 6d69 6e67 204c 616e 6775 6167 6520 3a3a  ming Language ::
+00000160: 2050 7974 686f 6e20 3a3a 2033 0d0a 436c   Python :: 3..Cl
+00000170: 6173 7369 6669 6572 3a20 456e 7669 726f  assifier: Enviro
+00000180: 6e6d 656e 7420 3a3a 2043 6f6e 736f 6c65  nment :: Console
+00000190: 0d0a 436c 6173 7369 6669 6572 3a20 4c69  ..Classifier: Li
+000001a0: 6365 6e73 6520 3a3a 204f 5349 2041 7070  cense :: OSI App
+000001b0: 726f 7665 6420 3a3a 2047 4e55 2047 656e  roved :: GNU Gen
+000001c0: 6572 616c 2050 7562 6c69 6320 4c69 6365  eral Public Lice
+000001d0: 6e73 6520 7632 2028 4750 4c76 3229 0d0a  nse v2 (GPLv2)..
+000001e0: 4465 7363 7269 7074 696f 6e2d 436f 6e74  Description-Cont
+000001f0: 656e 742d 5479 7065 3a20 7465 7874 2f6d  ent-Type: text/m
+00000200: 6172 6b64 6f77 6e0d 0a50 726f 7669 6465  arkdown..Provide
+00000210: 732d 4578 7472 613a 206a 736f 6e0d 0a50  s-Extra: json..P
+00000220: 726f 7669 6465 732d 4578 7472 613a 2050  rovides-Extra: P
+00000230: 494c 0d0a 5072 6f76 6964 6573 2d45 7874  IL..Provides-Ext
+00000240: 7261 3a20 7265 6469 730d 0a50 726f 7669  ra: redis..Provi
+00000250: 6465 732d 4578 7472 613a 2061 696f 7265  des-Extra: aiore
+00000260: 6469 730d 0a50 726f 7669 6465 732d 4578  dis..Provides-Ex
+00000270: 7472 613a 2061 696f 6874 7470 0d0a 5072  tra: aiohttp..Pr
+00000280: 6f76 6964 6573 2d45 7874 7261 3a20 6661  ovides-Extra: fa
+00000290: 7374 6170 690d 0a50 726f 7669 6465 732d  stapi..Provides-
+000002a0: 4578 7472 613a 2075 7669 636f 726e 0d0a  Extra: uvicorn..
+000002b0: 5072 6f76 6964 6573 2d45 7874 7261 3a20  Provides-Extra: 
+000002c0: 7073 7574 696c 0d0a 5072 6f76 6964 6573  psutil..Provides
+000002d0: 2d45 7874 7261 3a20 636f 6c6f 7265 646c  -Extra: coloredl
+000002e0: 6f67 730d 0a50 726f 7669 6465 732d 4578  ogs..Provides-Ex
+000002f0: 7472 613a 2077 6174 6368 646f 670d 0a4c  tra: watchdog..L
+00000300: 6963 656e 7365 2d46 696c 653a 204c 4943  icense-File: LIC
+00000310: 454e 5345 0d0a 0d0a 0d0a 5b21 5b50 7950  ENSE......[![PyP
+00000320: 6920 5061 636b 6167 6520 5665 7273 696f  i Package Versio
+00000330: 6e5d 2868 7474 7073 3a2f 2f69 6d67 2e73  n](https://img.s
+00000340: 6869 656c 6473 2e69 6f2f 7079 7069 2f76  hields.io/pypi/v
+00000350: 2f70 7954 656c 6567 7261 6d42 6f74 4150  /pyTelegramBotAP
+00000360: 492e 7376 6729 5d28 6874 7470 733a 2f2f  I.svg)](https://
+00000370: 7079 7069 2e70 7974 686f 6e2e 6f72 672f  pypi.python.org/
+00000380: 7079 7069 2f70 7954 656c 6567 7261 6d42  pypi/pyTelegramB
+00000390: 6f74 4150 4929 0d0a 5b21 5b53 7570 706f  otAPI)..[![Suppo
+000003a0: 7274 6564 2050 7974 686f 6e20 7665 7273  rted Python vers
+000003b0: 696f 6e73 5d28 6874 7470 733a 2f2f 696d  ions](https://im
+000003c0: 672e 7368 6965 6c64 732e 696f 2f70 7970  g.shields.io/pyp
+000003d0: 692f 7079 7665 7273 696f 6e73 2f70 7954  i/pyversions/pyT
+000003e0: 656c 6567 7261 6d42 6f74 4150 492e 7376  elegramBotAPI.sv
+000003f0: 6729 5d28 6874 7470 733a 2f2f 7079 7069  g)](https://pypi
+00000400: 2e70 7974 686f 6e2e 6f72 672f 7079 7069  .python.org/pypi
+00000410: 2f70 7954 656c 6567 7261 6d42 6f74 4150  /pyTelegramBotAP
+00000420: 4929 0d0a 5b21 5b44 6f63 756d 656e 7461  I)..[![Documenta
+00000430: 7469 6f6e 2053 7461 7475 735d 2868 7474  tion Status](htt
+00000440: 7073 3a2f 2f72 6561 6474 6865 646f 6373  ps://readthedocs
+00000450: 2e6f 7267 2f70 726f 6a65 6374 732f 7079  .org/projects/py
+00000460: 7462 612f 6261 6467 652f 3f76 6572 7369  tba/badge/?versi
+00000470: 6f6e 3d6c 6174 6573 7429 5d28 6874 7470  on=latest)](http
+00000480: 733a 2f2f 7079 7462 612e 7265 6164 7468  s://pytba.readth
+00000490: 6564 6f63 732e 696f 2f65 6e2f 6c61 7465  edocs.io/en/late
+000004a0: 7374 2f3f 6261 6467 653d 6c61 7465 7374  st/?badge=latest
+000004b0: 290d 0a5b 215b 4275 696c 6420 5374 6174  )..[![Build Stat
+000004c0: 7573 5d28 6874 7470 733a 2f2f 7472 6176  us](https://trav
+000004d0: 6973 2d63 692e 6f72 672f 6574 6572 6e6e  is-ci.org/eternn
+000004e0: 6f69 722f 7079 5465 6c65 6772 616d 426f  oir/pyTelegramBo
+000004f0: 7441 5049 2e73 7667 3f62 7261 6e63 683d  tAPI.svg?branch=
+00000500: 6d61 7374 6572 295d 2868 7474 7073 3a2f  master)](https:/
+00000510: 2f74 7261 7669 732d 6369 2e6f 7267 2f65  /travis-ci.org/e
+00000520: 7465 726e 6e6f 6972 2f70 7954 656c 6567  ternnoir/pyTeleg
+00000530: 7261 6d42 6f74 4150 4929 0d0a 5b21 5b50  ramBotAPI)..[![P
+00000540: 7950 6920 646f 776e 6c6f 6164 735d 2868  yPi downloads](h
+00000550: 7474 7073 3a2f 2f69 6d67 2e73 6869 656c  ttps://img.shiel
+00000560: 6473 2e69 6f2f 7079 7069 2f64 6d2f 7079  ds.io/pypi/dm/py
+00000570: 5465 6c65 6772 616d 426f 7441 5049 2e73  TelegramBotAPI.s
+00000580: 7667 295d 2868 7474 7073 3a2f 2f70 7970  vg)](https://pyp
+00000590: 692e 6f72 672f 7072 6f6a 6563 742f 7079  i.org/project/py
+000005a0: 5465 6c65 6772 616d 426f 7441 5049 2f29  TelegramBotAPI/)
+000005b0: 0d0a 5b21 5b50 7950 6920 7374 6174 7573  ..[![PyPi status
+000005c0: 5d28 6874 7470 733a 2f2f 696d 672e 7368  ](https://img.sh
+000005d0: 6965 6c64 732e 696f 2f70 7970 692f 7374  ields.io/pypi/st
+000005e0: 6174 7573 2f70 7974 656c 6567 7261 6d62  atus/pytelegramb
+000005f0: 6f74 6170 692e 7376 673f 7374 796c 653d  otapi.svg?style=
+00000600: 666c 6174 2d73 7175 6172 6529 5d28 6874  flat-square)](ht
+00000610: 7470 733a 2f2f 7079 7069 2e70 7974 686f  tps://pypi.pytho
+00000620: 6e2e 6f72 672f 7079 7069 2f70 7974 656c  n.org/pypi/pytel
+00000630: 6567 7261 6d62 6f74 6170 6929 0d0a 0d0a  egrambotapi)....
+00000640: 2320 3c70 2061 6c69 676e 3d22 6365 6e74  # <p align="cent
+00000650: 6572 223e 7079 5465 6c65 6772 616d 426f  er">pyTelegramBo
+00000660: 7441 5049 0d0a 0d0a 3c70 2061 6c69 676e  tAPI....<p align
+00000670: 3d22 6365 6e74 6572 223e 4120 7369 6d70  ="center">A simp
+00000680: 6c65 2c20 6275 7420 6578 7465 6e73 6962  le, but extensib
+00000690: 6c65 2050 7974 686f 6e20 696d 706c 656d  le Python implem
+000006a0: 656e 7461 7469 6f6e 2066 6f72 2074 6865  entation for the
+000006b0: 203c 6120 6872 6566 3d22 6874 7470 733a   <a href="https:
+000006c0: 2f2f 636f 7265 2e74 656c 6567 7261 6d2e  //core.telegram.
+000006d0: 6f72 672f 626f 7473 2f61 7069 223e 5465  org/bots/api">Te
+000006e0: 6c65 6772 616d 2042 6f74 2041 5049 3c2f  legram Bot API</
+000006f0: 613e 2e3c 2f70 3e0d 0a3c 7020 616c 6967  a>.</p>..<p alig
+00000700: 6e3d 2263 656e 7465 7222 3e42 6f74 6820  n="center">Both 
+00000710: 7379 6e63 6872 6f6e 6f75 7320 616e 6420  synchronous and 
+00000720: 6173 796e 6368 726f 6e6f 7573 2e3c 2f70  asynchronous.</p
+00000730: 3e0d 0a0d 0a23 2320 3c70 2061 6c69 676e  >....## <p align
+00000740: 3d22 6365 6e74 6572 223e 5375 7070 6f72  ="center">Suppor
+00000750: 7465 6420 426f 7420 4150 4920 7665 7273  ted Bot API vers
+00000760: 696f 6e3a 203c 6120 6872 6566 3d22 6874  ion: <a href="ht
+00000770: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+00000780: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+00000790: 2364 6563 656d 6265 722d 3330 2d32 3032  #december-30-202
+000007a0: 3222 3e36 2e34 3c2f 613e 210d 0a0d 0a3c  2">6.4</a>!....<
+000007b0: 6832 3e3c 6120 6872 6566 3d27 6874 7470  h2><a href='http
+000007c0: 733a 2f2f 7079 7462 612e 7265 6164 7468  s://pytba.readth
+000007d0: 6564 6f63 732e 696f 2f65 6e2f 6c61 7465  edocs.io/en/late
+000007e0: 7374 2f69 6e64 6578 2e68 746d 6c27 3e4f  st/index.html'>O
+000007f0: 6666 6963 6961 6c20 646f 6375 6d65 6e74  fficial document
+00000800: 6174 696f 6e3c 2f61 3e3c 2f68 323e 0d0a  ation</a></h2>..
+00000810: 090d 0a23 2320 436f 6e74 656e 7473 0d0a  ...## Contents..
+00000820: 0d0a 2020 2a20 5b47 6574 7469 6e67 2073  ..  * [Getting s
+00000830: 7461 7274 6564 5d28 2367 6574 7469 6e67  tarted](#getting
+00000840: 2d73 7461 7274 6564 290d 0a20 202a 205b  -started)..  * [
+00000850: 5772 6974 696e 6720 796f 7572 2066 6972  Writing your fir
+00000860: 7374 2062 6f74 5d28 2377 7269 7469 6e67  st bot](#writing
+00000870: 2d79 6f75 722d 6669 7273 742d 626f 7429  -your-first-bot)
+00000880: 0d0a 2020 2020 2a20 5b50 7265 7265 7175  ..    * [Prerequ
+00000890: 6973 6974 6573 5d28 2370 7265 7265 7175  isites](#prerequ
+000008a0: 6973 6974 6573 290d 0a20 2020 202a 205b  isites)..    * [
+000008b0: 4120 7369 6d70 6c65 2065 6368 6f20 626f  A simple echo bo
+000008c0: 745d 2823 612d 7369 6d70 6c65 2d65 6368  t](#a-simple-ech
+000008d0: 6f2d 626f 7429 0d0a 2020 2a20 5b47 656e  o-bot)..  * [Gen
+000008e0: 6572 616c 2041 5049 2044 6f63 756d 656e  eral API Documen
+000008f0: 7461 7469 6f6e 5d28 2367 656e 6572 616c  tation](#general
+00000900: 2d61 7069 2d64 6f63 756d 656e 7461 7469  -api-documentati
+00000910: 6f6e 290d 0a20 2020 202a 205b 5479 7065  on)..    * [Type
+00000920: 735d 2823 7479 7065 7329 0d0a 2020 2020  s](#types)..    
+00000930: 2a20 5b4d 6574 686f 6473 5d28 236d 6574  * [Methods](#met
+00000940: 686f 6473 290d 0a20 2020 202a 205b 4765  hods)..    * [Ge
+00000950: 6e65 7261 6c20 7573 6520 6f66 2074 6865  neral use of the
+00000960: 2041 5049 5d28 2367 656e 6572 616c 2d75   API](#general-u
+00000970: 7365 2d6f 662d 7468 652d 6170 6929 0d0a  se-of-the-api)..
+00000980: 2020 2020 2020 2a20 5b4d 6573 7361 6765        * [Message
+00000990: 2068 616e 646c 6572 735d 2823 6d65 7373   handlers](#mess
+000009a0: 6167 652d 6861 6e64 6c65 7273 290d 0a20  age-handlers).. 
+000009b0: 2020 2020 202a 205b 4564 6974 6564 204d       * [Edited M
+000009c0: 6573 7361 6765 2068 616e 646c 6572 5d28  essage handler](
+000009d0: 2365 6469 7465 642d 6d65 7373 6167 652d  #edited-message-
+000009e0: 6861 6e64 6c65 7229 0d0a 2020 2020 2020  handler)..      
+000009f0: 2a20 5b43 6861 6e6e 656c 2050 6f73 7420  * [Channel Post 
+00000a00: 6861 6e64 6c65 725d 2823 6368 616e 6e65  handler](#channe
+00000a10: 6c2d 706f 7374 2d68 616e 646c 6572 290d  l-post-handler).
+00000a20: 0a20 2020 2020 202a 205b 4564 6974 6564  .      * [Edited
+00000a30: 2043 6861 6e6e 656c 2050 6f73 7420 6861   Channel Post ha
+00000a40: 6e64 6c65 725d 2823 6564 6974 6564 2d63  ndler](#edited-c
+00000a50: 6861 6e6e 656c 2d70 6f73 742d 6861 6e64  hannel-post-hand
+00000a60: 6c65 7229 0d0a 2020 2020 2020 2a20 5b43  ler)..      * [C
+00000a70: 616c 6c62 6163 6b20 5175 6572 7920 6861  allback Query ha
+00000a80: 6e64 6c65 7273 5d28 2363 616c 6c62 6163  ndlers](#callbac
+00000a90: 6b2d 7175 6572 792d 6861 6e64 6c65 7229  k-query-handler)
+00000aa0: 0d0a 2020 2020 2020 2a20 5b53 6869 7070  ..      * [Shipp
+00000ab0: 696e 6720 5175 6572 7920 4861 6e64 6c65  ing Query Handle
+00000ac0: 725d 2823 7368 6970 7069 6e67 2d71 7565  r](#shipping-que
+00000ad0: 7279 2d68 616e 646c 6572 290d 0a20 2020  ry-handler)..   
+00000ae0: 2020 202a 205b 5072 6520 4368 6563 6b6f     * [Pre Checko
+00000af0: 7574 2051 7565 7279 2048 616e 646c 6572  ut Query Handler
+00000b00: 5d28 2370 7265 2d63 6865 636b 6f75 742d  ](#pre-checkout-
+00000b10: 7175 6572 792d 6861 6e64 6c65 7229 0d0a  query-handler)..
+00000b20: 2020 2020 2020 2a20 5b50 6f6c 6c20 4861        * [Poll Ha
+00000b30: 6e64 6c65 725d 2823 706f 6c6c 2d68 616e  ndler](#poll-han
+00000b40: 646c 6572 290d 0a20 2020 2020 202a 205b  dler)..      * [
+00000b50: 506f 6c6c 2041 6e73 7765 7220 4861 6e64  Poll Answer Hand
+00000b60: 6c65 725d 2823 706f 6c6c 2d61 6e73 7765  ler](#poll-answe
+00000b70: 722d 6861 6e64 6c65 7229 0d0a 2020 2020  r-handler)..    
+00000b80: 2020 2a20 5b4d 7920 4368 6174 204d 656d    * [My Chat Mem
+00000b90: 6265 7220 4861 6e64 6c65 725d 2823 6d79  ber Handler](#my
+00000ba0: 2d63 6861 742d 6d65 6d62 6572 2d68 616e  -chat-member-han
+00000bb0: 646c 6572 290d 0a20 2020 2020 202a 205b  dler)..      * [
+00000bc0: 4368 6174 204d 656d 6265 7220 4861 6e64  Chat Member Hand
+00000bd0: 6c65 725d 2823 6368 6174 2d6d 656d 6265  ler](#chat-membe
+00000be0: 722d 6861 6e64 6c65 7229 0d0a 2020 2020  r-handler)..    
+00000bf0: 2020 2a20 5b43 6861 7420 4a6f 696e 2072    * [Chat Join r
+00000c00: 6571 7565 7374 2068 616e 646c 6572 5d28  equest handler](
+00000c10: 2363 6861 742d 6a6f 696e 2d72 6571 7565  #chat-join-reque
+00000c20: 7374 2d68 616e 646c 6572 290d 0a20 2020  st-handler)..   
+00000c30: 202a 205b 496e 6c69 6e65 204d 6f64 655d   * [Inline Mode]
+00000c40: 2823 696e 6c69 6e65 2d6d 6f64 6529 0d0a  (#inline-mode)..
+00000c50: 2020 2020 2020 2a20 5b49 6e6c 696e 6520        * [Inline 
+00000c60: 6861 6e64 6c65 725d 2823 696e 6c69 6e65  handler](#inline
+00000c70: 2d68 616e 646c 6572 290d 0a20 2020 2020  -handler)..     
+00000c80: 202a 205b 4368 6f73 656e 2049 6e6c 696e   * [Chosen Inlin
+00000c90: 6520 6861 6e64 6c65 725d 2823 6368 6f73  e handler](#chos
+00000ca0: 656e 2d69 6e6c 696e 652d 6861 6e64 6c65  en-inline-handle
+00000cb0: 7229 0d0a 2020 2020 2020 2a20 5b41 6e73  r)..      * [Ans
+00000cc0: 7765 7220 496e 6c69 6e65 2051 7565 7279  wer Inline Query
+00000cd0: 5d28 2361 6e73 7765 722d 696e 6c69 6e65  ](#answer-inline
+00000ce0: 2d71 7565 7279 290d 0a20 2020 202a 205b  -query)..    * [
+00000cf0: 4164 6469 7469 6f6e 616c 2041 5049 2066  Additional API f
+00000d00: 6561 7475 7265 735d 2823 6164 6469 7469  eatures](#additi
+00000d10: 6f6e 616c 2d61 7069 2d66 6561 7475 7265  onal-api-feature
+00000d20: 7329 0d0a 2020 2020 2020 2a20 5b4d 6964  s)..      * [Mid
+00000d30: 646c 6577 6172 6520 6861 6e64 6c65 7273  dleware handlers
+00000d40: 5d28 236d 6964 646c 6577 6172 652d 6861  ](#middleware-ha
+00000d50: 6e64 6c65 7273 290d 0a20 2020 2020 202a  ndlers)..      *
+00000d60: 205b 4375 7374 6f6d 2066 696c 7465 7273   [Custom filters
+00000d70: 5d28 2363 7573 746f 6d2d 6669 6c74 6572  ](#custom-filter
+00000d80: 7329 0d0a 2020 2020 2020 2a20 5b54 656c  s)..      * [Tel
+00000d90: 6542 6f74 5d28 2374 656c 6562 6f74 290d  eBot](#telebot).
+00000da0: 0a20 2020 2020 202a 205b 5265 706c 7920  .      * [Reply 
+00000db0: 6d61 726b 7570 5d28 2372 6570 6c79 2d6d  markup](#reply-m
+00000dc0: 6172 6b75 7029 0d0a 2020 2a20 5b41 6476  arkup)..  * [Adv
+00000dd0: 616e 6365 6420 7573 6520 6f66 2074 6865  anced use of the
+00000de0: 2041 5049 5d28 2361 6476 616e 6365 642d   API](#advanced-
+00000df0: 7573 652d 6f66 2d74 6865 2d61 7069 290d  use-of-the-api).
+00000e00: 0a20 2020 202a 205b 5573 696e 6720 6c6f  .    * [Using lo
+00000e10: 6361 6c20 426f 7420 4150 4920 5365 7276  cal Bot API Serv
+00000e20: 6572 5d28 2375 7369 6e67 2d6c 6f63 616c  er](#using-local
+00000e30: 2d62 6f74 2d61 7069 2d73 6576 6572 290d  -bot-api-sever).
+00000e40: 0a20 2020 202a 205b 4173 796e 6368 726f  .    * [Asynchro
+00000e50: 6e6f 7573 2054 656c 6542 6f74 5d28 2361  nous TeleBot](#a
+00000e60: 7379 6e63 6872 6f6e 6f75 732d 7465 6c65  synchronous-tele
+00000e70: 626f 7429 0d0a 2020 2020 2a20 5b53 656e  bot)..    * [Sen
+00000e80: 6469 6e67 206c 6172 6765 2074 6578 7420  ding large text 
+00000e90: 6d65 7373 6167 6573 5d28 2373 656e 6469  messages](#sendi
+00000ea0: 6e67 2d6c 6172 6765 2d74 6578 742d 6d65  ng-large-text-me
+00000eb0: 7373 6167 6573 290d 0a20 2020 202a 205b  ssages)..    * [
+00000ec0: 436f 6e74 726f 6c6c 696e 6720 7468 6520  Controlling the 
+00000ed0: 616d 6f75 6e74 206f 6620 5468 7265 6164  amount of Thread
+00000ee0: 7320 7573 6564 2062 7920 5465 6c65 426f  s used by TeleBo
+00000ef0: 745d 2823 636f 6e74 726f 6c6c 696e 672d  t](#controlling-
+00000f00: 7468 652d 616d 6f75 6e74 2d6f 662d 7468  the-amount-of-th
+00000f10: 7265 6164 732d 7573 6564 2d62 792d 7465  reads-used-by-te
+00000f20: 6c65 626f 7429 0d0a 2020 2020 2a20 5b54  lebot)..    * [T
+00000f30: 6865 206c 6973 7465 6e65 7220 6d65 6368  he listener mech
+00000f40: 616e 6973 6d5d 2823 7468 652d 6c69 7374  anism](#the-list
+00000f50: 656e 6572 2d6d 6563 6861 6e69 736d 290d  ener-mechanism).
+00000f60: 0a20 2020 202a 205b 5573 696e 6720 7765  .    * [Using we
+00000f70: 6220 686f 6f6b 735d 2823 7573 696e 672d  b hooks](#using-
+00000f80: 7765 622d 686f 6f6b 7329 0d0a 2020 2020  web-hooks)..    
+00000f90: 2a20 5b4c 6f67 6769 6e67 5d28 236c 6f67  * [Logging](#log
+00000fa0: 6769 6e67 290d 0a20 2020 202a 205b 5072  ging)..    * [Pr
+00000fb0: 6f78 795d 2823 7072 6f78 7929 0d0a 2020  oxy](#proxy)..  
+00000fc0: 2020 2a20 5b54 6573 7469 6e67 5d28 2374    * [Testing](#t
+00000fd0: 6573 7469 6e67 290d 0a20 202a 205b 4150  esting)..  * [AP
+00000fe0: 4920 636f 6e66 6f72 6d61 6e63 6520 6c69  I conformance li
+00000ff0: 6d69 7461 7469 6f6e 735d 2823 6170 692d  mitations](#api-
+00001000: 636f 6e66 6f72 6d61 6e63 652d 6c69 6d69  conformance-limi
+00001010: 7461 7469 6f6e 7329 0d0a 2020 2a20 5b41  tations)..  * [A
+00001020: 7379 6e63 5465 6c65 426f 745d 2823 6173  syncTeleBot](#as
+00001030: 796e 6374 656c 6562 6f74 290d 0a20 202a  ynctelebot)..  *
+00001040: 205b 462e 412e 512e 5d28 2366 6171 290d   [F.A.Q.](#faq).
+00001050: 0a20 2020 202a 205b 486f 7720 6361 6e20  .    * [How can 
+00001060: 4920 6469 7374 696e 6775 6973 6820 6120  I distinguish a 
+00001070: 5573 6572 2061 6e64 2061 2047 726f 7570  User and a Group
+00001080: 4368 6174 2069 6e20 6d65 7373 6167 652e  Chat in message.
+00001090: 6368 6174 3f5d 2823 686f 772d 6361 6e2d  chat?](#how-can-
+000010a0: 692d 6469 7374 696e 6775 6973 682d 612d  i-distinguish-a-
+000010b0: 7573 6572 2d61 6e64 2d61 2d67 726f 7570  user-and-a-group
+000010c0: 6368 6174 2d69 6e2d 6d65 7373 6167 6563  chat-in-messagec
+000010d0: 6861 7429 0d0a 2020 2020 2a20 5b48 6f77  hat)..    * [How
+000010e0: 2063 616e 2049 2068 616e 646c 6520 7265   can I handle re
+000010f0: 6f63 7572 7269 6e67 2043 6f6e 6e65 6374  ocurring Connect
+00001100: 696f 6e52 6573 6574 4572 726f 7273 3f5d  ionResetErrors?]
+00001110: 2823 686f 772d 6361 6e2d 692d 6861 6e64  (#how-can-i-hand
+00001120: 6c65 2d72 656f 6375 7272 696e 672d 636f  le-reocurring-co
+00001130: 6e6e 6563 7469 6f6e 7265 7365 7465 7272  nnectionreseterr
+00001140: 6f72 7329 0d0a 2020 2a20 5b54 6865 2054  ors)..  * [The T
+00001150: 656c 6567 7261 6d20 4368 6174 2047 726f  elegram Chat Gro
+00001160: 7570 5d28 2374 6865 2d74 656c 6567 7261  up](#the-telegra
+00001170: 6d2d 6368 6174 2d67 726f 7570 290d 0a20  m-chat-group).. 
+00001180: 202a 205b 5465 6c65 6772 616d 2043 6861   * [Telegram Cha
+00001190: 6e6e 656c 5d28 2374 656c 6567 7261 6d2d  nnel](#telegram-
+000011a0: 6368 616e 6e65 6c29 0d0a 2020 2a20 5b4d  channel)..  * [M
+000011b0: 6f72 6520 6578 616d 706c 6573 5d28 236d  ore examples](#m
+000011c0: 6f72 652d 6578 616d 706c 6573 290d 0a20  ore-examples).. 
+000011d0: 202a 205b 436f 6465 2054 656d 706c 6174   * [Code Templat
+000011e0: 655d 2823 636f 6465 2d74 656d 706c 6174  e](#code-templat
+000011f0: 6529 0d0a 2020 2a20 5b42 6f74 7320 7573  e)..  * [Bots us
+00001200: 696e 6720 7468 6973 206c 6962 7261 7279  ing this library
+00001210: 5d28 2362 6f74 732d 7573 696e 672d 7468  ](#bots-using-th
+00001220: 6973 2d6c 6962 7261 7279 290d 0a0d 0a23  is-library)....#
+00001230: 2320 4765 7474 696e 6720 7374 6172 7465  # Getting starte
+00001240: 640d 0a0d 0a54 6869 7320 4150 4920 6973  d....This API is
+00001250: 2074 6573 7465 6420 7769 7468 2050 7974   tested with Pyt
+00001260: 686f 6e20 332e 372d 332e 3131 2061 6e64  hon 3.7-3.11 and
+00001270: 2050 7970 7920 332e 0d0a 5468 6572 6520   Pypy 3...There 
+00001280: 6172 6520 7477 6f20 7761 7973 2074 6f20  are two ways to 
+00001290: 696e 7374 616c 6c20 7468 6520 6c69 6272  install the libr
+000012a0: 6172 793a 0d0a 0d0a 2a20 496e 7374 616c  ary:....* Instal
+000012b0: 6c61 7469 6f6e 2075 7369 6e67 2070 6970  lation using pip
+000012c0: 2028 6120 5079 7468 6f6e 2070 6163 6b61   (a Python packa
+000012d0: 6765 206d 616e 6167 6572 293a 0d0a 0d0a  ge manager):....
+000012e0: 6060 600d 0a24 2070 6970 2069 6e73 7461  ```..$ pip insta
+000012f0: 6c6c 2070 7954 656c 6567 7261 6d42 6f74  ll pyTelegramBot
+00001300: 4150 490d 0a60 6060 0d0a 2a20 496e 7374  API..```..* Inst
+00001310: 616c 6c61 7469 6f6e 2066 726f 6d20 736f  allation from so
+00001320: 7572 6365 2028 7265 7175 6972 6573 2067  urce (requires g
+00001330: 6974 293a 0d0a 0d0a 6060 600d 0a24 2067  it):....```..$ g
+00001340: 6974 2063 6c6f 6e65 2068 7474 7073 3a2f  it clone https:/
+00001350: 2f67 6974 6875 622e 636f 6d2f 6574 6572  /github.com/eter
+00001360: 6e6e 6f69 722f 7079 5465 6c65 6772 616d  nnoir/pyTelegram
+00001370: 426f 7441 5049 2e67 6974 0d0a 2420 6364  BotAPI.git..$ cd
+00001380: 2070 7954 656c 6567 7261 6d42 6f74 4150   pyTelegramBotAP
+00001390: 490d 0a24 2070 7974 686f 6e20 7365 7475  I..$ python setu
+000013a0: 702e 7079 2069 6e73 7461 6c6c 0d0a 6060  p.py install..``
+000013b0: 600d 0a6f 723a 0d0a 6060 600d 0a24 2070  `..or:..```..$ p
+000013c0: 6970 2069 6e73 7461 6c6c 2067 6974 2b68  ip install git+h
+000013d0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+000013e0: 6d2f 6574 6572 6e6e 6f69 722f 7079 5465  m/eternnoir/pyTe
+000013f0: 6c65 6772 616d 426f 7441 5049 2e67 6974  legramBotAPI.git
+00001400: 0d0a 6060 600d 0a0d 0a49 7420 6973 2067  ..```....It is g
+00001410: 656e 6572 616c 6c79 2072 6563 6f6d 6d65  enerally recomme
+00001420: 6e64 6564 2074 6f20 7573 6520 7468 6520  nded to use the 
+00001430: 6669 7273 7420 6f70 7469 6f6e 2e0d 0a0d  first option....
+00001440: 0a2a 5768 696c 6520 7468 6520 4150 4920  .*While the API 
+00001450: 6973 2070 726f 6475 6374 696f 6e2d 7265  is production-re
+00001460: 6164 792c 2069 7420 6973 2073 7469 6c6c  ady, it is still
+00001470: 2075 6e64 6572 2064 6576 656c 6f70 6d65   under developme
+00001480: 6e74 2061 6e64 2069 7420 6861 7320 7265  nt and it has re
+00001490: 6775 6c61 7220 7570 6461 7465 732c 2064  gular updates, d
+000014a0: 6f20 6e6f 7420 666f 7267 6574 2074 6f20  o not forget to 
+000014b0: 7570 6461 7465 2069 7420 7265 6775 6c61  update it regula
+000014c0: 726c 7920 6279 2063 616c 6c69 6e67 2a0d  rly by calling*.
+000014d0: 0a60 6060 0d0a 7069 7020 696e 7374 616c  .```..pip instal
+000014e0: 6c20 7079 7465 6c65 6772 616d 626f 7461  l pytelegrambota
+000014f0: 7069 202d 2d75 7067 7261 6465 0d0a 6060  pi --upgrade..``
+00001500: 600d 0a0d 0a23 2320 5772 6974 696e 6720  `....## Writing 
+00001510: 796f 7572 2066 6972 7374 2062 6f74 0d0a  your first bot..
+00001520: 0d0a 2323 2320 5072 6572 6571 7569 7369  ..### Prerequisi
+00001530: 7465 730d 0a0d 0a49 7420 6973 2070 7265  tes....It is pre
+00001540: 7375 6d65 6420 7468 6174 2079 6f75 205b  sumed that you [
+00001550: 6861 7665 206f 6274 6169 6e65 6420 616e  have obtained an
+00001560: 2041 5049 2074 6f6b 656e 2077 6974 6820   API token with 
+00001570: 4042 6f74 4661 7468 6572 5d28 6874 7470  @BotFather](http
+00001580: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
+00001590: 6d2e 6f72 672f 626f 7473 2362 6f74 6661  m.org/bots#botfa
+000015a0: 7468 6572 292e 2057 6520 7769 6c6c 2063  ther). We will c
+000015b0: 616c 6c20 7468 6973 2074 6f6b 656e 2060  all this token `
+000015c0: 544f 4b45 4e60 2e0d 0a46 7572 7468 6572  TOKEN`...Further
+000015d0: 6d6f 7265 2c20 796f 7520 6861 7665 2062  more, you have b
+000015e0: 6173 6963 206b 6e6f 776c 6564 6765 206f  asic knowledge o
+000015f0: 6620 7468 6520 5079 7468 6f6e 2070 726f  f the Python pro
+00001600: 6772 616d 6d69 6e67 206c 616e 6775 6167  gramming languag
+00001610: 6520 616e 6420 6d6f 7265 2069 6d70 6f72  e and more impor
+00001620: 7461 6e74 6c79 205b 7468 6520 5465 6c65  tantly [the Tele
+00001630: 6772 616d 2042 6f74 2041 5049 5d28 6874  gram Bot API](ht
+00001640: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+00001650: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+00001660: 292e 0d0a 0d0a 2323 2320 4120 7369 6d70  ).....### A simp
+00001670: 6c65 2065 6368 6f20 626f 740d 0a0d 0a54  le echo bot....T
+00001680: 6865 2054 656c 6542 6f74 2063 6c61 7373  he TeleBot class
+00001690: 2028 6465 6669 6e65 6420 696e 205c 5f5f   (defined in \__
+000016a0: 696e 6974 5f5f 2e70 7929 2065 6e63 6170  init__.py) encap
+000016b0: 7375 6c61 7465 7320 616c 6c20 4150 4920  sulates all API 
+000016c0: 6361 6c6c 7320 696e 2061 2073 696e 676c  calls in a singl
+000016d0: 6520 636c 6173 732e 2049 7420 7072 6f76  e class. It prov
+000016e0: 6964 6573 2066 756e 6374 696f 6e73 2073  ides functions s
+000016f0: 7563 6820 6173 2060 7365 6e64 5f78 797a  uch as `send_xyz
+00001700: 6020 2860 7365 6e64 5f6d 6573 7361 6765  ` (`send_message
+00001710: 602c 2060 7365 6e64 5f64 6f63 756d 656e  `, `send_documen
+00001720: 7460 2065 7463 2e29 2061 6e64 2073 6576  t` etc.) and sev
+00001730: 6572 616c 2077 6179 7320 746f 206c 6973  eral ways to lis
+00001740: 7465 6e20 666f 7220 696e 636f 6d69 6e67  ten for incoming
+00001750: 206d 6573 7361 6765 732e 0d0a 0d0a 4372   messages.....Cr
+00001760: 6561 7465 2061 2066 696c 6520 6361 6c6c  eate a file call
+00001770: 6564 2060 6563 686f 5f62 6f74 2e70 7960  ed `echo_bot.py`
+00001780: 2e0d 0a54 6865 6e2c 206f 7065 6e20 7468  ...Then, open th
+00001790: 6520 6669 6c65 2061 6e64 2063 7265 6174  e file and creat
+000017a0: 6520 616e 2069 6e73 7461 6e63 6520 6f66  e an instance of
+000017b0: 2074 6865 2054 656c 6542 6f74 2063 6c61   the TeleBot cla
+000017c0: 7373 2e0d 0a60 6060 7079 7468 6f6e 0d0a  ss...```python..
+000017d0: 696d 706f 7274 2074 656c 6562 6f74 0d0a  import telebot..
+000017e0: 0d0a 626f 7420 3d20 7465 6c65 626f 742e  ..bot = telebot.
+000017f0: 5465 6c65 426f 7428 2254 4f4b 454e 222c  TeleBot("TOKEN",
+00001800: 2070 6172 7365 5f6d 6f64 653d 4e6f 6e65   parse_mode=None
+00001810: 2920 2320 596f 7520 6361 6e20 7365 7420  ) # You can set 
+00001820: 7061 7273 655f 6d6f 6465 2062 7920 6465  parse_mode by de
+00001830: 6661 756c 742e 2048 544d 4c20 6f72 204d  fault. HTML or M
+00001840: 4152 4b44 4f57 4e0d 0a60 6060 0d0a 2a4e  ARKDOWN..```..*N
+00001850: 6f74 653a 204d 616b 6520 7375 7265 2074  ote: Make sure t
+00001860: 6f20 6163 7475 616c 6c79 2072 6570 6c61  o actually repla
+00001870: 6365 2054 4f4b 454e 2077 6974 6820 796f  ce TOKEN with yo
+00001880: 7572 206f 776e 2041 5049 2074 6f6b 656e  ur own API token
+00001890: 2e2a 0d0a 0d0a 4166 7465 7220 7468 6174  .*....After that
+000018a0: 2064 6563 6c61 7261 7469 6f6e 2c20 7765   declaration, we
+000018b0: 206e 6565 6420 746f 2072 6567 6973 7465   need to registe
+000018c0: 7220 736f 6d65 2073 6f2d 6361 6c6c 6564  r some so-called
+000018d0: 206d 6573 7361 6765 2068 616e 646c 6572   message handler
+000018e0: 732e 204d 6573 7361 6765 2068 616e 646c  s. Message handl
+000018f0: 6572 7320 6465 6669 6e65 2066 696c 7465  ers define filte
+00001900: 7273 2077 6869 6368 2061 206d 6573 7361  rs which a messa
+00001910: 6765 206d 7573 7420 7061 7373 2e20 4966  ge must pass. If
+00001920: 2061 206d 6573 7361 6765 2070 6173 7365   a message passe
+00001930: 7320 7468 6520 6669 6c74 6572 2c20 7468  s the filter, th
+00001940: 6520 6465 636f 7261 7465 6420 6675 6e63  e decorated func
+00001950: 7469 6f6e 2069 7320 6361 6c6c 6564 2061  tion is called a
+00001960: 6e64 2074 6865 2069 6e63 6f6d 696e 6720  nd the incoming 
+00001970: 6d65 7373 6167 6520 6973 2070 6173 7365  message is passe
+00001980: 6420 6173 2061 6e20 6172 6775 6d65 6e74  d as an argument
+00001990: 2e0d 0a0d 0a4c 6574 2773 2064 6566 696e  .....Let's defin
+000019a0: 6520 6120 6d65 7373 6167 6520 6861 6e64  e a message hand
+000019b0: 6c65 7220 7768 6963 6820 6861 6e64 6c65  ler which handle
+000019c0: 7320 696e 636f 6d69 6e67 2060 2f73 7461  s incoming `/sta
+000019d0: 7274 6020 616e 6420 602f 6865 6c70 6020  rt` and `/help` 
+000019e0: 636f 6d6d 616e 6473 2e0d 0a60 6060 7079  commands...```py
+000019f0: 7468 6f6e 0d0a 4062 6f74 2e6d 6573 7361  thon..@bot.messa
+00001a00: 6765 5f68 616e 646c 6572 2863 6f6d 6d61  ge_handler(comma
+00001a10: 6e64 733d 5b27 7374 6172 7427 2c20 2768  nds=['start', 'h
+00001a20: 656c 7027 5d29 0d0a 6465 6620 7365 6e64  elp'])..def send
+00001a30: 5f77 656c 636f 6d65 286d 6573 7361 6765  _welcome(message
+00001a40: 293a 0d0a 0962 6f74 2e72 6570 6c79 5f74  ):...bot.reply_t
+00001a50: 6f28 6d65 7373 6167 652c 2022 486f 7764  o(message, "Howd
+00001a60: 792c 2068 6f77 2061 7265 2079 6f75 2064  y, how are you d
+00001a70: 6f69 6e67 3f22 290d 0a60 6060 0d0a 4120  oing?")..```..A 
+00001a80: 6675 6e63 7469 6f6e 2077 6869 6368 2069  function which i
+00001a90: 7320 6465 636f 7261 7465 6420 6279 2061  s decorated by a
+00001aa0: 206d 6573 7361 6765 2068 616e 646c 6572   message handler
+00001ab0: 205f 5f63 616e 2068 6176 6520 616e 2061   __can have an a
+00001ac0: 7262 6974 7261 7279 206e 616d 652c 2068  rbitrary name, h
+00001ad0: 6f77 6576 6572 2c20 6974 206d 7573 7420  owever, it must 
+00001ae0: 6861 7665 206f 6e6c 7920 6f6e 6520 7061  have only one pa
+00001af0: 7261 6d65 7465 7220 2874 6865 206d 6573  rameter (the mes
+00001b00: 7361 6765 295f 5f2e 0d0a 0d0a 4c65 7427  sage)__.....Let'
+00001b10: 7320 6164 6420 616e 6f74 6865 7220 6861  s add another ha
+00001b20: 6e64 6c65 723a 0d0a 6060 6070 7974 686f  ndler:..```pytho
+00001b30: 6e0d 0a40 626f 742e 6d65 7373 6167 655f  n..@bot.message_
+00001b40: 6861 6e64 6c65 7228 6675 6e63 3d6c 616d  handler(func=lam
+00001b50: 6264 6120 6d3a 2054 7275 6529 0d0a 6465  bda m: True)..de
+00001b60: 6620 6563 686f 5f61 6c6c 286d 6573 7361  f echo_all(messa
+00001b70: 6765 293a 0d0a 0962 6f74 2e72 6570 6c79  ge):...bot.reply
+00001b80: 5f74 6f28 6d65 7373 6167 652c 206d 6573  _to(message, mes
+00001b90: 7361 6765 2e74 6578 7429 0d0a 6060 600d  sage.text)..```.
+00001ba0: 0a54 6869 7320 6f6e 6520 6563 686f 6573  .This one echoes
+00001bb0: 2061 6c6c 2069 6e63 6f6d 696e 6720 7465   all incoming te
+00001bc0: 7874 206d 6573 7361 6765 7320 6261 636b  xt messages back
+00001bd0: 2074 6f20 7468 6520 7365 6e64 6572 2e20   to the sender. 
+00001be0: 4974 2075 7365 7320 6120 6c61 6d62 6461  It uses a lambda
+00001bf0: 2066 756e 6374 696f 6e20 746f 2074 6573   function to tes
+00001c00: 7420 6120 6d65 7373 6167 652e 2049 6620  t a message. If 
+00001c10: 7468 6520 6c61 6d62 6461 2072 6574 7572  the lambda retur
+00001c20: 6e73 2054 7275 652c 2074 6865 206d 6573  ns True, the mes
+00001c30: 7361 6765 2069 7320 6861 6e64 6c65 6420  sage is handled 
+00001c40: 6279 2074 6865 2064 6563 6f72 6174 6564  by the decorated
+00001c50: 2066 756e 6374 696f 6e2e 2053 696e 6365   function. Since
+00001c60: 2077 6520 7761 6e74 2061 6c6c 206d 6573   we want all mes
+00001c70: 7361 6765 7320 746f 2062 6520 6861 6e64  sages to be hand
+00001c80: 6c65 6420 6279 2074 6869 7320 6675 6e63  led by this func
+00001c90: 7469 6f6e 2c20 7765 2073 696d 706c 7920  tion, we simply 
+00001ca0: 616c 7761 7973 2072 6574 7572 6e20 5472  always return Tr
+00001cb0: 7565 2e0d 0a0d 0a2a 4e6f 7465 3a20 616c  ue.....*Note: al
+00001cc0: 6c20 6861 6e64 6c65 7273 2061 7265 2074  l handlers are t
+00001cd0: 6573 7465 6420 696e 2074 6865 206f 7264  ested in the ord
+00001ce0: 6572 2069 6e20 7768 6963 6820 7468 6579  er in which they
+00001cf0: 2077 6572 6520 6465 636c 6172 6564 2a0d   were declared*.
+00001d00: 0a0d 0a57 6520 6e6f 7720 6861 7665 2061  ...We now have a
+00001d10: 2062 6173 6963 2062 6f74 2077 6869 6368   basic bot which
+00001d20: 2072 6570 6c69 6573 2061 2073 7461 7469   replies a stati
+00001d30: 6320 6d65 7373 6167 6520 746f 2022 2f73  c message to "/s
+00001d40: 7461 7274 2220 616e 6420 222f 6865 6c70  tart" and "/help
+00001d50: 2220 636f 6d6d 616e 6473 2061 6e64 2077  " commands and w
+00001d60: 6869 6368 2065 6368 6f65 7320 7468 6520  hich echoes the 
+00001d70: 7265 7374 206f 6620 7468 6520 7365 6e74  rest of the sent
+00001d80: 206d 6573 7361 6765 732e 2054 6f20 7374   messages. To st
+00001d90: 6172 7420 7468 6520 626f 742c 2061 6464  art the bot, add
+00001da0: 2074 6865 2066 6f6c 6c6f 7769 6e67 2074   the following t
+00001db0: 6f20 6f75 7220 736f 7572 6365 2066 696c  o our source fil
+00001dc0: 653a 0d0a 6060 6070 7974 686f 6e0d 0a62  e:..```python..b
+00001dd0: 6f74 2e69 6e66 696e 6974 795f 706f 6c6c  ot.infinity_poll
+00001de0: 696e 6728 290d 0a60 6060 0d0a 416c 7269  ing()..```..Alri
+00001df0: 6768 742c 2074 6861 7427 7320 6974 2120  ght, that's it! 
+00001e00: 4f75 7220 736f 7572 6365 2066 696c 6520  Our source file 
+00001e10: 6e6f 7720 6c6f 6f6b 7320 6c69 6b65 2074  now looks like t
+00001e20: 6869 733a 0d0a 6060 6070 7974 686f 6e0d  his:..```python.
+00001e30: 0a69 6d70 6f72 7420 7465 6c65 626f 740d  .import telebot.
+00001e40: 0a0d 0a62 6f74 203d 2074 656c 6562 6f74  ...bot = telebot
+00001e50: 2e54 656c 6542 6f74 2822 594f 5552 5f42  .TeleBot("YOUR_B
+00001e60: 4f54 5f54 4f4b 454e 2229 0d0a 0d0a 4062  OT_TOKEN")....@b
+00001e70: 6f74 2e6d 6573 7361 6765 5f68 616e 646c  ot.message_handl
+00001e80: 6572 2863 6f6d 6d61 6e64 733d 5b27 7374  er(commands=['st
+00001e90: 6172 7427 2c20 2768 656c 7027 5d29 0d0a  art', 'help'])..
+00001ea0: 6465 6620 7365 6e64 5f77 656c 636f 6d65  def send_welcome
+00001eb0: 286d 6573 7361 6765 293a 0d0a 0962 6f74  (message):...bot
+00001ec0: 2e72 6570 6c79 5f74 6f28 6d65 7373 6167  .reply_to(messag
+00001ed0: 652c 2022 486f 7764 792c 2068 6f77 2061  e, "Howdy, how a
+00001ee0: 7265 2079 6f75 2064 6f69 6e67 3f22 290d  re you doing?").
+00001ef0: 0a0d 0a40 626f 742e 6d65 7373 6167 655f  ...@bot.message_
+00001f00: 6861 6e64 6c65 7228 6675 6e63 3d6c 616d  handler(func=lam
+00001f10: 6264 6120 6d65 7373 6167 653a 2054 7275  bda message: Tru
+00001f20: 6529 0d0a 6465 6620 6563 686f 5f61 6c6c  e)..def echo_all
+00001f30: 286d 6573 7361 6765 293a 0d0a 0962 6f74  (message):...bot
+00001f40: 2e72 6570 6c79 5f74 6f28 6d65 7373 6167  .reply_to(messag
+00001f50: 652c 206d 6573 7361 6765 2e74 6578 7429  e, message.text)
+00001f60: 0d0a 0d0a 626f 742e 696e 6669 6e69 7479  ....bot.infinity
+00001f70: 5f70 6f6c 6c69 6e67 2829 0d0a 6060 600d  _polling()..```.
+00001f80: 0a54 6f20 7374 6172 7420 7468 6520 626f  .To start the bo
+00001f90: 742c 2073 696d 706c 7920 6f70 656e 2075  t, simply open u
+00001fa0: 7020 6120 7465 726d 696e 616c 2061 6e64  p a terminal and
+00001fb0: 2065 6e74 6572 2060 7079 7468 6f6e 2065   enter `python e
+00001fc0: 6368 6f5f 626f 742e 7079 6020 746f 2072  cho_bot.py` to r
+00001fd0: 756e 2074 6865 2062 6f74 2120 5465 7374  un the bot! Test
+00001fe0: 2069 7420 6279 2073 656e 6469 6e67 2063   it by sending c
+00001ff0: 6f6d 6d61 6e64 7320 2827 2f73 7461 7274  ommands ('/start
+00002000: 2720 616e 6420 272f 6865 6c70 2729 2061  ' and '/help') a
+00002010: 6e64 2061 7262 6974 7261 7279 2074 6578  nd arbitrary tex
+00002020: 7420 6d65 7373 6167 6573 2e0d 0a0d 0a23  t messages.....#
+00002030: 2320 4765 6e65 7261 6c20 4150 4920 446f  # General API Do
+00002040: 6375 6d65 6e74 6174 696f 6e0d 0a0d 0a23  cumentation....#
+00002050: 2323 2054 7970 6573 0d0a 0d0a 416c 6c20  ## Types....All 
+00002060: 7479 7065 7320 6172 6520 6465 6669 6e65  types are define
+00002070: 6420 696e 2074 7970 6573 2e70 792e 2054  d in types.py. T
+00002080: 6865 7920 6172 6520 616c 6c20 636f 6d70  hey are all comp
+00002090: 6c65 7465 6c79 2069 6e20 6c69 6e65 2077  letely in line w
+000020a0: 6974 6820 7468 6520 5b54 656c 6567 7261  ith the [Telegra
+000020b0: 6d20 4150 4927 7320 6465 6669 6e69 7469  m API's definiti
+000020c0: 6f6e 206f 6620 7468 6520 7479 7065 735d  on of the types]
+000020d0: 2868 7474 7073 3a2f 2f63 6f72 652e 7465  (https://core.te
+000020e0: 6c65 6772 616d 2e6f 7267 2f62 6f74 732f  legram.org/bots/
+000020f0: 6170 6923 6176 6169 6c61 626c 652d 7479  api#available-ty
+00002100: 7065 7329 2c20 6578 6365 7074 2066 6f72  pes), except for
+00002110: 2074 6865 204d 6573 7361 6765 2773 2060   the Message's `
+00002120: 6672 6f6d 6020 6669 656c 642c 2077 6869  from` field, whi
+00002130: 6368 2069 7320 7265 6e61 6d65 6420 746f  ch is renamed to
+00002140: 2060 6672 6f6d 5f75 7365 7260 2028 6265   `from_user` (be
+00002150: 6361 7573 6520 6066 726f 6d60 2069 7320  cause `from` is 
+00002160: 6120 5079 7468 6f6e 2072 6573 6572 7665  a Python reserve
+00002170: 6420 746f 6b65 6e29 2e20 5468 7573 2c20  d token). Thus, 
+00002180: 6174 7472 6962 7574 6573 2073 7563 6820  attributes such 
+00002190: 6173 2060 6d65 7373 6167 655f 6964 6020  as `message_id` 
+000021a0: 6361 6e20 6265 2061 6363 6573 7365 6420  can be accessed 
+000021b0: 6469 7265 6374 6c79 2077 6974 6820 606d  directly with `m
+000021c0: 6573 7361 6765 2e6d 6573 7361 6765 5f69  essage.message_i
+000021d0: 6460 2e20 4e6f 7465 2074 6861 7420 606d  d`. Note that `m
+000021e0: 6573 7361 6765 2e63 6861 7460 2063 616e  essage.chat` can
+000021f0: 2062 6520 6569 7468 6572 2061 6e20 696e   be either an in
+00002200: 7374 616e 6365 206f 6620 6055 7365 7260  stance of `User`
+00002210: 206f 7220 6047 726f 7570 4368 6174 6020   or `GroupChat` 
+00002220: 2873 6565 205b 486f 7720 6361 6e20 4920  (see [How can I 
+00002230: 6469 7374 696e 6775 6973 6820 6120 5573  distinguish a Us
+00002240: 6572 2061 6e64 2061 2047 726f 7570 4368  er and a GroupCh
+00002250: 6174 2069 6e20 6d65 7373 6167 652e 6368  at in message.ch
+00002260: 6174 3f5d 2823 686f 772d 6361 6e2d 692d  at?](#how-can-i-
+00002270: 6469 7374 696e 6775 6973 682d 612d 7573  distinguish-a-us
+00002280: 6572 2d61 6e64 2d61 2d67 726f 7570 6368  er-and-a-groupch
+00002290: 6174 2d69 6e2d 6d65 7373 6167 6563 6861  at-in-messagecha
+000022a0: 7429 292e 0d0a 0d0a 5468 6520 4d65 7373  t)).....The Mess
+000022b0: 6167 6520 6f62 6a65 6374 2061 6c73 6f20  age object also 
+000022c0: 6861 7320 6120 6063 6f6e 7465 6e74 5f74  has a `content_t
+000022d0: 7970 6560 6174 7472 6962 7574 652c 2077  ype`attribute, w
+000022e0: 6869 6368 2064 6566 696e 6573 2074 6865  hich defines the
+000022f0: 2074 7970 6520 6f66 2074 6865 204d 6573   type of the Mes
+00002300: 7361 6765 2e20 6063 6f6e 7465 6e74 5f74  sage. `content_t
+00002310: 7970 6560 2063 616e 2062 6520 6f6e 6520  ype` can be one 
+00002320: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
+00002330: 2073 7472 696e 6773 3a0d 0a60 7465 7874   strings:..`text
+00002340: 602c 2060 6175 6469 6f60 2c20 6064 6f63  `, `audio`, `doc
+00002350: 756d 656e 7460 2c20 6070 686f 746f 602c  ument`, `photo`,
+00002360: 2060 7374 6963 6b65 7260 2c20 6076 6964   `sticker`, `vid
+00002370: 656f 602c 2060 7669 6465 6f5f 6e6f 7465  eo`, `video_note
+00002380: 602c 2060 766f 6963 6560 2c20 606c 6f63  `, `voice`, `loc
+00002390: 6174 696f 6e60 2c20 6063 6f6e 7461 6374  ation`, `contact
+000023a0: 602c 2060 6e65 775f 6368 6174 5f6d 656d  `, `new_chat_mem
+000023b0: 6265 7273 602c 2060 6c65 6674 5f63 6861  bers`, `left_cha
+000023c0: 745f 6d65 6d62 6572 602c 2060 6e65 775f  t_member`, `new_
+000023d0: 6368 6174 5f74 6974 6c65 602c 2060 6e65  chat_title`, `ne
+000023e0: 775f 6368 6174 5f70 686f 746f 602c 2060  w_chat_photo`, `
+000023f0: 6465 6c65 7465 5f63 6861 745f 7068 6f74  delete_chat_phot
+00002400: 6f60 2c20 6067 726f 7570 5f63 6861 745f  o`, `group_chat_
+00002410: 6372 6561 7465 6460 2c20 6073 7570 6572  created`, `super
+00002420: 6772 6f75 705f 6368 6174 5f63 7265 6174  group_chat_creat
+00002430: 6564 602c 2060 6368 616e 6e65 6c5f 6368  ed`, `channel_ch
+00002440: 6174 5f63 7265 6174 6564 602c 2060 6d69  at_created`, `mi
+00002450: 6772 6174 655f 746f 5f63 6861 745f 6964  grate_to_chat_id
+00002460: 602c 2060 6d69 6772 6174 655f 6672 6f6d  `, `migrate_from
+00002470: 5f63 6861 745f 6964 602c 2060 7069 6e6e  _chat_id`, `pinn
+00002480: 6564 5f6d 6573 7361 6765 602c 2060 7765  ed_message`, `we
+00002490: 625f 6170 705f 6461 7461 602e 0d0a 0d0a  b_app_data`.....
+000024a0: 596f 7520 6361 6e20 7573 6520 736f 6d65  You can use some
+000024b0: 2074 7970 6573 2069 6e20 6f6e 6520 6675   types in one fu
+000024c0: 6e63 7469 6f6e 2e20 4578 616d 706c 653a  nction. Example:
+000024d0: 0d0a 0d0a 6060 6063 6f6e 7465 6e74 5f74  ....```content_t
+000024e0: 7970 6573 3d5b 2274 6578 7422 2c20 2273  ypes=["text", "s
+000024f0: 7469 636b 6572 222c 2022 7069 6e6e 6564  ticker", "pinned
+00002500: 5f6d 6573 7361 6765 222c 2022 7068 6f74  _message", "phot
+00002510: 6f22 2c20 2261 7564 696f 225d 6060 600d  o", "audio"]```.
+00002520: 0a0d 0a23 2323 204d 6574 686f 6473 0d0a  ...### Methods..
+00002530: 0d0a 416c 6c20 5b41 5049 206d 6574 686f  ..All [API metho
+00002540: 6473 5d28 6874 7470 733a 2f2f 636f 7265  ds](https://core
+00002550: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
+00002560: 7473 2f61 7069 2361 7661 696c 6162 6c65  ts/api#available
+00002570: 2d6d 6574 686f 6473 2920 6172 6520 6c6f  -methods) are lo
+00002580: 6361 7465 6420 696e 2074 6865 2054 656c  cated in the Tel
+00002590: 6542 6f74 2063 6c61 7373 2e20 5468 6579  eBot class. They
+000025a0: 2061 7265 2072 656e 616d 6564 2074 6f20   are renamed to 
+000025b0: 666f 6c6c 6f77 2063 6f6d 6d6f 6e20 5079  follow common Py
+000025c0: 7468 6f6e 206e 616d 696e 6720 636f 6e76  thon naming conv
+000025d0: 656e 7469 6f6e 732e 2045 2e67 2e20 6067  entions. E.g. `g
+000025e0: 6574 4d65 6020 6973 2072 656e 616d 6564  etMe` is renamed
+000025f0: 2074 6f20 6067 6574 5f6d 6560 2061 6e64   to `get_me` and
+00002600: 2060 7365 6e64 4d65 7373 6167 6560 2074   `sendMessage` t
+00002610: 6f20 6073 656e 645f 6d65 7373 6167 6560  o `send_message`
+00002620: 2e0d 0a0d 0a23 2323 2047 656e 6572 616c  .....### General
+00002630: 2075 7365 206f 6620 7468 6520 4150 490d   use of the API.
+00002640: 0a0d 0a4f 7574 6c69 6e65 6420 6265 6c6f  ...Outlined belo
+00002650: 7720 6172 6520 736f 6d65 2067 656e 6572  w are some gener
+00002660: 616c 2075 7365 2063 6173 6573 206f 6620  al use cases of 
+00002670: 7468 6520 4150 492e 0d0a 0d0a 2323 2323  the API.....####
+00002680: 204d 6573 7361 6765 2068 616e 646c 6572   Message handler
+00002690: 730d 0a41 206d 6573 7361 6765 2068 616e  s..A message han
+000026a0: 646c 6572 2069 7320 6120 6675 6e63 7469  dler is a functi
+000026b0: 6f6e 2074 6861 7420 6973 2064 6563 6f72  on that is decor
+000026c0: 6174 6564 2077 6974 6820 7468 6520 606d  ated with the `m
+000026d0: 6573 7361 6765 5f68 616e 646c 6572 6020  essage_handler` 
+000026e0: 6465 636f 7261 746f 7220 6f66 2061 2054  decorator of a T
+000026f0: 656c 6542 6f74 2069 6e73 7461 6e63 652e  eleBot instance.
+00002700: 204d 6573 7361 6765 2068 616e 646c 6572   Message handler
+00002710: 7320 636f 6e73 6973 7420 6f66 206f 6e65  s consist of one
+00002720: 206f 7220 6d75 6c74 6970 6c65 2066 696c   or multiple fil
+00002730: 7465 7273 2e0d 0a45 6163 6820 6669 6c74  ters...Each filt
+00002740: 6572 206d 7573 7420 7265 7475 726e 2054  er must return T
+00002750: 7275 6520 666f 7220 6120 6365 7274 6169  rue for a certai
+00002760: 6e20 6d65 7373 6167 6520 696e 206f 7264  n message in ord
+00002770: 6572 2066 6f72 2061 206d 6573 7361 6765  er for a message
+00002780: 2068 616e 646c 6572 2074 6f20 6265 636f   handler to beco
+00002790: 6d65 2065 6c69 6769 626c 6520 746f 2068  me eligible to h
+000027a0: 616e 646c 6520 7468 6174 206d 6573 7361  andle that messa
+000027b0: 6765 2e20 4120 6d65 7373 6167 6520 6861  ge. A message ha
+000027c0: 6e64 6c65 7220 6973 2064 6563 6c61 7265  ndler is declare
+000027d0: 6420 696e 2074 6865 2066 6f6c 6c6f 7769  d in the followi
+000027e0: 6e67 2077 6179 2028 7072 6f76 6964 6564  ng way (provided
+000027f0: 2060 626f 7460 2069 7320 616e 2069 6e73   `bot` is an ins
+00002800: 7461 6e63 6520 6f66 2054 656c 6542 6f74  tance of TeleBot
+00002810: 293a 0d0a 6060 6070 7974 686f 6e0d 0a40  ):..```python..@
+00002820: 626f 742e 6d65 7373 6167 655f 6861 6e64  bot.message_hand
+00002830: 6c65 7228 6669 6c74 6572 7329 0d0a 6465  ler(filters)..de
+00002840: 6620 6675 6e63 7469 6f6e 5f6e 616d 6528  f function_name(
+00002850: 6d65 7373 6167 6529 3a0d 0a09 626f 742e  message):...bot.
+00002860: 7265 706c 795f 746f 286d 6573 7361 6765  reply_to(message
+00002870: 2c20 2254 6869 7320 6973 2061 206d 6573  , "This is a mes
+00002880: 7361 6765 2068 616e 646c 6572 2229 0d0a  sage handler")..
+00002890: 6060 600d 0a60 6675 6e63 7469 6f6e 5f6e  ```..`function_n
+000028a0: 616d 6560 2069 7320 6e6f 7420 626f 756e  ame` is not boun
+000028b0: 6420 746f 2061 6e79 2072 6573 7472 6963  d to any restric
+000028c0: 7469 6f6e 732e 2041 6e79 2066 756e 6374  tions. Any funct
+000028d0: 696f 6e20 6e61 6d65 2069 7320 7065 726d  ion name is perm
+000028e0: 6974 7465 6420 7769 7468 206d 6573 7361  itted with messa
+000028f0: 6765 2068 616e 646c 6572 732e 2054 6865  ge handlers. The
+00002900: 2066 756e 6374 696f 6e20 6d75 7374 2061   function must a
+00002910: 6363 6570 7420 6174 206d 6f73 7420 6f6e  ccept at most on
+00002920: 6520 6172 6775 6d65 6e74 2c20 7768 6963  e argument, whic
+00002930: 6820 7769 6c6c 2062 6520 7468 6520 6d65  h will be the me
+00002940: 7373 6167 6520 7468 6174 2074 6865 2066  ssage that the f
+00002950: 756e 6374 696f 6e20 6d75 7374 2068 616e  unction must han
+00002960: 646c 652e 0d0a 6066 696c 7465 7273 6020  dle...`filters` 
+00002970: 6973 2061 206c 6973 7420 6f66 206b 6579  is a list of key
+00002980: 776f 7264 2061 7267 756d 656e 7473 2e0d  word arguments..
+00002990: 0a41 2066 696c 7465 7220 6973 2064 6563  .A filter is dec
+000029a0: 6c61 7265 6420 696e 2074 6865 2066 6f6c  lared in the fol
+000029b0: 6c6f 7769 6e67 206d 616e 6e65 723a 2060  lowing manner: `
+000029c0: 6e61 6d65 3d61 7267 756d 656e 7460 2e20  name=argument`. 
+000029d0: 4f6e 6520 6861 6e64 6c65 7220 6d61 7920  One handler may 
+000029e0: 6861 7665 206d 756c 7469 706c 6520 6669  have multiple fi
+000029f0: 6c74 6572 732e 0d0a 5465 6c65 426f 7420  lters...TeleBot 
+00002a00: 7375 7070 6f72 7473 2074 6865 2066 6f6c  supports the fol
+00002a10: 6c6f 7769 6e67 2066 696c 7465 7273 3a0d  lowing filters:.
+00002a20: 0a0d 0a7c 6e61 6d65 7c61 7267 756d 656e  ...|name|argumen
+00002a30: 7428 7329 7c43 6f6e 6469 7469 6f6e 7c0d  t(s)|Condition|.
+00002a40: 0a7c 3a2d 2d2d 3a7c 2d2d 2d7c 202d 2d2d  .|:---:|---| ---
+00002a50: 7c0d 0a7c 636f 6e74 656e 745f 7479 7065  |..|content_type
+00002a60: 737c 6c69 7374 206f 6620 7374 7269 6e67  s|list of string
+00002a70: 7320 2864 6566 6175 6c74 2060 5b27 7465  s (default `['te
+00002a80: 7874 275d 6029 7c60 5472 7565 6020 6966  xt']`)|`True` if
+00002a90: 206d 6573 7361 6765 2e63 6f6e 7465 6e74   message.content
+00002aa0: 5f74 7970 6520 6973 2069 6e20 7468 6520  _type is in the 
+00002ab0: 6c69 7374 206f 6620 7374 7269 6e67 732e  list of strings.
+00002ac0: 7c0d 0a7c 7265 6765 7870 7c61 2072 6567  |..|regexp|a reg
+00002ad0: 756c 6172 2065 7870 7265 7373 696f 6e20  ular expression 
+00002ae0: 6173 2061 2073 7472 696e 677c 6054 7275  as a string|`Tru
+00002af0: 6560 2069 6620 6072 652e 7365 6172 6368  e` if `re.search
+00002b00: 2872 6567 6578 705f 6172 6729 6020 7265  (regexp_arg)` re
+00002b10: 7475 726e 7320 6054 7275 6560 2061 6e64  turns `True` and
+00002b20: 2060 6d65 7373 6167 652e 636f 6e74 656e   `message.conten
+00002b30: 745f 7479 7065 203d 3d20 2774 6578 7427  t_type == 'text'
+00002b40: 6020 2853 6565 205b 5079 7468 6f6e 2052  ` (See [Python R
+00002b50: 6567 756c 6172 2045 7870 7265 7373 696f  egular Expressio
+00002b60: 6e73 5d28 6874 7470 733a 2f2f 646f 6373  ns](https://docs
+00002b70: 2e70 7974 686f 6e2e 6f72 672f 322f 6c69  .python.org/2/li
+00002b80: 6272 6172 792f 7265 2e68 746d 6c29 297c  brary/re.html))|
+00002b90: 0d0a 7c63 6f6d 6d61 6e64 737c 6c69 7374  ..|commands|list
+00002ba0: 206f 6620 7374 7269 6e67 737c 6054 7275   of strings|`Tru
+00002bb0: 6560 2069 6620 606d 6573 7361 6765 2e63  e` if `message.c
+00002bc0: 6f6e 7465 6e74 5f74 7970 6520 3d3d 2027  ontent_type == '
+00002bd0: 7465 7874 2760 2061 6e64 2060 6d65 7373  text'` and `mess
+00002be0: 6167 652e 7465 7874 6020 7374 6172 7473  age.text` starts
+00002bf0: 2077 6974 6820 6120 636f 6d6d 616e 6420   with a command 
+00002c00: 7468 6174 2069 7320 696e 2074 6865 206c  that is in the l
+00002c10: 6973 7420 6f66 2073 7472 696e 6773 2e7c  ist of strings.|
+00002c20: 0d0a 7c63 6861 745f 7479 7065 737c 6c69  ..|chat_types|li
+00002c30: 7374 206f 6620 6368 6174 2074 7970 6573  st of chat types
+00002c40: 7c60 5472 7565 6020 6966 2060 6d65 7373  |`True` if `mess
+00002c50: 6167 652e 6368 6174 2e74 7970 6560 2069  age.chat.type` i
+00002c60: 6e20 796f 7572 2066 696c 7465 727c 0d0a  n your filter|..
+00002c70: 7c66 756e 637c 6120 6675 6e63 7469 6f6e  |func|a function
+00002c80: 2028 6c61 6d62 6461 206f 7220 6675 6e63   (lambda or func
+00002c90: 7469 6f6e 2072 6566 6572 656e 6365 297c  tion reference)|
+00002ca0: 6054 7275 6560 2069 6620 7468 6520 6c61  `True` if the la
+00002cb0: 6d62 6461 206f 7220 6675 6e63 7469 6f6e  mbda or function
+00002cc0: 2072 6566 6572 656e 6365 2072 6574 7572   reference retur
+00002cd0: 6e73 2060 5472 7565 607c 0d0a 090d 0a48  ns `True`|.....H
+00002ce0: 6572 6520 6172 6520 736f 6d65 2065 7861  ere are some exa
+00002cf0: 6d70 6c65 7320 6f66 2075 7369 6e67 2074  mples of using t
+00002d00: 6865 2066 696c 7465 7273 2061 6e64 206d  he filters and m
+00002d10: 6573 7361 6765 2068 616e 646c 6572 733a  essage handlers:
+00002d20: 0d0a 0d0a 6060 6070 7974 686f 6e0d 0a69  ....```python..i
+00002d30: 6d70 6f72 7420 7465 6c65 626f 740d 0a62  mport telebot..b
+00002d40: 6f74 203d 2074 656c 6562 6f74 2e54 656c  ot = telebot.Tel
+00002d50: 6542 6f74 2822 544f 4b45 4e22 290d 0a0d  eBot("TOKEN")...
+00002d60: 0a23 2048 616e 646c 6573 2061 6c6c 2074  .# Handles all t
+00002d70: 6578 7420 6d65 7373 6167 6573 2074 6861  ext messages tha
+00002d80: 7420 636f 6e74 6169 6e73 2074 6865 2063  t contains the c
+00002d90: 6f6d 6d61 6e64 7320 272f 7374 6172 7427  ommands '/start'
+00002da0: 206f 7220 272f 6865 6c70 272e 0d0a 4062   or '/help'...@b
+00002db0: 6f74 2e6d 6573 7361 6765 5f68 616e 646c  ot.message_handl
+00002dc0: 6572 2863 6f6d 6d61 6e64 733d 5b27 7374  er(commands=['st
+00002dd0: 6172 7427 2c20 2768 656c 7027 5d29 0d0a  art', 'help'])..
+00002de0: 6465 6620 6861 6e64 6c65 5f73 7461 7274  def handle_start
+00002df0: 5f68 656c 7028 6d65 7373 6167 6529 3a0d  _help(message):.
+00002e00: 0a09 7061 7373 0d0a 0d0a 2320 4861 6e64  ..pass....# Hand
+00002e10: 6c65 7320 616c 6c20 7365 6e74 2064 6f63  les all sent doc
+00002e20: 756d 656e 7473 2061 6e64 2061 7564 696f  uments and audio
+00002e30: 2066 696c 6573 0d0a 4062 6f74 2e6d 6573   files..@bot.mes
+00002e40: 7361 6765 5f68 616e 646c 6572 2863 6f6e  sage_handler(con
+00002e50: 7465 6e74 5f74 7970 6573 3d5b 2764 6f63  tent_types=['doc
+00002e60: 756d 656e 7427 2c20 2761 7564 696f 275d  ument', 'audio']
+00002e70: 290d 0a64 6566 2068 616e 646c 655f 646f  )..def handle_do
+00002e80: 6373 5f61 7564 696f 286d 6573 7361 6765  cs_audio(message
+00002e90: 293a 0d0a 0970 6173 730d 0a0d 0a23 2048  ):...pass....# H
+00002ea0: 616e 646c 6573 2061 6c6c 2074 6578 7420  andles all text 
+00002eb0: 6d65 7373 6167 6573 2074 6861 7420 6d61  messages that ma
+00002ec0: 7463 6820 7468 6520 7265 6775 6c61 7220  tch the regular 
+00002ed0: 6578 7072 6573 7369 6f6e 0d0a 4062 6f74  expression..@bot
+00002ee0: 2e6d 6573 7361 6765 5f68 616e 646c 6572  .message_handler
+00002ef0: 2872 6567 6578 703d 2253 4f4d 455f 5245  (regexp="SOME_RE
+00002f00: 4745 5850 2229 0d0a 6465 6620 6861 6e64  GEXP")..def hand
+00002f10: 6c65 5f6d 6573 7361 6765 286d 6573 7361  le_message(messa
+00002f20: 6765 293a 0d0a 0970 6173 730d 0a0d 0a23  ge):...pass....#
+00002f30: 2048 616e 646c 6573 2061 6c6c 206d 6573   Handles all mes
+00002f40: 7361 6765 7320 666f 7220 7768 6963 6820  sages for which 
+00002f50: 7468 6520 6c61 6d62 6461 2072 6574 7572  the lambda retur
+00002f60: 6e73 2054 7275 650d 0a40 626f 742e 6d65  ns True..@bot.me
+00002f70: 7373 6167 655f 6861 6e64 6c65 7228 6675  ssage_handler(fu
+00002f80: 6e63 3d6c 616d 6264 6120 6d65 7373 6167  nc=lambda messag
+00002f90: 653a 206d 6573 7361 6765 2e64 6f63 756d  e: message.docum
+00002fa0: 656e 742e 6d69 6d65 5f74 7970 6520 3d3d  ent.mime_type ==
+00002fb0: 2027 7465 7874 2f70 6c61 696e 272c 2063   'text/plain', c
+00002fc0: 6f6e 7465 6e74 5f74 7970 6573 3d5b 2764  ontent_types=['d
+00002fd0: 6f63 756d 656e 7427 5d29 0d0a 6465 6620  ocument'])..def 
+00002fe0: 6861 6e64 6c65 5f74 6578 745f 646f 6328  handle_text_doc(
+00002ff0: 6d65 7373 6167 6529 3a0d 0a09 7061 7373  message):...pass
+00003000: 0d0a 0d0a 2320 5768 6963 6820 636f 756c  ....# Which coul
+00003010: 6420 616c 736f 2062 6520 6465 6669 6e65  d also be define
+00003020: 6420 6173 3a0d 0a64 6566 2074 6573 745f  d as:..def test_
+00003030: 6d65 7373 6167 6528 6d65 7373 6167 6529  message(message)
+00003040: 3a0d 0a09 7265 7475 726e 206d 6573 7361  :...return messa
+00003050: 6765 2e64 6f63 756d 656e 742e 6d69 6d65  ge.document.mime
+00003060: 5f74 7970 6520 3d3d 2027 7465 7874 2f70  _type == 'text/p
+00003070: 6c61 696e 270d 0a0d 0a40 626f 742e 6d65  lain'....@bot.me
+00003080: 7373 6167 655f 6861 6e64 6c65 7228 6675  ssage_handler(fu
+00003090: 6e63 3d74 6573 745f 6d65 7373 6167 652c  nc=test_message,
+000030a0: 2063 6f6e 7465 6e74 5f74 7970 6573 3d5b   content_types=[
+000030b0: 2764 6f63 756d 656e 7427 5d29 0d0a 6465  'document'])..de
+000030c0: 6620 6861 6e64 6c65 5f74 6578 745f 646f  f handle_text_do
+000030d0: 6328 6d65 7373 6167 6529 3a0d 0a09 7061  c(message):...pa
+000030e0: 7373 0d0a 0d0a 2320 4861 6e64 6c65 7273  ss....# Handlers
+000030f0: 2063 616e 2062 6520 7374 6163 6b65 6420   can be stacked 
+00003100: 746f 2063 7265 6174 6520 6120 6675 6e63  to create a func
+00003110: 7469 6f6e 2077 6869 6368 2077 696c 6c20  tion which will 
+00003120: 6265 2063 616c 6c65 6420 6966 2065 6974  be called if eit
+00003130: 6865 7220 6d65 7373 6167 655f 6861 6e64  her message_hand
+00003140: 6c65 7220 6973 2065 6c69 6769 626c 650d  ler is eligible.
+00003150: 0a23 2054 6869 7320 6861 6e64 6c65 7220  .# This handler 
+00003160: 7769 6c6c 2062 6520 6361 6c6c 6564 2069  will be called i
+00003170: 6620 7468 6520 6d65 7373 6167 6520 7374  f the message st
+00003180: 6172 7473 2077 6974 6820 272f 6865 6c6c  arts with '/hell
+00003190: 6f27 204f 5220 6973 2073 6f6d 6520 656d  o' OR is some em
+000031a0: 6f6a 690d 0a40 626f 742e 6d65 7373 6167  oji..@bot.messag
+000031b0: 655f 6861 6e64 6c65 7228 636f 6d6d 616e  e_handler(comman
+000031c0: 6473 3d5b 2768 656c 6c6f 275d 290d 0a40  ds=['hello'])..@
+000031d0: 626f 742e 6d65 7373 6167 655f 6861 6e64  bot.message_hand
+000031e0: 6c65 7228 6675 6e63 3d6c 616d 6264 6120  ler(func=lambda 
+000031f0: 6d73 673a 206d 7367 2e74 6578 742e 656e  msg: msg.text.en
+00003200: 636f 6465 2822 7574 662d 3822 2920 3d3d  code("utf-8") ==
+00003210: 2053 4f4d 455f 4641 4e43 595f 454d 4f4a   SOME_FANCY_EMOJ
+00003220: 4929 0d0a 6465 6620 7365 6e64 5f73 6f6d  I)..def send_som
+00003230: 6574 6869 6e67 286d 6573 7361 6765 293a  ething(message):
+00003240: 0d0a 2020 2020 7061 7373 0d0a 6060 600d  ..    pass..```.
+00003250: 0a2a 2a49 6d70 6f72 7461 6e74 3a20 616c  .**Important: al
+00003260: 6c20 6861 6e64 6c65 7273 2061 7265 2074  l handlers are t
+00003270: 6573 7465 6420 696e 2074 6865 206f 7264  ested in the ord
+00003280: 6572 2069 6e20 7768 6963 6820 7468 6579  er in which they
+00003290: 2077 6572 6520 6465 636c 6172 6564 2a2a   were declared**
+000032a0: 0d0a 0d0a 2323 2323 2045 6469 7465 6420  ....#### Edited 
+000032b0: 4d65 7373 6167 6520 6861 6e64 6c65 720d  Message handler.
+000032c0: 0a48 616e 646c 6520 6564 6974 6564 206d  .Handle edited m
+000032d0: 6573 7361 6765 730d 0a60 4062 6f74 2e65  essages..`@bot.e
+000032e0: 6469 7465 645f 6d65 7373 6167 655f 6861  dited_message_ha
+000032f0: 6e64 6c65 7228 6669 6c74 6572 7329 2023  ndler(filters) #
+00003300: 203c 2d20 7061 7373 6573 2061 204d 6573   <- passes a Mes
+00003310: 7361 6765 2074 7970 6520 6f62 6a65 6374  sage type object
+00003320: 2074 6f20 796f 7572 2066 756e 6374 696f   to your functio
+00003330: 6e60 0d0a 0d0a 2323 2323 2043 6861 6e6e  n`....#### Chann
+00003340: 656c 2050 6f73 7420 6861 6e64 6c65 720d  el Post handler.
+00003350: 0a48 616e 646c 6520 6368 616e 6e65 6c20  .Handle channel 
+00003360: 706f 7374 206d 6573 7361 6765 730d 0a60  post messages..`
+00003370: 4062 6f74 2e63 6861 6e6e 656c 5f70 6f73  @bot.channel_pos
+00003380: 745f 6861 6e64 6c65 7228 6669 6c74 6572  t_handler(filter
+00003390: 7329 2023 203c 2d20 7061 7373 6573 2061  s) # <- passes a
+000033a0: 204d 6573 7361 6765 2074 7970 6520 6f62   Message type ob
+000033b0: 6a65 6374 2074 6f20 796f 7572 2066 756e  ject to your fun
+000033c0: 6374 696f 6e60 0d0a 0d0a 2323 2323 2045  ction`....#### E
+000033d0: 6469 7465 6420 4368 616e 6e65 6c20 506f  dited Channel Po
+000033e0: 7374 2068 616e 646c 6572 0d0a 4861 6e64  st handler..Hand
+000033f0: 6c65 2065 6469 7465 6420 6368 616e 6e65  le edited channe
+00003400: 6c20 706f 7374 206d 6573 7361 6765 730d  l post messages.
+00003410: 0a60 4062 6f74 2e65 6469 7465 645f 6368  .`@bot.edited_ch
+00003420: 616e 6e65 6c5f 706f 7374 5f68 616e 646c  annel_post_handl
+00003430: 6572 2866 696c 7465 7273 2920 2320 3c2d  er(filters) # <-
+00003440: 2070 6173 7365 7320 6120 4d65 7373 6167   passes a Messag
+00003450: 6520 7479 7065 206f 626a 6563 7420 746f  e type object to
+00003460: 2079 6f75 7220 6675 6e63 7469 6f6e 600d   your function`.
+00003470: 0a0d 0a23 2323 2320 4361 6c6c 6261 636b  ...#### Callback
+00003480: 2051 7565 7279 2048 616e 646c 6572 0d0a   Query Handler..
+00003490: 4861 6e64 6c65 2063 616c 6c62 6163 6b20  Handle callback 
+000034a0: 7175 6572 6965 730d 0a60 6060 7079 7468  queries..```pyth
+000034b0: 6f6e 0d0a 4062 6f74 2e63 616c 6c62 6163  on..@bot.callbac
+000034c0: 6b5f 7175 6572 795f 6861 6e64 6c65 7228  k_query_handler(
+000034d0: 6675 6e63 3d6c 616d 6264 6120 6361 6c6c  func=lambda call
+000034e0: 3a20 5472 7565 290d 0a64 6566 2074 6573  : True)..def tes
+000034f0: 745f 6361 6c6c 6261 636b 2863 616c 6c29  t_callback(call)
+00003500: 3a20 2320 3c2d 2070 6173 7365 7320 6120  : # <- passes a 
+00003510: 4361 6c6c 6261 636b 5175 6572 7920 7479  CallbackQuery ty
+00003520: 7065 206f 626a 6563 7420 746f 2079 6f75  pe object to you
+00003530: 7220 6675 6e63 7469 6f6e 0d0a 2020 2020  r function..    
+00003540: 6c6f 6767 6572 2e69 6e66 6f28 6361 6c6c  logger.info(call
+00003550: 290d 0a60 6060 0d0a 0d0a 2323 2323 2053  )..```....#### S
+00003560: 6869 7070 696e 6720 5175 6572 7920 4861  hipping Query Ha
+00003570: 6e64 6c65 720d 0a48 616e 646c 6520 7368  ndler..Handle sh
+00003580: 6970 7069 6e67 2071 7565 7269 6573 0d0a  ipping queries..
+00003590: 6040 626f 742e 7368 6970 7069 6e67 5f71  `@bot.shipping_q
+000035a0: 7565 7279 5f68 616e 6465 6c65 7228 2920  uery_handeler() 
+000035b0: 2320 3c2d 2070 6173 7365 7320 6120 5368  # <- passes a Sh
+000035c0: 6970 7069 6e67 5175 6572 7920 7479 7065  ippingQuery type
+000035d0: 206f 626a 6563 7420 746f 2079 6f75 7220   object to your 
+000035e0: 6675 6e63 7469 6f6e 600d 0a0d 0a23 2323  function`....###
+000035f0: 2320 5072 6520 4368 6563 6b6f 7574 2051  # Pre Checkout Q
+00003600: 7565 7279 2048 616e 646c 6572 0d0a 4861  uery Handler..Ha
+00003610: 6e64 6c65 2070 7265 2063 6865 636b 6f75  ndle pre checkou
+00003620: 7074 2071 7565 7269 6573 0d0a 6040 626f  pt queries..`@bo
+00003630: 742e 7072 655f 6368 6563 6b6f 7574 5f71  t.pre_checkout_q
+00003640: 7565 7279 5f68 616e 646c 6572 2829 2023  uery_handler() #
+00003650: 203c 2d20 7061 7373 6573 2061 2050 7265   <- passes a Pre
+00003660: 4368 6563 6b6f 7574 5175 6572 7920 7479  CheckoutQuery ty
+00003670: 7065 206f 626a 6563 7420 746f 2079 6f75  pe object to you
+00003680: 7220 6675 6e63 7469 6f6e 600d 0a0d 0a23  r function`....#
+00003690: 2323 2320 506f 6c6c 2048 616e 646c 6572  ### Poll Handler
+000036a0: 0d0a 4861 6e64 6c65 2070 6f6c 6c20 7570  ..Handle poll up
+000036b0: 6461 7465 730d 0a60 4062 6f74 2e70 6f6c  dates..`@bot.pol
+000036c0: 6c5f 6861 6e64 6c65 7228 2920 2320 3c2d  l_handler() # <-
+000036d0: 2070 6173 7365 7320 6120 506f 6c6c 2074   passes a Poll t
+000036e0: 7970 6520 6f62 6a65 6374 2074 6f20 796f  ype object to yo
+000036f0: 7572 2066 756e 6374 696f 6e60 0d0a 0d0a  ur function`....
+00003700: 2323 2323 2050 6f6c 6c20 416e 7377 6572  #### Poll Answer
+00003710: 2048 616e 646c 6572 0d0a 4861 6e64 6c65   Handler..Handle
+00003720: 2070 6f6c 6c20 616e 7377 6572 730d 0a60   poll answers..`
+00003730: 4062 6f74 2e70 6f6c 6c5f 616e 7377 6572  @bot.poll_answer
+00003740: 5f68 616e 646c 6572 2829 2023 203c 2d20  _handler() # <- 
+00003750: 7061 7373 6573 2061 2050 6f6c 6c41 6e73  passes a PollAns
+00003760: 7765 7220 7479 7065 206f 626a 6563 7420  wer type object 
+00003770: 746f 2079 6f75 7220 6675 6e63 7469 6f6e  to your function
+00003780: 600d 0a0d 0a23 2323 2320 4d79 2043 6861  `....#### My Cha
+00003790: 7420 4d65 6d62 6572 2048 616e 646c 6572  t Member Handler
+000037a0: 0d0a 4861 6e64 6c65 2075 7064 6174 6573  ..Handle updates
+000037b0: 206f 6620 6120 7468 6520 626f 7427 7320   of a the bot's 
+000037c0: 6d65 6d62 6572 2073 7461 7475 7320 696e  member status in
+000037d0: 2061 2063 6861 740d 0a60 4062 6f74 2e6d   a chat..`@bot.m
+000037e0: 795f 6368 6174 5f6d 656d 6265 725f 6861  y_chat_member_ha
+000037f0: 6e64 6c65 7228 2920 2320 3c2d 2070 6173  ndler() # <- pas
+00003800: 7365 7320 6120 4368 6174 4d65 6d62 6572  ses a ChatMember
+00003810: 5570 6461 7465 6420 7479 7065 206f 626a  Updated type obj
+00003820: 6563 7420 746f 2079 6f75 7220 6675 6e63  ect to your func
+00003830: 7469 6f6e 600d 0a0d 0a23 2323 2320 4368  tion`....#### Ch
+00003840: 6174 204d 656d 6265 7220 4861 6e64 6c65  at Member Handle
+00003850: 720d 0a48 616e 646c 6520 7570 6461 7465  r..Handle update
+00003860: 7320 6f66 2061 2063 6861 7420 6d65 6d62  s of a chat memb
+00003870: 6572 2773 2073 7461 7475 7320 696e 2061  er's status in a
+00003880: 2063 6861 740d 0a60 4062 6f74 2e63 6861   chat..`@bot.cha
+00003890: 745f 6d65 6d62 6572 5f68 616e 646c 6572  t_member_handler
+000038a0: 2829 2023 203c 2d20 7061 7373 6573 2061  () # <- passes a
+000038b0: 2043 6861 744d 656d 6265 7255 7064 6174   ChatMemberUpdat
+000038c0: 6564 2074 7970 6520 6f62 6a65 6374 2074  ed type object t
+000038d0: 6f20 796f 7572 2066 756e 6374 696f 6e60  o your function`
+000038e0: 0d0a 2a4e 6f74 653a 2022 6368 6174 5f6d  ..*Note: "chat_m
+000038f0: 656d 6265 7222 2075 7064 6174 6573 2061  ember" updates a
+00003900: 7265 206e 6f74 2072 6571 7565 7374 6564  re not requested
+00003910: 2062 7920 6465 6661 756c 742e 2049 6620   by default. If 
+00003920: 796f 7520 7761 6e74 2074 6f20 616c 6c6f  you want to allo
+00003930: 7720 616c 6c20 7570 6461 7465 2074 7970  w all update typ
+00003940: 6573 2c20 7365 7420 6061 6c6c 6f77 6564  es, set `allowed
+00003950: 5f75 7064 6174 6573 6020 696e 2060 626f  _updates` in `bo
+00003960: 742e 706f 6c6c 696e 6728 2960 202f 2060  t.polling()` / `
+00003970: 626f 742e 696e 6669 6e69 7479 5f70 6f6c  bot.infinity_pol
+00003980: 6c69 6e67 2829 6020 746f 2060 7574 696c  ling()` to `util
+00003990: 2e75 7064 6174 655f 7479 7065 7360 2a0d  .update_types`*.
+000039a0: 0a0d 0a23 2323 2320 4368 6174 204a 6f69  ...#### Chat Joi
+000039b0: 6e20 5265 7175 6573 7420 4861 6e64 6c65  n Request Handle
+000039c0: 7209 0d0a 4861 6e64 6c65 2063 6861 7420  r...Handle chat 
+000039d0: 6a6f 696e 2072 6571 7565 7374 7320 7573  join requests us
+000039e0: 696e 673a 0d0a 6040 626f 742e 6368 6174  ing:..`@bot.chat
+000039f0: 5f6a 6f69 6e5f 7265 7175 6573 745f 6861  _join_request_ha
+00003a00: 6e64 6c65 7228 2920 2320 3c2d 2070 6173  ndler() # <- pas
+00003a10: 7365 7320 4368 6174 496e 7669 7465 4c69  ses ChatInviteLi
+00003a20: 6e6b 2074 7970 6520 6f62 6a65 6374 2074  nk type object t
+00003a30: 6f20 796f 7572 2066 756e 6374 696f 6e60  o your function`
+00003a40: 0d0a 0d0a 2323 2320 496e 6c69 6e65 204d  ....### Inline M
+00003a50: 6f64 650d 0a0d 0a4d 6f72 6520 696e 666f  ode....More info
+00003a60: 726d 6174 696f 6e20 6162 6f75 7420 5b49  rmation about [I
+00003a70: 6e6c 696e 6520 6d6f 6465 5d28 6874 7470  nline mode](http
+00003a80: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
+00003a90: 6d2e 6f72 672f 626f 7473 2f69 6e6c 696e  m.org/bots/inlin
+00003aa0: 6529 2e0d 0a0d 0a23 2323 2320 496e 6c69  e).....#### Inli
+00003ab0: 6e65 2068 616e 646c 6572 0d0a 0d0a 4e6f  ne handler....No
+00003ac0: 772c 2079 6f75 2063 616e 2075 7365 2069  w, you can use i
+00003ad0: 6e6c 696e 655f 6861 6e64 6c65 7220 746f  nline_handler to
+00003ae0: 2067 6574 2069 6e6c 696e 6520 7175 6572   get inline quer
+00003af0: 6965 7320 696e 2074 656c 6562 6f74 2e0d  ies in telebot..
+00003b00: 0a0d 0a60 6060 7079 7468 6f6e 0d0a 0d0a  ...```python....
+00003b10: 4062 6f74 2e69 6e6c 696e 655f 6861 6e64  @bot.inline_hand
+00003b20: 6c65 7228 6c61 6d62 6461 2071 7565 7279  ler(lambda query
+00003b30: 3a20 7175 6572 792e 7175 6572 7920 3d3d  : query.query ==
+00003b40: 2027 7465 7874 2729 0d0a 6465 6620 7175   'text')..def qu
+00003b50: 6572 795f 7465 7874 2869 6e6c 696e 655f  ery_text(inline_
+00003b60: 7175 6572 7929 3a0d 0a20 2020 2023 2051  query):..    # Q
+00003b70: 7565 7279 206d 6573 7361 6765 2069 7320  uery message is 
+00003b80: 7465 7874 0d0a 6060 600d 0a0d 0a23 2323  text..```....###
+00003b90: 2320 4368 6f73 656e 2049 6e6c 696e 6520  # Chosen Inline 
+00003ba0: 6861 6e64 6c65 720d 0a0d 0a55 7365 2063  handler....Use c
+00003bb0: 686f 7365 6e5f 696e 6c69 6e65 5f68 616e  hosen_inline_han
+00003bc0: 646c 6572 2074 6f20 6765 7420 6368 6f73  dler to get chos
+00003bd0: 656e 5f69 6e6c 696e 655f 7265 7375 6c74  en_inline_result
+00003be0: 2069 6e20 7465 6c65 626f 742e 2044 6f6e   in telebot. Don
+00003bf0: 2774 2066 6f72 676f 7420 6164 6420 7468  't forgot add th
+00003c00: 6520 2f73 6574 696e 6c69 6e65 6665 6564  e /setinlinefeed
+00003c10: 6261 636b 0d0a 636f 6d6d 616e 6420 666f  back..command fo
+00003c20: 7220 4042 6f74 6661 7468 6572 2e0d 0a0d  r @Botfather....
+00003c30: 0a4d 6f72 6520 696e 666f 726d 6174 696f  .More informatio
+00003c40: 6e20 3a20 5b63 6f6c 6c65 6374 696e 672d  n : [collecting-
+00003c50: 6665 6564 6261 636b 5d28 6874 7470 733a  feedback](https:
+00003c60: 2f2f 636f 7265 2e74 656c 6567 7261 6d2e  //core.telegram.
+00003c70: 6f72 672f 626f 7473 2f69 6e6c 696e 6523  org/bots/inline#
+00003c80: 636f 6c6c 6563 7469 6e67 2d66 6565 6462  collecting-feedb
+00003c90: 6163 6b29 0d0a 0d0a 6060 6070 7974 686f  ack)....```pytho
+00003ca0: 6e0d 0a40 626f 742e 6368 6f73 656e 5f69  n..@bot.chosen_i
+00003cb0: 6e6c 696e 655f 6861 6e64 6c65 7228 6675  nline_handler(fu
+00003cc0: 6e63 3d6c 616d 6264 6120 6368 6f73 656e  nc=lambda chosen
+00003cd0: 5f69 6e6c 696e 655f 7265 7375 6c74 3a20  _inline_result: 
+00003ce0: 5472 7565 290d 0a64 6566 2074 6573 745f  True)..def test_
+00003cf0: 6368 6f73 656e 2863 686f 7365 6e5f 696e  chosen(chosen_in
+00003d00: 6c69 6e65 5f72 6573 756c 7429 3a0d 0a20  line_result):.. 
+00003d10: 2020 2023 2050 726f 6365 7373 2061 6c6c     # Process all
+00003d20: 2063 686f 7365 6e5f 696e 6c69 6e65 5f72   chosen_inline_r
+00003d30: 6573 756c 742e 0d0a 6060 600d 0a0d 0a23  esult...```....#
+00003d40: 2323 2320 416e 7377 6572 2049 6e6c 696e  ### Answer Inlin
+00003d50: 6520 5175 6572 790d 0a0d 0a60 6060 7079  e Query....```py
+00003d60: 7468 6f6e 0d0a 4062 6f74 2e69 6e6c 696e  thon..@bot.inlin
+00003d70: 655f 6861 6e64 6c65 7228 6c61 6d62 6461  e_handler(lambda
+00003d80: 2071 7565 7279 3a20 7175 6572 792e 7175   query: query.qu
+00003d90: 6572 7920 3d3d 2027 7465 7874 2729 0d0a  ery == 'text')..
+00003da0: 6465 6620 7175 6572 795f 7465 7874 2869  def query_text(i
+00003db0: 6e6c 696e 655f 7175 6572 7929 3a0d 0a20  nline_query):.. 
+00003dc0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00003dd0: 2072 203d 2074 7970 6573 2e49 6e6c 696e   r = types.Inlin
+00003de0: 6551 7565 7279 5265 7375 6c74 4172 7469  eQueryResultArti
+00003df0: 636c 6528 2731 272c 2027 5265 7375 6c74  cle('1', 'Result
+00003e00: 272c 2074 7970 6573 2e49 6e70 7574 5465  ', types.InputTe
+00003e10: 7874 4d65 7373 6167 6543 6f6e 7465 6e74  xtMessageContent
+00003e20: 2827 5265 7375 6c74 206d 6573 7361 6765  ('Result message
+00003e30: 2e27 2929 0d0a 2020 2020 2020 2020 7232  .'))..        r2
+00003e40: 203d 2074 7970 6573 2e49 6e6c 696e 6551   = types.InlineQ
+00003e50: 7565 7279 5265 7375 6c74 4172 7469 636c  ueryResultArticl
+00003e60: 6528 2732 272c 2027 5265 7375 6c74 3227  e('2', 'Result2'
+00003e70: 2c20 7479 7065 732e 496e 7075 7454 6578  , types.InputTex
+00003e80: 744d 6573 7361 6765 436f 6e74 656e 7428  tMessageContent(
+00003e90: 2752 6573 756c 7420 6d65 7373 6167 6532  'Result message2
+00003ea0: 2e27 2929 0d0a 2020 2020 2020 2020 626f  .'))..        bo
+00003eb0: 742e 616e 7377 6572 5f69 6e6c 696e 655f  t.answer_inline_
+00003ec0: 7175 6572 7928 696e 6c69 6e65 5f71 7565  query(inline_que
+00003ed0: 7279 2e69 642c 205b 722c 2072 325d 290d  ry.id, [r, r2]).
+00003ee0: 0a20 2020 2065 7863 6570 7420 4578 6365  .    except Exce
+00003ef0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00003f00: 2020 2020 2070 7269 6e74 2865 290d 0a0d       print(e)...
+00003f10: 0a60 6060 0d0a 0d0a 2323 2320 4164 6469  .```....### Addi
+00003f20: 7469 6f6e 616c 2041 5049 2066 6561 7475  tional API featu
+00003f30: 7265 730d 0a0d 0a23 2323 2320 4d69 6464  res....#### Midd
+00003f40: 6c65 7761 7265 2048 616e 646c 6572 730d  leware Handlers.
+00003f50: 0a0d 0a41 206d 6964 646c 6577 6172 6520  ...A middleware 
+00003f60: 6861 6e64 6c65 7220 6973 2061 2066 756e  handler is a fun
+00003f70: 6374 696f 6e20 7468 6174 2061 6c6c 6f77  ction that allow
+00003f80: 7320 796f 7520 746f 206d 6f64 6966 7920  s you to modify 
+00003f90: 7265 7175 6573 7473 206f 7220 7468 6520  requests or the 
+00003fa0: 626f 7420 636f 6e74 6578 7420 6173 2074  bot context as t
+00003fb0: 6865 7920 7061 7373 2074 6872 6f75 6768  hey pass through
+00003fc0: 2074 6865 200d 0a54 656c 6567 7261 6d20   the ..Telegram 
+00003fd0: 746f 2074 6865 2062 6f74 2e20 596f 7520  to the bot. You 
+00003fe0: 6361 6e20 696d 6167 696e 6520 6d69 6464  can imagine midd
+00003ff0: 6c65 7761 7265 2061 7320 6120 6368 6169  leware as a chai
+00004000: 6e20 6f66 206c 6f67 6963 2063 6f6e 6e65  n of logic conne
+00004010: 6374 696f 6e20 6861 6e64 6c65 6420 6265  ction handled be
+00004020: 666f 7265 2061 6e79 206f 7468 6572 2068  fore any other h
+00004030: 616e 646c 6572 7320 6172 650d 0a65 7865  andlers are..exe
+00004040: 6375 7465 642e 204d 6964 646c 6577 6172  cuted. Middlewar
+00004050: 6520 7072 6f63 6573 7369 6e67 2069 7320  e processing is 
+00004060: 6469 7361 626c 6564 2062 7920 6465 6661  disabled by defa
+00004070: 756c 742c 2065 6e61 626c 6520 6974 2062  ult, enable it b
+00004080: 7920 7365 7474 696e 6720 6061 7069 6865  y setting `apihe
+00004090: 6c70 6572 2e45 4e41 424c 455f 4d49 4444  lper.ENABLE_MIDD
+000040a0: 4c45 5741 5245 203d 2054 7275 6560 2e20  LEWARE = True`. 
+000040b0: 0d0a 0d0a 6060 6070 7974 686f 6e0d 0a61  ....```python..a
+000040c0: 7069 6865 6c70 6572 2e45 4e41 424c 455f  pihelper.ENABLE_
+000040d0: 4d49 4444 4c45 5741 5245 203d 2054 7275  MIDDLEWARE = Tru
+000040e0: 650d 0a0d 0a40 626f 742e 6d69 6464 6c65  e....@bot.middle
+000040f0: 7761 7265 5f68 616e 646c 6572 2875 7064  ware_handler(upd
+00004100: 6174 655f 7479 7065 733d 5b27 6d65 7373  ate_types=['mess
+00004110: 6167 6527 5d29 0d0a 6465 6620 6d6f 6469  age'])..def modi
+00004120: 6679 5f6d 6573 7361 6765 2862 6f74 5f69  fy_message(bot_i
+00004130: 6e73 7461 6e63 652c 206d 6573 7361 6765  nstance, message
+00004140: 293a 0d0a 2020 2020 2320 6d6f 6469 6679  ):..    # modify
+00004150: 696e 6720 7468 6520 6d65 7373 6167 6520  ing the message 
+00004160: 6265 666f 7265 2069 7420 7265 6163 6865  before it reache
+00004170: 7320 616e 7920 6f74 6865 7220 6861 6e64  s any other hand
+00004180: 6c65 7220 0d0a 2020 2020 6d65 7373 6167  ler ..    messag
+00004190: 652e 616e 6f74 6865 725f 7465 7874 203d  e.another_text =
+000041a0: 206d 6573 7361 6765 2e74 6578 7420 2b20   message.text + 
+000041b0: 273a 6368 616e 6765 6427 0d0a 0d0a 4062  ':changed'....@b
+000041c0: 6f74 2e6d 6573 7361 6765 5f68 616e 646c  ot.message_handl
+000041d0: 6572 2863 6f6d 6d61 6e64 733d 5b27 7374  er(commands=['st
+000041e0: 6172 7427 5d29 0d0a 6465 6620 7374 6172  art'])..def star
+000041f0: 7428 6d65 7373 6167 6529 3a0d 0a20 2020  t(message):..   
+00004200: 2023 2074 6865 206d 6573 7361 6765 2069   # the message i
+00004210: 7320 616c 7265 6164 7920 6d6f 6469 6669  s already modifi
+00004220: 6564 2077 6865 6e20 6974 2072 6561 6368  ed when it reach
+00004230: 6573 206d 6573 7361 6765 2068 616e 646c  es message handl
+00004240: 6572 0d0a 2020 2020 6173 7365 7274 206d  er..    assert m
+00004250: 6573 7361 6765 2e61 6e6f 7468 6572 5f74  essage.another_t
+00004260: 6578 7420 3d3d 206d 6573 7361 6765 2e74  ext == message.t
+00004270: 6578 7420 2b20 273a 6368 616e 6765 6427  ext + ':changed'
+00004280: 0d0a 6060 600d 0a54 6865 7265 2061 7265  ..```..There are
+00004290: 206f 7468 6572 2065 7861 6d70 6c65 7320   other examples 
+000042a0: 7573 696e 6720 6d69 6464 6c65 7761 7265  using middleware
+000042b0: 2068 616e 646c 6572 2069 6e20 7468 6520   handler in the 
+000042c0: 5b65 7861 6d70 6c65 732f 6d69 6464 6c65  [examples/middle
+000042d0: 7761 7265 5d28 6578 616d 706c 6573 2f6d  ware](examples/m
+000042e0: 6964 646c 6577 6172 6529 2064 6972 6563  iddleware) direc
+000042f0: 746f 7279 2e0d 0a0d 0a23 2323 2320 436c  tory.....#### Cl
+00004300: 6173 732d 6261 7365 6420 6d69 6464 6c65  ass-based middle
+00004310: 7761 7265 730d 0a54 6865 7265 2061 7265  wares..There are
+00004320: 2063 6c61 7373 2d62 6173 6564 206d 6964   class-based mid
+00004330: 646c 6577 6172 6573 2e20 0d0a 4261 7369  dlewares. ..Basi
+00004340: 6320 636c 6173 732d 6261 7365 6420 6d69  c class-based mi
+00004350: 6464 6c65 7761 7265 206c 6f6f 6b73 206c  ddleware looks l
+00004360: 696b 6520 7468 6973 3a0d 0a60 6060 7079  ike this:..```py
+00004370: 7468 6f6e 0d0a 636c 6173 7320 4d69 6464  thon..class Midd
+00004380: 6c65 7761 7265 2842 6173 654d 6964 646c  leware(BaseMiddl
+00004390: 6577 6172 6529 3a0d 0a20 2020 2064 6566  eware):..    def
+000043a0: 205f 5f69 6e69 745f 5f28 7365 6c66 293a   __init__(self):
+000043b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e75  ..        self.u
+000043c0: 7064 6174 655f 7479 7065 7320 3d20 5b27  pdate_types = ['
+000043d0: 6d65 7373 6167 6527 5d0d 0a20 2020 2064  message']..    d
+000043e0: 6566 2070 7265 5f70 726f 6365 7373 2873  ef pre_process(s
+000043f0: 656c 662c 206d 6573 7361 6765 2c20 6461  elf, message, da
+00004400: 7461 293a 0d0a 2020 2020 2020 2020 6461  ta):..        da
+00004410: 7461 5b27 666f 6f27 5d20 3d20 2748 656c  ta['foo'] = 'Hel
+00004420: 6c6f 2720 2320 6a75 7374 2066 6f72 2065  lo' # just for e
+00004430: 7861 6d70 6c65 0d0a 2020 2020 2020 2020  xample..        
+00004440: 2320 7765 2065 6469 7465 6420 7468 6520  # we edited the 
+00004450: 6461 7461 2e20 6e6f 772c 2074 6869 7320  data. now, this 
+00004460: 6461 7461 2069 7320 7061 7373 6564 2074  data is passed t
+00004470: 6f20 6861 6e64 6c65 722e 0d0a 2020 2020  o handler...    
+00004480: 2020 2020 2320 7265 7475 726e 2053 6b69      # return Ski
+00004490: 7048 616e 646c 6572 2829 202d 3e20 7468  pHandler() -> th
+000044a0: 6973 2077 696c 6c20 736b 6970 2068 616e  is will skip han
+000044b0: 646c 6572 0d0a 2020 2020 2020 2020 2320  dler..        # 
+000044c0: 7265 7475 726e 2043 616e 6365 6c55 7064  return CancelUpd
+000044d0: 6174 6528 2920 2d3e 2074 6869 7320 7769  ate() -> this wi
+000044e0: 6c6c 2063 616e 6365 6c20 7570 6461 7465  ll cancel update
+000044f0: 0d0a 2020 2020 6465 6620 706f 7374 5f70  ..    def post_p
+00004500: 726f 6365 7373 2873 656c 662c 206d 6573  rocess(self, mes
+00004510: 7361 6765 2c20 6461 7461 2c20 6578 6365  sage, data, exce
+00004520: 7074 696f 6e3d 4e6f 6e65 293a 0d0a 2020  ption=None):..  
+00004530: 2020 2020 2020 7072 696e 7428 6461 7461        print(data
+00004540: 5b27 666f 6f27 5d29 0d0a 2020 2020 2020  ['foo'])..      
+00004550: 2020 6966 2065 7863 6570 7469 6f6e 3a20    if exception: 
+00004560: 2320 6368 6563 6b20 666f 7220 6578 6365  # check for exce
+00004570: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
+00004580: 2020 2070 7269 6e74 2865 7863 6570 7469     print(excepti
+00004590: 6f6e 290d 0a60 6060 0d0a 436c 6173 732d  on)..```..Class-
+000045a0: 6261 7365 6420 6d69 6464 6c65 7761 7265  based middleware
+000045b0: 2073 686f 756c 6420 6861 7665 2074 6f20   should have to 
+000045c0: 6675 6e63 7469 6f6e 733a 2070 6f73 7420  functions: post 
+000045d0: 616e 6420 7072 6520 7072 6f63 6573 732e  and pre process.
+000045e0: 0d0a 536f 2c20 6173 2079 6f75 2063 616e  ..So, as you can
+000045f0: 2073 6565 2c20 636c 6173 732d 6261 7365   see, class-base
+00004600: 6420 6d69 6464 6c65 7761 7265 7320 776f  d middlewares wo
+00004610: 726b 2062 6566 6f72 6520 616e 6420 6166  rk before and af
+00004620: 7465 7220 6861 6e64 6c65 7220 6578 6563  ter handler exec
+00004630: 7574 696f 6e2e 0d0a 466f 7220 6d6f 7265  ution...For more
+00004640: 2c20 6368 6563 6b20 6f75 7420 696e 205b  , check out in [
+00004650: 6578 616d 706c 6573 5d28 6874 7470 733a  examples](https:
+00004660: 2f2f 6769 7468 7562 2e63 6f6d 2f65 7465  //github.com/ete
+00004670: 726e 6e6f 6972 2f70 7954 656c 6567 7261  rnnoir/pyTelegra
+00004680: 6d42 6f74 4150 492f 7472 6565 2f6d 6173  mBotAPI/tree/mas
+00004690: 7465 722f 6578 616d 706c 6573 2f6d 6964  ter/examples/mid
+000046a0: 646c 6577 6172 652f 636c 6173 735f 6261  dleware/class_ba
+000046b0: 7365 6429 090d 0a09 0d0a 2323 2323 2043  sed)......#### C
+000046c0: 7573 746f 6d20 6669 6c74 6572 730d 0a41  ustom filters..A
+000046d0: 6c73 6f2c 2079 6f75 2063 616e 2075 7365  lso, you can use
+000046e0: 2062 7569 6c74 2d69 6e20 6375 7374 6f6d   built-in custom
+000046f0: 2066 696c 7465 7273 2e20 4f72 2c20 796f   filters. Or, yo
+00004700: 7520 6361 6e20 6372 6561 7465 2079 6f75  u can create you
+00004710: 7220 6f77 6e20 6669 6c74 6572 2e09 0d0a  r own filter....
+00004720: 0d0a 5b45 7861 6d70 6c65 206f 6620 6375  ..[Example of cu
+00004730: 7374 6f6d 2066 696c 7465 725d 2868 7474  stom filter](htt
+00004740: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00004750: 6574 6572 6e6e 6f69 722f 7079 5465 6c65  eternnoir/pyTele
+00004760: 6772 616d 426f 7441 5049 2f62 6c6f 622f  gramBotAPI/blob/
+00004770: 6d61 7374 6572 2f65 7861 6d70 6c65 732f  master/examples/
+00004780: 6375 7374 6f6d 5f66 696c 7465 7273 2f67  custom_filters/g
+00004790: 656e 6572 616c 5f63 7573 746f 6d5f 6669  eneral_custom_fi
+000047a0: 6c74 6572 732e 7079 290d 0a09 0d0a 416c  lters.py).....Al
+000047b0: 736f 2c20 7765 2068 6176 6520 6578 616d  so, we have exam
+000047c0: 706c 6573 206f 6e20 7468 656d 2e20 4368  ples on them. Ch
+000047d0: 6563 6b20 7468 6973 206c 696e 6b73 3a0d  eck this links:.
+000047e0: 0a09 0d0a 596f 7520 6361 6e20 6368 6563  ....You can chec
+000047f0: 6b20 736f 6d65 2062 7569 6c74 2d69 6e20  k some built-in 
+00004800: 6669 6c74 6572 7320 696e 2073 6f75 7263  filters in sourc
+00004810: 6520 5b63 6f64 655d 2868 7474 7073 3a2f  e [code](https:/
+00004820: 2f67 6974 6875 622e 636f 6d2f 6574 6572  /github.com/eter
+00004830: 6e6e 6f69 722f 7079 5465 6c65 6772 616d  nnoir/pyTelegram
+00004840: 426f 7441 5049 2f62 6c6f 622f 6d61 7374  BotAPI/blob/mast
+00004850: 6572 2f74 656c 6562 6f74 2f63 7573 746f  er/telebot/custo
+00004860: 6d5f 6669 6c74 6572 732e 7079 290d 0a09  m_filters.py)...
+00004870: 0d0a 4578 616d 706c 6520 6f66 205b 6669  ..Example of [fi
+00004880: 6c74 6572 696e 6720 6279 2069 645d 2868  ltering by id](h
+00004890: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+000048a0: 6d2f 6574 6572 6e6e 6f69 722f 7079 5465  m/eternnoir/pyTe
+000048b0: 6c65 6772 616d 426f 7441 5049 2f62 6c6f  legramBotAPI/blo
+000048c0: 622f 6d61 7374 6572 2f65 7861 6d70 6c65  b/master/example
+000048d0: 732f 6375 7374 6f6d 5f66 696c 7465 7273  s/custom_filters
+000048e0: 2f69 645f 6669 6c74 6572 5f65 7861 6d70  /id_filter_examp
+000048f0: 6c65 2e70 7929 0d0a 090d 0a45 7861 6d70  le.py).....Examp
+00004900: 6c65 206f 6620 5b66 696c 7465 7269 6e67  le of [filtering
+00004910: 2062 7920 7465 7874 5d28 6874 7470 733a   by text](https:
+00004920: 2f2f 6769 7468 7562 2e63 6f6d 2f65 7465  //github.com/ete
+00004930: 726e 6e6f 6972 2f70 7954 656c 6567 7261  rnnoir/pyTelegra
+00004940: 6d42 6f74 4150 492f 626c 6f62 2f6d 6173  mBotAPI/blob/mas
+00004950: 7465 722f 6578 616d 706c 6573 2f63 7573  ter/examples/cus
+00004960: 746f 6d5f 6669 6c74 6572 732f 7465 7874  tom_filters/text
+00004970: 5f66 696c 7465 725f 6578 616d 706c 652e  _filter_example.
+00004980: 7079 290d 0a09 0d0a 4966 2079 6f75 2077  py).....If you w
+00004990: 616e 7420 746f 2061 6464 2073 6f6d 6520  ant to add some 
+000049a0: 6275 696c 742d 696e 2066 696c 7465 722c  built-in filter,
+000049b0: 2079 6f75 2061 7265 2077 656c 636f 6d65   you are welcome
+000049c0: 2074 6f20 6164 6420 6974 2069 6e20 6375   to add it in cu
+000049d0: 7374 6f6d 5f66 696c 7465 7273 2e70 7920  stom_filters.py 
+000049e0: 6669 6c65 2e0d 0a09 0d0a 4865 7265 2069  file......Here i
+000049f0: 7320 6578 616d 706c 6520 6f66 2063 7265  s example of cre
+00004a00: 6174 696e 6720 6669 6c74 6572 2d63 6c61  ating filter-cla
+00004a10: 7373 3a0d 0a09 0d0a 6060 6070 7974 686f  ss:.....```pytho
+00004a20: 6e0d 0a63 6c61 7373 2049 7341 646d 696e  n..class IsAdmin
+00004a30: 2874 656c 6562 6f74 2e63 7573 746f 6d5f  (telebot.custom_
+00004a40: 6669 6c74 6572 732e 5369 6d70 6c65 4375  filters.SimpleCu
+00004a50: 7374 6f6d 4669 6c74 6572 293a 0d0a 2020  stomFilter):..  
+00004a60: 2020 2320 436c 6173 7320 7769 6c6c 2063    # Class will c
+00004a70: 6865 636b 2077 6865 7468 6572 2074 6865  heck whether the
+00004a80: 2075 7365 7220 6973 2061 646d 696e 206f   user is admin o
+00004a90: 7220 6372 6561 746f 7220 696e 2067 726f  r creator in gro
+00004aa0: 7570 206f 7220 6e6f 740d 0a20 2020 206b  up or not..    k
+00004ab0: 6579 3d27 6973 5f63 6861 745f 6164 6d69  ey='is_chat_admi
+00004ac0: 6e27 0d0a 2020 2020 4073 7461 7469 636d  n'..    @staticm
+00004ad0: 6574 686f 640d 0a20 2020 2064 6566 2063  ethod..    def c
+00004ae0: 6865 636b 286d 6573 7361 6765 3a20 7465  heck(message: te
+00004af0: 6c65 626f 742e 7479 7065 732e 4d65 7373  lebot.types.Mess
+00004b00: 6167 6529 3a0d 0a20 2020 2020 2020 2072  age):..        r
+00004b10: 6574 7572 6e20 626f 742e 6765 745f 6368  eturn bot.get_ch
+00004b20: 6174 5f6d 656d 6265 7228 6d65 7373 6167  at_member(messag
+00004b30: 652e 6368 6174 2e69 642c 6d65 7373 6167  e.chat.id,messag
+00004b40: 652e 6672 6f6d 5f75 7365 722e 6964 292e  e.from_user.id).
+00004b50: 7374 6174 7573 2069 6e20 5b27 6164 6d69  status in ['admi
+00004b60: 6e69 7374 7261 746f 7227 2c27 6372 6561  nistrator','crea
+00004b70: 746f 7227 5d0d 0a09 0d0a 2320 546f 2072  tor'].....# To r
+00004b80: 6567 6973 7465 7220 6669 6c74 6572 2c20  egister filter, 
+00004b90: 796f 7520 6e65 6564 2074 6f20 7573 6520  you need to use 
+00004ba0: 6d65 7468 6f64 2061 6464 5f63 7573 746f  method add_custo
+00004bb0: 6d5f 6669 6c74 6572 2e0d 0a62 6f74 2e61  m_filter...bot.a
+00004bc0: 6464 5f63 7573 746f 6d5f 6669 6c74 6572  dd_custom_filter
+00004bd0: 2849 7341 646d 696e 2829 290d 0a09 0d0a  (IsAdmin()).....
+00004be0: 2320 4e6f 772c 2079 6f75 2063 616e 2075  # Now, you can u
+00004bf0: 7365 2069 7420 696e 2068 616e 646c 6572  se it in handler
+00004c00: 2e0d 0a40 626f 742e 6d65 7373 6167 655f  ...@bot.message_
+00004c10: 6861 6e64 6c65 7228 6973 5f63 6861 745f  handler(is_chat_
+00004c20: 6164 6d69 6e3d 5472 7565 290d 0a64 6566  admin=True)..def
+00004c30: 2061 646d 696e 5f6f 665f 6772 6f75 7028   admin_of_group(
+00004c40: 6d65 7373 6167 6529 3a0d 0a09 626f 742e  message):...bot.
+00004c50: 7365 6e64 5f6d 6573 7361 6765 286d 6573  send_message(mes
+00004c60: 7361 6765 2e63 6861 742e 6964 2c20 2759  sage.chat.id, 'Y
+00004c70: 6f75 2061 7265 2061 646d 696e 206f 6620  ou are admin of 
+00004c80: 7468 6973 2067 726f 7570 2127 290d 0a0d  this group!')...
+00004c90: 0a60 6060 0d0a 090d 0a0d 0a23 2323 2320  .```.......#### 
+00004ca0: 5465 6c65 426f 740d 0a60 6060 7079 7468  TeleBot..```pyth
+00004cb0: 6f6e 0d0a 696d 706f 7274 2074 656c 6562  on..import teleb
+00004cc0: 6f74 0d0a 0d0a 544f 4b45 4e20 3d20 273c  ot....TOKEN = '<
+00004cd0: 746f 6b65 6e5f 7374 7269 6e67 3e27 0d0a  token_string>'..
+00004ce0: 7462 203d 2074 656c 6562 6f74 2e54 656c  tb = telebot.Tel
+00004cf0: 6542 6f74 2854 4f4b 454e 2909 2363 7265  eBot(TOKEN).#cre
+00004d00: 6174 6520 6120 6e65 7720 5465 6c65 6772  ate a new Telegr
+00004d10: 616d 2042 6f74 206f 626a 6563 740d 0a0d  am Bot object...
+00004d20: 0a23 2055 706f 6e20 6361 6c6c 696e 6720  .# Upon calling 
+00004d30: 7468 6973 2066 756e 6374 696f 6e2c 2054  this function, T
+00004d40: 656c 6542 6f74 2073 7461 7274 7320 706f  eleBot starts po
+00004d50: 6c6c 696e 6720 7468 6520 5465 6c65 6772  lling the Telegr
+00004d60: 616d 2073 6572 7665 7273 2066 6f72 206e  am servers for n
+00004d70: 6577 206d 6573 7361 6765 732e 0d0a 2320  ew messages...# 
+00004d80: 2d20 696e 7465 7276 616c 3a20 696e 7420  - interval: int 
+00004d90: 2864 6566 6175 6c74 2030 2920 2d20 5468  (default 0) - Th
+00004da0: 6520 696e 7465 7276 616c 2062 6574 7765  e interval betwe
+00004db0: 656e 2070 6f6c 6c69 6e67 2072 6571 7565  en polling reque
+00004dc0: 7374 730d 0a23 202d 2074 696d 656f 7574  sts..# - timeout
+00004dd0: 3a20 696e 7465 6765 7220 2864 6566 6175  : integer (defau
+00004de0: 6c74 2032 3029 202d 2054 696d 656f 7574  lt 20) - Timeout
+00004df0: 2069 6e20 7365 636f 6e64 7320 666f 7220   in seconds for 
+00004e00: 6c6f 6e67 2070 6f6c 6c69 6e67 2e0d 0a23  long polling...#
+00004e10: 202d 2061 6c6c 6f77 6564 5f75 7064 6174   - allowed_updat
+00004e20: 6573 3a20 4c69 7374 206f 6620 5374 7269  es: List of Stri
+00004e30: 6e67 7320 2864 6566 6175 6c74 204e 6f6e  ngs (default Non
+00004e40: 6529 202d 204c 6973 7420 6f66 2075 7064  e) - List of upd
+00004e50: 6174 6520 7479 7065 7320 746f 2072 6571  ate types to req
+00004e60: 7565 7374 200d 0a74 622e 696e 6669 6e69  uest ..tb.infini
+00004e70: 7479 5f70 6f6c 6c69 6e67 2869 6e74 6572  ty_polling(inter
+00004e80: 7661 6c3d 302c 2074 696d 656f 7574 3d32  val=0, timeout=2
+00004e90: 3029 0d0a 0d0a 2320 6765 744d 650d 0a75  0)....# getMe..u
+00004ea0: 7365 7220 3d20 7462 2e67 6574 5f6d 6528  ser = tb.get_me(
+00004eb0: 290d 0a0d 0a23 2073 6574 5765 6268 6f6f  )....# setWebhoo
+00004ec0: 6b0d 0a74 622e 7365 745f 7765 6268 6f6f  k..tb.set_webhoo
+00004ed0: 6b28 7572 6c3d 2268 7474 703a 2f2f 6578  k(url="http://ex
+00004ee0: 616d 706c 652e 636f 6d22 2c20 6365 7274  ample.com", cert
+00004ef0: 6966 6963 6174 653d 6f70 656e 2827 6d79  ificate=open('my
+00004f00: 6365 7274 2e70 656d 2729 290d 0a23 2075  cert.pem'))..# u
+00004f10: 6e73 6574 2077 6562 686f 6f6b 0d0a 7462  nset webhook..tb
+00004f20: 2e72 656d 6f76 655f 7765 6268 6f6f 6b28  .remove_webhook(
+00004f30: 290d 0a0d 0a23 2067 6574 5570 6461 7465  )....# getUpdate
+00004f40: 730d 0a75 7064 6174 6573 203d 2074 622e  s..updates = tb.
+00004f50: 6765 745f 7570 6461 7465 7328 290d 0a23  get_updates()..#
+00004f60: 206f 720d 0a75 7064 6174 6573 203d 2074   or..updates = t
+00004f70: 622e 6765 745f 7570 6461 7465 7328 3132  b.get_updates(12
+00004f80: 3334 2c31 3030 2c32 3029 2023 6765 745f  34,100,20) #get_
+00004f90: 5570 6461 7465 7328 6f66 6673 6574 2c20  Updates(offset, 
+00004fa0: 6c69 6d69 742c 2074 696d 656f 7574 293a  limit, timeout):
+00004fb0: 0d0a 0d0a 2320 7365 6e64 4d65 7373 6167  ....# sendMessag
+00004fc0: 650d 0a74 622e 7365 6e64 5f6d 6573 7361  e..tb.send_messa
+00004fd0: 6765 2863 6861 745f 6964 2c20 7465 7874  ge(chat_id, text
+00004fe0: 290d 0a0d 0a23 2065 6469 744d 6573 7361  )....# editMessa
+00004ff0: 6765 5465 7874 0d0a 7462 2e65 6469 745f  geText..tb.edit_
+00005000: 6d65 7373 6167 655f 7465 7874 286e 6577  message_text(new
+00005010: 5f74 6578 742c 2063 6861 745f 6964 2c20  _text, chat_id, 
+00005020: 6d65 7373 6167 655f 6964 290d 0a0d 0a23  message_id)....#
+00005030: 2066 6f72 7761 7264 4d65 7373 6167 650d   forwardMessage.
+00005040: 0a74 622e 666f 7277 6172 645f 6d65 7373  .tb.forward_mess
+00005050: 6167 6528 746f 5f63 6861 745f 6964 2c20  age(to_chat_id, 
+00005060: 6672 6f6d 5f63 6861 745f 6964 2c20 6d65  from_chat_id, me
+00005070: 7373 6167 655f 6964 290d 0a0d 0a23 2041  ssage_id)....# A
+00005080: 6c6c 2073 656e 645f 7879 7a20 6675 6e63  ll send_xyz func
+00005090: 7469 6f6e 7320 7768 6963 6820 6361 6e20  tions which can 
+000050a0: 7461 6b65 2061 2066 696c 6520 6173 2061  take a file as a
+000050b0: 6e20 6172 6775 6d65 6e74 2c20 6361 6e20  n argument, can 
+000050c0: 616c 736f 2074 616b 6520 6120 6669 6c65  also take a file
+000050d0: 5f69 6420 696e 7374 6561 6420 6f66 2061  _id instead of a
+000050e0: 2066 696c 652e 0d0a 2320 7365 6e64 5068   file...# sendPh
+000050f0: 6f74 6f0d 0a70 686f 746f 203d 206f 7065  oto..photo = ope
+00005100: 6e28 272f 746d 702f 7068 6f74 6f2e 706e  n('/tmp/photo.pn
+00005110: 6727 2c20 2772 6227 290d 0a74 622e 7365  g', 'rb')..tb.se
+00005120: 6e64 5f70 686f 746f 2863 6861 745f 6964  nd_photo(chat_id
+00005130: 2c20 7068 6f74 6f29 0d0a 7462 2e73 656e  , photo)..tb.sen
+00005140: 645f 7068 6f74 6f28 6368 6174 5f69 642c  d_photo(chat_id,
+00005150: 2022 4649 4c45 4944 2229 0d0a 0d0a 2320   "FILEID")....# 
+00005160: 7365 6e64 4175 6469 6f0d 0a61 7564 696f  sendAudio..audio
+00005170: 203d 206f 7065 6e28 272f 746d 702f 6175   = open('/tmp/au
+00005180: 6469 6f2e 6d70 3327 2c20 2772 6227 290d  dio.mp3', 'rb').
+00005190: 0a74 622e 7365 6e64 5f61 7564 696f 2863  .tb.send_audio(c
+000051a0: 6861 745f 6964 2c20 6175 6469 6f29 0d0a  hat_id, audio)..
+000051b0: 7462 2e73 656e 645f 6175 6469 6f28 6368  tb.send_audio(ch
+000051c0: 6174 5f69 642c 2022 4649 4c45 4944 2229  at_id, "FILEID")
+000051d0: 0d0a 0d0a 2323 2073 656e 6441 7564 696f  ....## sendAudio
+000051e0: 2077 6974 6820 6475 7261 7469 6f6e 2c20   with duration, 
+000051f0: 7065 7266 6f72 6d65 7220 616e 6420 7469  performer and ti
+00005200: 746c 652e 0d0a 7462 2e73 656e 645f 6175  tle...tb.send_au
+00005210: 6469 6f28 4348 4154 5f49 442c 2066 696c  dio(CHAT_ID, fil
+00005220: 655f 6461 7461 2c20 312c 2027 6574 6572  e_data, 1, 'eter
+00005230: 6e6e 6f69 7227 2c20 2770 7954 656c 6567  nnoir', 'pyTeleg
+00005240: 7261 6d27 290d 0a0d 0a23 2073 656e 6456  ram')....# sendV
+00005250: 6f69 6365 0d0a 766f 6963 6520 3d20 6f70  oice..voice = op
+00005260: 656e 2827 2f74 6d70 2f76 6f69 6365 2e6f  en('/tmp/voice.o
+00005270: 6767 272c 2027 7262 2729 0d0a 7462 2e73  gg', 'rb')..tb.s
+00005280: 656e 645f 766f 6963 6528 6368 6174 5f69  end_voice(chat_i
+00005290: 642c 2076 6f69 6365 290d 0a74 622e 7365  d, voice)..tb.se
+000052a0: 6e64 5f76 6f69 6365 2863 6861 745f 6964  nd_voice(chat_id
+000052b0: 2c20 2246 494c 4549 4422 290d 0a0d 0a23  , "FILEID")....#
+000052c0: 2073 656e 6444 6f63 756d 656e 740d 0a64   sendDocument..d
+000052d0: 6f63 203d 206f 7065 6e28 272f 746d 702f  oc = open('/tmp/
+000052e0: 6669 6c65 2e74 7874 272c 2027 7262 2729  file.txt', 'rb')
+000052f0: 0d0a 7462 2e73 656e 645f 646f 6375 6d65  ..tb.send_docume
+00005300: 6e74 2863 6861 745f 6964 2c20 646f 6329  nt(chat_id, doc)
+00005310: 0d0a 7462 2e73 656e 645f 646f 6375 6d65  ..tb.send_docume
+00005320: 6e74 2863 6861 745f 6964 2c20 2246 494c  nt(chat_id, "FIL
+00005330: 4549 4422 290d 0a0d 0a23 2073 656e 6453  EID")....# sendS
+00005340: 7469 636b 6572 0d0a 7374 6920 3d20 6f70  ticker..sti = op
+00005350: 656e 2827 2f74 6d70 2f73 7469 2e77 6562  en('/tmp/sti.web
+00005360: 7027 2c20 2772 6227 290d 0a74 622e 7365  p', 'rb')..tb.se
+00005370: 6e64 5f73 7469 636b 6572 2863 6861 745f  nd_sticker(chat_
+00005380: 6964 2c20 7374 6929 0d0a 7462 2e73 656e  id, sti)..tb.sen
+00005390: 645f 7374 6963 6b65 7228 6368 6174 5f69  d_sticker(chat_i
+000053a0: 642c 2022 4649 4c45 4944 2229 0d0a 0d0a  d, "FILEID")....
+000053b0: 2320 7365 6e64 5669 6465 6f0d 0a76 6964  # sendVideo..vid
+000053c0: 656f 203d 206f 7065 6e28 272f 746d 702f  eo = open('/tmp/
+000053d0: 7669 6465 6f2e 6d70 3427 2c20 2772 6227  video.mp4', 'rb'
+000053e0: 290d 0a74 622e 7365 6e64 5f76 6964 656f  )..tb.send_video
+000053f0: 2863 6861 745f 6964 2c20 7669 6465 6f29  (chat_id, video)
+00005400: 0d0a 7462 2e73 656e 645f 7669 6465 6f28  ..tb.send_video(
+00005410: 6368 6174 5f69 642c 2022 4649 4c45 4944  chat_id, "FILEID
+00005420: 2229 0d0a 0d0a 2320 7365 6e64 5669 6465  ")....# sendVide
+00005430: 6f4e 6f74 650d 0a76 6964 656f 6e6f 7465  oNote..videonote
+00005440: 203d 206f 7065 6e28 272f 746d 702f 7669   = open('/tmp/vi
+00005450: 6465 6f6e 6f74 652e 6d70 3427 2c20 2772  deonote.mp4', 'r
+00005460: 6227 290d 0a74 622e 7365 6e64 5f76 6964  b')..tb.send_vid
+00005470: 656f 5f6e 6f74 6528 6368 6174 5f69 642c  eo_note(chat_id,
+00005480: 2076 6964 656f 6e6f 7465 290d 0a74 622e   videonote)..tb.
+00005490: 7365 6e64 5f76 6964 656f 5f6e 6f74 6528  send_video_note(
+000054a0: 6368 6174 5f69 642c 2022 4649 4c45 4944  chat_id, "FILEID
+000054b0: 2229 0d0a 0d0a 2320 7365 6e64 4c6f 6361  ")....# sendLoca
+000054c0: 7469 6f6e 0d0a 7462 2e73 656e 645f 6c6f  tion..tb.send_lo
+000054d0: 6361 7469 6f6e 2863 6861 745f 6964 2c20  cation(chat_id, 
+000054e0: 6c61 742c 206c 6f6e 290d 0a0d 0a23 2073  lat, lon)....# s
+000054f0: 656e 6443 6861 7441 6374 696f 6e0d 0a23  endChatAction..#
+00005500: 2061 6374 696f 6e5f 7374 7269 6e67 2063   action_string c
+00005510: 616e 2062 6520 6f6e 6520 6f66 2074 6865  an be one of the
+00005520: 2066 6f6c 6c6f 7769 6e67 2073 7472 696e   following strin
+00005530: 6773 3a20 2774 7970 696e 6727 2c20 2775  gs: 'typing', 'u
+00005540: 706c 6f61 645f 7068 6f74 6f27 2c20 2772  pload_photo', 'r
+00005550: 6563 6f72 645f 7669 6465 6f27 2c20 2775  ecord_video', 'u
+00005560: 706c 6f61 645f 7669 6465 6f27 2c0d 0a23  pload_video',..#
+00005570: 2027 7265 636f 7264 5f61 7564 696f 272c   'record_audio',
+00005580: 2027 7570 6c6f 6164 5f61 7564 696f 272c   'upload_audio',
+00005590: 2027 7570 6c6f 6164 5f64 6f63 756d 656e   'upload_documen
+000055a0: 7427 206f 7220 2766 696e 645f 6c6f 6361  t' or 'find_loca
+000055b0: 7469 6f6e 272e 0d0a 7462 2e73 656e 645f  tion'...tb.send_
+000055c0: 6368 6174 5f61 6374 696f 6e28 6368 6174  chat_action(chat
+000055d0: 5f69 642c 2061 6374 696f 6e5f 7374 7269  _id, action_stri
+000055e0: 6e67 290d 0a0d 0a23 2067 6574 4669 6c65  ng)....# getFile
+000055f0: 0d0a 2320 446f 776e 6c6f 6164 696e 6720  ..# Downloading 
+00005600: 6120 6669 6c65 2069 7320 7374 7261 6967  a file is straig
+00005610: 6874 666f 7277 6172 640d 0a23 2052 6574  htforward..# Ret
+00005620: 7572 6e73 2061 2046 696c 6520 6f62 6a65  urns a File obje
+00005630: 6374 0d0a 696d 706f 7274 2072 6571 7565  ct..import reque
+00005640: 7374 730d 0a66 696c 655f 696e 666f 203d  sts..file_info =
+00005650: 2074 622e 6765 745f 6669 6c65 2866 696c   tb.get_file(fil
+00005660: 655f 6964 290d 0a0d 0a66 696c 6520 3d20  e_id)....file = 
+00005670: 7265 7175 6573 7473 2e67 6574 2827 6874  requests.get('ht
+00005680: 7470 733a 2f2f 6170 692e 7465 6c65 6772  tps://api.telegr
+00005690: 616d 2e6f 7267 2f66 696c 652f 626f 747b  am.org/file/bot{
+000056a0: 307d 2f7b 317d 272e 666f 726d 6174 2841  0}/{1}'.format(A
+000056b0: 5049 5f54 4f4b 454e 2c20 6669 6c65 5f69  PI_TOKEN, file_i
+000056c0: 6e66 6f2e 6669 6c65 5f70 6174 6829 290d  nfo.file_path)).
+000056d0: 0a0d 0a0d 0a60 6060 0d0a 2323 2323 2052  .....```..#### R
+000056e0: 6570 6c79 206d 6172 6b75 700d 0a41 6c6c  eply markup..All
+000056f0: 2060 7365 6e64 5f78 797a 6020 6675 6e63   `send_xyz` func
+00005700: 7469 6f6e 7320 6f66 2054 656c 6542 6f74  tions of TeleBot
+00005710: 2074 616b 6520 616e 206f 7074 696f 6e61   take an optiona
+00005720: 6c20 6072 6570 6c79 5f6d 6172 6b75 7060  l `reply_markup`
+00005730: 2061 7267 756d 656e 742e 2054 6869 7320   argument. This 
+00005740: 6172 6775 6d65 6e74 206d 7573 7420 6265  argument must be
+00005750: 2061 6e20 696e 7374 616e 6365 206f 6620   an instance of 
+00005760: 6052 6570 6c79 4b65 7962 6f61 7264 4d61  `ReplyKeyboardMa
+00005770: 726b 7570 602c 2060 5265 706c 794b 6579  rkup`, `ReplyKey
+00005780: 626f 6172 6452 656d 6f76 6560 206f 7220  boardRemove` or 
+00005790: 6046 6f72 6365 5265 706c 7960 2c20 7768  `ForceReply`, wh
+000057a0: 6963 6820 6172 6520 6465 6669 6e65 6420  ich are defined 
+000057b0: 696e 2074 7970 6573 2e70 792e 0d0a 0d0a  in types.py.....
+000057c0: 6060 6070 7974 686f 6e0d 0a66 726f 6d20  ```python..from 
+000057d0: 7465 6c65 626f 7420 696d 706f 7274 2074  telebot import t
+000057e0: 7970 6573 0d0a 0d0a 2320 5573 696e 6720  ypes....# Using 
+000057f0: 7468 6520 5265 706c 794b 6579 626f 6172  the ReplyKeyboar
+00005800: 644d 6172 6b75 7020 636c 6173 730d 0a23  dMarkup class..#
+00005810: 2049 7427 7320 636f 6e73 7472 7563 746f   It's constructo
+00005820: 7220 6361 6e20 7461 6b65 2074 6865 2066  r can take the f
+00005830: 6f6c 6c6f 7769 6e67 206f 7074 696f 6e61  ollowing optiona
+00005840: 6c20 6172 6775 6d65 6e74 733a 0d0a 2320  l arguments:..# 
+00005850: 2d20 7265 7369 7a65 5f6b 6579 626f 6172  - resize_keyboar
+00005860: 643a 2054 7275 652f 4661 6c73 6520 2864  d: True/False (d
+00005870: 6566 6175 6c74 2046 616c 7365 290d 0a23  efault False)..#
+00005880: 202d 206f 6e65 5f74 696d 655f 6b65 7962   - one_time_keyb
+00005890: 6f61 7264 3a20 5472 7565 2f46 616c 7365  oard: True/False
+000058a0: 2028 6465 6661 756c 7420 4661 6c73 6529   (default False)
+000058b0: 0d0a 2320 2d20 7365 6c65 6374 6976 653a  ..# - selective:
+000058c0: 2054 7275 652f 4661 6c73 6520 2864 6566   True/False (def
+000058d0: 6175 6c74 2046 616c 7365 290d 0a23 202d  ault False)..# -
+000058e0: 2072 6f77 5f77 6964 7468 3a20 696e 7465   row_width: inte
+000058f0: 6765 7220 2864 6566 6175 6c74 2033 290d  ger (default 3).
+00005900: 0a23 2072 6f77 5f77 6964 7468 2069 7320  .# row_width is 
+00005910: 7573 6564 2069 6e20 636f 6d62 696e 6174  used in combinat
+00005920: 696f 6e20 7769 7468 2074 6865 2061 6464  ion with the add
+00005930: 2829 2066 756e 6374 696f 6e2e 0d0a 2320  () function...# 
+00005940: 4974 2064 6566 696e 6573 2068 6f77 206d  It defines how m
+00005950: 616e 7920 6275 7474 6f6e 7320 6172 6520  any buttons are 
+00005960: 6669 7420 6f6e 2065 6163 6820 726f 7720  fit on each row 
+00005970: 6265 666f 7265 2063 6f6e 7469 6e75 696e  before continuin
+00005980: 6720 6f6e 2074 6865 206e 6578 7420 726f  g on the next ro
+00005990: 772e 0d0a 6d61 726b 7570 203d 2074 7970  w...markup = typ
+000059a0: 6573 2e52 6570 6c79 4b65 7962 6f61 7264  es.ReplyKeyboard
+000059b0: 4d61 726b 7570 2872 6f77 5f77 6964 7468  Markup(row_width
+000059c0: 3d32 290d 0a69 7465 6d62 746e 3120 3d20  =2)..itembtn1 = 
+000059d0: 7479 7065 732e 4b65 7962 6f61 7264 4275  types.KeyboardBu
+000059e0: 7474 6f6e 2827 6127 290d 0a69 7465 6d62  tton('a')..itemb
+000059f0: 746e 3220 3d20 7479 7065 732e 4b65 7962  tn2 = types.Keyb
+00005a00: 6f61 7264 4275 7474 6f6e 2827 7627 290d  oardButton('v').
+00005a10: 0a69 7465 6d62 746e 3320 3d20 7479 7065  .itembtn3 = type
+00005a20: 732e 4b65 7962 6f61 7264 4275 7474 6f6e  s.KeyboardButton
+00005a30: 2827 6427 290d 0a6d 6172 6b75 702e 6164  ('d')..markup.ad
+00005a40: 6428 6974 656d 6274 6e31 2c20 6974 656d  d(itembtn1, item
+00005a50: 6274 6e32 2c20 6974 656d 6274 6e33 290d  btn2, itembtn3).
+00005a60: 0a74 622e 7365 6e64 5f6d 6573 7361 6765  .tb.send_message
+00005a70: 2863 6861 745f 6964 2c20 2243 686f 6f73  (chat_id, "Choos
+00005a80: 6520 6f6e 6520 6c65 7474 6572 3a22 2c20  e one letter:", 
+00005a90: 7265 706c 795f 6d61 726b 7570 3d6d 6172  reply_markup=mar
+00005aa0: 6b75 7029 0d0a 0d0a 2320 6f72 2061 6464  kup)....# or add
+00005ab0: 204b 6579 626f 6172 6442 7574 746f 6e20   KeyboardButton 
+00005ac0: 6f6e 6520 726f 7720 6174 2061 2074 696d  one row at a tim
+00005ad0: 653a 0d0a 6d61 726b 7570 203d 2074 7970  e:..markup = typ
+00005ae0: 6573 2e52 6570 6c79 4b65 7962 6f61 7264  es.ReplyKeyboard
+00005af0: 4d61 726b 7570 2829 0d0a 6974 656d 6274  Markup()..itembt
+00005b00: 6e61 203d 2074 7970 6573 2e4b 6579 626f  na = types.Keybo
+00005b10: 6172 6442 7574 746f 6e28 2761 2729 0d0a  ardButton('a')..
+00005b20: 6974 656d 6274 6e76 203d 2074 7970 6573  itembtnv = types
+00005b30: 2e4b 6579 626f 6172 6442 7574 746f 6e28  .KeyboardButton(
+00005b40: 2776 2729 0d0a 6974 656d 6274 6e63 203d  'v')..itembtnc =
+00005b50: 2074 7970 6573 2e4b 6579 626f 6172 6442   types.KeyboardB
+00005b60: 7574 746f 6e28 2763 2729 0d0a 6974 656d  utton('c')..item
+00005b70: 6274 6e64 203d 2074 7970 6573 2e4b 6579  btnd = types.Key
+00005b80: 626f 6172 6442 7574 746f 6e28 2764 2729  boardButton('d')
+00005b90: 0d0a 6974 656d 6274 6e65 203d 2074 7970  ..itembtne = typ
+00005ba0: 6573 2e4b 6579 626f 6172 6442 7574 746f  es.KeyboardButto
+00005bb0: 6e28 2765 2729 0d0a 6d61 726b 7570 2e72  n('e')..markup.r
+00005bc0: 6f77 2869 7465 6d62 746e 612c 2069 7465  ow(itembtna, ite
+00005bd0: 6d62 746e 7629 0d0a 6d61 726b 7570 2e72  mbtnv)..markup.r
+00005be0: 6f77 2869 7465 6d62 746e 632c 2069 7465  ow(itembtnc, ite
+00005bf0: 6d62 746e 642c 2069 7465 6d62 746e 6529  mbtnd, itembtne)
+00005c00: 0d0a 7462 2e73 656e 645f 6d65 7373 6167  ..tb.send_messag
+00005c10: 6528 6368 6174 5f69 642c 2022 4368 6f6f  e(chat_id, "Choo
+00005c20: 7365 206f 6e65 206c 6574 7465 723a 222c  se one letter:",
+00005c30: 2072 6570 6c79 5f6d 6172 6b75 703d 6d61   reply_markup=ma
+00005c40: 726b 7570 290d 0a60 6060 0d0a 5468 6520  rkup)..```..The 
+00005c50: 6c61 7374 2065 7861 6d70 6c65 2079 6965  last example yie
+00005c60: 6c64 7320 7468 6973 2072 6573 756c 743a  lds this result:
+00005c70: 0d0a 0d0a 215b 5265 706c 794b 6579 626f  ....![ReplyKeybo
+00005c80: 6172 644d 6172 6b75 705d 2868 7474 7073  ardMarkup](https
+00005c90: 3a2f 2f66 6172 6d33 2e73 7461 7469 6366  ://farm3.staticf
+00005ca0: 6c69 636b 722e 636f 6d2f 3239 3333 2f33  lickr.com/2933/3
+00005cb0: 3234 3138 3732 3637 3034 5f39 6566 3736  2418726704_9ef76
+00005cc0: 3039 3363 665f 6f5f 642e 6a70 6720 2252  093cf_o_d.jpg "R
+00005cd0: 6570 6c79 4b65 7962 6f61 7264 4d61 726b  eplyKeyboardMark
+00005ce0: 7570 2229 0d0a 0d0a 6060 6070 7974 686f  up")....```pytho
+00005cf0: 6e0d 0a23 2052 6570 6c79 4b65 7962 6f61  n..# ReplyKeyboa
+00005d00: 7264 5265 6d6f 7665 3a20 6869 6465 7320  rdRemove: hides 
+00005d10: 6120 7072 6576 696f 7573 6c79 2073 656e  a previously sen
+00005d20: 7420 5265 706c 794b 6579 626f 6172 644d  t ReplyKeyboardM
+00005d30: 6172 6b75 700d 0a23 2054 616b 6573 2061  arkup..# Takes a
+00005d40: 6e20 6f70 7469 6f6e 616c 2073 656c 6563  n optional selec
+00005d50: 7469 7665 2061 7267 756d 656e 7420 2854  tive argument (T
+00005d60: 7275 652f 4661 6c73 652c 2064 6566 6175  rue/False, defau
+00005d70: 6c74 2046 616c 7365 290d 0a6d 6172 6b75  lt False)..marku
+00005d80: 7020 3d20 7479 7065 732e 5265 706c 794b  p = types.ReplyK
+00005d90: 6579 626f 6172 6452 656d 6f76 6528 7365  eyboardRemove(se
+00005da0: 6c65 6374 6976 653d 4661 6c73 6529 0d0a  lective=False)..
+00005db0: 7462 2e73 656e 645f 6d65 7373 6167 6528  tb.send_message(
+00005dc0: 6368 6174 5f69 642c 206d 6573 7361 6765  chat_id, message
+00005dd0: 2c20 7265 706c 795f 6d61 726b 7570 3d6d  , reply_markup=m
+00005de0: 6172 6b75 7029 0d0a 6060 600d 0a0d 0a60  arkup)..```....`
+00005df0: 6060 7079 7468 6f6e 0d0a 2320 466f 7263  ``python..# Forc
+00005e00: 6552 6570 6c79 3a20 666f 7263 6573 2061  eReply: forces a
+00005e10: 2075 7365 7220 746f 2072 6570 6c79 2074   user to reply t
+00005e20: 6f20 6120 6d65 7373 6167 650d 0a23 2054  o a message..# T
+00005e30: 616b 6573 2061 6e20 6f70 7469 6f6e 616c  akes an optional
+00005e40: 2073 656c 6563 7469 7665 2061 7267 756d   selective argum
+00005e50: 656e 7420 2854 7275 652f 4661 6c73 652c  ent (True/False,
+00005e60: 2064 6566 6175 6c74 2046 616c 7365 290d   default False).
+00005e70: 0a6d 6172 6b75 7020 3d20 7479 7065 732e  .markup = types.
+00005e80: 466f 7263 6552 6570 6c79 2873 656c 6563  ForceReply(selec
+00005e90: 7469 7665 3d46 616c 7365 290d 0a74 622e  tive=False)..tb.
+00005ea0: 7365 6e64 5f6d 6573 7361 6765 2863 6861  send_message(cha
+00005eb0: 745f 6964 2c20 2253 656e 6420 6d65 2061  t_id, "Send me a
+00005ec0: 6e6f 7468 6572 2077 6f72 643a 222c 2072  nother word:", r
+00005ed0: 6570 6c79 5f6d 6172 6b75 703d 6d61 726b  eply_markup=mark
+00005ee0: 7570 290d 0a60 6060 0d0a 466f 7263 6552  up)..```..ForceR
+00005ef0: 6570 6c79 3a0d 0a0d 0a21 5b46 6f72 6365  eply:....![Force
+00005f00: 5265 706c 795d 2868 7474 7073 3a2f 2f66  Reply](https://f
+00005f10: 6172 6d34 2e73 7461 7469 6366 6c69 636b  arm4.staticflick
+00005f20: 722e 636f 6d2f 3338 3039 2f33 3234 3138  r.com/3809/32418
+00005f30: 3732 3638 3134 5f64 3162 6165 6330 6663  726814_d1baec0fc
+00005f40: 325f 6f5f 642e 6a70 6720 2246 6f72 6365  2_o_d.jpg "Force
+00005f50: 5265 706c 7922 290d 0a0d 0a0d 0a23 2323  Reply")......###
+00005f60: 2057 6f72 6b69 6e67 2077 6974 6820 656e   Working with en
+00005f70: 7469 7469 6573 0d0a 5468 6973 206f 626a  tities..This obj
+00005f80: 6563 7420 7265 7072 6573 656e 7473 206f  ect represents o
+00005f90: 6e65 2073 7065 6369 616c 2065 6e74 6974  ne special entit
+00005fa0: 7920 696e 2061 2074 6578 7420 6d65 7373  y in a text mess
+00005fb0: 6167 652e 2046 6f72 2065 7861 6d70 6c65  age. For example
+00005fc0: 2c20 6861 7368 7461 6773 2c20 7573 6572  , hashtags, user
+00005fd0: 6e61 6d65 732c 2055 524c 732c 2065 7463  names, URLs, etc
+00005fe0: 2e0d 0a41 7474 7269 6275 7465 733a 0d0a  ...Attributes:..
+00005ff0: 2a20 6074 7970 6560 0d0a 2a20 6075 726c  * `type`..* `url
+00006000: 600d 0a2a 2060 6f66 6673 6574 600d 0a2a  `..* `offset`..*
+00006010: 2060 6c65 6e67 7468 600d 0a2a 2060 7573   `length`..* `us
+00006020: 6572 600d 0a0d 0a0d 0a2a 2a48 6572 6527  er`......**Here'
+00006030: 7320 616e 2045 7861 6d70 6c65 3a2a 2a60  s an Example:**`
+00006040: 6d65 7373 6167 652e 656e 7469 7469 6573  message.entities
+00006050: 5b6e 756d 5d2e 3c61 7474 7269 6275 7465  [num].<attribute
+00006060: 3e60 3c62 723e 0d0a 4865 7265 2060 6e75  >`<br>..Here `nu
+00006070: 6d60 2069 7320 7468 6520 656e 7469 7479  m` is the entity
+00006080: 206e 756d 6265 7220 6f72 206f 7264 6572   number or order
+00006090: 206f 6620 656e 7469 7479 2069 6e20 6120   of entity in a 
+000060a0: 7265 706c 792c 2066 6f72 2069 6620 696e  reply, for if in
+000060b0: 6361 7365 2074 6865 7265 2061 7265 206d  case there are m
+000060c0: 756c 7469 706c 6520 656e 7469 7469 6573  ultiple entities
+000060d0: 2069 6e20 7468 6520 7265 706c 792f 6d65   in the reply/me
+000060e0: 7373 6167 652e 3c62 723e 0d0a 606d 6573  ssage.<br>..`mes
+000060f0: 7361 6765 2e65 6e74 6974 6965 7360 2072  sage.entities` r
+00006100: 6574 7572 6e73 2061 206c 6973 7420 6f66  eturns a list of
+00006110: 2065 6e74 6974 6965 7320 6f62 6a65 6374   entities object
+00006120: 2e20 3c62 723e 0d0a 606d 6573 7361 6765  . <br>..`message
+00006130: 2e65 6e74 6974 6965 735b 305d 2e74 7970  .entities[0].typ
+00006140: 6560 2077 6f75 6c64 2067 6976 6520 7468  e` would give th
+00006150: 6520 7479 7065 206f 6620 7468 6520 6669  e type of the fi
+00006160: 7273 7420 656e 7469 7479 3c62 723e 0d0a  rst entity<br>..
+00006170: 5265 6665 7220 5b42 6f74 2041 7069 5d28  Refer [Bot Api](
+00006180: 6874 7470 733a 2f2f 636f 7265 2e74 656c  https://core.tel
+00006190: 6567 7261 6d2e 6f72 672f 626f 7473 2f61  egram.org/bots/a
+000061a0: 7069 236d 6573 7361 6765 656e 7469 7479  pi#messageentity
+000061b0: 2920 666f 7220 6578 7472 6120 6465 7461  ) for extra deta
+000061c0: 696c 730d 0a0d 0a23 2320 4164 7661 6e63  ils....## Advanc
+000061d0: 6564 2075 7365 206f 6620 7468 6520 4150  ed use of the AP
+000061e0: 490d 0a0d 0a23 2323 2055 7369 6e67 206c  I....### Using l
+000061f0: 6f63 616c 2042 6f74 2041 5049 2053 6576  ocal Bot API Sev
+00006200: 6572 0d0a 5369 6e63 6520 7665 7273 696f  er..Since versio
+00006210: 6e20 352e 3020 6f66 2074 6865 2042 6f74  n 5.0 of the Bot
+00006220: 2041 5049 2c20 796f 7520 6861 7665 2074   API, you have t
+00006230: 6865 2070 6f73 7369 6269 6c69 7479 2074  he possibility t
+00006240: 6f20 7275 6e20 796f 7572 206f 776e 205b  o run your own [
+00006250: 4c6f 6361 6c20 426f 7420 4150 4920 5365  Local Bot API Se
+00006260: 7276 6572 5d28 6874 7470 733a 2f2f 636f  rver](https://co
+00006270: 7265 2e74 656c 6567 7261 6d2e 6f72 672f  re.telegram.org/
+00006280: 626f 7473 2f61 7069 2375 7369 6e67 2d61  bots/api#using-a
+00006290: 2d6c 6f63 616c 2d62 6f74 2d61 7069 2d73  -local-bot-api-s
+000062a0: 6572 7665 7229 2e0d 0a70 7954 656c 6567  erver)...pyTeleg
+000062b0: 7261 6d42 6f74 4150 4920 616c 736f 2073  ramBotAPI also s
+000062c0: 7570 706f 7274 7320 7468 6973 2066 6561  upports this fea
+000062d0: 7475 7265 2e0d 0a60 6060 7079 7468 6f6e  ture...```python
+000062e0: 0d0a 6672 6f6d 2074 656c 6562 6f74 2069  ..from telebot i
+000062f0: 6d70 6f72 7420 6170 6968 656c 7065 720d  mport apihelper.
+00006300: 0a0d 0a61 7069 6865 6c70 6572 2e41 5049  ...apihelper.API
+00006310: 5f55 524c 203d 2022 6874 7470 3a2f 2f6c  _URL = "http://l
+00006320: 6f63 616c 686f 7374 3a34 3230 302f 626f  ocalhost:4200/bo
+00006330: 747b 307d 2f7b 317d 220d 0a60 6060 0d0a  t{0}/{1}"..```..
+00006340: 2a2a 496d 706f 7274 616e 743a 204c 696b  **Important: Lik
+00006350: 6520 6465 7363 7269 6265 6420 5b68 6572  e described [her
+00006360: 655d 2868 7474 7073 3a2f 2f63 6f72 652e  e](https://core.
+00006370: 7465 6c65 6772 616d 2e6f 7267 2f62 6f74  telegram.org/bot
+00006380: 732f 6170 6923 6c6f 676f 7574 292c 2079  s/api#logout), y
+00006390: 6f75 2068 6176 6520 746f 206c 6f67 206f  ou have to log o
+000063a0: 7574 2079 6f75 7220 626f 7420 6672 6f6d  ut your bot from
+000063b0: 2074 6865 2054 656c 6567 7261 6d20 7365   the Telegram se
+000063c0: 7276 6572 2062 6566 6f72 6520 7377 6974  rver before swit
+000063d0: 6368 696e 6720 746f 2079 6f75 7220 6c6f  ching to your lo
+000063e0: 6361 6c20 4150 4920 7365 7276 6572 2e20  cal API server. 
+000063f0: 696e 2070 7954 656c 6567 7261 6d42 6f74  in pyTelegramBot
+00006400: 4150 4920 7573 6520 6062 6f74 2e6c 6f67  API use `bot.log
+00006410: 5f6f 7574 2829 602a 2a0d 0a0d 0a2a 4e6f  _out()`**....*No
+00006420: 7465 3a20 3432 3030 2069 7320 616e 2065  te: 4200 is an e
+00006430: 7861 6d70 6c65 2070 6f72 742a 0d0a 0d0a  xample port*....
+00006440: 2323 2320 4173 796e 6368 726f 6e6f 7573  ### Asynchronous
+00006450: 2054 656c 6542 6f74 0d0a 4e65 773a 2054   TeleBot..New: T
+00006460: 6865 7265 2069 7320 616e 2061 7379 6e63  here is an async
+00006470: 6872 6f6e 6f75 7320 696d 706c 656d 656e  hronous implemen
+00006480: 7461 7469 6f6e 206f 6620 7465 6c65 626f  tation of telebo
+00006490: 742e 0d0a 546f 2065 6e61 626c 6520 7468  t...To enable th
+000064a0: 6973 2062 6568 6176 696f 7572 2c20 6372  is behaviour, cr
+000064b0: 6561 7465 2061 6e20 696e 7374 616e 6365  eate an instance
+000064c0: 206f 6620 4173 796e 6354 656c 6542 6f74   of AsyncTeleBot
+000064d0: 2069 6e73 7465 6164 206f 6620 5465 6c65   instead of Tele
+000064e0: 426f 742e 0d0a 6060 6070 7974 686f 6e0d  Bot...```python.
+000064f0: 0a74 6220 3d20 7465 6c65 626f 742e 4173  .tb = telebot.As
+00006500: 796e 6354 656c 6542 6f74 2822 544f 4b45  yncTeleBot("TOKE
+00006510: 4e22 290d 0a60 6060 0d0a 4e6f 772c 2065  N")..```..Now, e
+00006520: 7665 7279 2066 756e 6374 696f 6e20 7468  very function th
+00006530: 6174 2063 616c 6c73 2074 6865 2054 656c  at calls the Tel
+00006540: 6567 7261 6d20 4150 4920 6973 2065 7865  egram API is exe
+00006550: 6375 7465 6420 696e 2061 2073 6570 6172  cuted in a separ
+00006560: 6174 6520 6173 796e 6368 726f 6e6f 7573  ate asynchronous
+00006570: 2074 6173 6b2e 0d0a 5573 696e 6720 4173   task...Using As
+00006580: 796e 6354 656c 6542 6f74 2061 6c6c 6f77  yncTeleBot allow
+00006590: 7320 796f 7520 746f 2064 6f20 7468 6520  s you to do the 
+000065a0: 666f 6c6c 6f77 696e 673a 0d0a 6060 6070  following:..```p
+000065b0: 7974 686f 6e0d 0a69 6d70 6f72 7420 7465  ython..import te
+000065c0: 6c65 626f 740d 0a0d 0a74 6220 3d20 7465  lebot....tb = te
+000065d0: 6c65 626f 742e 4173 796e 6354 656c 6542  lebot.AsyncTeleB
+000065e0: 6f74 2822 544f 4b45 4e22 290d 0a0d 0a40  ot("TOKEN")....@
+000065f0: 7462 2e6d 6573 7361 6765 5f68 616e 646c  tb.message_handl
+00006600: 6572 2863 6f6d 6d61 6e64 733d 5b27 7374  er(commands=['st
+00006610: 6172 7427 5d29 0d0a 6173 796e 6320 6465  art'])..async de
+00006620: 6620 7374 6172 745f 6d65 7373 6167 6528  f start_message(
+00006630: 6d65 7373 6167 6529 3a0d 0a09 6177 6169  message):...awai
+00006640: 7420 626f 742e 7365 6e64 5f6d 6573 7361  t bot.send_messa
+00006650: 6765 286d 6573 7361 6765 2e63 6861 742e  ge(message.chat.
+00006660: 6964 2c20 2748 656c 6c6f 2127 290d 0a0d  id, 'Hello!')...
+00006670: 0a60 6060 0d0a 0d0a 5365 6520 6d6f 7265  .```....See more
+00006680: 2069 6e20 5b65 7861 6d70 6c65 735d 2868   in [examples](h
+00006690: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+000066a0: 6d2f 6574 6572 6e6e 6f69 722f 7079 5465  m/eternnoir/pyTe
+000066b0: 6c65 6772 616d 426f 7441 5049 2f74 7265  legramBotAPI/tre
+000066c0: 652f 6d61 7374 6572 2f65 7861 6d70 6c65  e/master/example
+000066d0: 732f 6173 796e 6368 726f 6e6f 7573 5f74  s/asynchronous_t
+000066e0: 656c 6562 6f74 290d 0a0d 0a23 2323 2053  elebot)....### S
+000066f0: 656e 6469 6e67 206c 6172 6765 2074 6578  ending large tex
+00006700: 7420 6d65 7373 6167 6573 0d0a 536f 6d65  t messages..Some
+00006710: 7469 6d65 7320 796f 7520 6d75 7374 2073  times you must s
+00006720: 656e 6420 6d65 7373 6167 6573 2074 6861  end messages tha
+00006730: 7420 6578 6365 6564 2035 3030 3020 6368  t exceed 5000 ch
+00006740: 6172 6163 7465 7273 2e20 5468 6520 5465  aracters. The Te
+00006750: 6c65 6772 616d 2041 5049 2063 616e 206e  legram API can n
+00006760: 6f74 2068 616e 646c 6520 7468 6174 206d  ot handle that m
+00006770: 616e 7920 6368 6172 6163 7465 7273 2069  any characters i
+00006780: 6e20 6f6e 6520 7265 7175 6573 742c 2073  n one request, s
+00006790: 6f20 7765 206e 6565 6420 746f 2073 706c  o we need to spl
+000067a0: 6974 2074 6865 206d 6573 7361 6765 2069  it the message i
+000067b0: 6e20 6d75 6c74 6970 6c65 732e 2048 6572  n multiples. Her
+000067c0: 6520 6973 2068 6f77 2074 6f20 646f 2074  e is how to do t
+000067d0: 6861 7420 7573 696e 6720 7468 6520 4150  hat using the AP
+000067e0: 493a 0d0a 6060 6070 7974 686f 6e0d 0a66  I:..```python..f
+000067f0: 726f 6d20 7465 6c65 626f 7420 696d 706f  rom telebot impo
+00006800: 7274 2075 7469 6c0d 0a6c 6172 6765 5f74  rt util..large_t
+00006810: 6578 7420 3d20 6f70 656e 2822 6c61 7267  ext = open("larg
+00006820: 655f 7465 7874 2e74 7874 222c 2022 7262  e_text.txt", "rb
+00006830: 2229 2e72 6561 6428 290d 0a0d 0a23 2053  ").read()....# S
+00006840: 706c 6974 2074 6865 2074 6578 7420 6561  plit the text ea
+00006850: 6368 2033 3030 3020 6368 6172 6163 7465  ch 3000 characte
+00006860: 7273 2e0d 0a23 2073 706c 6974 5f73 7472  rs...# split_str
+00006870: 696e 6720 7265 7475 726e 7320 6120 6c69  ing returns a li
+00006880: 7374 2077 6974 6820 7468 6520 7370 6c69  st with the spli
+00006890: 7474 6564 2074 6578 742e 0d0a 7370 6c69  tted text...spli
+000068a0: 7474 6564 5f74 6578 7420 3d20 7574 696c  tted_text = util
+000068b0: 2e73 706c 6974 5f73 7472 696e 6728 6c61  .split_string(la
+000068c0: 7267 655f 7465 7874 2c20 3330 3030 290d  rge_text, 3000).
+000068d0: 0a0d 0a66 6f72 2074 6578 7420 696e 2073  ...for text in s
+000068e0: 706c 6974 7465 645f 7465 7874 3a0d 0a09  plitted_text:...
+000068f0: 7462 2e73 656e 645f 6d65 7373 6167 6528  tb.send_message(
+00006900: 6368 6174 5f69 642c 2074 6578 7429 0d0a  chat_id, text)..
+00006910: 6060 600d 0a0d 0a4f 7220 796f 7520 6361  ```....Or you ca
+00006920: 6e20 7573 6520 7468 6520 6e65 7720 6073  n use the new `s
+00006930: 6d61 7274 5f73 706c 6974 6020 6675 6e63  mart_split` func
+00006940: 7469 6f6e 2074 6f20 6765 7420 6d6f 7265  tion to get more
+00006950: 206d 6561 6e69 6e67 6675 6c20 7375 6273   meaningful subs
+00006960: 7472 696e 6773 3a0d 0a60 6060 7079 7468  trings:..```pyth
+00006970: 6f6e 0d0a 6672 6f6d 2074 656c 6562 6f74  on..from telebot
+00006980: 2069 6d70 6f72 7420 7574 696c 0d0a 6c61   import util..la
+00006990: 7267 655f 7465 7874 203d 206f 7065 6e28  rge_text = open(
+000069a0: 226c 6172 6765 5f74 6578 742e 7478 7422  "large_text.txt"
+000069b0: 2c20 2272 6222 292e 7265 6164 2829 0d0a  , "rb").read()..
+000069c0: 2320 5370 6c69 7473 206f 6e65 2073 7472  # Splits one str
+000069d0: 696e 6720 696e 746f 206d 756c 7469 706c  ing into multipl
+000069e0: 6520 7374 7269 6e67 732c 2077 6974 6820  e strings, with 
+000069f0: 6120 6d61 7869 6d75 6d20 616d 6f75 6e74  a maximum amount
+00006a00: 206f 6620 6063 6861 7273 5f70 6572 5f73   of `chars_per_s
+00006a10: 7472 696e 6760 2028 6d61 782e 2034 3039  tring` (max. 409
+00006a20: 3629 0d0a 2320 5370 6c69 7473 2062 7920  6)..# Splits by 
+00006a30: 6c61 7374 2027 5c6e 272c 2027 2e20 2720  last '\n', '. ' 
+00006a40: 6f72 2027 2027 2069 6e20 6578 6163 746c  or ' ' in exactl
+00006a50: 7920 7468 6973 2070 7269 6f72 6974 792e  y this priority.
+00006a60: 0d0a 2320 736d 6172 745f 7370 6c69 7420  ..# smart_split 
+00006a70: 7265 7475 726e 7320 6120 6c69 7374 2077  returns a list w
+00006a80: 6974 6820 7468 6520 7370 6c69 7474 6564  ith the splitted
+00006a90: 2074 6578 742e 0d0a 7370 6c69 7474 6564   text...splitted
+00006aa0: 5f74 6578 7420 3d20 7574 696c 2e73 6d61  _text = util.sma
+00006ab0: 7274 5f73 706c 6974 286c 6172 6765 5f74  rt_split(large_t
+00006ac0: 6578 742c 2063 6861 7273 5f70 6572 5f73  ext, chars_per_s
+00006ad0: 7472 696e 673d 3330 3030 290d 0a66 6f72  tring=3000)..for
+00006ae0: 2074 6578 7420 696e 2073 706c 6974 7465   text in splitte
+00006af0: 645f 7465 7874 3a0d 0a09 7462 2e73 656e  d_text:...tb.sen
+00006b00: 645f 6d65 7373 6167 6528 6368 6174 5f69  d_message(chat_i
+00006b10: 642c 2074 6578 7429 0d0a 6060 600d 0a23  d, text)..```..#
+00006b20: 2323 2043 6f6e 7472 6f6c 6c69 6e67 2074  ## Controlling t
+00006b30: 6865 2061 6d6f 756e 7420 6f66 2054 6872  he amount of Thr
+00006b40: 6561 6473 2075 7365 6420 6279 2054 656c  eads used by Tel
+00006b50: 6542 6f74 0d0a 5468 6520 5465 6c65 426f  eBot..The TeleBo
+00006b60: 7420 636f 6e73 7472 7563 746f 7220 7461  t constructor ta
+00006b70: 6b65 7320 7468 6520 666f 6c6c 6f77 696e  kes the followin
+00006b80: 6720 6f70 7469 6f6e 616c 2061 7267 756d  g optional argum
+00006b90: 656e 7473 3a0d 0a0d 0a20 2d20 7468 7265  ents:.... - thre
+00006ba0: 6164 6564 3a20 5472 7565 2f46 616c 7365  aded: True/False
+00006bb0: 2028 6465 6661 756c 7420 5472 7565 292e   (default True).
+00006bc0: 2041 2066 6c61 6720 746f 2069 6e64 6963   A flag to indic
+00006bd0: 6174 6520 7768 6574 6865 720d 0a20 2020  ate whether..   
+00006be0: 5465 6c65 426f 7420 7368 6f75 6c64 2065  TeleBot should e
+00006bf0: 7865 6375 7465 206d 6573 7361 6765 2068  xecute message h
+00006c00: 616e 646c 6572 7320 6f6e 2069 7427 7320  andlers on it's 
+00006c10: 706f 6c6c 696e 6720 5468 7265 6164 2e0d  polling Thread..
+00006c20: 0a0d 0a23 2323 2054 6865 206c 6973 7465  ...### The liste
+00006c30: 6e65 7220 6d65 6368 616e 6973 6d0d 0a41  ner mechanism..A
+00006c40: 7320 616e 2061 6c74 6572 6e61 7469 7665  s an alternative
+00006c50: 2074 6f20 7468 6520 6d65 7373 6167 6520   to the message 
+00006c60: 6861 6e64 6c65 7273 2c20 6f6e 6520 6361  handlers, one ca
+00006c70: 6e20 616c 736f 2072 6567 6973 7465 7220  n also register 
+00006c80: 6120 6675 6e63 7469 6f6e 2061 7320 6120  a function as a 
+00006c90: 6c69 7374 656e 6572 2074 6f20 5465 6c65  listener to Tele
+00006ca0: 426f 742e 0d0a 0d0a 4e4f 5449 4345 3a20  Bot.....NOTICE: 
+00006cb0: 6861 6e64 6c65 7273 2077 6f6e 2774 2064  handlers won't d
+00006cc0: 6973 6170 7065 6172 2120 596f 7572 206d  isappear! Your m
+00006cd0: 6573 7361 6765 2077 696c 6c20 6265 2070  essage will be p
+00006ce0: 726f 6365 7373 6564 2062 6f74 6820 6279  rocessed both by
+00006cf0: 2068 616e 646c 6572 7320 616e 6420 6c69   handlers and li
+00006d00: 7374 656e 6572 732e 2041 6c73 6f2c 2069  steners. Also, i
+00006d10: 7427 7320 696d 706f 7373 6962 6c65 2074  t's impossible t
+00006d20: 6f20 7072 6564 6963 7420 7768 6963 6820  o predict which 
+00006d30: 7769 6c6c 2077 6f72 6b20 6174 2066 6972  will work at fir
+00006d40: 7374 2062 6563 6175 7365 206f 6620 7468  st because of th
+00006d50: 7265 6164 696e 672e 2049 6620 796f 7520  reading. If you 
+00006d60: 7573 6520 7468 7265 6164 6564 3d46 616c  use threaded=Fal
+00006d70: 7365 2c20 6375 7374 6f6d 206c 6973 7465  se, custom liste
+00006d80: 6e65 7273 2077 696c 6c20 776f 726b 2065  ners will work e
+00006d90: 6172 6c69 6572 2c20 6166 7465 7220 7468  arlier, after th
+00006da0: 656d 2068 616e 646c 6572 7320 7769 6c6c  em handlers will
+00006db0: 2062 6520 6361 6c6c 6564 2e20 0d0a 4578   be called. ..Ex
+00006dc0: 616d 706c 653a 0d0a 6060 6070 7974 686f  ample:..```pytho
+00006dd0: 6e0d 0a64 6566 2068 616e 646c 655f 6d65  n..def handle_me
+00006de0: 7373 6167 6573 286d 6573 7361 6765 7329  ssages(messages)
+00006df0: 3a0d 0a09 666f 7220 6d65 7373 6167 6520  :...for message 
+00006e00: 696e 206d 6573 7361 6765 733a 0d0a 0909  in messages:....
+00006e10: 2320 446f 2073 6f6d 6574 6869 6e67 2077  # Do something w
+00006e20: 6974 6820 7468 6520 6d65 7373 6167 650d  ith the message.
+00006e30: 0a09 0962 6f74 2e72 6570 6c79 5f74 6f28  ...bot.reply_to(
+00006e40: 6d65 7373 6167 652c 2027 4869 2729 0d0a  message, 'Hi')..
+00006e50: 0d0a 626f 742e 7365 745f 7570 6461 7465  ..bot.set_update
+00006e60: 5f6c 6973 7465 6e65 7228 6861 6e64 6c65  _listener(handle
+00006e70: 5f6d 6573 7361 6765 7329 0d0a 626f 742e  _messages)..bot.
+00006e80: 696e 6669 6e69 7479 5f70 6f6c 6c69 6e67  infinity_polling
+00006e90: 2829 0d0a 6060 600d 0a0d 0a23 2323 2055  ()..```....### U
+00006ea0: 7369 6e67 2077 6562 2068 6f6f 6b73 0d0a  sing web hooks..
+00006eb0: 5768 656e 2075 7369 6e67 2077 6562 686f  When using webho
+00006ec0: 6f6b 7320 7465 6c65 6772 616d 2073 656e  oks telegram sen
+00006ed0: 6473 206f 6e65 2055 7064 6174 6520 7065  ds one Update pe
+00006ee0: 7220 6361 6c6c 2c20 666f 7220 7072 6f63  r call, for proc
+00006ef0: 6573 7369 6e67 2069 7420 796f 7520 7368  essing it you sh
+00006f00: 6f75 6c64 2063 616c 6c20 7072 6f63 6573  ould call proces
+00006f10: 735f 6e65 775f 6d65 7373 6167 6573 285b  s_new_messages([
+00006f20: 7570 6461 7465 2e6d 6573 7361 6765 5d29  update.message])
+00006f30: 2077 6865 6e20 796f 7520 7265 6369 6576   when you reciev
+00006f40: 6520 6974 2e0d 0a0d 0a54 6865 7265 2061  e it.....There a
+00006f50: 7265 2073 6f6d 6520 6578 616d 706c 6573  re some examples
+00006f60: 2075 7369 6e67 2077 6562 686f 6f6b 7320   using webhooks 
+00006f70: 696e 2074 6865 205b 6578 616d 706c 6573  in the [examples
+00006f80: 2f77 6562 686f 6f6b 5f65 7861 6d70 6c65  /webhook_example
+00006f90: 735d 2865 7861 6d70 6c65 732f 7765 6268  s](examples/webh
+00006fa0: 6f6f 6b5f 6578 616d 706c 6573 2920 6469  ook_examples) di
+00006fb0: 7265 6374 6f72 792e 0d0a 0d0a 2323 2320  rectory.....### 
+00006fc0: 4c6f 6767 696e 670d 0a59 6f75 2063 616e  Logging..You can
+00006fd0: 2075 7365 2074 6865 2054 656c 6562 6f74   use the Telebot
+00006fe0: 206d 6f64 756c 6520 6c6f 6767 6572 2074   module logger t
+00006ff0: 6f20 6c6f 6720 6465 6275 6720 696e 666f  o log debug info
+00007000: 2061 626f 7574 2054 656c 6562 6f74 2e20   about Telebot. 
+00007010: 5573 6520 6074 656c 6562 6f74 2e6c 6f67  Use `telebot.log
+00007020: 6765 7260 2074 6f20 6765 7420 7468 6520  ger` to get the 
+00007030: 6c6f 6767 6572 206f 6620 7468 6520 5465  logger of the Te
+00007040: 6c65 426f 7420 6d6f 6475 6c65 2e0d 0a49  leBot module...I
+00007050: 7420 6973 2070 6f73 7369 626c 6520 746f  t is possible to
+00007060: 2061 6464 2063 7573 746f 6d20 6c6f 6767   add custom logg
+00007070: 696e 6720 4861 6e64 6c65 7273 2074 6f20  ing Handlers to 
+00007080: 7468 6520 6c6f 6767 6572 2e20 5265 6665  the logger. Refe
+00007090: 7220 746f 2074 6865 205b 5079 7468 6f6e  r to the [Python
+000070a0: 206c 6f67 6769 6e67 206d 6f64 756c 6520   logging module 
+000070b0: 7061 6765 5d28 6874 7470 733a 2f2f 646f  page](https://do
+000070c0: 6373 2e70 7974 686f 6e2e 6f72 672f 322f  cs.python.org/2/
+000070d0: 6c69 6272 6172 792f 6c6f 6767 696e 672e  library/logging.
+000070e0: 6874 6d6c 2920 666f 7220 6d6f 7265 2069  html) for more i
+000070f0: 6e66 6f2e 0d0a 0d0a 6060 6070 7974 686f  nfo.....```pytho
+00007100: 6e0d 0a69 6d70 6f72 7420 6c6f 6767 696e  n..import loggin
+00007110: 670d 0a0d 0a6c 6f67 6765 7220 3d20 7465  g....logger = te
+00007120: 6c65 626f 742e 6c6f 6767 6572 0d0a 7465  lebot.logger..te
+00007130: 6c65 626f 742e 6c6f 6767 6572 2e73 6574  lebot.logger.set
+00007140: 4c65 7665 6c28 6c6f 6767 696e 672e 4445  Level(logging.DE
+00007150: 4255 4729 2023 204f 7574 7075 7473 2064  BUG) # Outputs d
+00007160: 6562 7567 206d 6573 7361 6765 7320 746f  ebug messages to
+00007170: 2063 6f6e 736f 6c65 2e0d 0a60 6060 0d0a   console...```..
+00007180: 0d0a 2323 2320 5072 6f78 790d 0a46 6f72  ..### Proxy..For
+00007190: 2073 796e 633a 0d0a 0d0a 596f 7520 6361   sync:....You ca
+000071a0: 6e20 7573 6520 7072 6f78 7920 666f 7220  n use proxy for 
+000071b0: 7265 7175 6573 742e 2060 6170 6968 656c  request. `apihel
+000071c0: 7065 722e 7072 6f78 7960 206f 626a 6563  per.proxy` objec
+000071d0: 7420 7769 6c6c 2075 7365 2062 7920 6361  t will use by ca
+000071e0: 6c6c 2060 7265 7175 6573 7473 6020 7072  ll `requests` pr
+000071f0: 6f78 6965 7320 6172 6775 6d65 6e74 2e0d  oxies argument..
+00007200: 0a0d 0a60 6060 7079 7468 6f6e 0d0a 6672  ...```python..fr
+00007210: 6f6d 2074 656c 6562 6f74 2069 6d70 6f72  om telebot impor
+00007220: 7420 6170 6968 656c 7065 720d 0a0d 0a61  t apihelper....a
+00007230: 7069 6865 6c70 6572 2e70 726f 7879 203d  pihelper.proxy =
+00007240: 207b 2768 7474 7027 3a27 6874 7470 3a2f   {'http':'http:/
+00007250: 2f31 3237 2e30 2e30 2e31 3a33 3132 3827  /127.0.0.1:3128'
+00007260: 7d0d 0a60 6060 0d0a 0d0a 4966 2079 6f75  }..```....If you
+00007270: 2077 616e 7420 746f 2075 7365 2073 6f63   want to use soc
+00007280: 6b65 7435 2070 726f 7879 2079 6f75 206e  ket5 proxy you n
+00007290: 6565 6420 696e 7374 616c 6c20 6465 7065  eed install depe
+000072a0: 6e64 656e 6379 2060 7069 7020 696e 7374  ndency `pip inst
+000072b0: 616c 6c20 7265 7175 6573 7473 5b73 6f63  all requests[soc
+000072c0: 6b73 5d60 2061 6e64 206d 616b 6520 7375  ks]` and make su
+000072d0: 7265 2c20 7468 6174 2079 6f75 2068 6176  re, that you hav
+000072e0: 6520 7468 6520 6c61 7465 7374 2076 6572  e the latest ver
+000072f0: 7369 6f6e 206f 6620 6067 756e 6963 6f72  sion of `gunicor
+00007300: 6e60 2c20 6050 7953 6f63 6b73 602c 2060  n`, `PySocks`, `
+00007310: 7079 5465 6c65 6772 616d 426f 7441 5049  pyTelegramBotAPI
+00007320: 602c 2060 7265 7175 6573 7473 6020 616e  `, `requests` an
+00007330: 6420 6075 726c 6c69 6233 602e 0d0a 0d0a  d `urllib3`.....
+00007340: 6060 6070 7974 686f 6e0d 0a61 7069 6865  ```python..apihe
+00007350: 6c70 6572 2e70 726f 7879 203d 207b 2768  lper.proxy = {'h
+00007360: 7474 7073 273a 2773 6f63 6b73 353a 2f2f  ttps':'socks5://
+00007370: 7573 6572 7072 6f78 793a 7061 7373 776f  userproxy:passwo
+00007380: 7264 4070 726f 7879 5f61 6464 7265 7373  rd@proxy_address
+00007390: 3a70 6f72 7427 7d0d 0a60 6060 0d0a 0d0a  :port'}..```....
+000073a0: 466f 7220 6173 796e 633a 0d0a 6060 6070  For async:..```p
+000073b0: 7974 686f 6e0d 0a66 726f 6d20 7465 6c65  ython..from tele
+000073c0: 626f 7420 696d 706f 7274 2061 7379 6e63  bot import async
+000073d0: 696f 5f68 656c 7065 720d 0a0d 0a61 7379  io_helper....asy
+000073e0: 6e63 696f 5f68 656c 7065 722e 7072 6f78  ncio_helper.prox
+000073f0: 7920 3d20 2768 7474 703a 2f2f 3132 372e  y = 'http://127.
+00007400: 302e 302e 313a 3331 3238 2720 2375 726c  0.0.1:3128' #url
+00007410: 0d0a 6060 600d 0a0d 0a0d 0a23 2323 2054  ..```......### T
+00007420: 6573 7469 6e67 0d0a 596f 7520 6361 6e20  esting..You can 
+00007430: 6469 7361 626c 6520 6f72 2063 6861 6e67  disable or chang
+00007440: 6520 7468 6520 696e 7465 7261 6374 696f  e the interactio
+00007450: 6e20 7769 7468 2072 6561 6c20 5465 6c65  n with real Tele
+00007460: 6772 616d 2073 6572 7665 7220 6279 2075  gram server by u
+00007470: 7369 6e67 0d0a 6060 6070 7974 686f 6e0d  sing..```python.
+00007480: 0a61 7069 6865 6c70 6572 2e43 5553 544f  .apihelper.CUSTO
+00007490: 4d5f 5245 5155 4553 545f 5345 4e44 4552  M_REQUEST_SENDER
+000074a0: 203d 2079 6f75 725f 6861 6e64 6c65 720d   = your_handler.
+000074b0: 0a60 6060 0d0a 7061 7261 6d65 7465 722e  .```..parameter.
+000074c0: 2059 6f75 2063 616e 2070 6173 7320 7468   You can pass th
+000074d0: 6572 6520 796f 7572 206f 776e 2066 756e  ere your own fun
+000074e0: 6374 696f 6e20 7468 6174 2077 696c 6c20  ction that will 
+000074f0: 6265 2063 616c 6c65 6420 696e 7374 6561  be called instea
+00007500: 6420 6f66 205f 7265 7175 6573 7473 2e72  d of _requests.r
+00007510: 6571 7565 7374 5f2e 0d0a 0d0a 466f 7220  equest_.....For 
+00007520: 6578 616d 706c 653a 0d0a 6060 6070 7974  example:..```pyt
+00007530: 686f 6e0d 0a64 6566 2063 7573 746f 6d5f  hon..def custom_
+00007540: 7365 6e64 6572 286d 6574 686f 642c 2075  sender(method, u
+00007550: 726c 2c20 2a2a 6b77 6172 6773 293a 0d0a  rl, **kwargs):..
+00007560: 2020 2020 7072 696e 7428 2263 7573 746f      print("custo
+00007570: 6d5f 7365 6e64 6572 2e20 6d65 7468 6f64  m_sender. method
+00007580: 3a20 7b7d 2c20 7572 6c3a 207b 7d2c 2070  : {}, url: {}, p
+00007590: 6172 616d 733a 207b 7d22 2e66 6f72 6d61  arams: {}".forma
+000075a0: 7428 6d65 7468 6f64 2c20 7572 6c2c 206b  t(method, url, k
+000075b0: 7761 7267 732e 6765 7428 2270 6172 616d  wargs.get("param
+000075c0: 7322 2929 290d 0a20 2020 2072 6573 756c  s")))..    resul
+000075d0: 7420 3d20 7574 696c 2e43 7573 746f 6d52  t = util.CustomR
+000075e0: 6571 7565 7374 5265 7370 6f6e 7365 2827  equestResponse('
+000075f0: 7b22 6f6b 223a 7472 7565 2c22 7265 7375  {"ok":true,"resu
+00007600: 6c74 223a 7b22 6d65 7373 6167 655f 6964  lt":{"message_id
+00007610: 223a 2031 2c20 2264 6174 6522 3a20 312c  ": 1, "date": 1,
+00007620: 2022 6368 6174 223a 207b 2269 6422 3a20   "chat": {"id": 
+00007630: 312c 2022 7479 7065 223a 2022 7072 6976  1, "type": "priv
+00007640: 6174 6522 7d7d 7d27 290d 0a20 2020 2072  ate"}}}')..    r
+00007650: 6574 7572 6e20 7265 7375 6c74 0d0a 6060  eturn result..``
+00007660: 600d 0a0d 0a54 6865 6e20 796f 7520 6361  `....Then you ca
+00007670: 6e20 7573 6520 4150 4920 616e 6420 7072  n use API and pr
+00007680: 6f63 6565 6420 7265 7175 6573 7473 2069  oceed requests i
+00007690: 6e20 796f 7572 2068 616e 646c 6572 2063  n your handler c
+000076a0: 6f64 652e 0d0a 6060 6070 7974 686f 6e0d  ode...```python.
+000076b0: 0a61 7069 6865 6c70 6572 2e43 5553 544f  .apihelper.CUSTO
+000076c0: 4d5f 5245 5155 4553 545f 5345 4e44 4552  M_REQUEST_SENDER
+000076d0: 203d 2063 7573 746f 6d5f 7365 6e64 6572   = custom_sender
+000076e0: 0d0a 7462 203d 2054 656c 6542 6f74 2822  ..tb = TeleBot("
+000076f0: 7465 7374 2229 0d0a 7265 7320 3d20 7462  test")..res = tb
+00007700: 2e73 656e 645f 6d65 7373 6167 6528 3132  .send_message(12
+00007710: 332c 2022 5465 7374 2229 0d0a 6060 600d  3, "Test")..```.
+00007720: 0a0d 0a52 6573 756c 7420 7769 6c6c 2062  ...Result will b
+00007730: 653a 0d0a 0d0a 6063 7573 746f 6d5f 7365  e:....`custom_se
+00007740: 6e64 6572 2e20 6d65 7468 6f64 3a20 706f  nder. method: po
+00007750: 7374 2c20 7572 6c3a 2068 7474 7073 3a2f  st, url: https:/
+00007760: 2f61 7069 2e74 656c 6567 7261 6d2e 6f72  /api.telegram.or
+00007770: 672f 626f 746f 6c6f 6c6f 2f73 656e 644d  g/botololo/sendM
+00007780: 6573 7361 6765 2c20 7061 7261 6d73 3a20  essage, params: 
+00007790: 7b27 6368 6174 5f69 6427 3a20 2731 3233  {'chat_id': '123
+000077a0: 272c 2027 7465 7874 273a 2027 5465 7374  ', 'text': 'Test
+000077b0: 277d 600d 0a0d 0a0d 0a0d 0a23 2320 4150  '}`........## AP
+000077c0: 4920 636f 6e66 6f72 6d61 6e63 6520 6c69  I conformance li
+000077d0: 6d69 7461 7469 6f6e 730d 0a2a 20e2 9e95  mitations..* ...
+000077e0: 205b 426f 7420 4150 4920 342e 355d 2868   [Bot API 4.5](h
+000077f0: 7474 7073 3a2f 2f63 6f72 652e 7465 6c65  ttps://core.tele
+00007800: 6772 616d 2e6f 7267 2f62 6f74 732f 6170  gram.org/bots/ap
+00007810: 692d 6368 616e 6765 6c6f 6723 6465 6365  i-changelog#dece
+00007820: 6d62 6572 2d33 312d 3230 3139 2920 2d20  mber-31-2019) - 
+00007830: 4e6f 206e 6573 7465 6420 4d65 7373 6167  No nested Messag
+00007840: 6545 6e74 6974 6965 7320 616e 6420 4d61  eEntities and Ma
+00007850: 726b 646f 776e 3220 7375 7070 6f72 740d  rkdown2 support.
+00007860: 0a2a 20e2 9e95 205b 426f 7420 4150 4920  .* ... [Bot API 
+00007870: 342e 315d 2868 7474 7073 3a2f 2f63 6f72  4.1](https://cor
+00007880: 652e 7465 6c65 6772 616d 2e6f 7267 2f62  e.telegram.org/b
+00007890: 6f74 732f 6170 692d 6368 616e 6765 6c6f  ots/api-changelo
+000078a0: 6723 6175 6775 7374 2d32 372d 3230 3138  g#august-27-2018
+000078b0: 2920 2020 2d20 4e6f 2050 6173 7370 6f72  )   - No Passpor
+000078c0: 7420 7375 7070 6f72 740d 0a2a 20e2 9e95  t support..* ...
+000078d0: 205b 426f 7420 4150 4920 342e 305d 2868   [Bot API 4.0](h
+000078e0: 7474 7073 3a2f 2f63 6f72 652e 7465 6c65  ttps://core.tele
+000078f0: 6772 616d 2e6f 7267 2f62 6f74 732f 6170  gram.org/bots/ap
+00007900: 692d 6368 616e 6765 6c6f 6723 6a75 6c79  i-changelog#july
+00007910: 2d32 362d 3230 3138 2920 2020 2020 2d20  -26-2018)     - 
+00007920: 4e6f 2050 6173 7370 6f72 7420 7375 7070  No Passport supp
+00007930: 6f72 740d 0a0d 0a0d 0a23 2320 4173 796e  ort......## Asyn
+00007940: 6354 656c 6542 6f74 0d0a 2323 2320 4173  cTeleBot..### As
+00007950: 796e 6368 726f 6e6f 7573 2076 6572 7369  ynchronous versi
+00007960: 6f6e 206f 6620 7465 6c65 626f 740d 0a57  on of telebot..W
+00007970: 6520 6861 7665 2061 2066 756c 6c79 2061  e have a fully a
+00007980: 7379 6e63 6872 6f6e 6f75 7320 7665 7273  synchronous vers
+00007990: 696f 6e20 6f66 2054 656c 6542 6f74 2e0d  ion of TeleBot..
+000079a0: 0a54 6869 7320 636c 6173 7320 6973 206e  .This class is n
+000079b0: 6f74 2063 6f6e 7472 6f6c 6c65 6420 6279  ot controlled by
+000079c0: 2074 6872 6561 6473 2e20 4173 796e 6369   threads. Asynci
+000079d0: 6f20 7461 736b 7320 6172 6520 6372 6561  o tasks are crea
+000079e0: 7465 6420 746f 2065 7865 6375 7465 2061  ted to execute a
+000079f0: 6c6c 2074 6865 2073 7475 6666 2e0d 0a0d  ll the stuff....
+00007a00: 0a23 2323 2045 6368 6f42 6f74 0d0a 4563  .### EchoBot..Ec
+00007a10: 686f 2042 6f74 2065 7861 6d70 6c65 206f  ho Bot example o
+00007a20: 6e20 4173 796e 6354 656c 6542 6f74 3a0d  n AsyncTeleBot:.
+00007a30: 0a09 0d0a 6060 6070 7974 686f 6e0d 0a23  ....```python..#
+00007a40: 2054 6869 7320 6973 2061 2073 696d 706c   This is a simpl
+00007a50: 6520 6563 686f 2062 6f74 2075 7369 6e67  e echo bot using
+00007a60: 2074 6865 2064 6563 6f72 6174 6f72 206d   the decorator m
+00007a70: 6563 6861 6e69 736d 2e0d 0a23 2049 7420  echanism...# It 
+00007a80: 6563 686f 6573 2061 6e79 2069 6e63 6f6d  echoes any incom
+00007a90: 696e 6720 7465 7874 206d 6573 7361 6765  ing text message
+00007aa0: 732e 0d0a 0d0a 6672 6f6d 2074 656c 6562  s.....from teleb
+00007ab0: 6f74 2e61 7379 6e63 5f74 656c 6562 6f74  ot.async_telebot
+00007ac0: 2069 6d70 6f72 7420 4173 796e 6354 656c   import AsyncTel
+00007ad0: 6542 6f74 0d0a 696d 706f 7274 2061 7379  eBot..import asy
+00007ae0: 6e63 696f 0d0a 626f 7420 3d20 4173 796e  ncio..bot = Asyn
+00007af0: 6354 656c 6542 6f74 2827 544f 4b45 4e27  cTeleBot('TOKEN'
+00007b00: 290d 0a0d 0a0d 0a0d 0a23 2048 616e 646c  )........# Handl
+00007b10: 6520 272f 7374 6172 7427 2061 6e64 2027  e '/start' and '
+00007b20: 2f68 656c 7027 0d0a 4062 6f74 2e6d 6573  /help'..@bot.mes
+00007b30: 7361 6765 5f68 616e 646c 6572 2863 6f6d  sage_handler(com
+00007b40: 6d61 6e64 733d 5b27 6865 6c70 272c 2027  mands=['help', '
+00007b50: 7374 6172 7427 5d29 0d0a 6173 796e 6320  start'])..async 
+00007b60: 6465 6620 7365 6e64 5f77 656c 636f 6d65  def send_welcome
+00007b70: 286d 6573 7361 6765 293a 0d0a 2020 2020  (message):..    
+00007b80: 6177 6169 7420 626f 742e 7265 706c 795f  await bot.reply_
+00007b90: 746f 286d 6573 7361 6765 2c20 2222 225c  to(message, """\
+00007ba0: 0d0a 4869 2074 6865 7265 2c20 4920 616d  ..Hi there, I am
+00007bb0: 2045 6368 6f42 6f74 2e0d 0a49 2061 6d20   EchoBot...I am 
+00007bc0: 6865 7265 2074 6f20 6563 686f 2079 6f75  here to echo you
+00007bd0: 7220 6b69 6e64 2077 6f72 6473 2062 6163  r kind words bac
+00007be0: 6b20 746f 2079 6f75 2e20 4a75 7374 2073  k to you. Just s
+00007bf0: 6179 2061 6e79 7468 696e 6720 6e69 6365  ay anything nice
+00007c00: 2061 6e64 2049 276c 6c20 7361 7920 7468   and I'll say th
+00007c10: 6520 6578 6163 7420 7361 6d65 2074 6869  e exact same thi
+00007c20: 6e67 2074 6f20 796f 7521 5c0d 0a22 2222  ng to you!\.."""
+00007c30: 290d 0a0d 0a0d 0a23 2048 616e 646c 6520  )......# Handle 
+00007c40: 616c 6c20 6f74 6865 7220 6d65 7373 6167  all other messag
+00007c50: 6573 2077 6974 6820 636f 6e74 656e 745f  es with content_
+00007c60: 7479 7065 2027 7465 7874 2720 2863 6f6e  type 'text' (con
+00007c70: 7465 6e74 5f74 7970 6573 2064 6566 6175  tent_types defau
+00007c80: 6c74 7320 746f 205b 2774 6578 7427 5d29  lts to ['text'])
+00007c90: 0d0a 4062 6f74 2e6d 6573 7361 6765 5f68  ..@bot.message_h
+00007ca0: 616e 646c 6572 2866 756e 633d 6c61 6d62  andler(func=lamb
+00007cb0: 6461 206d 6573 7361 6765 3a20 5472 7565  da message: True
+00007cc0: 290d 0a61 7379 6e63 2064 6566 2065 6368  )..async def ech
+00007cd0: 6f5f 6d65 7373 6167 6528 6d65 7373 6167  o_message(messag
+00007ce0: 6529 3a0d 0a20 2020 2061 7761 6974 2062  e):..    await b
+00007cf0: 6f74 2e72 6570 6c79 5f74 6f28 6d65 7373  ot.reply_to(mess
+00007d00: 6167 652c 206d 6573 7361 6765 2e74 6578  age, message.tex
+00007d10: 7429 0d0a 0d0a 0d0a 6173 796e 6369 6f2e  t)......asyncio.
+00007d20: 7275 6e28 626f 742e 706f 6c6c 696e 6728  run(bot.polling(
+00007d30: 2929 0d0a 6060 600d 0a41 7320 796f 7520  ))..```..As you 
+00007d40: 6361 6e20 7365 6520 6865 7265 2c20 6b65  can see here, ke
+00007d50: 7977 6f72 6473 2061 7265 2061 7761 6974  ywords are await
+00007d60: 2061 6e64 2061 7379 6e63 2e20 0d0a 090d   and async. ....
+00007d70: 0a23 2323 2057 6879 2073 686f 756c 6420  .### Why should 
+00007d80: 4920 7573 6520 6173 796e 633f 0d0a 4173  I use async?..As
+00007d90: 796e 6368 726f 6e6f 7573 2074 6173 6b73  ynchronous tasks
+00007da0: 2064 6570 656e 6420 6f6e 2070 726f 6365   depend on proce
+00007db0: 7373 6f72 2070 6572 666f 726d 616e 6365  ssor performance
+00007dc0: 2e20 4d61 6e79 2061 7379 6e63 6872 6f6e  . Many asynchron
+00007dd0: 6f75 7320 7461 736b 7320 6361 6e20 7275  ous tasks can ru
+00007de0: 6e20 7061 7261 6c6c 656c 6c79 2c20 7768  n parallelly, wh
+00007df0: 696c 6520 7468 7265 6164 2074 6173 6b73  ile thread tasks
+00007e00: 2077 696c 6c20 626c 6f63 6b20 6561 6368   will block each
+00007e10: 206f 7468 6572 2e0d 0a0d 0a23 2323 2044   other.....### D
+00007e20: 6966 6665 7265 6e63 6573 2069 6e20 4173  ifferences in As
+00007e30: 796e 6354 656c 6542 6f74 0d0a 4173 796e  yncTeleBot..Asyn
+00007e40: 6354 656c 6542 6f74 2069 7320 6173 796e  cTeleBot is asyn
+00007e50: 6368 726f 6e6f 7573 2e20 4974 2075 7365  chronous. It use
+00007e60: 7320 6169 6f68 7474 7020 696e 7374 6561  s aiohttp instea
+00007e70: 6420 6f66 2072 6571 7565 7374 7320 6d6f  d of requests mo
+00007e80: 6475 6c65 2e0d 0a09 0d0a 2323 2320 4578  dule......### Ex
+00007e90: 616d 706c 6573 0d0a 5365 6520 6d6f 7265  amples..See more
+00007ea0: 2065 7861 6d70 6c65 7320 696e 206f 7572   examples in our
+00007eb0: 205b 6578 616d 706c 6573 5d28 6874 7470   [examples](http
+00007ec0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f65  s://github.com/e
+00007ed0: 7465 726e 6e6f 6972 2f70 7954 656c 6567  ternnoir/pyTeleg
+00007ee0: 7261 6d42 6f74 4150 492f 7472 6565 2f6d  ramBotAPI/tree/m
+00007ef0: 6173 7465 722f 6578 616d 706c 6573 2f61  aster/examples/a
+00007f00: 7379 6e63 6872 6f6e 6f75 735f 7465 6c65  synchronous_tele
+00007f10: 626f 7429 2066 6f6c 6465 720d 0a09 0d0a  bot) folder.....
+00007f20: 0d0a 2323 2046 2e41 2e51 2e0d 0a0d 0a23  ..## F.A.Q.....#
+00007f30: 2323 2048 6f77 2063 616e 2049 2064 6973  ## How can I dis
+00007f40: 7469 6e67 7569 7368 2061 2055 7365 7220  tinguish a User 
+00007f50: 616e 6420 6120 4772 6f75 7043 6861 7420  and a GroupChat 
+00007f60: 696e 206d 6573 7361 6765 2e63 6861 743f  in message.chat?
+00007f70: 0d0a 5465 6c65 6772 616d 2042 6f74 2041  ..Telegram Bot A
+00007f80: 5049 2073 7570 706f 7274 206e 6577 2074  PI support new t
+00007f90: 7970 6520 4368 6174 2066 6f72 206d 6573  ype Chat for mes
+00007fa0: 7361 6765 2e63 6861 742e 0d0a 0d0a 2d20  sage.chat.....- 
+00007fb0: 4368 6563 6b20 7468 6520 6060 6074 7970  Check the ```typ
+00007fc0: 6560 6060 2061 7474 7269 6275 7465 2069  e``` attribute i
+00007fd0: 6e20 6060 6043 6861 7460 6060 206f 626a  n ```Chat``` obj
+00007fe0: 6563 743a 0d0a 6060 6070 7974 686f 6e0d  ect:..```python.
+00007ff0: 0a69 6620 6d65 7373 6167 652e 6368 6174  .if message.chat
+00008000: 2e74 7970 6520 3d3d 2022 7072 6976 6174  .type == "privat
+00008010: 6522 3a0d 0a20 2020 2023 2070 7269 7661  e":..    # priva
+00008020: 7465 2063 6861 7420 6d65 7373 6167 650d  te chat message.
+00008030: 0a0d 0a69 6620 6d65 7373 6167 652e 6368  ...if message.ch
+00008040: 6174 2e74 7970 6520 3d3d 2022 6772 6f75  at.type == "grou
+00008050: 7022 3a0d 0a09 2320 6772 6f75 7020 6368  p":...# group ch
+00008060: 6174 206d 6573 7361 6765 0d0a 0d0a 6966  at message....if
+00008070: 206d 6573 7361 6765 2e63 6861 742e 7479   message.chat.ty
+00008080: 7065 203d 3d20 2273 7570 6572 6772 6f75  pe == "supergrou
+00008090: 7022 3a0d 0a09 2320 7375 7065 7267 726f  p":...# supergro
+000080a0: 7570 2063 6861 7420 6d65 7373 6167 650d  up chat message.
+000080b0: 0a0d 0a69 6620 6d65 7373 6167 652e 6368  ...if message.ch
+000080c0: 6174 2e74 7970 6520 3d3d 2022 6368 616e  at.type == "chan
+000080d0: 6e65 6c22 3a0d 0a09 2320 6368 616e 6e65  nel":...# channe
+000080e0: 6c20 6d65 7373 6167 650d 0a0d 0a60 6060  l message....```
+000080f0: 0d0a 0d0a 2323 2320 486f 7720 6361 6e20  ....### How can 
+00008100: 4920 6861 6e64 6c65 2072 656f 6375 7272  I handle reocurr
+00008110: 696e 6720 436f 6e6e 6563 7469 6f6e 5265  ing ConnectionRe
+00008120: 7365 7445 7272 6f72 733f 0d0a 0d0a 426f  setErrors?....Bo
+00008130: 7420 696e 7374 616e 6365 7320 7468 6174  t instances that
+00008140: 2077 6572 6520 6964 6c65 2066 6f72 2061   were idle for a
+00008150: 206c 6f6e 6720 7469 6d65 206d 6967 6874   long time might
+00008160: 2062 6520 7265 6a65 6374 6564 2062 7920   be rejected by 
+00008170: 7468 6520 7365 7276 6572 2077 6865 6e20  the server when 
+00008180: 7365 6e64 696e 6720 6120 6d65 7373 6167  sending a messag
+00008190: 6520 6475 6520 746f 2061 2074 696d 656f  e due to a timeo
+000081a0: 7574 206f 6620 7468 6520 6c61 7374 2075  ut of the last u
+000081b0: 7365 6420 7365 7373 696f 6e2e 2041 6464  sed session. Add
+000081c0: 2060 6170 6968 656c 7065 722e 5345 5353   `apihelper.SESS
+000081d0: 494f 4e5f 5449 4d45 5f54 4f5f 4c49 5645  ION_TIME_TO_LIVE
+000081e0: 203d 2035 202a 2036 3060 2074 6f20 796f   = 5 * 60` to yo
+000081f0: 7572 2069 6e69 7469 616c 6973 6174 696f  ur initialisatio
+00008200: 6e20 746f 2066 6f72 6365 2072 6563 7265  n to force recre
+00008210: 6174 696f 6e20 6166 7465 7220 3520 6d69  ation after 5 mi
+00008220: 6e75 7465 7320 7769 7468 6f75 7420 616e  nutes without an
+00008230: 7920 6163 7469 7669 7479 2e20 0d0a 0d0a  y activity. ....
+00008240: 2323 2054 6865 2054 656c 6567 7261 6d20  ## The Telegram 
+00008250: 4368 6174 2047 726f 7570 0d0a 0d0a 4765  Chat Group....Ge
+00008260: 7420 6865 6c70 2e20 4469 7363 7573 732e  t help. Discuss.
+00008270: 2043 6861 742e 0d0a 0d0a 2a20 4a6f 696e   Chat.....* Join
+00008280: 2074 6865 205b 7079 5465 6c65 6772 616d   the [pyTelegram
+00008290: 426f 7441 5049 2054 656c 6567 7261 6d20  BotAPI Telegram 
+000082a0: 4368 6174 2047 726f 7570 5d28 6874 7470  Chat Group](http
+000082b0: 733a 2f2f 7465 6c65 6772 616d 2e6d 652f  s://telegram.me/
+000082c0: 6a6f 696e 6368 6174 2f42 6e34 6978 6a38  joinchat/Bn4ixj8
+000082d0: 3446 495a 566b 7768 6b32 6a61 6736 4129  4FIZVkwhk2jag6A)
+000082e0: 0d0a 090d 0a23 2320 5465 6c65 6772 616d  .....## Telegram
+000082f0: 2043 6861 6e6e 656c 0d0a 0d0a 4a6f 696e   Channel....Join
+00008300: 2074 6865 205b 4e65 7773 2063 6861 6e6e   the [News chann
+00008310: 656c 5d28 6874 7470 733a 2f2f 742e 6d65  el](https://t.me
+00008320: 2f70 7954 656c 6567 7261 6d42 6f74 4150  /pyTelegramBotAP
+00008330: 4929 2e20 4865 7265 2077 6520 7769 6c6c  I). Here we will
+00008340: 2070 6f73 7420 7265 6c65 6173 6573 2061   post releases a
+00008350: 6e64 2075 7064 6174 6573 2e0d 0a09 0d0a  nd updates......
+00008360: 2323 204d 6f72 6520 6578 616d 706c 6573  ## More examples
+00008370: 0d0a 0d0a 2a20 5b45 6368 6f20 426f 745d  ....* [Echo Bot]
+00008380: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00008390: 636f 6d2f 6574 6572 6e6e 6f69 722f 7079  com/eternnoir/py
+000083a0: 5465 6c65 6772 616d 426f 7441 5049 2f62  TelegramBotAPI/b
+000083b0: 6c6f 622f 6d61 7374 6572 2f65 7861 6d70  lob/master/examp
+000083c0: 6c65 732f 6563 686f 5f62 6f74 2e70 7929  les/echo_bot.py)
+000083d0: 0d0a 2a20 5b44 6565 7020 4c69 6e6b 696e  ..* [Deep Linkin
+000083e0: 675d 2868 7474 7073 3a2f 2f67 6974 6875  g](https://githu
+000083f0: 622e 636f 6d2f 6574 6572 6e6e 6f69 722f  b.com/eternnoir/
+00008400: 7079 5465 6c65 6772 616d 426f 7441 5049  pyTelegramBotAPI
+00008410: 2f62 6c6f 622f 6d61 7374 6572 2f65 7861  /blob/master/exa
+00008420: 6d70 6c65 732f 6465 6570 5f6c 696e 6b69  mples/deep_linki
+00008430: 6e67 2e70 7929 0d0a 2a20 5b6e 6578 745f  ng.py)..* [next_
+00008440: 7374 6570 5f68 616e 646c 6572 2045 7861  step_handler Exa
+00008450: 6d70 6c65 5d28 6874 7470 733a 2f2f 6769  mple](https://gi
+00008460: 7468 7562 2e63 6f6d 2f65 7465 726e 6e6f  thub.com/eternno
+00008470: 6972 2f70 7954 656c 6567 7261 6d42 6f74  ir/pyTelegramBot
+00008480: 4150 492f 626c 6f62 2f6d 6173 7465 722f  API/blob/master/
+00008490: 6578 616d 706c 6573 2f73 7465 705f 6578  examples/step_ex
+000084a0: 616d 706c 652e 7079 290d 0a0d 0a23 2320  ample.py)....## 
+000084b0: 436f 6465 2054 656d 706c 6174 650d 0a54  Code Template..T
+000084c0: 656d 706c 6174 6520 6973 2061 2072 6561  emplate is a rea
+000084d0: 6479 2066 6f6c 6465 7220 7468 6174 2063  dy folder that c
+000084e0: 6f6e 7461 696e 7320 6172 6368 6974 6563  ontains architec
+000084f0: 7475 7265 206f 6620 6261 7369 6320 7072  ture of basic pr
+00008500: 6f6a 6563 742e 0d0a 4865 7265 2061 7265  oject...Here are
+00008510: 2073 6f6d 6520 6578 616d 706c 6573 206f   some examples o
+00008520: 6620 7465 6d70 6c61 7465 3a0d 0a09 0d0a  f template:.....
+00008530: 2a20 5b41 7379 6e63 5465 6c65 426f 7420  * [AsyncTeleBot 
+00008540: 7465 6d70 6c61 7465 5d28 6874 7470 733a  template](https:
+00008550: 2f2f 6769 7468 7562 2e63 6f6d 2f63 6f64  //github.com/cod
+00008560: 6572 3230 3230 6f66 6669 6369 616c 2f61  er2020official/a
+00008570: 7379 6e63 7465 6c65 626f 745f 7465 6d70  synctelebot_temp
+00008580: 6c61 7465 290d 0a2a 205b 5465 6c65 426f  late)..* [TeleBo
+00008590: 7420 7465 6d70 6c61 7465 5d28 6874 7470  t template](http
+000085a0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
+000085b0: 6f64 6572 3230 3230 6f66 6669 6369 616c  oder2020official
+000085c0: 2f74 656c 6562 6f74 5f74 656d 706c 6174  /telebot_templat
+000085d0: 6529 0d0a 090d 0a09 0d0a 2323 2042 6f74  e)........## Bot
+000085e0: 7320 7573 696e 6720 7468 6973 206c 6962  s using this lib
+000085f0: 7261 7279 0d0a 2a20 5b53 6974 6541 6c65  rary..* [SiteAle
+00008600: 7274 2062 6f74 5d28 6874 7470 733a 2f2f  rt bot](https://
+00008610: 7465 6c65 6772 616d 2e6d 652f 5369 7465  telegram.me/Site
+00008620: 416c 6572 745f 626f 7429 2028 5b73 6f75  Alert_bot) ([sou
+00008630: 7263 655d 2868 7474 7073 3a2f 2f67 6974  rce](https://git
+00008640: 6875 622e 636f 6d2f 696c 7465 6f6f 6f64  hub.com/ilteoood
+00008650: 2f53 6974 6541 6c65 7274 2d50 7974 686f  /SiteAlert-Pytho
+00008660: 6e29 2920 6279 202a 696c 7465 6f6f 6f64  n)) by *ilteoood
+00008670: 2a20 2d20 4d6f 6e69 746f 7273 2077 6562  * - Monitors web
+00008680: 7369 7465 7320 616e 6420 7365 6e64 7320  sites and sends 
+00008690: 6120 6e6f 7469 6669 6361 7469 6f6e 206f  a notification o
+000086a0: 6e20 6368 616e 6765 730d 0a2a 205b 5465  n changes..* [Te
+000086b0: 6c65 6772 616d 4c6f 6767 696e 6742 6f74  legramLoggingBot
+000086c0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+000086d0: 2e63 6f6d 2f61 5261 6e64 6f6d 5374 7261  .com/aRandomStra
+000086e0: 6e67 6572 2f54 656c 6567 7261 6d4c 6f67  nger/TelegramLog
+000086f0: 6769 6e67 426f 7429 2062 7920 2a61 5261  gingBot) by *aRa
+00008700: 6e64 6f6d 5374 7261 6e67 6572 2a0d 0a2a  ndomStranger*..*
+00008710: 205b 5465 6c65 6772 616d 204c 4d47 5446   [Telegram LMGTF
+00008720: 595f 626f 745d 2868 7474 7073 3a2f 2f67  Y_bot](https://g
+00008730: 6974 6875 622e 636f 6d2f 4761 6272 6965  ithub.com/Gabrie
+00008740: 6c52 462f 7465 6c65 6772 616d 2d6c 6d67  lRF/telegram-lmg
+00008750: 7466 795f 626f 7429 2062 7920 2a47 6162  tfy_bot) by *Gab
+00008760: 7269 656c 5246 2a20 2d20 4c65 7420 6d65  rielRF* - Let me
+00008770: 2047 6f6f 676c 6520 7468 6174 2066 6f72   Google that for
+00008780: 2079 6f75 2e0d 0a2a 205b 5465 6c65 6772   you...* [Telegr
+00008790: 616d 2050 726f 7879 2042 6f74 5d28 6874  am Proxy Bot](ht
+000087a0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+000087b0: 2f6d 7267 6967 6162 7974 652f 7072 6f78  /mrgigabyte/prox
+000087c0: 7962 6f74 2920 6279 202a 6d72 6769 6761  ybot) by *mrgiga
+000087d0: 6279 7465 2a20 0d0a 2a20 5b52 6164 5265  byte* ..* [RadRe
+000087e0: 7472 6f52 6f62 6f74 5d28 6874 7470 733a  troRobot](https:
+000087f0: 2f2f 6769 7468 7562 2e63 6f6d 2f54 726f  //github.com/Tro
+00008800: 6e69 6b61 7274 2f52 6164 5265 7472 6f52  nikart/RadRetroR
+00008810: 6f62 6f74 2920 6279 202a 5472 6f6e 696b  obot) by *Tronik
+00008820: 6172 742a 202d 204d 756c 7469 6675 6e63  art* - Multifunc
+00008830: 7469 6f6e 616c 2054 656c 6567 7261 6d20  tional Telegram 
+00008840: 426f 7420 5261 6452 6574 726f 526f 626f  Bot RadRetroRobo
+00008850: 742e 0d0a 2a20 5b4c 6561 6775 6520 6f66  t...* [League of
+00008860: 204c 6567 656e 6473 2062 6f74 5d28 6874   Legends bot](ht
+00008870: 7470 733a 2f2f 7465 6c65 6772 616d 2e6d  tps://telegram.m
+00008880: 652f 4c65 6167 7565 5f6f 665f 4c65 6765  e/League_of_Lege
+00008890: 6e64 735f 626f 7429 2028 5b73 6f75 7263  nds_bot) ([sourc
+000088a0: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
+000088b0: 622e 636f 6d2f 6933 3272 6f70 6965 2f6c  b.com/i32ropie/l
+000088c0: 6f6c 2929 2062 7920 2a69 3332 726f 7069  ol)) by *i32ropi
+000088d0: 652a 0d0a 2a20 5b4e 656f 426f 745d 2868  e*..* [NeoBot](h
+000088e0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+000088f0: 6d2f 6e65 6f72 616e 6765 722f 4e65 6f42  m/neoranger/NeoB
+00008900: 6f74 2920 6279 205b 404e 656f 5261 6e67  ot) by [@NeoRang
+00008910: 6572 5d28 6874 7470 733a 2f2f 6769 7468  er](https://gith
+00008920: 7562 2e63 6f6d 2f6e 656f 7261 6e67 6572  ub.com/neoranger
+00008930: 290d 0a2a 205b 436f 6c6f 7243 6f64 6542  )..* [ColorCodeB
+00008940: 6f74 5d28 6874 7470 733a 2f2f 742e 6d65  ot](https://t.me
+00008950: 2f63 6f6c 6f72 636f 6465 626f 7429 2028  /colorcodebot) (
+00008960: 5b73 6f75 7263 655d 2868 7474 7073 3a2f  [source](https:/
+00008970: 2f67 6974 6875 622e 636f 6d2f 616e 6479  /github.com/andy
+00008980: 6465 636c 6579 7265 2f63 6f6c 6f72 636f  decleyre/colorco
+00008990: 6465 626f 7429 2920 2d20 5368 6172 6520  debot)) - Share 
+000089a0: 636f 6465 2073 6e69 7070 6574 7320 6173  code snippets as
+000089b0: 2062 6561 7574 6966 756c 6c79 2073 796e   beautifully syn
+000089c0: 7461 782d 6869 6768 6c69 6768 7465 6420  tax-highlighted 
+000089d0: 4854 4d4c 2061 6e64 2f6f 7220 696d 6167  HTML and/or imag
+000089e0: 6573 2e0d 0a2a 205b 436f 6d65 646f 7265  es...* [Comedore
+000089f0: 7355 4752 626f 745d 2868 7474 703a 2f2f  sUGRbot](http://
+00008a00: 7465 6c65 6772 616d 2e6d 652f 436f 6d65  telegram.me/Come
+00008a10: 646f 7265 7355 4752 626f 7429 2028 5b73  doresUGRbot) ([s
+00008a20: 6f75 7263 655d 2868 7474 7073 3a2f 2f67  ource](https://g
+00008a30: 6974 6875 622e 636f 6d2f 616c 656a 616e  ithub.com/alejan
+00008a40: 6472 6f63 712f 436f 6d65 646f 7265 7355  drocq/ComedoresU
+00008a50: 4752 626f 7429 2920 6279 205b 2a61 6c65  GRbot)) by [*ale
+00008a60: 6a61 6e64 726f 6371 2a5d 2868 7474 7073  jandrocq*](https
+00008a70: 3a2f 2f67 6974 6875 622e 636f 6d2f 616c  ://github.com/al
+00008a80: 656a 616e 6472 6f63 7129 202d 2054 656c  ejandrocq) - Tel
+00008a90: 6567 7261 6d20 626f 7420 746f 2063 6865  egram bot to che
+00008aa0: 636b 2074 6865 206d 656e 7520 6f66 2055  ck the menu of U
+00008ab0: 6e69 7665 7273 6964 6164 2064 6520 4772  niversidad de Gr
+00008ac0: 616e 6164 6120 6469 6e69 6e67 2068 616c  anada dining hal
+00008ad0: 6c2e 0d0a 2a20 5b70 726f 7879 626f 745d  l...* [proxybot]
+00008ae0: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00008af0: 636f 6d2f 702d 6861 7368 2f70 726f 7879  com/p-hash/proxy
+00008b00: 626f 7429 202d 2053 696d 706c 6520 5072  bot) - Simple Pr
+00008b10: 6f78 7920 426f 7420 666f 7220 5465 6c65  oxy Bot for Tele
+00008b20: 6772 616d 2e20 6279 2070 2d68 6173 680d  gram. by p-hash.
+00008b30: 0a2a 205b 446f 6e61 6e74 6573 4d61 6c61  .* [DonantesMala
+00008b40: 6761 426f 745d 2868 7474 7073 3a2f 2f67  gaBot](https://g
+00008b50: 6974 6875 622e 636f 6d2f 7666 7261 6e63  ithub.com/vfranc
+00008b60: 682f 446f 6e61 6e74 6573 4d61 6c61 6761  h/DonantesMalaga
+00008b70: 426f 7429 202d 2044 6f6e 616e 7465 734d  Bot) - DonantesM
+00008b80: 616c 6167 6142 6f74 2066 6163 696c 6974  alagaBot facilit
+00008b90: 6174 6573 2069 6e66 6f72 6d61 7469 6f6e  ates information
+00008ba0: 2074 6f20 4d61 6c61 6761 2062 6c6f 6f64   to Malaga blood
+00008bb0: 2064 6f6e 6f72 7320 6162 6f75 7420 7468   donors about th
+00008bc0: 6520 706c 6163 6573 2077 6865 7265 2074  e places where t
+00008bd0: 6865 7920 6361 6e20 646f 6e61 7465 2074  hey can donate t
+00008be0: 6f64 6179 206f 7220 696e 2074 6865 2069  oday or in the i
+00008bf0: 6e63 6f6d 696e 6720 6461 7973 2e20 4974  ncoming days. It
+00008c00: 2061 6c73 6f20 7265 636f 7264 7320 7468   also records th
+00008c10: 6520 6461 7465 206f 6620 7468 6520 6c61  e date of the la
+00008c20: 7374 2064 6f6e 6174 696f 6e20 736f 2074  st donation so t
+00008c30: 6861 7420 6974 2068 656c 7073 2074 6865  hat it helps the
+00008c40: 2064 6f6e 6f72 7320 746f 206b 6e6f 7720   donors to know 
+00008c50: 7768 656e 2074 6865 7920 6361 6e20 646f  when they can do
+00008c60: 6e61 7465 2061 6761 696e 2e20 2d20 6279  nate again. - by
+00008c70: 2076 6672 616e 6368 0d0a 2a20 5b44 7574   vfranch..* [Dut
+00008c80: 7479 426f 745d 2868 7474 7073 3a2f 2f67  tyBot](https://g
+00008c90: 6974 6875 622e 636f 6d2f 446d 7974 7279  ithub.com/Dmytry
+00008ca0: 6953 7472 696c 6574 736b 7969 2f44 7574  iStriletskyi/Dut
+00008cb0: 7479 426f 7429 2062 7920 2a44 6d79 7472  tyBot) by *Dmytr
+00008cc0: 7969 2053 7472 696c 6574 736b 7969 2a20  yi Striletskyi* 
+00008cd0: 2d20 5469 6d65 7461 626c 6520 666f 7220  - Timetable for 
+00008ce0: 6f6e 6520 756e 6976 6572 7369 7479 2069  one university i
+00008cf0: 6e20 4b69 6576 2e0d 0a2a 205b 7761 742d  n Kiev...* [wat-
+00008d00: 6272 6964 6765 5d28 6874 7470 733a 2f2f  bridge](https://
+00008d10: 6769 7468 7562 2e63 6f6d 2f72 6d65 642f  github.com/rmed/
+00008d20: 7761 742d 6272 6964 6765 2920 6279 205b  wat-bridge) by [
+00008d30: 2a72 6d65 642a 5d28 6874 7470 733a 2f2f  *rmed*](https://
+00008d40: 6769 7468 7562 2e63 6f6d 2f72 6d65 6429  github.com/rmed)
+00008d50: 202d 2053 656e 6420 616e 6420 7265 6365   - Send and rece
+00008d60: 6976 6520 6d65 7373 6167 6573 2074 6f2f  ive messages to/
+00008d70: 6672 6f6d 2057 6861 7473 4170 7020 7468  from WhatsApp th
+00008d80: 726f 7567 6820 5465 6c65 6772 616d 0d0a  rough Telegram..
+00008d90: 2a20 5b66 696c 6d72 6174 696e 6762 6f74  * [filmratingbot
+00008da0: 5d28 6874 7470 3a2f 2f74 2e6d 652f 6669  ](http://t.me/fi
+00008db0: 6c6d 7261 7469 6e67 626f 7429 285b 736f  lmratingbot)([so
+00008dc0: 7572 6365 5d28 6874 7470 733a 2f2f 6769  urce](https://gi
+00008dd0: 7468 7562 2e63 6f6d 2f6a 636f 6c6c 6164  thub.com/jcollad
+00008de0: 6f73 702f 6669 6c6d 2d72 6174 696e 672d  osp/film-rating-
+00008df0: 626f 7429 2920 6279 205b 2a6a 636f 6c6c  bot)) by [*jcoll
+00008e00: 6164 6f73 702a 5d28 6874 7470 733a 2f2f  adosp*](https://
+00008e10: 6769 7468 7562 2e63 6f6d 2f6a 636f 6c6c  github.com/jcoll
+00008e20: 6164 6f73 7029 202d 2054 656c 6567 7261  adosp) - Telegra
+00008e30: 6d20 626f 7420 7573 696e 6720 7468 6520  m bot using the 
+00008e40: 5079 7468 6f6e 2041 5049 2074 6861 7420  Python API that 
+00008e50: 6765 7473 2066 696c 6d73 2072 6174 696e  gets films ratin
+00008e60: 6720 6672 6f6d 2049 4d44 6220 616e 6420  g from IMDb and 
+00008e70: 6d65 7461 6372 6974 6963 0d0a 2a20 5b53  metacritic..* [S
+00008e80: 656e 6432 4b69 6e64 6c65 626f 745d 2868  end2Kindlebot](h
+00008e90: 7474 703a 2f2f 742e 6d65 2f53 656e 6432  ttp://t.me/Send2
+00008ea0: 4b69 6e64 6c65 426f 7429 2028 5b73 6f75  KindleBot) ([sou
+00008eb0: 7263 655d 2868 7474 7073 3a2f 2f67 6974  rce](https://git
+00008ec0: 6875 622e 636f 6d2f 4761 6272 6965 6c52  hub.com/GabrielR
+00008ed0: 462f 5365 6e64 324b 696e 646c 6542 6f74  F/Send2KindleBot
+00008ee0: 2929 2062 7920 2a47 6162 7269 656c 5246  )) by *GabrielRF
+00008ef0: 2a20 2d20 5365 6e64 2074 6f20 4b69 6e64  * - Send to Kind
+00008f00: 6c65 2073 6572 7669 6365 2e0d 0a2a 205b  le service...* [
+00008f10: 5261 7374 7265 696f 426f 745d 2868 7474  RastreioBot](htt
+00008f20: 703a 2f2f 742e 6d65 2f52 6173 7472 6569  p://t.me/Rastrei
+00008f30: 6f42 6f74 2920 285b 736f 7572 6365 5d28  oBot) ([source](
+00008f40: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00008f50: 6f6d 2f47 6162 7269 656c 5246 2f52 6173  om/GabrielRF/Ras
+00008f60: 7472 6569 6f42 6f74 2929 2062 7920 2a47  treioBot)) by *G
+00008f70: 6162 7269 656c 5246 2a20 2d20 426f 7420  abrielRF* - Bot 
+00008f80: 7573 6564 2074 6f20 7472 6163 6b20 7061  used to track pa
+00008f90: 636b 6167 6573 206f 6e20 7468 6520 4272  ckages on the Br
+00008fa0: 617a 696c 6961 6e20 4d61 696c 2053 6572  azilian Mail Ser
+00008fb0: 7669 6365 2e0d 0a2a 205b 5370 6275 3455  vice...* [Spbu4U
+00008fc0: 426f 745d 2868 7474 703a 2f2f 742e 6d65  Bot](http://t.me
+00008fd0: 2f53 7062 7534 5542 6f74 2928 5b6c 696e  /Spbu4UBot)([lin
+00008fe0: 6b5d 2868 7474 7073 3a2f 2f67 6974 6875  k](https://githu
+00008ff0: 622e 636f 6d2f 4565 4f6e 6544 6f77 6e2f  b.com/EeOneDown/
+00009000: 7370 6275 3475 2929 2062 7920 2a45 654f  spbu4u)) by *EeO
+00009010: 6e65 446f 776e 2a20 2d20 426f 7420 7769  neDown* - Bot wi
+00009020: 7468 2074 696d 6574 6162 6c65 7320 666f  th timetables fo
+00009030: 7220 5350 6255 2073 7475 6465 6e74 732e  r SPbU students.
+00009040: 0d0a 2a20 5b53 6d61 7274 7953 426f 745d  ..* [SmartySBot]
+00009050: 2868 7474 703a 2f2f 742e 6d65 2f5a 4455  (http://t.me/ZDU
+00009060: 5f62 6f74 2928 5b6c 696e 6b5d 2868 7474  _bot)([link](htt
+00009070: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00009080: 3078 564b 2f53 6d61 7274 7953 426f 7429  0xVK/SmartySBot)
+00009090: 2920 6279 202a 3078 564b 2a20 2d20 5465  ) by *0xVK* - Te
+000090a0: 6c65 6772 616d 2074 696d 6574 6162 6c65  legram timetable
+000090b0: 2062 6f74 2c20 666f 7220 5a68 7974 6f6d   bot, for Zhytom
+000090c0: 7972 2049 7661 6e20 4672 616e 6b6f 2053  yr Ivan Franko S
+000090d0: 7461 7465 2055 6e69 7665 7273 6974 7920  tate University 
+000090e0: 7374 7564 656e 7473 2e0d 0a2a 205b 4c65  students...* [Le
+000090f0: 6172 6e49 745d 2868 7474 7073 3a2f 2f74  arnIt](https://t
+00009100: 2e6d 652f 4c65 6172 6e49 7462 6f74 2928  .me/LearnItbot)(
+00009110: 5b6c 696e 6b5d 2868 7474 7073 3a2f 2f67  [link](https://g
+00009120: 6974 6875 622e 636f 6d2f 7469 6167 6f6e  ithub.com/tiagon
+00009130: 6170 6f6c 692f 4c65 6172 6e49 7429 2920  apoli/LearnIt)) 
+00009140: 2d20 4120 5465 6c65 6772 616d 2042 6f74  - A Telegram Bot
+00009150: 2063 7265 6174 6564 2074 6f20 6865 6c70   created to help
+00009160: 2070 656f 706c 6520 746f 206d 656d 6f72   people to memor
+00009170: 697a 6520 6f74 6865 7220 6c61 6e67 7561  ize other langua
+00009180: 6765 73e2 8099 2076 6f63 6162 756c 6172  ges... vocabular
+00009190: 792e 0d0a 2a20 5b42 6f74 2d54 656c 6567  y...* [Bot-Teleg
+000091a0: 7261 6d2d 5368 6f64 616e 205d 2868 7474  ram-Shodan ](htt
+000091b0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+000091c0: 7275 6265 6e6c 656f 6e2f 426f 742d 5465  rubenleon/Bot-Te
+000091d0: 6c65 6772 616d 2d53 686f 6461 6e29 2062  legram-Shodan) b
+000091e0: 7920 5b72 7562 656e 6c65 6f6e 5d28 6874  y [rubenleon](ht
+000091f0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00009200: 2f72 7562 656e 6c65 6f6e 290d 0a2a 205b  /rubenleon)..* [
+00009210: 5669 676f 4275 7354 656c 6567 7261 6d42  VigoBusTelegramB
+00009220: 6f74 5d28 6874 7470 733a 2f2f 742e 6d65  ot](https://t.me
+00009230: 2f76 6967 6f62 7573 626f 7429 2028 5b47  /vigobusbot) ([G
+00009240: 6974 4875 625d 2868 7474 7073 3a2f 2f67  itHub](https://g
+00009250: 6974 6875 622e 636f 6d2f 5079 7468 6f6e  ithub.com/Python
+00009260: 6569 726f 2f56 6967 6f42 7573 2d54 656c  eiro/VigoBus-Tel
+00009270: 6567 7261 6d42 6f74 2929 202d 2042 6f74  egramBot)) - Bot
+00009280: 2074 6861 7420 7072 6f76 6964 6573 2062   that provides b
+00009290: 7573 6573 2063 6f6d 696e 6720 746f 2061  uses coming to a
+000092a0: 2063 6572 7461 696e 2073 746f 7020 616e   certain stop an
+000092b0: 6420 7468 6569 7220 7265 6d61 696e 696e  d their remainin
+000092c0: 6720 7469 6d65 2066 6f72 2074 6865 2063  g time for the c
+000092d0: 6974 7920 6f66 2056 6967 6f20 2847 616c  ity of Vigo (Gal
+000092e0: 6963 6961 202d 2053 7061 696e 290d 0a2a  icia - Spain)..*
+000092f0: 205b 6b61 6973 686e 696b 2d62 6f74 5d28   [kaishnik-bot](
+00009300: 6874 7470 733a 2f2f 742e 6d65 2f6b 6169  https://t.me/kai
+00009310: 7368 6e69 6b5f 626f 7429 2028 5b73 6f75  shnik_bot) ([sou
+00009320: 7263 655d 2868 7474 7073 3a2f 2f67 6974  rce](https://git
+00009330: 6875 622e 636f 6d2f 6169 7261 746b 2f6b  hub.com/airatk/k
+00009340: 6169 7368 6e69 6b2d 626f 7429 2920 6279  aishnik-bot)) by
+00009350: 202a 6169 7261 746b 2a20 2d20 626f 7420   *airatk* - bot 
+00009360: 7768 6963 6820 7368 6f77 7320 616c 6c20  which shows all 
+00009370: 7468 6520 6e65 6365 7373 6172 7920 696e  the necessary in
+00009380: 666f 726d 6174 696f 6e20 746f 204b 4e54  formation to KNT
+00009390: 5255 2d4b 4149 2073 7475 6465 6e74 732e  RU-KAI students.
+000093a0: 0d0a 2a20 5b52 6f62 6269 655d 2868 7474  ..* [Robbie](htt
+000093b0: 7073 3a2f 2f74 2e6d 652f 726f 6d64 656c  ps://t.me/romdel
+000093c0: 6976 6572 7962 6f74 2920 285b 736f 7572  iverybot) ([sour
+000093d0: 6365 5d28 6874 7470 733a 2f2f 6769 7468  ce](https://gith
+000093e0: 7562 2e63 6f6d 2f46 6163 754d 2f72 6f6d  ub.com/FacuM/rom
+000093f0: 6465 6c69 7665 7279 626f 745f 7375 7070  deliverybot_supp
+00009400: 6f72 7429 2920 6279 2040 4661 6375 4d20  ort)) by @FacuM 
+00009410: 2d20 5375 7070 6f72 7420 5465 6c65 6772  - Support Telegr
+00009420: 616d 2062 6f74 2066 6f72 2064 6576 656c  am bot for devel
+00009430: 6f70 6572 7320 616e 6420 6d61 696e 7461  opers and mainta
+00009440: 696e 6572 732e 0d0a 2a20 5b41 7361 646f  iners...* [Asado
+00009450: 7642 6f74 5d28 6874 7470 733a 2f2f 742e  vBot](https://t.
+00009460: 6d65 2f61 7361 646f 765f 626f 7429 2028  me/asadov_bot) (
+00009470: 5b73 6f75 7263 655d 2868 7474 7073 3a2f  [source](https:/
+00009480: 2f67 6974 6875 622e 636f 6d2f 6465 7365  /github.com/dese
+00009490: 7863 696c 652f 426f 7441 7069 2929 2062  xcile/BotApi)) b
+000094a0: 7920 4044 6573 4578 6369 6c65 202d 20d0  y @DesExcile - .
+000094b0: a161 7461 6c6f 6720 6f66 2070 6f65 6d73  .atalog of poems
+000094c0: 2062 7920 4564 7561 7264 2041 7361 646f   by Eduard Asado
+000094d0: 762e 0d0a 2a20 5b74 6865 7361 7572 7573  v...* [thesaurus
+000094e0: 5f63 6f6d 5f62 6f74 5d28 6874 7470 733a  _com_bot](https:
+000094f0: 2f2f 742e 6d65 2f74 6865 7361 7572 7573  //t.me/thesaurus
+00009500: 5f63 6f6d 5f62 6f74 2920 285b 736f 7572  _com_bot) ([sour
+00009510: 6365 5d28 6874 7470 733a 2f2f 6769 7468  ce](https://gith
+00009520: 7562 2e63 6f6d 2f4c 656f 5376 616c 6f76  ub.com/LeoSvalov
+00009530: 2f77 6f72 6473 2d69 2d6c 6561 726e 2d62  /words-i-learn-b
+00009540: 6f74 2929 2062 7920 404c 656f 5376 616c  ot)) by @LeoSval
+00009550: 6f76 202d 2077 6f72 6473 2061 6e64 2073  ov - words and s
+00009560: 796e 6f6e 796d 7320 6672 6f6d 205b 6469  ynonyms from [di
+00009570: 6374 696f 6e61 7279 2e63 6f6d 5d28 6874  ctionary.com](ht
+00009580: 7470 733a 2f2f 7777 772e 6469 6374 696f  tps://www.dictio
+00009590: 6e61 7279 2e63 6f6d 2920 616e 6420 5b74  nary.com) and [t
+000095a0: 6865 7361 7572 7573 2e63 6f6d 5d28 6874  hesaurus.com](ht
+000095b0: 7470 733a 2f2f 7777 772e 7468 6573 6175  tps://www.thesau
+000095c0: 7275 732e 636f 6d29 2069 6e20 7468 6520  rus.com) in the 
+000095d0: 7465 6c65 6772 616d 2e0d 0a2a 205b 496e  telegram...* [In
+000095e0: 666f 426f 745d 2868 7474 7073 3a2f 2f74  foBot](https://t
+000095f0: 2e6d 652f 696e 666f 3230 3139 5f62 6f74  .me/info2019_bot
+00009600: 2920 285b 736f 7572 6365 5d28 6874 7470  ) ([source](http
+00009610: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f69  s://github.com/i
+00009620: 7265 7665 6e6b 6f2f 696e 666f 2d62 6f74  revenko/info-bot
+00009630: 2929 2062 7920 4069 7265 7665 6e6b 6f20  )) by @irevenko 
+00009640: 2d20 416e 2061 6c6c 2d72 6f75 6e64 2062  - An all-round b
+00009650: 6f74 2074 6861 7420 6469 7370 6c61 7973  ot that displays
+00009660: 2073 6f6d 6520 7374 6174 6973 7469 6373   some statistics
+00009670: 2028 7765 6174 6865 722c 2074 696d 652c   (weather, time,
+00009680: 2063 7279 7074 6f20 6574 632e 2e2e 290d   crypto etc...).
+00009690: 0a2a 205b 466f 6f64 426f 745d 2868 7474  .* [FoodBot](htt
+000096a0: 7073 3a2f 2f74 2e6d 652f 4368 656e 736f  ps://t.me/Chenso
+000096b0: 6e55 7a5f 626f 7429 2028 5b73 6f75 7263  nUz_bot) ([sourc
+000096c0: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
+000096d0: 622e 636f 6d2f 466c 6965 676f 2f6f 6c64  b.com/Fliego/old
+000096e0: 5f72 6573 7461 7572 616e 745f 7465 6c65  _restaurant_tele
+000096f0: 6772 616d 5f63 6861 7462 6f74 2929 2062  gram_chatbot)) b
+00009700: 7920 4046 6c69 6567 6f20 2d20 6120 7369  y @Fliego - a si
+00009710: 6d70 6c65 2062 6f74 2066 6f72 2066 6f6f  mple bot for foo
+00009720: 6420 6f72 6465 7269 6e67 0d0a 2a20 5b53  d ordering..* [S
+00009730: 706f 7274 795d 2868 7474 7073 3a2f 2f74  porty](https://t
+00009740: 2e6d 652f 5370 6f72 7479 6442 6f74 2920  .me/SportydBot) 
+00009750: 285b 736f 7572 6365 5d28 6874 7470 733a  ([source](https:
+00009760: 2f2f 6769 7468 7562 2e63 6f6d 2f30 786e  //github.com/0xn
+00009770: 752f 7370 6f72 7479 2929 2062 7920 4030  u/sporty)) by @0
+00009780: 786e 7520 2d20 5465 6c65 6772 616d 2062  xnu - Telegram b
+00009790: 6f74 2066 6f72 2064 6973 706c 6179 696e  ot for displayin
+000097a0: 6720 7468 6520 6c61 7465 7374 206e 6577  g the latest new
+000097b0: 732c 2073 706f 7274 7320 7363 6865 6475  s, sports schedu
+000097c0: 6c65 7320 616e 6420 696e 6a75 7279 2075  les and injury u
+000097d0: 7064 6174 6573 2e0d 0a2a 205b 4a6f 696e  pdates...* [Join
+000097e0: 4772 6f75 7020 5369 6c65 6e63 6572 2042  Group Silencer B
+000097f0: 6f74 5d28 6874 7470 733a 2f2f 742e 6d65  ot](https://t.me
+00009800: 2f6a 6f69 6e67 726f 7570 5f73 696c 656e  /joingroup_silen
+00009810: 6365 725f 626f 7429 2028 5b73 6f75 7263  cer_bot) ([sourc
+00009820: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
+00009830: 622e 636f 6d2f 7a65 7068 3139 3937 2f54  b.com/zeph1997/T
+00009840: 656c 6567 7261 6d2d 4772 6f75 702d 5369  elegram-Group-Si
+00009850: 6c65 6e63 6572 2d42 6f74 2929 2062 7920  lencer-Bot)) by 
+00009860: 5b40 7a65 7068 3139 3937 5d28 6874 7470  [@zeph1997](http
+00009870: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f7a  s://github.com/z
+00009880: 6570 6831 3939 3729 202d 2041 2054 656c  eph1997) - A Tel
+00009890: 6567 7261 6d20 426f 7420 746f 2072 656d  egram Bot to rem
+000098a0: 6f76 6520 226a 6f69 6e20 6772 6f75 7022  ove "join group"
+000098b0: 2061 6e64 2022 7265 6d6f 7665 6420 6672   and "removed fr
+000098c0: 6f6d 2067 726f 7570 2220 6e6f 7469 6669  om group" notifi
+000098d0: 6361 7469 6f6e 732e 0d0a 2a20 5b54 6173  cations...* [Tas
+000098e0: 6b73 4c69 7374 7342 6f74 5d28 6874 7470  ksListsBot](http
+000098f0: 733a 2f2f 742e 6d65 2f54 6173 6b73 4c69  s://t.me/TasksLi
+00009900: 7374 7342 6f74 2920 285b 736f 7572 6365  stsBot) ([source
+00009910: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00009920: 2e63 6f6d 2f50 6162 6c6f 2d44 6176 696c  .com/Pablo-Davil
+00009930: 612f 5461 736b 734c 6973 7473 426f 7429  a/TasksListsBot)
+00009940: 2920 6279 205b 4050 6162 6c6f 2d44 6176  ) by [@Pablo-Dav
+00009950: 696c 615d 2868 7474 7073 3a2f 2f67 6974  ila](https://git
+00009960: 6875 622e 636f 6d2f 5061 626c 6f2d 4461  hub.com/Pablo-Da
+00009970: 7669 6c61 2920 2d20 4120 2874 6173 6b73  vila) - A (tasks
+00009980: 2920 6c69 7374 7320 6d61 6e61 6765 7220  ) lists manager 
+00009990: 626f 7420 666f 7220 5465 6c65 6772 616d  bot for Telegram
+000099a0: 2e0d 0a2a 205b 4d79 456c 697a 6150 7379  ...* [MyElizaPsy
+000099b0: 6368 6f6c 6f67 6973 7442 6f74 5d28 6874  chologistBot](ht
+000099c0: 7470 733a 2f2f 742e 6d65 2f54 6173 6b73  tps://t.me/Tasks
+000099d0: 4c69 7374 7342 6f74 2920 285b 736f 7572  ListsBot) ([sour
+000099e0: 6365 5d28 6874 7470 733a 2f2f 6769 7468  ce](https://gith
+000099f0: 7562 2e63 6f6d 2f50 6162 6c6f 2d44 6176  ub.com/Pablo-Dav
+00009a00: 696c 612f 4d79 456c 697a 6150 7379 6368  ila/MyElizaPsych
+00009a10: 6f6c 6f67 6973 7442 6f74 2929 2062 7920  ologistBot)) by 
+00009a20: 5b40 5061 626c 6f2d 4461 7669 6c61 5d28  [@Pablo-Davila](
+00009a30: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00009a40: 6f6d 2f50 6162 6c6f 2d44 6176 696c 6129  om/Pablo-Davila)
+00009a50: 202d 2041 6e20 696d 706c 656d 656e 7461   - An implementa
+00009a60: 7469 6f6e 206f 6620 7468 6520 6661 6d6f  tion of the famo
+00009a70: 7573 2045 6c69 7a61 2070 7379 6368 6f6c  us Eliza psychol
+00009a80: 6f67 6973 7420 6368 6174 626f 742e 0d0a  ogist chatbot...
+00009a90: 2a20 5b46 7263 7374 626f 745d 2868 7474  * [Frcstbot](htt
+00009aa0: 7073 3a2f 2f74 2e6d 652f 6672 6373 7462  ps://t.me/frcstb
+00009ab0: 6f74 2920 285b 736f 7572 6365 5d28 6874  ot) ([source](ht
+00009ac0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00009ad0: 2f4d 7273 7164 2f66 7263 7374 626f 745f  /Mrsqd/frcstbot_
+00009ae0: 7075 626c 6963 2929 2062 7920 5b4d 7273  public)) by [Mrs
+00009af0: 7164 5d28 6874 7470 733a 2f2f 6769 7468  qd](https://gith
+00009b00: 7562 2e63 6f6d 2f4d 7273 7164 292e 2041  ub.com/Mrsqd). A
+00009b10: 2054 656c 6567 7261 6d20 626f 7420 7468   Telegram bot th
+00009b20: 6174 2077 696c 6c20 616c 7761 7973 2062  at will always b
+00009b30: 6520 6861 7070 7920 746f 2073 686f 7720  e happy to show 
+00009b40: 796f 7520 7468 6520 7765 6174 6865 7220  you the weather 
+00009b50: 666f 7265 6361 7374 2e0d 0a2a 205b 4d69  forecast...* [Mi
+00009b60: 6e65 4772 616d 426f 745d 2868 7474 7073  neGramBot](https
+00009b70: 3a2f 2f67 6974 6875 622e 636f 6d2f 4d6f  ://github.com/Mo
+00009b80: 6469 7363 6846 6162 7269 6361 7469 6f6e  dischFabrication
+00009b90: 732f 4d69 6e65 4772 616d 426f 7429 2062  s/MineGramBot) b
+00009ba0: 7920 5b4d 6f64 6973 6368 4661 6272 6963  y [ModischFabric
+00009bb0: 6174 696f 6e73 5d28 6874 7470 733a 2f2f  ations](https://
+00009bc0: 6769 7468 7562 2e63 6f6d 2f4d 6f64 6973  github.com/Modis
+00009bd0: 6368 4661 6272 6963 6174 696f 6e73 292e  chFabrications).
+00009be0: 2054 6869 7320 626f 7420 6361 6e20 7374   This bot can st
+00009bf0: 6172 742c 2073 746f 7020 616e 6420 6d6f  art, stop and mo
+00009c00: 6e69 746f 7220 6120 6d69 6e65 6372 6166  nitor a minecraf
+00009c10: 7420 7365 7276 6572 2e0d 0a2a 205b 5461  t server...* [Ta
+00009c20: 626c 6574 6f70 2044 6963 6542 6f74 5d28  bletop DiceBot](
+00009c30: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00009c40: 6f6d 2f64 6578 7069 7065 722f 7461 626c  om/dexpiper/tabl
+00009c50: 6574 6f70 6469 6365 626f 7429 2062 7920  etopdicebot) by 
+00009c60: 5b64 6578 7069 7065 725d 2868 7474 7073  [dexpiper](https
+00009c70: 3a2f 2f67 6974 6875 622e 636f 6d2f 6465  ://github.com/de
+00009c80: 7870 6970 6572 292e 2054 6869 7320 626f  xpiper). This bo
+00009c90: 7420 6361 6e20 726f 6c6c 206d 756c 7469  t can roll multi
+00009ca0: 706c 6520 6469 6365 7320 666f 7220 5250  ple dices for RP
+00009cb0: 472d 6c69 6b65 2067 616d 6573 2c20 6164  G-like games, ad
+00009cc0: 6420 706f 7369 7469 7665 2061 6e64 206e  d positive and n
+00009cd0: 6567 6174 6976 6520 6d6f 6469 6669 6572  egative modifier
+00009ce0: 7320 616e 6420 7368 6f77 2073 686f 7274  s and show short
+00009cf0: 2064 6573 6372 6970 7469 6f6e 7320 746f   descriptions to
+00009d00: 2074 6865 2072 6f6c 6c73 2e0d 0a2a 205b   the rolls...* [
+00009d10: 4261 726e 616d 654b 6f6e 5d28 6874 7470  BarnameKon](http
+00009d20: 733a 2f2f 742e 6d65 2f42 6172 6e61 6d65  s://t.me/Barname
+00009d30: 4b6f 6e42 6f74 2920 6279 205b 416e 7661  KonBot) by [Anva
+00009d40: 6172 695d 2868 7474 7073 3a2f 2f67 6974  ari](https://git
+00009d50: 6875 622e 636f 6d2f 616e 7661 6172 6929  hub.com/anvaari)
+00009d60: 2e20 5468 6973 2042 6f74 206d 616b 6520  . This Bot make 
+00009d70: 2241 6464 2074 6f20 676f 6f67 6c65 2063  "Add to google c
+00009d80: 616c 656e 6461 7222 206c 696e 6b20 666f  alendar" link fo
+00009d90: 7220 796f 7572 2065 7665 6e74 732e 2049  r your events. I
+00009da0: 7420 6769 7665 2069 6e66 6f72 6d61 7469  t give informati
+00009db0: 6f6e 2061 626f 7574 2065 7665 6e74 2061  on about event a
+00009dc0: 6e64 2072 6574 7572 6e20 6c69 6e6b 2e20  nd return link. 
+00009dd0: 4974 2077 6f72 6b20 666f 7220 4a61 6c61  It work for Jala
+00009de0: 6c69 2063 616c 656e 6461 7220 616e 6420  li calendar and 
+00009df0: 696e 2054 6568 7261 6e20 5469 6d65 2e20  in Tehran Time. 
+00009e00: 5b53 6f75 7263 6520 636f 6465 5d28 6874  [Source code](ht
+00009e10: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00009e20: 2f61 6e76 6161 7269 2f42 6172 6e61 6d65  /anvaari/Barname
+00009e30: 4b6f 6e29 0d0a 2a20 5b54 7261 6e73 6c61  Kon)..* [Transla
+00009e40: 746f 7220 626f 745d 2868 7474 7073 3a2f  tor bot](https:/
+00009e50: 2f67 6974 6875 622e 636f 6d2f 4152 4545  /github.com/AREE
+00009e60: 4739 3446 4148 4144 2f74 7261 6e73 6c61  G94FAHAD/transla
+00009e70: 7465 5f74 6578 745f 626f 7429 2062 7920  te_text_bot) by 
+00009e80: 4172 6565 6720 4661 6861 642e 2054 6869  Areeg Fahad. Thi
+00009e90: 7320 626f 7420 6361 6e20 6265 2075 7365  s bot can be use
+00009ea0: 6420 746f 2074 7261 6e73 6c61 7465 2074  d to translate t
+00009eb0: 6578 7473 2e20 0d0a 2a20 5b44 6967 6974  exts. ..* [Digit
+00009ec0: 616c 2043 7279 7074 6f63 7572 7265 6e63  al Cryptocurrenc
+00009ed0: 7920 626f 745d 2868 7474 7073 3a2f 2f67  y bot](https://g
+00009ee0: 6974 6875 622e 636f 6d2f 4152 4545 4739  ithub.com/AREEG9
+00009ef0: 3446 4148 4144 2f63 7572 7265 6e63 6965  4FAHAD/currencie
+00009f00: 735f 626f 7429 2062 7920 4172 6565 6720  s_bot) by Areeg 
+00009f10: 4661 6861 642e 2057 6974 6820 7468 6973  Fahad. With this
+00009f20: 2062 6f74 2c20 796f 7520 6361 6e20 6e6f   bot, you can no
+00009f30: 7720 6d6f 6e69 746f 7220 7468 6520 7072  w monitor the pr
+00009f40: 6963 6573 206f 6620 6d6f 7265 2074 6861  ices of more tha
+00009f50: 6e20 3132 2064 6967 6974 616c 2043 7279  n 12 digital Cry
+00009f60: 7074 6f63 7572 7265 6e63 792e 200d 0a2a  ptocurrency. ..*
+00009f70: 205b 416e 7469 2d54 7261 636b 696e 6720   [Anti-Tracking 
+00009f80: 426f 745d 2868 7474 7073 3a2f 2f74 2e6d  Bot](https://t.m
+00009f90: 652f 416e 7469 5472 6163 6b69 6e67 426f  e/AntiTrackingBo
+00009fa0: 7429 2062 7920 4c65 6f6e 2048 6565 7373  t) by Leon Heess
+00009fb0: 205b 2873 6f75 7263 6529 5d28 6874 7470   [(source)](http
+00009fc0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f6c  s://github.com/l
+00009fd0: 656f 6e68 6565 7373 2f41 6e74 6954 7261  eonheess/AntiTra
+00009fe0: 636b 696e 6742 6f74 292e 2053 656e 6420  ckingBot). Send 
+00009ff0: 616e 7920 6c69 6e6b 2c20 616e 6420 7468  any link, and th
+0000a000: 6520 626f 7420 7472 6965 7320 6974 7320  e bot tries its 
+0000a010: 6265 7374 2074 6f20 7265 6d6f 7665 2061  best to remove a
+0000a020: 6c6c 2074 7261 636b 696e 6720 6672 6f6d  ll tracking from
+0000a030: 2074 6865 206c 696e 6b20 796f 7520 7365   the link you se
+0000a040: 6e74 2e0d 0a2a 205b 4465 7665 6c6f 7065  nt...* [Develope
+0000a050: 7220 426f 745d 2868 7474 7073 3a2f 2f74  r Bot](https://t
+0000a060: 2e6d 652f 496e 6444 6576 656c 6f70 6572  .me/IndDeveloper
+0000a070: 5f62 6f74 2920 6279 205b 5669 7368 616c  _bot) by [Vishal
+0000a080: 2053 696e 6768 5d28 6874 7470 733a 2f2f   Singh](https://
+0000a090: 6769 7468 7562 2e63 6f6d 2f76 6973 6861  github.com/visha
+0000a0a0: 6c32 3337 3629 205b 2873 6f75 7263 6520  l2376) [(source 
+0000a0b0: 636f 6465 295d 2868 7474 7073 3a2f 2f67  code)](https://g
+0000a0c0: 6974 6875 622e 636f 6d2f 7669 7368 616c  ithub.com/vishal
+0000a0d0: 3233 3736 2f74 656c 6567 7261 6d2d 626f  2376/telegram-bo
+0000a0e0: 7429 2054 6869 7320 7465 6c65 6772 616d  t) This telegram
+0000a0f0: 2062 6f74 2063 616e 2064 6f20 7461 736b   bot can do task
+0000a100: 7320 6c69 6b65 2047 6974 4875 6220 7365  s like GitHub se
+0000a110: 6172 6368 2026 2063 6c6f 6e65 2c70 726f  arch & clone,pro
+0000a120: 7669 6465 2063 2b2b 206c 6561 726e 696e  vide c++ learnin
+0000a130: 6720 7265 736f 7572 6365 7320 2c53 7461  g resources ,Sta
+0000a140: 636b 6f76 6572 666c 6f77 2073 6561 7263  ckoverflow searc
+0000a150: 682c 2043 6f64 6566 6f72 6365 7328 7072  h, Codeforces(pr
+0000a160: 6f66 696c 6520 7669 7375 616c 697a 6572  ofile visualizer
+0000a170: 2c72 616e 646f 6d20 7072 6f62 6c65 6d73  ,random problems
+0000a180: 290d 0a2a 205b 6f6e 6549 504f 2062 6f74  )..* [oneIPO bot
+0000a190: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+0000a1a0: 2e63 6f6d 2f61 6164 6974 7961 3232 3030  .com/aaditya2200
+0000a1b0: 2f49 504f 2d70 726f 6a29 2062 7920 5b41  /IPO-proj) by [A
+0000a1c0: 6164 6974 6879 615d 2868 7474 7073 3a2f  adithya](https:/
+0000a1d0: 2f67 6974 6875 622e 636f 6d2f 6161 6469  /github.com/aadi
+0000a1e0: 7479 6132 3230 3029 2026 205b 416d 6f6c  tya2200) & [Amol
+0000a1f0: 2053 6f61 6e73 5d28 6874 7470 733a 2f2f   Soans](https://
+0000a200: 6769 7468 7562 2e63 6f6d 2f41 6d6f 6c44  github.com/AmolD
+0000a210: 6572 6963 6b53 6f61 6e73 2920 5468 6973  erickSoans) This
+0000a220: 2054 656c 6567 7261 6d20 626f 7420 7072   Telegram bot pr
+0000a230: 6f76 6964 6573 206c 6976 6520 7570 6461  ovides live upda
+0000a240: 7465 7320 2c20 6461 7461 2061 6e64 2064  tes , data and d
+0000a250: 6f63 756d 656e 7473 206f 6e20 6375 7272  ocuments on curr
+0000a260: 656e 7420 616e 6420 7570 636f 6d69 6e67  ent and upcoming
+0000a270: 2049 504f 7328 496e 6974 6961 6c20 5075   IPOs(Initial Pu
+0000a280: 626c 6963 204f 6666 6572 696e 6773 2920  blic Offerings) 
+0000a290: 0d0a 2a20 5b43 6f72 6f6e 6147 7261 7068  ..* [CoronaGraph
+0000a2a0: 7342 6f74 5d28 6874 7470 733a 2f2f 742e  sBot](https://t.
+0000a2b0: 6d65 2f43 6f76 6964 4772 6170 685f 626f  me/CovidGraph_bo
+0000a2c0: 7429 2028 5b73 6f75 7263 655d 2868 7474  t) ([source](htt
+0000a2d0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0000a2e0: 5472 6576 6f72 5769 6e73 7472 616c 2f43  TrevorWinstral/C
+0000a2f0: 6f72 6f6e 6147 7261 7068 7342 6f74 2929  oronaGraphsBot))
+0000a300: 2062 7920 2a54 7265 766f 7257 696e 7374   by *TrevorWinst
+0000a310: 7261 6c2a 202d 2047 6574 7320 6c69 7665  ral* - Gets live
+0000a320: 2043 4f56 4944 2043 6f75 6e74 7279 2064   COVID Country d
+0000a330: 6174 612c 2070 6c6f 7473 2069 742c 2061  ata, plots it, a
+0000a340: 6e64 2062 7269 6566 7320 7468 6520 7573  nd briefs the us
+0000a350: 6572 0d0a 2a20 5b45 5448 4c65 6374 7572  er..* [ETHLectur
+0000a360: 6542 6f74 5d28 6874 7470 733a 2f2f 742e  eBot](https://t.
+0000a370: 6d65 2f45 5448 4c65 6374 7572 6542 6f74  me/ETHLectureBot
+0000a380: 2920 285b 736f 7572 6365 5d28 6874 7470  ) ([source](http
+0000a390: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f54  s://github.com/T
+0000a3a0: 7265 766f 7257 696e 7374 7261 6c2f 4554  revorWinstral/ET
+0000a3b0: 484c 6563 7475 7265 426f 7429 2920 6279  HLectureBot)) by
+0000a3c0: 202a 5472 6576 6f72 5769 6e73 7472 616c   *TrevorWinstral
+0000a3d0: 2a20 2d20 4e6f 7469 6669 6573 2045 5448  * - Notifies ETH
+0000a3e0: 2073 7475 6465 6e74 7320 7768 656e 2074   students when t
+0000a3f0: 6865 6972 206c 6563 7475 7265 7320 6861  heir lectures ha
+0000a400: 7665 2062 6565 6e20 7570 6c6f 6164 6564  ve been uploaded
+0000a410: 0d0a 2a20 5b56 6c75 6e20 4669 6e64 6572  ..* [Vlun Finder
+0000a420: 2042 6f74 5d28 6874 7470 733a 2f2f 6769   Bot](https://gi
+0000a430: 7468 7562 2e63 6f6d 2f72 6573 696e 7072  thub.com/resinpr
+0000a440: 6f74 6569 6e32 3333 332f 566c 756e 2d46  otein2333/Vlun-F
+0000a450: 696e 6465 722d 626f 7429 2062 7920 5b52  inder-bot) by [R
+0000a460: 6573 696e 7072 6f74 6569 6e32 3333 335d  esinprotein2333]
+0000a470: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+0000a480: 636f 6d2f 7265 7369 6e70 726f 7465 696e  com/resinprotein
+0000a490: 3233 3333 292e 2054 6869 7320 626f 7420  2333). This bot 
+0000a4a0: 6361 6e20 6865 6c70 2079 6f75 2074 6f20  can help you to 
+0000a4b0: 6669 6e64 2054 6865 2069 6e66 6f72 6d61  find The informa
+0000a4c0: 7469 6f6e 206f 6620 4356 4520 7675 6c6e  tion of CVE vuln
+0000a4d0: 6572 6162 696c 6974 6965 732e 0d0a 2a20  erabilities...* 
+0000a4e0: 5b45 5448 4761 7346 6565 5472 6163 6b65  [ETHGasFeeTracke
+0000a4f0: 7242 6f74 5d28 6874 7470 733a 2f2f 742e  rBot](https://t.
+0000a500: 6d65 2f45 5448 4761 7346 6565 5472 6163  me/ETHGasFeeTrac
+0000a510: 6b65 7242 6f74 2920 285b 536f 7572 6365  kerBot) ([Source
+0000a520: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+0000a530: 2e63 6f6d 2f44 6576 4164 7669 6b2f 4554  .com/DevAdvik/ET
+0000a540: 4847 6173 4665 6554 7261 636b 6572 426f  HGasFeeTrackerBo
+0000a550: 745d 2920 6279 202a 4465 7641 6476 696b  t]) by *DevAdvik
+0000a560: 2a20 2d20 4765 7420 4c69 7665 2045 7468  * - Get Live Eth
+0000a570: 6572 6575 6d20 4761 7320 4665 6573 2069  ereum Gas Fees i
+0000a580: 6e20 4757 4549 0d0a 2a20 5b47 6f6f 676c  n GWEI..* [Googl
+0000a590: 6520 5368 6565 7420 426f 745d 2868 7474  e Sheet Bot](htt
+0000a5a0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0000a5b0: 4a6f 6163 6869 6d53 7461 6e69 736c 6175  JoachimStanislau
+0000a5c0: 732f 5465 6c65 5f53 6865 6574 5f62 6f74  s/Tele_Sheet_bot
+0000a5d0: 2920 6279 205b 4a6f 6163 6869 6d53 7461  ) by [JoachimSta
+0000a5e0: 6e69 736c 6175 735d 2868 7474 7073 3a2f  nislaus](https:/
+0000a5f0: 2f67 6974 6875 622e 636f 6d2f 4a6f 6163  /github.com/Joac
+0000a600: 6869 6d53 7461 6e69 736c 6175 7329 2e20  himStanislaus). 
+0000a610: 5468 6973 2062 6f74 2063 616e 2068 656c  This bot can hel
+0000a620: 7020 796f 7520 746f 2074 7261 636b 2079  p you to track y
+0000a630: 6f75 7220 6578 7065 6e73 6573 2062 7920  our expenses by 
+0000a640: 7570 6c6f 6164 696e 6720 796f 7572 2062  uploading your b
+0000a650: 6f74 2065 6e74 7269 6573 2074 6f20 796f  ot entries to yo
+0000a660: 7572 2067 6f6f 676c 6520 7368 6565 742e  ur google sheet.
+0000a670: 0d0a 2a20 5b47 7261 6e64 5175 697a 2042  ..* [GrandQuiz B
+0000a680: 6f74 5d28 6874 7470 733a 2f2f 6769 7468  ot](https://gith
+0000a690: 7562 2e63 6f6d 2f43 6172 6c6f 736d 6137  ub.com/Carlosma7
+0000a6a0: 2f54 464d 2d47 7261 6e64 5175 697a 2920  /TFM-GrandQuiz) 
+0000a6b0: 6279 205b 4361 726c 6f73 6d61 375d 2868  by [Carlosma7](h
+0000a6c0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+0000a6d0: 6d2f 4361 726c 6f73 6d61 3729 2e20 5468  m/Carlosma7). Th
+0000a6e0: 6973 2062 6f74 2069 7320 6120 7472 6976  is bot is a triv
+0000a6f0: 6961 2067 616d 6520 7468 6174 2061 6c6c  ia game that all
+0000a700: 6f77 7320 796f 7520 746f 2070 6c61 7920  ows you to play 
+0000a710: 7769 7468 2070 656f 706c 6520 6672 6f6d  with people from
+0000a720: 2064 6966 6665 7265 6e74 2061 6765 732e   different ages.
+0000a730: 2054 6869 7320 7072 6f6a 6563 7420 6164   This project ad
+0000a740: 6472 6573 7365 7320 7468 6520 7573 6520  dresses the use 
+0000a750: 6f66 2061 2073 7973 7465 6d20 7468 726f  of a system thro
+0000a760: 7567 6820 6368 6174 626f 7473 2074 6f20  ugh chatbots to 
+0000a770: 6361 7272 7920 6f75 7420 6120 736f 6369  carry out a soci
+0000a780: 616c 2061 6e64 2069 6e74 6572 6765 6e65  al and intergene
+0000a790: 7261 7469 6f6e 616c 2067 616d 6520 6173  rational game as
+0000a7a0: 2061 6e20 616c 7465 726e 6174 6976 6520   an alternative 
+0000a7b0: 746f 2074 7261 6469 7469 6f6e 616c 2067  to traditional g
+0000a7c0: 616d 6520 6465 7665 6c6f 706d 656e 742e  ame development.
+0000a7d0: 0d0a 2a20 5b44 6963 6369 6f6e 6172 696f  ..* [Diccionario
+0000a7e0: 2064 6520 6c61 2052 4145 5d28 6874 7470   de la RAE](http
+0000a7f0: 733a 2f2f 742e 6d65 2f64 6c65 7261 6562  s://t.me/dleraeb
+0000a800: 6f74 2920 285b 736f 7572 6365 5d28 6874  ot) ([source](ht
+0000a810: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+0000a820: 2f73 7475 6465 6e74 656e 6865 727a 2f64  /studentenherz/d
+0000a830: 6c65 7261 6562 6f74 2929 2054 6869 7320  leraebot)) This 
+0000a840: 626f 7420 6c65 7473 2079 6f75 2066 696e  bot lets you fin
+0000a850: 6420 6469 6669 6e69 7469 6f6e 7320 6f66  d difinitions of
+0000a860: 2077 6f72 6473 2069 6e20 5370 616e 6973   words in Spanis
+0000a870: 6820 7573 696e 6720 5b52 4145 2773 2064  h using [RAE's d
+0000a880: 6963 7469 6f6e 6172 795d 2868 7474 7073  ictionary](https
+0000a890: 3a2f 2f64 6c65 2e72 6165 2e65 732f 292e  ://dle.rae.es/).
+0000a8a0: 2049 7420 6665 6174 7572 6573 2064 6972   It features dir
+0000a8b0: 6563 7420 6d65 7373 6167 6520 616e 6420  ect message and 
+0000a8c0: 696e 6c69 6e65 2073 6561 7263 682e 0d0a  inline search...
+0000a8d0: 2a20 5b72 656d 6f74 6554 656c 6567 7261  * [remoteTelegra
+0000a8e0: 6d53 6865 6c6c 5d28 6874 7470 733a 2f2f  mShell](https://
+0000a8f0: 6769 7468 7562 2e63 6f6d 2f45 6e72 6971  github.com/Enriq
+0000a900: 7565 4d6f 7261 6e2f 7265 6d6f 7465 5465  ueMoran/remoteTe
+0000a910: 6c65 6772 616d 5368 656c 6c29 2062 7920  legramShell) by 
+0000a920: 5b45 6e72 6971 7565 4d6f 7261 6e5d 2868  [EnriqueMoran](h
+0000a930: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+0000a940: 6d2f 456e 7269 7175 654d 6f72 616e 292e  m/EnriqueMoran).
+0000a950: 2043 6f6e 7472 6f6c 2079 6f75 7220 4c69   Control your Li
+0000a960: 6e75 784f 5320 636f 6d70 7574 6572 2074  nuxOS computer t
+0000a970: 6872 6f75 6768 2054 656c 6567 7261 6d2e  hrough Telegram.
+0000a980: 0d0a 2a20 5b43 6f6d 6d65 7263 6520 5465  ..* [Commerce Te
+0000a990: 6c65 6772 616d 2042 6f74 5d28 6874 7470  legram Bot](http
+0000a9a0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f61  s://github.com/a
+0000a9b0: 7969 7469 6e79 612f 636f 6d6d 6572 6365  yitinya/commerce
+0000a9c0: 2d74 656c 6567 7261 6d2d 626f 742f 292e  -telegram-bot/).
+0000a9d0: 204d 616b 6520 7075 7263 6861 7365 7320   Make purchases 
+0000a9e0: 6f66 2069 7465 6d73 2069 6e20 6120 7374  of items in a st
+0000a9f0: 6f72 6520 7769 7468 2061 6e20 4164 6d69  ore with an Admi
+0000aa00: 6e20 7061 6e65 6c20 666f 7220 6461 7461  n panel for data
+0000aa10: 2063 6f6e 7472 6f6c 2061 6e64 206e 6f74   control and not
+0000aa20: 6966 6963 6174 696f 6e73 2e0d 0a2a 205b  ifications...* [
+0000aa30: 5079 6672 616d 2d74 656c 6567 7261 6d2d  Pyfram-telegram-
+0000aa40: 626f 745d 2868 7474 7073 3a2f 2f67 6974  bot](https://git
+0000aa50: 6875 622e 636f 6d2f 736b 656c 6c79 3337  hub.com/skelly37
+0000aa60: 2f70 7966 7261 6d2d 7465 6c65 6772 616d  /pyfram-telegram
+0000aa70: 2d62 6f74 2920 5175 6572 7920 776f 6c66  -bot) Query wolf
+0000aa80: 7261 6d61 6c70 6861 2e63 6f6d 2061 6e64  ramalpha.com and
+0000aa90: 206d 616b 6520 7573 6520 6f66 2069 7473   make use of its
+0000aaa0: 2041 5049 2074 6872 6f75 6768 2054 656c   API through Tel
+0000aab0: 6567 7261 6d2e 0d0a 2a20 5b54 7261 6e73  egram...* [Trans
+0000aac0: 6c61 7465 5468 6973 5669 6465 6f42 6f74  lateThisVideoBot
+0000aad0: 5d28 6874 7470 733a 2f2f 6769 746c 6162  ](https://gitlab
+0000aae0: 2e63 6f6d 2f57 7565 7266 656c 4465 762f  .com/WuerfelDev/
+0000aaf0: 7472 616e 736c 6174 6574 6869 7376 6964  translatethisvid
+0000ab00: 656f 2920 5468 6973 2042 6f74 2063 616e  eo) This Bot can
+0000ab10: 2075 6e64 6572 7374 616e 6420 7370 6f6b   understand spok
+0000ab20: 656e 2074 6578 7420 696e 2076 6964 656f  en text in video
+0000ab30: 7320 616e 6420 7472 616e 736c 6174 6520  s and translate 
+0000ab40: 6974 2074 6f20 456e 676c 6973 680d 0a2a  it to English..*
+0000ab50: 205b 5a79 7072 6578 615d 2868 7474 7073   [Zyprexa](https
+0000ab60: 3a2f 2f74 2e6d 652f 6d61 7468 656d 6174  ://t.me/mathemat
+0000ab70: 6869 6373 426f 7429 2028 5b73 6f75 7263  hicsBot) ([sourc
+0000ab80: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
+0000ab90: 622e 636f 6d2f 6174 6966 352f 7a79 7072  b.com/atif5/zypr
+0000aba0: 6578 6129 2920 5a79 7072 6578 6120 6361  exa)) Zyprexa ca
+0000abb0: 6e20 736f 6c76 652c 2068 656c 7020 796f  n solve, help yo
+0000abc0: 7520 736f 6c76 6520 616e 7920 6d61 7468  u solve any math
+0000abd0: 656d 6174 6963 616c 2070 726f 626c 656d  ematical problem
+0000abe0: 2079 6f75 2065 6e63 6f75 6e74 6572 2061   you encounter a
+0000abf0: 6e64 2063 6f6e 7665 7274 2079 6f75 7220  nd convert your 
+0000ac00: 7265 6775 6c61 7220 6d61 7468 656d 6174  regular mathemat
+0000ac10: 6963 616c 2065 7870 7265 7373 696f 6e73  ical expressions
+0000ac20: 2069 6e74 6f20 6265 6175 7469 6675 6c20   into beautiful 
+0000ac30: 696d 6167 6572 7920 7573 696e 6720 4c61  imagery using La
+0000ac40: 5465 582e 0d0a 2a20 5b42 696e 636f 6465  TeX...* [Bincode
+0000ac50: 2d74 656c 6567 7261 6d2d 626f 745d 2868  -telegram-bot](h
+0000ac60: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+0000ac70: 6d2f 7475 7368 6172 6865 726f 2f62 696e  m/tusharhero/bin
+0000ac80: 636f 6465 2d74 656c 6567 7261 6d2d 626f  code-telegram-bo
+0000ac90: 7429 2062 7920 5b74 7573 6861 7268 6572  t) by [tusharher
+0000aca0: 6f5d 2868 7474 7073 3a2f 2f67 6974 6875  o](https://githu
+0000acb0: 622e 636f 6d2f 7475 7368 6172 6865 726f  b.com/tusharhero
+0000acc0: 2920 2d20 4d61 6b65 7320 5b62 696e 636f  ) - Makes [binco
+0000acd0: 6465 735d 2868 7474 7073 3a2f 2f67 6974  des](https://git
+0000ace0: 6875 622e 636f 6d2f 7475 7368 6172 6865  hub.com/tusharhe
+0000acf0: 726f 2f62 696e 636f 6465 2920 6672 6f6d  ro/bincode) from
+0000ad00: 2074 6578 7420 7072 6f76 6964 6573 2061   text provides a
+0000ad10: 6e64 2061 6c73 6f20 636f 6e76 6572 7473  nd also converts
+0000ad20: 2074 6865 6d20 6261 636b 2074 6f20 7465   them back to te
+0000ad30: 7874 2e0d 0a2a 205b 6879 6472 6f6c 6962  xt...* [hydrolib
+0000ad40: 5f62 6f74 5d28 6874 7470 733a 2f2f 6769  _bot](https://gi
+0000ad50: 7468 7562 2e63 6f6d 2f4d 6179 736f 6e39  thub.com/Mayson9
+0000ad60: 302f 6879 6472 6f6c 6962 5f62 6f74 2920  0/hydrolib_bot) 
+0000ad70: 546f 6f6c 7365 7420 666f 7220 4879 6472  Toolset for Hydr
+0000ad80: 6f70 6869 6c69 6120 7461 626c 6574 6f70  ophilia tabletop
+0000ad90: 2067 616d 6520 2867 616d 6520 6361 7264   game (game card
+0000ada0: 732c 2072 756c 6573 2c20 7374 7275 6374  s, rules, struct
+0000adb0: 7572 652e 2e2e 292e 0d0a 2a20 5b47 7567  ure...)...* [Gug
+0000adc0: 756d 6f65 2d62 6f74 5d28 6874 7470 3a2f  umoe-bot](http:/
+0000add0: 2f74 2e6d 652f 6775 6775 6d6f 655f 626f  /t.me/gugumoe_bo
+0000ade0: 7429 2028 5b73 6f75 7263 655d 2868 7474  t) ([source](htt
+0000adf0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0000ae00: 476f 6f47 754a 6961 6e67 2f47 7567 756d  GooGuJiang/Gugum
+0000ae10: 6f65 2d62 6f74 2929 2062 7920 5be5 9295  oe-bot)) by [...
+0000ae20: e8b0 b7e9 85b1 5d28 6874 7470 733a 2f2f  ......](https://
+0000ae30: 676d 6f65 2e63 6329 2047 7558 6961 6f4a  gmoe.cc) GuXiaoJ
+0000ae40: 6961 6e67 2069 7320 6120 6d75 6c74 692d  iang is a multi-
+0000ae50: 6675 6e63 7469 6f6e 616c 2072 6f62 6f74  functional robot
+0000ae60: 2c20 7375 6368 2061 7320 4f53 5520 6761  , such as OSU ga
+0000ae70: 6d65 2069 6e66 6f72 6d61 7469 6f6e 2071  me information q
+0000ae80: 7565 7279 2c20 4950 2074 6573 742c 2061  uery, IP test, a
+0000ae90: 6e69 6d61 7469 6f6e 2073 6372 6565 6e73  nimation screens
+0000aea0: 686f 7420 7365 6172 6368 2061 6e64 206f  hot search and o
+0000aeb0: 7468 6572 2066 756e 6374 696f 6e73 2e0d  ther functions..
+0000aec0: 0a2a 205b 4665 6564 6261 636b 2d62 6f74  .* [Feedback-bot
+0000aed0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+0000aee0: 2e63 6f6d 2f63 6f64 6572 3230 3230 6f66  .com/coder2020of
+0000aef0: 6669 6369 616c 2f66 6565 6462 6163 6b62  ficial/feedbackb
+0000af00: 6f74 2920 4120 6665 6564 6261 636b 2062  ot) A feedback b
+0000af10: 6f74 2066 6f72 2075 7365 722d 6164 6d69  ot for user-admi
+0000af20: 6e20 636f 6d6d 756e 6963 6174 696f 6e2e  n communication.
+0000af30: 204d 6164 6520 6f6e 2041 7379 6e63 5465   Made on AsyncTe
+0000af40: 6c65 426f 742c 2075 7369 6e67 205b 7465  leBot, using [te
+0000af50: 6d70 6c61 7465 5d28 6874 7470 733a 2f2f  mplate](https://
+0000af60: 6769 7468 7562 2e63 6f6d 2f63 6f64 6572  github.com/coder
+0000af70: 3230 3230 6f66 6669 6369 616c 2f61 7379  2020official/asy
+0000af80: 6e63 7465 6c65 626f 745f 7465 6d70 6c61  nctelebot_templa
+0000af90: 7465 292e 0d0a 2a20 5b54 656c 6553 6572  te)...* [TeleSer
+0000afa0: 765d 2868 7474 7073 3a2f 2f67 6974 6875  v](https://githu
+0000afb0: 622e 636f 6d2f 6162 6c61 6b65 6c79 2f54  b.com/ablakely/T
+0000afc0: 656c 6553 6572 7629 2062 7920 5b61 626c  eleServ) by [abl
+0000afd0: 616b 656c 795d 2868 7474 7073 3a2f 2f67  akely](https://g
+0000afe0: 6974 6875 622e 636f 6d2f 6162 6c61 6b65  ithub.com/ablake
+0000aff0: 6c79 2920 5468 6973 2069 7320 6120 5465  ly) This is a Te
+0000b000: 6c65 6772 616d 2074 6f20 4952 4320 6272  legram to IRC br
+0000b010: 6964 6765 2077 6869 6368 206c 696e 6b73  idge which links
+0000b020: 2061 7320 616e 2049 5243 2073 6572 7665   as an IRC serve
+0000b030: 7220 616e 6420 6d61 6b65 7320 5465 6c65  r and makes Tele
+0000b040: 6772 616d 2075 7365 7273 2061 7070 6561  gram users appea
+0000b050: 7220 6173 206e 6174 6976 6520 4952 4320  r as native IRC 
+0000b060: 7573 6572 732e 0d0a 2a20 5b53 696d 706c  users...* [Simpl
+0000b070: 6520 5374 6f72 6520 426f 745d 2868 7474  e Store Bot](htt
+0000b080: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0000b090: 416e 746f 6e47 6c79 7a69 6e2f 6d79 7368  AntonGlyzin/mysh
+0000b0a0: 6f70 626f 7429 2062 7920 5b41 6e74 6f6e  opbot) by [Anton
+0000b0b0: 2047 6c79 7a69 6e5d 2868 7474 7073 3a2f   Glyzin](https:/
+0000b0c0: 2f67 6974 6875 622e 636f 6d2f 416e 746f  /github.com/Anto
+0000b0d0: 6e47 6c79 7a69 6e29 2054 6869 7320 6973  nGlyzin) This is
+0000b0e0: 2061 2073 696d 706c 6520 7465 6c65 6772   a simple telegr
+0000b0f0: 616d 2d73 746f 7265 2077 6974 6820 616e  am-store with an
+0000b100: 2061 646d 696e 2070 616e 656c 2e20 4465   admin panel. De
+0000b110: 7369 676e 6564 2061 6363 6f72 6469 6e67  signed according
+0000b120: 2074 6f20 6120 7465 6d70 6c61 7465 2e0d   to a template..
+0000b130: 0a0d 0a2a 2a57 616e 7420 746f 2068 6176  ...**Want to hav
+0000b140: 6520 796f 7572 2062 6f74 206c 6973 7465  e your bot liste
+0000b150: 6420 6865 7265 3f20 4a75 7374 206d 616b  d here? Just mak
+0000b160: 6520 6120 7075 6c6c 2072 6571 7565 7374  e a pull request
+0000b170: 2e20 4f6e 6c79 2062 6f74 7320 7769 7468  . Only bots with
+0000b180: 2070 7562 6c69 6320 736f 7572 6365 2063   public source c
+0000b190: 6f64 6520 6172 6520 6163 6365 7074 6564  ode are accepted
+0000b1a0: 2e2a 2a0d 0a                             .**..
```

### Comparing `pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/PKG-INFO` & `pyTelegramBotAPI-4.9.0/README.md`

 * *Files 5% similar despite different names*

```diff
@@ -1,47 +1,21 @@
-Metadata-Version: 2.1
-Name: pyTelegramBotAPI
-Version: 4.8.0
-Summary: Python Telegram bot api. 
-Home-page: https://github.com/eternnoir/pyTelegramBotAPI
-Author: eternnoir
-Author-email: eternnoir@gmail.com
-License: GPL2
-Keywords: telegram bot api tools
-Classifier: Development Status :: 5 - Production/Stable
-Classifier: Programming Language :: Python :: 3
-Classifier: Environment :: Console
-Classifier: License :: OSI Approved :: GNU General Public License v2 (GPLv2)
-Description-Content-Type: text/markdown
-Provides-Extra: json
-Provides-Extra: PIL
-Provides-Extra: redis
-Provides-Extra: aioredis
-Provides-Extra: aiohttp
-Provides-Extra: fastapi
-Provides-Extra: uvicorn
-Provides-Extra: psutil
-Provides-Extra: coloredlogs
-Provides-Extra: watchdog
-License-File: LICENSE
-
 
 [![PyPi Package Version](https://img.shields.io/pypi/v/pyTelegramBotAPI.svg)](https://pypi.python.org/pypi/pyTelegramBotAPI)
 [![Supported Python versions](https://img.shields.io/pypi/pyversions/pyTelegramBotAPI.svg)](https://pypi.python.org/pypi/pyTelegramBotAPI)
 [![Documentation Status](https://readthedocs.org/projects/pytba/badge/?version=latest)](https://pytba.readthedocs.io/en/latest/?badge=latest)
 [![Build Status](https://travis-ci.org/eternnoir/pyTelegramBotAPI.svg?branch=master)](https://travis-ci.org/eternnoir/pyTelegramBotAPI)
 [![PyPi downloads](https://img.shields.io/pypi/dm/pyTelegramBotAPI.svg)](https://pypi.org/project/pyTelegramBotAPI/)
 [![PyPi status](https://img.shields.io/pypi/status/pytelegrambotapi.svg?style=flat-square)](https://pypi.python.org/pypi/pytelegrambotapi)
 
 # <p align="center">pyTelegramBotAPI
 
 <p align="center">A simple, but extensible Python implementation for the <a href="https://core.telegram.org/bots/api">Telegram Bot API</a>.</p>
 <p align="center">Both synchronous and asynchronous.</p>
 
-## <p align="center">Supported Bot API version: <a href="https://core.telegram.org/bots/api#november-5-2022">6.3</a>!
+## <p align="center">Supported Bot API version: <a href="https://core.telegram.org/bots/api#december-30-2022">6.4</a>!
 
 <h2><a href='https://pytba.readthedocs.io/en/latest/index.html'>Official documentation</a></h2>
 	
 ## Contents
 
   * [Getting started](#getting-started)
   * [Writing your first bot](#writing-your-first-bot)
@@ -899,14 +873,15 @@
 * [ETHLectureBot](https://t.me/ETHLectureBot) ([source](https://github.com/TrevorWinstral/ETHLectureBot)) by *TrevorWinstral* - Notifies ETH students when their lectures have been uploaded
 * [Vlun Finder Bot](https://github.com/resinprotein2333/Vlun-Finder-bot) by [Resinprotein2333](https://github.com/resinprotein2333). This bot can help you to find The information of CVE vulnerabilities.
 * [ETHGasFeeTrackerBot](https://t.me/ETHGasFeeTrackerBot) ([Source](https://github.com/DevAdvik/ETHGasFeeTrackerBot]) by *DevAdvik* - Get Live Ethereum Gas Fees in GWEI
 * [Google Sheet Bot](https://github.com/JoachimStanislaus/Tele_Sheet_bot) by [JoachimStanislaus](https://github.com/JoachimStanislaus). This bot can help you to track your expenses by uploading your bot entries to your google sheet.
 * [GrandQuiz Bot](https://github.com/Carlosma7/TFM-GrandQuiz) by [Carlosma7](https://github.com/Carlosma7). This bot is a trivia game that allows you to play with people from different ages. This project addresses the use of a system through chatbots to carry out a social and intergenerational game as an alternative to traditional game development.
 * [Diccionario de la RAE](https://t.me/dleraebot) ([source](https://github.com/studentenherz/dleraebot)) This bot lets you find difinitions of words in Spanish using [RAE's dictionary](https://dle.rae.es/). It features direct message and inline search.
 * [remoteTelegramShell](https://github.com/EnriqueMoran/remoteTelegramShell) by [EnriqueMoran](https://github.com/EnriqueMoran). Control your LinuxOS computer through Telegram.
+* [Commerce Telegram Bot](https://github.com/ayitinya/commerce-telegram-bot/). Make purchases of items in a store with an Admin panel for data control and notifications.
 * [Pyfram-telegram-bot](https://github.com/skelly37/pyfram-telegram-bot) Query wolframalpha.com and make use of its API through Telegram.
 * [TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo) This Bot can understand spoken text in videos and translate it to English
 * [Zyprexa](https://t.me/mathemathicsBot) ([source](https://github.com/atif5/zyprexa)) Zyprexa can solve, help you solve any mathematical problem you encounter and convert your regular mathematical expressions into beautiful imagery using LaTeX.
 * [Bincode-telegram-bot](https://github.com/tusharhero/bincode-telegram-bot) by [tusharhero](https://github.com/tusharhero) - Makes [bincodes](https://github.com/tusharhero/bincode) from text provides and also converts them back to text.
 * [hydrolib_bot](https://github.com/Mayson90/hydrolib_bot) Toolset for Hydrophilia tabletop game (game cards, rules, structure...).
 * [Gugumoe-bot](http://t.me/gugumoe_bot) ([source](https://github.com/GooGuJiang/Gugumoe-bot)) by [咕谷酱](https://gmoe.cc) GuXiaoJiang is a multi-functional robot, such as OSU game information query, IP test, animation screenshot search and other functions.
 * [Feedback-bot](https://github.com/coder2020official/feedbackbot) A feedback bot for user-admin communication. Made on AsyncTeleBot, using [template](https://github.com/coder2020official/asynctelebot_template).
```

#### html2text {}

```diff
@@ -1,33 +1,23 @@
-Metadata-Version: 2.1 Name: pyTelegramBotAPI Version: 4.8.0 Summary: Python
-Telegram bot api. Home-page: https://github.com/eternnoir/pyTelegramBotAPI
-Author: eternnoir Author-email: eternnoir@gmail.com License: GPL2 Keywords:
-telegram bot api tools Classifier: Development Status :: 5 - Production/Stable
-Classifier: Programming Language :: Python :: 3 Classifier: Environment ::
-Console Classifier: License :: OSI Approved :: GNU General Public License v2
-(GPLv2) Description-Content-Type: text/markdown Provides-Extra: json Provides-
-Extra: PIL Provides-Extra: redis Provides-Extra: aioredis Provides-Extra:
-aiohttp Provides-Extra: fastapi Provides-Extra: uvicorn Provides-Extra: psutil
-Provides-Extra: coloredlogs Provides-Extra: watchdog License-File: LICENSE [!
-[PyPi Package Version](https://img.shields.io/pypi/v/pyTelegramBotAPI.svg)]
+[![PyPi Package Version](https://img.shields.io/pypi/v/pyTelegramBotAPI.svg)]
 (https://pypi.python.org/pypi/pyTelegramBotAPI) [![Supported Python versions]
 (https://img.shields.io/pypi/pyversions/pyTelegramBotAPI.svg)](https://
 pypi.python.org/pypi/pyTelegramBotAPI) [![Documentation Status](https://
 readthedocs.org/projects/pytba/badge/?version=latest)](https://
 pytba.readthedocs.io/en/latest/?badge=latest) [![Build Status](https://travis-
 ci.org/eternnoir/pyTelegramBotAPI.svg?branch=master)](https://travis-ci.org/
 eternnoir/pyTelegramBotAPI) [![PyPi downloads](https://img.shields.io/pypi/dm/
 pyTelegramBotAPI.svg)](https://pypi.org/project/pyTelegramBotAPI/) [![PyPi
 status](https://img.shields.io/pypi/status/pytelegrambotapi.svg?style=flat-
 square)](https://pypi.python.org/pypi/pytelegrambotapi) #
                                pyTelegramBotAPI
    A simple, but extensible Python implementation for the _T_e_l_e_g_r_a_m_ _B_o_t_ _A_P_I.
                       Both synchronous and asynchronous.
 ##
-                        Supported Bot API version: _6_._3!
+                        Supported Bot API version: _6_._4!
 ********** _OO_ff_ff_ii_cc_ii_aa_ll_ _dd_oo_cc_uu_mm_ee_nn_tt_aa_tt_ii_oo_nn **********
 ## Contents * [Getting started](#getting-started) * [Writing your first bot]
 (#writing-your-first-bot) * [Prerequisites](#prerequisites) * [A simple echo
 bot](#a-simple-echo-bot) * [General API Documentation](#general-api-
 documentation) * [Types](#types) * [Methods](#methods) * [General use of the
 API](#general-use-of-the-api) * [Message handlers](#message-handlers) * [Edited
 Message handler](#edited-message-handler) * [Channel Post handler](#channel-
@@ -550,19 +540,21 @@
 addresses the use of a system through chatbots to carry out a social and
 intergenerational game as an alternative to traditional game development. *
 [Diccionario de la RAE](https://t.me/dleraebot) ([source](https://github.com/
 studentenherz/dleraebot)) This bot lets you find difinitions of words in
 Spanish using [RAE's dictionary](https://dle.rae.es/). It features direct
 message and inline search. * [remoteTelegramShell](https://github.com/
 EnriqueMoran/remoteTelegramShell) by [EnriqueMoran](https://github.com/
-EnriqueMoran). Control your LinuxOS computer through Telegram. * [Pyfram-
-telegram-bot](https://github.com/skelly37/pyfram-telegram-bot) Query
-wolframalpha.com and make use of its API through Telegram. *
-[TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo) This
-Bot can understand spoken text in videos and translate it to English *
+EnriqueMoran). Control your LinuxOS computer through Telegram. * [Commerce
+Telegram Bot](https://github.com/ayitinya/commerce-telegram-bot/). Make
+purchases of items in a store with an Admin panel for data control and
+notifications. * [Pyfram-telegram-bot](https://github.com/skelly37/pyfram-
+telegram-bot) Query wolframalpha.com and make use of its API through Telegram.
+* [TranslateThisVideoBot](https://gitlab.com/WuerfelDev/translatethisvideo)
+This Bot can understand spoken text in videos and translate it to English *
 [Zyprexa](https://t.me/mathemathicsBot) ([source](https://github.com/atif5/
 zyprexa)) Zyprexa can solve, help you solve any mathematical problem you
 encounter and convert your regular mathematical expressions into beautiful
 imagery using LaTeX. * [Bincode-telegram-bot](https://github.com/tusharhero/
 bincode-telegram-bot) by [tusharhero](https://github.com/tusharhero) - Makes
 [bincodes](https://github.com/tusharhero/bincode) from text provides and also
 converts them back to text. * [hydrolib_bot](https://github.com/Mayson90/
```

### Comparing `pyTelegramBotAPI-4.8.0/pyTelegramBotAPI.egg-info/SOURCES.txt` & `pyTelegramBotAPI-4.9.0/pyTelegramBotAPI.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/setup.py` & `pyTelegramBotAPI-4.9.0/setup.py`

 * *Ordering differences only*

 * *Files 19% similar despite different names*

```diff
@@ -1,45 +1,45 @@
-#!/usr/bin/env python
-from setuptools import setup, find_packages
-from io import open
-import re
-
-def read(filename):
-    with open(filename, encoding='utf-8') as file:
-        return file.read()
-
-with open('telebot/version.py', 'r', encoding='utf-8') as f:  # Credits: LonamiWebs
-    version = re.search(r"^__version__\s*=\s*'(.*)'.*$",
-                        f.read(), flags=re.MULTILINE).group(1)
-
-setup(name='pyTelegramBotAPI',
-      version=version,
-      description='Python Telegram bot api. ',
-      long_description=read('README.md'),
-      long_description_content_type="text/markdown",
-      author='eternnoir',
-      author_email='eternnoir@gmail.com',
-      url='https://github.com/eternnoir/pyTelegramBotAPI',
-      packages = find_packages(exclude = ['tests', 'examples']),
-      license='GPL2',
-      keywords='telegram bot api tools',
-      install_requires=['requests'],
-      extras_require={
-          'json': 'ujson',
-          'PIL': 'Pillow',
-          'redis': 'redis>=3.4.1',
-          'aioredis': 'aioredis',
-          'aiohttp': 'aiohttp',
-          'fastapi': 'fastapi',
-          'uvicorn': 'uvicorn',
-          'psutil': 'psutil',
-          'coloredlogs': 'coloredlogs',
-          'watchdog': 'watchdog'
-      },
-      classifiers=[
-          'Development Status :: 5 - Production/Stable',
-          'Programming Language :: Python :: 3',
-          'Environment :: Console',
-          'License :: OSI Approved :: GNU General Public License v2 (GPLv2)',
-      ],
-      
-      )
+#!/usr/bin/env python
+from setuptools import setup, find_packages
+from io import open
+import re
+
+def read(filename):
+    with open(filename, encoding='utf-8') as file:
+        return file.read()
+
+with open('telebot/version.py', 'r', encoding='utf-8') as f:  # Credits: LonamiWebs
+    version = re.search(r"^__version__\s*=\s*'(.*)'.*$",
+                        f.read(), flags=re.MULTILINE).group(1)
+
+setup(name='pyTelegramBotAPI',
+      version=version,
+      description='Python Telegram bot api. ',
+      long_description=read('README.md'),
+      long_description_content_type="text/markdown",
+      author='eternnoir',
+      author_email='eternnoir@gmail.com',
+      url='https://github.com/eternnoir/pyTelegramBotAPI',
+      packages = find_packages(exclude = ['tests', 'examples']),
+      license='GPL2',
+      keywords='telegram bot api tools',
+      install_requires=['requests'],
+      extras_require={
+          'json': 'ujson',
+          'PIL': 'Pillow',
+          'redis': 'redis>=3.4.1',
+          'aioredis': 'aioredis',
+          'aiohttp': 'aiohttp',
+          'fastapi': 'fastapi',
+          'uvicorn': 'uvicorn',
+          'psutil': 'psutil',
+          'coloredlogs': 'coloredlogs',
+          'watchdog': 'watchdog'
+      },
+      classifiers=[
+          'Development Status :: 5 - Production/Stable',
+          'Programming Language :: Python :: 3',
+          'Environment :: Console',
+          'License :: OSI Approved :: GNU General Public License v2 (GPLv2)',
+      ],
+      
+      )
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/__init__.py` & `pyTelegramBotAPI-4.9.0/telebot/types.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,6407 +1,7016 @@
-# -*- coding: utf-8 -*-
-from datetime import datetime
-
-import logging
-import re
-import sys
-import threading
-import time
-import traceback
-from typing import Any, Callable, List, Optional, Union
-
-# these imports are used to avoid circular import error
-import telebot.util
-import telebot.types
-import telebot.formatting
-
-# storage
-from telebot.storage import StatePickleStorage, StateMemoryStorage, StateStorageBase
-
-# random module to generate random string
-import random
-import string
-
-import ssl
-
-logger = logging.getLogger('TeleBot')
-
-formatter = logging.Formatter(
-    '%(asctime)s (%(filename)s:%(lineno)d %(threadName)s) %(levelname)s - %(name)s: "%(message)s"'
-)
-
-import inspect
-
-console_output_handler = logging.StreamHandler(sys.stderr)
-console_output_handler.setFormatter(formatter)
-logger.addHandler(console_output_handler)
-
-logger.setLevel(logging.ERROR)
-
-from telebot import apihelper, util, types
-from telebot.handler_backends import (
-    HandlerBackend, MemoryHandlerBackend, FileHandlerBackend, BaseMiddleware,
-    CancelUpdate, SkipHandler, State, ContinueHandling
-)
-from telebot.custom_filters import SimpleCustomFilter, AdvancedCustomFilter
-
-
-REPLY_MARKUP_TYPES = Union[
-    types.InlineKeyboardMarkup, types.ReplyKeyboardMarkup, 
-    types.ReplyKeyboardRemove, types.ForceReply]
-
-
-
-"""
-Module : telebot
-"""
-
-
-class Handler:
-    """
-    Class for (next step|reply) handlers.
-    """
-
-    def __init__(self, callback, *args, **kwargs):
-        self.callback = callback
-        self.args = args
-        self.kwargs = kwargs
-
-    def __getitem__(self, item):
-        return getattr(self, item)
-
-
-class ExceptionHandler:
-    """
-    Class for handling exceptions while Polling
-    """
-
-    # noinspection PyMethodMayBeStatic,PyUnusedLocal
-    def handle(self, exception):
-        return False
-
-
-class TeleBot:
-    """
-    This is the main synchronous class for Bot.
-
-    It allows you to add handlers for different kind of updates.
-
-    Usage:
-
-    .. code-block:: python3
-        :caption: Creating instance of TeleBot
-
-        from telebot import TeleBot
-        bot = TeleBot('token') # get token from @BotFather
-        # now you can register other handlers/update listeners, 
-        # and use bot methods.
-
-    See more examples in examples/ directory:
-    https://github.com/eternnoir/pyTelegramBotAPI/tree/master/examples
-
-    .. note::
-
-        Install coloredlogs module to specify colorful_logs=True
-
-
-    :param token: Token of a bot, should be obtained from @BotFather
-    :type token: :obj:`str`
-
-    :param parse_mode: Default parse mode, defaults to None
-    :type parse_mode: :obj:`str`, optional
-
-    :param threaded: Threaded or not, defaults to True
-    :type threaded: :obj:`bool`, optional
-
-    :param skip_pending: Skips pending updates, defaults to False
-    :type skip_pending: :obj:`bool`, optional
-
-    :param num_threads: Number of maximum parallel threads, defaults to 2
-    :type num_threads: :obj:`int`, optional
-
-    :param next_step_backend: Next step backend class, defaults to None
-    :type next_step_backend: :class:`telebot.handler_backends.HandlerBackend`, optional
-
-    :param reply_backend: Reply step handler class, defaults to None
-    :type reply_backend: :class:`telebot.handler_backends.HandlerBackend`, optional
-
-    :param exception_handler: Exception handler to handle errors, defaults to None
-    :type exception_handler: :class:`telebot.ExceptionHandler`, optional
-
-    :param last_update_id: Last update's id, defaults to 0
-    :type last_update_id: :obj:`int`, optional
-
-    :param suppress_middleware_excepions: Supress middleware exceptions, defaults to False
-    :type suppress_middleware_excepions: :obj:`bool`, optional
-
-    :param state_storage: Storage for states, defaults to StateMemoryStorage()
-    :type state_storage: :class:`telebot.storage.StateStorageBase`, optional
-
-    :param use_class_middlewares: Use class middlewares, defaults to False
-    :type use_class_middlewares: :obj:`bool`, optional
-    
-    :param disable_web_page_preview: Default value for disable_web_page_preview, defaults to None
-    :type disable_web_page_preview: :obj:`bool`, optional
-
-    :param disable_notification: Default value for disable_notification, defaults to None
-    :type disable_notification: :obj:`bool`, optional
-
-    :param protect_content: Default value for protect_content, defaults to None
-    :type protect_content: :obj:`bool`, optional
-
-    :param allow_sending_without_reply: Default value for allow_sending_without_reply, defaults to None
-    :type allow_sending_without_reply: :obj:`bool`, optional
-    
-
-    :param colorful_logs: Outputs colorful logs
-    :type colorful_logs: :obj:`bool`, optional
-    """
-
-    def __init__(
-            self, token: str, parse_mode: Optional[str]=None, threaded: Optional[bool]=True,
-            skip_pending: Optional[bool]=False, num_threads: Optional[int]=2,
-            next_step_backend: Optional[HandlerBackend]=None, reply_backend: Optional[HandlerBackend]=None,
-            exception_handler: Optional[ExceptionHandler]=None, last_update_id: Optional[int]=0,
-            suppress_middleware_excepions: Optional[bool]=False, state_storage: Optional[StateStorageBase]=StateMemoryStorage(),
-            use_class_middlewares: Optional[bool]=False, 
-            disable_web_page_preview: Optional[bool]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            colorful_logs: Optional[bool]=False
-    ):
-
-        # update-related
-        self.token = token
-        self.skip_pending = skip_pending # backward compatibility
-        self.last_update_id = last_update_id
-        
-        # propertys
-        self.suppress_middleware_excepions = suppress_middleware_excepions
-        self.parse_mode = parse_mode
-        self.disable_web_page_preview = disable_web_page_preview
-        self.disable_notification = disable_notification
-        self.protect_content = protect_content
-        self.allow_sending_without_reply = allow_sending_without_reply
-
-        # logs-related
-        if colorful_logs:
-            try:
-                import coloredlogs
-                coloredlogs.install(logger=logger, level=logger.level)
-            except ImportError:
-                raise ImportError(
-                    'Install colorredlogs module to use colorful_logs option.'
-                )
-
-        # threading-related
-        self.__stop_polling = threading.Event()
-        self.exc_info = None
-
-        # states & register_next_step_handler
-        self.current_states = state_storage
-        self.next_step_backend = next_step_backend
-        if not self.next_step_backend:
-            self.next_step_backend = MemoryHandlerBackend()
-
-        self.reply_backend = reply_backend
-        if not self.reply_backend:
-            self.reply_backend = MemoryHandlerBackend()
-
-        # handlers
-        self.exception_handler = exception_handler
-        self.update_listener = []
-        self.message_handlers = []
-        self.edited_message_handlers = []
-        self.channel_post_handlers = []
-        self.edited_channel_post_handlers = []
-        self.inline_handlers = []
-        self.chosen_inline_handlers = []
-        self.callback_query_handlers = []
-        self.shipping_query_handlers = []
-        self.pre_checkout_query_handlers = []
-        self.poll_handlers = []
-        self.poll_answer_handlers = []
-        self.my_chat_member_handlers = []
-        self.chat_member_handlers = []
-        self.chat_join_request_handlers = []
-        self.custom_filters = {}
-        self.state_handlers = []
-
-        # middlewares
-        self.use_class_middlewares = use_class_middlewares
-        if apihelper.ENABLE_MIDDLEWARE and not use_class_middlewares:
-            self.typed_middleware_handlers = {
-                'message': [],
-                'edited_message': [],
-                'channel_post': [],
-                'edited_channel_post': [],
-                'inline_query': [],
-                'chosen_inline_result': [],
-                'callback_query': [],
-                'shipping_query': [],
-                'pre_checkout_query': [],
-                'poll': [],
-                'poll_answer': [],
-                'my_chat_member': [],
-                'chat_member': [],
-                'chat_join_request': []
-            }
-            self.default_middleware_handlers = []
-        if apihelper.ENABLE_MIDDLEWARE and use_class_middlewares:
-            self.typed_middleware_handlers = None
-            logger.error(
-                'You are using class based middlewares while having ENABLE_MIDDLEWARE set to True. This is not recommended.'
-            )
-        self.middlewares = [] if use_class_middlewares else None
-
-        # threads
-        self.threaded = threaded
-        if self.threaded:
-            self.worker_pool = util.ThreadPool(self, num_threads=num_threads)
-    
-    @property
-    def user(self) -> types.User:
-        """
-        The User object representing this bot.
-        Equivalent to bot.get_me() but the result is cached so only one API call is needed.
-
-        :return: Bot's info.
-        :rtype: :class:`telebot.types.User`
-        """
-        if not hasattr(self, "_user"):
-            self._user = self.get_me()
-        return self._user
-
-    def enable_save_next_step_handlers(self, delay: Optional[int]=120, filename: Optional[str]="./.handler-saves/step.save"):
-        """
-        Enable saving next step handlers (by default saving disabled)
-
-        This function explicitly assigns FileHandlerBackend (instead of Saver) just to keep backward
-        compatibility whose purpose was to enable file saving capability for handlers. And the same
-        implementation is now available with FileHandlerBackend
-
-        :param delay: Delay between changes in handlers and saving, defaults to 120
-        :type delay: :obj:`int`, optional
-
-        :param filename: Filename of save file, defaults to "./.handler-saves/step.save"
-        :type filename: :obj:`str`, optional
-
-        :return: None
-        """
-        self.next_step_backend = FileHandlerBackend(self.next_step_backend.handlers, filename, delay)
-
-
-    def enable_saving_states(self, filename: Optional[str]="./.state-save/states.pkl"):
-        """
-        Enable saving states (by default saving disabled)
-
-        .. note::
-            It is recommended to pass a :class:`~telebot.storage.StatePickleStorage` instance as state_storage
-            to TeleBot class.
-
-        :param filename: Filename of saving file, defaults to "./.state-save/states.pkl"
-        :type filename: :obj:`str`, optional
-        """
-        self.current_states = StatePickleStorage(file_path=filename)
-        self.current_states.create_dir()
-
-
-    def enable_save_reply_handlers(self, delay=120, filename="./.handler-saves/reply.save"):
-        """
-        Enable saving reply handlers (by default saving disable)
-
-        This function explicitly assigns FileHandlerBackend (instead of Saver) just to keep backward
-        compatibility whose purpose was to enable file saving capability for handlers. And the same
-        implementation is now available with FileHandlerBackend
-
-        :param delay: Delay between changes in handlers and saving, defaults to 120
-        :type delay: :obj:`int`, optional
-
-        :param filename: Filename of save file, defaults to "./.handler-saves/reply.save"
-        :type filename: :obj:`str`, optional
-        """
-        self.reply_backend = FileHandlerBackend(self.reply_backend.handlers, filename, delay)
-
-
-    def disable_save_next_step_handlers(self):
-        """
-        Disable saving next step handlers (by default saving disable)
-
-        This function is left to keep backward compatibility whose purpose was to disable file saving capability
-        for handlers. For the same purpose, MemoryHandlerBackend is reassigned as a new next_step_backend backend
-        instead of FileHandlerBackend.
-        """
-        self.next_step_backend = MemoryHandlerBackend(self.next_step_backend.handlers)
-
-
-    def disable_save_reply_handlers(self):
-        """
-        Disable saving next step handlers (by default saving disable)
-
-        This function is left to keep backward compatibility whose purpose was to disable file saving capability
-        for handlers. For the same purpose, MemoryHandlerBackend is reassigned as a new reply_backend backend
-        instead of FileHandlerBackend.
-        """
-        self.reply_backend = MemoryHandlerBackend(self.reply_backend.handlers)
-
-
-    def load_next_step_handlers(self, filename="./.handler-saves/step.save", del_file_after_loading=True):
-        """
-        Load next step handlers from save file
-
-        This function is left to keep backward compatibility whose purpose was to load handlers from file with the
-        help of FileHandlerBackend and is only recommended to use if next_step_backend was assigned as
-        FileHandlerBackend before entering this function
-
-
-        :param filename: Filename of the file where handlers was saved, defaults to "./.handler-saves/step.save"
-        :type filename: :obj:`str`, optional
-
-        :param del_file_after_loading: If True is passed, after the loading file will be deleted, defaults to True
-        :type del_file_after_loading: :obj:`bool`, optional
-        """
-        self.next_step_backend.load_handlers(filename, del_file_after_loading)
-
-
-    def load_reply_handlers(self, filename="./.handler-saves/reply.save", del_file_after_loading=True):
-        """
-        Load reply handlers from save file
-
-        This function is left to keep backward compatibility whose purpose was to load handlers from file with the
-        help of FileHandlerBackend and is only recommended to use if reply_backend was assigned as
-        FileHandlerBackend before entering this function
-
-        :param filename: Filename of the file where handlers was saved, defaults to "./.handler-saves/reply.save"
-        :type filename: :obj:`str`, optional
-
-        :param del_file_after_loading: If True is passed, after the loading file will be deleted, defaults to True, defaults to True
-        :type del_file_after_loading: :obj:`bool`, optional
-        """
-        self.reply_backend.load_handlers(filename, del_file_after_loading)
-
-
-    def set_webhook(self, url: Optional[str]=None, certificate: Optional[Union[str, Any]]=None, max_connections: Optional[int]=None,
-                    allowed_updates: Optional[List[str]]=None, ip_address: Optional[str]=None,
-                    drop_pending_updates: Optional[bool] = None, timeout: Optional[int]=None, secret_token: Optional[str]=None) -> bool:
-        """
-        Use this method to specify a URL and receive incoming updates via an outgoing webhook.
-        Whenever there is an update for the bot, we will send an HTTPS POST request to the specified URL,
-        containing a JSON-serialized Update. In case of an unsuccessful request, we will give up after
-        a reasonable amount of attempts. Returns True on success.
-
-        If you'd like to make sure that the webhook was set by you, you can specify secret data in the parameter secret_token.
-        If specified, the request will contain a header “X-Telegram-Bot-Api-Secret-Token” with the secret token as content.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#setwebhook
-
-        :param url: HTTPS URL to send updates to. Use an empty string to remove webhook integration, defaults to None
-        :type url: :obj:`str`, optional
-
-        :param certificate: Upload your public key certificate so that the root certificate in use can be checked, defaults to None
-        :type certificate: :class:`str`, optional
-
-        :param max_connections: The maximum allowed number of simultaneous HTTPS connections to the webhook for update delivery, 1-100.
-            Defaults to 40. Use lower values to limit the load on your bot's server, and higher values to increase your bot's throughput,
-            defaults to None
-        :type max_connections: :obj:`int`, optional
-        
-        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example,
-            specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See Update
-            for a complete list of available update types. Specify an empty list to receive all update types except chat_member (default).
-            If not specified, the previous setting will be used.
-            
-            Please note that this parameter doesn't affect updates created before the call to the setWebhook, so unwanted updates may be received
-            for a short period of time. Defaults to None
-        
-        :type allowed_updates: :obj:`list`, optional
-
-        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address
-            resolved through DNS, defaults to None
-        :type ip_address: :obj:`str`, optional
-
-        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
-        :type drop_pending_updates: :obj:`bool`, optional
-
-        :param timeout: Timeout of a request, defaults to None
-        :type timeout: :obj:`int`, optional
-
-        :param secret_token: A secret token to be sent in a header “X-Telegram-Bot-Api-Secret-Token” in every webhook request, 1-256 characters.
-            Only characters A-Z, a-z, 0-9, _ and - are allowed. The header is useful to ensure that the request comes from a webhook set by you. Defaults to None
-        :type secret_token: :obj:`str`, optional
-
-        :return: True on success.
-        :rtype: :obj:`bool` if the request was successful.
-        """
-
-        return apihelper.set_webhook(self.token, url, certificate, max_connections, allowed_updates, ip_address,
-                                     drop_pending_updates, timeout, secret_token)
-
-
-    def run_webhooks(self,
-                    listen: Optional[str]="127.0.0.1",
-                    port: Optional[int]=443,
-                    url_path: Optional[str]=None,
-                    certificate: Optional[str]=None,
-                    certificate_key: Optional[str]=None,
-                    webhook_url: Optional[str]=None,
-                    max_connections: Optional[int]=None,
-                    allowed_updates: Optional[List]=None,
-                    ip_address: Optional[str]=None,
-                    drop_pending_updates: Optional[bool] = None,
-                    timeout: Optional[int]=None,
-                    secret_token: Optional[str]=None,
-                    secret_token_length: Optional[int]=20,):
-        """
-        This class sets webhooks and listens to a given url and port.
-
-        Requires fastapi, uvicorn, and latest version of starlette.
-
-        :param listen: IP address to listen to, defaults to "127.0.0.1"
-        :type listen: :obj:`str`, optional
-
-        :param port: A port which will be used to listen to webhooks., defaults to 443
-        :type port: :obj:`int`, optional
-
-        :param url_path: Path to the webhook. Defaults to /token, defaults to None
-        :type url_path: :obj:`str`, optional
-
-        :param certificate: Path to the certificate file, defaults to None
-        :type certificate: :obj:`str`, optional
-
-        :param certificate_key: Path to the certificate key file, defaults to None
-        :type certificate_key: :obj:`str`, optional
-
-        :param webhook_url: Webhook URL to be set, defaults to None
-        :type webhook_url: :obj:`str`, optional
-
-        :param max_connections: Maximum allowed number of simultaneous HTTPS connections
-                to the webhook for update delivery, 1-100. Defaults to 40. Use lower values to limit the load on your bot's server,
-                and higher values to increase your bot's throughput., defaults to None
-        :type max_connections: :obj:`int`, optional
-
-        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example, specify [“message”, “edited_channel_post”, “callback_query”]
-            to only receive updates of these types. See Update for a complete list of available update types. Specify an empty list to receive all updates regardless of type (default). 
-            If not specified, the previous setting will be used. defaults to None
-        :type allowed_updates: :obj:`list`, optional
-
-        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address resolved through DNS, defaults to None
-        :type ip_address: :obj:`str`, optional
-
-        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
-        :type drop_pending_updates: :obj:`bool`, optional
-
-        :param timeout: Request connection timeout, defaults to None
-        :type timeout: :obj:`int`, optional
-
-        :param secret_token: Secret token to be used to verify the webhook request, defaults to None
-        :type secret_token: :obj:`str`, optional
-
-        :param secret_token_length: Length of a secret token, defaults to 20
-        :type secret_token_length: :obj:`int`, optional
-
-        :raises ImportError: If necessary libraries were not installed.
-        """
-
-        # generate secret token if not set
-        if not secret_token:
-            secret_token = ''.join(random.choices(string.ascii_uppercase + string.digits, k=secret_token_length))
-
-        if not url_path:
-            url_path = self.token + '/'
-        if url_path[-1] != '/': url_path += '/'
-        
-        protocol = "https" if certificate else "http"
-        if not webhook_url:
-            webhook_url = "{}://{}:{}/{}".format(protocol, listen, port, url_path)
-
-        if certificate and certificate_key:
-            # noinspection PyTypeChecker
-            ssl_ctx = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)
-            ssl_ctx.load_cert_chain(certificate, certificate_key)
-
-        # open certificate if it exists
-        cert_file = open(certificate, 'rb') if certificate else None
-        self.set_webhook(
-            url=webhook_url,
-            certificate=cert_file,
-            max_connections=max_connections,
-            allowed_updates=allowed_updates,
-            ip_address=ip_address,
-            drop_pending_updates=drop_pending_updates,
-            timeout=timeout,
-            secret_token=secret_token
-        )
-        if cert_file: cert_file.close()
-
-        ssl_context = (certificate, certificate_key) if certificate else (None, None)
-        # webhooks module
-        try:
-            from telebot.ext.sync import SyncWebhookListener
-        except (NameError, ImportError):
-            raise ImportError("Please install uvicorn and fastapi in order to use `run_webhooks` method.")
-        self.webhook_listener = SyncWebhookListener(self, secret_token, listen, port, ssl_context, '/'+url_path)
-        self.webhook_listener.run_app()
-
-
-    def delete_webhook(self, drop_pending_updates: Optional[bool]=None, timeout: Optional[int]=None) -> bool:
-        """
-        Use this method to remove webhook integration if you decide to switch back to getUpdates.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletewebhook
-
-        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
-        :type drop_pending_updates: :obj: `bool`, optional
-
-        :param timeout: Request connection timeout, defaults to None
-        :type timeout: :obj:`int`, optional
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_webhook(self.token, drop_pending_updates, timeout)
-
-
-    def get_webhook_info(self, timeout: Optional[int]=None) -> types.WebhookInfo:
-        """
-        Use this method to get current webhook status. Requires no parameters.
-        On success, returns a WebhookInfo object. If the bot is using getUpdates, will return an object with the url field empty.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getwebhookinfo
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`, optional
-
-        :return: On success, returns a WebhookInfo object.
-        :rtype: :class:`telebot.types.WebhookInfo`
-        """
-        result = apihelper.get_webhook_info(self.token, timeout)
-        return types.WebhookInfo.de_json(result)
-
-
-    def remove_webhook(self) -> bool:
-        """
-        Deletes webhooks using set_webhook() function.
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return self.set_webhook()  # No params resets webhook
-
-
-    def get_updates(self, offset: Optional[int]=None, limit: Optional[int]=None, 
-            timeout: Optional[int]=20, allowed_updates: Optional[List[str]]=None, 
-            long_polling_timeout: int=20) -> List[types.Update]:
-        """
-        Use this method to receive incoming updates using long polling (wiki). An Array of Update objects is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getupdates
-
-
-        :param offset: Identifier of the first update to be returned. Must be greater by one than the highest among the identifiers of previously received updates.
-            By default, updates starting with the earliest unconfirmed update are returned. An update is considered confirmed as soon as getUpdates is called with an offset
-            higher than its update_id. The negative offset can be specified to retrieve updates starting from -offset update from the end of the updates queue.
-            All previous updates will forgotten.
-        :type offset: :obj:`int`, optional
-
-        :param limit: Limits the number of updates to be retrieved. Values between 1-100 are accepted. Defaults to 100.
-        :type limit: :obj:`int`, optional
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`, optional
-
-        :param allowed_updates: Array of string. List the types of updates you want your bot to receive.
-        :type allowed_updates: :obj:`list`, optional
-
-        :param long_polling_timeout: Timeout in seconds for long polling.
-        :type long_polling_timeout: :obj:`int`, optional
-
-        :return: An Array of Update objects is returned.
-        :rtype: :obj:`list` of :class:`telebot.types.Update`
-        """
-        json_updates = apihelper.get_updates(self.token, offset, limit, timeout, allowed_updates, long_polling_timeout)
-        return [types.Update.de_json(ju) for ju in json_updates]
-
-    def __skip_updates(self):
-        """
-        Get and discard all pending updates before first poll of the bot.
-
-        :meta private:
-
-        :return:
-        """
-        self.get_updates(offset=-1)
-
-    def __retrieve_updates(self, timeout=20, long_polling_timeout=20, allowed_updates=None):
-        """
-        Retrieves any updates from the Telegram API.
-        Registered listeners and applicable message handlers will be notified when a new message arrives.
-
-        :meta private:
-        
-        :raises ApiException when a call has failed.
-        """
-        if self.skip_pending:
-            self.__skip_updates()
-            logger.debug('Skipped all pending messages')
-            self.skip_pending = False
-        updates = self.get_updates(offset=(self.last_update_id + 1), 
-                                   allowed_updates=allowed_updates,
-                                   timeout=timeout, long_polling_timeout=long_polling_timeout)
-        self.process_new_updates(updates)
-
-    def process_new_updates(self, updates: List[types.Update]):
-        """
-        Processes new updates. Just pass list of subclasses of Update to this method.
-
-        :param updates: List of :class:`telebot.types.Update` objects.
-        :type updates: :obj:`list` of :class:`telebot.types.Update`
-
-        :return None:
-        """
-        upd_count = len(updates)
-        logger.debug('Received {0} new updates'.format(upd_count))
-        if upd_count == 0: return
-
-        new_messages = None
-        new_edited_messages = None
-        new_channel_posts = None
-        new_edited_channel_posts = None
-        new_inline_queries = None
-        new_chosen_inline_results = None
-        new_callback_queries = None
-        new_shipping_queries = None
-        new_pre_checkout_queries = None
-        new_polls = None
-        new_poll_answers = None
-        new_my_chat_members = None
-        new_chat_members = None
-        new_chat_join_request = None
-        
-        for update in updates:
-            if apihelper.ENABLE_MIDDLEWARE and not self.use_class_middlewares:
-                try:
-                    self.process_middlewares(update)
-                except Exception as e:
-                    logger.error(str(e))
-                    if not self.suppress_middleware_excepions:
-                        raise
-                    else:
-                        if update.update_id > self.last_update_id: self.last_update_id = update.update_id
-                        continue
-
-            if update.update_id > self.last_update_id:
-                self.last_update_id = update.update_id
-            if update.message:
-                if new_messages is None: new_messages = []
-                new_messages.append(update.message)
-            if update.edited_message:
-                if new_edited_messages is None: new_edited_messages = []
-                new_edited_messages.append(update.edited_message)
-            if update.channel_post:
-                if new_channel_posts is None: new_channel_posts = []
-                new_channel_posts.append(update.channel_post)
-            if update.edited_channel_post:
-                if new_edited_channel_posts is None: new_edited_channel_posts = []
-                new_edited_channel_posts.append(update.edited_channel_post)
-            if update.inline_query:
-                if new_inline_queries is None: new_inline_queries = []
-                new_inline_queries.append(update.inline_query)
-            if update.chosen_inline_result:
-                if new_chosen_inline_results is None: new_chosen_inline_results = []
-                new_chosen_inline_results.append(update.chosen_inline_result)
-            if update.callback_query:
-                if new_callback_queries is None: new_callback_queries = []
-                new_callback_queries.append(update.callback_query)
-            if update.shipping_query:
-                if new_shipping_queries is None: new_shipping_queries = []
-                new_shipping_queries.append(update.shipping_query)
-            if update.pre_checkout_query:
-                if new_pre_checkout_queries is None: new_pre_checkout_queries = []
-                new_pre_checkout_queries.append(update.pre_checkout_query)
-            if update.poll:
-                if new_polls is None: new_polls = []
-                new_polls.append(update.poll)
-            if update.poll_answer:
-                if new_poll_answers is None: new_poll_answers = []
-                new_poll_answers.append(update.poll_answer)
-            if update.my_chat_member:
-                if new_my_chat_members is None: new_my_chat_members = []
-                new_my_chat_members.append(update.my_chat_member)
-            if update.chat_member:
-                if new_chat_members is None: new_chat_members = []
-                new_chat_members.append(update.chat_member)
-            if update.chat_join_request:
-                if new_chat_join_request is None: new_chat_join_request = []
-                new_chat_join_request.append(update.chat_join_request)
-
-        if new_messages:
-            self.process_new_messages(new_messages)
-        if new_edited_messages:
-            self.process_new_edited_messages(new_edited_messages)
-        if new_channel_posts:
-            self.process_new_channel_posts(new_channel_posts)
-        if new_edited_channel_posts:
-            self.process_new_edited_channel_posts(new_edited_channel_posts)
-        if new_inline_queries:
-            self.process_new_inline_query(new_inline_queries)
-        if new_chosen_inline_results:
-            self.process_new_chosen_inline_query(new_chosen_inline_results)
-        if new_callback_queries:
-            self.process_new_callback_query(new_callback_queries)
-        if new_shipping_queries:
-            self.process_new_shipping_query(new_shipping_queries)
-        if new_pre_checkout_queries:
-            self.process_new_pre_checkout_query(new_pre_checkout_queries)
-        if new_polls:
-            self.process_new_poll(new_polls)
-        if new_poll_answers:
-            self.process_new_poll_answer(new_poll_answers)
-        if new_my_chat_members:
-            self.process_new_my_chat_member(new_my_chat_members)
-        if new_chat_members:
-            self.process_new_chat_member(new_chat_members)
-        if new_chat_join_request:
-            self.process_new_chat_join_request(new_chat_join_request)
-
-    def process_new_messages(self, new_messages):
-        """
-        :meta private:
-        """
-        self._notify_next_handlers(new_messages)
-        self._notify_reply_handlers(new_messages)
-        self.__notify_update(new_messages)
-        self._notify_command_handlers(self.message_handlers, new_messages, 'message')
-
-    def process_new_edited_messages(self, edited_message):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.edited_message_handlers, edited_message, 'edited_message')
-
-    def process_new_channel_posts(self, channel_post):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.channel_post_handlers, channel_post, 'channel_post')
-
-    def process_new_edited_channel_posts(self, edited_channel_post):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.edited_channel_post_handlers, edited_channel_post, 'edited_channel_post')
-
-    def process_new_inline_query(self, new_inline_queries):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.inline_handlers, new_inline_queries, 'inline_query')
-
-    def process_new_chosen_inline_query(self, new_chosen_inline_queries):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.chosen_inline_handlers, new_chosen_inline_queries, 'chosen_inline_query')
-
-    def process_new_callback_query(self, new_callback_queries):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.callback_query_handlers, new_callback_queries, 'callback_query')
-
-    def process_new_shipping_query(self, new_shipping_queries):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.shipping_query_handlers, new_shipping_queries, 'shipping_query')
-
-    def process_new_pre_checkout_query(self, pre_checkout_queries):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.pre_checkout_query_handlers, pre_checkout_queries, 'pre_checkout_query')
-
-    def process_new_poll(self, polls):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.poll_handlers, polls, 'poll')
-
-    def process_new_poll_answer(self, poll_answers):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.poll_answer_handlers, poll_answers, 'poll_answer')
-    
-    def process_new_my_chat_member(self, my_chat_members):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.my_chat_member_handlers, my_chat_members, 'my_chat_member')
-
-    def process_new_chat_member(self, chat_members):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.chat_member_handlers, chat_members, 'chat_member')
-
-    def process_new_chat_join_request(self, chat_join_request):
-        """
-        :meta private:
-        """
-        self._notify_command_handlers(self.chat_join_request_handlers, chat_join_request, 'chat_join_request')
-
-    def process_middlewares(self, update):
-        """
-        :meta private:
-        """
-        if self.typed_middleware_handlers:
-            for update_type, middlewares in self.typed_middleware_handlers.items():
-                if getattr(update, update_type) is not None:
-                    for typed_middleware_handler in middlewares:
-                        try:
-                            typed_middleware_handler(self, getattr(update, update_type))
-                        except Exception as e:
-                            e.args = e.args + (f'Typed middleware handler "{typed_middleware_handler.__qualname__}"',)
-                            raise
-
-        if self.default_middleware_handlers:
-            for default_middleware_handler in self.default_middleware_handlers:
-                try:
-                    default_middleware_handler(self, update)
-                except Exception as e:
-                    e.args = e.args + (f'Default middleware handler "{default_middleware_handler.__qualname__}"',)
-                    raise
-
-
-    def __notify_update(self, new_messages):
-        """
-        :meta private:
-        """
-        if len(self.update_listener) == 0:
-            return
-        for listener in self.update_listener:
-            self._exec_task(listener, new_messages)
-
-    def _setup_change_detector(self, path_to_watch: str):
-        try:
-            from watchdog.observers import Observer
-            from telebot.ext.reloader import EventHandler
-        except ImportError:
-            raise ImportError(
-                'Please install watchdog and psutil before using restart_on_change option.'
-            )
-
-        self.event_handler = EventHandler()
-        path = path_to_watch if path_to_watch else None
-        if path is None:
-            # Make it possible to specify --path argument to the script
-            path = sys.argv[sys.argv.index('--path') + 1] if '--path' in sys.argv else '.'
-
-            
-        self.event_observer = Observer()
-        self.event_observer.schedule(self.event_handler, path, recursive=True)
-        self.event_observer.start()
-
-    def infinity_polling(self, timeout: Optional[int]=20, skip_pending: Optional[bool]=False, long_polling_timeout: Optional[int]=20,
-                         logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
-                         restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None, *args, **kwargs):
-        """
-        Wrap polling with infinite loop and exception handling to avoid bot stops polling.
-
-        .. note::
-        
-            Install watchdog and psutil before using restart_on_change option.
-
-        :param timeout: Request connection timeout.
-        :type timeout: :obj:`int`
-
-        :param long_polling_timeout: Timeout in seconds for long polling (see API docs)
-        :type long_polling_timeout: :obj:`int`
-
-        :param skip_pending: skip old updates
-        :type skip_pending: :obj:`bool`
-
-        :param logger_level: Custom (different from logger itself) logging level for infinity_polling logging.
-            Use logger levels from logging as a value. None/NOTSET = no error logging
-        :type logger_level: :obj:`int`.
-
-        :param allowed_updates: A list of the update types you want your bot to receive.
-            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
-            See util.update_types for a complete list of available update types. 
-            Specify an empty list to receive all update types except chat_member (default). 
-            If not specified, the previous setting will be used.
-            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
-            so unwanted updates may be received for a short period of time.
-        :type allowed_updates: :obj:`list` of :obj:`str`
-
-        :param restart_on_change: Restart a file on file(s) change. Defaults to False
-        :type restart_on_change: :obj:`bool`
-
-        :param path_to_watch: Path to watch for changes. Defaults to current directory
-        :type path_to_watch: :obj:`str`
-
-        :return:
-        """
-        if skip_pending:
-            self.__skip_updates()
-
-        if restart_on_change:
-            self._setup_change_detector(path_to_watch)
-
-        while not self.__stop_polling.is_set():
-            try:
-                self.polling(non_stop=True, timeout=timeout, long_polling_timeout=long_polling_timeout,
-                             logger_level=logger_level, allowed_updates=allowed_updates, restart_on_change=False,
-                             *args, **kwargs)
-            except Exception as e:
-                if logger_level and logger_level >= logging.ERROR:
-                    logger.error("Infinity polling exception: %s", str(e))
-                if logger_level and logger_level >= logging.DEBUG:
-                    logger.error("Exception traceback:\n%s", traceback.format_exc())
-                time.sleep(3)
-                continue
-            if logger_level and logger_level >= logging.INFO:
-                logger.error("Infinity polling: polling exited")
-        if logger_level and logger_level >= logging.INFO:
-            logger.error("Break infinity polling")
-
-
-    def polling(self, non_stop: Optional[bool]=False, skip_pending: Optional[bool]=False, interval: Optional[int]=0,
-                timeout: Optional[int]=20, long_polling_timeout: Optional[int]=20,
-                logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
-                none_stop: Optional[bool]=None, restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None):
-        """
-        This function creates a new Thread that calls an internal __retrieve_updates function.
-        This allows the bot to retrieve Updates automatically and notify listeners and message handlers accordingly.
-
-        Warning: Do not call this function more than once!
-        
-        Always gets updates.
-
-        .. deprecated:: 4.1.1
-            Use :meth:`infinity_polling` instead.
-
-        .. note::
-        
-            Install watchdog and psutil before using restart_on_change option.
-
-        :param interval: Delay between two update retrivals
-        :type interval: :obj:`int`
-
-        :param non_stop: Do not stop polling when an ApiException occurs.
-        :type non_stop: :obj:`bool`
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`
-
-        :param skip_pending: skip old updates
-        :type skip_pending: :obj:`bool`
-        
-        :param long_polling_timeout: Timeout in seconds for long polling (see API docs)
-        :type long_polling_timeout: :obj:`int`
-
-        :param logger_level: Custom (different from logger itself) logging level for infinity_polling logging.
-            Use logger levels from logging as a value. None/NOTSET = no error logging
-        :type logger_level: :obj:`int`
-
-        :param allowed_updates: A list of the update types you want your bot to receive.
-            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
-            See util.update_types for a complete list of available update types. 
-            Specify an empty list to receive all update types except chat_member (default). 
-            If not specified, the previous setting will be used.
-            
-            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
-            so unwanted updates may be received for a short period of time.
-        :type allowed_updates: :obj:`list` of :obj:`str`
-
-        :param none_stop: Deprecated, use non_stop. Old typo, kept for backward compatibility.
-        :type none_stop: :obj:`bool`
-
-        :param restart_on_change: Restart a file on file(s) change. Defaults to False
-        :type restart_on_change: :obj:`bool`
-
-        :param path_to_watch: Path to watch for changes. Defaults to None
-        :type path_to_watch: :obj:`str`
-        
-        :return:
-        """
-        if none_stop is not None:
-            logger.warning("polling: none_stop parameter is deprecated. Use non_stop instead.")
-            non_stop = none_stop
-
-        if skip_pending:
-            self.__skip_updates()
-
-        if restart_on_change:
-            self._setup_change_detector(path_to_watch)
-
-        logger.info('Starting your bot with username: [@%s]', self.user.username)
-            
-        if self.threaded:
-            self.__threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
-                                    logger_level=logger_level, allowed_updates=allowed_updates)
-        else:
-            self.__non_threaded_polling(non_stop=non_stop, interval=interval, timeout=timeout, long_polling_timeout=long_polling_timeout,
-                                        logger_level=logger_level, allowed_updates=allowed_updates)
-
-
-    def __threaded_polling(self, non_stop = False, interval = 0, timeout = None, long_polling_timeout = None,
-                           logger_level=logging.ERROR, allowed_updates=None):
-        if not(logger_level) or (logger_level < logging.INFO):
-            warning = "\n  Warning: this message appearance will be changed. Set logger_level=logging.INFO to continue seeing it."
-        else:
-            warning = ""
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-        logger.info('Started polling.' + warning)
-        self.__stop_polling.clear()
-        error_interval = 0.25
-
-        polling_thread = util.WorkerThread(name="PollingThread")
-        or_event = util.OrEvent(
-            polling_thread.done_event,
-            polling_thread.exception_event,
-            self.worker_pool.exception_event
-        )
-
-        while not self.__stop_polling.wait(interval):
-            or_event.clear()
-            try:
-                polling_thread.put(self.__retrieve_updates, timeout, long_polling_timeout, allowed_updates=allowed_updates)
-                or_event.wait()  # wait for polling thread finish, polling thread error or thread pool error
-                polling_thread.raise_exceptions()
-                self.worker_pool.raise_exceptions()
-                error_interval = 0.25
-            except apihelper.ApiException as e:
-                if self.exception_handler is not None:
-                    handled = self.exception_handler.handle(e)
-                else:
-                    handled = False
-                if not handled:
-                    if logger_level and logger_level >= logging.ERROR:
-                        logger.error("Threaded polling exception: %s", str(e))
-                    if logger_level and logger_level >= logging.DEBUG:
-                        logger.error("Exception traceback:\n%s", traceback.format_exc())
-                    if not non_stop:
-                        self.__stop_polling.set()
-                        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                        logger.info("Exception occurred. Stopping." + warning)
-                    else:
-                        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                        logger.info("Waiting for {0} seconds until retry".format(error_interval) + warning)
-                        time.sleep(error_interval)
-                        if error_interval * 2 < 60:
-                            error_interval *= 2
-                        else:
-                            error_interval = 60
-                else:
-                    # polling_thread.clear_exceptions()
-                    # self.worker_pool.clear_exceptions()
-                    time.sleep(error_interval)
-                polling_thread.clear_exceptions()   #*
-                self.worker_pool.clear_exceptions() #*
-            except KeyboardInterrupt:
-                # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                logger.info("KeyboardInterrupt received." + warning)
-                self.__stop_polling.set()
-                break
-            except Exception as e:
-                if self.exception_handler is not None:
-                    handled = self.exception_handler.handle(e)
-                else:
-                    handled = False
-                if not handled:
-                    polling_thread.stop()
-                    polling_thread.clear_exceptions()   #*
-                    self.worker_pool.clear_exceptions() #*
-                    raise e
-                else:
-                    polling_thread.clear_exceptions()
-                    self.worker_pool.clear_exceptions()
-                    time.sleep(error_interval)
-
-        polling_thread.stop()
-        polling_thread.clear_exceptions()
-        self.worker_pool.clear_exceptions()
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-        logger.info('Stopped polling.' + warning)
-
-
-    def __non_threaded_polling(self, non_stop=False, interval=0, timeout=None, long_polling_timeout=None,
-                               logger_level=logging.ERROR, allowed_updates=None):
-        if not(logger_level) or (logger_level < logging.INFO):
-            warning = "\n  Warning: this message appearance will be changed. Set logger_level=logging.INFO to continue seeing it."
-        else:
-            warning = ""
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-        logger.info('Started polling.' + warning)
-        self.__stop_polling.clear()
-        error_interval = 0.25
-
-        while not self.__stop_polling.wait(interval):
-            try:
-                self.__retrieve_updates(timeout, long_polling_timeout, allowed_updates=allowed_updates)
-                error_interval = 0.25
-            except apihelper.ApiException as e:
-                if self.exception_handler is not None:
-                    handled = self.exception_handler.handle(e)
-                else:
-                    handled = False
-
-                if not handled:
-                    if logger_level and logger_level >= logging.ERROR:
-                        logger.error("Polling exception: %s", str(e))
-                    if logger_level and logger_level >= logging.DEBUG:
-                        logger.error("Exception traceback:\n%s", traceback.format_exc())
-                    if not non_stop:
-                        self.__stop_polling.set()
-                        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                        logger.info("Exception occurred. Stopping." + warning)
-                    else:
-                        # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                        logger.info("Waiting for {0} seconds until retry".format(error_interval) + warning)
-                        time.sleep(error_interval)
-                        error_interval *= 2
-                else:
-                    time.sleep(error_interval)
-            except KeyboardInterrupt:
-                # if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-                logger.info("KeyboardInterrupt received." + warning)
-                self.__stop_polling.set()
-                break
-            except Exception as e:
-                if self.exception_handler is not None:
-                    handled = self.exception_handler.handle(e)
-                else:
-                    handled = False
-                if not handled:
-                    raise e
-                else:
-                    time.sleep(error_interval)
-        #if logger_level and logger_level >= logging.INFO:   # enable in future releases. Change output to logger.error
-        logger.info('Stopped polling.' + warning)
-
-
-    def _exec_task(self, task, *args, **kwargs):
-        if self.threaded:
-            self.worker_pool.put(task, *args, **kwargs)
-        else:
-            try:
-                task(*args, **kwargs)
-            except Exception as e:
-                if self.exception_handler is not None:
-                    handled = self.exception_handler.handle(e)
-                else:
-                    handled = False
-                if not handled:
-                    raise e
-
-
-    def stop_polling(self):
-        """
-        Stops polling.
-
-        Does not accept any arguments.
-        """
-        self.__stop_polling.set()
-
-
-    def stop_bot(self):
-        """
-        Stops bot by stopping polling and closing the worker pool.
-        """
-        self.stop_polling()
-        if self.threaded and self.worker_pool:
-            self.worker_pool.close()
-
-
-    def set_update_listener(self, listener: Callable):
-        """
-        Sets a listener function to be called when a new update is received.
-
-        :param listener: Listener function.
-        :type listener: Callable
-        """
-        self.update_listener.append(listener)
-
-
-    def get_me(self) -> types.User:
-        """
-        A simple method for testing your bot's authentication token. Requires no parameters.
-        Returns basic information about the bot in form of a User object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getme
-        """
-        result = apihelper.get_me(self.token)
-        return types.User.de_json(result)
-
-
-    def get_file(self, file_id: Optional[str]) -> types.File:
-        """
-        Use this method to get basic info about a file and prepare it for downloading.
-        For the moment, bots can download files of up to 20MB in size. 
-        On success, a File object is returned. 
-        It is guaranteed that the link will be valid for at least 1 hour. 
-        When the link expires, a new one can be requested by calling get_file again.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getfile
-
-        :param file_id: File identifier
-        :type file_id: :obj:`str`
-
-        :return: :class:`telebot.types.File`
-        """
-        return types.File.de_json(apihelper.get_file(self.token, file_id))
-
-
-    def get_file_url(self, file_id: Optional[str]) -> str:
-        """
-        Get a valid URL for downloading a file.
-
-        :param file_id: File identifier to get download URL for.
-        :type file_id: :obj:`str`
-
-        :return: URL for downloading the file.
-        :rtype: :obj:`str`
-        """
-        return apihelper.get_file_url(self.token, file_id)
-
-
-    def download_file(self, file_path: str) -> bytes:
-        """
-        Downloads file.
-
-        :param file_path: Path where the file should be downloaded.
-        :type file_path: str
-
-        :return: bytes
-        :rtype: :obj:`bytes`
-        """
-        return apihelper.download_file(self.token, file_path)
-
-
-    def log_out(self) -> bool:
-        """
-        Use this method to log out from the cloud Bot API server before launching the bot locally. 
-        You MUST log out the bot before running it locally, otherwise there is no guarantee
-        that the bot will receive updates.
-        After a successful call, you can immediately log in on a local server, 
-        but will not be able to log in back to the cloud Bot API server for 10 minutes. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#logout
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.log_out(self.token)
-    
-    
-    def close(self) -> bool:
-        """
-        Use this method to close the bot instance before moving it from one local server to another. 
-        You need to delete the webhook before calling this method to ensure that the bot isn't launched again
-        after server restart.
-        The method will return error 429 in the first 10 minutes after the bot is launched. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#close
-
-        :return: :obj:`bool`
-        """
-        return apihelper.close(self.token)
-
-
-    def get_user_profile_photos(self, user_id: int, offset: Optional[int]=None, 
-            limit: Optional[int]=None) -> types.UserProfilePhotos:
-        """
-        Use this method to get a list of profile pictures for a user.
-        Returns a :class:`telebot.types.UserProfilePhotos` object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getuserprofilephotos
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param offset: Sequential number of the first photo to be returned. By default, all photos are returned.
-        :type offset: :obj:`int`
-
-        :param limit: Limits the number of photos to be retrieved. Values between 1-100 are accepted. Defaults to 100.
-        :type limit: :obj:`int`
-
-        :return: `UserProfilePhotos <https://core.telegram.org/bots/api#userprofilephotos>`_
-        :rtype: :class:`telebot.types.UserProfilePhotos`
-
-        """
-        result = apihelper.get_user_profile_photos(self.token, user_id, offset, limit)
-        return types.UserProfilePhotos.de_json(result)
-
-
-    def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
-        """
-        Use this method to get up to date information about the chat (current name of the user for one-on-one
-        conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Chat information
-        :rtype: :class:`telebot.types.Chat`
-        """
-        result = apihelper.get_chat(self.token, chat_id)
-        return types.Chat.de_json(result)
-
-
-    def leave_chat(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#leavechat
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: :obj:`bool`
-        """
-        result = apihelper.leave_chat(self.token, chat_id)
-        return result
-
-
-    def get_chat_administrators(self, chat_id: Union[int, str]) -> List[types.ChatMember]:
-        """
-        Use this method to get a list of administrators in a chat.
-        On success, returns an Array of ChatMember objects that contains
-        information about all chat administrators except other bots.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatadministrators    
-
-        :param chat_id: Unique identifier for the target chat or username
-            of the target supergroup or channel (in the format @channelusername)
-        :return: List made of ChatMember objects.
-        :rtype: :obj:`list` of :class:`telebot.types.ChatMember`
-        """
-        result = apihelper.get_chat_administrators(self.token, chat_id)
-        return [types.ChatMember.de_json(r) for r in result]
-
-
-    @util.deprecated(deprecation_text="Use get_chat_member_count instead")
-    def get_chat_members_count(self, chat_id: Union[int, str]) -> int:
-        """
-        This function is deprecated. Use `get_chat_member_count` instead.
-
-        .. deprecated:: 4.0.0
-            This function is deprecated. Use `get_chat_member_count` instead.
-
-        Use this method to get the number of members in a chat.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Number of members in the chat.
-        :rtype: :obj:`int`
-        """
-        result = apihelper.get_chat_member_count(self.token, chat_id)
-        return result
-    
-    def get_chat_member_count(self, chat_id: Union[int, str]) -> int:
-        """
-        Use this method to get the number of members in a chat.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Number of members in the chat.
-        :rtype: :obj:`int`
-        """
-        result = apihelper.get_chat_member_count(self.token, chat_id)
-        return result
-
-    def set_chat_sticker_set(self, chat_id: Union[int, str], sticker_set_name: str) -> types.StickerSet:
-        """
-        Use this method to set a new group sticker set for a supergroup. The bot must be an administrator in the chat
-        for this to work and must have the appropriate administrator rights. Use the field can_set_sticker_set optionally returned
-        in getChat requests to check if the bot can use this method. Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#setchatstickerset
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sticker_set_name: Name of the sticker set to be set as the group sticker set
-        :type sticker_set_name: :obj:`str`
-
-        :return: StickerSet object
-        :rtype: :class:`telebot.types.StickerSet`
-        """
-        result = apihelper.set_chat_sticker_set(self.token, chat_id, sticker_set_name)
-        return result
-
-    def delete_chat_sticker_set(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to delete a group sticker set from a supergroup. The bot must be an administrator in the chat
-        for this to work and must have the appropriate admin rights. Use the field can_set_sticker_set
-        optionally returned in getChat requests to check if the bot can use this method. Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#deletechatstickerset
-
-        :param chat_id:	Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        result = apihelper.delete_chat_sticker_set(self.token, chat_id)
-        return result
-
-    def get_chat_member(self, chat_id: Union[int, str], user_id: int) -> types.ChatMember:
-        """
-        Use this method to get information about a member of a chat. Returns a ChatMember object on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmember
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :return: Returns ChatMember object on success.
-        :rtype: :class:`telebot.types.ChatMember`
-        """
-        result = apihelper.get_chat_member(self.token, chat_id, user_id)
-        return types.ChatMember.de_json(result)
-
-    def send_message(
-            self, chat_id: Union[int, str], text: str, 
-            parse_mode: Optional[str]=None, 
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None, 
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send text messages.
-
-        Warning: Do not send more than about 4096 characters each message, otherwise you'll risk an HTTP 414 error.
-        If you must send more than 4096 characters, 
-        use the `split_string` or `smart_split` function in util.py.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param text: Text of the message to be sent
-        :type text: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the message text.
-        :type parse_mode: :obj:`str`
-
-        :param entities: List of special entities that appear in message text, which can be specified instead of parse_mode
-        :type entities: Array of :class:`telebot.types.MessageEntity`
-
-        :param disable_web_page_preview: Disables link previews for links in this message
-        :type disable_web_page_preview: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: If True, the message content will be hidden for all users except for the target user
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_message(
-                self.token, chat_id, text, disable_web_page_preview, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout,
-                entities, allow_sending_without_reply, protect_content=protect_content, message_thread_id=message_thread_id))
-
-    def forward_message(
-            self, chat_id: Union[int, str], from_chat_id: Union[int, str], 
-            message_id: int, disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to forward messages of any kind.
-
-        Telegram documentation: https://core.telegram.org/bots/api#forwardmessage
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound
-        :type disable_notification: :obj:`bool`
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
-        :type from_chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Message identifier in the chat specified in from_chat_id
-        :type message_id: :obj:`int`
-
-        :param protect_content: Protects the contents of the forwarded message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-
-        return types.Message.de_json(
-            apihelper.forward_message(self.token, chat_id, from_chat_id, message_id, disable_notification, timeout, protect_content,
-                                      message_thread_id))
-
-
-    def copy_message(
-            self, chat_id: Union[int, str], 
-            from_chat_id: Union[int, str], 
-            message_id: int, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.MessageID:
-        """
-        Use this method to copy messages of any kind.
-
-        Telegram documentation: https://core.telegram.org/bots/api#copymessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
-        :type from_chat_id: :obj:`int` or :obj:`str`
-        :param message_id: Message identifier in the chat specified in from_chat_id
-        :type message_id: :obj:`int`
-
-        :param caption: New caption for media, 0-1024 characters after entities parsing. If not specified, the original caption is kept
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the new caption.
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the new caption, which can be specified instead of parse_mode
-        :type caption_entities: Array of :class:`telebot.types.MessageEntity`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-        
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.MessageID.de_json(
-            apihelper.copy_message(self.token, chat_id, from_chat_id, message_id, caption, parse_mode, caption_entities,
-                                   disable_notification, reply_to_message_id, allow_sending_without_reply, reply_markup,
-                                   timeout, protect_content, message_thread_id))
-
-    def delete_message(self, chat_id: Union[int, str], message_id: int, 
-            timeout: Optional[int]=None) -> bool:
-        """
-        Use this method to delete a message, including service messages, with the following limitations:
-        - A message can only be deleted if it was sent less than 48 hours ago.
-        - A dice message in a private chat can only be deleted if it was sent more than 24 hours ago.
-        - Bots can delete outgoing messages in private chats, groups, and supergroups.
-        - Bots can delete incoming messages in private chats.
-        - Bots granted can_post_messages permissions can delete outgoing messages in channels.
-        - If the bot is an administrator of a group, it can delete any message there.
-        - If the bot has can_delete_messages permission in a supergroup or a channel, it can delete any message there.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletemessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Identifier of the message to delete
-        :type message_id: :obj:`int`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_message(self.token, chat_id, message_id, timeout)
-
-    def send_dice(
-            self, chat_id: Union[int, str],
-            emoji: Optional[str]=None, disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send an animated emoji that will display a random value. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#senddice
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param emoji: Emoji on which the dice throw animation is based. Currently, must be one of “🎲”, “🎯”, “🏀”, “⚽”, “🎳”, or “🎰”.
-            Dice can have values 1-6 for “🎲”, “🎯” and “🎳”, values 1-5 for “🏀” and “⚽”, and values 1-64 for “🎰”. Defaults to “🎲”
-        :type emoji: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_dice(
-                self.token, chat_id, emoji, disable_notification, reply_to_message_id,
-                reply_markup, timeout, allow_sending_without_reply, protect_content, message_thread_id)
-        )
-
-
-    def send_photo(
-            self, chat_id: Union[int, str], photo: Union[Any, str], 
-            caption: Optional[str]=None, parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send photos. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendphoto
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param photo: Photo to send. Pass a file_id as String to send a photo that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get a photo from the Internet, or upload a new photo using multipart/form-data.
-            The photo must be at most 10 MB in size. The photo's width and height must not exceed 10000 in total. Width and height ratio must be at most 20.
-        :type photo: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Photo caption (may also be used when resending photos by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the photo caption.
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-        
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_photo(
-                self.token, chat_id, photo, caption, reply_to_message_id, reply_markup,
-                parse_mode, disable_notification, timeout, caption_entities,
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    # TODO: Rewrite this method like in API.
-    def send_audio(
-            self, chat_id: Union[int, str], audio: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            performer: Optional[str]=None, title: Optional[str]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None,
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send audio files, if you want Telegram clients to display them in the music player.
-        Your audio must be in the .MP3 or .M4A format. On success, the sent Message is returned. Bots can currently send audio files of up to 50 MB in size,
-        this limit may be changed in the future.
-
-        For sending voice messages, use the send_voice method instead.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendaudio
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param audio: Audio file to send. Pass a file_id as String to send an audio file that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get an audio file from the Internet, or upload a new one using multipart/form-data.
-            Audio must be in the .MP3 or .M4A format.
-        :type audio: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Audio caption, 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param duration: Duration of the audio in seconds
-        :type duration: :obj:`int`
-
-        :param performer: Performer
-        :type performer: :obj:`str`
-
-        :param title: Track name
-        :type title: :obj:`str`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup:
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the audio caption. See formatting options for more details.
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
-        :type thumb: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_audio(
-                self.token, chat_id, audio, caption, duration, performer, title, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout, thumb,
-                caption_entities, allow_sending_without_reply, protect_content, message_thread_id))
-
-    # TODO: Rewrite this method like in API.
-    def send_voice(
-            self, chat_id: Union[int, str], voice: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
-        For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
-        On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendvoice
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param voice: Audio file to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type voice: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Voice message caption, 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param duration: Duration of the voice message in seconds
-        :type duration: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the voice message caption. See formatting options for more details.
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_voice(
-                self.token, chat_id, voice, caption, duration, reply_to_message_id, reply_markup,
-                parse_mode, disable_notification, timeout, caption_entities,
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    # TODO: Rewrite this method like in API.
-    def send_document(
-            self, chat_id: Union[int, str], document: Union[Any, str],
-            reply_to_message_id: Optional[int]=None, 
-            caption: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            visible_file_name: Optional[str]=None,
-            disable_content_type_detection: Optional[bool]=None,
-            data: Optional[Union[Any, str]]=None,
-            protect_content: Optional[bool]=None, message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send general files.
-
-        Telegram documentation: https://core.telegram.org/bots/api#senddocument
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param document: (document) File to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL as a
-            String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data
-        :type document: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param caption: Document caption (may also be used when resending documents by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the document caption
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: InputFile or String : Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param visible_file_name: allows to define file name that will be visible in the Telegram instead of original file name
-        :type visible_file_name: :obj:`str`
-
-        :param disable_content_type_detection: Disables automatic server-side content type detection for files uploaded using multipart/form-data
-        :type disable_content_type_detection: :obj:`bool`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The thread to which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(document):
-            # function typo miss compatibility
-            document = data
-
-        return types.Message.de_json(
-            apihelper.send_data(
-                self.token, chat_id, document, 'document',
-                reply_to_message_id = reply_to_message_id, reply_markup = reply_markup, parse_mode = parse_mode,
-                disable_notification = disable_notification, timeout = timeout, caption = caption, thumb = thumb,
-                caption_entities = caption_entities, allow_sending_without_reply = allow_sending_without_reply,
-                disable_content_type_detection = disable_content_type_detection, visible_file_name = visible_file_name,
-                protect_content = protect_content, message_thread_id = message_thread_id))
-
-
-    # TODO: Rewrite this method like in API.
-    def send_sticker(
-            self, chat_id: Union[int, str],
-            sticker: Union[Any, str],
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content:Optional[bool]=None,
-            data: Union[Any, str]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send static .WEBP, animated .TGS, or video .WEBM stickers.
-        On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendsticker
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sticker: Sticker to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL
-            as a String for Telegram to get a .webp file from the Internet, or upload a new one using multipart/form-data.
-        :type sticker: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: to disable the notification
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param message_thread_id: The thread to which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(sticker):
-            # function typo miss compatibility
-            sticker = data
-
-        return types.Message.de_json(
-            apihelper.send_data(
-                self.token, chat_id, sticker, 'sticker',
-                reply_to_message_id=reply_to_message_id, reply_markup=reply_markup,
-                disable_notification=disable_notification, timeout=timeout, 
-                allow_sending_without_reply=allow_sending_without_reply,
-                protect_content=protect_content, message_thread_id=message_thread_id))
-
-    def send_video(
-            self, chat_id: Union[int, str], video: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            supports_streaming: Optional[bool]=None, 
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            data: Optional[Union[Any, str]]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send video files, Telegram clients support mp4 videos (other formats may be sent as Document).
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendvideo
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param video: Video to send. You can either pass a file_id as String to resend a video that is already on the Telegram servers, or upload a new video file using multipart/form-data.
-        :type video: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent video in seconds
-        :type duration: :obj:`int`
-
-        :param width: Video width
-        :type width: :obj:`int`
-
-        :param height: Video height
-        :type height: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-        
-        :param caption: Video caption (may also be used when resending videos by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the video caption
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param supports_streaming: Pass True, if the uploaded video is suitable for streaming
-        :type supports_streaming: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param message_thread_id: Identifier of a message thread, in which the video will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(video):
-            # function typo miss compatibility
-            video = data
-
-        return types.Message.de_json(
-            apihelper.send_video(
-                self.token, chat_id, video, duration, caption, reply_to_message_id, reply_markup,
-                parse_mode, supports_streaming, disable_notification, timeout, thumb, width, height,
-                caption_entities, allow_sending_without_reply, protect_content, message_thread_id))
-
-    def send_animation(
-            self, chat_id: Union[int, str], animation: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send animation files (GIF or H.264/MPEG-4 AVC video without sound).
-        On success, the sent Message is returned. Bots can currently send animation files of up to 50 MB in size, this limit may be changed in the future.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendanimation
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param animation: Animation to send. Pass a file_id as String to send an animation that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get an animation from the Internet, or upload a new animation using multipart/form-data.
-        :type animation: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent animation in seconds
-        :type duration: :obj:`int`
-
-        :param width: Animation width
-        :type width: :obj:`int`
-
-        :param height: Animation height
-        :type height: :obj:`int`
-        
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Animation caption (may also be used when resending animation by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the animation caption
-        :type parse_mode: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the video will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_animation(
-                self.token, chat_id, animation, duration, caption, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout, thumb,
-                caption_entities, allow_sending_without_reply, protect_content, width, height, message_thread_id))
-
-    # TODO: Rewrite this method like in API.
-    def send_video_note(
-            self, chat_id: Union[int, str], data: Union[Any, str], 
-            duration: Optional[int]=None, 
-            length: Optional[int]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        As of v.4.0, Telegram clients support rounded square MPEG4 videos of up to 1 minute long.
-        Use this method to send video messages. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendvideonote
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param data: Video note to send. Pass a file_id as String to send a video note that exists on the Telegram servers (recommended)
-            or upload a new video using multipart/form-data. Sending video notes by a URL is currently unsupported
-        :type data: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent video in seconds
-        :type duration: :obj:`int`
-
-        :param length: Video width and height, i.e. diameter of the video message
-        :type length: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>. 
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the video note will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_video_note(
-                self.token, chat_id, data, duration, length, reply_to_message_id, reply_markup,
-                disable_notification, timeout, thumb, allow_sending_without_reply, protect_content, message_thread_id))
-
-
-    def send_media_group(
-            self, chat_id: Union[int, str], 
-            media: List[Union[
-                types.InputMediaAudio, types.InputMediaDocument, 
-                types.InputMediaPhoto, types.InputMediaVideo]],
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> List[types.Message]:
-        """
-        Use this method to send a group of photos, videos, documents or audios as an album. Documents and audio files
-        can be only grouped in an album with messages of the same type. On success, an array of Messages that were sent is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendmediagroup
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param media: A JSON-serialized array describing messages to be sent, must include 2-10 items
-        :type media: :obj:`list` of :obj:`types.InputMedia`
-
-        :param disable_notification: Sends the messages silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the media group will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, an array of Messages that were sent is returned.
-        :rtype: List[types.Message]
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = apihelper.send_media_group(
-            self.token, chat_id, media, disable_notification, reply_to_message_id, timeout, 
-            allow_sending_without_reply, protect_content, message_thread_id)
-        return [types.Message.de_json(msg) for msg in result]
-
-    # TODO: Rewrite this method like in API.
-    def send_location(
-            self, chat_id: Union[int, str], 
-            latitude: float, longitude: float, 
-            live_period: Optional[int]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send point on the map. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendlocation
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param latitude: Latitude of the location
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of the location
-        :type longitude: :obj:`float`
-
-        :param live_period: Period in seconds for which the location will be updated (see Live Locations, should be between 60 and 86400.
-        :type live_period: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
-        :type horizontal_accuracy: :obj:`float`
-
-        :param heading: For live locations, a direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
-        :type heading: :obj:`int`
-
-        :param proximity_alert_radius: For live locations, a maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
-        :type proximity_alert_radius: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-        
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_location(
-                self.token, chat_id, latitude, longitude, live_period, 
-                reply_to_message_id, reply_markup, disable_notification, timeout, 
-                horizontal_accuracy, heading, proximity_alert_radius, 
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    def edit_message_live_location(
-            self, latitude: float, longitude: float, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None) -> types.Message or bool:
-        """
-        Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
-            disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
-            is returned, otherwise True is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
-
-        :param latitude: Latitude of new location
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of new location
-        :type longitude: :obj:`float`
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the message to edit
-        :type message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for a new inline keyboard.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
-        :type horizontal_accuracy: :obj:`float`
-
-        :param heading: Direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
-        :type heading: :obj:`int`
-
-        :param proximity_alert_radius: The maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
-        :type proximity_alert_radius: :obj:`int`
-
-        :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
-        :rtype: :class:`telebot.types.Message` or bool
-        """
-        return types.Message.de_json(
-            apihelper.edit_message_live_location(
-                self.token, latitude, longitude, chat_id, message_id,
-                inline_message_id, reply_markup, timeout,
-                horizontal_accuracy, heading, proximity_alert_radius))
-
-    def stop_message_live_location(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None) -> types.Message or bool:
-        """
-        Use this method to stop updating a live location message before live_period expires.
-        On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#stopmessagelivelocation
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: 	Required if inline_message_id is not specified. Identifier of the message with live location to stop
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message with live location to stop
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for a new inline keyboard.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
-        :rtype: :class:`telebot.types.Message` or bool
-        """
-        return types.Message.de_json(
-            apihelper.stop_message_live_location(
-                self.token, chat_id, message_id, inline_message_id, reply_markup, timeout))
-
-    # TODO: Rewrite this method like in API.
-    def send_venue(
-            self, chat_id: Union[int, str], 
-            latitude: Optional[float], longitude: Optional[float], 
-            title: str, address: str, 
-            foursquare_id: Optional[str]=None, 
-            foursquare_type: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            google_place_id: Optional[str]=None,
-            google_place_type: Optional[str]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send information about a venue. On success, the sent Message is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendvenue
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param latitude: Latitude of the venue
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of the venue
-        :type longitude: :obj:`float`
-
-        :param title: Name of the venue
-        :type title: :obj:`str`
-
-        :param address: Address of the venue
-        :type address: :obj:`str`
-
-        :param foursquare_id: Foursquare identifier of the venue
-        :type foursquare_id: :obj:`str`
-
-        :param foursquare_type: Foursquare type of the venue, if known. (For example, “arts_entertainment/default”,
-            “arts_entertainment/aquarium” or “food/icecream”.)
-        :type foursquare_type: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
-            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
-            replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param google_place_id: Google Places identifier of the venue
-        :type google_place_id: :obj:`str`
-
-        :param google_place_type: Google Places type of the venue.
-        :type google_place_type: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The thread identifier of a message from which the reply will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_venue(
-                self.token, chat_id, latitude, longitude, title, address, foursquare_id, foursquare_type,
-                disable_notification, reply_to_message_id, reply_markup, timeout,
-                allow_sending_without_reply, google_place_id, google_place_type, protect_content, message_thread_id))
-
-
-    # TODO: Rewrite this method like in API.
-    def send_contact(
-            self, chat_id: Union[int, str], phone_number: str, 
-            first_name: str, last_name: Optional[str]=None, 
-            vcard: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None, message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send phone contacts. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendcontact
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param phone_number: Contact's phone number
-        :type phone_number: :obj:`str`
-
-        :param first_name: Contact's first name
-        :type first_name: :obj:`str`
-
-        :param last_name: Contact's last name
-        :type last_name: :obj:`str`
-
-        :param vcard: Additional data about the contact in the form of a vCard, 0-2048 bytes
-        :type vcard: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
-            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
-            replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The thread identifier of a message from which the reply will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            apihelper.send_contact(
-                self.token, chat_id, phone_number, first_name, last_name, vcard,
-                disable_notification, reply_to_message_id, reply_markup, timeout,
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    def send_chat_action(
-            self, chat_id: Union[int, str], action: str, timeout: Optional[int]=None) -> bool:
-        """
-        Use this method when you need to tell the user that something is happening on the bot's side.
-        The status is set for 5 seconds or less (when a message arrives from your bot, Telegram clients clear its typing status).
-        Returns True on success.
-
-        Example: The ImageBot needs some time to process a request and upload the image. Instead of sending a text message along the lines of
-        “Retrieving image, please wait…”, the bot may use sendChatAction with action = upload_photo. The user will see a “sending photo” status for the bot.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendchataction
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param action: Type of action to broadcast. Choose one, depending on what the user is about
-            to receive: typing for text messages, upload_photo for photos, record_video or upload_video
-            for videos, record_voice or upload_voice for voice notes, upload_document for general files,
-            choose_sticker for stickers, find_location for location data, record_video_note or upload_video_note for video notes.
-        :type action: :obj:`str`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.send_chat_action(self.token, chat_id, action, timeout)
-    
-    @util.deprecated(deprecation_text="Use ban_chat_member instead")
-    def kick_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date:Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
-        """
-        This function is deprecated. Use `ban_chat_member` instead.
-        """
-        return apihelper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
-
-    def ban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date: Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
-        """
-        Use this method to ban a user in a group, a supergroup or a channel. 
-        In the case of supergroups and channels, the user will not be able to return to the chat on their 
-        own using invite links, etc., unless unbanned first. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#banchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup
-            or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param until_date: Date when the user will be unbanned, unix time. If user is banned for more than 366 days or
-               less than 30 seconds from the current time they are considered to be banned forever
-        :type until_date: :obj:`int` or :obj:`datetime`
-
-        :param revoke_messages: Bool: Pass True to delete all messages from the chat for the user that is being removed.
-            If False, the user will be able to see messages in the group that were sent before the user was removed. 
-            Always True for supergroups and channels.
-        :type revoke_messages: :obj:`bool`
-        
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
-
-    def unban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            only_if_banned: Optional[bool]=False) -> bool:
-        """
-        Use this method to unban a previously kicked user in a supergroup or channel.
-        The user will not return to the group or channel automatically, but will be able to join via link, etc.
-        The bot must be an administrator for this to work. By default, this method guarantees that after the call
-        the user is not a member of the chat, but will be able to join it. So if the user is a member of the chat
-        they will also be removed from the chat. If you don't want this, use the parameter only_if_banned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unbanchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup or channel
-            (in the format @username)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param only_if_banned: Do nothing if the user is not banned
-        :type only_if_banned: :obj:`bool`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return apihelper.unban_chat_member(self.token, chat_id, user_id, only_if_banned)
-
-    def restrict_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date: Optional[Union[int, datetime]]=None,
-            can_send_messages: Optional[bool]=None, 
-            can_send_media_messages: Optional[bool]=None,
-            can_send_polls: Optional[bool]=None, 
-            can_send_other_messages: Optional[bool]=None,
-            can_add_web_page_previews: Optional[bool]=None, 
-            can_change_info: Optional[bool]=None,
-            can_invite_users: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None) -> bool:
-        """
-        Use this method to restrict a user in a supergroup.
-        The bot must be an administrator in the supergroup for this to work and must have
-        the appropriate admin rights. Pass True for all boolean parameters to lift restrictions from a user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#restrictchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup
-            or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param until_date: Date when restrictions will be lifted for the user, unix time.
-            If user is restricted for more than 366 days or less than 30 seconds from the current time,
-            they are considered to be restricted forever
-        :type until_date: :obj:`int` or :obj:`datetime`
-
-        :param can_send_messages: Pass True, if the user can send text messages, contacts, locations and venues
-        :type can_send_messages: :obj:`bool`
-        
-        :param can_send_media_messages: Pass True, if the user can send audios, documents, photos, videos, video notes
-            and voice notes, implies can_send_messages
-        :type can_send_media_messages: :obj:`bool`
-        
-        :param can_send_polls: Pass True, if the user is allowed to send polls, implies can_send_messages
-        :type can_send_polls: :obj:`bool`
-
-        :param can_send_other_messages: Pass True, if the user can send animations, games, stickers and use inline bots, implies can_send_media_messages
-        :type can_send_other_messages: :obj:`bool`
-
-        :param can_add_web_page_previews: Pass True, if the user may add web page previews to their messages,
-            implies can_send_media_messages
-        :type can_add_web_page_previews: :obj:`bool`
-
-        :param can_change_info: Pass True, if the user is allowed to change the chat title, photo and other settings.
-            Ignored in public supergroups
-        :type can_change_info: :obj:`bool`
-
-        :param can_invite_users: Pass True, if the user is allowed to invite new users to the chat,
-            implies can_invite_users
-        :type can_invite_users: :obj:`bool`
-
-        :param can_pin_messages: Pass True, if the user is allowed to pin messages. Ignored in public supergroups
-        :type can_pin_messages: :obj:`bool`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return apihelper.restrict_chat_member(
-            self.token, chat_id, user_id, until_date,
-            can_send_messages, can_send_media_messages,
-            can_send_polls, can_send_other_messages,
-            can_add_web_page_previews, can_change_info,
-            can_invite_users, can_pin_messages)
-
-    def promote_chat_member(
-            self, chat_id: Union[int, str], user_id: int,
-            can_change_info: Optional[bool]=None, 
-            can_post_messages: Optional[bool]=None,
-            can_edit_messages: Optional[bool]=None, 
-            can_delete_messages: Optional[bool]=None, 
-            can_invite_users: Optional[bool]=None,
-            can_restrict_members: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None, 
-            can_promote_members: Optional[bool]=None,
-            is_anonymous: Optional[bool]=None, 
-            can_manage_chat: Optional[bool]=None, 
-            can_manage_video_chats: Optional[bool]=None,
-            can_manage_voice_chats: Optional[bool]=None,
-            can_manage_topics: Optional[bool]=None) -> bool:
-        """
-        Use this method to promote or demote a user in a supergroup or a channel. The bot must be an administrator
-        in the chat for this to work and must have the appropriate admin rights.
-        Pass False for all boolean parameters to demote a user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#promotechatmember
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (
-            in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param can_change_info: Pass True, if the administrator can change chat title, photo and other settings
-        :type can_change_info: :obj:`bool`
-
-        :param can_post_messages: Pass True, if the administrator can create channel posts, channels only
-        :type can_post_messages: :obj:`bool`
-
-        :param can_edit_messages: Pass True, if the administrator can edit messages of other users, channels only
-        :type can_edit_messages: :obj:`bool`
-
-        :param can_delete_messages: Pass True, if the administrator can delete messages of other users
-        :type can_delete_messages: :obj:`bool`
-
-        :param can_invite_users: Pass True, if the administrator can invite new users to the chat
-        :type can_invite_users: :obj:`bool`
-
-        :param can_restrict_members: Pass True, if the administrator can restrict, ban or unban chat members
-        :type can_restrict_members: :obj:`bool`
-
-        :param can_pin_messages: Pass True, if the administrator can pin messages, supergroups only
-        :type can_pin_messages: :obj:`bool`
-
-        :param can_promote_members: Pass True, if the administrator can add new administrators with a subset
-            of his own privileges or demote administrators that he has promoted, directly or indirectly
-            (promoted by administrators that were appointed by him)
-        :type can_promote_members: :obj:`bool`
-
-        :param is_anonymous: Pass True, if the administrator's presence in the chat is hidden
-        :type is_anonymous: :obj:`bool`
-
-        :param can_manage_chat: Pass True, if the administrator can access the chat event log, chat statistics, 
-            message statistics in channels, see channel members, 
-            see anonymous administrators in supergroups and ignore slow mode. 
-            Implied by any other administrator privilege
-        :type can_manage_chat: :obj:`bool`
-
-        :param can_manage_video_chats: Pass True, if the administrator can manage voice chats
-            For now, bots can use this privilege only for passing to other administrators.
-        :type can_manage_video_chats: :obj:`bool`
-
-        :param can_manage_voice_chats: Deprecated, use can_manage_video_chats.
-        :type can_manage_voice_chats: :obj:`bool`
-
-        :param can_manage_topics: Pass True if the user is allowed to create, rename, close,
-            and reopen forum topics, supergroups only
-        :type can_manage_topics: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        if can_manage_voice_chats is not None:
-            logger.warning("promote_chat_member: can_manage_voice_chats parameter is deprecated. Use can_manage_video_chats instead.")
-            if can_manage_video_chats is None:
-                can_manage_video_chats = can_manage_voice_chats
-
-        return apihelper.promote_chat_member(
-            self.token, chat_id, user_id, can_change_info, can_post_messages,
-            can_edit_messages, can_delete_messages, can_invite_users,
-            can_restrict_members, can_pin_messages, can_promote_members,
-            is_anonymous, can_manage_chat, can_manage_video_chats, can_manage_topics)
-
-    def set_chat_administrator_custom_title(
-            self, chat_id: Union[int, str], user_id: int, custom_title: str) -> bool:
-        """
-        Use this method to set a custom title for an administrator in a supergroup promoted by the bot.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatadministratorcustomtitle
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param custom_title: New custom title for the administrator;
-            0-16 characters, emoji are not allowed
-        :type custom_title: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_administrator_custom_title(self.token, chat_id, user_id, custom_title)
-    
-    def ban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to ban a channel chat in a supergroup or a channel.
-        The owner of the chat will not be able to send messages and join live 
-        streams on behalf of the chat, unless it is unbanned first. 
-        The bot must be an administrator in the supergroup or channel 
-        for this to work and must have the appropriate administrator rights. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#banchatsenderchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sender_chat_id: Unique identifier of the target sender chat
-        :type sender_chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.ban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
-    def unban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to unban a previously banned channel chat in a supergroup or channel. 
-        The bot must be an administrator for this to work and must have the appropriate 
-        administrator rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unbanchatsenderchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sender_chat_id: Unique identifier of the target sender chat.
-        :type sender_chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.unban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
-    def set_chat_permissions(
-            self, chat_id: Union[int, str], permissions: types.ChatPermissions) -> bool:
-        """
-        Use this method to set default chat permissions for all members.
-        The bot must be an administrator in the group or a supergroup for this to work
-        and must have the can_restrict_members admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatpermissions
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param permissions: New default chat permissions
-        :type permissions: :class:`telebot.types..ChatPermissions`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_permissions(self.token, chat_id, permissions)
-
-    def create_chat_invite_link(
-            self, chat_id: Union[int, str],
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None, 
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
-        """
-        Use this method to create an additional invite link for a chat. The bot must be an administrator in the chat for this to work and
-        must have the appropriate administrator rights.
-        The link can be revoked using the method revokeChatInviteLink.
-        Returns the new invite link as ChatInviteLink object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Invite link name; 0-32 characters
-        :type name: :obj:`str`
-
-        :param expire_date: Point in time (Unix timestamp) when the link will expire
-        :type expire_date: :obj:`int` or :obj:`datetime`
-
-        :param member_limit: Maximum number of users that can be members of the chat simultaneously
-        :type member_limit: :obj:`int`
-
-        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
-        :type creates_join_request: :obj:`bool`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            apihelper.create_chat_invite_link(self.token, chat_id, name, expire_date, member_limit, creates_join_request)
-        )
-
-    def edit_chat_invite_link(
-            self, chat_id: Union[int, str],
-            invite_link: Optional[str] = None,
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None,
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
-        """
-        Use this method to edit a non-primary invite link created by the bot.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Invite link name; 0-32 characters
-        :type name: :obj:`str`
-
-        :param invite_link: The invite link to edit
-        :type invite_link: :obj:`str`
-
-        :param expire_date: Point in time (Unix timestamp) when the link will expire
-        :type expire_date: :obj:`int` or :obj:`datetime`
-
-        :param member_limit: Maximum number of users that can be members of the chat simultaneously
-        :type member_limit: :obj:`int`
-
-        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
-        :type creates_join_request: :obj:`bool`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            apihelper.edit_chat_invite_link(self.token, chat_id, name, invite_link, expire_date, member_limit, creates_join_request)
-        )
-
-    def revoke_chat_invite_link(
-            self, chat_id: Union[int, str], invite_link: str) -> types.ChatInviteLink:
-        """
-        Use this method to revoke an invite link created by the bot.
-        Note: If the primary link is revoked, a new link is automatically generated The bot must be an administrator 
-        in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#revokechatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param invite_link: The invite link to revoke
-        :type invite_link: :obj:`str`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            apihelper.revoke_chat_invite_link(self.token, chat_id, invite_link)
-        )
-
-    def export_chat_invite_link(self, chat_id: Union[int, str]) -> str:
-        """
-        Use this method to export an invite link to a supergroup or a channel. The bot must be an administrator
-        in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#exportchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: exported invite link as String on success.
-        :rtype: :obj:`str`
-        """
-        return apihelper.export_chat_invite_link(self.token, chat_id)
-
-    def approve_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
-        """
-        Use this method to approve a chat join request. 
-        The bot must be an administrator in the chat for this to work and must have
-        the can_invite_users administrator right. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#approvechatjoinrequest
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.approve_chat_join_request(self.token, chat_id, user_id)
-
-    def decline_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
-        """
-        Use this method to decline a chat join request. 
-        The bot must be an administrator in the chat for this to work and must have
-        the can_invite_users administrator right. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#declinechatjoinrequest
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.decline_chat_join_request(self.token, chat_id, user_id)
-
-    def set_chat_photo(self, chat_id: Union[int, str], photo: Any) -> bool:
-        """
-        Use this method to set a new profile photo for the chat. Photos can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
-        setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatphoto
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param photo: InputFile: New chat photo, uploaded using multipart/form-data
-        :type photo: :obj:`typing.Union[file_like, str]`
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_photo(self.token, chat_id, photo)
-
-    def delete_chat_photo(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to delete a chat photo. Photos can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’ setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletechatphoto
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_chat_photo(self.token, chat_id)
-    
-    def get_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
-            language_code: Optional[str]=None) -> List[types.BotCommand]:
-        """
-        Use this method to get the current list of the bot's commands. 
-        Returns List of BotCommand on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getmycommands
-
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: List of BotCommand on success.
-        :rtype: :obj:`list` of :class:`telebot.types.BotCommand`
-        """
-        result = apihelper.get_my_commands(self.token, scope, language_code)
-        return [types.BotCommand.de_json(cmd) for cmd in result]
-
-    def set_chat_menu_button(self, chat_id: Union[int, str]=None, 
-                menu_button: types.MenuButton=None) -> bool:
-        """
-        Use this method to change the bot's menu button in a private chat, 
-        or the default menu button. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatmenubutton
-
-        :param chat_id: Unique identifier for the target private chat. 
-            If not specified, default bot's menu button will be changed.
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param menu_button: A JSON-serialized object for the new bot's menu button. Defaults to MenuButtonDefault
-        :type menu_button: :class:`telebot.types.MenuButton`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_menu_button(self.token, chat_id, menu_button)
-
-    def get_chat_menu_button(self, chat_id: Union[int, str]=None) -> types.MenuButton:
-        """
-        Use this method to get the current value of the bot's menu button
-        in a private chat, or the default menu button.
-        Returns MenuButton on success.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#getchatmenubutton
-
-        :param chat_id: Unique identifier for the target private chat.
-            If not specified, default bot's menu button will be returned.
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: types.MenuButton
-        :rtype: :class:`telebot.types.MenuButton`
-        """
-        return types.MenuButton.de_json(apihelper.get_chat_menu_button(self.token, chat_id))
-
-    def set_my_default_administrator_rights(self, rights: types.ChatAdministratorRights=None, 
-                                    for_channels: Optional[bool]=None) -> bool:
-        """
-        Use this method to change the default administrator rights requested by the bot
-        when it's added as an administrator to groups or channels.
-        These rights will be suggested to users, but they are are free to modify
-        the list before adding the bot. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setmydefaultadministratorrights
-
-        :param rights: A JSON-serialized object describing new default administrator rights. If not specified,
-            the default administrator rights will be cleared.
-        :type rights: :class:`telebot.types.ChatAdministratorRights`
-
-        :param for_channels: Pass True to change the default administrator rights of the bot in channels.
-            Otherwise, the default administrator rights of the bot for groups and supergroups will be changed.
-        :type for_channels: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_my_default_administrator_rights(self.token, rights, for_channels)
-
-    def get_my_default_administrator_rights(self, for_channels: Optional[bool]=None) -> types.ChatAdministratorRights:
-        """
-        Use this method to get the current default administrator rights of the bot.
-        Returns ChatAdministratorRights on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getmydefaultadministratorrights
-
-        :param for_channels: Pass True to get the default administrator rights of the bot in channels. Otherwise, the default administrator rights of the bot for groups and supergroups will be returned.
-        :type for_channels: :obj:`bool`
-
-        :return: Returns ChatAdministratorRights on success.
-        :rtype: :class:`telebot.types.ChatAdministratorRights`
-        """
-        return types.ChatAdministratorRights.de_json(apihelper.get_my_default_administrator_rights(self.token, for_channels))
-        
-    def set_my_commands(self, commands: List[types.BotCommand],
-            scope: Optional[types.BotCommandScope]=None,
-            language_code: Optional[str]=None) -> bool:
-        """
-        Use this method to change the list of the bot's commands.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setmycommands
-
-        :param commands: List of BotCommand. At most 100 commands can be specified.
-        :type commands: :obj:`list` of :class:`telebot.types.BotCommand`
-
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_my_commands(self.token, commands, scope, language_code)
-    
-    def delete_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
-            language_code: Optional[str]=None) -> bool:
-        """
-        Use this method to delete the list of the bot's commands for the given scope and user language. 
-        After deletion, higher level commands will be shown to affected users. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletemycommands
-        
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_my_commands(self.token, scope, language_code)
-
-    def set_chat_title(self, chat_id: Union[int, str], title: str) -> bool:
-        """
-        Use this method to change the title of a chat. Titles can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
-        setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchattitle
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param title: New chat title, 1-255 characters
-        :type title: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_title(self.token, chat_id, title)
-
-    def set_chat_description(self, chat_id: Union[int, str], description: Optional[str]=None) -> bool:
-        """
-        Use this method to change the description of a supergroup or a channel.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatdescription
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param description: Str: New chat description, 0-255 characters
-        :type description: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_chat_description(self.token, chat_id, description)
-
-    def pin_chat_message(
-            self, chat_id: Union[int, str], message_id: int, 
-            disable_notification: Optional[bool]=False) -> bool:
-        """
-        Use this method to pin a message in a supergroup.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#pinchatmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Identifier of a message to pin
-        :type message_id: :obj:`int`
-
-        :param disable_notification: Pass True, if it is not necessary to send a notification
-            to all group members about the new pinned message
-        :type disable_notification: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-
-        return apihelper.pin_chat_message(self.token, chat_id, message_id, disable_notification)
-
-    def unpin_chat_message(self, chat_id: Union[int, str], message_id: Optional[int]=None) -> bool:
-        """
-        Use this method to unpin specific pinned message in a supergroup chat.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinchatmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Int: Identifier of a message to unpin
-        :type message_id: :obj:`int`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.unpin_chat_message(self.token, chat_id, message_id)
-
-    def unpin_all_chat_messages(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to unpin a all pinned messages in a supergroup chat.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinallchatmessages
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.unpin_all_chat_messages(self.token, chat_id)
-
-    def edit_message_text(
-            self, text: str, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit text and game messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagetext
-
-        :param text: New text of the message, 1-4096 characters after entities parsing
-        :type text: :obj:`str`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the message text.
-        :type parse_mode: :obj:`str`
-
-        :param entities: List of special entities that appear in the message text, which can be specified instead of parse_mode
-        :type entities: List of :obj:`telebot.types.MessageEntity`
-
-        :param disable_web_page_preview: Disables link previews for links in this message
-        :type disable_web_page_preview: :obj:`bool`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
-
-        result = apihelper.edit_message_text(self.token, text, chat_id, message_id, inline_message_id, parse_mode,
-                                             entities, disable_web_page_preview, reply_markup)
-        if type(result) == bool:  # if edit inline message return is bool not Message.
-            return result
-        return types.Message.de_json(result)
-
-    def edit_message_media(
-            self, media: Any, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit animation, audio, document, photo, or video messages.
-        If a message is a part of a message album, then it can be edited only to a photo or a video.
-        Otherwise, message type can be changed arbitrarily. When inline message is edited, new file can't be uploaded.
-        Use previously uploaded file via its file_id or specify a URL.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagemedia
-
-        :param media: A JSON-serialized object for a new media content of the message
-        :type media: :obj:`InputMedia`
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message 
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`telebot.types.InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = apihelper.edit_message_media(self.token, media, chat_id, message_id, inline_message_id, reply_markup)
-        if type(result) == bool:  # if edit inline message return is bool not Message.
-            return result
-        return types.Message.de_json(result)
-
-    def edit_message_reply_markup(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit only the reply markup of messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagereplymarkup
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = apihelper.edit_message_reply_markup(self.token, chat_id, message_id, inline_message_id, reply_markup)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    def send_game(
-            self, chat_id: Union[int, str], game_short_name: str, 
-            disable_notification: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Used to send the game.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendgame
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param game_short_name: Short name of the game, serves as the unique identifier for the game. Set up your games via @BotFather.
-        :type game_short_name: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message 
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :param timeout: Timeout in seconds for waiting for a response from the bot.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Pass True, if content of the message needs to be protected from being viewed by the bot.
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, in which the game message will be sent.
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = apihelper.send_game(
-            self.token, chat_id, game_short_name, disable_notification,
-            reply_to_message_id, reply_markup, timeout, 
-            allow_sending_without_reply, protect_content, message_thread_id)
-        return types.Message.de_json(result)
-
-    def set_game_score(
-            self, user_id: Union[int, str], score: int, 
-            force: Optional[bool]=None, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            disable_edit_message: Optional[bool]=None) -> Union[types.Message, bool]:
-        """
-        Sets the value of points in the game to a specific user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setgamescore
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :param score: New score, must be non-negative
-        :type score: :obj:`int`
-
-        :param force: Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters
-        :type force: :obj:`bool`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param disable_edit_message: Pass True, if the game message should not be automatically edited to include the current scoreboard
-        :type disable_edit_message: :obj:`bool`
-
-        :return: On success, if the message was sent by the bot, returns the edited Message, otherwise returns True.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = apihelper.set_game_score(self.token, user_id, score, force, disable_edit_message, chat_id,
-                                          message_id, inline_message_id)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    def get_game_high_scores(
-            self, user_id: int, chat_id: Optional[Union[int, str]]=None,
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None) -> List[types.GameHighScore]:
-        """
-        Use this method to get data for high score tables. Will return the score of the specified user and several of
-        their neighbors in a game. On success, returns an Array of GameHighScore objects.
-
-        This method will currently return scores for the target user, plus two of their closest neighbors on each side.
-        Will also return the top three users if the user and their neighbors are not among them.
-        Please note that this behavior is subject to change.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getgamehighscores
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :return: On success, returns an Array of GameHighScore objects.
-        :rtype: List[types.GameHighScore]
-        """
-        result = apihelper.get_game_high_scores(self.token, user_id, chat_id, message_id, inline_message_id)
-        return [types.GameHighScore.de_json(r) for r in result]
-
-    # TODO: rewrite this method like in API
-    def send_invoice(
-            self, chat_id: Union[int, str], title: str, description: str, 
-            invoice_payload: str, provider_token: str, currency: str, 
-            prices: List[types.LabeledPrice], start_parameter: Optional[str]=None, 
-            photo_url: Optional[str]=None, photo_size: Optional[int]=None, 
-            photo_width: Optional[int]=None, photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None, need_phone_number: Optional[bool]=None, 
-            need_email: Optional[bool]=None, need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None, 
-            send_email_to_provider: Optional[bool]=None, 
-            is_flexible: Optional[bool]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            provider_data: Optional[str]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            max_tip_amount: Optional[int] = None,
-            suggested_tip_amounts: Optional[List[int]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Sends invoice.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendinvoice
-
-        :param chat_id: Unique identifier for the target private chat
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param title: Product name, 1-32 characters
-        :type title: :obj:`str`
-
-        :param description: Product description, 1-255 characters
-        :type description: :obj:`str`
-
-        :param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
-            use for your internal processes.
-        :type invoice_payload: :obj:`str`
-
-        :param provider_token: Payments provider token, obtained via @Botfather
-        :type provider_token: :obj:`str`
-
-        :param currency: Three-letter ISO 4217 currency code,
-            see https://core.telegram.org/bots/payments#supported-currencies
-        :type currency: :obj:`str`
-
-        :param prices: Price breakdown, a list of components
-            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
-        :type prices: List[:obj:`types.LabeledPrice`]
-
-        :param start_parameter: Unique deep-linking parameter that can be used to generate this invoice
-            when used as a start parameter
-        :type start_parameter: :obj:`str`
-
-        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
-            or a marketing image for a service. People like it better when they see what they are paying for.
-        :type photo_url: :obj:`str`
-
-        :param photo_size: Photo size in bytes
-        :type photo_size: :obj:`int`
-
-        :param photo_width: Photo width 
-        :type photo_width: :obj:`int`
-
-        :param photo_height: Photo height
-        :type photo_height: :obj:`int`
-
-        :param need_name: Pass True, if you require the user's full name to complete the order
-        :type need_name: :obj:`bool`
-
-        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
-        :type need_phone_number: :obj:`bool`
-
-        :param need_email: Pass True, if you require the user's email to complete the order
-        :type need_email: :obj:`bool`
-
-        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
-        :type need_shipping_address: :obj:`bool`
-
-        :param is_flexible: Pass True, if the final price depends on the shipping method
-        :type is_flexible: :obj:`bool`
-
-        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
-        :type send_phone_number_to_provider: :obj:`bool`
-
-        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
-        :type send_email_to_provider: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard. If empty,
-            one 'Pay total price' button will be shown. If not empty, the first button must be a Pay button
-        :type reply_markup: :obj:`str`
-
-        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
-            A detailed description of required fields should be provided by the payment provider.
-        :type provider_data: :obj:`str`
-
-        :param timeout: Timeout of a request, defaults to None
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
-        :type max_tip_amount: :obj:`int`
-
-        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
-            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
-            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
-        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, in which the invoice message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = apihelper.send_invoice(
-            self.token, chat_id, title, description, invoice_payload, provider_token,
-            currency, prices, start_parameter, photo_url, photo_size, photo_width,
-            photo_height, need_name, need_phone_number, need_email, need_shipping_address,
-            send_phone_number_to_provider, send_email_to_provider, is_flexible, disable_notification,
-            reply_to_message_id, reply_markup, provider_data, timeout, allow_sending_without_reply,
-            max_tip_amount, suggested_tip_amounts, protect_content, message_thread_id)
-        return types.Message.de_json(result)
-
-    def create_invoice_link(self,
-            title: str, description: str, payload:str, provider_token: str, 
-            currency: str, prices: List[types.LabeledPrice],
-            max_tip_amount: Optional[int] = None, 
-            suggested_tip_amounts: Optional[List[int]]=None,
-            provider_data: Optional[str]=None,
-            photo_url: Optional[str]=None,
-            photo_size: Optional[int]=None,
-            photo_width: Optional[int]=None,
-            photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None,
-            need_phone_number: Optional[bool]=None,
-            need_email: Optional[bool]=None,
-            need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None,
-            send_email_to_provider: Optional[bool]=None,
-            is_flexible: Optional[bool]=None) -> str:
-            
-        """
-        Use this method to create a link for an invoice. 
-        Returns the created invoice link as String on success.
-
-        Telegram documentation:
-        https://core.telegram.org/bots/api#createinvoicelink
-
-        :param title: Product name, 1-32 characters
-        :type title: :obj:`str`
-
-        :param description: Product description, 1-255 characters
-        :type description: :obj:`str`
-
-        :param payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
-            use for your internal processes.
-        :type payload: :obj:`str`
-
-        :param provider_token: Payments provider token, obtained via @Botfather
-        :type provider_token: :obj:`str`
-
-        :param currency: Three-letter ISO 4217 currency code,
-            see https://core.telegram.org/bots/payments#supported-currencies
-        :type currency: :obj:`str`
-
-        :param prices: Price breakdown, a list of components
-            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
-        :type prices: :obj:`list` of :obj:`types.LabeledPrice`
-
-        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
-        :type max_tip_amount: :obj:`int`
-
-        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
-            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
-            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
-        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
-
-        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
-            A detailed description of required fields should be provided by the payment provider.
-        :type provider_data: :obj:`str`
-
-        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
-            or a photo of the invoice. People like it better when they see a photo of what they are paying for.
-        :type photo_url: :obj:`str`
-
-        :param photo_size: Photo size in bytes
-        :type photo_size: :obj:`int`
-
-        :param photo_width: Photo width
-        :type photo_width: :obj:`int`
-
-        :param photo_height: Photo height
-        :type photo_height: :obj:`int`
-
-        :param need_name: Pass True, if you require the user's full name to complete the order
-        :type need_name: :obj:`bool`
-
-        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
-        :type need_phone_number: :obj:`bool`
-
-        :param need_email: Pass True, if you require the user's email to complete the order
-        :type need_email: :obj:`bool`
-
-        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
-        :type need_shipping_address: :obj:`bool`
-
-        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
-        :type send_phone_number_to_provider: :obj:`bool`
-
-        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
-        :type send_email_to_provider: :obj:`bool`
-
-        :param is_flexible: Pass True, if the final price depends on the shipping method
-        :type is_flexible: :obj:`bool`
-
-        :return: Created invoice link as String on success.
-        :rtype: :obj:`str`
-        """
-        result = apihelper.create_invoice_link(
-            self.token, title, description, payload, provider_token,
-            currency, prices, max_tip_amount, suggested_tip_amounts, provider_data,
-            photo_url, photo_size, photo_width, photo_height, need_name, need_phone_number,
-            need_email, need_shipping_address, send_phone_number_to_provider,
-            send_email_to_provider, is_flexible)
-        return result
-
-    # noinspection PyShadowingBuiltins
-    # TODO: rewrite this method like in API
-    def send_poll(
-            self, chat_id: Union[int, str], question: str, options: List[str],
-            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
-            allows_multiple_answers: Optional[bool]=None, 
-            correct_option_id: Optional[int]=None,
-            explanation: Optional[str]=None, 
-            explanation_parse_mode: Optional[str]=None, 
-            open_period: Optional[int]=None, 
-            close_date: Optional[Union[int, datetime]]=None, 
-            is_closed: Optional[bool]=None,
-            disable_notification: Optional[bool]=False,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            allow_sending_without_reply: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            explanation_entities: Optional[List[types.MessageEntity]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send a native poll.
-        On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendpoll
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param question: Poll question, 1-300 characters
-        :type question: :obj:`str`
-
-        :param options: A JSON-serialized list of answer options, 2-10 strings 1-100 characters each
-        :type options: :obj:`list` of :obj:`str`
-
-        :param is_anonymous: True, if the poll needs to be anonymous, defaults to True
-        :type is_anonymous: :obj:`bool`
-
-        :param type: Poll type, “quiz” or “regular”, defaults to “regular”
-        :type type: :obj:`str`
-
-        :param allows_multiple_answers: True, if the poll allows multiple answers, ignored for polls in quiz mode, defaults to False
-        :type allows_multiple_answers: :obj:`bool`
-
-        :param correct_option_id: 0-based identifier of the correct answer option. Available only for polls in quiz mode,
-            defaults to None
-        :type correct_option_id: :obj:`int`
-
-        :param explanation: Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll,
-            0-200 characters with at most 2 line feeds after entities parsing
-        :type explanation: :obj:`str`
-
-        :param explanation_parse_mode: Mode for parsing entities in the explanation. See formatting options for more details.
-        :type explanation_parse_mode: :obj:`str`
-
-        :param open_period: Amount of time in seconds the poll will be active after creation, 5-600. Can't be used together with close_date.
-        :type open_period: :obj:`int`
-
-        :param close_date: Point in time (Unix timestamp) when the poll will be automatically closed.
-        :type close_date: :obj:`int` | :obj:`datetime`
-
-        :param is_closed: Pass True, if the poll needs to be immediately closed. This can be useful for poll preview.
-        :type is_closed: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the poll allows multiple options to be voted simultaneously.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard,
-            instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
-
-        :param timeout: Timeout in seconds for waiting for a response from the user.
-        :type timeout: :obj:`int`
-
-        :param explanation_entities: A JSON-serialized list of special entities that appear in the explanation,
-            which can be specified instead of parse_mode
-        :type explanation_entities: :obj:`list` of :obj:`MessageEntity`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, in which the poll will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if isinstance(question, types.Poll):
-            raise RuntimeError("The send_poll signature was changed, please see send_poll function details.")
-
-        explanation_parse_mode = self.parse_mode if (explanation_parse_mode is None) else explanation_parse_mode
-
-        return types.Message.de_json(
-            apihelper.send_poll(
-                self.token, chat_id,
-                question, options,
-                is_anonymous, type, allows_multiple_answers, correct_option_id,
-                explanation, explanation_parse_mode, open_period, close_date, is_closed,
-                disable_notification, reply_to_message_id, allow_sending_without_reply,
-                reply_markup, timeout, explanation_entities, protect_content, message_thread_id))
-
-    def stop_poll(
-            self, chat_id: Union[int, str], message_id: int, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> types.Poll:
-        """
-        Use this method to stop a poll which was sent by the bot. On success, the stopped Poll is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#stoppoll
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param message_id: Identifier of the original message with the poll
-        :type message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for a new message markup.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
-
-        :return: On success, the stopped Poll is returned.
-        :rtype: :obj:`types.Poll`
-        """
-        return types.Poll.de_json(apihelper.stop_poll(self.token, chat_id, message_id, reply_markup))
-
-    def answer_shipping_query(
-            self, shipping_query_id: str, ok: bool, 
-            shipping_options: Optional[List[types.ShippingOption]]=None, 
-            error_message: Optional[str]=None) -> bool:
-        """
-        Asks for an answer to a shipping question.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answershippingquery
-
-        :param shipping_query_id: Unique identifier for the query to be answered
-        :type shipping_query_id: :obj:`str`
-
-        :param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)
-        :type ok: :obj:`bool`
-
-        :param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.
-        :type shipping_options: :obj:`list` of :obj:`ShippingOption`
-
-        :param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order
-            (e.g. "Sorry, delivery to your desired address is unavailable'). Telegram will display this message to the user.
-        :type error_message: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.answer_shipping_query(self.token, shipping_query_id, ok, shipping_options, error_message)
-
-    def answer_pre_checkout_query(
-            self, pre_checkout_query_id: int, ok: bool, 
-            error_message: Optional[str]=None) -> bool:
-        """
-        Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the
-        field pre_checkout_query. Use this method to respond to such pre-checkout queries.
-        On success, True is returned.
-
-        .. note::
-            The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answerprecheckoutquery
-
-        :param pre_checkout_query_id: Unique identifier for the query to be answered 
-        :type pre_checkout_query_id: :obj:`int`
-
-        :param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.
-        :type ok: :obj:`bool`
-
-        :param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout
-            (e.g. "Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different
-            color or garment!"). Telegram will display this message to the user.
-        :type error_message: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.answer_pre_checkout_query(self.token, pre_checkout_query_id, ok, error_message)
-
-    def edit_message_caption(
-            self, caption: str, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit captions of messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagecaption
-
-        :param caption: New caption of the message
-        :type caption: :obj:`str`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified.
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if inline_message_id is not specified. Identifier of the inline message.
-        :type inline_message_id: :obj:`str`
-
-        :param parse_mode: New caption of the message, 0-1024 characters after entities parsing
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized array of objects that describe how the caption should be parsed.
-        :type caption_entities: :obj:`list` of :obj:`types.MessageEntity`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` | :obj:`bool`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-
-        result = apihelper.edit_message_caption(self.token, caption, chat_id, message_id, inline_message_id,
-                                                parse_mode, caption_entities, reply_markup)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    def reply_to(self, message: types.Message, text: str, **kwargs) -> types.Message:
-        """
-        Convenience function for `send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)`
-        
-        :param message: Instance of :class:`telebot.types.Message`
-        :type message: :obj:`types.Message`
-
-        :param text: Text of the message.
-        :type text: :obj:`str`
-
-        :param kwargs: Additional keyword arguments which are passed to :meth:`telebot.TeleBot.send_message`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        return self.send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)
-
-    def answer_inline_query(
-            self, inline_query_id: str, 
-            results: List[Any], 
-            cache_time: Optional[int]=None, 
-            is_personal: Optional[bool]=None, 
-            next_offset: Optional[str]=None,
-            switch_pm_text: Optional[str]=None, 
-            switch_pm_parameter: Optional[str]=None) -> bool:
-        """
-        Use this method to send answers to an inline query. On success, True is returned.
-        No more than 50 results per query are allowed.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answerinlinequery
-
-        :param inline_query_id: Unique identifier for the answered query
-        :type inline_query_id: :obj:`str`
-
-        :param results: Array of results for the inline query
-        :type results: :obj:`list` of :obj:`types.InlineQueryResult`
-
-        :param cache_time: The maximum amount of time in seconds that the result of the inline query
-            may be cached on the server.
-        :type cache_time: :obj:`int`
-
-        :param is_personal: Pass True, if results may be cached on the server side only for
-            the user that sent the query.
-        :type is_personal: :obj:`bool`
-
-        :param next_offset: Pass the offset that a client should send in the next query with the same text
-            to receive more results.
-        :type next_offset: :obj:`str`
-
-        :param switch_pm_parameter: Deep-linking parameter for the /start message sent to the bot when user presses the switch button. 1-64 characters,
-            only A-Z, a-z, 0-9, _ and - are allowed.
-            Example: An inline bot that sends YouTube videos can ask the user to connect the bot to their YouTube account to adapt search results accordingly.
-            To do this, it displays a 'Connect your YouTube account' button above the results, or even before showing any. The user presses the button, switches to a
-            private chat with the bot and, in doing so, passes a start parameter that instructs the bot to return an OAuth link. Once done, the bot can offer a switch_inline
-            button so that the user can easily return to the chat where they wanted to use the bot's inline capabilities.
-        :type switch_pm_parameter: :obj:`str`
-
-        :param switch_pm_text: Parameter for the start message sent to the bot when user presses the switch button
-        :type switch_pm_text: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.answer_inline_query(self.token, inline_query_id, results, cache_time, is_personal, next_offset,
-                                             switch_pm_text, switch_pm_parameter)
-
-    def answer_callback_query(
-            self, callback_query_id: int, 
-            text: Optional[str]=None, show_alert: Optional[bool]=None, 
-            url: Optional[str]=None, cache_time: Optional[int]=None) -> bool:
-        """
-        Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to
-        the user as a notification at the top of the chat screen or as an alert.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answercallbackquery
-
-        :param callback_query_id: Unique identifier for the query to be answered
-        :type callback_query_id: :obj:`int`
-
-        :param text: Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters
-        :type text: :obj:`str`
-
-        :param show_alert: If True, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.
-        :type show_alert: :obj:`bool`
-
-        :param url: URL that will be opened by the user's client. If you have created a Game and accepted the conditions via @BotFather, specify the URL that opens your
-            game - note that this will only work if the query comes from a callback_game button.
-        :type url: :obj:`str`
-
-        :param cache_time: The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching
-            starting in version 3.14. Defaults to 0.
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.answer_callback_query(self.token, callback_query_id, text, show_alert, url, cache_time)
-
-    def set_sticker_set_thumb(
-            self, name: str, user_id: int, thumb: Union[Any, str]=None):
-        """
-        Use this method to set the thumbnail of a sticker set. 
-        Animated thumbnails can be set for animated sticker sets only. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumb
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int`
-
-        :param thumb:
-        :type thumb: :obj:`filelike object`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_sticker_set_thumb(self.token, name, user_id, thumb)
-
-    def get_sticker_set(self, name: str) -> types.StickerSet:
-        """
-        Use this method to get a sticker set. On success, a StickerSet object is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#getstickerset
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :return: On success, a StickerSet object is returned.
-        :rtype: :class:`telebot.types.StickerSet`
-        """
-        result = apihelper.get_sticker_set(self.token, name)
-        return types.StickerSet.de_json(result)
-
-    def get_custom_emoji_stickers(self, custom_emoji_ids: List[str]) -> List[types.Sticker]:
-        """
-        Use this method to get information about custom emoji stickers by their identifiers.
-        Returns an Array of Sticker objects.
-
-        :param custom_emoji_ids: List of custom emoji identifiers. At most 200 custom emoji identifiers can be specified.
-        :type custom_emoji_ids: :obj:`list` of :obj:`str`
-
-        :return: Returns an Array of Sticker objects.
-        :rtype: :obj:`list` of :class:`telebot.types.Sticker`
-        """
-        result = apihelper.get_custom_emoji_stickers(self.token, custom_emoji_ids)
-        return [types.Sticker.de_json(sticker) for sticker in result]
-
-    def upload_sticker_file(self, user_id: int, png_sticker: Union[Any, str]) -> types.File:
-        """
-        Use this method to upload a .png file with a sticker for later use in createNewStickerSet and addStickerToSet
-        methods (can be used multiple times). Returns the uploaded File on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#uploadstickerfile
-
-        :param user_id: User identifier of sticker set owner
-        :type user_id: :obj:`int`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px,
-            and either width or height must be exactly 512px.
-        :type png_sticker: :obj:`filelike object`
-
-        :return: On success, the sent file is returned.
-        :rtype: :class:`telebot.types.File`
-        """
-        result = apihelper.upload_sticker_file(self.token, user_id, png_sticker)
-        return types.File.de_json(result)
-
-    def create_new_sticker_set(
-            self, user_id: int, name: str, title: str, 
-            emojis: str, 
-            png_sticker: Union[Any, str]=None, 
-            tgs_sticker: Union[Any, str]=None, 
-            webm_sticker: Union[Any, str]=None,
-            contains_masks: Optional[bool]=None,
-            sticker_type: Optional[str]=None,
-            mask_position: Optional[types.MaskPosition]=None) -> bool:
-        """
-        Use this method to create new sticker set owned by a user. 
-        The bot will be able to edit the created sticker set.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createnewstickerset
-
-        :param user_id: User identifier of created sticker set owner
-        :type user_id: :obj:`int`
-
-        :param name: Short name of sticker set, to be used in t.me/addstickers/ URLs (e.g., animals). Can contain only English letters,
-            digits and underscores. Must begin with a letter, can't contain consecutive underscores and must end in "_by_<bot_username>".
-            <bot_username> is case insensitive. 1-64 characters.
-        :type name: :obj:`str`
-
-        :param title: Sticker set title, 1-64 characters
-        :type title: :obj:`str`
-
-        :param emojis: One or more emoji corresponding to the sticker
-        :type emojis: :obj:`str`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either width
-            or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers, pass an HTTP URL
-            as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type png_sticker: :obj:`str`
-
-        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
-        :type tgs_sticker: :obj:`str`
-
-        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
-        :type webm_sticker: :obj:`str`
-
-        :param contains_masks: Pass True, if a set of mask stickers should be created. Deprecated since Bot API 6.2,
-            use sticker_type instead.
-        :type contains_masks: :obj:`bool`
-
-        :param sticker_type: Optional, Type of stickers in the set, pass “regular” or “mask”. Custom emoji sticker sets can't be created
-            via the Bot API at the moment. By default, a regular sticker set is created.
-        :type sticker_type: :obj:`str`
-
-        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
-        :type mask_position: :class:`telebot.types.MaskPosition`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        if contains_masks is not None:
-            logger.warning('The parameter "contains_masks" is deprecated, use "sticker_type" instead')
-            if sticker_type is None:
-               sticker_type = 'mask' if contains_masks else 'regular'
-
-        return apihelper.create_new_sticker_set(
-            self.token, user_id, name, title, emojis, png_sticker, tgs_sticker, 
-            mask_position, webm_sticker, sticker_type)
-
-    def add_sticker_to_set(
-            self, user_id: int, name: str, emojis: str,
-            png_sticker: Optional[Union[Any, str]]=None, 
-            tgs_sticker: Optional[Union[Any, str]]=None,  
-            webm_sticker: Optional[Union[Any, str]]=None,
-            mask_position: Optional[types.MaskPosition]=None) -> bool:
-        """
-        Use this method to add a new sticker to a set created by the bot. 
-        It's required to pass `png_sticker` or `tgs_sticker`.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#addstickertoset
-
-        :param user_id: User identifier of created sticker set owner
-        :type user_id: :obj:`int`
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :param emojis: One or more emoji corresponding to the sticker
-        :type emojis: :obj:`str`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either
-            width or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers,
-            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type png_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
-        :type tgs_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
-        :type webm_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
-        :type mask_position: :class:`telebot.types.MaskPosition`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.add_sticker_to_set(
-            self.token, user_id, name, emojis, png_sticker, tgs_sticker, mask_position, webm_sticker)
-
-    def set_sticker_position_in_set(self, sticker: str, position: int) -> bool:
-        """
-        Use this method to move a sticker in a set created by the bot to a specific position . Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#setstickerpositioninset
-
-        :param sticker: File identifier of the sticker
-        :type sticker: :obj:`str`
-
-        :param position: New sticker position in the set, zero-based
-        :type position: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.set_sticker_position_in_set(self.token, sticker, position)
-
-    def delete_sticker_from_set(self, sticker: str) -> bool:
-        """
-        Use this method to delete a sticker from a set created by the bot. Returns True on success.
-       
-        Telegram documentation: https://core.telegram.org/bots/api#deletestickerfromset
-
-        :param sticker: File identifier of the sticker
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_sticker_from_set(self.token, sticker)
-
-    def create_forum_topic(self,
-            chat_id: int, name: str, icon_color: Optional[int]=None,
-            icon_custom_emoji_id: Optional[str]=None) -> types.ForumTopic:
-        """
-        Use this method to create a topic in a forum supergroup chat. The bot must be an administrator
-        in the chat for this to work and must have the can_manage_topics administrator rights.
-        Returns information about the created topic as a ForumTopic object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Name of the topic, 1-128 characters
-        :type name: :obj:`str`
-
-        :param icon_color: Color of the topic icon in RGB format. Currently, must be one of 0x6FB9F0, 0xFFD67E, 0xCB86DB, 0x8EEE98, 0xFF93B2, or 0xFB6F5F
-        :type icon_color: :obj:`int`
-
-        :param icon_custom_emoji_id: Custom emoji for the topic icon. Must be an emoji of type “tgs” and must be exactly 1 character long
-        :type icon_custom_emoji_id: :obj:`str`
-
-        :return: On success, information about the created topic is returned as a ForumTopic object.
-        :rtype: :class:`telebot.types.ForumTopic`
-        """
-        return types.ForumTopic.de_json(
-            apihelper.create_forum_topic(self.token, chat_id, name, icon_color, icon_custom_emoji_id)
-        )
-
-    def edit_forum_topic(
-            self, chat_id: Union[int, str],
-            message_thread_id: int, name: str,
-            icon_custom_emoji_id: str,
-        ) -> bool:
-        """
-        Use this method to edit name and icon of a topic in a forum supergroup chat. The bot must be an
-        administrator in the chat for this to work and must have can_manage_topics administrator rights,
-        unless it is the creator of the topic. Returns True on success.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#editforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to edit
-        :type message_thread_id: :obj:`int`
-
-        :param name: New name of the topic, 1-128 characters
-        :type name: :obj:`str`
-
-        :param icon_custom_emoji_id: New custom emoji for the topic icon. Must be an emoji of type “tgs” and must be exactly 1 character long
-        :type icon_custom_emoji_id: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.edit_forum_topic(self.token, chat_id, message_thread_id, name, icon_custom_emoji_id)
-
-    def close_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to close an open topic in a forum supergroup chat. The bot must be an administrator
-        in the chat for this to work and must have the can_manage_topics administrator rights, unless it is
-        the creator of the topic. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#closeforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to close
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.close_forum_topic(self.token, chat_id, message_thread_id)
-
-    def reopen_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to reopen a closed topic in a forum supergroup chat. The bot must be an administrator in the chat
-        for this to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#reopenforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to reopen
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.reopen_forum_topic(self.token, chat_id, message_thread_id)
-
-    def delete_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to delete a topic in a forum supergroup chat. The bot must be an administrator in the chat for this
-        to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic. Returns True
-        on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deleteforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to delete
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.delete_forum_topic(self.token, chat_id, message_thread_id)
-
-    def unpin_all_forum_topic_messages(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to clear the list of pinned messages in a forum topic. The bot must be an administrator in the
-        chat for this to work and must have the can_pin_messages administrator right in the supergroup.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinallforumtopicmessages
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return apihelper.unpin_all_forum_topic_messages(self.token, chat_id, message_thread_id)
-
-    def get_forum_topic_icon_stickers(self) -> List[types.Sticker]:
-        """
-        Use this method to get custom emoji stickers, which can be used as a forum topic icon by any user.
-        Requires no parameters. Returns an Array of Sticker objects.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getforumtopiciconstickers
-
-        :return: On success, a list of StickerSet objects is returned.
-        :rtype: List[:class:`telebot.types.StickerSet`]
-        """
-        return apihelper.get_forum_topic_icon_stickers(self.token)
-
-    def answer_web_app_query(self, web_app_query_id: str, result: types.InlineQueryResultBase) -> types.SentWebAppMessage:
-        """
-        Use this method to set the result of an interaction with a Web App and
-        send a corresponding message on behalf of the user to the chat from which
-        the query originated. 
-        On success, a SentWebAppMessage object is returned.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#answerwebappquery
-
-        :param web_app_query_id: Unique identifier for the query to be answered
-        :type web_app_query_id: :obj:`str`
-
-        :param result: A JSON-serialized object describing the message to be sent
-        :type result: :class:`telebot.types.InlineQueryResultBase`
-
-        :return: On success, a SentWebAppMessage object is returned.
-        :rtype: :class:`telebot.types.SentWebAppMessage`
-        """
-        return apihelper.answer_web_app_query(self.token, web_app_query_id, result)
-
-    def register_for_reply(self, message: types.Message, callback: Callable, *args, **kwargs) -> None:
-        """
-        Registers a callback function to be notified when a reply to `message` arrives.
-
-        Warning: In case `callback` as lambda function, saving reply handlers will not work.
-
-        :param message: The message for which we are awaiting a reply.
-        :type message: :class:`telebot.types.Message`
-
-        :param callback: The callback function to be called when a reply arrives. Must accept one `message`
-            parameter, which will contain the replied message.
-        :type callback: :obj:`Callable[[telebot.types.Message], None]`
-
-        :param args: Optional arguments for the callback function.
-        :param kwargs: Optional keyword arguments for the callback function.
-        
-        :return: None
-        """
-        message_id = message.message_id
-        self.register_for_reply_by_message_id(message_id, callback, *args, **kwargs)
-
-    def register_for_reply_by_message_id(
-            self, message_id: int, callback: Callable, *args, **kwargs) -> None:
-        """
-        Registers a callback function to be notified when a reply to `message` arrives.
-
-        Warning: In case `callback` as lambda function, saving reply handlers will not work.
-
-        :param message_id: The id of the message for which we are awaiting a reply.
-        :type message_id: :obj:`int`
-
-        :param callback: The callback function to be called when a reply arrives. Must accept one `message`
-            parameter, which will contain the replied message.
-        :type callback: :obj:`Callable[[telebot.types.Message], None]`
-
-        :param args: Optional arguments for the callback function.
-        :param kwargs: Optional keyword arguments for the callback function.
-
-        :return: None
-        """
-        self.reply_backend.register_handler(message_id, Handler(callback, *args, **kwargs))
-
-    def _notify_reply_handlers(self, new_messages) -> None:
-        """
-        Notify handlers of the answers
-
-        :param new_messages:
-        :return:
-        """
-        for message in new_messages:
-            if hasattr(message, "reply_to_message") and message.reply_to_message is not None:
-                handlers = self.reply_backend.get_handlers(message.reply_to_message.message_id)
-                if handlers:
-                    for handler in handlers:
-                        self._exec_task(handler["callback"], message, *handler["args"], **handler["kwargs"])
-
-    def register_next_step_handler(self, message: types.Message, callback: Callable, *args, **kwargs) -> None:
-        """
-        Registers a callback function to be notified when new message arrives after `message`.
-
-        Warning: In case `callback` as lambda function, saving next step handlers will not work.
-
-        :param message: The message for which we want to handle new message in the same chat.
-        :type message: :class:`telebot.types.Message`
-
-        :param callback: The callback function which next new message arrives.
-        :type callback: :obj:`Callable[[telebot.types.Message], None]`
-
-        :param args: Args to pass in callback func
-
-        :param kwargs: Args to pass in callback func
-
-        :return: None
-        """
-        chat_id = message.chat.id
-        self.register_next_step_handler_by_chat_id(chat_id, callback, *args, **kwargs)
-
-    def setup_middleware(self, middleware: BaseMiddleware):
-        """
-        Registers class-based middleware.
-
-        :param middleware: Subclass of :class:`telebot.handler_backends.BaseMiddleware`
-        :type middleware: :class:`telebot.handler_backends.BaseMiddleware`
-        :return: None
-        """
-        if not self.use_class_middlewares:
-            logger.error('Class-based middlewares are not enabled. Pass use_class_middlewares=True to enable it.')
-            return
-
-        if not hasattr(middleware, 'update_types'):
-            logger.error('Middleware has no update_types parameter. Please add list of updates to handle.')
-            return
-
-        if not hasattr(middleware, 'update_sensitive'):
-            logger.warning('Middleware has no update_sensitive parameter. Parameter was set to False.')
-            middleware.update_sensitive = False
-
-        self.middlewares.append(middleware)
-
-    def set_state(self, user_id: int, state: Union[int, str, State], chat_id: Optional[int]=None) -> None:
-        """
-        Sets a new state of a user.
-
-        .. note::
-
-            You should set both user id and chat id in order to set state for a user in a chat.
-            Otherwise, if you only set user_id, chat_id will equal to user_id, this means that
-            state will be set for the user in his private chat with a bot.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param state: new state. can be string, integer, or :class:`telebot.types.State`
-        :type state: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if chat_id is None:
-            chat_id = user_id
-        self.current_states.set_state(chat_id, user_id, state)
-
-    def reset_data(self, user_id: int, chat_id: Optional[int]=None):
-        """
-        Reset data for a user in chat.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if chat_id is None:
-            chat_id = user_id
-        self.current_states.reset_data(chat_id, user_id)
-
-    def delete_state(self, user_id: int, chat_id: Optional[int]=None) -> None:
-        """
-        Delete the current state of a user.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-        
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if chat_id is None:
-            chat_id = user_id
-        self.current_states.delete_state(chat_id, user_id)
-
-    def retrieve_data(self, user_id: int, chat_id: Optional[int]=None) -> Optional[Any]:
-        """
-        Returns context manager with data for a user in chat.
-
-        :param user_id: User identifier
-        :type user_id: int
-
-        :param chat_id: Chat's unique identifier, defaults to user_id
-        :type chat_id: int, optional
-
-        :return: Context manager with data for a user in chat
-        :rtype: Optional[Any]
-        """
-        if chat_id is None:
-            chat_id = user_id
-        return self.current_states.get_interactive_data(chat_id, user_id)
-
-    def get_state(self, user_id: int, chat_id: Optional[int]=None) -> Optional[Union[int, str, State]]:
-        """
-        Gets current state of a user.
-        Not recommended to use this method. But it is ok for debugging.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: state of a user
-        :rtype: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
-        """
-        if chat_id is None:
-            chat_id = user_id
-        return self.current_states.get_state(chat_id, user_id)
-
-    def add_data(self, user_id: int, chat_id: Optional[int]=None, **kwargs):
-        """
-        Add data to states.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :param kwargs: Data to add
-        :return: None
-        """
-        if chat_id is None:
-            chat_id = user_id
-        for key, value in kwargs.items():
-            self.current_states.set_data(chat_id, user_id, key, value)
-
-    def register_next_step_handler_by_chat_id(
-            self, chat_id: Union[int, str], callback: Callable, *args, **kwargs) -> None:
-        """
-        Registers a callback function to be notified when new message arrives after `message`.
-
-        Warning: In case `callback` as lambda function, saving next step handlers will not work.
-
-        :param chat_id: The chat for which we want to handle new message.
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param callback: The callback function which next new message arrives.
-        :type callback: :obj:`Callable[[telebot.types.Message], None]`
-
-        :param args: Args to pass in callback func
-        
-        :param kwargs: Args to pass in callback func
-
-        :return: None
-        """
-        self.next_step_backend.register_handler(chat_id, Handler(callback, *args, **kwargs))
-
-    def clear_step_handler(self, message: types.Message) -> None:
-        """
-        Clears all callback functions registered by register_next_step_handler().
-
-        :param message: The message for which we want to handle new message after that in same chat.
-        :type message: :class:`telebot.types.Message`
-
-        :return: None
-        """
-        chat_id = message.chat.id
-        self.clear_step_handler_by_chat_id(chat_id)
-
-    def clear_step_handler_by_chat_id(self, chat_id: Union[int, str]) -> None:
-        """
-        Clears all callback functions registered by register_next_step_handler().
-
-        :param chat_id: The chat for which we want to clear next step handlers
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: None
-        """
-        self.next_step_backend.clear_handlers(chat_id)
-
-    def clear_reply_handlers(self, message: types.Message) -> None:
-        """
-        Clears all callback functions registered by register_for_reply() and register_for_reply_by_message_id().
-
-        :param message: The message for which we want to clear reply handlers
-        :type message: :class:`telebot.types.Message`
-
-        :return: None
-        """
-        message_id = message.message_id
-        self.clear_reply_handlers_by_message_id(message_id)
-
-    def clear_reply_handlers_by_message_id(self, message_id: int) -> None:
-        """
-        Clears all callback functions registered by register_for_reply() and register_for_reply_by_message_id().
-
-        :param message_id: The message id for which we want to clear reply handlers
-        :type message_id: :obj:`int`
-
-        :return: None
-        """
-        self.reply_backend.clear_handlers(message_id)
-
-    def _notify_next_handlers(self, new_messages):
-        """
-        Description: TBD
-
-        :param new_messages:
-        :return:
-        """
-        for i, message in enumerate(new_messages):
-            need_pop = False
-            handlers = self.next_step_backend.get_handlers(message.chat.id)
-            if handlers:
-                for handler in handlers:
-                    need_pop = True
-                    self._exec_task(handler["callback"], message, *handler["args"], **handler["kwargs"])
-            if need_pop:
-                # removing message that was detected with next_step_handler
-                new_messages.pop(i)
-
-    @staticmethod
-    def _build_handler_dict(handler, pass_bot=False, **filters):
-        """
-        Builds a dictionary for a handler
-
-        :param handler:
-        :param filters:
-        :return:
-        """
-        return {
-            'function': handler,
-            'pass_bot': pass_bot,
-            'filters': {ftype: fvalue for ftype, fvalue in filters.items() if fvalue is not None}
-            # Remove None values, they are skipped in _test_filter anyway
-            #'filters': filters
-        }
-
-    def middleware_handler(self, update_types: Optional[List[str]]=None):
-        """
-        Function-based middleware handler decorator.
-
-        This decorator can be used to decorate functions that must be handled as middlewares before entering any other
-        message handlers
-        But, be careful and check type of the update inside the handler if more than one update_type is given
-
-        Example:
-
-        .. code-block:: python3
-            :caption: Usage of middleware_handler
-
-            bot = TeleBot('TOKEN')
-
-            # Print post message text before entering to any post_channel handlers
-            @bot.middleware_handler(update_types=['channel_post', 'edited_channel_post'])
-            def print_channel_post_text(bot_instance, channel_post):
-                print(channel_post.text)
-
-            # Print update id before entering to any handlers
-            @bot.middleware_handler()
-            def print_channel_post_text(bot_instance, update):
-                print(update.update_id)
-
-        :param update_types: Optional list of update types that can be passed into the middleware handler.
-        :type update_types: :obj:`list` of :obj:`str`
-
-        :return: function
-        """
-        def decorator(handler):
-            self.add_middleware_handler(handler, update_types)
-            return handler
-
-        return decorator
-
-    def add_middleware_handler(self, handler, update_types=None):
-        """
-        Add middleware handler.
-
-        :meta private:
-
-        :param handler:
-        :param update_types:
-        :return:
-        """
-        if not apihelper.ENABLE_MIDDLEWARE:
-            raise RuntimeError("Middleware is not enabled. Use apihelper.ENABLE_MIDDLEWARE before initialising TeleBot.")
-
-        if self.use_class_middlewares:
-            logger.error("middleware_handler/register_middleware_handler/add_middleware_handler cannot be used with use_class_middlewares=True. Skipped.")
-            return
-
-        added = False
-        if update_types and self.typed_middleware_handlers:
-            for update_type in update_types:
-                if update_type in self.typed_middleware_handlers:
-                    added = True
-                    self.typed_middleware_handlers[update_type].append(handler)
-        if not added:
-            self.default_middleware_handlers.append(handler)
-
-    # function register_middleware_handler
-    def register_middleware_handler(self, callback, update_types=None):
-        """
-        Adds function-based middleware handler.
-
-        This function will register your decorator function. Function-based middlewares are executed before handlers.
-        But, be careful and check type of the update inside the handler if more than one update_type is given
-
-        Example:
-
-        bot = TeleBot('TOKEN')
-
-        bot.register_middleware_handler(print_channel_post_text, update_types=['channel_post', 'edited_channel_post'])
- 
-        :param callback: Function that will be used as a middleware handler.
-        :type callback: :obj:`function`
-
-        :param update_types: Optional list of update types that can be passed into the middleware handler.
-        :type update_types: :obj:`list` of :obj:`str`
-
-        :return: None
-        """
-        self.add_middleware_handler(callback, update_types)
-
-    @staticmethod
-    def check_commands_input(commands, method_name):
-        """
-        :meta private:
-        """
-        if not isinstance(commands, list) or not all(isinstance(item, str) for item in commands):
-            logger.error(f"{method_name}: Commands filter should be list of strings (commands), unknown type supplied to the 'commands' filter list. Not able to use the supplied type.")
-
-    @staticmethod
-    def check_regexp_input(regexp, method_name):
-        """
-        :meta private:
-        """
-        if not isinstance(regexp, str):
-            logger.error(f"{method_name}: Regexp filter should be string. Not able to use the supplied type.")
-
-    def message_handler(
-            self,
-            commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None,
-            func: Optional[Callable]=None,
-            content_types: Optional[List[str]]=None,
-            chat_types: Optional[List[str]]=None,
-            **kwargs):
-        """
-        Handles New incoming message of any kind - text, photo, sticker, etc.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-        All message handlers are tested in the order they were added.
-
-        Example:
-
-        .. code-block:: python3
-            :caption: Usage of message_handler
-
-            bot = TeleBot('TOKEN')
-
-            # Handles all messages which text matches regexp.
-            @bot.message_handler(regexp='someregexp')
-            def command_help(message):
-                bot.send_message(message.chat.id, 'Did someone call for help?')
-
-            # Handles messages in private chat
-            @bot.message_handler(chat_types=['private']) # You can add more chat types
-            def command_help(message):
-                bot.send_message(message.chat.id, 'Private chat detected, sir!')
-
-            # Handle all sent documents of type 'text/plain'.
-            @bot.message_handler(func=lambda message: message.document.mime_type == 'text/plain',
-                content_types=['document'])
-            def command_handle_document(message):
-                bot.send_message(message.chat.id, 'Document received, sir!')
-
-            # Handle all other messages.
-            @bot.message_handler(func=lambda message: True, content_types=['audio', 'photo', 'voice', 'video', 'document',
-                'text', 'location', 'contact', 'sticker'])
-            def default_command(message):
-                bot.send_message(message.chat.id, "This is the default command handler.")
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Optional lambda function. The lambda receives the message to test as the first parameter.
-            It must return True if the command should handle the message.
-        :type func: :obj:`lambda`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param chat_types: list of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        method_name = "message_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    chat_types=chat_types,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_message_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_message_handler(self, handler_dict):
-        """
-        Adds a message handler
-        Note that you should use register_message_handler to add message_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.message_handlers.append(handler_dict)
-
-    def register_message_handler(self, callback: Callable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp:
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param chat_types: List of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        method_name = "register_message_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("register_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        
-
-        handler_dict = self._build_handler_dict(callback,
-                                                chat_types=chat_types,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_message_handler(handler_dict)
-
-    def edited_message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
-        """
-        Handles new version of a message that is known to the bot and was edited.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param chat_types: list of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        method_name = "edited_message_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    chat_types=chat_types,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_edited_message_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_edited_message_handler(self, handler_dict):
-        """
-        Adds the edit message handler
-        Note that you should use register_edited_message_handler to add edited_message_handler to the bot.
-        
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.edited_message_handlers.append(handler_dict)
-
-    def register_edited_message_handler(self, callback: Callable, content_types: Optional[List[str]]=None,
-        commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None,
-        chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers edited message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param chat_types: True for private chat
-        :type chat_types: :obj:`bool`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        method_name = "register_edited_message_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("register_edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                chat_types=chat_types,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_edited_message_handler(handler_dict)
-
-    def channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
-        """
-        Handles new incoming channel post of any kind - text, photo, sticker, etc.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        method_name = "channel_post_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_channel_post_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_channel_post_handler(self, handler_dict):
-        """
-        Adds channel post handler
-        Note that you should use register_channel_post_handler to add channel_post_handler to the bot.
-
-        :meta private:
-        
-        :param handler_dict:
-        :return:
-        """
-        self.channel_post_handlers.append(handler_dict)
-    
-    def register_channel_post_handler(self, callback: Callable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers channel post message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        method_name = "register_channel_post_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("register_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_channel_post_handler(handler_dict)
-
-    def edited_channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
-        """
-        Handles new version of a channel post that is known to the bot and was edited.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return:
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        method_name = "edited_channel_post_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_edited_channel_post_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_edited_channel_post_handler(self, handler_dict):
-        """
-        Adds the edit channel post handler
-        Note that you should use register_edited_channel_post_handler to add edited_channel_post_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.edited_channel_post_handlers.append(handler_dict)
-
-    def register_edited_channel_post_handler(self, callback: Callable, content_types: Optional[List[str]]=None,
-            commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers edited channel post message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        method_name = "register_edited_channel_post_handler"
-
-        if commands is not None:
-            self.check_commands_input(commands, method_name)
-            if isinstance(commands, str):
-                commands = [commands]
-
-        if regexp is not None:
-            self.check_regexp_input(regexp, method_name)
-
-        if isinstance(content_types, str):
-            logger.warning("register_edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_edited_channel_post_handler(handler_dict)
-
-    def inline_handler(self, func, **kwargs):
-        """
-        Handles new incoming inline query.
-        As a parameter to the decorator function, it passes :class:`telebot.types.InlineQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_inline_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_inline_handler(self, handler_dict):
-        """
-        Adds inline call handler
-        Note that you should use register_inline_handler to add inline_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.inline_handlers.append(handler_dict)
-
-    def register_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers inline handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_inline_handler(handler_dict)
-
-    def chosen_inline_handler(self, func, **kwargs):
-        """
-        Handles the result of an inline query that was chosen by a user and sent to their chat partner.
-        Please see our documentation on the feedback collecting for details on how to enable these updates for your bot.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChosenInlineResult` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-        
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chosen_inline_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chosen_inline_handler(self, handler_dict):
-        """
-        Description: TBD
-        Note that you should use register_chosen_inline_handler to add chosen_inline_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chosen_inline_handlers.append(handler_dict)
-
-    def register_chosen_inline_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers chosen inline handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chosen_inline_handler(handler_dict)
-
-    def callback_query_handler(self, func, **kwargs):
-        """
-        Handles new incoming callback query.
-        As a parameter to the decorator function, it passes :class:`telebot.types.CallbackQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_callback_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_callback_query_handler(self, handler_dict):
-        """
-        Adds a callback request handler
-        Note that you should use register_callback_query_handler to add callback_query_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.callback_query_handlers.append(handler_dict)
-
-    def register_callback_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers callback query handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_callback_query_handler(handler_dict)
-
-    def shipping_query_handler(self, func, **kwargs):
-        """
-        Handles new incoming shipping query. Only for invoices with flexible price.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ShippingQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_shipping_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_shipping_query_handler(self, handler_dict):
-        """
-        Adds a shipping request handler.
-        Note that you should use register_shipping_query_handler to add shipping_query_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.shipping_query_handlers.append(handler_dict)
-
-    def register_shipping_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers shipping query handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_shipping_query_handler(handler_dict)
-
-    def pre_checkout_query_handler(self, func, **kwargs):
-        """
-        New incoming pre-checkout query. Contains full information about checkout.
-        As a parameter to the decorator function, it passes :class:`telebot.types.PreCheckoutQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_pre_checkout_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_pre_checkout_query_handler(self, handler_dict):
-        """
-        Adds a pre-checkout request handler
-        Note that you should use register_pre_checkout_query_handler to add pre_checkout_query_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.pre_checkout_query_handlers.append(handler_dict)
-    
-    def register_pre_checkout_query_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers pre-checkout request handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_pre_checkout_query_handler(handler_dict)
-
-    def poll_handler(self, func, **kwargs):
-        """
-        Handles new state of a poll. Bots receive only updates about stopped polls and polls, which are sent by the bot
-        As a parameter to the decorator function, it passes :class:`telebot.types.Poll` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_poll_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_poll_handler(self, handler_dict):
-        """
-        Adds a poll request handler
-        Note that you should use register_poll_handler to add poll_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.poll_handlers.append(handler_dict)
-
-    def register_poll_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers poll handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_poll_handler(handler_dict)
-
-    def poll_answer_handler(self, func=None, **kwargs):
-        """
-        Handles change of user's answer in a non-anonymous poll(when user changes the vote).
-        Bots receive new votes only in polls that were sent by the bot itself.
-        As a parameter to the decorator function, it passes :class:`telebot.types.PollAnswer` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_poll_answer_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_poll_answer_handler(self, handler_dict):
-        """
-        Adds a poll_answer request handler.
-        Note that you should use register_poll_answer_handler to add poll_answer_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.poll_answer_handlers.append(handler_dict)
-
-    def register_poll_answer_handler(self, callback: Callable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers poll answer handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_poll_answer_handler(handler_dict)
-
-    def my_chat_member_handler(self, func=None, **kwargs):
-        """
-        Handles update in a status of a bot. For private chats,
-        this update is received only when the bot is blocked or unblocked by the user.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_my_chat_member_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_my_chat_member_handler(self, handler_dict):
-        """
-        Adds a my_chat_member handler.
-        Note that you should use register_my_chat_member_handler to add my_chat_member_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.my_chat_member_handlers.append(handler_dict)
-
-    def register_my_chat_member_handler(self, callback: Callable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers my chat member handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_my_chat_member_handler(handler_dict)
-
-    def chat_member_handler(self, func=None, **kwargs):
-        """
-        Handles update in a status of a user in a chat.
-        The bot must be an administrator in the chat and must explicitly specify “chat_member”
-        in the list of allowed_updates to receive these updates.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chat_member_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chat_member_handler(self, handler_dict):
-        """
-        Adds a chat_member handler.
-        Note that you should use register_chat_member_handler to add chat_member_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chat_member_handlers.append(handler_dict)
-
-    def register_chat_member_handler(self, callback: Callable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers chat member handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function``
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return:None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chat_member_handler(handler_dict)
-
-    def chat_join_request_handler(self, func=None, **kwargs):
-        """
-        Handles a request to join the chat has been sent. The bot must have the can_invite_users
-        administrator right in the chat to receive these updates.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatJoinRequest` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chat_join_request_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chat_join_request_handler(self, handler_dict):
-        """
-        Adds a chat_join_request handler.
-        Note that you should use register_chat_join_request_handler to add chat_join_request_handler to the bot.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chat_join_request_handlers.append(handler_dict)
-
-    def register_chat_join_request_handler(self, callback: Callable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
-        """
-        Registers chat join request handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`function`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chat_join_request_handler(handler_dict)
-
-    def _test_message_handler(self, message_handler, message):
-        """
-        Test message handler
-
-        :param message_handler:
-        :param message:
-        :return:
-        """
-        for message_filter, filter_value in message_handler['filters'].items():
-            if filter_value is None:
-                continue
-
-            if not self._test_filter(message_filter, filter_value, message):
-                return False
-
-        return True
-
-    def add_custom_filter(self, custom_filter: Union[SimpleCustomFilter, AdvancedCustomFilter]):
-        """
-        Create custom filter.
-
-        .. code-block:: python3
-            :caption: Example on checking the text of a message
-
-            class TextMatchFilter(AdvancedCustomFilter):
-                key = 'text'
-
-                def check(self, message, text):
-                    return text == message.text
-
-        :param custom_filter: Class with check(message) method.
-        :param custom_filter: Custom filter class with key.
-        """
-        self.custom_filters[custom_filter.key] = custom_filter
-
-    def _test_filter(self, message_filter, filter_value, message):
-        """
-        Test filters
-
-        :param message_filter: Filter type passed in handler
-        :param filter_value: Filter value passed in handler
-        :param message: Message to test
-        :return: True if filter conforms
-        """
-        if message_filter == 'content_types':
-            return message.content_type in filter_value
-        elif message_filter == 'regexp':
-            return message.content_type == 'text' and re.search(filter_value, message.text, re.IGNORECASE)
-        elif message_filter == 'commands':
-            return message.content_type == 'text' and util.extract_command(message.text) in filter_value
-        elif message_filter == 'chat_types':
-            return message.chat.type in filter_value
-        elif message_filter == 'func':
-            return filter_value(message)
-        elif self.custom_filters and message_filter in self.custom_filters:
-            return self._check_filter(message_filter,filter_value,message)
-        else:
-            return False
-
-    def _check_filter(self, message_filter, filter_value, message):
-        filter_check = self.custom_filters.get(message_filter)
-        if not filter_check:
-            return False
-        elif isinstance(filter_check, SimpleCustomFilter):
-            return filter_value == filter_check.check(message)
-        elif isinstance(filter_check, AdvancedCustomFilter):
-            return filter_check.check(message, filter_value)
-        else:
-            logger.error("Custom filter: wrong type. Should be SimpleCustomFilter or AdvancedCustomFilter.")
-            return False
-
-    # middleware check-up method
-    def _get_middlewares(self, update_type):
-        """
-        Check middleware
-
-        :param update_type:
-        :return:
-        """
-        middlewares = None
-        if self.middlewares: 
-            middlewares = [i for i in self.middlewares if update_type in i.update_types]
-        return middlewares
-
-    def _run_middlewares_and_handler(self, message, handlers, middlewares, update_type):
-        """
-        This method is made to run handlers and middlewares in queue.
-
-        :param message: received message (update part) to process with handlers and/or middlewares
-        :param handlers: all created handlers (not filtered)
-        :param middlewares: middlewares that should be executed (already filtered)
-        :param update_type: handler/update type (Update field name)
-        :return:
-        """
-
-        if not self.use_class_middlewares:
-            if handlers:
-                for handler in handlers:
-                    if self._test_message_handler(handler, message):
-                        if handler.get('pass_bot', False):
-                            result = handler['function'](message, bot=self)
-                        else:
-                            result = handler['function'](message)
-                        if not isinstance(result, ContinueHandling):
-                            break
-            return
-
-        data = {}
-        handler_error = None
-        skip_handlers = False
-
-        if middlewares:
-            for middleware in middlewares:
-                if middleware.update_sensitive:
-                    if hasattr(middleware, f'pre_process_{update_type}'):
-                        result = getattr(middleware, f'pre_process_{update_type}')(message, data)
-                    else:
-                        logger.error('Middleware {} does not have pre_process_{} method. pre_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
-                        result = None
-                else:
-                    result = middleware.pre_process(message, data)
-                # We will break this loop if CancelUpdate is returned
-                # Also, we will not run other middlewares
-                if isinstance(result, CancelUpdate):
-                    return
-                elif isinstance(result, SkipHandler):
-                    skip_handlers = True
-
-        if handlers and not skip_handlers:
-            try:
-                for handler in handlers:
-                    params = []
-                    process_handler = self._test_message_handler(handler, message)
-                    if not process_handler: continue
-                    for i in inspect.signature(handler['function']).parameters:
-                        params.append(i)
-                    result = None
-                    if len(params) == 1:
-                        result = handler['function'](message)
-                    elif "data" in params:
-                        if len(params) == 2:
-                            result = handler['function'](message, data)
-                        elif len(params) == 3:
-                            result = handler['function'](message, data=data, bot=self)
-                        else:
-                            logger.error("It is not allowed to pass data and values inside data to the handler. Check your handler: {}".format(handler['function']))
-                            return
-                    else:
-                        data_copy = data.copy()
-                        for key in list(data_copy):
-                            # remove data from data_copy if handler does not accept it
-                            if key not in params:
-                                del data_copy[key]
-                        if handler.get('pass_bot'):
-                            data_copy["bot"] = self
-                        if len(data_copy) > len(params) - 1: # remove the message parameter
-                            logger.error("You are passing more parameters than the handler needs. Check your handler: {}".format(handler['function']))
-                            return
-                        result = handler["function"](message, **data_copy)
-                    if not isinstance(result, ContinueHandling):
-                        break
-            except Exception as e:
-                handler_error = e
-                if self.exception_handler:
-                    self.exception_handler.handle(e)
-                else:
-                    logger.error(str(e))
-                    logger.debug("Exception traceback:\n%s", traceback.format_exc())
-
-        if middlewares:
-            for middleware in middlewares:
-                if middleware.update_sensitive:
-                    if hasattr(middleware, f'post_process_{update_type}'):
-                        getattr(middleware, f'post_process_{update_type}')(message, data, handler_error)
-                    else:
-                        logger.error("Middleware: {} does not have post_process_{} method. Post process function was not executed.".format(middleware.__class__.__name__, update_type))
-                else:
-                    middleware.post_process(message, data, handler_error)
-
-    def _notify_command_handlers(self, handlers, new_messages, update_type):
-        """
-        Notifies command handlers.
-
-        :param handlers: all created handlers
-        :param new_messages: received messages to proceed
-        :param update_type: handler/update type (Update fields)
-        :return:
-        """
-        if not(handlers) and not(self.use_class_middlewares):
-            return
-
-        if self.use_class_middlewares:
-            middlewares = self._get_middlewares(update_type)
-        else:
-            middlewares = None
-        for message in new_messages:
-            self._exec_task(
-                self._run_middlewares_and_handler,
-                message,
-                handlers=handlers,
-                middlewares=middlewares,
-                update_type=update_type)
+# -*- coding: utf-8 -*-
+
+from io import IOBase
+import logging
+import os
+from pathlib import Path
+from typing import Dict, List, Optional, Union
+from abc import ABC
+
+try:
+    import ujson as json
+except ImportError:
+    import json
+
+from telebot import util
+
+DISABLE_KEYLEN_ERROR = False
+
+logger = logging.getLogger('TeleBot')
+
+
+class JsonSerializable(object):
+    """
+    Subclasses of this class are guaranteed to be able to be converted to JSON format.
+    All subclasses of this class must override to_json.
+
+    """
+
+    def to_json(self):
+        """
+        Returns a JSON string representation of this class.
+
+        :meta private:
+
+        This function must be overridden by subclasses.
+        :return: a JSON formatted string.
+        """
+        raise NotImplementedError
+
+
+class Dictionaryable(object):
+    """
+    Subclasses of this class are guaranteed to be able to be converted to dictionary.
+    All subclasses of this class must override to_dict.
+
+    """
+
+    def to_dict(self):
+        """
+        Returns a DICT with class field values
+
+        :meta private:
+
+        This function must be overridden by subclasses.
+        :return: a DICT
+        """
+        raise NotImplementedError
+
+
+class JsonDeserializable(object):
+    """
+    Subclasses of this class are guaranteed to be able to be created from a json-style dict or json formatted string.
+    All subclasses of this class must override de_json.
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        """
+        Returns an instance of this class from the given json dict or string.
+
+        :meta private:
+
+        This function must be overridden by subclasses.
+        :return: an instance of this class created from the given json dict or string.
+        """
+        raise NotImplementedError
+
+    @staticmethod
+    def check_json(json_type, dict_copy = True):
+        """
+        Checks whether json_type is a dict or a string. If it is already a dict, it is returned as-is.
+        If it is not, it is converted to a dict by means of json.loads(json_type)
+
+        :meta private:
+        
+        :param json_type: input json or parsed dict
+        :param dict_copy: if dict is passed and it is changed outside - should be True!
+        :return: Dictionary parsed from json or original dict
+        """
+        if util.is_dict(json_type):
+            return json_type.copy() if dict_copy else json_type
+        elif util.is_string(json_type):
+            return json.loads(json_type)
+        else:
+            raise ValueError("json_type should be a json dict or string.")
+
+    def __str__(self):
+        d = {
+            x: y.__dict__ if hasattr(y, '__dict__') else y
+            for x, y in self.__dict__.items()
+        }
+        return str(d)
+
+
+class Update(JsonDeserializable):
+    """
+    This object represents an incoming update.At most one of the optional parameters can be present in any given update.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#update
+
+    :param update_id: The update's unique identifier. Update identifiers start from a certain positive number and 
+        increase sequentially. This ID becomes especially handy if you're using webhooks, since it allows you to ignore 
+        repeated updates or to restore the correct update sequence, should they get out of order. If there are no new updates 
+        for at least a week, then identifier of the next update will be chosen randomly instead of sequentially.
+    :type update_id: :obj:`int`
+
+    :param message: Optional. New incoming message of any kind - text, photo, sticker, etc.
+    :type message: :class:`telebot.types.Message`
+
+    :param edited_message: Optional. New version of a message that is known to the bot and was edited
+    :type edited_message: :class:`telebot.types.Message`
+
+    :param channel_post: Optional. New incoming channel post of any kind - text, photo, sticker, etc.
+    :type channel_post: :class:`telebot.types.Message`
+
+    :param edited_channel_post: Optional. New version of a channel post that is known to the bot and was edited
+    :type edited_channel_post: :class:`telebot.types.Message`
+
+    :param inline_query: Optional. New incoming inline query
+    :type inline_query: :class:`telebot.types.InlineQuery`
+
+    :param chosen_inline_result: Optional. The result of an inline query that was chosen by a user and sent to their chat 
+        partner. Please see our documentation on the feedback collecting for details on how to enable these updates for your 
+        bot.
+    :type chosen_inline_result: :class:`telebot.types.ChosenInlineResult`
+
+    :param callback_query: Optional. New incoming callback query
+    :type callback_query: :class:`telebot.types.CallbackQuery`
+
+    :param shipping_query: Optional. New incoming shipping query. Only for invoices with flexible price
+    :type shipping_query: :class:`telebot.types.ShippingQuery`
+
+    :param pre_checkout_query: Optional. New incoming pre-checkout query. Contains full information about 
+        checkout
+    :type pre_checkout_query: :class:`telebot.types.PreCheckoutQuery`
+
+    :param poll: Optional. New poll state. Bots receive only updates about stopped polls and polls, which are sent by the 
+        bot
+    :type poll: :class:`telebot.types.Poll`
+
+    :param poll_answer: Optional. A user changed their answer in a non-anonymous poll. Bots receive new votes only in 
+        polls that were sent by the bot itself.
+    :type poll_answer: :class:`telebot.types.PollAnswer`
+
+    :param my_chat_member: Optional. The bot's chat member status was updated in a chat. For private chats, this update 
+        is received only when the bot is blocked or unblocked by the user.
+    :type my_chat_member: :class:`telebot.types.ChatMemberUpdated`
+
+    :param chat_member: Optional. A chat member's status was updated in a chat. The bot must be an administrator in the 
+        chat and must explicitly specify “chat_member” in the list of allowed_updates to receive these updates.
+    :type chat_member: :class:`telebot.types.ChatMemberUpdated`
+
+    :param chat_join_request: Optional. A request to join the chat has been sent. The bot must have the 
+        can_invite_users administrator right in the chat to receive these updates.
+    :type chat_join_request: :class:`telebot.types.ChatJoinRequest`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Update`
+
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        update_id = obj['update_id']
+        message = Message.de_json(obj.get('message'))
+        edited_message = Message.de_json(obj.get('edited_message'))
+        channel_post = Message.de_json(obj.get('channel_post'))
+        edited_channel_post = Message.de_json(obj.get('edited_channel_post'))
+        inline_query = InlineQuery.de_json(obj.get('inline_query'))
+        chosen_inline_result = ChosenInlineResult.de_json(obj.get('chosen_inline_result'))
+        callback_query = CallbackQuery.de_json(obj.get('callback_query'))
+        shipping_query = ShippingQuery.de_json(obj.get('shipping_query'))
+        pre_checkout_query = PreCheckoutQuery.de_json(obj.get('pre_checkout_query'))
+        poll = Poll.de_json(obj.get('poll'))
+        poll_answer = PollAnswer.de_json(obj.get('poll_answer'))
+        my_chat_member = ChatMemberUpdated.de_json(obj.get('my_chat_member'))
+        chat_member = ChatMemberUpdated.de_json(obj.get('chat_member'))
+        chat_join_request = ChatJoinRequest.de_json(obj.get('chat_join_request'))
+        return cls(update_id, message, edited_message, channel_post, edited_channel_post, inline_query,
+                   chosen_inline_result, callback_query, shipping_query, pre_checkout_query, poll, poll_answer,
+                   my_chat_member, chat_member, chat_join_request)
+
+    def __init__(self, update_id, message, edited_message, channel_post, edited_channel_post, inline_query,
+                 chosen_inline_result, callback_query, shipping_query, pre_checkout_query, poll, poll_answer,
+                 my_chat_member, chat_member, chat_join_request):
+        self.update_id = update_id
+        self.message = message
+        self.edited_message = edited_message
+        self.channel_post = channel_post
+        self.edited_channel_post = edited_channel_post
+        self.inline_query = inline_query
+        self.chosen_inline_result = chosen_inline_result
+        self.callback_query = callback_query
+        self.shipping_query = shipping_query
+        self.pre_checkout_query = pre_checkout_query
+        self.poll = poll
+        self.poll_answer = poll_answer
+        self.my_chat_member = my_chat_member
+        self.chat_member = chat_member
+        self.chat_join_request = chat_join_request
+
+
+class ChatMemberUpdated(JsonDeserializable):
+    """
+    This object represents changes in the status of a chat member.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberupdated
+
+    :param chat: Chat the user belongs to
+    :type chat: :class:`telebot.types.Chat`
+
+    :param from_user: Performer of the action, which resulted in the change
+    :type from_user: :class:`telebot.types.User`
+
+    :param date: Date the change was done in Unix time
+    :type date: :obj:`int`
+
+    :param old_chat_member: Previous information about the chat member
+    :type old_chat_member: :class:`telebot.types.ChatMember`
+
+    :param new_chat_member: New information about the chat member
+    :type new_chat_member: :class:`telebot.types.ChatMember`
+
+    :param invite_link: Optional. Chat invite link, which was used by the user to join the chat; for joining by invite 
+        link events only.
+    :type invite_link: :class:`telebot.types.ChatInviteLink`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberUpdated`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['chat'] = Chat.de_json(obj['chat'])
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        obj['old_chat_member'] = ChatMember.de_json(obj['old_chat_member'])
+        obj['new_chat_member'] = ChatMember.de_json(obj['new_chat_member'])
+        obj['invite_link'] = ChatInviteLink.de_json(obj.get('invite_link'))
+        return cls(**obj)
+    
+    def __init__(self, chat, from_user, date, old_chat_member, new_chat_member, invite_link=None, **kwargs):
+        self.chat: Chat = chat
+        self.from_user: User = from_user
+        self.date: int = date
+        self.old_chat_member: ChatMember = old_chat_member
+        self.new_chat_member: ChatMember = new_chat_member
+        self.invite_link: Optional[ChatInviteLink] = invite_link
+    
+    @property
+    def difference(self) -> Dict[str, List]:
+        """
+        Get the difference between `old_chat_member` and `new_chat_member`
+        as a dict in the following format {'parameter': [old_value, new_value]}
+        E.g {'status': ['member', 'kicked'], 'until_date': [None, 1625055092]}
+
+
+        :return: Dict of differences
+        :rtype: Dict[str, List]
+        """
+        old: Dict = self.old_chat_member.__dict__
+        new: Dict = self.new_chat_member.__dict__
+        dif = {}
+        for key in new:
+            if key == 'user': continue
+            if new[key] != old[key]:
+                dif[key] = [old[key], new[key]]
+        return dif
+    
+
+class ChatJoinRequest(JsonDeserializable):
+    """
+    Represents a join request sent to a chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatjoinrequest
+
+    :param chat: Chat to which the request was sent
+    :type chat: :class:`telebot.types.Chat`
+
+    :param from: User that sent the join request
+    :type from_user: :class:`telebot.types.User`
+
+    :param date: Date the request was sent in Unix time
+    :type date: :obj:`int`
+
+    :param bio: Optional. Bio of the user.
+    :type bio: :obj:`str`
+
+    :param invite_link: Optional. Chat invite link that was used by the user to send the join request
+    :type invite_link: :class:`telebot.types.ChatInviteLink`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatJoinRequest`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['chat'] = Chat.de_json(obj['chat'])
+        obj['from_user'] = User.de_json(obj['from'])
+        obj['invite_link'] = ChatInviteLink.de_json(obj.get('invite_link'))
+        return cls(**obj)
+    
+    def __init__(self, chat, from_user, date, bio=None, invite_link=None, **kwargs):
+        self.chat = chat
+        self.from_user = from_user
+        self.date = date
+        self.bio = bio
+        self.invite_link = invite_link
+
+class WebhookInfo(JsonDeserializable):
+    """
+    Describes the current status of a webhook.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#webhookinfo
+
+    :param url: Webhook URL, may be empty if webhook is not set up
+    :type url: :obj:`str`
+
+    :param has_custom_certificate: True, if a custom certificate was provided for webhook certificate checks
+    :type has_custom_certificate: :obj:`bool`
+
+    :param pending_update_count: Number of updates awaiting delivery
+    :type pending_update_count: :obj:`int`
+
+    :param ip_address: Optional. Currently used webhook IP address
+    :type ip_address: :obj:`str`
+
+    :param last_error_date: Optional. Unix time for the most recent error that happened when trying to deliver an 
+        update via webhook
+    :type last_error_date: :obj:`int`
+
+    :param last_error_message: Optional. Error message in human-readable format for the most recent error that 
+        happened when trying to deliver an update via webhook
+    :type last_error_message: :obj:`str`
+
+    :param last_synchronization_error_date: Optional. Unix time of the most recent error that happened when trying 
+        to synchronize available updates with Telegram datacenters
+    :type last_synchronization_error_date: :obj:`int`
+
+    :param max_connections: Optional. The maximum allowed number of simultaneous HTTPS connections to the webhook 
+        for update delivery
+    :type max_connections: :obj:`int`
+
+    :param allowed_updates: Optional. A list of update types the bot is subscribed to. Defaults to all update types 
+        except chat_member
+    :type allowed_updates: :obj:`list` of :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.WebhookInfo`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, url, has_custom_certificate, pending_update_count, ip_address=None, 
+                 last_error_date=None, last_error_message=None, last_synchronization_error_date=None,
+                 max_connections=None, allowed_updates=None, **kwargs):
+        self.url = url
+        self.has_custom_certificate = has_custom_certificate
+        self.pending_update_count = pending_update_count
+        self.ip_address = ip_address
+        self.last_error_date = last_error_date
+        self.last_error_message = last_error_message
+        self.last_synchronization_error_date = last_synchronization_error_date
+        self.max_connections = max_connections
+        self.allowed_updates = allowed_updates
+
+
+class User(JsonDeserializable, Dictionaryable, JsonSerializable):
+    """
+    This object represents a Telegram user or bot.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#user
+
+    :param id: Unique identifier for this user or bot. This number may have more than 32 significant bits and some 
+        programming languages may have difficulty/silent defects in interpreting it. But it has at most 52 significant 
+        bits, so a 64-bit integer or double-precision float type are safe for storing this identifier.
+    :type id: :obj:`int`
+
+    :param is_bot: True, if this user is a bot
+    :type is_bot: :obj:`bool`
+
+    :param first_name: User's or bot's first name
+    :type first_name: :obj:`str`
+
+    :param last_name: Optional. User's or bot's last name
+    :type last_name: :obj:`str`
+
+    :param username: Optional. User's or bot's username
+    :type username: :obj:`str`
+
+    :param language_code: Optional. IETF language tag of the user's language
+    :type language_code: :obj:`str`
+
+    :param is_premium: Optional. :obj:`bool`, if this user is a Telegram Premium user
+    :type is_premium: :obj:`bool`
+
+    :param added_to_attachment_menu: Optional. :obj:`bool`, if this user added the bot to the attachment menu
+    :type added_to_attachment_menu: :obj:`bool`
+
+    :param can_join_groups: Optional. True, if the bot can be invited to groups. Returned only in getMe.
+    :type can_join_groups: :obj:`bool`
+
+    :param can_read_all_group_messages: Optional. True, if privacy mode is disabled for the bot. Returned only in 
+        getMe.
+    :type can_read_all_group_messages: :obj:`bool`
+
+    :param supports_inline_queries: Optional. True, if the bot supports inline queries. Returned only in getMe.
+    :type supports_inline_queries: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.User`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, id, is_bot, first_name, last_name=None, username=None, language_code=None, 
+                 can_join_groups=None, can_read_all_group_messages=None, supports_inline_queries=None, 
+                 is_premium=None, added_to_attachment_menu=None, **kwargs):
+        self.id: int = id
+        self.is_bot: bool = is_bot
+        self.first_name: str = first_name
+        self.username: str = username
+        self.last_name: str = last_name
+        self.language_code: str = language_code
+        self.can_join_groups: bool = can_join_groups
+        self.can_read_all_group_messages: bool = can_read_all_group_messages
+        self.supports_inline_queries: bool = supports_inline_queries
+        self.is_premium: bool = is_premium
+        self.added_to_attachment_menu: bool = added_to_attachment_menu
+
+
+    @property
+    def full_name(self):
+        """
+        :return: User's full name
+        """
+        full_name = self.first_name
+        if self.last_name:
+            full_name += ' {0}'.format(self.last_name)
+        return full_name
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {'id': self.id,
+                'is_bot': self.is_bot,
+                'first_name': self.first_name,
+                'last_name': self.last_name,
+                'username': self.username,
+                'language_code': self.language_code,
+                'can_join_groups': self.can_join_groups,
+                'can_read_all_group_messages': self.can_read_all_group_messages,
+                'supports_inline_queries': self.supports_inline_queries,
+                'is_premium': self.is_premium,
+                'added_to_attachment_menu': self.added_to_attachment_menu}
+
+
+class GroupChat(JsonDeserializable):
+    """
+    :meta private:
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, id, title, **kwargs):
+        self.id: int = id
+        self.title: str = title
+
+
+class Chat(JsonDeserializable):
+    """
+    This object represents a chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chat
+
+    :param id: Unique identifier for this chat. This number may have more than 32 significant bits and some programming 
+        languages may have difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 
+        64-bit integer or double-precision float type are safe for storing this identifier.
+    :type id: :obj:`int`
+
+    :param type: Type of chat, can be either “private”, “group”, “supergroup” or “channel”
+    :type type: :obj:`str`
+
+    :param title: Optional. Title, for supergroups, channels and group chats
+    :type title: :obj:`str`
+
+    :param username: Optional. Username, for private chats, supergroups and channels if available
+    :type username: :obj:`str`
+
+    :param first_name: Optional. First name of the other party in a private chat
+    :type first_name: :obj:`str`
+
+    :param last_name: Optional. Last name of the other party in a private chat
+    :type last_name: :obj:`str`
+
+    :param is_forum: Optional. True, if the supergroup chat is a forum (has topics enabled)
+    :type is_forum: :obj:`bool`
+
+    :param photo: Optional. Chat photo. Returned only in getChat.
+    :type photo: :class:`telebot.types.ChatPhoto`
+
+    :param active_usernames: Optional. If non-empty, the list of all active chat usernames; for private chats, supergroups and channels.
+        Returned only in getChat.
+    :type active_usernames: :obj:`list` of :obj:`str`
+
+    :param emoji_status_custom_emoji_id: Optional. Custom emoji identifier of emoji status of the other party in a private chat.
+        Returned only in getChat.
+    :type emoji_status_custom_emoji_id: :obj:`str`
+
+    :param bio: Optional. Bio of the other party in a private chat. Returned only in getChat.
+    :type bio: :obj:`str`
+
+    :param has_private_forwards: Optional. :obj:`bool`, if privacy settings of the other party in the private chat 
+        allows to use tg://user?id=<user_id> links only in chats with the user. Returned only in getChat.
+    :type has_private_forwards: :obj:`bool`
+
+    :param has_restricted_voice_and_video_messages: Optional. True, if the privacy settings of the other party restrict sending voice and video note messages
+        in the private chat. Returned only in getChat.
+    :type :obj:`bool`
+
+    :param join_to_send_messages: Optional. :obj:`bool`, if users need to join the supergroup before they can send 
+        messages. Returned only in getChat.
+    :type join_to_send_messages: :obj:`bool`
+
+    :param join_by_request: Optional. :obj:`bool`, if all users directly joining the supergroup need to be approved 
+        by supergroup administrators. Returned only in getChat.
+    :type join_by_request: :obj:`bool`
+
+    :param description: Optional. Description, for groups, supergroups and channel chats. Returned only in getChat.
+    :type description: :obj:`str`
+
+    :param invite_link: Optional. Primary invite link, for groups, supergroups and channel chats. Returned only in 
+        getChat.
+    :type invite_link: :obj:`str`
+
+    :param pinned_message: Optional. The most recent pinned message (by sending date). Returned only in getChat.
+    :type pinned_message: :class:`telebot.types.Message`
+
+    :param permissions: Optional. Default chat member permissions, for groups and supergroups. Returned only in 
+        getChat.
+    :type permissions: :class:`telebot.types.ChatPermissions`
+
+    :param slow_mode_delay: Optional. For supergroups, the minimum allowed delay between consecutive messages sent 
+        by each unpriviledged user; in seconds. Returned only in getChat.
+    :type slow_mode_delay: :obj:`int`
+
+    :param message_auto_delete_time: Optional. The time after which all messages sent to the chat will be 
+        automatically deleted; in seconds. Returned only in getChat.
+    :type message_auto_delete_time: :obj:`int`
+
+    :param has_aggressive_anti_spam_enabled: Optional. :obj:`bool`, if the chat has enabled aggressive anti-spam
+        protection. Returned only in getChat.
+    :type has_aggressive_anti_spam_enabled: :obj:`bool`
+
+    :param has_hidden_members: Optional. :obj:`bool`, if the chat has enabled hidden members. Returned only in
+        getChat.
+    :type has_hidden_members: :obj:`bool`
+
+    :param has_protected_content: Optional. :obj:`bool`, if messages from the chat can't be forwarded to other 
+        chats. Returned only in getChat.
+    :type has_protected_content: :obj:`bool`
+
+    :param sticker_set_name: Optional. For supergroups, name of group sticker set. Returned only in getChat.
+    :type sticker_set_name: :obj:`str`
+
+    :param can_set_sticker_set: Optional. :obj:`bool`, if the bot can change the group sticker set. Returned only in 
+        getChat.
+    :type can_set_sticker_set: :obj:`bool`
+
+    :param linked_chat_id: Optional. Unique identifier for the linked chat, i.e. the discussion group identifier for 
+        a channel and vice versa; for supergroups and channel chats. This identifier may be greater than 32 bits and some 
+        programming languages may have difficulty/silent defects in interpreting it. But it is smaller than 52 bits, so a 
+        signed 64 bit integer or double-precision float type are safe for storing this identifier. Returned only in getChat.
+    :type linked_chat_id: :obj:`int`
+
+    :param location: Optional. For supergroups, the location to which the supergroup is connected. Returned only in 
+        getChat.
+    :type location: :class:`telebot.types.ChatLocation`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Chat`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'photo' in obj:
+            obj['photo'] = ChatPhoto.de_json(obj['photo'])
+        if 'pinned_message' in obj:
+            obj['pinned_message'] = Message.de_json(obj['pinned_message'])
+        if 'permissions' in obj:
+            obj['permissions'] = ChatPermissions.de_json(obj['permissions'])
+        if 'location' in obj:
+            obj['location'] = ChatLocation.de_json(obj['location'])
+        return cls(**obj)
+
+    def __init__(self, id, type, title=None, username=None, first_name=None,
+                 last_name=None, photo=None, bio=None, has_private_forwards=None,
+                 description=None, invite_link=None, pinned_message=None, 
+                 permissions=None, slow_mode_delay=None,
+                 message_auto_delete_time=None, has_protected_content=None, sticker_set_name=None,
+                 can_set_sticker_set=None, linked_chat_id=None, location=None, 
+                 join_to_send_messages=None, join_by_request=None, has_restricted_voice_and_video_messages=None, 
+                 is_forum=None, active_usernames=None, emoji_status_custom_emoji_id=None,
+                 has_hidden_members=None, has_aggressive_anti_spam_enabled=None, **kwargs):
+        self.id: int = id
+        self.type: str = type
+        self.title: str = title
+        self.username: str = username
+        self.first_name: str = first_name
+        self.last_name: str = last_name
+        self.is_forum: bool = is_forum
+        self.photo: ChatPhoto = photo
+        self.bio: str = bio
+        self.join_to_send_messages: bool = join_to_send_messages
+        self.join_by_request: bool = join_by_request
+        self.has_private_forwards: bool = has_private_forwards
+        self.has_restricted_voice_and_video_messages: bool = has_restricted_voice_and_video_messages
+        self.description: str = description
+        self.invite_link: str = invite_link
+        self.pinned_message: Message = pinned_message
+        self.permissions: ChatPermissions = permissions
+        self.slow_mode_delay: int = slow_mode_delay
+        self.message_auto_delete_time: int = message_auto_delete_time
+        self.has_protected_content: bool = has_protected_content
+        self.sticker_set_name: str = sticker_set_name
+        self.can_set_sticker_set: bool = can_set_sticker_set
+        self.linked_chat_id: int = linked_chat_id
+        self.location: ChatLocation = location
+        self.active_usernames: List[str] = active_usernames
+        self.emoji_status_custom_emoji_id: str = emoji_status_custom_emoji_id
+        self.has_hidden_members: bool = has_hidden_members
+        self.has_aggressive_anti_spam_enabled: bool = has_aggressive_anti_spam_enabled
+
+
+class MessageID(JsonDeserializable):
+    """
+    This object represents a unique message identifier.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#messageid
+
+    :param message_id: Unique message identifier
+    :type message_id: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MessageId`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, message_id, **kwargs):
+        self.message_id = message_id
+
+
+class WebAppData(JsonDeserializable, Dictionaryable):
+    """
+    Describes data sent from a Web App to the bot.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#webappdata
+
+    :param data: The data. Be aware that a bad client can send arbitrary data in this field.
+    :type data: :obj:`str`
+
+    :param button_text: Text of the web_app keyboard button from which the Web App was opened. Be aware that a bad client 
+        can send arbitrary data in this field.
+    :type button_text: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.WebAppData`
+    """
+
+    def __init__(self, data, button_text):
+        self.data = data
+        self.button_text = button_text
+    def to_dict(self):
+        return {'data': self.data, 'button_text': self.button_text}
+        
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+
+class Message(JsonDeserializable):
+    """
+    This object represents a message.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#message
+
+    :param message_id: Unique message identifier inside this chat
+    :type message_id: :obj:`int`
+
+    :param message_thread_id: Optional. Unique identifier of a message thread to which the message belongs; for supergroups only
+    :type message_thread_id: :obj:`int`
+
+    :param from_user: Optional. Sender of the message; empty for messages sent to channels. For backward compatibility, the 
+        field contains a fake sender user in non-channel chats, if the message was sent on behalf of a chat.
+    :type from_user: :class:`telebot.types.User`
+
+    :param sender_chat: Optional. Sender of the message, sent on behalf of a chat. For example, the channel itself for 
+        channel posts, the supergroup itself for messages from anonymous group administrators, the linked channel for 
+        messages automatically forwarded to the discussion group. For backward compatibility, the field from contains a 
+        fake sender user in non-channel chats, if the message was sent on behalf of a chat.
+    :type sender_chat: :class:`telebot.types.Chat`
+
+    :param date: Date the message was sent in Unix time
+    :type date: :obj:`int`
+
+    :param chat: Conversation the message belongs to
+    :type chat: :class:`telebot.types.Chat`
+
+    :param forward_from: Optional. For forwarded messages, sender of the original message
+    :type forward_from: :class:`telebot.types.User`
+
+    :param forward_from_chat: Optional. For messages forwarded from channels or from anonymous administrators, 
+        information about the original sender chat
+    :type forward_from_chat: :class:`telebot.types.Chat`
+
+    :param forward_from_message_id: Optional. For messages forwarded from channels, identifier of the original 
+        message in the channel
+    :type forward_from_message_id: :obj:`int`
+
+    :param forward_signature: Optional. For forwarded messages that were originally sent in channels or by an 
+        anonymous chat administrator, signature of the message sender if present
+    :type forward_signature: :obj:`str`
+
+    :param forward_sender_name: Optional. Sender's name for messages forwarded from users who disallow adding a link 
+        to their account in forwarded messages
+    :type forward_sender_name: :obj:`str`
+
+    :param forward_date: Optional. For forwarded messages, date the original message was sent in Unix time
+    :type forward_date: :obj:`int`
+
+    :param is_topic_message: Optional. True, if the message is sent to a forum topic
+    :type is_topic_message: :obj:`bool`
+
+    :param is_automatic_forward: Optional. :obj:`bool`, if the message is a channel post that was automatically 
+        forwarded to the connected discussion group
+    :type is_automatic_forward: :obj:`bool`
+
+    :param reply_to_message: Optional. For replies, the original message. Note that the Message object in this field 
+        will not contain further reply_to_message fields even if it itself is a reply.
+    :type reply_to_message: :class:`telebot.types.Message`
+
+    :param via_bot: Optional. Bot through which the message was sent
+    :type via_bot: :class:`telebot.types.User`
+
+    :param edit_date: Optional. Date the message was last edited in Unix time
+    :type edit_date: :obj:`int`
+
+    :param has_protected_content: Optional. :obj:`bool`, if the message can't be forwarded
+    :type has_protected_content: :obj:`bool`
+
+    :param media_group_id: Optional. The unique identifier of a media message group this message belongs to
+    :type media_group_id: :obj:`str`
+
+    :param author_signature: Optional. Signature of the post author for messages in channels, or the custom title of an 
+        anonymous group administrator
+    :type author_signature: :obj:`str`
+
+    :param text: Optional. For text messages, the actual UTF-8 text of the message
+    :type text: :obj:`str`
+
+    :param entities: Optional. For text messages, special entities like usernames, URLs, bot commands, etc. that 
+        appear in the text
+    :type entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param animation: Optional. Message is an animation, information about the animation. For backward 
+        compatibility, when this field is set, the document field will also be set
+    :type animation: :class:`telebot.types.Animation`
+
+    :param audio: Optional. Message is an audio file, information about the file
+    :type audio: :class:`telebot.types.Audio`
+
+    :param document: Optional. Message is a general file, information about the file
+    :type document: :class:`telebot.types.Document`
+
+    :param photo: Optional. Message is a photo, available sizes of the photo
+    :type photo: :obj:`list` of :class:`telebot.types.PhotoSize`
+
+    :param sticker: Optional. Message is a sticker, information about the sticker
+    :type sticker: :class:`telebot.types.Sticker`
+
+    :param video: Optional. Message is a video, information about the video
+    :type video: :class:`telebot.types.Video`
+
+    :param video_note: Optional. Message is a video note, information about the video message
+    :type video_note: :class:`telebot.types.VideoNote`
+
+    :param voice: Optional. Message is a voice message, information about the file
+    :type voice: :class:`telebot.types.Voice`
+
+    :param caption: Optional. Caption for the animation, audio, document, photo, video or voice
+    :type caption: :obj:`str`
+
+    :param caption_entities: Optional. For messages with a caption, special entities like usernames, URLs, bot 
+        commands, etc. that appear in the caption
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param has_media_spoiler: Optional. True, if the message media is covered by a spoiler animation
+    :type has_media_spoiler: :obj:`bool`
+
+    :param contact: Optional. Message is a shared contact, information about the contact
+    :type contact: :class:`telebot.types.Contact`
+
+    :param dice: Optional. Message is a dice with random value
+    :type dice: :class:`telebot.types.Dice`
+
+    :param game: Optional. Message is a game, information about the game. More about games »
+    :type game: :class:`telebot.types.Game`
+
+    :param poll: Optional. Message is a native poll, information about the poll
+    :type poll: :class:`telebot.types.Poll`
+
+    :param venue: Optional. Message is a venue, information about the venue. For backward compatibility, when this 
+        field is set, the location field will also be set
+    :type venue: :class:`telebot.types.Venue`
+
+    :param location: Optional. Message is a shared location, information about the location
+    :type location: :class:`telebot.types.Location`
+
+    :param new_chat_members: Optional. New members that were added to the group or supergroup and information about 
+        them (the bot itself may be one of these members)
+    :type new_chat_members: :obj:`list` of :class:`telebot.types.User`
+
+    :param left_chat_member: Optional. A member was removed from the group, information about them (this member may be 
+        the bot itself)
+    :type left_chat_member: :class:`telebot.types.User`
+
+    :param new_chat_title: Optional. A chat title was changed to this value
+    :type new_chat_title: :obj:`str`
+
+    :param new_chat_photo: Optional. A chat photo was change to this value
+    :type new_chat_photo: :obj:`list` of :class:`telebot.types.PhotoSize`
+
+    :param delete_chat_photo: Optional. Service message: the chat photo was deleted
+    :type delete_chat_photo: :obj:`bool`
+
+    :param group_chat_created: Optional. Service message: the group has been created
+    :type group_chat_created: :obj:`bool`
+
+    :param supergroup_chat_created: Optional. Service message: the supergroup has been created. This field can't be 
+        received in a message coming through updates, because bot can't be a member of a supergroup when it is created. It can 
+        only be found in reply_to_message if someone replies to a very first message in a directly created supergroup.
+    :type supergroup_chat_created: :obj:`bool`
+
+    :param channel_chat_created: Optional. Service message: the channel has been created. This field can't be 
+        received in a message coming through updates, because bot can't be a member of a channel when it is created. It can only 
+        be found in reply_to_message if someone replies to a very first message in a channel.
+    :type channel_chat_created: :obj:`bool`
+
+    :param message_auto_delete_timer_changed: Optional. Service message: auto-delete timer settings changed in 
+        the chat
+    :type message_auto_delete_timer_changed: :class:`telebot.types.MessageAutoDeleteTimerChanged`
+
+    :param migrate_to_chat_id: Optional. The group has been migrated to a supergroup with the specified identifier. 
+        This number may have more than 32 significant bits and some programming languages may have difficulty/silent 
+        defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or double-precision 
+        float type are safe for storing this identifier.
+    :type migrate_to_chat_id: :obj:`int`
+
+    :param migrate_from_chat_id: Optional. The supergroup has been migrated from a group with the specified 
+        identifier. This number may have more than 32 significant bits and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this identifier.
+    :type migrate_from_chat_id: :obj:`int`
+
+    :param pinned_message: Optional. Specified message was pinned. Note that the Message object in this field will not 
+        contain further reply_to_message fields even if it is itself a reply.
+    :type pinned_message: :class:`telebot.types.Message`
+
+    :param invoice: Optional. Message is an invoice for a payment, information about the invoice. More about payments »
+    :type invoice: :class:`telebot.types.Invoice`
+
+    :param successful_payment: Optional. Message is a service message about a successful payment, information about 
+        the payment. More about payments »
+    :type successful_payment: :class:`telebot.types.SuccessfulPayment`
+
+    :param connected_website: Optional. The domain name of the website on which the user has logged in. More about 
+        Telegram Login »
+    :type connected_website: :obj:`str`
+
+    :param write_access_allowed: Optional. Service message: the user allowed the bot added to the attachment
+        menu to write messages
+    :type write_access_allowed: :class:`telebot.types.WriteAccessAllowed`
+
+    :param passport_data: Optional. Telegram Passport data
+    :type passport_data: :class:`telebot.types.PassportData`
+
+    :param proximity_alert_triggered: Optional. Service message. A user in the chat triggered another user's 
+        proximity alert while sharing Live Location.
+    :type proximity_alert_triggered: :class:`telebot.types.ProximityAlertTriggered`
+
+    :param forum_topic_created: Optional. Service message: forum topic created
+    :type forum_topic_created: :class:`telebot.types.ForumTopicCreated`
+
+    :param forum_topic_edited: Optional. Service message: forum topic edited
+    :type forum_topic_edited: :class:`telebot.types.ForumTopicEdited`
+
+    :param forum_topic_closed: Optional. Service message: forum topic closed
+    :type forum_topic_closed: :class:`telebot.types.ForumTopicClosed`
+
+    :param forum_topic_reopened: Optional. Service message: forum topic reopened
+    :type forum_topic_reopened: :class:`telebot.types.ForumTopicReopened`
+
+    :param general_forum_topic_hidden: Optional. Service message: the 'General' forum topic hidden
+    :type general_forum_topic_hidden: :class:`telebot.types.GeneralForumTopicHidden`
+
+    :param general_forum_topic_unhidden: Optional. Service message: the 'General' forum topic unhidden
+    :type general_forum_topic_unhidden: :class:`telebot.types.GeneralForumTopicUnhidden`
+
+    :param video_chat_scheduled: Optional. Service message: video chat scheduled
+    :type video_chat_scheduled: :class:`telebot.types.VideoChatScheduled`
+
+    :param video_chat_started: Optional. Service message: video chat started
+    :type video_chat_started: :class:`telebot.types.VideoChatStarted`
+
+    :param video_chat_ended: Optional. Service message: video chat ended
+    :type video_chat_ended: :class:`telebot.types.VideoChatEnded`
+
+    :param video_chat_participants_invited: Optional. Service message: new participants invited to a video chat
+    :type video_chat_participants_invited: :class:`telebot.types.VideoChatParticipantsInvited`
+
+    :param web_app_data: Optional. Service message: data sent by a Web App
+    :type web_app_data: :class:`telebot.types.WebAppData`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message. login_url buttons are represented as 
+        ordinary url buttons.
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Message`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        message_id = obj['message_id']
+        from_user = User.de_json(obj.get('from'))
+        date = obj['date']
+        chat = Chat.de_json(obj['chat'])
+        content_type = None
+        opts = {}
+        if 'sender_chat' in obj:
+            opts['sender_chat'] = Chat.de_json(obj['sender_chat'])
+        if 'forward_from' in obj:
+            opts['forward_from'] = User.de_json(obj['forward_from'])
+        if 'forward_from_chat' in obj:
+            opts['forward_from_chat'] = Chat.de_json(obj['forward_from_chat'])
+        if 'forward_from_message_id' in obj:
+            opts['forward_from_message_id'] = obj.get('forward_from_message_id')
+        if 'forward_signature' in obj:
+            opts['forward_signature'] = obj.get('forward_signature')
+        if 'forward_sender_name' in obj:
+            opts['forward_sender_name'] = obj.get('forward_sender_name')
+        if 'forward_date' in obj:
+            opts['forward_date'] = obj.get('forward_date')
+        if 'is_automatic_forward' in obj:
+            opts['is_automatic_forward'] = obj.get('is_automatic_forward')
+        if 'is_topic_message' in obj:
+            opts['is_topic_message'] = obj.get('is_topic_message')
+        if 'message_thread_id' in obj:
+            opts['message_thread_id'] = obj.get('message_thread_id')
+        if 'reply_to_message' in obj:
+            opts['reply_to_message'] = Message.de_json(obj['reply_to_message'])
+        if 'via_bot' in obj:
+            opts['via_bot'] = User.de_json(obj['via_bot'])
+        if 'edit_date' in obj:
+            opts['edit_date'] = obj.get('edit_date')
+        if 'has_protected_content' in obj:
+            opts['has_protected_content'] = obj.get('has_protected_content')
+        if 'media_group_id' in obj:
+            opts['media_group_id'] = obj.get('media_group_id')
+        if 'author_signature' in obj:
+            opts['author_signature'] = obj.get('author_signature')
+        if 'text' in obj:
+            opts['text'] = obj['text']
+            content_type = 'text'
+        if 'entities' in obj:
+            opts['entities'] = Message.parse_entities(obj['entities'])
+        if 'caption_entities' in obj:
+            opts['caption_entities'] = Message.parse_entities(obj['caption_entities'])
+        if 'audio' in obj:
+            opts['audio'] = Audio.de_json(obj['audio'])
+            content_type = 'audio'
+        if 'document' in obj:
+            opts['document'] = Document.de_json(obj['document'])
+            content_type = 'document'
+        if 'animation' in obj:
+            # Document content type accompanies "animation",
+            # so "animation" should be checked below "document" to override it
+            opts['animation'] = Animation.de_json(obj['animation'])
+            content_type = 'animation'
+        if 'game' in obj:
+            opts['game'] = Game.de_json(obj['game'])
+            content_type = 'game'
+        if 'photo' in obj:
+            opts['photo'] = Message.parse_photo(obj['photo'])
+            content_type = 'photo'
+        if 'sticker' in obj:
+            opts['sticker'] = Sticker.de_json(obj['sticker'])
+            content_type = 'sticker'
+        if 'video' in obj:
+            opts['video'] = Video.de_json(obj['video'])
+            content_type = 'video'
+        if 'video_note' in obj:
+            opts['video_note'] = VideoNote.de_json(obj['video_note'])
+            content_type = 'video_note'
+        if 'voice' in obj:
+            opts['voice'] = Audio.de_json(obj['voice'])
+            content_type = 'voice'
+        if 'caption' in obj:
+            opts['caption'] = obj['caption']
+        if 'contact' in obj:
+            opts['contact'] = Contact.de_json(json.dumps(obj['contact']))
+            content_type = 'contact'
+        if 'location' in obj:
+            opts['location'] = Location.de_json(obj['location'])
+            content_type = 'location'
+        if 'venue' in obj:
+            opts['venue'] = Venue.de_json(obj['venue'])
+            content_type = 'venue'
+        if 'dice' in obj:
+            opts['dice'] = Dice.de_json(obj['dice'])
+            content_type = 'dice'
+        if 'new_chat_members' in obj:
+            new_chat_members = []
+            for member in obj['new_chat_members']:
+                new_chat_members.append(User.de_json(member))
+            opts['new_chat_members'] = new_chat_members
+            content_type = 'new_chat_members'
+        if 'left_chat_member' in obj:
+            opts['left_chat_member'] = User.de_json(obj['left_chat_member'])
+            content_type = 'left_chat_member'
+        if 'new_chat_title' in obj:
+            opts['new_chat_title'] = obj['new_chat_title']
+            content_type = 'new_chat_title'
+        if 'new_chat_photo' in obj:
+            opts['new_chat_photo'] = Message.parse_photo(obj['new_chat_photo'])
+            content_type = 'new_chat_photo'
+        if 'delete_chat_photo' in obj:
+            opts['delete_chat_photo'] = obj['delete_chat_photo']
+            content_type = 'delete_chat_photo'
+        if 'group_chat_created' in obj:
+            opts['group_chat_created'] = obj['group_chat_created']
+            content_type = 'group_chat_created'
+        if 'supergroup_chat_created' in obj:
+            opts['supergroup_chat_created'] = obj['supergroup_chat_created']
+            content_type = 'supergroup_chat_created'
+        if 'channel_chat_created' in obj:
+            opts['channel_chat_created'] = obj['channel_chat_created']
+            content_type = 'channel_chat_created'
+        if 'migrate_to_chat_id' in obj:
+            opts['migrate_to_chat_id'] = obj['migrate_to_chat_id']
+            content_type = 'migrate_to_chat_id'
+        if 'migrate_from_chat_id' in obj:
+            opts['migrate_from_chat_id'] = obj['migrate_from_chat_id']
+            content_type = 'migrate_from_chat_id'
+        if 'pinned_message' in obj:
+            opts['pinned_message'] = Message.de_json(obj['pinned_message'])
+            content_type = 'pinned_message'
+        if 'invoice' in obj:
+            opts['invoice'] = Invoice.de_json(obj['invoice'])
+            content_type = 'invoice'
+        if 'successful_payment' in obj:
+            opts['successful_payment'] = SuccessfulPayment.de_json(obj['successful_payment'])
+            content_type = 'successful_payment'
+        if 'connected_website' in obj:
+            opts['connected_website'] = obj['connected_website']
+            content_type = 'connected_website'
+        if 'poll' in obj:
+            opts['poll'] = Poll.de_json(obj['poll'])
+            content_type = 'poll'
+        if 'passport_data' in obj:
+            opts['passport_data'] = obj['passport_data']
+            content_type = 'passport_data'
+        if 'proximity_alert_triggered' in obj:
+            opts['proximity_alert_triggered'] = ProximityAlertTriggered.de_json(obj[
+                'proximity_alert_triggered'])
+            content_type = 'proximity_alert_triggered'
+        if 'video_chat_scheduled' in obj:
+            opts['video_chat_scheduled'] = VideoChatScheduled.de_json(obj['video_chat_scheduled'])
+            opts['voice_chat_scheduled'] = opts['video_chat_scheduled']  # deprecated, for backward compatibility
+            content_type = 'video_chat_scheduled'
+        if 'video_chat_started' in obj:
+            opts['video_chat_started'] = VideoChatStarted.de_json(obj['video_chat_started'])
+            opts['voice_chat_started'] = opts['video_chat_started']  # deprecated, for backward compatibility
+            content_type = 'video_chat_started'
+        if 'video_chat_ended' in obj:
+            opts['video_chat_ended'] = VideoChatEnded.de_json(obj['video_chat_ended'])
+            opts['voice_chat_ended'] = opts['video_chat_ended']  # deprecated, for backward compatibility
+            content_type = 'video_chat_ended'
+        if 'video_chat_participants_invited' in obj:
+            opts['video_chat_participants_invited'] = VideoChatParticipantsInvited.de_json(obj['video_chat_participants_invited'])
+            opts['voice_chat_participants_invited'] = opts['video_chat_participants_invited']  # deprecated, for backward compatibility
+            content_type = 'video_chat_participants_invited'
+        if 'web_app_data' in obj:
+            opts['web_app_data'] = WebAppData.de_json(obj['web_app_data'])
+            content_type = 'web_app_data'
+        if 'message_auto_delete_timer_changed' in obj:
+            opts['message_auto_delete_timer_changed'] = MessageAutoDeleteTimerChanged.de_json(obj['message_auto_delete_timer_changed'])
+            content_type = 'message_auto_delete_timer_changed'
+        if 'reply_markup' in obj:
+            opts['reply_markup'] = InlineKeyboardMarkup.de_json(obj['reply_markup'])
+        if 'forum_topic_created' in obj:
+            opts['forum_topic_created'] = ForumTopicCreated.de_json(obj['forum_topic_created'])
+            content_type = 'forum_topic_created'
+        if 'forum_topic_closed' in obj:
+            opts['forum_topic_closed'] = ForumTopicClosed.de_json(obj['forum_topic_closed'])
+            content_type = 'forum_topic_closed'
+        if 'forum_topic_reopened' in obj:
+            opts['forum_topic_reopened'] = ForumTopicReopened.de_json(obj['forum_topic_reopened'])
+            content_type = 'forum_topic_reopened'
+        if 'has_media_spoiler' in obj:
+            opts['has_media_spoiler'] = obj['has_media_spoiler']
+        if 'forum_topic_edited' in obj:
+            opts['forum_topic_edited'] = ForumTopicEdited.de_json(obj['forum_topic_edited'])
+            content_type = 'forum_topic_edited'
+        if 'general_forum_topic_hidden' in obj:
+            opts['general_forum_topic_hidden'] = GeneralForumTopicHidden.de_json(obj['general_forum_topic_hidden'])
+            content_type = 'general_forum_topic_hidden'
+        if 'general_forum_topic_unhidden' in obj:
+            opts['general_forum_topic_unhidden'] = GeneralForumTopicUnhidden.de_json(obj['general_forum_topic_unhidden'])
+            content_type = 'general_forum_topic_unhidden'
+        if 'write_access_allowed' in obj:
+            opts['write_access_allowed'] = WriteAccessAllowed.de_json(obj['write_access_allowed'])
+            content_type = 'write_access_allowed'
+        return cls(message_id, from_user, date, chat, content_type, opts, json_string)
+
+    @classmethod
+    def parse_chat(cls, chat):
+        """
+        Parses chat.
+        """
+        if 'first_name' not in chat:
+            return GroupChat.de_json(chat)
+        else:
+            return User.de_json(chat)
+
+    @classmethod
+    def parse_photo(cls, photo_size_array):
+        """
+        Parses photo array.
+        """
+        ret = []
+        for ps in photo_size_array:
+            ret.append(PhotoSize.de_json(ps))
+        return ret
+
+    @classmethod
+    def parse_entities(cls, message_entity_array):
+        """
+        Parses message entity array.
+        """
+        ret = []
+        for me in message_entity_array:
+            ret.append(MessageEntity.de_json(me))
+        return ret
+
+    def __init__(self, message_id, from_user, date, chat, content_type, options, json_string):
+        self.content_type: str = content_type
+        self.id: int = message_id           # Lets fix the telegram usability ####up with ID in Message :)
+        self.message_id: int = message_id
+        self.from_user: User = from_user
+        self.date: int = date
+        self.chat: Chat = chat
+        self.sender_chat: Optional[Chat] = None
+        self.forward_from: Optional[User] = None
+        self.forward_from_chat: Optional[Chat] = None
+        self.forward_from_message_id: Optional[int] = None
+        self.forward_signature: Optional[str] = None
+        self.forward_sender_name: Optional[str] = None
+        self.forward_date: Optional[int] = None
+        self.is_automatic_forward: Optional[bool] = None
+        self.reply_to_message: Optional[Message] = None
+        self.via_bot: Optional[User] = None
+        self.edit_date: Optional[int] = None
+        self.has_protected_content: Optional[bool] = None
+        self.media_group_id: Optional[str] = None
+        self.author_signature: Optional[str] = None
+        self.text: Optional[str] = None
+        self.entities: Optional[List[MessageEntity]] = None
+        self.caption_entities: Optional[List[MessageEntity]] = None
+        self.audio: Optional[Audio] = None
+        self.document: Optional[Document] = None
+        self.photo: Optional[List[PhotoSize]] = None
+        self.sticker: Optional[Sticker] = None
+        self.video: Optional[Video] = None
+        self.video_note: Optional[VideoNote] = None
+        self.voice: Optional[Voice] = None
+        self.caption: Optional[str] = None
+        self.contact: Optional[Contact] = None
+        self.location: Optional[Location] = None
+        self.venue: Optional[Venue] = None
+        self.animation: Optional[Animation] = None
+        self.dice: Optional[Dice] = None
+        self.new_chat_member: Optional[User] = None  # Deprecated since Bot API 3.0. Not processed anymore
+        self.new_chat_members: Optional[List[User]] = None
+        self.left_chat_member: Optional[User] = None
+        self.new_chat_title: Optional[str] = None
+        self.new_chat_photo: Optional[List[PhotoSize]] = None
+        self.delete_chat_photo: Optional[bool] = None
+        self.group_chat_created: Optional[bool] = None
+        self.supergroup_chat_created: Optional[bool] = None
+        self.channel_chat_created: Optional[bool] = None
+        self.migrate_to_chat_id: Optional[int] = None
+        self.migrate_from_chat_id: Optional[int] = None
+        self.pinned_message: Optional[Message] = None
+        self.invoice: Optional[Invoice] = None
+        self.successful_payment: Optional[SuccessfulPayment] = None
+        self.connected_website: Optional[str] = None
+        self.reply_markup: Optional[InlineKeyboardMarkup] = None
+        self.message_thread_id: Optional[int] = None
+        self.is_topic_message: Optional[bool] = None
+        self.forum_topic_created: Optional[ForumTopicCreated] = None
+        self.forum_topic_closed: Optional[ForumTopicClosed] = None
+        self.forum_topic_reopened: Optional[ForumTopicReopened] = None
+        self.has_media_spoiler: Optional[bool] = None
+        self.forum_topic_edited: Optional[ForumTopicEdited] = None
+        self.general_forum_topic_hidden: Optional[GeneralForumTopicHidden] = None
+        self.general_forum_topic_unhidden: Optional[GeneralForumTopicUnhidden] = None
+        self.write_access_allowed: Optional[WriteAccessAllowed] = None
+        for key in options:
+            setattr(self, key, options[key])
+        self.json = json_string
+
+    def __html_text(self, text, entities):
+        """
+        Author: @sviat9440
+        Updaters: @badiboy
+        Message: "*Test* parse _formatting_, [url](https://example.com), [text_mention](tg://user?id=123456) and mention @username"
+
+        .. code-block:: python3
+            :caption: Example:
+
+            message.html_text
+            >> "<b>Test</b> parse <i>formatting</i>, <a href=\"https://example.com\">url</a>, <a href=\"tg://user?id=123456\">text_mention</a> and mention @username"
+
+        Custom subs:
+            You can customize the substitutes. By default, there is no substitute for the entities: hashtag, bot_command, email. You can add or modify substitute an existing entity.
+        .. code-block:: python3
+            :caption: Example:
+
+            message.custom_subs = {"bold": "<strong class=\"example\">{text}</strong>", "italic": "<i class=\"example\">{text}</i>", "mention": "<a href={url}>{text}</a>"}
+            message.html_text
+            >> "<strong class=\"example\">Test</strong> parse <i class=\"example\">formatting</i>, <a href=\"https://example.com\">url</a> and <a href=\"tg://user?id=123456\">text_mention</a> and mention <a href=\"https://t.me/username\">@username</a>"
+        """
+
+        if not entities:
+            return text
+
+        _subs = {
+            "bold": "<b>{text}</b>",
+            "italic": "<i>{text}</i>",
+            "pre": "<pre>{text}</pre>",
+            "code": "<code>{text}</code>",
+            # "url": "<a href=\"{url}\">{text}</a>", # @badiboy plain URLs have no text and do not need tags
+            "text_link": "<a href=\"{url}\">{text}</a>",
+            "strikethrough": "<s>{text}</s>",
+            "underline":     "<u>{text}</u>",
+            "spoiler": "<span class=\"tg-spoiler\">{text}</span>",
+        }
+         
+        if hasattr(self, "custom_subs"):
+            for key, value in self.custom_subs.items():
+                _subs[key] = value
+        utf16_text = text.encode("utf-16-le")
+        html_text = ""
+
+        def func(upd_text, subst_type=None, url=None, user=None):
+            upd_text = upd_text.decode("utf-16-le")
+            if subst_type == "text_mention":
+                subst_type = "text_link"
+                url = "tg://user?id={0}".format(user.id)
+            elif subst_type == "mention":
+                url = "https://t.me/{0}".format(upd_text[1:])
+            upd_text = upd_text.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;")
+            if not subst_type or not _subs.get(subst_type):
+                return upd_text
+            subs = _subs.get(subst_type)
+            return subs.format(text=upd_text, url=url)
+
+        offset = 0
+        for entity in entities:
+            if entity.offset > offset:
+                html_text += func(utf16_text[offset * 2 : entity.offset * 2])
+                offset = entity.offset
+                html_text += func(utf16_text[offset * 2 : (offset + entity.length) * 2], entity.type, entity.url, entity.user)
+                offset += entity.length
+            elif entity.offset == offset:
+                html_text += func(utf16_text[offset * 2 : (offset + entity.length) * 2], entity.type, entity.url, entity.user)
+                offset += entity.length
+            else:
+                # Here we are processing nested entities.
+                # We shouldn't update offset, because they are the same as entity before.
+                # And, here we are replacing previous string with a new html-rendered text(previous string is already html-rendered,
+                # And we don't change it).
+                entity_string = utf16_text[entity.offset * 2 : (entity.offset + entity.length) * 2]
+                formatted_string = func(entity_string, entity.type, entity.url, entity.user)
+                entity_string_decoded = entity_string.decode("utf-16-le")
+                last_occurence = html_text.rfind(entity_string_decoded)
+                string_length = len(entity_string_decoded)
+                #html_text = html_text.replace(html_text[last_occurence:last_occurence+string_length], formatted_string)
+                html_text = html_text[:last_occurence] + formatted_string + html_text[last_occurence+string_length:]
+        if offset * 2 < len(utf16_text):
+            html_text += func(utf16_text[offset * 2:])
+
+        return html_text
+
+    @property
+    def html_text(self):
+        """
+        Returns html-rendered text.
+        """
+        return self.__html_text(self.text, self.entities)
+
+    @property
+    def html_caption(self):
+        """
+        Returns html-rendered caption.
+        """
+        return self.__html_text(self.caption, self.caption_entities)
+
+
+class MessageEntity(Dictionaryable, JsonSerializable, JsonDeserializable):
+    """
+    This object represents one special entity in a text message. For example, hashtags, usernames, URLs, etc.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#messageentity
+
+    :param type: Type of the entity. Currently, can be “mention” (@username), “hashtag” (#hashtag), “cashtag” 
+        ($USD), “bot_command” (/start@jobs_bot), “url” (https://telegram.org), “email” 
+        (do-not-reply@telegram.org), “phone_number” (+1-212-555-0123), “bold” (bold text), “italic” (italic text), 
+        “underline” (underlined text), “strikethrough” (strikethrough text), “spoiler” (spoiler message), “code” 
+        (monowidth string), “pre” (monowidth block), “text_link” (for clickable text URLs), “text_mention” (for users 
+        without usernames), “custom_emoji” (for inline custom emoji stickers)
+    :type type: :obj:`str`
+
+    :param offset: Offset in UTF-16 code units to the start of the entity
+    :type offset: :obj:`int`
+
+    :param length: Length of the entity in UTF-16 code units
+    :type length: :obj:`int`
+
+    :param url: Optional. For “text_link” only, URL that will be opened after user taps on the text
+    :type url: :obj:`str`
+
+    :param user: Optional. For “text_mention” only, the mentioned user
+    :type user: :class:`telebot.types.User`
+
+    :param language: Optional. For “pre” only, the programming language of the entity text
+    :type language: :obj:`str`
+
+    :param custom_emoji_id: Optional. For “custom_emoji” only, unique identifier of the custom emoji.
+        Use get_custom_emoji_stickers to get full information about the sticker.
+    :type custom_emoji_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MessageEntity`
+    """
+    @staticmethod
+    def to_list_of_dicts(entity_list) -> Union[List[Dict], None]:
+        """
+        Converts a list of MessageEntity objects to a list of dictionaries.
+        """
+        res = []
+        for e in entity_list:
+            res.append(MessageEntity.to_dict(e))
+        return res or None
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'user' in obj:
+            obj['user'] = User.de_json(obj['user'])
+        return cls(**obj)
+
+    def __init__(self, type, offset, length, url=None, user=None, language=None, custom_emoji_id=None, **kwargs):
+        self.type: str = type
+        self.offset: int = offset
+        self.length: int = length
+        self.url: str = url
+        self.user: User = user
+        self.language: str = language
+        self.custom_emoji_id: str = custom_emoji_id
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {"type": self.type,
+                "offset": self.offset,
+                "length": self.length,
+                "url": self.url,
+                "user": self.user,
+                "language":  self.language,
+                "custom_emoji_id": self.custom_emoji_id}
+
+
+class Dice(JsonSerializable, Dictionaryable, JsonDeserializable):
+    """
+    This object represents an animated emoji that displays a random value.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#dice
+
+    :param emoji: Emoji on which the dice throw animation is based
+    :type emoji: :obj:`str`
+
+    :param value: Value of the dice, 1-6 for “🎲”, “🎯” and “🎳” base emoji, 1-5 for “🏀” and “⚽” base emoji, 1-64 for “🎰” base emoji
+    :type value: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Dice`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, value, emoji, **kwargs):
+        self.value: int = value
+        self.emoji: str = emoji
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {'value': self.value,
+                'emoji': self.emoji}
+
+
+class PhotoSize(JsonDeserializable):
+    """
+    This object represents one size of a photo or a file / sticker thumbnail.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#photosize
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param width: Photo width
+    :type width: :obj:`int`
+
+    :param height: Photo height
+    :type height: :obj:`int`
+
+    :param file_size: Optional. File size in bytes
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.PhotoSize`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, width, height, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.width: int = width
+        self.height: int = height
+        self.file_size: int = file_size
+
+
+class Audio(JsonDeserializable):
+    """
+    This object represents an audio file to be treated as music by the Telegram clients.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#audio
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param duration: Duration of the audio in seconds as defined by sender
+    :type duration: :obj:`int`
+
+    :param performer: Optional. Performer of the audio as defined by sender or by audio tags
+    :type performer: :obj:`str`
+
+    :param title: Optional. Title of the audio as defined by sender or by audio tags
+    :type title: :obj:`str`
+
+    :param file_name: Optional. Original filename as defined by sender
+    :type file_name: :obj:`str`
+
+    :param mime_type: Optional. MIME type of the file as defined by sender
+    :type mime_type: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :param thumb: Optional. Thumbnail of the album cover to which the music file belongs
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Audio`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        else: 
+            obj['thumb'] = None
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, duration, performer=None, title=None, file_name=None, mime_type=None, 
+                 file_size=None, thumb=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.duration: int = duration
+        self.performer: str = performer
+        self.title: str = title
+        self.file_name: str = file_name
+        self.mime_type: str = mime_type
+        self.file_size: int = file_size
+        self.thumb: PhotoSize = thumb 
+
+
+class Voice(JsonDeserializable):
+    """
+    This object represents a voice note.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#voice
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param duration: Duration of the audio in seconds as defined by sender
+    :type duration: :obj:`int`
+
+    :param mime_type: Optional. MIME type of the file as defined by sender
+    :type mime_type: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Voice`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, duration, mime_type=None, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.duration: int = duration
+        self.mime_type: str = mime_type
+        self.file_size: int = file_size
+
+
+class Document(JsonDeserializable):
+    """
+    This object represents a general file (as opposed to photos, voice messages and audio files).
+
+    Telegram Documentation: https://core.telegram.org/bots/api#document
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param thumb: Optional. Document thumbnail as defined by sender
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :param file_name: Optional. Original filename as defined by sender
+    :type file_name: :obj:`str`
+
+    :param mime_type: Optional. MIME type of the file as defined by sender
+    :type mime_type: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Document`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        else: 
+            obj['thumb'] = None
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, thumb=None, file_name=None, mime_type=None, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.thumb: PhotoSize = thumb
+        self.file_name: str = file_name
+        self.mime_type: str = mime_type
+        self.file_size: int = file_size
+
+
+class Video(JsonDeserializable):
+    """
+    This object represents a video file.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#video
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param width: Video width as defined by sender
+    :type width: :obj:`int`
+
+    :param height: Video height as defined by sender
+    :type height: :obj:`int`
+
+    :param duration: Duration of the video in seconds as defined by sender
+    :type duration: :obj:`int`
+
+    :param thumb: Optional. Video thumbnail
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :param file_name: Optional. Original filename as defined by sender
+    :type file_name: :obj:`str`
+
+    :param mime_type: Optional. MIME type of the file as defined by sender
+    :type mime_type: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Video`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, width, height, duration, thumb=None, file_name=None, mime_type=None, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.width: int = width
+        self.height: int = height
+        self.duration: int = duration
+        self.thumb: PhotoSize = thumb
+        self.file_name: str = file_name
+        self.mime_type: str = mime_type
+        self.file_size: int = file_size
+
+
+class VideoNote(JsonDeserializable):
+    """
+    This object represents a video message (available in Telegram apps as of v.4.0).
+
+    Telegram Documentation: https://core.telegram.org/bots/api#videonote
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param length: Video width and height (diameter of the video message) as defined by sender
+    :type length: :obj:`int`
+
+    :param duration: Duration of the video in seconds as defined by sender
+    :type duration: :obj:`int`
+
+    :param thumb: Optional. Video thumbnail
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :param file_size: Optional. File size in bytes
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.VideoNote`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, length, duration, thumb=None, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.length: int = length
+        self.duration: int = duration
+        self.thumb: PhotoSize = thumb
+        self.file_size: int = file_size
+
+
+class Contact(JsonDeserializable):
+    """
+    This object represents a phone contact.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#contact
+
+    :param phone_number: Contact's phone number
+    :type phone_number: :obj:`str`
+
+    :param first_name: Contact's first name
+    :type first_name: :obj:`str`
+
+    :param last_name: Optional. Contact's last name
+    :type last_name: :obj:`str`
+
+    :param user_id: Optional. Contact's user identifier in Telegram. This number may have more than 32 significant bits 
+        and some programming languages may have difficulty/silent defects in interpreting it. But it has at most 52 
+        significant bits, so a 64-bit integer or double-precision float type are safe for storing this identifier.
+    :type user_id: :obj:`int`
+
+    :param vcard: Optional. Additional data about the contact in the form of a vCard
+    :type vcard: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Contact`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, phone_number, first_name, last_name=None, user_id=None, vcard=None, **kwargs):
+        self.phone_number: str = phone_number
+        self.first_name: str = first_name
+        self.last_name: str = last_name
+        self.user_id: int = user_id
+        self.vcard: str = vcard
+
+
+class Location(JsonDeserializable, JsonSerializable, Dictionaryable):
+    """
+    This object represents a point on the map.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#location
+
+    :param longitude: Longitude as defined by sender
+    :type longitude: :obj:`float`
+
+    :param latitude: Latitude as defined by sender
+    :type latitude: :obj:`float`
+
+    :param horizontal_accuracy: Optional. The radius of uncertainty for the location, measured in meters; 0-1500
+    :type horizontal_accuracy: :obj:`float` number
+
+    :param live_period: Optional. Time relative to the message sending date, during which the location can be updated; 
+        in seconds. For active live locations only.
+    :type live_period: :obj:`int`
+
+    :param heading: Optional. The direction in which user is moving, in degrees; 1-360. For active live locations only.
+    :type heading: :obj:`int`
+
+    :param proximity_alert_radius: Optional. The maximum distance for proximity alerts about approaching another 
+        chat member, in meters. For sent live locations only.
+    :type proximity_alert_radius: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Location`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, longitude, latitude, horizontal_accuracy=None,
+                 live_period=None, heading=None, proximity_alert_radius=None, **kwargs):
+        self.longitude: float = longitude
+        self.latitude: float = latitude
+        self.horizontal_accuracy: float = horizontal_accuracy
+        self.live_period: int = live_period
+        self.heading: int = heading
+        self.proximity_alert_radius: int = proximity_alert_radius
+    
+    def to_json(self):
+        return json.dumps(self.to_dict())
+    
+    def to_dict(self):
+        return {
+            "longitude": self.longitude,
+            "latitude": self.latitude,
+            "horizontal_accuracy": self.horizontal_accuracy,
+            "live_period": self.live_period,
+            "heading": self.heading,
+            "proximity_alert_radius": self.proximity_alert_radius,
+        }
+
+
+class Venue(JsonDeserializable):
+    """
+    This object represents a venue.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#venue
+
+    :param location: Venue location. Can't be a live location
+    :type location: :class:`telebot.types.Location`
+
+    :param title: Name of the venue
+    :type title: :obj:`str`
+
+    :param address: Address of the venue
+    :type address: :obj:`str`
+
+    :param foursquare_id: Optional. Foursquare identifier of the venue
+    :type foursquare_id: :obj:`str`
+
+    :param foursquare_type: Optional. Foursquare type of the venue. (For example, “arts_entertainment/default”, 
+        “arts_entertainment/aquarium” or “food/icecream”.)
+    :type foursquare_type: :obj:`str`
+
+    :param google_place_id: Optional. Google Places identifier of the venue
+    :type google_place_id: :obj:`str`
+
+    :param google_place_type: Optional. Google Places type of the venue. (See supported types.)
+    :type google_place_type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Venue`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['location'] = Location.de_json(obj['location'])
+        return cls(**obj)
+
+    def __init__(self, location, title, address, foursquare_id=None, foursquare_type=None, 
+                 google_place_id=None, google_place_type=None, **kwargs):
+        self.location: Location = location
+        self.title: str = title
+        self.address: str = address
+        self.foursquare_id: str = foursquare_id
+        self.foursquare_type: str = foursquare_type
+        self.google_place_id: str = google_place_id
+        self.google_place_type: str = google_place_type
+
+
+class UserProfilePhotos(JsonDeserializable):
+    """
+    This object represent a user's profile pictures.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#userprofilephotos
+
+    :param total_count: Total number of profile pictures the target user has
+    :type total_count: :obj:`int`
+
+    :param photos: Requested profile pictures (in up to 4 sizes each)
+    :type photos: :obj:`list` of :obj:`list` of :class:`telebot.types.PhotoSize`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.UserProfilePhotos`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'photos' in obj:
+            photos = [[PhotoSize.de_json(y) for y in x] for x in obj['photos']]
+            obj['photos'] = photos
+        return cls(**obj)
+
+    def __init__(self, total_count, photos=None, **kwargs):
+        self.total_count: int = total_count
+        self.photos: List[PhotoSize] = photos
+
+
+class File(JsonDeserializable):
+    """
+    This object represents a file ready to be downloaded. The file can be downloaded via the link https://api.telegram.org/file/bot<token>/<file_path>. It is guaranteed that the link will be valid for at least 1 hour. When the link expires, a new one can be requested by calling getFile.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#file
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :param file_path: Optional. File path. Use https://api.telegram.org/file/bot<token>/<file_path> to get the 
+        file.
+    :type file_path: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.File`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, file_size=None, file_path=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.file_size: int = file_size
+        self.file_path: str = file_path
+
+
+class ForceReply(JsonSerializable):
+    """
+    Upon receiving a message with this object, Telegram clients will display a reply interface to the user (act as if the user has selected the bot's message and tapped 'Reply'). This can be extremely useful if you want to create user-friendly step-by-step interfaces without having to sacrifice privacy mode.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#forcereply
+
+    :param force_reply: Shows reply interface to the user, as if they manually selected the bot's message and tapped 
+        'Reply'
+    :type force_reply: :obj:`bool`
+
+    :param input_field_placeholder: Optional. The placeholder to be shown in the input field when the reply is active; 
+        1-64 characters
+    :type input_field_placeholder: :obj:`str`
+
+    :param selective: Optional. Use this parameter if you want to force reply from specific users only. Targets: 1) users 
+        that are @mentioned in the text of the Message object; 2) if the bot's message is a reply (has reply_to_message_id), 
+        sender of the original message.
+    :type selective: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ForceReply`
+    """
+    def __init__(self, selective: Optional[bool]=None, input_field_placeholder: Optional[str]=None):
+        self.selective: bool = selective
+        self.input_field_placeholder: str = input_field_placeholder
+
+    def to_json(self):
+        json_dict = {'force_reply': True}
+        if self.selective is not None:
+            json_dict['selective'] = self.selective
+        if self.input_field_placeholder:
+            json_dict['input_field_placeholder'] = self.input_field_placeholder
+        return json.dumps(json_dict)
+
+
+class ReplyKeyboardRemove(JsonSerializable):
+    """
+    Upon receiving a message with this object, Telegram clients will remove the current custom keyboard and display the default letter-keyboard. By default, custom keyboards are displayed until a new keyboard is sent by a bot. An exception is made for one-time keyboards that are hidden immediately after the user presses a button (see ReplyKeyboardMarkup).
+
+    Telegram Documentation: https://core.telegram.org/bots/api#replykeyboardremove
+
+    :param remove_keyboard: Requests clients to remove the custom keyboard (user will not be able to summon this 
+        keyboard; if you want to hide the keyboard from sight but keep it accessible, use one_time_keyboard in 
+        ReplyKeyboardMarkup)
+        Note that this parameter is set to True by default by the library. You cannot modify it.
+    :type remove_keyboard: :obj:`bool`
+
+    :param selective: Optional. Use this parameter if you want to remove the keyboard for specific users only. Targets: 
+        1) users that are @mentioned in the text of the Message object; 2) if the bot's message is a reply (has 
+        reply_to_message_id), sender of the original message.Example: A user votes in a poll, bot returns confirmation 
+        message in reply to the vote and removes the keyboard for that user, while still showing the keyboard with poll options 
+        to users who haven't voted yet.
+    :type selective: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ReplyKeyboardRemove`
+    """
+    def __init__(self, selective=None):
+        self.selective: bool = selective
+
+    def to_json(self):
+        json_dict = {'remove_keyboard': True}
+        if self.selective:
+            json_dict['selective'] = self.selective
+        return json.dumps(json_dict)
+
+
+class WebAppInfo(JsonDeserializable, Dictionaryable):
+    """
+    Describes a Web App.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#webappinfo
+
+    :param url: An HTTPS URL of a Web App to be opened with additional data as specified in Initializing Web Apps
+    :type url: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.WebAppInfo`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, url, **kwargs):
+        self.url: str = url
+
+    def to_dict(self):
+        return {'url': self.url}
+    
+
+class ReplyKeyboardMarkup(JsonSerializable):
+    """
+    This object represents a custom keyboard with reply options (see Introduction to bots for details and examples).
+
+    .. code-block:: python3
+        :caption: Example on creating ReplyKeyboardMarkup object
+
+        from telebot.types import ReplyKeyboardMarkup, KeyboardButton
+
+        markup = ReplyKeyboardMarkup(resize_keyboard=True)
+        markup.add(KeyboardButton('Text'))
+        # or:
+        markup.add('Text')
+
+        # display this markup:
+        bot.send_message(chat_id, 'Text', reply_markup=markup)
+
+    Telegram Documentation: https://core.telegram.org/bots/api#replykeyboardmarkup
+
+    :param keyboard: :obj:`list` of button rows, each represented by an :obj:`list` of 
+        :class:`telebot.types.KeyboardButton` objects
+    :type keyboard: :obj:`list` of :obj:`list` of :class:`telebot.types.KeyboardButton`
+
+    :param resize_keyboard: Optional. Requests clients to resize the keyboard vertically for optimal fit (e.g., make 
+        the keyboard smaller if there are just two rows of buttons). Defaults to false, in which case the custom keyboard is 
+        always of the same height as the app's standard keyboard.
+    :type resize_keyboard: :obj:`bool`
+
+    :param one_time_keyboard: Optional. Requests clients to hide the keyboard as soon as it's been used. The keyboard 
+        will still be available, but clients will automatically display the usual letter-keyboard in the chat - the user can 
+        press a special button in the input field to see the custom keyboard again. Defaults to false.
+    :type one_time_keyboard: :obj:`bool`
+
+    :param input_field_placeholder: Optional. The placeholder to be shown in the input field when the keyboard is 
+        active; 1-64 characters
+    :type input_field_placeholder: :obj:`str`
+
+    :param selective: Optional. Use this parameter if you want to show the keyboard to specific users only. Targets: 1) 
+        users that are @mentioned in the text of the Message object; 2) if the bot's message is a reply (has 
+        reply_to_message_id), sender of the original message.Example: A user requests to change the bot's language, bot 
+        replies to the request with a keyboard to select the new language. Other users in the group don't see the keyboard.
+    :type selective: :obj:`bool`
+
+    :param is_persistent: Optional. Use this parameter if you want to show the keyboard to specific users only.
+        Targets: 1) users that are @mentioned in the text of the Message object; 2) if the bot's message is a
+        reply (has reply_to_message_id), sender of the original message.
+        
+        Example: A user requests to change the bot's language, bot replies to the request with a keyboard to
+        select the new language. Other users in the group don't see the keyboard.
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ReplyKeyboardMarkup`
+    """
+    max_row_keys = 12
+
+    def __init__(self, resize_keyboard: Optional[bool]=None, one_time_keyboard: Optional[bool]=None, 
+            selective: Optional[bool]=None, row_width: int=3, input_field_placeholder: Optional[str]=None,
+            is_persistent: Optional[bool]=None):
+        if row_width > self.max_row_keys:
+            # Todo: Will be replaced with Exception in future releases
+            if not DISABLE_KEYLEN_ERROR:
+                logger.error('Telegram does not support reply keyboard row width over %d.' % self.max_row_keys)
+            row_width = self.max_row_keys
+
+        self.resize_keyboard: bool = resize_keyboard
+        self.one_time_keyboard: bool = one_time_keyboard
+        self.selective: bool = selective
+        self.row_width: int = row_width
+        self.input_field_placeholder: str = input_field_placeholder
+        self.keyboard: List[List[KeyboardButton]] = []
+        self.is_persistent: bool = is_persistent
+
+    def add(self, *args, row_width=None):
+        """
+        This function adds strings to the keyboard, while not exceeding row_width.
+        E.g. ReplyKeyboardMarkup#add("A", "B", "C") yields the json result {keyboard: [["A"], ["B"], ["C"]]}
+        when row_width is set to 1.
+        When row_width is set to 2, the following is the result of this function: {keyboard: [["A", "B"], ["C"]]}
+        See https://core.telegram.org/bots/api#replykeyboardmarkup
+
+        :param args: KeyboardButton to append to the keyboard
+        :type args: :obj:`str` or :class:`telebot.types.KeyboardButton`
+
+        :param row_width: width of row
+        :type row_width: :obj:`int`
+
+        :return: self, to allow function chaining.
+        :rtype: :class:`telebot.types.ReplyKeyboardMarkup`
+        """
+        if row_width is None:
+            row_width = self.row_width
+
+        if row_width > self.max_row_keys:
+            # Todo: Will be replaced with Exception in future releases
+            if not DISABLE_KEYLEN_ERROR:
+                logger.error('Telegram does not support reply keyboard row width over %d.' % self.max_row_keys)
+            row_width = self.max_row_keys
+        
+        for row in util.chunks(args, row_width):
+            button_array = []
+            for button in row:
+                if util.is_string(button):
+                    button_array.append({'text': button})
+                elif util.is_bytes(button):
+                    button_array.append({'text': button.decode('utf-8')})
+                else:
+                    button_array.append(button.to_dict())
+            self.keyboard.append(button_array)
+
+        return self
+
+    def row(self, *args):
+        """
+        Adds a list of KeyboardButton to the keyboard. This function does not consider row_width.
+        ReplyKeyboardMarkup#row("A")#row("B", "C")#to_json() outputs '{keyboard: [["A"], ["B", "C"]]}'
+        See https://core.telegram.org/bots/api#replykeyboardmarkup
+
+        :param args: strings
+        :type args: :obj:`str`
+
+        :return: self, to allow function chaining.
+        :rtype: :class:`telebot.types.ReplyKeyboardMarkup`
+        """
+
+        return self.add(*args, row_width=self.max_row_keys)
+
+    def to_json(self):
+        json_dict = {'keyboard': self.keyboard}
+        if self.one_time_keyboard is not None:
+            json_dict['one_time_keyboard'] = self.one_time_keyboard
+        if self.resize_keyboard is not None:
+            json_dict['resize_keyboard'] = self.resize_keyboard
+        if self.selective is not None:
+            json_dict['selective'] = self.selective
+        if self.input_field_placeholder:
+            json_dict['input_field_placeholder'] = self.input_field_placeholder
+        if self.is_persistent is not None:
+            json_dict['is_persistent'] = self.is_persistent
+        return json.dumps(json_dict)
+
+
+class KeyboardButtonPollType(Dictionaryable):
+    """
+    This object represents type of a poll, which is allowed to be created and sent when the corresponding button is pressed.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#keyboardbuttonpolltype
+
+    :param type: Optional. If quiz is passed, the user will be allowed to create only polls in the quiz mode. If regular is 
+        passed, only regular polls will be allowed. Otherwise, the user will be allowed to create a poll of any type.
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.KeyboardButtonPollType`
+    """
+    def __init__(self, type=''):
+        self.type: str = type
+
+    def to_dict(self):
+        return {'type': self.type}
+
+
+class KeyboardButton(Dictionaryable, JsonSerializable):
+    """
+    This object represents one button of the reply keyboard. For simple text buttons String can be used instead of this object to specify text of the button. Optional fields web_app, request_contact, request_location, and request_poll are mutually exclusive.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#keyboardbutton
+
+    :param text: Text of the button. If none of the optional fields are used, it will be sent as a message when the button is 
+        pressed
+    :type text: :obj:`str`
+
+    :param request_contact: Optional. If True, the user's phone number will be sent as a contact when the button is 
+        pressed. Available in private chats only.
+    :type request_contact: :obj:`bool`
+
+    :param request_location: Optional. If True, the user's current location will be sent when the button is pressed. 
+        Available in private chats only.
+    :type request_location: :obj:`bool`
+
+    :param request_poll: Optional. If specified, the user will be asked to create a poll and send it to the bot when the 
+        button is pressed. Available in private chats only.
+    :type request_poll: :class:`telebot.types.KeyboardButtonPollType`
+
+    :param web_app: Optional. If specified, the described Web App will be launched when the button is pressed. The Web App 
+        will be able to send a “web_app_data” service message. Available in private chats only.
+    :type web_app: :class:`telebot.types.WebAppInfo`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.KeyboardButton`
+    """
+    def __init__(self, text: str, request_contact: Optional[bool]=None, 
+            request_location: Optional[bool]=None, request_poll: Optional[KeyboardButtonPollType]=None,
+            web_app: WebAppInfo=None):
+        self.text: str = text
+        self.request_contact: bool = request_contact
+        self.request_location: bool = request_location
+        self.request_poll: KeyboardButtonPollType = request_poll
+        self.web_app: WebAppInfo = web_app
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {'text': self.text}
+        if self.request_contact is not None:
+            json_dict['request_contact'] = self.request_contact
+        if self.request_location is not None:
+            json_dict['request_location'] = self.request_location
+        if self.request_poll is not None:
+            json_dict['request_poll'] = self.request_poll.to_dict()
+        if self.web_app is not None:
+            json_dict['web_app'] = self.web_app.to_dict()
+        return json_dict
+
+
+class InlineKeyboardMarkup(Dictionaryable, JsonSerializable, JsonDeserializable):
+    """
+    This object represents an inline keyboard that appears right next to the message it belongs to.
+
+    .. note::
+        It is recommended to use :meth:`telebot.util.quick_markup` instead.
+
+    .. code-block:: python3
+        :caption: Example of a custom keyboard with buttons.
+
+        from telebot.util import quick_markup
+
+        markup = quick_markup(
+            {'text': 'Press me', 'callback_data': 'press'},
+            {'text': 'Press me too', 'callback_data': 'press_too'}
+        )
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinekeyboardmarkup
+
+    :param inline_keyboard: :obj:`list` of button rows, each represented by an :obj:`list` of 
+        :class:`telebot.types.InlineKeyboardButton` objects
+    :type inline_keyboard: :obj:`list` of :obj:`list` of :class:`telebot.types.InlineKeyboardButton`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineKeyboardMarkup`
+    """
+    max_row_keys = 8
+    
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        keyboard = [[InlineKeyboardButton.de_json(button) for button in row] for row in obj['inline_keyboard']]
+        return cls(keyboard = keyboard)
+
+    def __init__(self, keyboard=None, row_width=3):
+        if row_width > self.max_row_keys:
+            # Todo: Will be replaced with Exception in future releases
+            logger.error('Telegram does not support inline keyboard row width over %d.' % self.max_row_keys)
+            row_width = self.max_row_keys
+        
+        self.row_width: int = row_width
+        self.keyboard: List[List[InlineKeyboardButton]] = keyboard or []
+
+    def add(self, *args, row_width=None):
+        """
+        This method adds buttons to the keyboard without exceeding row_width.
+
+        E.g. InlineKeyboardMarkup.add("A", "B", "C") yields the json result:
+        {keyboard: [["A"], ["B"], ["C"]]}
+        when row_width is set to 1.
+        When row_width is set to 2, the result:
+        {keyboard: [["A", "B"], ["C"]]}
+        See https://core.telegram.org/bots/api#inlinekeyboardmarkup
+        
+        :param args: Array of InlineKeyboardButton to append to the keyboard
+        :type args: :obj:`list` of :class:`telebot.types.InlineKeyboardButton`
+
+        :param row_width: width of row
+        :type row_width: :obj:`int`
+
+        :return: self, to allow function chaining.
+        :rtype: :class:`telebot.types.InlineKeyboardMarkup`
+        """
+        if row_width is None:
+            row_width = self.row_width
+        
+        if row_width > self.max_row_keys:
+            # Todo: Will be replaced with Exception in future releases
+            logger.error('Telegram does not support inline keyboard row width over %d.' % self.max_row_keys)
+            row_width = self.max_row_keys
+        
+        for row in util.chunks(args, row_width):
+            button_array = [button for button in row]
+            self.keyboard.append(button_array)
+        
+        return self
+        
+    def row(self, *args):
+        """
+        Adds a list of InlineKeyboardButton to the keyboard.
+        This method does not consider row_width.
+
+        InlineKeyboardMarkup.row("A").row("B", "C").to_json() outputs:
+        '{keyboard: [["A"], ["B", "C"]]}'
+        See https://core.telegram.org/bots/api#inlinekeyboardmarkup
+        
+        :param args: Array of InlineKeyboardButton to append to the keyboard
+        :type args: :obj:`list` of :class:`telebot.types.InlineKeyboardButton`
+
+        :return: self, to allow function chaining.
+        :rtype: :class:`telebot.types.InlineKeyboardMarkup`
+        """
+         
+        return self.add(*args, row_width=self.max_row_keys)
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = dict()
+        json_dict['inline_keyboard'] = [[button.to_dict() for button in row] for row in self.keyboard]
+        return json_dict
+
+
+class InlineKeyboardButton(Dictionaryable, JsonSerializable, JsonDeserializable):
+    """
+    This object represents one button of an inline keyboard. You must use exactly one of the optional fields.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinekeyboardbutton
+
+    :param text: Label text on the button
+    :type text: :obj:`str`
+
+    :param url: Optional. HTTP or tg:// URL to be opened when the button is pressed. Links tg://user?id=<user_id> can be 
+        used to mention a user by their ID without using a username, if this is allowed by their privacy settings.
+    :type url: :obj:`str`
+
+    :param callback_data: Optional. Data to be sent in a callback query to the bot when button is pressed, 1-64 bytes
+    :type callback_data: :obj:`str`
+
+    :param web_app: Optional. Description of the Web App that will be launched when the user presses the button. The Web 
+        App will be able to send an arbitrary message on behalf of the user using the method answerWebAppQuery. Available only 
+        in private chats between a user and the bot.
+    :type web_app: :class:`telebot.types.WebAppInfo`
+
+    :param login_url: Optional. An HTTPS URL used to automatically authorize the user. Can be used as a replacement for 
+        the Telegram Login Widget.
+    :type login_url: :class:`telebot.types.LoginUrl`
+
+    :param switch_inline_query: Optional. If set, pressing the button will prompt the user to select one of their chats, 
+        open that chat and insert the bot's username and the specified inline query in the input field. May be empty, in which 
+        case just the bot's username will be inserted.Note: This offers an easy way for users to start using your bot in inline 
+        mode when they are currently in a private chat with it. Especially useful when combined with switch_pm… actions - in 
+        this case the user will be automatically returned to the chat they switched from, skipping the chat selection screen.
+    :type switch_inline_query: :obj:`str`
+
+    :param switch_inline_query_current_chat: Optional. If set, pressing the button will insert the bot's username 
+        and the specified inline query in the current chat's input field. May be empty, in which case only the bot's username 
+        will be inserted.This offers a quick way for the user to open your bot in inline mode in the same chat - good for selecting 
+        something from multiple options.
+    :type switch_inline_query_current_chat: :obj:`str`
+
+    :param callback_game: Optional. Description of the game that will be launched when the user presses the 
+        button. NOTE: This type of button must always be the first button in the first row.
+    :type callback_game: :class:`telebot.types.CallbackGame`
+
+    :param pay: Optional. Specify True, to send a Pay button. NOTE: This type of button must always be the first button in 
+        the first row and can only be used in invoice messages.
+    :type pay: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineKeyboardButton`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'login_url' in obj:
+            obj['login_url'] = LoginUrl.de_json(obj.get('login_url'))
+        if 'web_app' in obj:
+            obj['web_app'] = WebAppInfo.de_json(obj.get('web_app'))
+        
+        return cls(**obj)
+
+    def __init__(self, text, url=None, callback_data=None, web_app=None, switch_inline_query=None,
+                 switch_inline_query_current_chat=None, callback_game=None, pay=None, login_url=None, **kwargs):
+        self.text: str = text
+        self.url: str = url
+        self.callback_data: str = callback_data
+        self.web_app: WebAppInfo = web_app
+        self.switch_inline_query: str = switch_inline_query
+        self.switch_inline_query_current_chat: str = switch_inline_query_current_chat
+        self.callback_game = callback_game # Not Implemented
+        self.pay: bool = pay
+        self.login_url: LoginUrl = login_url
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {'text': self.text}
+        if self.url:
+            json_dict['url'] = self.url
+        if self.callback_data:
+            json_dict['callback_data'] = self.callback_data
+        if self.web_app:
+            json_dict['web_app'] = self.web_app.to_dict()
+        if self.switch_inline_query is not None:
+            json_dict['switch_inline_query'] = self.switch_inline_query
+        if self.switch_inline_query_current_chat is not None:
+            json_dict['switch_inline_query_current_chat'] = self.switch_inline_query_current_chat
+        if self.callback_game is not None:
+            json_dict['callback_game'] = self.callback_game
+        if self.pay is not None:
+            json_dict['pay'] = self.pay
+        if self.login_url is not None:
+            json_dict['login_url'] = self.login_url.to_dict()
+        return json_dict
+
+
+class LoginUrl(Dictionaryable, JsonSerializable, JsonDeserializable):
+    """
+    This object represents a parameter of the inline keyboard button used to automatically authorize a user. Serves as a great replacement for the Telegram Login Widget when the user is coming from Telegram. All the user needs to do is tap/click a button and confirm that they want to log in:
+
+    Telegram Documentation: https://core.telegram.org/bots/api#loginurl
+
+    :param url: An HTTPS URL to be opened with user authorization data added to the query string when the button is pressed. 
+        If the user refuses to provide authorization data, the original URL without information about the user will be 
+        opened. The data added is the same as described in Receiving authorization data. NOTE: You must always check the hash 
+        of the received data to verify the authentication and the integrity of the data as described in Checking 
+        authorization.
+    :type url: :obj:`str`
+
+    :param forward_text: Optional. New text of the button in forwarded messages.
+    :type forward_text: :obj:`str`
+
+    :param bot_username: Optional. Username of a bot, which will be used for user authorization. See Setting up a bot for 
+        more details. If not specified, the current bot's username will be assumed. The url's domain must be the same as the 
+        domain linked with the bot. See Linking your domain to the bot for more details.
+    :type bot_username: :obj:`str`
+
+    :param request_write_access: Optional. Pass True to request the permission for your bot to send messages to the 
+        user.
+    :type request_write_access: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.LoginUrl`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, url, forward_text=None, bot_username=None, request_write_access=None, **kwargs):
+        self.url: str = url
+        self.forward_text: str = forward_text
+        self.bot_username: str = bot_username
+        self.request_write_access: bool = request_write_access
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {'url': self.url}
+        if self.forward_text:
+            json_dict['forward_text'] = self.forward_text
+        if self.bot_username:
+            json_dict['bot_username'] = self.bot_username
+        if self.request_write_access is not None:
+            json_dict['request_write_access'] = self.request_write_access
+        return json_dict
+
+
+class CallbackQuery(JsonDeserializable):
+    """
+    This object represents an incoming callback query from a callback button in an inline keyboard. If the button that originated the query was attached to a message sent by the bot, the field message will be present. If the button was attached to a message sent via the bot (in inline mode), the field inline_message_id will be present. Exactly one of the fields data or game_short_name will be present.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#callbackquery
+
+    :param id: Unique identifier for this query
+    :type id: :obj:`str`
+
+    :param from_user: Sender
+    :type from_user: :class:`telebot.types.User`
+
+    :param message: Optional. Message with the callback button that originated the query. Note that message content and 
+        message date will not be available if the message is too old
+    :type message: :class:`telebot.types.Message`
+
+    :param inline_message_id: Optional. Identifier of the message sent via the bot in inline mode, that originated the 
+        query.
+    :type inline_message_id: :obj:`str`
+
+    :param chat_instance: Global identifier, uniquely corresponding to the chat to which the message with the callback 
+        button was sent. Useful for high scores in games.
+    :type chat_instance: :obj:`str`
+
+    :param data: Optional. Data associated with the callback button. Be aware that the message originated the query can 
+        contain no callback buttons with this data.
+    :type data: :obj:`str`
+
+    :param game_short_name: Optional. Short name of a Game to be returned, serves as the unique identifier for the game
+    :type game_short_name: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.CallbackQuery`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if not "data" in obj:
+            # "data" field is Optional in the API, but historically is mandatory in the class constructor
+            obj['data'] = None
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        if 'message' in obj:
+            obj['message'] = Message.de_json(obj.get('message'))
+        obj['json_string'] = json_string
+        return cls(**obj)
+
+    def __init__(self, id, from_user, data, chat_instance, json_string, message=None, inline_message_id=None, game_short_name=None, **kwargs):
+        self.id: int = id
+        self.from_user: User = from_user
+        self.message: Message = message
+        self.inline_message_id: str = inline_message_id
+        self.chat_instance: str = chat_instance
+        self.data: str = data
+        self.game_short_name: str = game_short_name
+        self.json = json_string
+        
+        
+class ChatPhoto(JsonDeserializable):
+    """
+    This object represents a chat photo.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatphoto
+
+    :param small_file_id: File identifier of small (160x160) chat photo. This file_id can be used only for photo 
+        download and only for as long as the photo is not changed.
+    :type small_file_id: :obj:`str`
+
+    :param small_file_unique_id: Unique file identifier of small (160x160) chat photo, which is supposed to be the same 
+        over time and for different bots. Can't be used to download or reuse the file.
+    :type small_file_unique_id: :obj:`str`
+
+    :param big_file_id: File identifier of big (640x640) chat photo. This file_id can be used only for photo download and 
+        only for as long as the photo is not changed.
+    :type big_file_id: :obj:`str`
+
+    :param big_file_unique_id: Unique file identifier of big (640x640) chat photo, which is supposed to be the same over 
+        time and for different bots. Can't be used to download or reuse the file.
+    :type big_file_unique_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatPhoto`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, small_file_id, small_file_unique_id, big_file_id, big_file_unique_id, **kwargs):
+        self.small_file_id: str = small_file_id
+        self.small_file_unique_id: str = small_file_unique_id
+        self.big_file_id: str = big_file_id
+        self.big_file_unique_id: str = big_file_unique_id
+
+
+class ChatMember(JsonDeserializable):
+    """
+    This object contains information about one member of a chat.
+    Currently, the following 6 types of chat members are supported:
+    
+    * :class:`telebot.types.ChatMemberOwner`
+    * :class:`telebot.types.ChatMemberAdministrator`
+    * :class:`telebot.types.ChatMemberMember`
+    * :class:`telebot.types.ChatMemberRestricted`
+    * :class:`telebot.types.ChatMemberLeft`
+    * :class:`telebot.types.ChatMemberBanned`
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmember
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['user'] = User.de_json(obj['user'])
+        member_type = obj['status']
+        # Ordered according to estimated appearance frequency.
+        if member_type == "member":
+            return ChatMemberMember(**obj)
+        elif member_type == "left":
+            return ChatMemberLeft(**obj)
+        elif member_type == "kicked":
+            return ChatMemberBanned(**obj)
+        elif member_type == "restricted":
+            return ChatMemberRestricted(**obj)
+        elif member_type == "administrator":
+            return ChatMemberAdministrator(**obj)
+        elif member_type == "creator":
+            return ChatMemberOwner(**obj)
+        else:
+            # Should not be here. For "if something happen" compatibility
+            return cls(**obj)
+
+    def __init__(self, user, status, custom_title=None, is_anonymous=None, can_be_edited=None,
+                 can_post_messages=None, can_edit_messages=None, can_delete_messages=None,
+                 can_restrict_members=None, can_promote_members=None, can_change_info=None,
+                 can_invite_users=None,  can_pin_messages=None, is_member=None,
+                 can_send_messages=None, can_send_media_messages=None, can_send_polls=None,
+                 can_send_other_messages=None, can_add_web_page_previews=None,  
+                 can_manage_chat=None, can_manage_video_chats=None, 
+                 until_date=None, can_manage_topics=None, **kwargs):
+        self.user: User = user
+        self.status: str = status
+        self.custom_title: str = custom_title
+        self.is_anonymous: bool = is_anonymous 
+        self.can_be_edited: bool = can_be_edited
+        self.can_post_messages: bool = can_post_messages
+        self.can_edit_messages: bool = can_edit_messages
+        self.can_delete_messages: bool = can_delete_messages
+        self.can_restrict_members: bool = can_restrict_members
+        self.can_promote_members: bool = can_promote_members
+        self.can_change_info: bool = can_change_info
+        self.can_invite_users: bool = can_invite_users
+        self.can_pin_messages: bool = can_pin_messages
+        self.is_member: bool = is_member
+        self.can_send_messages: bool = can_send_messages
+        self.can_send_media_messages: bool = can_send_media_messages
+        self.can_send_polls: bool = can_send_polls
+        self.can_send_other_messages: bool = can_send_other_messages
+        self.can_add_web_page_previews: bool = can_add_web_page_previews
+        self.can_manage_chat: bool = can_manage_chat
+        self.can_manage_video_chats: bool = can_manage_video_chats
+        self.can_manage_voice_chats: bool = self.can_manage_video_chats   # deprecated, for backward compatibility
+        self.until_date: int = until_date
+        self.can_manage_topics: bool = can_manage_topics
+
+
+class ChatMemberOwner(ChatMember):
+    """
+    Represents a chat member that owns the chat and has all administrator privileges.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberowner
+
+    :param status: The member's status in the chat, always “creator”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :param is_anonymous: True, if the user's presence in the chat is hidden
+    :type is_anonymous: :obj:`bool`
+
+    :param custom_title: Optional. Custom title for this user
+    :type custom_title: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberOwner`
+    """
+    pass
+
+
+class ChatMemberAdministrator(ChatMember):
+    """
+    Represents a chat member that has some additional privileges.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberadministrator
+
+    :param status: The member's status in the chat, always “administrator”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :param can_be_edited: True, if the bot is allowed to edit administrator privileges of that user
+    :type can_be_edited: :obj:`bool`
+
+    :param is_anonymous: True, if the user's presence in the chat is hidden
+    :type is_anonymous: :obj:`bool`
+
+    :param can_manage_chat: True, if the administrator can access the chat event log, chat statistics, message 
+        statistics in channels, see channel members, see anonymous administrators in supergroups and ignore slow mode. 
+        Implied by any other administrator privilege
+    :type can_manage_chat: :obj:`bool`
+
+    :param can_delete_messages: True, if the administrator can delete messages of other users
+    :type can_delete_messages: :obj:`bool`
+
+    :param can_manage_video_chats: True, if the administrator can manage video chats
+    :type can_manage_video_chats: :obj:`bool`
+
+    :param can_restrict_members: True, if the administrator can restrict, ban or unban chat members
+    :type can_restrict_members: :obj:`bool`
+
+    :param can_promote_members: True, if the administrator can add new administrators with a subset of their own 
+        privileges or demote administrators that he has promoted, directly or indirectly (promoted by administrators that 
+        were appointed by the user)
+    :type can_promote_members: :obj:`bool`
+
+    :param can_change_info: True, if the user is allowed to change the chat title, photo and other settings
+    :type can_change_info: :obj:`bool`
+
+    :param can_invite_users: True, if the user is allowed to invite new users to the chat
+    :type can_invite_users: :obj:`bool`
+
+    :param can_post_messages: Optional. True, if the administrator can post in the channel; channels only
+    :type can_post_messages: :obj:`bool`
+
+    :param can_edit_messages: Optional. True, if the administrator can edit messages of other users and can pin 
+        messages; channels only
+    :type can_edit_messages: :obj:`bool`
+
+    :param can_pin_messages: Optional. True, if the user is allowed to pin messages; groups and supergroups only
+    :type can_pin_messages: :obj:`bool`
+
+    :param can_manage_topics: Optional. True, if the user is allowed to create, rename, close, and reopen forum topics;
+        supergroups only
+    :type can_manage_topics: :obj:`bool`
+
+    :param custom_title: Optional. Custom title for this user
+    :type custom_title: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberAdministrator`
+    """
+    pass
+
+
+class ChatMemberMember(ChatMember):
+    """
+    Represents a chat member that has no additional privileges or restrictions.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmembermember
+
+    :param status: The member's status in the chat, always “member”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberMember`
+    """
+    pass
+
+
+class ChatMemberRestricted(ChatMember):
+    """
+    Represents a chat member that is under certain restrictions in the chat. Supergroups only.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberrestricted
+
+    :param status: The member's status in the chat, always “restricted”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :param is_member: True, if the user is a member of the chat at the moment of the request
+    :type is_member: :obj:`bool`
+
+    :param can_change_info: True, if the user is allowed to change the chat title, photo and other settings
+    :type can_change_info: :obj:`bool`
+
+    :param can_invite_users: True, if the user is allowed to invite new users to the chat
+    :type can_invite_users: :obj:`bool`
+
+    :param can_pin_messages: True, if the user is allowed to pin messages
+    :type can_pin_messages: :obj:`bool`
+
+    :param can_manage_topics: True, if the user is allowed to create forum topics
+    :type can_manage_topics: :obj:`bool`
+
+    :param can_send_messages: True, if the user is allowed to send text messages, contacts, locations and venues
+    :type can_send_messages: :obj:`bool`
+
+    :param can_send_media_messages: True, if the user is allowed to send audios, documents, photos, videos, video 
+        notes and voice notes
+    :type can_send_media_messages: :obj:`bool`
+
+    :param can_send_polls: True, if the user is allowed to send polls
+    :type can_send_polls: :obj:`bool`
+
+    :param can_send_other_messages: True, if the user is allowed to send animations, games, stickers and use inline 
+        bots
+    :type can_send_other_messages: :obj:`bool`
+
+    :param can_add_web_page_previews: True, if the user is allowed to add web page previews to their messages
+    :type can_add_web_page_previews: :obj:`bool`
+
+    :param until_date: Date when restrictions will be lifted for this user; unix time. If 0, then the user is restricted 
+        forever
+    :type until_date: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberRestricted`
+    """
+    pass
+
+
+class ChatMemberLeft(ChatMember):
+    """
+    Represents a chat member that isn't currently a member of the chat, but may join it themselves.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberleft
+
+    :param status: The member's status in the chat, always “left”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberLeft`
+    """
+    pass
+
+
+class ChatMemberBanned(ChatMember):
+    """
+    Represents a chat member that was banned in the chat and can't return to the chat or view chat messages.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatmemberbanned
+
+    :param status: The member's status in the chat, always “kicked”
+    :type status: :obj:`str`
+
+    :param user: Information about the user
+    :type user: :class:`telebot.types.User`
+
+    :param until_date: Date when restrictions will be lifted for this user; unix time. If 0, then the user is banned 
+        forever
+    :type until_date: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatMemberBanned`
+    """
+    pass
+
+
+class ChatPermissions(JsonDeserializable, JsonSerializable, Dictionaryable):
+    """
+    Describes actions that a non-administrator user is allowed to take in a chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatpermissions
+
+    :param can_send_messages: Optional. True, if the user is allowed to send text messages, contacts, locations and 
+        venues
+    :type can_send_messages: :obj:`bool`
+
+    :param can_send_media_messages: Optional. True, if the user is allowed to send audios, documents, photos, videos, 
+        video notes and voice notes, implies can_send_messages
+    :type can_send_media_messages: :obj:`bool`
+
+    :param can_send_polls: Optional. True, if the user is allowed to send polls, implies can_send_messages
+    :type can_send_polls: :obj:`bool`
+
+    :param can_send_other_messages: Optional. True, if the user is allowed to send animations, games, stickers and use 
+        inline bots, implies can_send_media_messages
+    :type can_send_other_messages: :obj:`bool`
+
+    :param can_add_web_page_previews: Optional. True, if the user is allowed to add web page previews to their 
+        messages, implies can_send_media_messages
+    :type can_add_web_page_previews: :obj:`bool`
+
+    :param can_change_info: Optional. True, if the user is allowed to change the chat title, photo and other settings. 
+        Ignored in public supergroups
+    :type can_change_info: :obj:`bool`
+
+    :param can_invite_users: Optional. True, if the user is allowed to invite new users to the chat
+    :type can_invite_users: :obj:`bool`
+
+    :param can_pin_messages: Optional. True, if the user is allowed to pin messages. Ignored in public supergroups
+    :type can_pin_messages: :obj:`bool`
+
+    :param can_manage_topics: Optional. True, if the user is allowed to create forum topics. If omitted defaults to the
+        value of can_pin_messages
+    :type can_manage_topics: :obj:`bool`    
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatPermissions`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return json_string
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, can_send_messages=None, can_send_media_messages=None,
+                 can_send_polls=None, can_send_other_messages=None,
+                 can_add_web_page_previews=None, can_change_info=None,
+                 can_invite_users=None, can_pin_messages=None, 
+                 can_manage_topics=None, **kwargs):
+        self.can_send_messages: bool = can_send_messages
+        self.can_send_media_messages: bool = can_send_media_messages
+        self.can_send_polls: bool = can_send_polls
+        self.can_send_other_messages: bool = can_send_other_messages
+        self.can_add_web_page_previews: bool = can_add_web_page_previews
+        self.can_change_info: bool = can_change_info
+        self.can_invite_users: bool = can_invite_users
+        self.can_pin_messages: bool = can_pin_messages
+        self.can_manage_topics: bool = can_manage_topics
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = dict()
+        if self.can_send_messages is not None:
+            json_dict['can_send_messages'] = self.can_send_messages
+        if self.can_send_media_messages is not None:
+            json_dict['can_send_media_messages'] = self.can_send_media_messages
+        if self.can_send_polls is not None:
+            json_dict['can_send_polls'] = self.can_send_polls
+        if self.can_send_other_messages is not None:
+            json_dict['can_send_other_messages'] = self.can_send_other_messages
+        if self.can_add_web_page_previews is not None:
+            json_dict['can_add_web_page_previews'] = self.can_add_web_page_previews
+        if self.can_change_info is not None:
+            json_dict['can_change_info'] = self.can_change_info
+        if self.can_invite_users is not None:
+            json_dict['can_invite_users'] = self.can_invite_users
+        if self.can_pin_messages is not None:
+            json_dict['can_pin_messages'] = self.can_pin_messages
+        if self.can_manage_topics is not None:
+            json_dict['can_manage_topics'] = self.can_manage_topics
+        
+        return json_dict
+
+
+class BotCommand(JsonSerializable, JsonDeserializable, Dictionaryable):
+    """
+    This object represents a bot command.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommand
+
+    :param command: Text of the command; 1-32 characters. Can contain only lowercase English letters, digits and 
+        underscores.
+    :type command: :obj:`str`
+
+    :param description: Description of the command; 1-256 characters.
+    :type description: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommand`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, command, description):
+        self.command: str = command
+        self.description: str = description
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {'command': self.command, 'description': self.description}
+
+
+# BotCommandScopes
+
+class BotCommandScope(ABC, JsonSerializable):
+    """
+    This object represents the scope to which bot commands are applied. Currently, the following 7 scopes are supported:
+
+    * :class:`BotCommandScopeDefault`
+    * :class:`BotCommandScopeAllPrivateChats`
+    * :class:`BotCommandScopeAllGroupChats`
+    * :class:`BotCommandScopeAllChatAdministrators`
+    * :class:`BotCommandScopeChat`
+    * :class:`BotCommandScopeChatAdministrators`
+    * :class:`BotCommandScopeChatMember`
+
+    Determining list of commands
+    The following algorithm is used to determine the list of commands for a particular user viewing the bot menu. The first list of commands which is set is returned:
+
+    Commands in the chat with the bot:
+
+    * :class:`BotCommandScopeChat` + language_code
+    * :class:`BotCommandScopeChat`
+    * :class:`BotCommandScopeAllPrivateChats` + language_code
+    * :class:`BotCommandScopeAllPrivateChats`
+    * :class:`BotCommandScopeDefault` + language_code
+    * :class:`BotCommandScopeDefault`
+
+    Commands in group and supergroup chats:
+
+    * :class:`BotCommandScopeChatMember` + language_code
+    * :class:`BotCommandScopeChatMember`
+    * :class:`BotCommandScopeChatAdministrators` + language_code (administrators only)
+    * :class:`BotCommandScopeChatAdministrators` (administrators only)
+    * :class:`BotCommandScopeChat` + language_code
+    * :class:`BotCommandScopeChat`
+    * :class:`BotCommandScopeAllChatAdministrators` + language_code (administrators only)
+    * :class:`BotCommandScopeAllChatAdministrators` (administrators only)
+    * :class:`BotCommandScopeAllGroupChats` + language_code
+    * :class:`BotCommandScopeAllGroupChats`
+    * :class:`BotCommandScopeDefault` + language_code
+    * :class:`BotCommandScopeDefault`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScope`
+    """
+    def __init__(self, type='default', chat_id=None, user_id=None):
+        self.type: str = type
+        self.chat_id: Optional[Union[int, str]] = chat_id
+        self.user_id: Optional[Union[int, str]] = user_id
+
+    def to_json(self):
+        json_dict = {'type': self.type}
+        if self.chat_id:
+            json_dict['chat_id'] = self.chat_id
+        if self.user_id:
+            json_dict['user_id'] = self.user_id
+        return json.dumps(json_dict)
+
+
+class BotCommandScopeDefault(BotCommandScope):
+    """
+    Represents the default scope of bot commands. Default commands are used if no commands with a narrower scope are specified for the user.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopedefault
+
+    :param type: Scope type, must be default
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeDefault`
+    """
+    def __init__(self):
+        """
+        Represents the default scope of bot commands.
+        Default commands are used if no commands with a narrower scope are specified for the user.
+        """
+        super(BotCommandScopeDefault, self).__init__(type='default')
+
+
+class BotCommandScopeAllPrivateChats(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering all private chats.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopeallprivatechats
+
+    :param type: Scope type, must be all_private_chats
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeAllPrivateChats`
+    """
+    def __init__(self):
+        """
+        Represents the scope of bot commands, covering all private chats.
+        """
+        super(BotCommandScopeAllPrivateChats, self).__init__(type='all_private_chats')
+
+
+class BotCommandScopeAllGroupChats(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering all group and supergroup chats.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopeallgroupchats
+
+    :param type: Scope type, must be all_group_chats
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeAllGroupChats`
+    """
+    def __init__(self):
+        """
+        Represents the scope of bot commands, covering all group and supergroup chats.
+        """
+        super(BotCommandScopeAllGroupChats, self).__init__(type='all_group_chats')
+
+
+class BotCommandScopeAllChatAdministrators(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering all group and supergroup chat administrators.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopeallchatadministrators
+
+    :param type: Scope type, must be all_chat_administrators
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeAllChatAdministrators`
+    """
+    def __init__(self):
+        """
+        Represents the scope of bot commands, covering all group and supergroup chat administrators.
+        """
+        super(BotCommandScopeAllChatAdministrators, self).__init__(type='all_chat_administrators')
+
+
+class BotCommandScopeChat(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering a specific chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopechat
+
+    :param type: Scope type, must be chat
+    :type type: :obj:`str`
+
+    :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format 
+        @supergroupusername)
+    :type chat_id: :obj:`int` or :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeChat`
+    """
+    def __init__(self, chat_id=None):
+        super(BotCommandScopeChat, self).__init__(type='chat', chat_id=chat_id)
+
+
+class BotCommandScopeChatAdministrators(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering all administrators of a specific group or supergroup chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopechatadministrators
+
+    :param type: Scope type, must be chat_administrators
+    :type type: :obj:`str`
+
+    :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format 
+        @supergroupusername)
+    :type chat_id: :obj:`int` or :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeChatAdministrators`
+    """
+    def __init__(self, chat_id=None):
+        super(BotCommandScopeChatAdministrators, self).__init__(type='chat_administrators', chat_id=chat_id)
+
+
+class BotCommandScopeChatMember(BotCommandScope):
+    """
+    Represents the scope of bot commands, covering a specific member of a group or supergroup chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#botcommandscopechatmember
+
+    :param type: Scope type, must be chat_member
+    :type type: :obj:`str`
+
+    :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format 
+        @supergroupusername)
+    :type chat_id: :obj:`int` or :obj:`str`
+
+    :param user_id: Unique identifier of the target user
+    :type user_id: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.BotCommandScopeChatMember`
+    """
+    def __init__(self, chat_id=None, user_id=None):
+        super(BotCommandScopeChatMember, self).__init__(type='chat_member', chat_id=chat_id, user_id=user_id)
+
+
+# InlineQuery
+
+class InlineQuery(JsonDeserializable):
+    """
+    This object represents an incoming inline query. When the user sends an empty query, your bot could return some default or trending results.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequery
+
+    :param id: Unique identifier for this query
+    :type id: :obj:`str`
+
+    :param from_user: Sender
+    :type from_user: :class:`telebot.types.User`
+
+    :param query: Text of the query (up to 256 characters)
+    :type query: :obj:`str`
+
+    :param offset: Offset of the results to be returned, can be controlled by the bot
+    :type offset: :obj:`str`
+
+    :param chat_type: Optional. Type of the chat from which the inline query was sent. Can be either “sender” for a private 
+        chat with the inline query sender, “private”, “group”, “supergroup”, or “channel”. The chat type should be always 
+        known for requests sent from official clients and most third-party clients, unless the request was sent from a secret 
+        chat
+    :type chat_type: :obj:`str`
+
+    :param location: Optional. Sender location, only for bots that request user location
+    :type location: :class:`telebot.types.Location`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQuery`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        if 'location' in obj:
+            obj['location'] = Location.de_json(obj['location'])
+        return cls(**obj)
+
+    def __init__(self, id, from_user, query, offset, chat_type=None, location=None, **kwargs):
+        self.id: int = id
+        self.from_user: User = from_user
+        self.query: str = query
+        self.offset: str = offset
+        self.chat_type: str = chat_type
+        self.location: Location = location
+
+
+class InputTextMessageContent(Dictionaryable):
+    """
+    Represents the content of a text message to be sent as the result of an inline query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputtextmessagecontent
+
+    :param message_text: Text of the message to be sent, 1-4096 characters
+    :type message_text: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the message text. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param entities: Optional. List of special entities that appear in message text, which can be specified instead of 
+        parse_mode
+    :type entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param disable_web_page_preview: Optional. Disables link previews for links in the sent message
+    :type disable_web_page_preview: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputTextMessageContent`
+    """
+    def __init__(self, message_text, parse_mode=None, entities=None, disable_web_page_preview=None):
+        self.message_text: str = message_text
+        self.parse_mode: str = parse_mode
+        self.entities: List[MessageEntity] = entities
+        self.disable_web_page_preview: bool = disable_web_page_preview
+
+    def to_dict(self):
+        json_dict = {'message_text': self.message_text}
+        if self.parse_mode:
+            json_dict['parse_mode'] = self.parse_mode
+        if self.entities:
+            json_dict['entities'] = MessageEntity.to_list_of_dicts(self.entities)
+        if self.disable_web_page_preview is not None:
+            json_dict['disable_web_page_preview'] = self.disable_web_page_preview
+        return json_dict
+
+
+class InputLocationMessageContent(Dictionaryable):
+    """
+    Represents the content of a location message to be sent as the result of an inline query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputlocationmessagecontent
+
+    :param latitude: Latitude of the location in degrees
+    :type latitude: :obj:`float`
+
+    :param longitude: Longitude of the location in degrees
+    :type longitude: :obj:`float`
+
+    :param horizontal_accuracy: Optional. The radius of uncertainty for the location, measured in meters; 0-1500
+    :type horizontal_accuracy: :obj:`float` number
+
+    :param live_period: Optional. Period in seconds for which the location can be updated, should be between 60 and 
+        86400.
+    :type live_period: :obj:`int`
+
+    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1 
+        and 360 if specified.
+    :type heading: :obj:`int`
+
+    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about 
+        approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+    :type proximity_alert_radius: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputLocationMessageContent`
+    """
+    def __init__(self, latitude, longitude, horizontal_accuracy=None, live_period=None, heading=None, proximity_alert_radius=None):
+        self.latitude: float = latitude
+        self.longitude: float = longitude
+        self.horizontal_accuracy: float = horizontal_accuracy
+        self.live_period: int = live_period
+        self.heading: int = heading
+        self.proximity_alert_radius: int = proximity_alert_radius
+
+    def to_dict(self):
+        json_dict = {'latitude': self.latitude, 'longitude': self.longitude}
+        if self.horizontal_accuracy:
+            json_dict['horizontal_accuracy'] = self.horizontal_accuracy
+        if self.live_period:
+            json_dict['live_period'] = self.live_period
+        if self.heading:
+            json_dict['heading'] = self.heading
+        if self.proximity_alert_radius:
+            json_dict['proximity_alert_radius'] = self.proximity_alert_radius
+        return json_dict
+
+
+class InputVenueMessageContent(Dictionaryable):
+    """
+    Represents the content of a venue message to be sent as the result of an inline query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputvenuemessagecontent
+
+    :param latitude: Latitude of the venue in degrees
+    :type latitude: :obj:`float`
+
+    :param longitude: Longitude of the venue in degrees
+    :type longitude: :obj:`float`
+
+    :param title: Name of the venue
+    :type title: :obj:`str`
+
+    :param address: Address of the venue
+    :type address: :obj:`str`
+
+    :param foursquare_id: Optional. Foursquare identifier of the venue, if known
+    :type foursquare_id: :obj:`str`
+
+    :param foursquare_type: Optional. Foursquare type of the venue, if known. (For example, 
+        “arts_entertainment/default”, “arts_entertainment/aquarium” or “food/icecream”.)
+    :type foursquare_type: :obj:`str`
+
+    :param google_place_id: Optional. Google Places identifier of the venue
+    :type google_place_id: :obj:`str`
+
+    :param google_place_type: Optional. Google Places type of the venue. (See supported types.)
+    :type google_place_type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputVenueMessageContent`
+    """
+    def __init__(self, latitude, longitude, title, address, foursquare_id=None, foursquare_type=None, 
+                 google_place_id=None, google_place_type=None):
+        self.latitude: float = latitude
+        self.longitude: float = longitude
+        self.title: str = title
+        self.address: str = address
+        self.foursquare_id: str = foursquare_id
+        self.foursquare_type: str = foursquare_type
+        self.google_place_id: str = google_place_id
+        self.google_place_type: str = google_place_type
+
+    def to_dict(self):
+        json_dict = {
+            'latitude': self.latitude,
+            'longitude': self.longitude,
+            'title': self.title,
+            'address' : self.address
+        }
+        if self.foursquare_id:
+            json_dict['foursquare_id'] = self.foursquare_id
+        if self.foursquare_type:
+            json_dict['foursquare_type'] = self.foursquare_type
+        if self.google_place_id:
+            json_dict['google_place_id'] = self.google_place_id
+        if self.google_place_type:
+            json_dict['google_place_type'] = self.google_place_type
+        return json_dict
+
+
+class InputContactMessageContent(Dictionaryable):
+    """
+    Represents the content of a contact message to be sent as the result of an inline query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputcontactmessagecontent
+
+    :param phone_number: Contact's phone number
+    :type phone_number: :obj:`str`
+
+    :param first_name: Contact's first name
+    :type first_name: :obj:`str`
+
+    :param last_name: Optional. Contact's last name
+    :type last_name: :obj:`str`
+
+    :param vcard: Optional. Additional data about the contact in the form of a vCard, 0-2048 bytes
+    :type vcard: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputContactMessageContent`
+    """
+    def __init__(self, phone_number, first_name, last_name=None, vcard=None):
+        self.phone_number: str = phone_number
+        self.first_name: str = first_name
+        self.last_name: str = last_name
+        self.vcard: str = vcard
+
+    def to_dict(self):
+        json_dict = {'phone_number': self.phone_number, 'first_name': self.first_name}
+        if self.last_name:
+            json_dict['last_name'] = self.last_name
+        if self.vcard:
+            json_dict['vcard'] = self.vcard
+        return json_dict
+
+
+class InputInvoiceMessageContent(Dictionaryable):
+    """
+    Represents the content of an invoice message to be sent as the result of an inline query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputinvoicemessagecontent
+
+    :param title: Product name, 1-32 characters
+    :type title: :obj:`str`
+
+    :param description: Product description, 1-255 characters
+    :type description: :obj:`str`
+
+    :param payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user, use for your 
+        internal processes.
+    :type payload: :obj:`str`
+
+    :param provider_token: Payment provider token, obtained via @BotFather
+    :type provider_token: :obj:`str`
+
+    :param currency: Three-letter ISO 4217 currency code, see more on currencies
+    :type currency: :obj:`str`
+
+    :param prices: Price breakdown, a JSON-serialized list of components (e.g. product price, tax, discount, delivery 
+        cost, delivery tax, bonus, etc.)
+    :type prices: :obj:`list` of :class:`telebot.types.LabeledPrice`
+
+    :param max_tip_amount: Optional. The maximum accepted amount for tips in the smallest units of the currency 
+        (integer, not float/double). For example, for a maximum tip of US$ 1.45 pass max_tip_amount = 145. See the exp 
+        parameter in currencies.json, it shows the number of digits past the decimal point for each currency (2 for the 
+        majority of currencies). Defaults to 0
+    :type max_tip_amount: :obj:`int`
+
+    :param suggested_tip_amounts: Optional. A JSON-serialized array of suggested amounts of tip in the smallest units 
+        of the currency (integer, not float/double). At most 4 suggested tip amounts can be specified. The suggested tip 
+        amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
+    :type suggested_tip_amounts: :obj:`list` of :obj:`int`
+
+    :param provider_data: Optional. A JSON-serialized object for data about the invoice, which will be shared with the 
+        payment provider. A detailed description of the required fields should be provided by the payment provider.
+    :type provider_data: :obj:`str`
+
+    :param photo_url: Optional. URL of the product photo for the invoice. Can be a photo of the goods or a marketing image 
+        for a service.
+    :type photo_url: :obj:`str`
+
+    :param photo_size: Optional. Photo size in bytes
+    :type photo_size: :obj:`int`
+
+    :param photo_width: Optional. Photo width
+    :type photo_width: :obj:`int`
+
+    :param photo_height: Optional. Photo height
+    :type photo_height: :obj:`int`
+
+    :param need_name: Optional. Pass True, if you require the user's full name to complete the order
+    :type need_name: :obj:`bool`
+
+    :param need_phone_number: Optional. Pass True, if you require the user's phone number to complete the order
+    :type need_phone_number: :obj:`bool`
+
+    :param need_email: Optional. Pass True, if you require the user's email address to complete the order
+    :type need_email: :obj:`bool`
+
+    :param need_shipping_address: Optional. Pass True, if you require the user's shipping address to complete the 
+        order
+    :type need_shipping_address: :obj:`bool`
+
+    :param send_phone_number_to_provider: Optional. Pass True, if the user's phone number should be sent to provider
+    :type send_phone_number_to_provider: :obj:`bool`
+
+    :param send_email_to_provider: Optional. Pass True, if the user's email address should be sent to provider
+    :type send_email_to_provider: :obj:`bool`
+
+    :param is_flexible: Optional. Pass True, if the final price depends on the shipping method
+    :type is_flexible: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputInvoiceMessageContent`
+    """
+    def __init__(self, title, description, payload, provider_token, currency, prices,
+            max_tip_amount=None, suggested_tip_amounts=None, provider_data=None,
+            photo_url=None, photo_size=None, photo_width=None, photo_height=None,
+            need_name=None, need_phone_number=None, need_email=None, need_shipping_address=None,
+            send_phone_number_to_provider=None, send_email_to_provider=None,
+            is_flexible=None):
+        self.title: str = title
+        self.description: str = description
+        self.payload: str = payload
+        self.provider_token: str = provider_token
+        self.currency: str = currency
+        self.prices: List[LabeledPrice] = prices
+        self.max_tip_amount: Optional[int] = max_tip_amount
+        self.suggested_tip_amounts: Optional[List[int]] = suggested_tip_amounts
+        self.provider_data: Optional[str] = provider_data
+        self.photo_url: Optional[str] = photo_url
+        self.photo_size: Optional[int] = photo_size
+        self.photo_width: Optional[int] = photo_width
+        self.photo_height: Optional[int] = photo_height
+        self.need_name: Optional[bool] = need_name
+        self.need_phone_number: Optional[bool] = need_phone_number
+        self.need_email: Optional[bool] = need_email
+        self.need_shipping_address: Optional[bool] = need_shipping_address
+        self.send_phone_number_to_provider: Optional[bool] = send_phone_number_to_provider
+        self.send_email_to_provider: Optional[bool] = send_email_to_provider
+        self.is_flexible: Optional[bool] = is_flexible
+    
+    def to_dict(self):
+        json_dict = {
+            'title': self.title, 
+            'description': self.description,
+            'payload': self.payload,
+            'provider_token': self.provider_token,
+            'currency': self.currency,
+            'prices': [LabeledPrice.to_dict(lp) for lp in self.prices]
+        }
+        if self.max_tip_amount:
+            json_dict['max_tip_amount'] = self.max_tip_amount 
+        if self.suggested_tip_amounts:
+            json_dict['suggested_tip_amounts'] = self.suggested_tip_amounts 
+        if self.provider_data:
+            json_dict['provider_data'] = self.provider_data 
+        if self.photo_url:
+            json_dict['photo_url'] = self.photo_url 
+        if self.photo_size:
+            json_dict['photo_size'] = self.photo_size 
+        if self.photo_width:
+            json_dict['photo_width'] = self.photo_width 
+        if self.photo_height:
+            json_dict['photo_height'] = self.photo_height 
+        if self.need_name is not None:
+            json_dict['need_name'] = self.need_name 
+        if self.need_phone_number is not None:
+            json_dict['need_phone_number'] = self.need_phone_number 
+        if self.need_email is not None:
+            json_dict['need_email'] = self.need_email 
+        if self.need_shipping_address is not None:
+            json_dict['need_shipping_address'] = self.need_shipping_address 
+        if self.send_phone_number_to_provider is not None:
+            json_dict['send_phone_number_to_provider'] = self.send_phone_number_to_provider      
+        if self.send_email_to_provider is not None:
+            json_dict['send_email_to_provider'] = self.send_email_to_provider 
+        if self.is_flexible is not None:
+            json_dict['is_flexible'] = self.is_flexible 
+        return json_dict
+
+
+class ChosenInlineResult(JsonDeserializable):
+    """
+    Represents a result of an inline query that was chosen by the user and sent to their chat partner.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#choseninlineresult
+
+    :param result_id: The unique identifier for the result that was chosen
+    :type result_id: :obj:`str`
+
+    :param from: The user that chose the result
+    :type from: :class:`telebot.types.User`
+
+    :param location: Optional. Sender location, only for bots that require user location
+    :type location: :class:`telebot.types.Location`
+
+    :param inline_message_id: Optional. Identifier of the sent inline message. Available only if there is an inline 
+        keyboard attached to the message. Will be also received in callback queries and can be used to edit the message.
+    :type inline_message_id: :obj:`str`
+
+    :param query: The query that was used to obtain the result
+    :type query: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChosenInlineResult`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        if 'location' in obj:
+            obj['location'] = Location.de_json(obj['location'])
+        return cls(**obj)
+
+    def __init__(self, result_id, from_user, query, location=None, inline_message_id=None, **kwargs):
+        self.result_id: str = result_id
+        self.from_user: User = from_user
+        self.location: Location = location
+        self.inline_message_id: str = inline_message_id
+        self.query: str = query
+
+
+class InlineQueryResultBase(ABC, Dictionaryable, JsonSerializable):
+    """
+    This object represents one result of an inline query. Telegram clients currently support results of the following 20 types:
+
+    * :class:`InlineQueryResultCachedAudio`
+    * :class:`InlineQueryResultCachedDocument`
+    * :class:`InlineQueryResultCachedGif`
+    * :class:`InlineQueryResultCachedMpeg4Gif`
+    * :class:`InlineQueryResultCachedPhoto`
+    * :class:`InlineQueryResultCachedSticker`
+    * :class:`InlineQueryResultCachedVideo`
+    * :class:`InlineQueryResultCachedVoice`
+    * :class:`InlineQueryResultArticle`
+    * :class:`InlineQueryResultAudio`
+    * :class:`InlineQueryResultContact`
+    * :class:`InlineQueryResultGame`
+    * :class:`InlineQueryResultDocument`
+    * :class:`InlineQueryResultGif`
+    * :class:`InlineQueryResultLocation`
+    * :class:`InlineQueryResultMpeg4Gif`
+    * :class:`InlineQueryResultPhoto`
+    * :class:`InlineQueryResultVenue`
+    * :class:`InlineQueryResultVideo`
+    * :class:`InlineQueryResultVoice`
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresult
+    """
+    # noinspection PyShadowingBuiltins
+    def __init__(self, type, id, title = None, caption = None, input_message_content = None,
+                 reply_markup = None, caption_entities = None, parse_mode = None):
+        self.type = type
+        self.id = id
+        self.title = title
+        self.caption = caption
+        self.input_message_content = input_message_content
+        self.reply_markup = reply_markup
+        self.caption_entities = caption_entities
+        self.parse_mode = parse_mode
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {
+            'type': self.type,
+            'id': self.id
+        }
+        if self.title:
+            json_dict['title'] = self.title
+        if self.caption:
+            json_dict['caption'] = self.caption
+        if self.input_message_content:
+            json_dict['input_message_content'] = self.input_message_content.to_dict()
+        if self.reply_markup:
+            json_dict['reply_markup'] = self.reply_markup.to_dict()
+        if self.caption_entities:
+            json_dict['caption_entities'] = MessageEntity.to_list_of_dicts(self.caption_entities)
+        if self.parse_mode:
+            json_dict['parse_mode'] = self.parse_mode
+        return json_dict
+
+
+class SentWebAppMessage(JsonDeserializable, Dictionaryable):
+    """
+    Describes an inline message sent by a Web App on behalf of a user.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#sentwebappmessage
+
+    :param inline_message_id: Optional. Identifier of the sent inline message. Available only if there is an inline 
+        keyboard attached to the message.
+    :type inline_message_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.SentWebAppMessage`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, inline_message_id=None):
+        self.inline_message_id = inline_message_id
+
+    def to_dict(self):
+        json_dict = {}
+        if self.inline_message_id:
+            json_dict['inline_message_id'] = self.inline_message_id
+        return json_dict
+
+
+class InlineQueryResultArticle(InlineQueryResultBase):
+    """
+    Represents a link to an article or web page.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultarticle
+
+    :param type: Type of the result, must be article
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 Bytes
+    :type id: :obj:`str`
+
+    :param title: Title of the result
+    :type title: :obj:`str`
+
+    :param input_message_content: Content of the message to be sent
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param url: Optional. URL of the result
+    :type url: :obj:`str`
+
+    :param hide_url: Optional. Pass True, if you don't want the URL to be shown in the message
+    :type hide_url: :obj:`bool`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param thumb_url: Optional. Url of the thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_width: Optional. Thumbnail width
+    :type thumb_width: :obj:`int`
+
+    :param thumb_height: Optional. Thumbnail height
+    :type thumb_height: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultArticle`
+    """
+    def __init__(self, id, title, input_message_content, reply_markup=None,
+                 url=None, hide_url=None, description=None, thumb_url=None, thumb_width=None, thumb_height=None):
+        super().__init__('article', id, title = title, input_message_content = input_message_content, reply_markup = reply_markup)
+        self.url = url
+        self.hide_url = hide_url
+        self.description = description
+        self.thumb_url = thumb_url
+        self.thumb_width = thumb_width
+        self.thumb_height = thumb_height
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        if self.url:
+            json_dict['url'] = self.url
+        if self.hide_url:
+            json_dict['hide_url'] = self.hide_url
+        if self.description:
+            json_dict['description'] = self.description
+        if self.thumb_url:
+            json_dict['thumb_url'] = self.thumb_url
+        if self.thumb_width:
+            json_dict['thumb_width'] = self.thumb_width
+        if self.thumb_height:
+            json_dict['thumb_height'] = self.thumb_height
+        return json_dict
+
+
+class InlineQueryResultPhoto(InlineQueryResultBase):
+    """
+    Represents a link to a photo. By default, this photo will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the photo.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultphoto
+
+    :param type: Type of the result, must be photo
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param photo_url: A valid URL of the photo. Photo must be in JPEG format. Photo size must not exceed 5MB
+    :type photo_url: :obj:`str`
+
+    :param thumb_url: URL of the thumbnail for the photo
+    :type thumb_url: :obj:`str`
+
+    :param photo_width: Optional. Width of the photo
+    :type photo_width: :obj:`int`
+
+    :param photo_height: Optional. Height of the photo
+    :type photo_height: :obj:`int`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param caption: Optional. Caption of the photo to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the photo caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the photo
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultPhoto`
+    """
+    def __init__(self, id, photo_url, thumb_url, photo_width=None, photo_height=None, title=None,
+                 description=None, caption=None, caption_entities=None, parse_mode=None, reply_markup=None, input_message_content=None):
+        super().__init__('photo', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.photo_url = photo_url
+        self.thumb_url = thumb_url
+        self.photo_width = photo_width
+        self.photo_height = photo_height
+        self.description = description
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['photo_url'] = self.photo_url
+        json_dict['thumb_url'] = self.thumb_url
+        if self.photo_width:
+            json_dict['photo_width'] = self.photo_width
+        if self.photo_height:
+            json_dict['photo_height'] = self.photo_height
+        if self.description:
+            json_dict['description'] = self.description
+        return json_dict
+
+
+class InlineQueryResultGif(InlineQueryResultBase):
+    """
+    Represents a link to an animated GIF file. By default, this animated GIF file will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultgif
+
+    :param type: Type of the result, must be gif
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param gif_url: A valid URL for the GIF file. File size must not exceed 1MB
+    :type gif_url: :obj:`str`
+
+    :param gif_width: Optional. Width of the GIF
+    :type gif_width: :obj:`int`
+
+    :param gif_height: Optional. Height of the GIF
+    :type gif_height: :obj:`int`
+
+    :param gif_duration: Optional. Duration of the GIF in seconds
+    :type gif_duration: :obj:`int`
+
+    :param thumb_url: URL of the static (JPEG or GIF) or animated (MPEG4) thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_mime_type: Optional. MIME type of the thumbnail, must be one of “image/jpeg”, “image/gif”, or 
+        “video/mp4”. Defaults to “image/jpeg”
+    :type thumb_mime_type: :obj:`str`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the GIF file to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the caption. See formatting options for more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the GIF animation
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultGif`
+    """
+    def __init__(self, id, gif_url, thumb_url, gif_width=None, gif_height=None,
+                 title=None, caption=None, caption_entities=None,
+                 reply_markup=None, input_message_content=None, gif_duration=None, parse_mode=None,
+                 thumb_mime_type=None):
+        super().__init__('gif', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.gif_url = gif_url
+        self.gif_width = gif_width
+        self.gif_height = gif_height
+        self.thumb_url = thumb_url
+        self.gif_duration = gif_duration
+        self.thumb_mime_type = thumb_mime_type
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['gif_url'] = self.gif_url
+        if self.gif_width:
+            json_dict['gif_width'] = self.gif_width
+        if self.gif_height:
+            json_dict['gif_height'] = self.gif_height
+        json_dict['thumb_url'] = self.thumb_url
+        if self.gif_duration:
+            json_dict['gif_duration'] = self.gif_duration
+        if self.thumb_mime_type:
+            json_dict['thumb_mime_type'] = self.thumb_mime_type
+        return json_dict
+
+
+class InlineQueryResultMpeg4Gif(InlineQueryResultBase):
+    """
+    Represents a link to a video animation (H.264/MPEG-4 AVC video without sound). By default, this animated MPEG-4 file will be sent by the user with optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultmpeg4gif
+
+    :param type: Type of the result, must be mpeg4_gif
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param mpeg4_url: A valid URL for the MPEG4 file. File size must not exceed 1MB
+    :type mpeg4_url: :obj:`str`
+
+    :param mpeg4_width: Optional. Video width
+    :type mpeg4_width: :obj:`int`
+
+    :param mpeg4_height: Optional. Video height
+    :type mpeg4_height: :obj:`int`
+
+    :param mpeg4_duration: Optional. Video duration in seconds
+    :type mpeg4_duration: :obj:`int`
+
+    :param thumb_url: URL of the static (JPEG or GIF) or animated (MPEG4) thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_mime_type: Optional. MIME type of the thumbnail, must be one of “image/jpeg”, “image/gif”, or 
+        “video/mp4”. Defaults to “image/jpeg”
+    :type thumb_mime_type: :obj:`str`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the MPEG-4 file to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the caption. See formatting options for more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the video animation
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultMpeg4Gif`
+    """
+    def __init__(self, id, mpeg4_url, thumb_url, mpeg4_width=None, mpeg4_height=None,
+                 title=None, caption=None, caption_entities=None,
+                 parse_mode=None, reply_markup=None, input_message_content=None, mpeg4_duration=None,
+                 thumb_mime_type=None):
+        super().__init__('mpeg4_gif', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.mpeg4_url = mpeg4_url
+        self.mpeg4_width = mpeg4_width
+        self.mpeg4_height = mpeg4_height
+        self.thumb_url = thumb_url
+        self.mpeg4_duration = mpeg4_duration
+        self.thumb_mime_type = thumb_mime_type
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['mpeg4_url'] = self.mpeg4_url
+        if self.mpeg4_width:
+            json_dict['mpeg4_width'] = self.mpeg4_width
+        if self.mpeg4_height:
+            json_dict['mpeg4_height'] = self.mpeg4_height
+        json_dict['thumb_url'] = self.thumb_url
+        if self.mpeg4_duration:
+            json_dict['mpeg4_duration '] = self.mpeg4_duration
+        if self.thumb_mime_type:
+            json_dict['thumb_mime_type'] = self.thumb_mime_type
+        return json_dict
+
+
+class InlineQueryResultVideo(InlineQueryResultBase):
+    """
+    Represents a link to a page containing an embedded video player or a video file. By default, this video file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the video.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvideo
+
+    :param type: Type of the result, must be video
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param video_url: A valid URL for the embedded video player or video file
+    :type video_url: :obj:`str`
+
+    :param mime_type: MIME type of the content of the video URL, “text/html” or “video/mp4”
+    :type mime_type: :obj:`str`
+
+    :param thumb_url: URL of the thumbnail (JPEG only) for the video
+    :type thumb_url: :obj:`str`
+
+    :param title: Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the video to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the video caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param video_width: Optional. Video width
+    :type video_width: :obj:`int`
+
+    :param video_height: Optional. Video height
+    :type video_height: :obj:`int`
+
+    :param video_duration: Optional. Video duration in seconds
+    :type video_duration: :obj:`int`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the video. This field is 
+        required if InlineQueryResultVideo is used to send an HTML-page as a result (e.g., a YouTube video).
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultVideo`
+    """
+    def __init__(self, id, video_url, mime_type, thumb_url,
+                 title, caption=None, caption_entities=None, parse_mode=None,
+                 video_width=None, video_height=None, video_duration=None,
+                 description=None, reply_markup=None, input_message_content=None):
+        super().__init__('video', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.video_url = video_url
+        self.mime_type = mime_type
+        self.thumb_url = thumb_url
+        self.video_width = video_width
+        self.video_height = video_height
+        self.video_duration = video_duration
+        self.description = description
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['video_url'] = self.video_url
+        json_dict['mime_type'] = self.mime_type
+        json_dict['thumb_url'] = self.thumb_url
+        if self.video_height:
+            json_dict['video_height'] = self.video_height
+        if self.video_duration:
+            json_dict['video_duration'] = self.video_duration
+        if self.description:
+            json_dict['description'] = self.description
+        return json_dict
+
+
+class InlineQueryResultAudio(InlineQueryResultBase):
+    """
+    Represents a link to an MP3 audio file. By default, this audio file will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the audio.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultaudio
+
+    :param type: Type of the result, must be audio
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param audio_url: A valid URL for the audio file
+    :type audio_url: :obj:`str`
+
+    :param title: Title
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the audio caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param performer: Optional. Performer
+    :type performer: :obj:`str`
+
+    :param audio_duration: Optional. Audio duration in seconds
+    :type audio_duration: :obj:`int`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the audio
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultAudio`
+    """
+    def __init__(self, id, audio_url, title,
+                 caption=None, caption_entities=None, parse_mode=None, performer=None,
+                 audio_duration=None, reply_markup=None, input_message_content=None):
+        super().__init__('audio', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.audio_url = audio_url
+        self.performer = performer
+        self.audio_duration = audio_duration
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['audio_url'] = self.audio_url
+        if self.performer:
+            json_dict['performer'] = self.performer
+        if self.audio_duration:
+            json_dict['audio_duration'] = self.audio_duration
+        return json_dict
+
+
+class InlineQueryResultVoice(InlineQueryResultBase):
+    """
+    Represents a link to a voice recording in an .OGG container encoded with OPUS. By default, this voice recording will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the the voice message.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvoice
+
+    :param type: Type of the result, must be voice
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param voice_url: A valid URL for the voice recording
+    :type voice_url: :obj:`str`
+
+    :param title: Recording title
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the voice message caption. See formatting options for 
+        more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param voice_duration: Optional. Recording duration in seconds
+    :type voice_duration: :obj:`int`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the voice recording
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultVoice`
+    """
+    def __init__(self, id, voice_url, title, caption=None, caption_entities=None,
+                 parse_mode=None, voice_duration=None, reply_markup=None, input_message_content=None):
+        super().__init__('voice', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.voice_url = voice_url
+        self.voice_duration = voice_duration
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['voice_url'] = self.voice_url
+        if self.voice_duration:
+            json_dict['voice_duration'] = self.voice_duration
+        return json_dict
+
+
+class InlineQueryResultDocument(InlineQueryResultBase):
+    """
+    Represents a link to a file. By default, this file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the file. Currently, only .PDF and .ZIP files can be sent using this method.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultdocument
+
+    :param type: Type of the result, must be document
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param title: Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the document to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the document caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param document_url: A valid URL for the file
+    :type document_url: :obj:`str`
+
+    :param mime_type: MIME type of the content of the file, either “application/pdf” or “application/zip”
+    :type mime_type: :obj:`str`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the file
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :param thumb_url: Optional. URL of the thumbnail (JPEG only) for the file
+    :type thumb_url: :obj:`str`
+
+    :param thumb_width: Optional. Thumbnail width
+    :type thumb_width: :obj:`int`
+
+    :param thumb_height: Optional. Thumbnail height
+    :type thumb_height: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultDocument`
+    """
+    def __init__(self, id, title, document_url, mime_type, caption=None, caption_entities=None,
+                 parse_mode=None, description=None, reply_markup=None, input_message_content=None,
+                 thumb_url=None, thumb_width=None, thumb_height=None):
+        super().__init__('document', id, title = title, caption = caption,
+                         input_message_content = input_message_content, reply_markup = reply_markup,
+                         parse_mode = parse_mode, caption_entities = caption_entities)
+        self.document_url = document_url
+        self.mime_type = mime_type
+        self.description = description
+        self.thumb_url = thumb_url
+        self.thumb_width = thumb_width
+        self.thumb_height = thumb_height
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['document_url'] = self.document_url
+        json_dict['mime_type'] = self.mime_type
+        if self.description:
+            json_dict['description'] = self.description
+        if self.thumb_url:
+            json_dict['thumb_url'] = self.thumb_url
+        if self.thumb_width:
+            json_dict['thumb_width'] = self.thumb_width
+        if self.thumb_height:
+            json_dict['thumb_height'] = self.thumb_height
+        return json_dict
+
+
+class InlineQueryResultLocation(InlineQueryResultBase):
+    """
+    Represents a location on a map. By default, the location will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the location.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultlocation
+
+    :param type: Type of the result, must be location
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 Bytes
+    :type id: :obj:`str`
+
+    :param latitude: Location latitude in degrees
+    :type latitude: :obj:`float` number
+
+    :param longitude: Location longitude in degrees
+    :type longitude: :obj:`float` number
+
+    :param title: Location title
+    :type title: :obj:`str`
+
+    :param horizontal_accuracy: Optional. The radius of uncertainty for the location, measured in meters; 0-1500
+    :type horizontal_accuracy: :obj:`float` number
+
+    :param live_period: Optional. Period in seconds for which the location can be updated, should be between 60 and 
+        86400.
+    :type live_period: :obj:`int`
+
+    :param heading: Optional. For live locations, a direction in which the user is moving, in degrees. Must be between 1 
+        and 360 if specified.
+    :type heading: :obj:`int`
+
+    :param proximity_alert_radius: Optional. For live locations, a maximum distance for proximity alerts about 
+        approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+    :type proximity_alert_radius: :obj:`int`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the location
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :param thumb_url: Optional. Url of the thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_width: Optional. Thumbnail width
+    :type thumb_width: :obj:`int`
+
+    :param thumb_height: Optional. Thumbnail height
+    :type thumb_height: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultLocation`
+    """
+    def __init__(self, id, title, latitude, longitude, horizontal_accuracy, live_period=None, reply_markup=None,
+                 input_message_content=None, thumb_url=None, thumb_width=None, thumb_height=None, heading=None, proximity_alert_radius = None):
+        super().__init__('location', id, title = title,
+                         input_message_content = input_message_content, reply_markup = reply_markup)
+        self.latitude = latitude
+        self.longitude = longitude
+        self.horizontal_accuracy = horizontal_accuracy
+        self.live_period = live_period
+        self.heading: int = heading
+        self.proximity_alert_radius: int = proximity_alert_radius
+        self.thumb_url = thumb_url
+        self.thumb_width = thumb_width
+        self.thumb_height = thumb_height
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['latitude'] = self.latitude
+        json_dict['longitude'] = self.longitude
+        if self.horizontal_accuracy:
+            json_dict['horizontal_accuracy'] = self.horizontal_accuracy
+        if self.live_period:
+            json_dict['live_period'] = self.live_period
+        if self.heading:
+            json_dict['heading'] = self.heading
+        if self.proximity_alert_radius:
+            json_dict['proximity_alert_radius'] = self.proximity_alert_radius
+        if self.thumb_url:
+            json_dict['thumb_url'] = self.thumb_url
+        if self.thumb_width:
+            json_dict['thumb_width'] = self.thumb_width
+        if self.thumb_height:
+            json_dict['thumb_height'] = self.thumb_height
+        return json_dict
+
+
+class InlineQueryResultVenue(InlineQueryResultBase):
+    """
+    Represents a venue. By default, the venue will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the venue.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultvenue
+
+    :param type: Type of the result, must be venue
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 Bytes
+    :type id: :obj:`str`
+
+    :param latitude: Latitude of the venue location in degrees
+    :type latitude: :obj:`float`
+
+    :param longitude: Longitude of the venue location in degrees
+    :type longitude: :obj:`float`
+
+    :param title: Title of the venue
+    :type title: :obj:`str`
+
+    :param address: Address of the venue
+    :type address: :obj:`str`
+
+    :param foursquare_id: Optional. Foursquare identifier of the venue if known
+    :type foursquare_id: :obj:`str`
+
+    :param foursquare_type: Optional. Foursquare type of the venue, if known. (For example, 
+        “arts_entertainment/default”, “arts_entertainment/aquarium” or “food/icecream”.)
+    :type foursquare_type: :obj:`str`
+
+    :param google_place_id: Optional. Google Places identifier of the venue
+    :type google_place_id: :obj:`str`
+
+    :param google_place_type: Optional. Google Places type of the venue. (See supported types.)
+    :type google_place_type: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the venue
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :param thumb_url: Optional. Url of the thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_width: Optional. Thumbnail width
+    :type thumb_width: :obj:`int`
+
+    :param thumb_height: Optional. Thumbnail height
+    :type thumb_height: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultVenue`
+    """
+    def __init__(self, id, title, latitude, longitude, address, foursquare_id=None, foursquare_type=None,
+                 reply_markup=None, input_message_content=None, thumb_url=None, 
+                 thumb_width=None, thumb_height=None, google_place_id=None, google_place_type=None):
+        super().__init__('venue', id, title = title,
+                         input_message_content = input_message_content, reply_markup = reply_markup)
+        self.latitude = latitude
+        self.longitude = longitude
+        self.address = address
+        self.foursquare_id = foursquare_id
+        self.foursquare_type = foursquare_type
+        self.google_place_id = google_place_id
+        self.google_place_type = google_place_type
+        self.thumb_url = thumb_url
+        self.thumb_width = thumb_width
+        self.thumb_height = thumb_height
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['latitude'] = self.latitude
+        json_dict['longitude'] = self.longitude
+        json_dict['address'] = self.address
+        if self.foursquare_id:
+            json_dict['foursquare_id'] = self.foursquare_id
+        if self.foursquare_type:
+            json_dict['foursquare_type'] = self.foursquare_type
+        if self.google_place_id:
+            json_dict['google_place_id'] = self.google_place_id
+        if self.google_place_type:
+            json_dict['google_place_type'] = self.google_place_type
+        if self.thumb_url:
+            json_dict['thumb_url'] = self.thumb_url
+        if self.thumb_width:
+            json_dict['thumb_width'] = self.thumb_width
+        if self.thumb_height:
+            json_dict['thumb_height'] = self.thumb_height
+        return json_dict
+
+
+class InlineQueryResultContact(InlineQueryResultBase):
+    """
+    Represents a contact with a phone number. By default, this contact will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the contact.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcontact
+
+    :param type: Type of the result, must be contact
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 Bytes
+    :type id: :obj:`str`
+
+    :param phone_number: Contact's phone number
+    :type phone_number: :obj:`str`
+
+    :param first_name: Contact's first name
+    :type first_name: :obj:`str`
+
+    :param last_name: Optional. Contact's last name
+    :type last_name: :obj:`str`
+
+    :param vcard: Optional. Additional data about the contact in the form of a vCard, 0-2048 bytes
+    :type vcard: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the contact
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :param thumb_url: Optional. Url of the thumbnail for the result
+    :type thumb_url: :obj:`str`
+
+    :param thumb_width: Optional. Thumbnail width
+    :type thumb_width: :obj:`int`
+
+    :param thumb_height: Optional. Thumbnail height
+    :type thumb_height: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultContact`
+    """
+    def __init__(self, id, phone_number, first_name, last_name=None, vcard=None,
+                 reply_markup=None, input_message_content=None,
+                 thumb_url=None, thumb_width=None, thumb_height=None):
+        super().__init__('contact', id,
+                         input_message_content = input_message_content, reply_markup = reply_markup)
+        self.phone_number = phone_number
+        self.first_name = first_name
+        self.last_name = last_name
+        self.vcard = vcard
+        self.thumb_url = thumb_url
+        self.thumb_width = thumb_width
+        self.thumb_height = thumb_height
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['phone_number'] = self.phone_number
+        json_dict['first_name'] = self.first_name
+        if self.last_name:
+            json_dict['last_name'] = self.last_name
+        if self.vcard:
+            json_dict['vcard'] = self.vcard
+        if self.thumb_url:
+            json_dict['thumb_url'] = self.thumb_url
+        if self.thumb_width:
+            json_dict['thumb_width'] = self.thumb_width
+        if self.thumb_height:
+            json_dict['thumb_height'] = self.thumb_height
+        return json_dict
+
+
+class InlineQueryResultGame(InlineQueryResultBase):
+    """
+    Represents a Game.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultgame
+
+    :param type: Type of the result, must be game
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param game_short_name: Short name of the game
+    :type game_short_name: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultGame`
+    """
+    def __init__(self, id, game_short_name, reply_markup=None):
+        super().__init__('game', id, reply_markup = reply_markup)
+        self.game_short_name = game_short_name
+
+    def to_dict(self):
+        json_dict = super().to_dict()
+        json_dict['game_short_name'] = self.game_short_name
+        return json_dict
+
+
+class InlineQueryResultCachedBase(ABC, JsonSerializable):
+    """
+    Base class of all InlineQueryResultCached* classes.
+    """
+    def __init__(self):
+        self.type = None
+        self.id = None
+        self.title = None
+        self.description = None
+        self.caption = None
+        self.reply_markup = None
+        self.input_message_content = None
+        self.parse_mode = None
+        self.caption_entities = None
+        self.payload_dic = {}
+
+    def to_json(self):
+        json_dict = self.payload_dic
+        json_dict['type'] = self.type
+        json_dict['id'] = self.id
+        if self.title:
+            json_dict['title'] = self.title
+        if self.description:
+            json_dict['description'] = self.description
+        if self.caption:
+            json_dict['caption'] = self.caption
+        if self.reply_markup:
+            json_dict['reply_markup'] = self.reply_markup.to_dict()
+        if self.input_message_content:
+            json_dict['input_message_content'] = self.input_message_content.to_dict()
+        if self.parse_mode:
+            json_dict['parse_mode'] = self.parse_mode
+        if self.caption_entities:
+            json_dict['caption_entities'] = MessageEntity.to_list_of_dicts(self.caption_entities)
+        return json.dumps(json_dict)
+
+
+class InlineQueryResultCachedPhoto(InlineQueryResultCachedBase):
+    """
+    Represents a link to a photo stored on the Telegram servers. By default, this photo will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the photo.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedphoto
+
+    :param type: Type of the result, must be photo
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param photo_file_id: A valid file identifier of the photo
+    :type photo_file_id: :obj:`str`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param caption: Optional. Caption of the photo to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the photo caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the photo
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedPhoto`
+    """
+    def __init__(self, id, photo_file_id, title=None, description=None,
+                 caption=None, caption_entities = None, parse_mode=None,
+                 reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'photo'
+        self.id = id
+        self.photo_file_id = photo_file_id
+        self.title = title
+        self.description = description
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['photo_file_id'] = photo_file_id
+
+
+class InlineQueryResultCachedGif(InlineQueryResultCachedBase):
+    """
+    Represents a link to an animated GIF file stored on the Telegram servers. By default, this animated GIF file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with specified content instead of the animation.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedgif
+
+    :param type: Type of the result, must be gif
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param gif_file_id: A valid file identifier for the GIF file
+    :type gif_file_id: :obj:`str`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the GIF file to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the caption. See formatting options for more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the GIF animation
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedGif`
+    """
+    def __init__(self, id, gif_file_id, title=None, description=None,
+                 caption=None, caption_entities = None, parse_mode=None,
+                 reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'gif'
+        self.id = id
+        self.gif_file_id = gif_file_id
+        self.title = title
+        self.description = description
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['gif_file_id'] = gif_file_id
+
+
+class InlineQueryResultCachedMpeg4Gif(InlineQueryResultCachedBase):
+    """
+    Represents a link to a video animation (H.264/MPEG-4 AVC video without sound) stored on the Telegram servers. By default, this animated MPEG-4 file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the animation.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedmpeg4gif
+
+    :param type: Type of the result, must be mpeg4_gif
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param mpeg4_file_id: A valid file identifier for the MPEG4 file
+    :type mpeg4_file_id: :obj:`str`
+
+    :param title: Optional. Title for the result
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption of the MPEG-4 file to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the caption. See formatting options for more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the video animation
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedMpeg4Gif`
+    """
+    def __init__(self, id, mpeg4_file_id, title=None, description=None,
+                 caption=None, caption_entities = None, parse_mode=None,
+                 reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'mpeg4_gif'
+        self.id = id
+        self.mpeg4_file_id = mpeg4_file_id
+        self.title = title
+        self.description = description
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['mpeg4_file_id'] = mpeg4_file_id
+
+
+class InlineQueryResultCachedSticker(InlineQueryResultCachedBase):
+    """
+    Represents a link to a sticker stored on the Telegram servers. By default, this sticker will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the sticker.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedsticker
+
+    :param type: Type of the result, must be sticker
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param sticker_file_id: A valid file identifier of the sticker
+    :type sticker_file_id: :obj:`str`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the sticker
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedSticker`
+    """
+    def __init__(self, id, sticker_file_id, reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'sticker'
+        self.id = id
+        self.sticker_file_id = sticker_file_id
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.payload_dic['sticker_file_id'] = sticker_file_id
+
+
+class InlineQueryResultCachedDocument(InlineQueryResultCachedBase):
+    """
+    Represents a link to a file stored on the Telegram servers. By default, this file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the file.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcacheddocument
+
+    :param type: Type of the result, must be document
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param title: Title for the result
+    :type title: :obj:`str`
+
+    :param document_file_id: A valid file identifier for the file
+    :type document_file_id: :obj:`str`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param caption: Optional. Caption of the document to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the document caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the file
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedDocument`
+    """
+    def __init__(self, id, document_file_id, title, description=None,
+                 caption=None, caption_entities = None, parse_mode=None,
+                 reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'document'
+        self.id = id
+        self.document_file_id = document_file_id
+        self.title = title
+        self.description = description
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['document_file_id'] = document_file_id
+
+
+class InlineQueryResultCachedVideo(InlineQueryResultCachedBase):
+    """
+    Represents a link to a video file stored on the Telegram servers. By default, this video file will be sent by the user with an optional caption. Alternatively, you can use input_message_content to send a message with the specified content instead of the video.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedvideo
+
+    :param type: Type of the result, must be video
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param video_file_id: A valid file identifier for the video file
+    :type video_file_id: :obj:`str`
+
+    :param title: Title for the result
+    :type title: :obj:`str`
+
+    :param description: Optional. Short description of the result
+    :type description: :obj:`str`
+
+    :param caption: Optional. Caption of the video to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the video caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the video
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedVideo`
+    """
+    def __init__(self, id, video_file_id, title, description=None,
+                 caption=None, caption_entities = None, parse_mode=None,
+                 reply_markup=None,
+                 input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'video'
+        self.id = id
+        self.video_file_id = video_file_id
+        self.title = title
+        self.description = description
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['video_file_id'] = video_file_id
+
+
+class InlineQueryResultCachedVoice(InlineQueryResultCachedBase):
+    """
+    Represents a link to a voice message stored on the Telegram servers. By default, this voice message will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the voice message.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedvoice
+
+    :param type: Type of the result, must be voice
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param voice_file_id: A valid file identifier for the voice message
+    :type voice_file_id: :obj:`str`
+
+    :param title: Voice message title
+    :type title: :obj:`str`
+
+    :param caption: Optional. Caption, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the voice message caption. See formatting options for 
+        more details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the voice message
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedVoice`
+    """
+    def __init__(self, id, voice_file_id, title, caption=None, caption_entities = None,
+                 parse_mode=None, reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'voice'
+        self.id = id
+        self.voice_file_id = voice_file_id
+        self.title = title
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['voice_file_id'] = voice_file_id
+
+
+class InlineQueryResultCachedAudio(InlineQueryResultCachedBase):
+    """
+    Represents a link to an MP3 audio file stored on the Telegram servers. By default, this audio file will be sent by the user. Alternatively, you can use input_message_content to send a message with the specified content instead of the audio.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inlinequeryresultcachedaudio
+
+    :param type: Type of the result, must be audio
+    :type type: :obj:`str`
+
+    :param id: Unique identifier for this result, 1-64 bytes
+    :type id: :obj:`str`
+
+    :param audio_file_id: A valid file identifier for the audio file
+    :type audio_file_id: :obj:`str`
+
+    :param caption: Optional. Caption, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the audio caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param reply_markup: Optional. Inline keyboard attached to the message
+    :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup`
+
+    :param input_message_content: Optional. Content of the message to be sent instead of the audio
+    :type input_message_content: :class:`telebot.types.InputMessageContent`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InlineQueryResultCachedAudio`
+    """
+    def __init__(self, id, audio_file_id, caption=None, caption_entities = None,
+                 parse_mode=None, reply_markup=None, input_message_content=None):
+        InlineQueryResultCachedBase.__init__(self)
+        self.type = 'audio'
+        self.id = id
+        self.audio_file_id = audio_file_id
+        self.caption = caption
+        self.caption_entities = caption_entities
+        self.reply_markup = reply_markup
+        self.input_message_content = input_message_content
+        self.parse_mode = parse_mode
+        self.payload_dic['audio_file_id'] = audio_file_id
+
+
+# Games
+
+class Game(JsonDeserializable):
+    """
+    This object represents a game. Use BotFather to create and edit games, their short names will act as unique identifiers.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#game
+
+    :param title: Title of the game
+    :type title: :obj:`str`
+
+    :param description: Description of the game
+    :type description: :obj:`str`
+
+    :param photo: Photo that will be displayed in the game message in chats.
+    :type photo: :obj:`list` of :class:`telebot.types.PhotoSize`
+
+    :param text: Optional. Brief description of the game or high scores included in the game message. Can be 
+        automatically edited to include current high scores for the game when the bot calls setGameScore, or manually edited 
+        using editMessageText. 0-4096 characters.
+    :type text: :obj:`str`
+
+    :param text_entities: Optional. Special entities that appear in text, such as usernames, URLs, bot commands, etc.
+    :type text_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param animation: Optional. Animation that will be displayed in the game message in chats. Upload via BotFather
+    :type animation: :class:`telebot.types.Animation`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Game`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['photo'] = Game.parse_photo(obj['photo'])
+        if 'text_entities' in obj:
+            obj['text_entities'] = Game.parse_entities(obj['text_entities'])
+        if 'animation' in obj:
+            obj['animation'] = Animation.de_json(obj['animation'])
+        return cls(**obj)
+
+    @classmethod
+    def parse_photo(cls, photo_size_array):
+        """
+        Parse the photo array into a list of PhotoSize objects
+        """
+        ret = []
+        for ps in photo_size_array:
+            ret.append(PhotoSize.de_json(ps))
+        return ret
+
+    @classmethod
+    def parse_entities(cls, message_entity_array):
+        """
+        Parse the message entity array into a list of MessageEntity objects
+        """
+        ret = []
+        for me in message_entity_array:
+            ret.append(MessageEntity.de_json(me))
+        return ret
+
+    def __init__(self, title, description, photo, text=None, text_entities=None, animation=None, **kwargs):
+        self.title: str = title
+        self.description: str = description
+        self.photo: List[PhotoSize] = photo
+        self.text: str = text
+        self.text_entities: List[MessageEntity] = text_entities
+        self.animation: Animation = animation
+
+
+class Animation(JsonDeserializable):
+    """
+    This object represents an animation file (GIF or H.264/MPEG-4 AVC video without sound).
+
+    Telegram Documentation: https://core.telegram.org/bots/api#animation
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param width: Video width as defined by sender
+    :type width: :obj:`int`
+
+    :param height: Video height as defined by sender
+    :type height: :obj:`int`
+
+    :param duration: Duration of the video in seconds as defined by sender
+    :type duration: :obj:`int`
+
+    :param thumb: Optional. Animation thumbnail as defined by sender
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :param file_name: Optional. Original animation filename as defined by sender
+    :type file_name: :obj:`str`
+
+    :param mime_type: Optional. MIME type of the file as defined by sender
+    :type mime_type: :obj:`str`
+
+    :param file_size: Optional. File size in bytes. It can be bigger than 2^31 and some programming languages may have 
+        difficulty/silent defects in interpreting it. But it has at most 52 significant bits, so a signed 64-bit integer or 
+        double-precision float type are safe for storing this value.
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Animation`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj["thumb"] = PhotoSize.de_json(obj['thumb'])
+        else:
+            obj['thumb'] = None
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, width=None, height=None, duration=None, 
+                 thumb=None, file_name=None, mime_type=None, file_size=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.width: int = width
+        self.height: int = height
+        self.duration: int = duration
+        self.thumb: PhotoSize = thumb
+        self.file_name: str = file_name
+        self.mime_type: str = mime_type
+        self.file_size: int = file_size
+
+
+class GameHighScore(JsonDeserializable):
+    """
+    This object represents one row of the high scores table for a game.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#gamehighscore
+
+    :param position: Position in high score table for the game
+    :type position: :obj:`int`
+
+    :param user: User
+    :type user: :class:`telebot.types.User`
+
+    :param score: Score
+    :type score: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.GameHighScore`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['user'] = User.de_json(obj['user'])
+        return cls(**obj)
+
+    def __init__(self, position, user, score, **kwargs):
+        self.position: int = position
+        self.user: User = user
+        self.score: int = score
+
+
+# Payments
+
+class LabeledPrice(JsonSerializable, Dictionaryable):
+    """
+    This object represents a portion of the price for goods or services.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#labeledprice
+
+    :param label: Portion label
+    :type label: :obj:`str`
+
+    :param amount: Price of the product in the smallest units of the currency (integer, not float/double). For example, 
+        for a price of US$ 1.45 pass amount = 145. See the exp parameter in currencies.json, it shows the number of digits past 
+        the decimal point for each currency (2 for the majority of currencies).
+    :type amount: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.LabeledPrice`
+    """
+    def __init__(self, label, amount):
+        self.label: str = label
+        self.amount: int = amount
+
+    def to_dict(self):
+        return {
+            'label': self.label, 'amount': self.amount
+        }
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+
+class Invoice(JsonDeserializable):
+    """
+    This object contains basic information about an invoice.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#invoice
+
+    :param title: Product name
+    :type title: :obj:`str`
+
+    :param description: Product description
+    :type description: :obj:`str`
+
+    :param start_parameter: Unique bot deep-linking parameter that can be used to generate this invoice
+    :type start_parameter: :obj:`str`
+
+    :param currency: Three-letter ISO 4217 currency code
+    :type currency: :obj:`str`
+
+    :param total_amount: Total price in the smallest units of the currency (integer, not float/double). For example, 
+        for a price of US$ 1.45 pass amount = 145. See the exp parameter in currencies.json, it shows the number of digits past 
+        the decimal point for each currency (2 for the majority of currencies).
+    :type total_amount: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Invoice`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, title, description, start_parameter, currency, total_amount, **kwargs):
+        self.title: str = title
+        self.description: str = description
+        self.start_parameter: str = start_parameter
+        self.currency: str = currency
+        self.total_amount: int = total_amount
+
+
+class ShippingAddress(JsonDeserializable):
+    """
+    This object represents a shipping address.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#shippingaddress
+
+    :param country_code: Two-letter ISO 3166-1 alpha-2 country code
+    :type country_code: :obj:`str`
+
+    :param state: State, if applicable
+    :type state: :obj:`str`
+
+    :param city: City
+    :type city: :obj:`str`
+
+    :param street_line1: First line for the address
+    :type street_line1: :obj:`str`
+
+    :param street_line2: Second line for the address
+    :type street_line2: :obj:`str`
+
+    :param post_code: Address post code
+    :type post_code: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ShippingAddress`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, country_code, state, city, street_line1, street_line2, post_code, **kwargs):
+        self.country_code: str = country_code
+        self.state: str = state
+        self.city: str = city
+        self.street_line1: str = street_line1
+        self.street_line2: str = street_line2
+        self.post_code: str = post_code
+
+
+class OrderInfo(JsonDeserializable):
+    """
+    This object represents information about an order.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#orderinfo
+
+    :param name: Optional. User name
+    :type name: :obj:`str`
+
+    :param phone_number: Optional. User's phone number
+    :type phone_number: :obj:`str`
+
+    :param email: Optional. User email
+    :type email: :obj:`str`
+
+    :param shipping_address: Optional. User shipping address
+    :type shipping_address: :class:`telebot.types.ShippingAddress`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.OrderInfo`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['shipping_address'] = ShippingAddress.de_json(obj.get('shipping_address'))
+        return cls(**obj)
+
+    def __init__(self, name=None, phone_number=None, email=None, shipping_address=None, **kwargs):
+        self.name: str = name
+        self.phone_number: str = phone_number
+        self.email: str = email
+        self.shipping_address: ShippingAddress = shipping_address
+
+
+class ShippingOption(JsonSerializable):
+    """
+    This object represents one shipping option.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#shippingoption
+
+    :param id: Shipping option identifier
+    :type id: :obj:`str`
+
+    :param title: Option title
+    :type title: :obj:`str`
+
+    :param prices: List of price portions
+    :type prices: :obj:`list` of :class:`telebot.types.LabeledPrice`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ShippingOption`
+    """
+    def __init__(self, id, title):
+        self.id: str = id
+        self.title: str = title
+        self.prices: List[LabeledPrice] = []
+
+    def add_price(self, *args):
+        """
+        Add LabeledPrice to ShippingOption
+        
+        :param args: LabeledPrices
+        :type args: :obj:`LabeledPrice`
+
+        :return: None
+        """
+        for price in args:
+            self.prices.append(price)
+        return self
+
+    def to_json(self):
+        price_list = []
+        for p in self.prices:
+            price_list.append(p.to_dict())
+        json_dict = json.dumps({'id': self.id, 'title': self.title, 'prices': price_list})
+        return json_dict
+
+
+class SuccessfulPayment(JsonDeserializable):
+    """
+    This object contains basic information about a successful payment.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#successfulpayment
+
+    :param currency: Three-letter ISO 4217 currency code
+    :type currency: :obj:`str`
+
+    :param total_amount: Total price in the smallest units of the currency (integer, not float/double). For example, 
+        for a price of US$ 1.45 pass amount = 145. See the exp parameter in currencies.json, it shows the number of digits past 
+        the decimal point for each currency (2 for the majority of currencies).
+    :type total_amount: :obj:`int`
+
+    :param invoice_payload: Bot specified invoice payload
+    :type invoice_payload: :obj:`str`
+
+    :param shipping_option_id: Optional. Identifier of the shipping option chosen by the user
+    :type shipping_option_id: :obj:`str`
+
+    :param order_info: Optional. Order information provided by the user
+    :type order_info: :class:`telebot.types.OrderInfo`
+
+    :param telegram_payment_charge_id: Telegram payment identifier
+    :type telegram_payment_charge_id: :obj:`str`
+
+    :param provider_payment_charge_id: Provider payment identifier
+    :type provider_payment_charge_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.SuccessfulPayment`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['order_info'] = OrderInfo.de_json(obj.get('order_info'))
+        return cls(**obj)
+
+    def __init__(self, currency, total_amount, invoice_payload, shipping_option_id=None, order_info=None,
+                 telegram_payment_charge_id=None, provider_payment_charge_id=None, **kwargs):
+        self.currency: str = currency
+        self.total_amount: int = total_amount
+        self.invoice_payload: str = invoice_payload
+        self.shipping_option_id: str = shipping_option_id
+        self.order_info: OrderInfo = order_info
+        self.telegram_payment_charge_id: str = telegram_payment_charge_id
+        self.provider_payment_charge_id: str = provider_payment_charge_id
+
+
+class ShippingQuery(JsonDeserializable):
+    """
+    This object contains information about an incoming shipping query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#shippingquery
+
+    :param id: Unique query identifier
+    :type id: :obj:`str`
+
+    :param from: User who sent the query
+    :type from: :class:`telebot.types.User`
+
+    :param invoice_payload: Bot specified invoice payload
+    :type invoice_payload: :obj:`str`
+
+    :param shipping_address: User specified shipping address
+    :type shipping_address: :class:`telebot.types.ShippingAddress`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ShippingQuery`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        obj['shipping_address'] = ShippingAddress.de_json(obj['shipping_address'])
+        return cls(**obj)
+
+    def __init__(self, id, from_user, invoice_payload, shipping_address, **kwargs):
+        self.id: str = id
+        self.from_user: User = from_user
+        self.invoice_payload: str = invoice_payload
+        self.shipping_address: ShippingAddress = shipping_address
+
+
+class PreCheckoutQuery(JsonDeserializable):
+    """
+    This object contains information about an incoming pre-checkout query.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#precheckoutquery
+
+    :param id: Unique query identifier
+    :type id: :obj:`str`
+
+    :param from: User who sent the query
+    :type from: :class:`telebot.types.User`
+
+    :param currency: Three-letter ISO 4217 currency code
+    :type currency: :obj:`str`
+
+    :param total_amount: Total price in the smallest units of the currency (integer, not float/double). For example, 
+        for a price of US$ 1.45 pass amount = 145. See the exp parameter in currencies.json, it shows the number of digits past 
+        the decimal point for each currency (2 for the majority of currencies).
+    :type total_amount: :obj:`int`
+
+    :param invoice_payload: Bot specified invoice payload
+    :type invoice_payload: :obj:`str`
+
+    :param shipping_option_id: Optional. Identifier of the shipping option chosen by the user
+    :type shipping_option_id: :obj:`str`
+
+    :param order_info: Optional. Order information provided by the user
+    :type order_info: :class:`telebot.types.OrderInfo`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.PreCheckoutQuery`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['from_user'] = User.de_json(obj.pop('from'))
+        obj['order_info'] = OrderInfo.de_json(obj.get('order_info'))
+        return cls(**obj)
+
+    def __init__(self, id, from_user, currency, total_amount, invoice_payload, shipping_option_id=None, order_info=None, **kwargs):
+        self.id: str = id
+        self.from_user: User = from_user
+        self.currency: str = currency
+        self.total_amount: int = total_amount
+        self.invoice_payload: str = invoice_payload
+        self.shipping_option_id: str = shipping_option_id
+        self.order_info: OrderInfo = order_info
+
+
+# Stickers
+
+class StickerSet(JsonDeserializable):
+    """
+    This object represents a sticker set.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#stickerset
+
+    :param name: Sticker set name
+    :type name: :obj:`str`
+
+    :param title: Sticker set title
+    :type title: :obj:`str`
+
+    :param sticker_type: Type of stickers in the set, currently one of “regular”, “mask”, “custom_emoji”
+    :type sticker_type: :obj:`str`
+
+    :param is_animated: True, if the sticker set contains animated stickers
+    :type is_animated: :obj:`bool`
+
+    :param is_video: True, if the sticker set contains video stickers
+    :type is_video: :obj:`bool`
+
+    :param contains_masks: True, if the sticker set contains masks. Deprecated since Bot API 6.2,
+        use sticker_type instead.
+    :type contains_masks: :obj:`bool`
+
+    :param stickers: List of all set stickers
+    :type stickers: :obj:`list` of :class:`telebot.types.Sticker`
+
+    :param thumb: Optional. Sticker set thumbnail in the .WEBP, .TGS, or .WEBM format
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.StickerSet`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        stickers = []
+        for s in obj['stickers']:
+            stickers.append(Sticker.de_json(s))
+        obj['stickers'] = stickers
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        else:
+            obj['thumb'] = None
+        return cls(**obj)
+
+    def __init__(self, name, title, sticker_type, is_animated, is_video, stickers, thumb=None, **kwargs):
+        self.name: str = name
+        self.title: str = title
+        self.sticker_type: str = sticker_type
+        self.is_animated: bool = is_animated
+        self.is_video: bool = is_video
+        self.stickers: List[Sticker] = stickers
+        self.thumb: PhotoSize = thumb
+
+    @property
+    def contains_masks(self):
+        """
+        Deprecated since Bot API 6.2, use sticker_type instead.
+        """
+        logger.warning("contains_masks is deprecated, use sticker_type instead")
+        return self.sticker_type == 'mask'
+
+
+class Sticker(JsonDeserializable):
+    """
+    This object represents a sticker.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#sticker
+
+    :param file_id: Identifier for this file, which can be used to download or reuse the file
+    :type file_id: :obj:`str`
+
+    :param file_unique_id: Unique identifier for this file, which is supposed to be the same over time and for different 
+        bots. Can't be used to download or reuse the file.
+    :type file_unique_id: :obj:`str`
+
+    :param type: Type of the sticker, currently one of “regular”, “mask”, “custom_emoji”. The type of the sticker is
+        independent from its format, which is determined by the fields is_animated and is_video.
+    :type type: :obj:`str`
+
+    :param width: Sticker width
+    :type width: :obj:`int`
+
+    :param height: Sticker height
+    :type height: :obj:`int`
+
+    :param is_animated: True, if the sticker is animated
+    :type is_animated: :obj:`bool`
+
+    :param is_video: True, if the sticker is a video sticker
+    :type is_video: :obj:`bool`
+
+    :param thumb: Optional. Sticker thumbnail in the .WEBP or .JPG format
+    :type thumb: :class:`telebot.types.PhotoSize`
+
+    :param emoji: Optional. Emoji associated with the sticker
+    :type emoji: :obj:`str`
+
+    :param set_name: Optional. Name of the sticker set to which the sticker belongs
+    :type set_name: :obj:`str`
+
+    :param premium_animation: Optional. Premium animation for the sticker, if the sticker is premium
+    :type premium_animation: :class:`telebot.types.File`
+
+    :param mask_position: Optional. For mask stickers, the position where the mask should be placed
+    :type mask_position: :class:`telebot.types.MaskPosition`
+
+    :param custom_emoji_id: Optional. For custom emoji stickers, unique identifier of the custom emoji
+    :type custom_emoji_id: :obj:`str`
+
+    :param file_size: Optional. File size in bytes
+    :type file_size: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Sticker`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        if 'thumb' in obj and 'file_id' in obj['thumb']:
+            obj['thumb'] = PhotoSize.de_json(obj['thumb'])
+        else:
+            obj['thumb'] = None
+        if 'mask_position' in obj:
+            obj['mask_position'] = MaskPosition.de_json(obj['mask_position'])
+        if 'premium_animation' in obj:
+            obj['premium_animation'] = File.de_json(obj['premium_animation'])
+        return cls(**obj)
+
+    def __init__(self, file_id, file_unique_id, type, width, height, is_animated, 
+                is_video, thumb=None, emoji=None, set_name=None, mask_position=None, file_size=None, 
+                premium_animation=None, custom_emoji_id=None, **kwargs):
+        self.file_id: str = file_id
+        self.file_unique_id: str = file_unique_id
+        self.type: str = type
+        self.width: int = width
+        self.height: int = height
+        self.is_animated: bool = is_animated
+        self.is_video: bool = is_video
+        self.thumb: PhotoSize = thumb
+        self.emoji: str = emoji
+        self.set_name: str = set_name
+        self.mask_position: MaskPosition = mask_position
+        self.file_size: int = file_size
+        self.premium_animation: File = premium_animation
+        self.custom_emoji_id: int = custom_emoji_id
+        
+
+
+class MaskPosition(Dictionaryable, JsonDeserializable, JsonSerializable):
+    """
+    This object describes the position on faces where a mask should be placed by default.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#maskposition
+
+    :param point: The part of the face relative to which the mask should be placed. One of “forehead”, “eyes”, “mouth”, or 
+        “chin”.
+    :type point: :obj:`str`
+
+    :param x_shift: Shift by X-axis measured in widths of the mask scaled to the face size, from left to right. For example, 
+        choosing -1.0 will place mask just to the left of the default mask position.
+    :type x_shift: :obj:`float` number
+
+    :param y_shift: Shift by Y-axis measured in heights of the mask scaled to the face size, from top to bottom. For 
+        example, 1.0 will place the mask just below the default mask position.
+    :type y_shift: :obj:`float` number
+
+    :param scale: Mask scaling coefficient. For example, 2.0 means double size.
+    :type scale: :obj:`float` number
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MaskPosition`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, point, x_shift, y_shift, scale, **kwargs):
+        self.point: str = point
+        self.x_shift: float = x_shift
+        self.y_shift: float = y_shift
+        self.scale: float = scale
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {'point': self.point, 'x_shift': self.x_shift, 'y_shift': self.y_shift, 'scale': self.scale}
+
+
+# InputMedia
+
+class InputMedia(Dictionaryable, JsonSerializable):
+    """
+    This object represents the content of a media message to be sent. It should be one of
+
+    * :class:`InputMediaAnimation`
+    * :class:`InputMediaDocument`
+    * :class:`InputMediaAudio`
+    * :class:`InputMediaPhoto`
+    * :class:`InputMediaVideo`
+    """
+    def __init__(self, type, media, caption=None, parse_mode=None, caption_entities=None):
+        self.type: str = type
+        self.media: str = media
+        self.caption: Optional[str] = caption
+        self.parse_mode: Optional[str] = parse_mode
+        self.caption_entities: Optional[List[MessageEntity]] = caption_entities
+
+        if util.is_string(self.media):
+            self._media_name = ''
+            self._media_dic = self.media
+        else:
+            self._media_name = util.generate_random_token()
+            self._media_dic = 'attach://{0}'.format(self._media_name)
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        json_dict = {'type': self.type, 'media': self._media_dic}
+        if self.caption:
+            json_dict['caption'] = self.caption
+        if self.parse_mode:
+            json_dict['parse_mode'] = self.parse_mode
+        if self.caption_entities:
+            json_dict['caption_entities'] = MessageEntity.to_list_of_dicts(self.caption_entities)
+        return json_dict
+
+    def convert_input_media(self):
+        """
+        :meta private:
+        """
+        if util.is_string(self.media):
+            return self.to_json(), None
+
+        return self.to_json(), {self._media_name: self.media}
+
+
+class InputMediaPhoto(InputMedia):
+    """
+    Represents a photo to be sent.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputmediaphoto
+
+    :param media: File to send. Pass a file_id to send a file that exists on the Telegram servers (recommended), pass an 
+        HTTP URL for Telegram to get a file from the Internet, or pass “attach://<file_attach_name>” to upload a new one using 
+        multipart/form-data under <file_attach_name> name. More information on Sending Files »
+    :type media: :obj:`str`
+
+    :param caption: Optional. Caption of the photo to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the photo caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param has_spoiler: Optional. True, if the uploaded photo is a spoiler
+    :type has_spoiler: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputMediaPhoto`
+    """
+    def __init__(self, media, caption=None, parse_mode=None, caption_entities=None, has_spoiler=None):
+        if util.is_pil_image(media):
+            media = util.pil_image_to_file(media)
+    
+        super(InputMediaPhoto, self).__init__(
+            type="photo", media=media, caption=caption, parse_mode=parse_mode, caption_entities=caption_entities)
+
+        self.has_spoiler: Optional[bool] = has_spoiler
+
+    def to_dict(self):
+        ret = super(InputMediaPhoto, self).to_dict()
+        if self.has_spoiler is not None:
+            ret['has_spoiler'] = self.has_spoiler
+        return ret
+
+
+class InputMediaVideo(InputMedia):
+    """
+    Represents a video to be sent.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputmediavideo
+
+    :param media: File to send. Pass a file_id to send a file that exists on the Telegram servers (recommended), pass an 
+        HTTP URL for Telegram to get a file from the Internet, or pass “attach://<file_attach_name>” to upload a new one using 
+        multipart/form-data under <file_attach_name> name. More information on Sending Files »
+    :type media: :obj:`str`
+
+    :param thumb: Optional. Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported 
+        server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should 
+        not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be 
+        only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using 
+        multipart/form-data under <file_attach_name>. More information on Sending Files »
+    :type thumb: InputFile or :obj:`str`
+
+    :param caption: Optional. Caption of the video to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the video caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param width: Optional. Video width
+    :type width: :obj:`int`
+
+    :param height: Optional. Video height
+    :type height: :obj:`int`
+
+    :param duration: Optional. Video duration in seconds
+    :type duration: :obj:`int`
+
+    :param supports_streaming: Optional. Pass True, if the uploaded video is suitable for streaming
+    :type supports_streaming: :obj:`bool`
+
+    :param has_spoiler: Optional. True, if the uploaded video is a spoiler
+    :type has_spoiler: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputMediaVideo`
+    """
+    def __init__(self, media, thumb=None, caption=None, parse_mode=None, caption_entities=None,
+                 width=None, height=None, duration=None, supports_streaming=None, has_spoiler=None):
+        super(InputMediaVideo, self).__init__(
+            type="video", media=media, caption=caption, parse_mode=parse_mode, caption_entities=caption_entities)
+        self.thumb = thumb
+        self.width = width
+        self.height = height
+        self.duration = duration
+        self.supports_streaming = supports_streaming
+        self.has_spoiler: Optional[bool] = has_spoiler
+
+    def to_dict(self):
+        ret = super(InputMediaVideo, self).to_dict()
+        if self.thumb:
+            ret['thumb'] = self.thumb
+        if self.width:
+            ret['width'] = self.width
+        if self.height:
+            ret['height'] = self.height
+        if self.duration:
+            ret['duration'] = self.duration
+        if self.supports_streaming:
+            ret['supports_streaming'] = self.supports_streaming
+        if self.has_spoiler is not None:
+            ret['has_spoiler'] = self.has_spoiler
+        return ret
+
+
+class InputMediaAnimation(InputMedia):
+    """
+    Represents an animation file (GIF or H.264/MPEG-4 AVC video without sound) to be sent.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputmediaanimation
+
+    :param media: File to send. Pass a file_id to send a file that exists on the Telegram servers (recommended), pass an 
+        HTTP URL for Telegram to get a file from the Internet, or pass “attach://<file_attach_name>” to upload a new one using 
+        multipart/form-data under <file_attach_name> name. More information on Sending Files »
+    :type media: :obj:`str`
+
+    :param thumb: Optional. Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported 
+        server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should 
+        not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be 
+        only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using 
+        multipart/form-data under <file_attach_name>. More information on Sending Files »
+    :type thumb: InputFile or :obj:`str`
+
+    :param caption: Optional. Caption of the animation to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the animation caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param width: Optional. Animation width
+    :type width: :obj:`int`
+
+    :param height: Optional. Animation height
+    :type height: :obj:`int`
+
+    :param duration: Optional. Animation duration in seconds
+    :type duration: :obj:`int`
+
+    :param has_spoiler: Optional. True, if the uploaded animation is a spoiler
+    :type has_spoiler: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputMediaAnimation`
+    """
+    def __init__(self, media, thumb=None, caption=None, parse_mode=None, caption_entities=None,
+                 width=None, height=None, duration=None, has_spoiler=None):
+        super(InputMediaAnimation, self).__init__(
+            type="animation", media=media, caption=caption, parse_mode=parse_mode, caption_entities=caption_entities)
+        self.thumb = thumb
+        self.width = width
+        self.height = height
+        self.duration = duration
+        self.has_spoiler: Optional[bool] = has_spoiler
+
+    def to_dict(self):
+        ret = super(InputMediaAnimation, self).to_dict()
+        if self.thumb:
+            ret['thumb'] = self.thumb
+        if self.width:
+            ret['width'] = self.width
+        if self.height:
+            ret['height'] = self.height
+        if self.duration:
+            ret['duration'] = self.duration
+        if self.has_spoiler is not None:
+            ret['has_spoiler'] = self.has_spoiler
+        return ret
+
+
+class InputMediaAudio(InputMedia):
+    """
+    Represents an audio file to be treated as music to be sent.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputmediaaudio
+
+    :param media: File to send. Pass a file_id to send a file that exists on the Telegram servers (recommended), pass an 
+        HTTP URL for Telegram to get a file from the Internet, or pass “attach://<file_attach_name>” to upload a new one using 
+        multipart/form-data under <file_attach_name> name. More information on Sending Files »
+    :type media: :obj:`str`
+
+    :param thumb: Optional. Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported 
+        server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should 
+        not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be 
+        only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using 
+        multipart/form-data under <file_attach_name>. More information on Sending Files »
+    :type thumb: InputFile or :obj:`str`
+
+    :param caption: Optional. Caption of the audio to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the audio caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param duration: Optional. Duration of the audio in seconds
+    :type duration: :obj:`int`
+
+    :param performer: Optional. Performer of the audio
+    :type performer: :obj:`str`
+
+    :param title: Optional. Title of the audio
+    :type title: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputMediaAudio`
+    """
+    def __init__(self, media, thumb=None, caption=None, parse_mode=None, caption_entities=None,
+                 duration=None, performer=None, title=None):
+        super(InputMediaAudio, self).__init__(
+            type="audio", media=media, caption=caption, parse_mode=parse_mode, caption_entities=caption_entities)
+        self.thumb = thumb
+        self.duration = duration
+        self.performer = performer
+        self.title = title
+
+    def to_dict(self):
+        ret = super(InputMediaAudio, self).to_dict()
+        if self.thumb:
+            ret['thumb'] = self.thumb
+        if self.duration:
+            ret['duration'] = self.duration
+        if self.performer:
+            ret['performer'] = self.performer
+        if self.title:
+            ret['title'] = self.title
+        return ret
+
+
+class InputMediaDocument(InputMedia):
+    """
+    Represents a general file to be sent.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#inputmediadocument
+
+    :param media: File to send. Pass a file_id to send a file that exists on the Telegram servers (recommended), pass an
+        HTTP URL for Telegram to get a file from the Internet, or pass “attach://<file_attach_name>” to upload a new one using 
+        multipart/form-data under <file_attach_name> name. More information on Sending Files »
+    :type media: :obj:`str`
+
+    :param thumb: Optional. Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported 
+        server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should 
+        not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be 
+        only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using 
+        multipart/form-data under <file_attach_name>. More information on Sending Files »
+    :type thumb: InputFile or :obj:`str`
+
+    :param caption: Optional. Caption of the document to be sent, 0-1024 characters after entities parsing
+    :type caption: :obj:`str`
+
+    :param parse_mode: Optional. Mode for parsing entities in the document caption. See formatting options for more 
+        details.
+    :type parse_mode: :obj:`str`
+
+    :param caption_entities: Optional. List of special entities that appear in the caption, which can be specified 
+        instead of parse_mode
+    :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param disable_content_type_detection: Optional. Disables automatic server-side content type detection for 
+        files uploaded using multipart/form-data. Always True, if the document is sent as part of an album.
+    :type disable_content_type_detection: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.InputMediaDocument`
+    """
+    def __init__(self, media, thumb=None, caption=None, parse_mode=None, caption_entities=None,
+                 disable_content_type_detection=None):
+        super(InputMediaDocument, self).__init__(
+            type="document", media=media, caption=caption, parse_mode=parse_mode, caption_entities=caption_entities)
+        self.thumb = thumb
+        self.disable_content_type_detection = disable_content_type_detection
+
+    def to_dict(self):
+        ret = super(InputMediaDocument, self).to_dict()
+        if self.thumb:
+            ret['thumb'] = self.thumb
+        if self.disable_content_type_detection is not None:
+            ret['disable_content_type_detection'] = self.disable_content_type_detection
+        return ret
+
+
+class PollOption(JsonDeserializable):
+    """
+    This object contains information about one answer option in a poll.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#polloption
+
+    :param text: Option text, 1-100 characters
+    :type text: :obj:`str`
+
+    :param voter_count: Number of users that voted for this option
+    :type voter_count: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.PollOption`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, text, voter_count = 0, **kwargs):
+        self.text: str = text
+        self.voter_count: int = voter_count
+    # Converted in _convert_poll_options
+    # def to_json(self):
+    #     # send_poll Option is a simple string: https://core.telegram.org/bots/api#sendpoll
+    #     return json.dumps(self.text)
+
+
+class Poll(JsonDeserializable):
+    """
+    This object contains information about a poll.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#poll
+
+    :param id: Unique poll identifier
+    :type id: :obj:`str`
+
+    :param question: Poll question, 1-300 characters
+    :type question: :obj:`str`
+
+    :param options: List of poll options
+    :type options: :obj:`list` of :class:`telebot.types.PollOption`
+
+    :param total_voter_count: Total number of users that voted in the poll
+    :type total_voter_count: :obj:`int`
+
+    :param is_closed: True, if the poll is closed
+    :type is_closed: :obj:`bool`
+
+    :param is_anonymous: True, if the poll is anonymous
+    :type is_anonymous: :obj:`bool`
+
+    :param type: Poll type, currently can be “regular” or “quiz”
+    :type type: :obj:`str`
+
+    :param allows_multiple_answers: True, if the poll allows multiple answers
+    :type allows_multiple_answers: :obj:`bool`
+
+    :param correct_option_id: Optional. 0-based identifier of the correct answer option. Available only for polls in 
+        the quiz mode, which are closed, or was sent (not forwarded) by the bot or to the private chat with the bot.
+    :type correct_option_id: :obj:`int`
+
+    :param explanation: Optional. Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a 
+        quiz-style poll, 0-200 characters
+    :type explanation: :obj:`str`
+
+    :param explanation_entities: Optional. Special entities like usernames, URLs, bot commands, etc. that appear in 
+        the explanation
+    :type explanation_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+    :param open_period: Optional. Amount of time in seconds the poll will be active after creation
+    :type open_period: :obj:`int`
+
+    :param close_date: Optional. Point in time (Unix timestamp) when the poll will be automatically closed
+    :type close_date: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.Poll`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['poll_id'] = obj.pop('id')
+        options = []
+        for opt in obj['options']:
+            options.append(PollOption.de_json(opt))
+        obj['options'] = options or None
+        if 'explanation_entities' in obj:
+            obj['explanation_entities'] = Message.parse_entities(obj['explanation_entities'])
+        return cls(**obj)
+
+    # noinspection PyShadowingBuiltins
+    def __init__(
+            self,
+            question, options,
+            poll_id=None, total_voter_count=None, is_closed=None, is_anonymous=None, type=None,
+            allows_multiple_answers=None, correct_option_id=None, explanation=None, explanation_entities=None,
+            open_period=None, close_date=None, poll_type=None, **kwargs):
+        self.id: str = poll_id
+        self.question: str = question
+        self.options: List[PollOption] = options
+        self.total_voter_count: int = total_voter_count
+        self.is_closed: bool = is_closed
+        self.is_anonymous: bool = is_anonymous
+        self.type: str = type
+        if poll_type is not None:
+            # Wrong param name backward compatibility
+            logger.warning("Poll: poll_type parameter is deprecated. Use type instead.")
+            if type is None:
+                self.type: str = poll_type
+        self.allows_multiple_answers: bool = allows_multiple_answers
+        self.correct_option_id: int = correct_option_id
+        self.explanation: str = explanation
+        self.explanation_entities: List[MessageEntity] = explanation_entities
+        self.open_period: int = open_period
+        self.close_date: int = close_date
+
+    def add(self, option):
+        """
+        Add an option to the poll.
+
+        :param option: Option to add
+        :type option: :class:`telebot.types.PollOption` or :obj:`str`
+        """
+        if type(option) is PollOption:
+            self.options.append(option)
+        else:
+            self.options.append(PollOption(option))
+
+
+class PollAnswer(JsonSerializable, JsonDeserializable, Dictionaryable):
+    """
+    This object represents an answer of a user in a non-anonymous poll.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#pollanswer
+
+    :param poll_id: Unique poll identifier
+    :type poll_id: :obj:`str`
+
+    :param user: The user, who changed the answer to the poll
+    :type user: :class:`telebot.types.User`
+
+    :param option_ids: 0-based identifiers of answer options, chosen by the user. May be empty if the user retracted 
+        their vote.
+    :type option_ids: :obj:`list` of :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.PollAnswer`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if (json_string is None): return None
+        obj = cls.check_json(json_string)
+        obj['user'] = User.de_json(obj['user'])
+        return cls(**obj)
+
+    def __init__(self, poll_id, user, option_ids, **kwargs):
+        self.poll_id: str = poll_id
+        self.user: User = user
+        self.option_ids: List[int] = option_ids
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    def to_dict(self):
+        return {'poll_id': self.poll_id,
+                'user': self.user.to_dict(),
+                'option_ids': self.option_ids}
+
+
+class ChatLocation(JsonSerializable, JsonDeserializable, Dictionaryable):
+    """
+    Represents a location to which a chat is connected.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatlocation
+
+    :param location: The location to which the supergroup is connected. Can't be a live location.
+    :type location: :class:`telebot.types.Location`
+
+    :param address: Location address; 1-64 characters, as defined by the chat owner
+    :type address: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatLocation`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return json_string
+        obj = cls.check_json(json_string)
+        obj['location'] = Location.de_json(obj['location'])
+        return cls(**obj)
+    
+    def __init__(self, location, address, **kwargs):
+        self.location: Location = location
+        self.address: str = address
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+    
+    def to_dict(self):
+        return {
+            "location": self.location.to_dict(),
+            "address": self.address
+        }
+
+
+class ChatInviteLink(JsonSerializable, JsonDeserializable, Dictionaryable):
+    """
+    Represents an invite link for a chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatinvitelink
+
+    :param invite_link: The invite link. If the link was created by another chat administrator, then the second part of 
+        the link will be replaced with “…”.
+    :type invite_link: :obj:`str`
+
+    :param creator: Creator of the link
+    :type creator: :class:`telebot.types.User`
+
+    :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators
+    :type creates_join_request: :obj:`bool`
+
+    :param is_primary: True, if the link is primary
+    :type is_primary: :obj:`bool`
+
+    :param is_revoked: True, if the link is revoked
+    :type is_revoked: :obj:`bool`
+
+    :param name: Optional. Invite link name
+    :type name: :obj:`str`
+
+    :param expire_date: Optional. Point in time (Unix timestamp) when the link will expire or has been expired
+    :type expire_date: :obj:`int`
+
+    :param member_limit: Optional. The maximum number of users that can be members of the chat simultaneously after 
+        joining the chat via this invite link; 1-99999
+    :type member_limit: :obj:`int`
+
+    :param pending_join_request_count: Optional. Number of pending join requests created using this link
+    :type pending_join_request_count: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatInviteLink`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        obj['creator'] = User.de_json(obj['creator'])
+        return cls(**obj)
+    
+    def __init__(self, invite_link, creator, creates_join_request , is_primary, is_revoked,
+                name=None, expire_date=None, member_limit=None, pending_join_request_count=None, **kwargs):
+        self.invite_link: str = invite_link
+        self.creator: User = creator
+        self.creates_join_request: bool = creates_join_request
+        self.is_primary: bool = is_primary
+        self.is_revoked: bool = is_revoked
+        self.name: str = name
+        self.expire_date: int = expire_date
+        self.member_limit: int = member_limit
+        self.pending_join_request_count: int = pending_join_request_count
+    
+    def to_json(self):
+        return json.dumps(self.to_dict())
+    
+    def to_dict(self):
+        json_dict = {
+            "invite_link": self.invite_link,
+            "creator": self.creator.to_dict(),
+            "is_primary": self.is_primary,
+            "is_revoked": self.is_revoked,
+            "creates_join_request": self.creates_join_request
+        }
+        if self.expire_date:
+            json_dict["expire_date"] = self.expire_date
+        if self.member_limit:
+            json_dict["member_limit"] = self.member_limit
+        if self.pending_join_request_count:
+            json_dict["pending_join_request_count"] = self.pending_join_request_count
+        if self.name:
+            json_dict["name"] = self.name
+        return json_dict
+
+
+class ProximityAlertTriggered(JsonDeserializable):
+    """
+    This object represents the content of a service message, sent whenever a user in the chat triggers a proximity alert set by another user.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#proximityalerttriggered
+
+    :param traveler: User that triggered the alert
+    :type traveler: :class:`telebot.types.User`
+
+    :param watcher: User that set the alert
+    :type watcher: :class:`telebot.types.User`
+
+    :param distance: The distance between the users
+    :type distance: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ProximityAlertTriggered`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+    
+    def __init__(self, traveler, watcher, distance, **kwargs):
+        self.traveler: User = traveler
+        self.watcher: User = watcher
+        self.distance: int = distance
+
+
+class VideoChatStarted(JsonDeserializable):
+    """
+    This object represents a service message about a video chat started in the chat. Currently holds no information.
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+    
+    def __init__(self):
+        pass
+
+class VoiceChatStarted(VideoChatStarted):
+    """
+    Deprecated, use :class:`VideoChatStarted` instead.
+    """
+
+    def __init__(self):
+        logger.warning('VoiceChatStarted is deprecated. Use VideoChatStarted instead.')
+        super().__init__()
+
+
+class VideoChatScheduled(JsonDeserializable):
+    """
+    This object represents a service message about a video chat scheduled in the chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#videochatscheduled
+
+    :param start_date: Point in time (Unix timestamp) when the video chat is supposed to be started by a chat 
+        administrator
+    :type start_date: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.VideoChatScheduled`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+    
+    def __init__(self, start_date, **kwargs):
+        self.start_date: int = start_date
+
+class VoiceChatScheduled(VideoChatScheduled):
+    """
+    Deprecated, use :class:`VideoChatScheduled` instead.
+    """
+    def __init__(self, *args, **kwargs):
+        logger.warning('VoiceChatScheduled is deprecated. Use VideoChatScheduled instead.')
+        super().__init__(*args, **kwargs)
+
+
+class VideoChatEnded(JsonDeserializable):
+    """
+    This object represents a service message about a video chat ended in the chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#videochatended
+
+    :param duration: Video chat duration in seconds
+    :type duration: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.VideoChatEnded`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+    
+    def __init__(self, duration, **kwargs):
+        self.duration: int = duration
+
+class VoiceChatEnded(VideoChatEnded):
+    """
+    Deprecated, use :class:`VideoChatEnded` instead.
+    """
+    def __init__(self, *args, **kwargs):
+        logger.warning('VoiceChatEnded is deprecated. Use VideoChatEnded instead.')
+        super().__init__(*args, **kwargs)
+
+
+
+class VideoChatParticipantsInvited(JsonDeserializable):
+    """
+    This object represents a service message about new members invited to a video chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#videochatparticipantsinvited
+
+    :param users: New members that were invited to the video chat
+    :type users: :obj:`list` of :class:`telebot.types.User`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.VideoChatParticipantsInvited`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        if 'users' in obj:
+            obj['users'] = [User.de_json(u) for u in obj['users']]
+        return cls(**obj)
+    
+    def __init__(self, users=None, **kwargs):
+        self.users: List[User] = users
+
+class VoiceChatParticipantsInvited(VideoChatParticipantsInvited):
+    """
+    Deprecated, use :class:`VideoChatParticipantsInvited` instead.
+    """
+    def __init__(self, *args, **kwargs):
+        logger.warning('VoiceChatParticipantsInvited is deprecated. Use VideoChatParticipantsInvited instead.')
+        super().__init__(*args, **kwargs)
+
+
+class MessageAutoDeleteTimerChanged(JsonDeserializable):
+    """
+    This object represents a service message about a change in auto-delete timer settings.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#messageautodeletetimerchanged
+
+    :param message_auto_delete_time: New auto-delete time for messages in the chat; in seconds
+    :type message_auto_delete_time: :obj:`int`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MessageAutoDeleteTimerChanged`
+    """   
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string, dict_copy=False)
+        return cls(**obj)
+
+    def __init__(self, message_auto_delete_time, **kwargs):
+        self.message_auto_delete_time = message_auto_delete_time
+
+
+class MenuButton(JsonDeserializable, JsonSerializable, Dictionaryable):
+    """
+    This object describes the bot's menu button in a private chat. It should be one of
+
+    * :class:`MenuButtonCommands`
+    * :class:`MenuButtonWebApp`
+    * :class:`MenuButtonDefault`
+    
+    If a menu button other than MenuButtonDefault is set for a private chat, then it is applied
+    in the chat. Otherwise the default menu button is applied. By default, the menu button opens the list of bot commands.
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        map = {
+            'commands': MenuButtonCommands,
+            'web_app': MenuButtonWebApp,
+            'default': MenuButtonDefault
+        }
+        return map[obj['type']](**obj)
+    
+    def to_json(self):
+        """
+        :meta private:
+        """
+        raise NotImplementedError
+
+    def to_dict(self):
+        """
+        :meta private:
+        """
+        raise NotImplementedError
+        
+
+class MenuButtonCommands(MenuButton):
+    """
+    Represents a menu button, which opens the bot's list of commands.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#menubuttoncommands
+
+    :param type: Type of the button, must be commands
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MenuButtonCommands`
+    """
+
+    def __init__(self, type):
+        self.type = type
+
+    def to_dict(self):
+        return {'type': self.type}
+    
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+class MenuButtonWebApp(MenuButton):
+    """
+    Represents a menu button, which launches a Web App.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#menubuttonwebapp
+
+    :param type: Type of the button, must be web_app
+    :type type: :obj:`str`
+
+    :param text: Text on the button
+    :type text: :obj:`str`
+
+    :param web_app: Description of the Web App that will be launched when the user presses the button. The Web App will be 
+        able to send an arbitrary message on behalf of the user using the method answerWebAppQuery.
+    :type web_app: :class:`telebot.types.WebAppInfo`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MenuButtonWebApp`
+    """
+
+    def __init__(self, type, text, web_app):
+        self.type: str = type
+        self.text: str = text
+        self.web_app: WebAppInfo = web_app
+
+    def to_dict(self):
+        return {'type': self.type, 'text': self.text, 'web_app': self.web_app.to_dict()}
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+    
+class MenuButtonDefault(MenuButton):
+    """
+    Describes that no specific value for the menu button was set.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#menubuttondefault
+
+    :param type: Type of the button, must be default
+    :type type: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.MenuButtonDefault`
+    """
+    def __init__(self, type):
+        self.type: str = type
+
+    def to_dict(self):
+        return {'type': self.type}
+
+    def to_json(self):
+        return json.dumps(self.to_dict())
+
+    
+class ChatAdministratorRights(JsonDeserializable, JsonSerializable, Dictionaryable):
+    """
+    Represents the rights of an administrator in a chat.
+
+    Telegram Documentation: https://core.telegram.org/bots/api#chatadministratorrights
+
+    :param is_anonymous: True, if the user's presence in the chat is hidden
+    :type is_anonymous: :obj:`bool`
+
+    :param can_manage_chat: True, if the administrator can access the chat event log, chat statistics, message 
+        statistics in channels, see channel members, see anonymous administrators in supergroups and ignore slow mode. 
+        Implied by any other administrator privilege
+    :type can_manage_chat: :obj:`bool`
+
+    :param can_delete_messages: True, if the administrator can delete messages of other users
+    :type can_delete_messages: :obj:`bool`
+
+    :param can_manage_video_chats: True, if the administrator can manage video chats
+    :type can_manage_video_chats: :obj:`bool`
+
+    :param can_restrict_members: True, if the administrator can restrict, ban or unban chat members
+    :type can_restrict_members: :obj:`bool`
+
+    :param can_promote_members: True, if the administrator can add new administrators with a subset of their own 
+        privileges or demote administrators that he has promoted, directly or indirectly (promoted by administrators that 
+        were appointed by the user)
+    :type can_promote_members: :obj:`bool`
+
+    :param can_change_info: True, if the user is allowed to change the chat title, photo and other settings
+    :type can_change_info: :obj:`bool`
+
+    :param can_invite_users: True, if the user is allowed to invite new users to the chat
+    :type can_invite_users: :obj:`bool`
+
+    :param can_post_messages: Optional. True, if the administrator can post in the channel; channels only
+    :type can_post_messages: :obj:`bool`
+
+    :param can_edit_messages: Optional. True, if the administrator can edit messages of other users and can pin 
+        messages; channels only
+    :type can_edit_messages: :obj:`bool`
+
+    :param can_pin_messages: Optional. True, if the user is allowed to pin messages; groups and supergroups only
+    :type can_pin_messages: :obj:`bool`
+
+    :param can_manage_topics: Optional. True, if the user is allowed to create, rename, close, and reopen forum topics; supergroups only
+    :type can_manage_topics: :obj:`bool`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ChatAdministratorRights`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, is_anonymous: bool, can_manage_chat: bool, 
+        can_delete_messages: bool, can_manage_video_chats: bool, can_restrict_members: bool,
+        can_promote_members: bool, can_change_info: bool, can_invite_users: bool,
+        can_post_messages: bool=None, can_edit_messages: bool=None,
+        can_pin_messages: bool=None, can_manage_topics: bool=None) -> None:
+        
+        self.is_anonymous: bool = is_anonymous
+        self.can_manage_chat: bool = can_manage_chat
+        self.can_delete_messages: bool = can_delete_messages
+        self.can_manage_video_chats: bool = can_manage_video_chats
+        self.can_restrict_members: bool = can_restrict_members
+        self.can_promote_members: bool = can_promote_members
+        self.can_change_info: bool = can_change_info
+        self.can_invite_users: bool = can_invite_users
+        self.can_post_messages: bool = can_post_messages
+        self.can_edit_messages: bool = can_edit_messages
+        self.can_pin_messages: bool = can_pin_messages
+        self.can_manage_topics: bool = can_manage_topics
+
+    def to_dict(self):
+        json_dict = {
+            'is_anonymous': self.is_anonymous,
+            'can_manage_chat': self.can_manage_chat,
+            'can_delete_messages': self.can_delete_messages,
+            'can_manage_video_chats': self.can_manage_video_chats,
+            'can_restrict_members': self.can_restrict_members,
+            'can_promote_members': self.can_promote_members,
+            'can_change_info': self.can_change_info,
+            'can_invite_users': self.can_invite_users,
+        }
+        if self.can_post_messages is not None:
+            json_dict['can_post_messages'] = self.can_post_messages
+        if self.can_edit_messages is not None:
+            json_dict['can_edit_messages'] = self.can_edit_messages
+        if self.can_pin_messages is not None:
+            json_dict['can_pin_messages'] = self.can_pin_messages
+        if self.can_manage_topics is not None:
+            json_dict['can_manage_topics'] = self.can_manage_topics
+        return json_dict
+    
+    def to_json(self):
+        return json.dumps(self.to_dict())
+    
+
+
+class InputFile:
+    """
+    A class to send files through Telegram Bot API.
+
+    You need to pass a file, which should be an instance of :class:`io.IOBase` or 
+    :class:`pathlib.Path`, or :obj:`str`.
+
+    If you pass an :obj:`str` as a file, it will be opened and closed by the class.
+
+    :param file: A file to send.
+    :type file: :class:`io.IOBase` or :class:`pathlib.Path` or :obj:`str`
+
+    .. code-block:: python3
+        :caption: Example on sending a file using this class
+
+        from telebot.types import InputFile
+
+        # Sending a file from disk
+        bot.send_document(
+            chat_id,
+            InputFile('/path/to/file/file.txt')
+        )
+
+
+        # Sending a file from an io.IOBase object
+        with open('/path/to/file/file.txt', 'rb') as f:
+            bot.send_document(
+                chat_id,
+                InputFile(f)
+            )
+
+        # Sending a file using pathlib.Path:
+        bot.send_document(
+            chat_id,
+            InputFile(pathlib.Path('/path/to/file/file.txt'))
+        )
+    """
+    def __init__(self, file) -> None:
+        self._file, self.file_name = self._resolve_file(file)
+
+    def _resolve_file(self, file):
+        if isinstance(file, str):
+            _file = open(file, 'rb')
+            return _file, os.path.basename(_file.name)
+        elif isinstance(file, IOBase):
+            return file, os.path.basename(file.name)
+        elif isinstance(file, Path):
+            _file = open(file, 'rb')
+            return _file, os.path.basename(_file.name)
+        else:
+            raise TypeError("File must be a string or a file-like object(pathlib.Path, io.IOBase).")
+
+
+    @property
+    def file(self):
+        """
+        File object.
+        """
+        return self._file
+
+
+class ForumTopicCreated(JsonDeserializable):
+    """
+    This object represents a service message about a new forum topic created in the chat.
+    
+    Telegram documentation: https://core.telegram.org/bots/api#forumtopiccreated
+
+    :param name: Name of the topic
+    :type name: :obj:`str`
+
+    :param icon_color: Color of the topic icon in RGB format
+    :type icon_color: :obj:`int`
+
+    :param icon_custom_emoji_id: Optional. Unique identifier of the custom emoji shown as the topic icon
+    :type icon_custom_emoji_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ForumTopicCreated`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, name: str, icon_color: int, icon_custom_emoji_id: Optional[str]=None) -> None:
+        self.name: str = name
+        self.icon_color: int = icon_color
+        self.icon_custom_emoji_id: Optional[str] = icon_custom_emoji_id
+
+
+class ForumTopicClosed(JsonDeserializable):
+    """
+    This object represents a service message about a forum topic closed in the chat. Currently holds no information.
+    
+    Telegram documentation: https://core.telegram.org/bots/api#forumtopicclosed
+    """
+    # for future use
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+
+    def __init__(self) -> None:
+        pass
+
+
+class ForumTopicReopened(JsonDeserializable):
+    """
+    This object represents a service message about a forum topic reopened in the chat. Currently holds no information.
+
+    Telegram documentation: https://core.telegram.org/bots/api#forumtopicreopened
+    """
+    # for future use
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+
+    def __init__(self) -> None:
+        pass
+
+class ForumTopicEdited(JsonDeserializable):
+    """
+    This object represents a service message about an edited forum topic.
+
+    Telegram documentation: https://core.telegram.org/bots/api#forumtopicedited
+
+    :param name: Optional, Name of the topic(if updated)
+    :type name: :obj:`str`
+
+    :param icon_custom_emoji_id: Optional. New identifier of the custom emoji shown as the topic icon, if it was edited;
+        an empty string if the icon was removed
+    :type icon_custom_emoji_id: :obj:`str`
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, name: Optional[str]=None, icon_custom_emoji_id: Optional[str]=None) -> None:
+        self.name: Optional[str] = name
+        self.icon_custom_emoji_id: Optional[str] = icon_custom_emoji_id
+
+
+class GeneralForumTopicHidden(JsonDeserializable):
+    """
+    This object represents a service message about General forum topic hidden in the chat.
+    Currently holds no information.
+
+    Telegram documentation: https://core.telegram.org/bots/api#generalforumtopichidden
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+
+    def __init__(self) -> None:
+        pass
+
+
+class GeneralForumTopicUnhidden(JsonDeserializable):
+    """
+    This object represents a service message about General forum topic unhidden in the chat.
+    Currently holds no information.
+
+    Telegram documentation: https://core.telegram.org/bots/api#generalforumtopicunhidden
+    """
+    
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+
+    def __init__(self) -> None:
+        pass
+
+
+
+class ForumTopic(JsonDeserializable):
+    """
+    This object represents a forum topic.
+
+    Telegram documentation: https://core.telegram.org/bots/api#forumtopic
+
+    :param message_thread_id: Unique identifier of the forum topic
+    :type message_thread_id: :obj:`int`
+
+    :param name: Name of the topic
+    :type name: :obj:`str`
+
+    :param icon_color: Color of the topic icon in RGB format
+    :type icon_color: :obj:`int`
+
+    :param icon_custom_emoji_id: Optional. Unique identifier of the custom emoji shown as the topic icon
+    :type icon_custom_emoji_id: :obj:`str`
+
+    :return: Instance of the class
+    :rtype: :class:`telebot.types.ForumTopic`
+    """
+
+    @classmethod
+    def de_json(cls, json_string):
+        if json_string is None: return None
+        obj = cls.check_json(json_string)
+        return cls(**obj)
+
+    def __init__(self, message_thread_id: int, name: str, icon_color: int, icon_custom_emoji_id: Optional[str]=None) -> None:
+        self.message_thread_id: int = message_thread_id
+        self.name: str = name
+        self.icon_color: int = icon_color
+        self.icon_custom_emoji_id: Optional[str] = icon_custom_emoji_id
+
+
+class WriteAccessAllowed(JsonDeserializable):
+    """
+    This object represents a service message about a user allowed to post messages in the chat.
+    Currently holds no information.
+
+    Telegram documentation: https://core.telegram.org/bots/api#writeaccessallowed
+    """
+    @classmethod
+    def de_json(cls, json_string):
+        return cls()
+
+    def __init__(self) -> None:
+        pass
+
+
+
+
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/apihelper.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_helper.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,5076 +1,5312 @@
-00000000: 2320 2d2a 2d20 636f 6469 6e67 3a20 7574  # -*- coding: ut
-00000010: 662d 3820 2d2a 2d0a 696d 706f 7274 2074  f-8 -*-.import t
-00000020: 696d 650a 6672 6f6d 2064 6174 6574 696d  ime.from datetim
-00000030: 6520 696d 706f 7274 2064 6174 6574 696d  e import datetim
-00000040: 650a 0a74 7279 3a0a 2020 2020 696d 706f  e..try:.    impo
-00000050: 7274 2075 6a73 6f6e 2061 7320 6a73 6f6e  rt ujson as json
-00000060: 0a65 7863 6570 7420 496d 706f 7274 4572  .except ImportEr
-00000070: 726f 723a 0a20 2020 2069 6d70 6f72 7420  ror:.    import 
-00000080: 6a73 6f6e 0a0a 696d 706f 7274 2072 6571  json..import req
-00000090: 7565 7374 730a 6672 6f6d 2072 6571 7565  uests.from reque
-000000a0: 7374 732e 6578 6365 7074 696f 6e73 2069  sts.exceptions i
-000000b0: 6d70 6f72 7420 4854 5450 4572 726f 722c  mport HTTPError,
-000000c0: 2043 6f6e 6e65 6374 696f 6e45 7272 6f72   ConnectionError
-000000d0: 2c20 5469 6d65 6f75 740a 6672 6f6d 2072  , Timeout.from r
-000000e0: 6571 7565 7374 732e 6164 6170 7465 7273  equests.adapters
-000000f0: 2069 6d70 6f72 7420 4854 5450 4164 6170   import HTTPAdap
-00000100: 7465 720a 0a74 7279 3a0a 2020 2020 2320  ter..try:.    # 
-00000110: 6e6f 696e 7370 6563 7469 6f6e 2050 7955  noinspection PyU
-00000120: 6e72 6573 6f6c 7665 6452 6566 6572 656e  nresolvedReferen
-00000130: 6365 730a 2020 2020 6672 6f6d 2072 6571  ces.    from req
-00000140: 7565 7374 732e 7061 636b 6167 6573 2e75  uests.packages.u
-00000150: 726c 6c69 6233 2069 6d70 6f72 7420 6669  rllib3 import fi
-00000160: 656c 6473 0a20 2020 2066 6f72 6d61 745f  elds.    format_
-00000170: 6865 6164 6572 5f70 6172 616d 203d 2066  header_param = f
-00000180: 6965 6c64 732e 666f 726d 6174 5f68 6561  ields.format_hea
-00000190: 6465 725f 7061 7261 6d0a 6578 6365 7074  der_param.except
-000001a0: 2049 6d70 6f72 7445 7272 6f72 3a0a 2020   ImportError:.  
-000001b0: 2020 666f 726d 6174 5f68 6561 6465 725f    format_header_
-000001c0: 7061 7261 6d20 3d20 4e6f 6e65 0a69 6d70  param = None.imp
-000001d0: 6f72 7420 7465 6c65 626f 740a 6672 6f6d  ort telebot.from
-000001e0: 2074 656c 6562 6f74 2069 6d70 6f72 7420   telebot import 
-000001f0: 7479 7065 730a 6672 6f6d 2074 656c 6562  types.from teleb
-00000200: 6f74 2069 6d70 6f72 7420 7574 696c 0a0a  ot import util..
-00000210: 6c6f 6767 6572 203d 2074 656c 6562 6f74  logger = telebot
-00000220: 2e6c 6f67 6765 720a 0a70 726f 7879 203d  .logger..proxy =
-00000230: 204e 6f6e 650a 7365 7373 696f 6e20 3d20   None.session = 
-00000240: 4e6f 6e65 0a0a 4150 495f 5552 4c20 3d20  None..API_URL = 
-00000250: 4e6f 6e65 0a46 494c 455f 5552 4c20 3d20  None.FILE_URL = 
-00000260: 4e6f 6e65 0a0a 434f 4e4e 4543 545f 5449  None..CONNECT_TI
-00000270: 4d45 4f55 5420 3d20 3135 0a52 4541 445f  MEOUT = 15.READ_
-00000280: 5449 4d45 4f55 5420 3d20 3330 0a0a 4c4f  TIMEOUT = 30..LO
-00000290: 4e47 5f50 4f4c 4c49 4e47 5f54 494d 454f  NG_POLLING_TIMEO
-000002a0: 5554 203d 2031 3020 2320 5368 6f75 6c64  UT = 10 # Should
-000002b0: 2062 6520 706f 7369 7469 7665 2c20 7368   be positive, sh
-000002c0: 6f72 7420 706f 6c6c 696e 6720 7368 6f75  ort polling shou
-000002d0: 6c64 2062 6520 7573 6564 2066 6f72 2074  ld be used for t
-000002e0: 6573 7469 6e67 2070 7572 706f 7365 7320  esting purposes 
-000002f0: 6f6e 6c79 2028 6874 7470 733a 2f2f 636f  only (https://co
-00000300: 7265 2e74 656c 6567 7261 6d2e 6f72 672f  re.telegram.org/
-00000310: 626f 7473 2f61 7069 2367 6574 7570 6461  bots/api#getupda
-00000320: 7465 7329 0a0a 5345 5353 494f 4e5f 5449  tes)..SESSION_TI
-00000330: 4d45 5f54 4f5f 4c49 5645 203d 2036 3030  ME_TO_LIVE = 600
-00000340: 2020 2320 496e 2073 6563 6f6e 6473 2e20    # In seconds. 
-00000350: 4e6f 6e65 202d 206c 6976 6520 666f 7265  None - live fore
-00000360: 7665 722c 2030 202d 206f 6e65 2d74 696d  ver, 0 - one-tim
-00000370: 650a 0a52 4554 5259 5f4f 4e5f 4552 524f  e..RETRY_ON_ERRO
-00000380: 5220 3d20 4661 6c73 650a 5245 5452 595f  R = False.RETRY_
-00000390: 5449 4d45 4f55 5420 3d20 320a 4d41 585f  TIMEOUT = 2.MAX_
-000003a0: 5245 5452 4945 5320 3d20 3135 0a52 4554  RETRIES = 15.RET
-000003b0: 5259 5f45 4e47 494e 4520 3d20 310a 0a43  RY_ENGINE = 1..C
-000003c0: 5553 544f 4d5f 5345 5249 414c 495a 4552  USTOM_SERIALIZER
-000003d0: 203d 204e 6f6e 650a 4355 5354 4f4d 5f52   = None.CUSTOM_R
-000003e0: 4551 5545 5354 5f53 454e 4445 5220 3d20  EQUEST_SENDER = 
-000003f0: 4e6f 6e65 0a0a 454e 4142 4c45 5f4d 4944  None..ENABLE_MID
-00000400: 444c 4557 4152 4520 3d20 4661 6c73 650a  DLEWARE = False.
-00000410: 0a0a 6465 6620 5f67 6574 5f72 6571 5f73  ..def _get_req_s
-00000420: 6573 7369 6f6e 2872 6573 6574 3d46 616c  ession(reset=Fal
-00000430: 7365 293a 0a20 2020 2069 6620 5345 5353  se):.    if SESS
-00000440: 494f 4e5f 5449 4d45 5f54 4f5f 4c49 5645  ION_TIME_TO_LIVE
-00000450: 3a0a 2020 2020 2020 2020 2320 4966 2073  :.        # If s
-00000460: 6573 7369 6f6e 2054 544c 2069 7320 7365  ession TTL is se
-00000470: 7420 2d20 6368 6563 6b20 7469 6d65 2070  t - check time p
-00000480: 6173 7365 640a 2020 2020 2020 2020 6372  assed.        cr
-00000490: 6561 7469 6f6e 5f64 6174 6520 3d20 7574  eation_date = ut
-000004a0: 696c 2e70 6572 5f74 6872 6561 6428 2772  il.per_thread('r
-000004b0: 6571 5f73 6573 7369 6f6e 5f74 696d 6527  eq_session_time'
-000004c0: 2c20 6c61 6d62 6461 3a20 6461 7465 7469  , lambda: dateti
-000004d0: 6d65 2e6e 6f77 2829 2c20 7265 7365 7429  me.now(), reset)
-000004e0: 0a20 2020 2020 2020 2023 206e 6f69 6e73  .        # noins
-000004f0: 7065 6374 696f 6e20 5079 5479 7065 4368  pection PyTypeCh
-00000500: 6563 6b65 720a 2020 2020 2020 2020 6966  ecker.        if
-00000510: 2028 6461 7465 7469 6d65 2e6e 6f77 2829   (datetime.now()
-00000520: 202d 2063 7265 6174 696f 6e5f 6461 7465   - creation_date
-00000530: 292e 746f 7461 6c5f 7365 636f 6e64 7328  ).total_seconds(
-00000540: 2920 3e20 5345 5353 494f 4e5f 5449 4d45  ) > SESSION_TIME
-00000550: 5f54 4f5f 4c49 5645 3a0a 2020 2020 2020  _TO_LIVE:.      
-00000560: 2020 2020 2020 2320 466f 7263 6520 7365        # Force se
-00000570: 7373 696f 6e20 7265 7365 740a 2020 2020  ssion reset.    
-00000580: 2020 2020 2020 2020 7265 7365 7420 3d20          reset = 
-00000590: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-000005a0: 2023 2053 6176 6520 7265 7365 7420 7469   # Save reset ti
-000005b0: 6d65 0a20 2020 2020 2020 2020 2020 2075  me.            u
-000005c0: 7469 6c2e 7065 725f 7468 7265 6164 2827  til.per_thread('
-000005d0: 7265 715f 7365 7373 696f 6e5f 7469 6d65  req_session_time
-000005e0: 272c 206c 616d 6264 613a 2064 6174 6574  ', lambda: datet
-000005f0: 696d 652e 6e6f 7728 292c 2054 7275 6529  ime.now(), True)
-00000600: 0a0a 2020 2020 6966 2053 4553 5349 4f4e  ..    if SESSION
-00000610: 5f54 494d 455f 544f 5f4c 4956 4520 3d3d  _TIME_TO_LIVE ==
-00000620: 2030 3a0a 2020 2020 2020 2020 2320 5365   0:.        # Se
-00000630: 7373 696f 6e20 6973 206f 6e65 2d74 696d  ssion is one-tim
-00000640: 6520 7573 650a 2020 2020 2020 2020 7265  e use.        re
-00000650: 7475 726e 2072 6571 7565 7374 732e 7365  turn requests.se
-00000660: 7373 696f 6e73 2e53 6573 7369 6f6e 2829  ssions.Session()
-00000670: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00000680: 2020 2023 2053 6573 7369 6f6e 206c 6976     # Session liv
-00000690: 6573 2073 6f6d 6520 7469 6d65 206f 7220  es some time or 
-000006a0: 666f 7265 7665 7220 6f6e 6365 2063 7265  forever once cre
-000006b0: 6174 6564 2e20 4465 6661 756c 740a 2020  ated. Default.  
-000006c0: 2020 2020 2020 7265 7475 726e 2075 7469        return uti
-000006d0: 6c2e 7065 725f 7468 7265 6164 2827 7265  l.per_thread('re
-000006e0: 715f 7365 7373 696f 6e27 2c20 6c61 6d62  q_session', lamb
-000006f0: 6461 3a20 7365 7373 696f 6e20 6966 2073  da: session if s
-00000700: 6573 7369 6f6e 2065 6c73 6520 7265 7175  ession else requ
-00000710: 6573 7473 2e73 6573 7369 6f6e 732e 5365  ests.sessions.Se
-00000720: 7373 696f 6e28 292c 2072 6573 6574 290a  ssion(), reset).
-00000730: 0a0a 6465 6620 5f6d 616b 655f 7265 7175  ..def _make_requ
-00000740: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00000750: 645f 6e61 6d65 2c20 6d65 7468 6f64 3d27  d_name, method='
-00000760: 6765 7427 2c20 7061 7261 6d73 3d4e 6f6e  get', params=Non
-00000770: 652c 2066 696c 6573 3d4e 6f6e 6529 3a0a  e, files=None):.
-00000780: 2020 2020 2222 220a 2020 2020 4d61 6b65      """.    Make
-00000790: 7320 6120 7265 7175 6573 7420 746f 2074  s a request to t
-000007a0: 6865 2054 656c 6567 7261 6d20 4150 492e  he Telegram API.
-000007b0: 0a20 2020 203a 7061 7261 6d20 746f 6b65  .    :param toke
-000007c0: 6e3a 2054 6865 2062 6f74 2773 2041 5049  n: The bot's API
-000007d0: 2074 6f6b 656e 2e20 2843 7265 6174 6564   token. (Created
-000007e0: 2077 6974 6820 4042 6f74 4661 7468 6572   with @BotFather
-000007f0: 290a 2020 2020 3a70 6172 616d 206d 6574  ).    :param met
-00000800: 686f 645f 6e61 6d65 3a20 4e61 6d65 206f  hod_name: Name o
-00000810: 6620 7468 6520 4150 4920 6d65 7468 6f64  f the API method
-00000820: 2074 6f20 6265 2063 616c 6c65 642e 2028   to be called. (
-00000830: 452e 672e 2027 6765 7455 7064 6174 6573  E.g. 'getUpdates
-00000840: 2729 0a20 2020 203a 7061 7261 6d20 6d65  ').    :param me
-00000850: 7468 6f64 3a20 4854 5450 206d 6574 686f  thod: HTTP metho
-00000860: 6420 746f 2062 6520 7573 6564 2e20 4465  d to be used. De
-00000870: 6661 756c 7473 2074 6f20 2767 6574 272e  faults to 'get'.
-00000880: 0a20 2020 203a 7061 7261 6d20 7061 7261  .    :param para
-00000890: 6d73 3a20 4f70 7469 6f6e 616c 2070 6172  ms: Optional par
-000008a0: 616d 6574 6572 732e 2053 686f 756c 6420  ameters. Should 
-000008b0: 6265 2061 2064 6963 7469 6f6e 6172 7920  be a dictionary 
-000008c0: 7769 7468 206b 6579 2d76 616c 7565 2070  with key-value p
-000008d0: 6169 7273 2e0a 2020 2020 3a70 6172 616d  airs..    :param
-000008e0: 2066 696c 6573 3a20 4f70 7469 6f6e 616c   files: Optional
-000008f0: 2066 696c 6573 2e0a 2020 2020 3a72 6574   files..    :ret
-00000900: 7572 6e3a 2054 6865 2072 6573 756c 7420  urn: The result 
-00000910: 7061 7273 6564 2074 6f20 6120 4a53 4f4e  parsed to a JSON
-00000920: 2064 6963 7469 6f6e 6172 792e 0a20 2020   dictionary..   
-00000930: 2022 2222 0a20 2020 2069 6620 6e6f 7420   """.    if not 
-00000940: 746f 6b65 6e3a 0a20 2020 2020 2020 2072  token:.        r
-00000950: 6169 7365 2045 7863 6570 7469 6f6e 2827  aise Exception('
-00000960: 426f 7420 746f 6b65 6e20 6973 206e 6f74  Bot token is not
-00000970: 2064 6566 696e 6564 2729 0a20 2020 2069   defined').    i
-00000980: 6620 4150 495f 5552 4c3a 0a20 2020 2020  f API_URL:.     
-00000990: 2020 2023 206e 6f69 6e73 7065 6374 696f     # noinspectio
-000009a0: 6e20 5079 556e 7265 736f 6c76 6564 5265  n PyUnresolvedRe
-000009b0: 6665 7265 6e63 6573 0a20 2020 2020 2020  ferences.       
-000009c0: 2072 6571 7565 7374 5f75 726c 203d 2041   request_url = A
-000009d0: 5049 5f55 524c 2e66 6f72 6d61 7428 746f  PI_URL.format(to
-000009e0: 6b65 6e2c 206d 6574 686f 645f 6e61 6d65  ken, method_name
-000009f0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-00000a00: 2020 2020 7265 7175 6573 745f 7572 6c20      request_url 
-00000a10: 3d20 2268 7474 7073 3a2f 2f61 7069 2e74  = "https://api.t
-00000a20: 656c 6567 7261 6d2e 6f72 672f 626f 747b  elegram.org/bot{
-00000a30: 307d 2f7b 317d 222e 666f 726d 6174 2874  0}/{1}".format(t
-00000a40: 6f6b 656e 2c20 6d65 7468 6f64 5f6e 616d  oken, method_nam
-00000a50: 6529 0a0a 2020 2020 6c6f 6767 6572 2e64  e)..    logger.d
-00000a60: 6562 7567 2822 5265 7175 6573 743a 206d  ebug("Request: m
-00000a70: 6574 686f 643d 7b30 7d20 7572 6c3d 7b31  ethod={0} url={1
-00000a80: 7d20 7061 7261 6d73 3d7b 327d 2066 696c  } params={2} fil
-00000a90: 6573 3d7b 337d 222e 666f 726d 6174 286d  es={3}".format(m
-00000aa0: 6574 686f 642c 2072 6571 7565 7374 5f75  ethod, request_u
-00000ab0: 726c 2c20 7061 7261 6d73 2c20 6669 6c65  rl, params, file
-00000ac0: 7329 2e72 6570 6c61 6365 2874 6f6b 656e  s).replace(token
-00000ad0: 2c20 746f 6b65 6e2e 7370 6c69 7428 273a  , token.split(':
-00000ae0: 2729 5b30 5d20 2b20 223a 7b54 4f4b 454e  ')[0] + ":{TOKEN
-00000af0: 7d22 2929 0a20 2020 2072 6561 645f 7469  }")).    read_ti
-00000b00: 6d65 6f75 7420 3d20 5245 4144 5f54 494d  meout = READ_TIM
-00000b10: 454f 5554 0a20 2020 2063 6f6e 6e65 6374  EOUT.    connect
-00000b20: 5f74 696d 656f 7574 203d 2043 4f4e 4e45  _timeout = CONNE
-00000b30: 4354 5f54 494d 454f 5554 0a0a 2020 2020  CT_TIMEOUT..    
-00000b40: 6966 2066 696c 6573 3a0a 2020 2020 2020  if files:.      
-00000b50: 2020 6669 6c65 735f 636f 7079 203d 2064    files_copy = d
-00000b60: 6963 7428 6669 6c65 7329 0a20 2020 2020  ict(files).     
-00000b70: 2020 2023 2070 726f 6365 7373 2074 7970     # process typ
-00000b80: 6573 2e49 6e70 7574 4669 6c65 0a20 2020  es.InputFile.   
-00000b90: 2020 2020 2066 6f72 206b 6579 2c20 7661       for key, va
-00000ba0: 6c75 6520 696e 2066 696c 6573 5f63 6f70  lue in files_cop
-00000bb0: 792e 6974 656d 7328 293a 0a20 2020 2020  y.items():.     
-00000bc0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00000bd0: 616e 6365 2876 616c 7565 2c20 7479 7065  ance(value, type
-00000be0: 732e 496e 7075 7446 696c 6529 3a0a 2020  s.InputFile):.  
-00000bf0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00000c00: 6c65 735b 6b65 795d 203d 2076 616c 7565  les[key] = value
-00000c10: 2e66 696c 650a 2020 2020 2020 2020 2020  .file.          
-00000c20: 2020 2020 2020 0a20 2020 200a 2020 2020        .    .    
-00000c30: 6966 2066 696c 6573 2061 6e64 2066 6f72  if files and for
-00000c40: 6d61 745f 6865 6164 6572 5f70 6172 616d  mat_header_param
-00000c50: 3a0a 2020 2020 2020 2020 6669 656c 6473  :.        fields
-00000c60: 2e66 6f72 6d61 745f 6865 6164 6572 5f70  .format_header_p
-00000c70: 6172 616d 203d 205f 6e6f 5f65 6e63 6f64  aram = _no_encod
-00000c80: 6528 666f 726d 6174 5f68 6561 6465 725f  e(format_header_
-00000c90: 7061 7261 6d29 0a20 2020 2069 6620 7061  param).    if pa
-00000ca0: 7261 6d73 3a0a 2020 2020 2020 2020 6966  rams:.        if
-00000cb0: 2027 7469 6d65 6f75 7427 2069 6e20 7061   'timeout' in pa
-00000cc0: 7261 6d73 3a0a 2020 2020 2020 2020 2020  rams:.          
-00000cd0: 2020 7265 6164 5f74 696d 656f 7574 203d    read_timeout =
-00000ce0: 2070 6172 616d 732e 706f 7028 2774 696d   params.pop('tim
-00000cf0: 656f 7574 2729 0a20 2020 2020 2020 2020  eout').         
-00000d00: 2020 2063 6f6e 6e65 6374 5f74 696d 656f     connect_timeo
-00000d10: 7574 203d 2072 6561 645f 7469 6d65 6f75  ut = read_timeou
-00000d20: 740a 2020 2020 2020 2020 6966 2027 6c6f  t.        if 'lo
-00000d30: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00000d40: 7574 2720 696e 2070 6172 616d 733a 0a20  ut' in params:. 
-00000d50: 2020 2020 2020 2020 2020 2023 2046 6f72             # For
-00000d60: 2067 6574 5570 6461 7465 732e 2049 7427   getUpdates. It'
-00000d70: 7320 7468 6520 6f6e 6c79 2066 756e 6374  s the only funct
-00000d80: 696f 6e20 7769 7468 2074 696d 656f 7574  ion with timeout
-00000d90: 2070 6172 616d 6574 6572 206f 6e20 7468   parameter on th
-00000da0: 6520 424f 5420 4150 4920 7369 6465 0a20  e BOT API side. 
-00000db0: 2020 2020 2020 2020 2020 206c 6f6e 675f             long_
-00000dc0: 706f 6c6c 696e 675f 7469 6d65 6f75 7420  polling_timeout 
-00000dd0: 3d20 7061 7261 6d73 2e70 6f70 2827 6c6f  = params.pop('lo
-00000de0: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00000df0: 7574 2729 0a20 2020 2020 2020 2020 2020  ut').           
-00000e00: 2070 6172 616d 735b 2774 696d 656f 7574   params['timeout
-00000e10: 275d 203d 206c 6f6e 675f 706f 6c6c 696e  '] = long_pollin
-00000e20: 675f 7469 6d65 6f75 740a 2020 2020 2020  g_timeout.      
-00000e30: 2020 2020 2020 2320 4c6f 6e67 2070 6f6c        # Long pol
-00000e40: 6c69 6e67 2068 616e 6773 2066 6f72 2061  ling hangs for a
-00000e50: 2067 6976 656e 2074 696d 652e 2052 6561   given time. Rea
-00000e60: 6420 7469 6d65 6f75 7420 7368 6f75 6c64  d timeout should
-00000e70: 2062 6520 6772 6561 7465 7220 7468 6174   be greater that
-00000e80: 206c 6f6e 675f 706f 6c6c 696e 675f 7469   long_polling_ti
-00000e90: 6d65 6f75 740a 2020 2020 2020 2020 2020  meout.          
-00000ea0: 2020 7265 6164 5f74 696d 656f 7574 203d    read_timeout =
-00000eb0: 206d 6178 286c 6f6e 675f 706f 6c6c 696e   max(long_pollin
-00000ec0: 675f 7469 6d65 6f75 7420 2b20 352c 2072  g_timeout + 5, r
-00000ed0: 6561 645f 7469 6d65 6f75 7429 0a0a 2020  ead_timeout)..  
-00000ee0: 2020 7061 7261 6d73 203d 2070 6172 616d    params = param
-00000ef0: 7320 6f72 204e 6f6e 6520 2320 5365 7420  s or None # Set 
-00000f00: 7061 7261 6d73 2074 6f20 4e6f 6e65 2069  params to None i
-00000f10: 6620 656d 7074 790a 2020 2020 7265 7375  f empty.    resu
-00000f20: 6c74 203d 204e 6f6e 650a 0a20 2020 2069  lt = None..    i
-00000f30: 6620 4355 5354 4f4d 5f52 4551 5545 5354  f CUSTOM_REQUEST
-00000f40: 5f53 454e 4445 523a 0a20 2020 2020 2020  _SENDER:.       
-00000f50: 2023 206e 6f69 6e73 7065 6374 696f 6e20   # noinspection 
-00000f60: 5079 4361 6c6c 696e 674e 6f6e 4361 6c6c  PyCallingNonCall
-00000f70: 6162 6c65 0a20 2020 2020 2020 2072 6573  able.        res
-00000f80: 756c 7420 3d20 4355 5354 4f4d 5f52 4551  ult = CUSTOM_REQ
-00000f90: 5545 5354 5f53 454e 4445 5228 0a20 2020  UEST_SENDER(.   
-00000fa0: 2020 2020 2020 2020 206d 6574 686f 642c           method,
-00000fb0: 2072 6571 7565 7374 5f75 726c 2c20 7061   request_url, pa
-00000fc0: 7261 6d73 3d70 6172 616d 732c 2066 696c  rams=params, fil
-00000fd0: 6573 3d66 696c 6573 2c0a 2020 2020 2020  es=files,.      
-00000fe0: 2020 2020 2020 7469 6d65 6f75 743d 2863        timeout=(c
-00000ff0: 6f6e 6e65 6374 5f74 696d 656f 7574 2c20  onnect_timeout, 
-00001000: 7265 6164 5f74 696d 656f 7574 292c 2070  read_timeout), p
-00001010: 726f 7869 6573 3d70 726f 7879 290a 2020  roxies=proxy).  
-00001020: 2020 656c 6966 2052 4554 5259 5f4f 4e5f    elif RETRY_ON_
-00001030: 4552 524f 5220 616e 6420 5245 5452 595f  ERROR and RETRY_
-00001040: 454e 4749 4e45 203d 3d20 313a 0a20 2020  ENGINE == 1:.   
-00001050: 2020 2020 2067 6f74 5f72 6573 756c 7420       got_result 
-00001060: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-00001070: 6375 7272 656e 745f 7472 7920 3d20 300a  current_try = 0.
-00001080: 2020 2020 2020 2020 7768 696c 6520 6e6f          while no
-00001090: 7420 676f 745f 7265 7375 6c74 2061 6e64  t got_result and
-000010a0: 2063 7572 7265 6e74 5f74 7279 3c4d 4158   current_try<MAX
-000010b0: 5f52 4554 5249 4553 2d31 3a0a 2020 2020  _RETRIES-1:.    
-000010c0: 2020 2020 2020 2020 6375 7272 656e 745f          current_
-000010d0: 7472 792b 3d31 0a20 2020 2020 2020 2020  try+=1.         
-000010e0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-000010f0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00001100: 205f 6765 745f 7265 715f 7365 7373 696f   _get_req_sessio
-00001110: 6e28 292e 7265 7175 6573 7428 0a20 2020  n().request(.   
-00001120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001130: 206d 6574 686f 642c 2072 6571 7565 7374   method, request
-00001140: 5f75 726c 2c20 7061 7261 6d73 3d70 6172  _url, params=par
-00001150: 616d 732c 2066 696c 6573 3d66 696c 6573  ams, files=files
-00001160: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00001170: 2020 2020 2020 7469 6d65 6f75 743d 2863        timeout=(c
-00001180: 6f6e 6e65 6374 5f74 696d 656f 7574 2c20  onnect_timeout, 
-00001190: 7265 6164 5f74 696d 656f 7574 292c 2070  read_timeout), p
-000011a0: 726f 7869 6573 3d70 726f 7879 290a 2020  roxies=proxy).  
-000011b0: 2020 2020 2020 2020 2020 2020 2020 676f                go
-000011c0: 745f 7265 7375 6c74 203d 2054 7275 650a  t_result = True.
-000011d0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-000011e0: 7074 2048 5454 5045 7272 6f72 3a0a 2020  pt HTTPError:.  
-000011f0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-00001200: 6767 6572 2e64 6562 7567 2822 4854 5450  gger.debug("HTTP
-00001210: 2045 7272 6f72 206f 6e20 7b30 7d20 6d65   Error on {0} me
-00001220: 7468 6f64 2028 5472 7920 237b 317d 2922  thod (Try #{1})"
-00001230: 2e66 6f72 6d61 7428 6d65 7468 6f64 5f6e  .format(method_n
-00001240: 616d 652c 2063 7572 7265 6e74 5f74 7279  ame, current_try
-00001250: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00001260: 2020 2074 696d 652e 736c 6565 7028 5245     time.sleep(RE
-00001270: 5452 595f 5449 4d45 4f55 5429 0a20 2020  TRY_TIMEOUT).   
-00001280: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00001290: 436f 6e6e 6563 7469 6f6e 4572 726f 723a  ConnectionError:
-000012a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000012b0: 206c 6f67 6765 722e 6465 6275 6728 2243   logger.debug("C
-000012c0: 6f6e 6e65 6374 696f 6e20 4572 726f 7220  onnection Error 
-000012d0: 6f6e 207b 307d 206d 6574 686f 6420 2854  on {0} method (T
-000012e0: 7279 2023 7b31 7d29 222e 666f 726d 6174  ry #{1})".format
-000012f0: 286d 6574 686f 645f 6e61 6d65 2c20 6375  (method_name, cu
-00001300: 7272 656e 745f 7472 7929 290a 2020 2020  rrent_try)).    
-00001310: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-00001320: 2e73 6c65 6570 2852 4554 5259 5f54 494d  .sleep(RETRY_TIM
-00001330: 454f 5554 290a 2020 2020 2020 2020 2020  EOUT).          
-00001340: 2020 6578 6365 7074 2054 696d 656f 7574    except Timeout
-00001350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001360: 2020 6c6f 6767 6572 2e64 6562 7567 2822    logger.debug("
-00001370: 5469 6d65 6f75 7420 4572 726f 7220 6f6e  Timeout Error on
-00001380: 207b 307d 206d 6574 686f 6420 2854 7279   {0} method (Try
-00001390: 2023 7b31 7d29 222e 666f 726d 6174 286d   #{1})".format(m
-000013a0: 6574 686f 645f 6e61 6d65 2c20 6375 7272  ethod_name, curr
-000013b0: 656e 745f 7472 7929 290a 2020 2020 2020  ent_try)).      
-000013c0: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
-000013d0: 6c65 6570 2852 4554 5259 5f54 494d 454f  leep(RETRY_TIMEO
-000013e0: 5554 290a 2020 2020 2020 2020 6966 206e  UT).        if n
-000013f0: 6f74 2067 6f74 5f72 6573 756c 743a 0a20  ot got_result:. 
-00001400: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00001410: 7420 3d20 5f67 6574 5f72 6571 5f73 6573  t = _get_req_ses
-00001420: 7369 6f6e 2829 2e72 6571 7565 7374 280a  sion().request(.
-00001430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001440: 2020 2020 6d65 7468 6f64 2c20 7265 7175      method, requ
-00001450: 6573 745f 7572 6c2c 2070 6172 616d 733d  est_url, params=
-00001460: 7061 7261 6d73 2c20 6669 6c65 733d 6669  params, files=fi
-00001470: 6c65 732c 0a20 2020 2020 2020 2020 2020  les,.           
-00001480: 2020 2020 2020 2020 2074 696d 656f 7574           timeout
-00001490: 3d28 636f 6e6e 6563 745f 7469 6d65 6f75  =(connect_timeou
-000014a0: 742c 2072 6561 645f 7469 6d65 6f75 7429  t, read_timeout)
-000014b0: 2c20 7072 6f78 6965 733d 7072 6f78 7929  , proxies=proxy)
-000014c0: 0a20 2020 2065 6c69 6620 5245 5452 595f  .    elif RETRY_
-000014d0: 4f4e 5f45 5252 4f52 2061 6e64 2052 4554  ON_ERROR and RET
-000014e0: 5259 5f45 4e47 494e 4520 3d3d 2032 3a0a  RY_ENGINE == 2:.
-000014f0: 2020 2020 2020 2020 6874 7470 203d 205f          http = _
-00001500: 6765 745f 7265 715f 7365 7373 696f 6e28  get_req_session(
-00001510: 290a 2020 2020 2020 2020 2320 6e6f 696e  ).        # noin
-00001520: 7370 6563 7469 6f6e 2050 7955 6e72 6573  spection PyUnres
-00001530: 6f6c 7665 6452 6566 6572 656e 6365 730a  olvedReferences.
-00001540: 2020 2020 2020 2020 7265 7472 795f 7374          retry_st
-00001550: 7261 7465 6779 203d 2072 6571 7565 7374  rategy = request
-00001560: 732e 7061 636b 6167 6573 2e75 726c 6c69  s.packages.urlli
-00001570: 6233 2e75 7469 6c2e 7265 7472 792e 5265  b3.util.retry.Re
-00001580: 7472 7928 0a20 2020 2020 2020 2020 2020  try(.           
-00001590: 2074 6f74 616c 3d4d 4158 5f52 4554 5249   total=MAX_RETRI
-000015a0: 4553 2c0a 2020 2020 2020 2020 290a 2020  ES,.        ).  
-000015b0: 2020 2020 2020 6164 6170 7465 7220 3d20        adapter = 
-000015c0: 4854 5450 4164 6170 7465 7228 6d61 785f  HTTPAdapter(max_
-000015d0: 7265 7472 6965 733d 7265 7472 795f 7374  retries=retry_st
-000015e0: 7261 7465 6779 290a 2020 2020 2020 2020  rategy).        
-000015f0: 666f 7220 7072 6566 6978 2069 6e20 2827  for prefix in ('
-00001600: 6874 7470 3a2f 2f27 2c20 2768 7474 7073  http://', 'https
-00001610: 3a2f 2f27 293a 0a20 2020 2020 2020 2020  ://'):.         
-00001620: 2020 2068 7474 702e 6d6f 756e 7428 7072     http.mount(pr
-00001630: 6566 6978 2c20 6164 6170 7465 7229 0a20  efix, adapter). 
-00001640: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00001650: 6874 7470 2e72 6571 7565 7374 280a 2020  http.request(.  
-00001660: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
-00001670: 2c20 7265 7175 6573 745f 7572 6c2c 2070  , request_url, p
-00001680: 6172 616d 733d 7061 7261 6d73 2c20 6669  arams=params, fi
-00001690: 6c65 733d 6669 6c65 732c 0a20 2020 2020  les=files,.     
-000016a0: 2020 2020 2020 2074 696d 656f 7574 3d28         timeout=(
-000016b0: 636f 6e6e 6563 745f 7469 6d65 6f75 742c  connect_timeout,
-000016c0: 2072 6561 645f 7469 6d65 6f75 7429 2c20   read_timeout), 
-000016d0: 7072 6f78 6965 733d 7072 6f78 7929 0a20  proxies=proxy). 
-000016e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000016f0: 2072 6573 756c 7420 3d20 5f67 6574 5f72   result = _get_r
-00001700: 6571 5f73 6573 7369 6f6e 2829 2e72 6571  eq_session().req
-00001710: 7565 7374 280a 2020 2020 2020 2020 2020  uest(.          
-00001720: 2020 6d65 7468 6f64 2c20 7265 7175 6573    method, reques
-00001730: 745f 7572 6c2c 2070 6172 616d 733d 7061  t_url, params=pa
-00001740: 7261 6d73 2c20 6669 6c65 733d 6669 6c65  rams, files=file
-00001750: 732c 0a20 2020 2020 2020 2020 2020 2074  s,.            t
-00001760: 696d 656f 7574 3d28 636f 6e6e 6563 745f  imeout=(connect_
-00001770: 7469 6d65 6f75 742c 2072 6561 645f 7469  timeout, read_ti
-00001780: 6d65 6f75 7429 2c20 7072 6f78 6965 733d  meout), proxies=
-00001790: 7072 6f78 7929 0a20 2020 200a 2020 2020  proxy).    .    
-000017a0: 6c6f 6767 6572 2e64 6562 7567 2822 5468  logger.debug("Th
-000017b0: 6520 7365 7276 6572 2072 6574 7572 6e65  e server returne
-000017c0: 643a 2027 7b30 7d27 222e 666f 726d 6174  d: '{0}'".format
-000017d0: 2872 6573 756c 742e 7465 7874 2e65 6e63  (result.text.enc
-000017e0: 6f64 6528 2775 7466 3827 2929 290a 2020  ode('utf8'))).  
-000017f0: 2020 0a20 2020 206a 736f 6e5f 7265 7375    .    json_resu
-00001800: 6c74 203d 205f 6368 6563 6b5f 7265 7375  lt = _check_resu
-00001810: 6c74 286d 6574 686f 645f 6e61 6d65 2c20  lt(method_name, 
-00001820: 7265 7375 6c74 290a 2020 2020 6966 206a  result).    if j
-00001830: 736f 6e5f 7265 7375 6c74 3a0a 2020 2020  son_result:.    
-00001840: 2020 2020 7265 7475 726e 206a 736f 6e5f      return json_
-00001850: 7265 7375 6c74 5b27 7265 7375 6c74 275d  result['result']
-00001860: 0a0a 0a64 6566 205f 6368 6563 6b5f 7265  ...def _check_re
-00001870: 7375 6c74 286d 6574 686f 645f 6e61 6d65  sult(method_name
-00001880: 2c20 7265 7375 6c74 293a 0a20 2020 2022  , result):.    "
-00001890: 2222 0a20 2020 2043 6865 636b 7320 7768  "".    Checks wh
-000018a0: 6574 6865 7220 6072 6573 756c 7460 2069  ether `result` i
-000018b0: 7320 6120 7661 6c69 6420 4150 4920 7265  s a valid API re
-000018c0: 7370 6f6e 7365 2e0a 2020 2020 4120 7265  sponse..    A re
-000018d0: 7375 6c74 2069 7320 636f 6e73 6964 6572  sult is consider
-000018e0: 6564 2069 6e76 616c 6964 2069 663a 0a20  ed invalid if:. 
-000018f0: 2020 2020 2020 202d 2054 6865 2073 6572         - The ser
-00001900: 7665 7220 7265 7475 726e 6564 2061 6e20  ver returned an 
-00001910: 4854 5450 2072 6573 706f 6e73 6520 636f  HTTP response co
-00001920: 6465 206f 7468 6572 2074 6861 6e20 3230  de other than 20
-00001930: 300a 2020 2020 2020 2020 2d20 5468 6520  0.        - The 
-00001940: 636f 6e74 656e 7420 6f66 2074 6865 2072  content of the r
-00001950: 6573 756c 7420 6973 2069 6e76 616c 6964  esult is invalid
-00001960: 204a 534f 4e2e 0a20 2020 2020 2020 202d   JSON..        -
-00001970: 2054 6865 206d 6574 686f 6420 6361 6c6c   The method call
-00001980: 2077 6173 2075 6e73 7563 6365 7373 6675   was unsuccessfu
-00001990: 6c20 2854 6865 204a 534f 4e20 276f 6b27  l (The JSON 'ok'
-000019a0: 2066 6965 6c64 2065 7175 616c 7320 4661   field equals Fa
-000019b0: 6c73 6529 0a0a 2020 2020 3a72 6169 7365  lse)..    :raise
-000019c0: 7320 4170 6945 7863 6570 7469 6f6e 3a20  s ApiException: 
-000019d0: 6966 206f 6e65 206f 6620 7468 6520 6162  if one of the ab
-000019e0: 6f76 6520 6c69 7374 6564 2063 6173 6573  ove listed cases
-000019f0: 2069 7320 6170 706c 6963 6162 6c65 0a20   is applicable. 
-00001a00: 2020 203a 7061 7261 6d20 6d65 7468 6f64     :param method
-00001a10: 5f6e 616d 653a 2054 6865 206e 616d 6520  _name: The name 
-00001a20: 6f66 2074 6865 206d 6574 686f 6420 6361  of the method ca
-00001a30: 6c6c 6564 0a20 2020 203a 7061 7261 6d20  lled.    :param 
-00001a40: 7265 7375 6c74 3a20 5468 6520 7265 7475  result: The retu
-00001a50: 726e 6564 2072 6573 756c 7420 6f66 2074  rned result of t
-00001a60: 6865 206d 6574 686f 6420 7265 7175 6573  he method reques
-00001a70: 740a 2020 2020 3a72 6574 7572 6e3a 2054  t.    :return: T
-00001a80: 6865 2072 6573 756c 7420 7061 7273 6564  he result parsed
-00001a90: 2074 6f20 6120 4a53 4f4e 2064 6963 7469   to a JSON dicti
-00001aa0: 6f6e 6172 792e 0a20 2020 2022 2222 0a20  onary..    """. 
-00001ab0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00001ac0: 7265 7375 6c74 5f6a 736f 6e20 3d20 7265  result_json = re
-00001ad0: 7375 6c74 2e6a 736f 6e28 290a 2020 2020  sult.json().    
-00001ae0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-00001af0: 6966 2072 6573 756c 742e 7374 6174 7573  if result.status
-00001b00: 5f63 6f64 6520 213d 2032 3030 3a0a 2020  _code != 200:.  
-00001b10: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00001b20: 4170 6948 5454 5045 7863 6570 7469 6f6e  ApiHTTPException
-00001b30: 286d 6574 686f 645f 6e61 6d65 2c20 7265  (method_name, re
-00001b40: 7375 6c74 290a 2020 2020 2020 2020 656c  sult).        el
-00001b50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00001b60: 7261 6973 6520 4170 6949 6e76 616c 6964  raise ApiInvalid
-00001b70: 4a53 4f4e 4578 6365 7074 696f 6e28 6d65  JSONException(me
-00001b80: 7468 6f64 5f6e 616d 652c 2072 6573 756c  thod_name, resul
-00001b90: 7429 0a20 2020 2065 6c73 653a 2020 2020  t).    else:    
-00001ba0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00001bb0: 7265 7375 6c74 5f6a 736f 6e5b 276f 6b27  result_json['ok'
-00001bc0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-00001bd0: 6169 7365 2041 7069 5465 6c65 6772 616d  aise ApiTelegram
-00001be0: 4578 6365 7074 696f 6e28 6d65 7468 6f64  Exception(method
-00001bf0: 5f6e 616d 652c 2072 6573 756c 742c 2072  _name, result, r
-00001c00: 6573 756c 745f 6a73 6f6e 290a 2020 2020  esult_json).    
-00001c10: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-00001c20: 2072 6574 7572 6e20 7265 7375 6c74 5f6a   return result_j
-00001c30: 736f 6e0a 0a0a 6465 6620 6765 745f 6d65  son...def get_me
-00001c40: 2874 6f6b 656e 293a 0a20 2020 206d 6574  (token):.    met
-00001c50: 686f 645f 7572 6c20 3d20 7227 6765 744d  hod_url = r'getM
-00001c60: 6527 0a20 2020 2072 6574 7572 6e20 5f6d  e'.    return _m
-00001c70: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00001c80: 6e2c 206d 6574 686f 645f 7572 6c29 0a0a  n, method_url)..
-00001c90: 0a64 6566 206c 6f67 5f6f 7574 2874 6f6b  .def log_out(tok
-00001ca0: 656e 293a 0a20 2020 206d 6574 686f 645f  en):.    method_
-00001cb0: 7572 6c20 3d20 7227 6c6f 674f 7574 270a  url = r'logOut'.
-00001cc0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00001cd0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00001ce0: 6d65 7468 6f64 5f75 726c 290a 0a0a 6465  method_url)...de
-00001cf0: 6620 636c 6f73 6528 746f 6b65 6e29 3a0a  f close(token):.
-00001d00: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00001d10: 2072 2763 6c6f 7365 270a 2020 2020 7265   r'close'.    re
-00001d20: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00001d30: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00001d40: 5f75 726c 290a 0a0a 6465 6620 6765 745f  _url)...def get_
-00001d50: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
-00001d60: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-00001d70: 5f75 726c 203d 2072 2767 6574 4669 6c65  _url = r'getFile
-00001d80: 270a 2020 2020 7265 7475 726e 205f 6d61  '.    return _ma
-00001d90: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00001da0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00001db0: 7261 6d73 3d7b 2766 696c 655f 6964 273a  rams={'file_id':
-00001dc0: 2066 696c 655f 6964 7d29 0a0a 0a64 6566   file_id})...def
-00001dd0: 2067 6574 5f66 696c 655f 7572 6c28 746f   get_file_url(to
-00001de0: 6b65 6e2c 2066 696c 655f 6964 293a 0a20  ken, file_id):. 
-00001df0: 2020 2069 6620 4649 4c45 5f55 524c 2069     if FILE_URL i
-00001e00: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00001e10: 7265 7475 726e 2022 6874 7470 733a 2f2f  return "https://
-00001e20: 6170 692e 7465 6c65 6772 616d 2e6f 7267  api.telegram.org
-00001e30: 2f66 696c 652f 626f 747b 307d 2f7b 317d  /file/bot{0}/{1}
-00001e40: 222e 666f 726d 6174 2874 6f6b 656e 2c20  ".format(token, 
-00001e50: 6765 745f 6669 6c65 2874 6f6b 656e 2c20  get_file(token, 
-00001e60: 6669 6c65 5f69 6429 5b27 6669 6c65 5f70  file_id)['file_p
-00001e70: 6174 6827 5d29 0a20 2020 2065 6c73 653a  ath']).    else:
-00001e80: 0a20 2020 2020 2020 2023 206e 6f69 6e73  .        # noins
-00001e90: 7065 6374 696f 6e20 5079 556e 7265 736f  pection PyUnreso
-00001ea0: 6c76 6564 5265 6665 7265 6e63 6573 0a20  lvedReferences. 
-00001eb0: 2020 2020 2020 2072 6574 7572 6e20 4649         return FI
-00001ec0: 4c45 5f55 524c 2e66 6f72 6d61 7428 746f  LE_URL.format(to
-00001ed0: 6b65 6e2c 2067 6574 5f66 696c 6528 746f  ken, get_file(to
-00001ee0: 6b65 6e2c 2066 696c 655f 6964 295b 2766  ken, file_id)['f
-00001ef0: 696c 655f 7061 7468 275d 290a 0a0a 6465  ile_path'])...de
-00001f00: 6620 646f 776e 6c6f 6164 5f66 696c 6528  f download_file(
-00001f10: 746f 6b65 6e2c 2066 696c 655f 7061 7468  token, file_path
-00001f20: 293a 0a20 2020 2069 6620 4649 4c45 5f55  ):.    if FILE_U
-00001f30: 524c 2069 7320 4e6f 6e65 3a0a 2020 2020  RL is None:.    
-00001f40: 2020 2020 7572 6c20 3d20 2022 6874 7470      url =  "http
-00001f50: 733a 2f2f 6170 692e 7465 6c65 6772 616d  s://api.telegram
-00001f60: 2e6f 7267 2f66 696c 652f 626f 747b 307d  .org/file/bot{0}
-00001f70: 2f7b 317d 222e 666f 726d 6174 2874 6f6b  /{1}".format(tok
-00001f80: 656e 2c20 6669 6c65 5f70 6174 6829 0a20  en, file_path). 
-00001f90: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00001fa0: 2023 206e 6f69 6e73 7065 6374 696f 6e20   # noinspection 
-00001fb0: 5079 556e 7265 736f 6c76 6564 5265 6665  PyUnresolvedRefe
-00001fc0: 7265 6e63 6573 0a20 2020 2020 2020 2075  rences.        u
-00001fd0: 726c 203d 2020 4649 4c45 5f55 524c 2e66  rl =  FILE_URL.f
-00001fe0: 6f72 6d61 7428 746f 6b65 6e2c 2066 696c  ormat(token, fil
-00001ff0: 655f 7061 7468 290a 2020 2020 2020 2020  e_path).        
-00002000: 0a20 2020 2072 6573 756c 7420 3d20 5f67  .    result = _g
-00002010: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
-00002020: 2e67 6574 2875 726c 2c20 7072 6f78 6965  .get(url, proxie
-00002030: 733d 7072 6f78 7929 0a20 2020 2069 6620  s=proxy).    if 
-00002040: 7265 7375 6c74 2e73 7461 7475 735f 636f  result.status_co
-00002050: 6465 2021 3d20 3230 303a 0a20 2020 2020  de != 200:.     
-00002060: 2020 2072 6169 7365 2041 7069 4854 5450     raise ApiHTTP
-00002070: 4578 6365 7074 696f 6e28 2744 6f77 6e6c  Exception('Downl
-00002080: 6f61 6420 6669 6c65 272c 2072 6573 756c  oad file', resul
-00002090: 7429 0a20 2020 2020 2020 200a 2020 2020  t).        .    
-000020a0: 7265 7475 726e 2072 6573 756c 742e 636f  return result.co
-000020b0: 6e74 656e 740a 0a0a 6465 6620 7365 6e64  ntent...def send
-000020c0: 5f6d 6573 7361 6765 280a 2020 2020 2020  _message(.      
-000020d0: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-000020e0: 2c20 7465 7874 2c0a 2020 2020 2020 2020  , text,.        
-000020f0: 6469 7361 626c 655f 7765 625f 7061 6765  disable_web_page
-00002100: 5f70 7265 7669 6577 3d4e 6f6e 652c 2072  _preview=None, r
-00002110: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00002120: 6964 3d4e 6f6e 652c 2072 6570 6c79 5f6d  id=None, reply_m
-00002130: 6172 6b75 703d 4e6f 6e65 2c0a 2020 2020  arkup=None,.    
-00002140: 2020 2020 7061 7273 655f 6d6f 6465 3d4e      parse_mode=N
-00002150: 6f6e 652c 2064 6973 6162 6c65 5f6e 6f74  one, disable_not
-00002160: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c20  ification=None, 
-00002170: 7469 6d65 6f75 743d 4e6f 6e65 2c0a 2020  timeout=None,.  
-00002180: 2020 2020 2020 656e 7469 7469 6573 3d4e        entities=N
-00002190: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
-000021a0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-000021b0: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
-000021c0: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
-000021d0: 2020 2020 206d 6573 7361 6765 5f74 6872       message_thr
-000021e0: 6561 645f 6964 3d4e 6f6e 6529 3a0a 2020  ead_id=None):.  
-000021f0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-00002200: 2773 656e 644d 6573 7361 6765 270a 2020  'sendMessage'.  
-00002210: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00002220: 6174 5f69 6427 3a20 7374 7228 6368 6174  at_id': str(chat
-00002230: 5f69 6429 2c20 2774 6578 7427 3a20 7465  _id), 'text': te
-00002240: 7874 7d0a 2020 2020 6966 2064 6973 6162  xt}.    if disab
-00002250: 6c65 5f77 6562 5f70 6167 655f 7072 6576  le_web_page_prev
-00002260: 6965 7720 6973 206e 6f74 204e 6f6e 653a  iew is not None:
-00002270: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00002280: 5b27 6469 7361 626c 655f 7765 625f 7061  ['disable_web_pa
-00002290: 6765 5f70 7265 7669 6577 275d 203d 2064  ge_preview'] = d
-000022a0: 6973 6162 6c65 5f77 6562 5f70 6167 655f  isable_web_page_
-000022b0: 7072 6576 6965 770a 2020 2020 6966 2072  preview.    if r
-000022c0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-000022d0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-000022e0: 6f61 645b 2772 6570 6c79 5f74 6f5f 6d65  oad['reply_to_me
-000022f0: 7373 6167 655f 6964 275d 203d 2072 6570  ssage_id'] = rep
-00002300: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00002310: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-00002320: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-00002330: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-00002340: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
-00002350: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00002360: 726b 7570 290a 2020 2020 6966 2070 6172  rkup).    if par
-00002370: 7365 5f6d 6f64 653a 0a20 2020 2020 2020  se_mode:.       
-00002380: 2070 6179 6c6f 6164 5b27 7061 7273 655f   payload['parse_
-00002390: 6d6f 6465 275d 203d 2070 6172 7365 5f6d  mode'] = parse_m
-000023a0: 6f64 650a 2020 2020 6966 2064 6973 6162  ode.    if disab
-000023b0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
-000023c0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000023d0: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-000023e0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000023f0: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
-00002400: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
-00002410: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
-00002420: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
-00002430: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
-00002440: 0a20 2020 2069 6620 656e 7469 7469 6573  .    if entities
-00002450: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00002460: 645b 2765 6e74 6974 6965 7327 5d20 3d20  d['entities'] = 
-00002470: 6a73 6f6e 2e64 756d 7073 2874 7970 6573  json.dumps(types
-00002480: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
-00002490: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
-000024a0: 656e 7469 7469 6573 2929 0a20 2020 2069  entities)).    i
-000024b0: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
-000024c0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
-000024d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000024e0: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-000024f0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00002500: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
-00002510: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00002520: 745f 7265 706c 790a 2020 2020 6966 2070  t_reply.    if p
-00002530: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-00002540: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00002550: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-00002560: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
-00002570: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00002580: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-00002590: 7468 7265 6164 5f69 643a 0a20 2020 2020  thread_id:.     
-000025a0: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
-000025b0: 6167 655f 7468 7265 6164 5f69 6427 5d20  age_thread_id'] 
-000025c0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-000025d0: 5f69 640a 2020 2020 7265 7475 726e 205f  _id.    return _
-000025e0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-000025f0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00002600: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00002610: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-00002620: 0a64 6566 2073 6574 5f77 6562 686f 6f6b  .def set_webhook
-00002630: 2874 6f6b 656e 2c20 7572 6c3d 4e6f 6e65  (token, url=None
-00002640: 2c20 6365 7274 6966 6963 6174 653d 4e6f  , certificate=No
-00002650: 6e65 2c20 6d61 785f 636f 6e6e 6563 7469  ne, max_connecti
-00002660: 6f6e 733d 4e6f 6e65 2c20 616c 6c6f 7765  ons=None, allowe
-00002670: 645f 7570 6461 7465 733d 4e6f 6e65 2c20  d_updates=None, 
-00002680: 6970 5f61 6464 7265 7373 3d4e 6f6e 652c  ip_address=None,
-00002690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000026a0: 2064 726f 705f 7065 6e64 696e 675f 7570   drop_pending_up
-000026b0: 6461 7465 7320 3d20 4e6f 6e65 2c20 7469  dates = None, ti
-000026c0: 6d65 6f75 743d 4e6f 6e65 2c20 7365 6372  meout=None, secr
-000026d0: 6574 5f74 6f6b 656e 3d4e 6f6e 6529 3a0a  et_token=None):.
-000026e0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000026f0: 2072 2773 6574 5765 6268 6f6f 6b27 0a20   r'setWebhook'. 
-00002700: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
-00002710: 2020 2020 2020 2027 7572 6c27 3a20 7572         'url': ur
-00002720: 6c20 6966 2075 726c 2065 6c73 6520 2222  l if url else ""
-00002730: 2c0a 2020 2020 7d0a 2020 2020 6669 6c65  ,.    }.    file
-00002740: 7320 3d20 4e6f 6e65 0a20 2020 2069 6620  s = None.    if 
-00002750: 6365 7274 6966 6963 6174 653a 0a20 2020  certificate:.   
-00002760: 2020 2020 2066 696c 6573 203d 207b 2763       files = {'c
-00002770: 6572 7469 6669 6361 7465 273a 2063 6572  ertificate': cer
-00002780: 7469 6669 6361 7465 7d0a 2020 2020 6966  tificate}.    if
-00002790: 206d 6178 5f63 6f6e 6e65 6374 696f 6e73   max_connections
-000027a0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000027b0: 645b 276d 6178 5f63 6f6e 6e65 6374 696f  d['max_connectio
-000027c0: 6e73 275d 203d 206d 6178 5f63 6f6e 6e65  ns'] = max_conne
-000027d0: 6374 696f 6e73 0a20 2020 2069 6620 616c  ctions.    if al
-000027e0: 6c6f 7765 645f 7570 6461 7465 7320 6973  lowed_updates is
-000027f0: 206e 6f74 204e 6f6e 653a 2020 2020 2020   not None:      
-00002800: 2023 2045 6d70 7479 206c 6973 7473 2073   # Empty lists s
-00002810: 686f 756c 6420 7061 7373 0a20 2020 2020  hould pass.     
-00002820: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-00002830: 7765 645f 7570 6461 7465 7327 5d20 3d20  wed_updates'] = 
-00002840: 6a73 6f6e 2e64 756d 7073 2861 6c6c 6f77  json.dumps(allow
-00002850: 6564 5f75 7064 6174 6573 290a 2020 2020  ed_updates).    
-00002860: 6966 2069 705f 6164 6472 6573 7320 6973  if ip_address is
-00002870: 206e 6f74 204e 6f6e 653a 2020 2020 2020   not None:      
-00002880: 2020 2020 2020 2320 456d 7074 7920 7374        # Empty st
-00002890: 7269 6e67 2073 686f 756c 6420 7061 7373  ring should pass
-000028a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000028b0: 5b27 6970 5f61 6464 7265 7373 275d 203d  ['ip_address'] =
-000028c0: 2069 705f 6164 6472 6573 730a 2020 2020   ip_address.    
-000028d0: 6966 2064 726f 705f 7065 6e64 696e 675f  if drop_pending_
-000028e0: 7570 6461 7465 7320 6973 206e 6f74 204e  updates is not N
-000028f0: 6f6e 653a 2020 2320 416e 7920 626f 6f6c  one:  # Any bool
-00002900: 2076 616c 7565 2073 686f 756c 6420 7061   value should pa
-00002910: 7373 0a20 2020 2020 2020 2070 6179 6c6f  ss.        paylo
-00002920: 6164 5b27 6472 6f70 5f70 656e 6469 6e67  ad['drop_pending
-00002930: 5f75 7064 6174 6573 275d 203d 2064 726f  _updates'] = dro
-00002940: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
-00002950: 730a 2020 2020 6966 2074 696d 656f 7574  s.    if timeout
-00002960: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00002970: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00002980: 696d 656f 7574 0a20 2020 2069 6620 7365  imeout.    if se
-00002990: 6372 6574 5f74 6f6b 656e 3a0a 2020 2020  cret_token:.    
-000029a0: 2020 2020 7061 796c 6f61 645b 2773 6563      payload['sec
-000029b0: 7265 745f 746f 6b65 6e27 5d20 3d20 7365  ret_token'] = se
-000029c0: 6372 6574 5f74 6f6b 656e 0a20 2020 2072  cret_token.    r
-000029d0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-000029e0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-000029f0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00002a00: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00002a10: 6573 290a 0a0a 6465 6620 6465 6c65 7465  es)...def delete
-00002a20: 5f77 6562 686f 6f6b 2874 6f6b 656e 2c20  _webhook(token, 
-00002a30: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
-00002a40: 6174 6573 3d4e 6f6e 652c 2074 696d 656f  ates=None, timeo
-00002a50: 7574 3d4e 6f6e 6529 3a0a 2020 2020 6d65  ut=None):.    me
-00002a60: 7468 6f64 5f75 726c 203d 2072 2764 656c  thod_url = r'del
-00002a70: 6574 6557 6562 686f 6f6b 270a 2020 2020  eteWebhook'.    
-00002a80: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
-00002a90: 2069 6620 6472 6f70 5f70 656e 6469 6e67   if drop_pending
-00002aa0: 5f75 7064 6174 6573 2069 7320 6e6f 7420  _updates is not 
-00002ab0: 4e6f 6e65 3a20 2023 2041 6e79 2062 6f6f  None:  # Any boo
-00002ac0: 6c20 7661 6c75 6520 7368 6f75 6c64 2070  l value should p
-00002ad0: 6173 730a 2020 2020 2020 2020 7061 796c  ass.        payl
-00002ae0: 6f61 645b 2764 726f 705f 7065 6e64 696e  oad['drop_pendin
-00002af0: 675f 7570 6461 7465 7327 5d20 3d20 6472  g_updates'] = dr
-00002b00: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
-00002b10: 6573 0a20 2020 2069 6620 7469 6d65 6f75  es.    if timeou
-00002b20: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00002b30: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
-00002b40: 7469 6d65 6f75 740a 2020 2020 7265 7475  timeout.    retu
-00002b50: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00002b60: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00002b70: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00002b80: 6164 290a 0a0a 6465 6620 6765 745f 7765  ad)...def get_we
-00002b90: 6268 6f6f 6b5f 696e 666f 2874 6f6b 656e  bhook_info(token
-00002ba0: 2c20 7469 6d65 6f75 743d 4e6f 6e65 293a  , timeout=None):
-00002bb0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00002bc0: 3d20 7227 6765 7457 6562 686f 6f6b 496e  = r'getWebhookIn
-00002bd0: 666f 270a 2020 2020 7061 796c 6f61 6420  fo'.    payload 
-00002be0: 3d20 7b7d 0a20 2020 2069 6620 7469 6d65  = {}.    if time
-00002bf0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00002c00: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00002c10: 3d20 7469 6d65 6f75 740a 2020 2020 7265  = timeout.    re
-00002c20: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00002c30: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00002c40: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00002c50: 6c6f 6164 290a 0a0a 6465 6620 6765 745f  load)...def get_
-00002c60: 7570 6461 7465 7328 746f 6b65 6e2c 206f  updates(token, o
-00002c70: 6666 7365 743d 4e6f 6e65 2c20 6c69 6d69  ffset=None, limi
-00002c80: 743d 4e6f 6e65 2c20 7469 6d65 6f75 743d  t=None, timeout=
-00002c90: 4e6f 6e65 2c20 616c 6c6f 7765 645f 7570  None, allowed_up
-00002ca0: 6461 7465 733d 4e6f 6e65 2c20 6c6f 6e67  dates=None, long
-00002cb0: 5f70 6f6c 6c69 6e67 5f74 696d 656f 7574  _polling_timeout
-00002cc0: 203d 204e 6f6e 6529 3a0a 2020 2020 6d65   = None):.    me
-00002cd0: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
-00002ce0: 5570 6461 7465 7327 0a20 2020 2070 6179  Updates'.    pay
-00002cf0: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-00002d00: 206f 6666 7365 743a 0a20 2020 2020 2020   offset:.       
-00002d10: 2070 6179 6c6f 6164 5b27 6f66 6673 6574   payload['offset
-00002d20: 275d 203d 206f 6666 7365 740a 2020 2020  '] = offset.    
-00002d30: 6966 206c 696d 6974 3a0a 2020 2020 2020  if limit:.      
-00002d40: 2020 7061 796c 6f61 645b 276c 696d 6974    payload['limit
-00002d50: 275d 203d 206c 696d 6974 0a20 2020 2069  '] = limit.    i
-00002d60: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00002d70: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
-00002d80: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
-00002d90: 2020 2020 7061 796c 6f61 645b 276c 6f6e      payload['lon
-00002da0: 675f 706f 6c6c 696e 675f 7469 6d65 6f75  g_polling_timeou
-00002db0: 7427 5d20 3d20 6c6f 6e67 5f70 6f6c 6c69  t'] = long_polli
-00002dc0: 6e67 5f74 696d 656f 7574 2069 6620 6c6f  ng_timeout if lo
-00002dd0: 6e67 5f70 6f6c 6c69 6e67 5f74 696d 656f  ng_polling_timeo
-00002de0: 7574 2065 6c73 6520 4c4f 4e47 5f50 4f4c  ut else LONG_POL
-00002df0: 4c49 4e47 5f54 494d 454f 5554 0a20 2020  LING_TIMEOUT.   
-00002e00: 2069 6620 616c 6c6f 7765 645f 7570 6461   if allowed_upda
-00002e10: 7465 7320 6973 206e 6f74 204e 6f6e 653a  tes is not None:
-00002e20: 2020 2320 456d 7074 7920 6c69 7374 7320    # Empty lists 
-00002e30: 7368 6f75 6c64 2070 6173 730a 2020 2020  should pass.    
-00002e40: 2020 2020 7061 796c 6f61 645b 2761 6c6c      payload['all
-00002e50: 6f77 6564 5f75 7064 6174 6573 275d 203d  owed_updates'] =
-00002e60: 206a 736f 6e2e 6475 6d70 7328 616c 6c6f   json.dumps(allo
-00002e70: 7765 645f 7570 6461 7465 7329 0a20 2020  wed_updates).   
-00002e80: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00002e90: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00002ea0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00002eb0: 7061 796c 6f61 6429 0a0a 0a64 6566 2067  payload)...def g
-00002ec0: 6574 5f75 7365 725f 7072 6f66 696c 655f  et_user_profile_
-00002ed0: 7068 6f74 6f73 2874 6f6b 656e 2c20 7573  photos(token, us
-00002ee0: 6572 5f69 642c 206f 6666 7365 743d 4e6f  er_id, offset=No
-00002ef0: 6e65 2c20 6c69 6d69 743d 4e6f 6e65 293a  ne, limit=None):
-00002f00: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00002f10: 3d20 7227 6765 7455 7365 7250 726f 6669  = r'getUserProfi
-00002f20: 6c65 5068 6f74 6f73 270a 2020 2020 7061  lePhotos'.    pa
-00002f30: 796c 6f61 6420 3d20 7b27 7573 6572 5f69  yload = {'user_i
-00002f40: 6427 3a20 7573 6572 5f69 647d 0a20 2020  d': user_id}.   
-00002f50: 2069 6620 6f66 6673 6574 3a0a 2020 2020   if offset:.    
-00002f60: 2020 2020 7061 796c 6f61 645b 276f 6666      payload['off
-00002f70: 7365 7427 5d20 3d20 6f66 6673 6574 0a20  set'] = offset. 
-00002f80: 2020 2069 6620 6c69 6d69 743a 0a20 2020     if limit:.   
-00002f90: 2020 2020 2070 6179 6c6f 6164 5b27 6c69       payload['li
-00002fa0: 6d69 7427 5d20 3d20 6c69 6d69 740a 2020  mit'] = limit.  
-00002fb0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00002fc0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00002fd0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00002fe0: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-00002ff0: 6765 745f 6368 6174 2874 6f6b 656e 2c20  get_chat(token, 
-00003000: 6368 6174 5f69 6429 3a0a 2020 2020 6d65  chat_id):.    me
-00003010: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
-00003020: 4368 6174 270a 2020 2020 7061 796c 6f61  Chat'.    payloa
-00003030: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00003040: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
-00003050: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00003060: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00003070: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00003080: 6f61 6429 0a0a 0a64 6566 206c 6561 7665  oad)...def leave
-00003090: 5f63 6861 7428 746f 6b65 6e2c 2063 6861  _chat(token, cha
-000030a0: 745f 6964 293a 0a20 2020 206d 6574 686f  t_id):.    metho
-000030b0: 645f 7572 6c20 3d20 7227 6c65 6176 6543  d_url = r'leaveC
-000030c0: 6861 7427 0a20 2020 2070 6179 6c6f 6164  hat'.    payload
-000030d0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-000030e0: 6861 745f 6964 7d0a 2020 2020 7265 7475  hat_id}.    retu
-000030f0: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00003100: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00003110: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00003120: 6164 290a 0a0a 6465 6620 6765 745f 6368  ad)...def get_ch
-00003130: 6174 5f61 646d 696e 6973 7472 6174 6f72  at_administrator
-00003140: 7328 746f 6b65 6e2c 2063 6861 745f 6964  s(token, chat_id
-00003150: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00003160: 6c20 3d20 7227 6765 7443 6861 7441 646d  l = r'getChatAdm
-00003170: 696e 6973 7472 6174 6f72 7327 0a20 2020  inistrators'.   
-00003180: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00003190: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
-000031a0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000031b0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000031c0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-000031d0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-000031e0: 6620 6765 745f 6368 6174 5f6d 656d 6265  f get_chat_membe
-000031f0: 725f 636f 756e 7428 746f 6b65 6e2c 2063  r_count(token, c
-00003200: 6861 745f 6964 293a 0a20 2020 206d 6574  hat_id):.    met
-00003210: 686f 645f 7572 6c20 3d20 7227 6765 7443  hod_url = r'getC
-00003220: 6861 744d 656d 6265 7243 6f75 6e74 270a  hatMemberCount'.
-00003230: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00003240: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-00003250: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
-00003260: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-00003270: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00003280: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00003290: 0a64 6566 2073 6574 5f73 7469 636b 6572  .def set_sticker
-000032a0: 5f73 6574 5f74 6875 6d62 2874 6f6b 656e  _set_thumb(token
-000032b0: 2c20 6e61 6d65 2c20 7573 6572 5f69 642c  , name, user_id,
-000032c0: 2074 6875 6d62 293a 0a20 2020 206d 6574   thumb):.    met
-000032d0: 686f 645f 7572 6c20 3d20 7227 7365 7453  hod_url = r'setS
-000032e0: 7469 636b 6572 5365 7454 6875 6d62 270a  tickerSetThumb'.
-000032f0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00003300: 6e61 6d65 273a 206e 616d 652c 2027 7573  name': name, 'us
-00003310: 6572 5f69 6427 3a20 7573 6572 5f69 647d  er_id': user_id}
-00003320: 0a20 2020 2066 696c 6573 203d 207b 7d0a  .    files = {}.
-00003330: 2020 2020 6966 2074 6875 6d62 3a0a 2020      if thumb:.  
-00003340: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00003350: 6e73 7461 6e63 6528 7468 756d 622c 2073  nstance(thumb, s
-00003360: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00003370: 2066 696c 6573 5b27 7468 756d 6227 5d20   files['thumb'] 
-00003380: 3d20 7468 756d 620a 2020 2020 2020 2020  = thumb.        
-00003390: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000033a0: 2020 7061 796c 6f61 645b 2774 6875 6d62    payload['thumb
-000033b0: 275d 203d 2074 6875 6d62 0a20 2020 2072  '] = thumb.    r
-000033c0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-000033d0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-000033e0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-000033f0: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00003400: 6573 206f 7220 4e6f 6e65 290a 0a0a 6465  es or None)...de
-00003410: 6620 7365 745f 6368 6174 5f73 7469 636b  f set_chat_stick
-00003420: 6572 5f73 6574 2874 6f6b 656e 2c20 6368  er_set(token, ch
-00003430: 6174 5f69 642c 2073 7469 636b 6572 5f73  at_id, sticker_s
-00003440: 6574 5f6e 616d 6529 3a0a 2020 2020 6d65  et_name):.    me
-00003450: 7468 6f64 5f75 726c 203d 2072 2773 6574  thod_url = r'set
-00003460: 4368 6174 5374 6963 6b65 7253 6574 270a  ChatStickerSet'.
-00003470: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00003480: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-00003490: 642c 2027 7374 6963 6b65 725f 7365 745f  d, 'sticker_set_
-000034a0: 6e61 6d65 273a 2073 7469 636b 6572 5f73  name': sticker_s
-000034b0: 6574 5f6e 616d 657d 0a20 2020 2072 6574  et_name}.    ret
-000034c0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-000034d0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-000034e0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-000034f0: 6f61 6429 0a0a 0a64 6566 2064 656c 6574  oad)...def delet
-00003500: 655f 6368 6174 5f73 7469 636b 6572 5f73  e_chat_sticker_s
-00003510: 6574 2874 6f6b 656e 2c20 6368 6174 5f69  et(token, chat_i
-00003520: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00003530: 726c 203d 2072 2764 656c 6574 6543 6861  rl = r'deleteCha
-00003540: 7453 7469 636b 6572 5365 7427 0a20 2020  tStickerSet'.   
-00003550: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00003560: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
-00003570: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00003580: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00003590: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-000035a0: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6465  ms=payload)...de
-000035b0: 6620 6765 745f 6368 6174 5f6d 656d 6265  f get_chat_membe
-000035c0: 7228 746f 6b65 6e2c 2063 6861 745f 6964  r(token, chat_id
-000035d0: 2c20 7573 6572 5f69 6429 3a0a 2020 2020  , user_id):.    
-000035e0: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
-000035f0: 6574 4368 6174 4d65 6d62 6572 270a 2020  etChatMember'.  
-00003600: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00003610: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-00003620: 2027 7573 6572 5f69 6427 3a20 7573 6572   'user_id': user
-00003630: 5f69 647d 0a20 2020 2072 6574 7572 6e20  _id}.    return 
-00003640: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00003650: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00003660: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00003670: 0a0a 0a64 6566 2066 6f72 7761 7264 5f6d  ...def forward_m
-00003680: 6573 7361 6765 280a 2020 2020 2020 2020  essage(.        
-00003690: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-000036a0: 6672 6f6d 5f63 6861 745f 6964 2c20 6d65  from_chat_id, me
-000036b0: 7373 6167 655f 6964 2c0a 2020 2020 2020  ssage_id,.      
-000036c0: 2020 6469 7361 626c 655f 6e6f 7469 6669    disable_notifi
-000036d0: 6361 7469 6f6e 3d4e 6f6e 652c 2074 696d  cation=None, tim
-000036e0: 656f 7574 3d4e 6f6e 652c 2070 726f 7465  eout=None, prote
-000036f0: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-00003700: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00003710: 6964 3d4e 6f6e 6529 3a0a 2020 2020 6d65  id=None):.    me
-00003720: 7468 6f64 5f75 726c 203d 2072 2766 6f72  thod_url = r'for
-00003730: 7761 7264 4d65 7373 6167 6527 0a20 2020  wardMessage'.   
-00003740: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00003750: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
-00003760: 2766 726f 6d5f 6368 6174 5f69 6427 3a20  'from_chat_id': 
-00003770: 6672 6f6d 5f63 6861 745f 6964 2c20 276d  from_chat_id, 'm
-00003780: 6573 7361 6765 5f69 6427 3a20 6d65 7373  essage_id': mess
-00003790: 6167 655f 6964 7d0a 2020 2020 6966 2064  age_id}.    if d
-000037a0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-000037b0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-000037c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000037d0: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
-000037e0: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
-000037f0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
-00003800: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00003810: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00003820: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00003830: 656f 7574 0a20 2020 2069 6620 7072 6f74  eout.    if prot
-00003840: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00003850: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00003860: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
-00003870: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
-00003880: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-00003890: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-000038a0: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
-000038b0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-000038c0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
-000038d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000038e0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-000038f0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
-00003900: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-00003910: 616d 733d 7061 796c 6f61 6429 0a0a 0a64  ams=payload)...d
-00003920: 6566 2063 6f70 795f 6d65 7373 6167 6528  ef copy_message(
-00003930: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00003940: 6672 6f6d 5f63 6861 745f 6964 2c20 6d65  from_chat_id, me
-00003950: 7373 6167 655f 6964 2c20 6361 7074 696f  ssage_id, captio
-00003960: 6e3d 4e6f 6e65 2c20 7061 7273 655f 6d6f  n=None, parse_mo
-00003970: 6465 3d4e 6f6e 652c 2063 6170 7469 6f6e  de=None, caption
-00003980: 5f65 6e74 6974 6965 733d 4e6f 6e65 2c0a  _entities=None,.
-00003990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000039a0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-000039b0: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
-000039c0: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
-000039d0: 4e6f 6e65 2c20 616c 6c6f 775f 7365 6e64  None, allow_send
-000039e0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-000039f0: 793d 4e6f 6e65 2c0a 2020 2020 2020 2020  y=None,.        
-00003a00: 2020 2020 2020 2020 2072 6570 6c79 5f6d           reply_m
-00003a10: 6172 6b75 703d 4e6f 6e65 2c20 7469 6d65  arkup=None, time
-00003a20: 6f75 743d 4e6f 6e65 2c20 7072 6f74 6563  out=None, protec
-00003a30: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-00003a40: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00003a50: 643d 4e6f 6e65 293a 0a20 2020 206d 6574  d=None):.    met
-00003a60: 686f 645f 7572 6c20 3d20 7227 636f 7079  hod_url = r'copy
-00003a70: 4d65 7373 6167 6527 0a20 2020 2070 6179  Message'.    pay
-00003a80: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00003a90: 273a 2063 6861 745f 6964 2c20 2766 726f  ': chat_id, 'fro
-00003aa0: 6d5f 6368 6174 5f69 6427 3a20 6672 6f6d  m_chat_id': from
-00003ab0: 5f63 6861 745f 6964 2c20 276d 6573 7361  _chat_id, 'messa
-00003ac0: 6765 5f69 6427 3a20 6d65 7373 6167 655f  ge_id': message_
-00003ad0: 6964 7d0a 2020 2020 6966 2063 6170 7469  id}.    if capti
-00003ae0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-00003af0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00003b00: 2763 6170 7469 6f6e 275d 203d 2063 6170  'caption'] = cap
-00003b10: 7469 6f6e 0a20 2020 2069 6620 7061 7273  tion.    if pars
-00003b20: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
-00003b30: 7061 796c 6f61 645b 2770 6172 7365 5f6d  payload['parse_m
-00003b40: 6f64 6527 5d20 3d20 7061 7273 655f 6d6f  ode'] = parse_mo
-00003b50: 6465 0a20 2020 2069 6620 6361 7074 696f  de.    if captio
-00003b60: 6e5f 656e 7469 7469 6573 2069 7320 6e6f  n_entities is no
-00003b70: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00003b80: 7061 796c 6f61 645b 2763 6170 7469 6f6e  payload['caption
-00003b90: 5f65 6e74 6974 6965 7327 5d20 3d20 5f63  _entities'] = _c
-00003ba0: 6f6e 7665 7274 5f65 6e74 6974 6573 2863  onvert_entites(c
-00003bb0: 6170 7469 6f6e 5f65 6e74 6974 6965 7329  aption_entities)
-00003bc0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-00003bd0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
-00003be0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00003bf0: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
-00003c00: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
-00003c10: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
-00003c20: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
-00003c30: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00003c40: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00003c50: 6c6f 6164 5b27 7265 706c 795f 746f 5f6d  load['reply_to_m
-00003c60: 6573 7361 6765 5f69 6427 5d20 3d20 7265  essage_id'] = re
-00003c70: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-00003c80: 640a 2020 2020 6966 2072 6570 6c79 5f6d  d.    if reply_m
-00003c90: 6172 6b75 7020 6973 206e 6f74 204e 6f6e  arkup is not Non
-00003ca0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00003cb0: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
-00003cc0: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
-00003cd0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-00003ce0: 7029 0a20 2020 2069 6620 616c 6c6f 775f  p).    if allow_
-00003cf0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-00003d00: 7265 706c 7920 6973 206e 6f74 204e 6f6e  reply is not Non
-00003d10: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00003d20: 6164 5b27 616c 6c6f 775f 7365 6e64 696e  ad['allow_sendin
-00003d30: 675f 7769 7468 6f75 745f 7265 706c 7927  g_without_reply'
-00003d40: 5d20 3d20 616c 6c6f 775f 7365 6e64 696e  ] = allow_sendin
-00003d50: 675f 7769 7468 6f75 745f 7265 706c 790a  g_without_reply.
-00003d60: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00003d70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00003d80: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00003d90: 656f 7574 0a20 2020 2069 6620 7072 6f74  eout.    if prot
-00003da0: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00003db0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00003dc0: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
-00003dd0: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
-00003de0: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-00003df0: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-00003e00: 6561 645f 6964 2069 7320 6e6f 7420 4e6f  ead_id is not No
-00003e10: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00003e20: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
-00003e30: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
-00003e40: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-00003e50: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00003e60: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00003e70: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00003e80: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-00003e90: 656e 645f 6469 6365 280a 2020 2020 2020  end_dice(.      
-00003ea0: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
-00003eb0: 2c0a 2020 2020 2020 2020 656d 6f6a 693d  ,.        emoji=
-00003ec0: 4e6f 6e65 2c20 6469 7361 626c 655f 6e6f  None, disable_no
-00003ed0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00003ee0: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00003ef0: 655f 6964 3d4e 6f6e 652c 0a20 2020 2020  e_id=None,.     
-00003f00: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
-00003f10: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00003f20: 6e65 2c20 616c 6c6f 775f 7365 6e64 696e  ne, allow_sendin
-00003f30: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
-00003f40: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
-00003f50: 6e74 656e 743d 4e6f 6e65 2c20 6d65 7373  ntent=None, mess
-00003f60: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00003f70: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00003f80: 7572 6c20 3d20 7227 7365 6e64 4469 6365  url = r'sendDice
-00003f90: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00003fa0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00003fb0: 5f69 647d 0a20 2020 2069 6620 656d 6f6a  _id}.    if emoj
-00003fc0: 693a 0a20 2020 2020 2020 2070 6179 6c6f  i:.        paylo
-00003fd0: 6164 5b27 656d 6f6a 6927 5d20 3d20 656d  ad['emoji'] = em
-00003fe0: 6f6a 690a 2020 2020 6966 2064 6973 6162  oji.    if disab
-00003ff0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
-00004000: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004010: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-00004020: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00004030: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
-00004040: 6f74 6966 6963 6174 696f 6e0a 2020 2020  otification.    
-00004050: 6966 2072 6570 6c79 5f74 6f5f 6d65 7373  if reply_to_mess
-00004060: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-00004070: 7061 796c 6f61 645b 2772 6570 6c79 5f74  payload['reply_t
-00004080: 6f5f 6d65 7373 6167 655f 6964 275d 203d  o_message_id'] =
-00004090: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-000040a0: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
-000040b0: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-000040c0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-000040d0: 5f6d 6172 6b75 7027 5d20 3d20 5f63 6f6e  _markup'] = _con
-000040e0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
-000040f0: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
-00004100: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-00004110: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
-00004120: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
-00004130: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
-00004140: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00004150: 7920 6973 206e 6f74 204e 6f6e 653a 0a20  y is not None:. 
-00004160: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00004170: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00004180: 7468 6f75 745f 7265 706c 7927 5d20 3d20  thout_reply'] = 
-00004190: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-000041a0: 7468 6f75 745f 7265 706c 790a 2020 2020  thout_reply.    
-000041b0: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-000041c0: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-000041d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000041e0: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
-000041f0: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
-00004200: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
-00004210: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
-00004220: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00004230: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00004240: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
-00004250: 7265 6164 5f69 640a 2020 2020 7265 7475  read_id.    retu
-00004260: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00004270: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00004280: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00004290: 6164 290a 0a0a 6465 6620 7365 6e64 5f70  ad)...def send_p
-000042a0: 686f 746f 280a 2020 2020 2020 2020 746f  hoto(.        to
-000042b0: 6b65 6e2c 2063 6861 745f 6964 2c20 7068  ken, chat_id, ph
-000042c0: 6f74 6f2c 0a20 2020 2020 2020 2063 6170  oto,.        cap
-000042d0: 7469 6f6e 3d4e 6f6e 652c 2072 6570 6c79  tion=None, reply
-000042e0: 5f74 6f5f 6d65 7373 6167 655f 6964 3d4e  _to_message_id=N
-000042f0: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
-00004300: 703d 4e6f 6e65 2c0a 2020 2020 2020 2020  p=None,.        
-00004310: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-00004320: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00004330: 6174 696f 6e3d 4e6f 6e65 2c20 7469 6d65  ation=None, time
-00004340: 6f75 743d 4e6f 6e65 2c0a 2020 2020 2020  out=None,.      
-00004350: 2020 6361 7074 696f 6e5f 656e 7469 7469    caption_entiti
-00004360: 6573 3d4e 6f6e 652c 2061 6c6c 6f77 5f73  es=None, allow_s
-00004370: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-00004380: 6570 6c79 3d4e 6f6e 652c 2070 726f 7465  eply=None, prote
-00004390: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
-000043a0: 0a20 2020 2020 2020 206d 6573 7361 6765  .        message
-000043b0: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
-000043c0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000043d0: 203d 2072 2773 656e 6450 686f 746f 270a   = r'sendPhoto'.
-000043e0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-000043f0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-00004400: 647d 0a20 2020 2066 696c 6573 203d 204e  d}.    files = N
-00004410: 6f6e 650a 2020 2020 6966 2075 7469 6c2e  one.    if util.
-00004420: 6973 5f73 7472 696e 6728 7068 6f74 6f29  is_string(photo)
-00004430: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00004440: 645b 2770 686f 746f 275d 203d 2070 686f  d['photo'] = pho
-00004450: 746f 0a20 2020 2065 6c69 6620 7574 696c  to.    elif util
-00004460: 2e69 735f 7069 6c5f 696d 6167 6528 7068  .is_pil_image(ph
-00004470: 6f74 6f29 3a0a 2020 2020 2020 2020 6669  oto):.        fi
-00004480: 6c65 7320 3d20 7b27 7068 6f74 6f27 3a20  les = {'photo': 
-00004490: 7574 696c 2e70 696c 5f69 6d61 6765 5f74  util.pil_image_t
-000044a0: 6f5f 6669 6c65 2870 686f 746f 297d 0a20  o_file(photo)}. 
-000044b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000044c0: 2066 696c 6573 203d 207b 2770 686f 746f   files = {'photo
-000044d0: 273a 2070 686f 746f 7d0a 2020 2020 6966  ': photo}.    if
-000044e0: 2063 6170 7469 6f6e 3a0a 2020 2020 2020   caption:.      
-000044f0: 2020 7061 796c 6f61 645b 2763 6170 7469    payload['capti
-00004500: 6f6e 275d 203d 2063 6170 7469 6f6e 0a20  on'] = caption. 
-00004510: 2020 2069 6620 7265 706c 795f 746f 5f6d     if reply_to_m
-00004520: 6573 7361 6765 5f69 643a 0a20 2020 2020  essage_id:.     
-00004530: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-00004540: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
-00004550: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
-00004560: 7361 6765 5f69 640a 2020 2020 6966 2072  sage_id.    if r
-00004570: 6570 6c79 5f6d 6172 6b75 703a 0a20 2020  eply_markup:.   
-00004580: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
-00004590: 706c 795f 6d61 726b 7570 275d 203d 205f  ply_markup'] = _
-000045a0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
-000045b0: 6570 6c79 5f6d 6172 6b75 7029 0a20 2020  eply_markup).   
-000045c0: 2069 6620 7061 7273 655f 6d6f 6465 3a0a   if parse_mode:.
-000045d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000045e0: 2770 6172 7365 5f6d 6f64 6527 5d20 3d20  'parse_mode'] = 
-000045f0: 7061 7273 655f 6d6f 6465 0a20 2020 2069  parse_mode.    i
-00004600: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-00004610: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-00004620: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00004630: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
-00004640: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-00004650: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00004660: 6f6e 0a20 2020 2069 6620 7469 6d65 6f75  on.    if timeou
-00004670: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00004680: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
-00004690: 7469 6d65 6f75 740a 2020 2020 6966 2063  timeout.    if c
-000046a0: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
+00000000: 696d 706f 7274 2061 7379 6e63 696f 2023  import asyncio #
+00000010: 2066 6f72 2066 7574 7572 6520 7573 6573   for future uses
+00000020: 0d0a 696d 706f 7274 2073 736c 0d0a 696d  ..import ssl..im
+00000030: 706f 7274 2061 696f 6874 7470 0d0a 696d  port aiohttp..im
+00000040: 706f 7274 2063 6572 7469 6669 0d0a 6672  port certifi..fr
+00000050: 6f6d 2074 656c 6562 6f74 2069 6d70 6f72  om telebot impor
+00000060: 7420 7479 7065 730d 0a0d 0a74 7279 3a0d  t types....try:.
+00000070: 0a20 2020 2069 6d70 6f72 7420 756a 736f  .    import ujso
+00000080: 6e20 6173 206a 736f 6e0d 0a65 7863 6570  n as json..excep
+00000090: 7420 496d 706f 7274 4572 726f 723a 0d0a  t ImportError:..
+000000a0: 2020 2020 696d 706f 7274 206a 736f 6e0d      import json.
+000000b0: 0a69 6d70 6f72 7420 6f73 0d0a 4150 495f  .import os..API_
+000000c0: 5552 4c20 3d20 2768 7474 7073 3a2f 2f61  URL = 'https://a
+000000d0: 7069 2e74 656c 6567 7261 6d2e 6f72 672f  pi.telegram.org/
+000000e0: 626f 747b 307d 2f7b 317d 270d 0a0d 0a66  bot{0}/{1}'....f
+000000f0: 726f 6d20 6461 7465 7469 6d65 2069 6d70  rom datetime imp
+00000100: 6f72 7420 6461 7465 7469 6d65 0d0a 0d0a  ort datetime....
+00000110: 6672 6f6d 2074 656c 6562 6f74 2069 6d70  from telebot imp
+00000120: 6f72 7420 7574 696c 0d0a 696d 706f 7274  ort util..import
+00000130: 206c 6f67 6769 6e67 0d0a 0d0a 6c6f 6767   logging....logg
+00000140: 6572 203d 206c 6f67 6769 6e67 2e67 6574  er = logging.get
+00000150: 4c6f 6767 6572 2827 5465 6c65 426f 7427  Logger('TeleBot'
+00000160: 290d 0a0d 0a70 726f 7879 203d 204e 6f6e  )....proxy = Non
+00000170: 650d 0a73 6573 7369 6f6e 203d 204e 6f6e  e..session = Non
+00000180: 650d 0a0d 0a46 494c 455f 5552 4c20 3d20  e....FILE_URL = 
+00000190: 4e6f 6e65 0d0a 0d0a 5245 5155 4553 545f  None....REQUEST_
+000001a0: 5449 4d45 4f55 5420 3d20 3330 300d 0a4d  TIMEOUT = 300..M
+000001b0: 4158 5f52 4554 5249 4553 203d 2033 0d0a  AX_RETRIES = 3..
+000001c0: 0d0a 5245 5155 4553 545f 4c49 4d49 5420  ..REQUEST_LIMIT 
+000001d0: 3d20 3530 0d0a 0d0a 636c 6173 7320 5365  = 50....class Se
+000001e0: 7373 696f 6e4d 616e 6167 6572 3a0d 0a20  ssionManager:.. 
+000001f0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00000200: 7365 6c66 2920 2d3e 204e 6f6e 653a 0d0a  self) -> None:..
+00000210: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
+00000220: 7369 6f6e 203d 204e 6f6e 650d 0a20 2020  sion = None..   
+00000230: 2020 2020 2073 656c 662e 7373 6c5f 636f       self.ssl_co
+00000240: 6e74 6578 7420 3d20 7373 6c2e 6372 6561  ntext = ssl.crea
+00000250: 7465 5f64 6566 6175 6c74 5f63 6f6e 7465  te_default_conte
+00000260: 7874 2863 6166 696c 653d 6365 7274 6966  xt(cafile=certif
+00000270: 692e 7768 6572 6528 2929 0d0a 0d0a 0d0a  i.where())......
+00000280: 2020 2020 6173 796e 6320 6465 6620 6372      async def cr
+00000290: 6561 7465 5f73 6573 7369 6f6e 2873 656c  eate_session(sel
+000002a0: 6629 3a0d 0a20 2020 2020 2020 2073 656c  f):..        sel
+000002b0: 662e 7365 7373 696f 6e20 3d20 6169 6f68  f.session = aioh
+000002c0: 7474 702e 436c 6965 6e74 5365 7373 696f  ttp.ClientSessio
+000002d0: 6e28 636f 6e6e 6563 746f 723d 6169 6f68  n(connector=aioh
+000002e0: 7474 702e 5443 5043 6f6e 6e65 6374 6f72  ttp.TCPConnector
+000002f0: 280d 0a20 2020 2020 2020 2020 2020 206c  (..            l
+00000300: 696d 6974 3d52 4551 5545 5354 5f4c 494d  imit=REQUEST_LIM
+00000310: 4954 2c0d 0a20 2020 2020 2020 2020 2020  IT,..           
+00000320: 2073 736c 5f63 6f6e 7465 7874 3d73 656c   ssl_context=sel
+00000330: 662e 7373 6c5f 636f 6e74 6578 740d 0a20  f.ssl_context.. 
+00000340: 2020 2020 2020 2029 290d 0a20 2020 2020         ))..     
+00000350: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
+00000360: 6573 7369 6f6e 0d0a 0d0a 2020 2020 6173  ession....    as
+00000370: 796e 6320 6465 6620 6765 745f 7365 7373  ync def get_sess
+00000380: 696f 6e28 7365 6c66 293a 0d0a 2020 2020  ion(self):..    
+00000390: 2020 2020 6966 2073 656c 662e 7365 7373      if self.sess
+000003a0: 696f 6e20 6973 204e 6f6e 653a 0d0a 2020  ion is None:..  
+000003b0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+000003c0: 6573 7369 6f6e 203d 2061 7761 6974 2073  ession = await s
+000003d0: 656c 662e 6372 6561 7465 5f73 6573 7369  elf.create_sessi
+000003e0: 6f6e 2829 0d0a 2020 2020 2020 2020 2020  on()..          
+000003f0: 2020 7265 7475 726e 2073 656c 662e 7365    return self.se
+00000400: 7373 696f 6e0d 0a20 2020 2020 2020 2020  ssion..         
+00000410: 2020 200d 0a20 2020 2020 2020 2069 6620     ..        if 
+00000420: 7365 6c66 2e73 6573 7369 6f6e 2e63 6c6f  self.session.clo
+00000430: 7365 643a 0d0a 2020 2020 2020 2020 2020  sed:..          
+00000440: 2020 7365 6c66 2e73 6573 7369 6f6e 203d    self.session =
+00000450: 2061 7761 6974 2073 656c 662e 6372 6561   await self.crea
+00000460: 7465 5f73 6573 7369 6f6e 2829 0d0a 0d0a  te_session()....
+00000470: 2020 2020 2020 2020 2320 6e6f 696e 7370          # noinsp
+00000480: 6563 7469 6f6e 2050 7950 726f 7465 6374  ection PyProtect
+00000490: 6564 4d65 6d62 6572 0d0a 2020 2020 2020  edMember..      
+000004a0: 2020 6966 206e 6f74 2073 656c 662e 7365    if not self.se
+000004b0: 7373 696f 6e2e 5f6c 6f6f 702e 6973 5f72  ssion._loop.is_r
+000004c0: 756e 6e69 6e67 2829 3a0d 0a20 2020 2020  unning():..     
+000004d0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+000004e0: 662e 7365 7373 696f 6e2e 636c 6f73 6528  f.session.close(
+000004f0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00000500: 656c 662e 7365 7373 696f 6e20 3d20 6177  elf.session = aw
+00000510: 6169 7420 7365 6c66 2e63 7265 6174 655f  ait self.create_
+00000520: 7365 7373 696f 6e28 290d 0a20 2020 2020  session()..     
+00000530: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
+00000540: 6573 7369 6f6e 0d0a 0d0a 0d0a 7365 7373  ession......sess
+00000550: 696f 6e5f 6d61 6e61 6765 7220 3d20 5365  ion_manager = Se
+00000560: 7373 696f 6e4d 616e 6167 6572 2829 0d0a  ssionManager()..
+00000570: 0d0a 6173 796e 6320 6465 6620 5f70 726f  ..async def _pro
+00000580: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00000590: 656e 2c20 7572 6c2c 206d 6574 686f 643d  en, url, method=
+000005a0: 2767 6574 272c 2070 6172 616d 733d 4e6f  'get', params=No
+000005b0: 6e65 2c20 6669 6c65 733d 4e6f 6e65 2c20  ne, files=None, 
+000005c0: 2a2a 6b77 6172 6773 293a 0d0a 2020 2020  **kwargs):..    
+000005d0: 2320 4c65 7427 7320 7265 736f 6c76 6520  # Let's resolve 
+000005e0: 616c 6c20 7469 6d65 6f75 7420 7061 7261  all timeout para
+000005f0: 6d65 7465 7273 2e0d 0a20 2020 2023 2067  meters...    # g
+00000600: 6574 5570 6461 7465 7320 7061 7261 6d65  etUpdates parame
+00000610: 7465 7220 6d61 7920 636f 6e74 6169 6e20  ter may contain 
+00000620: 3220 7061 7261 6d65 7465 7273 3a20 7265  2 parameters: re
+00000630: 7175 6573 745f 7469 6d65 6f75 7420 2620  quest_timeout & 
+00000640: 7469 6d65 6f75 742e 0d0a 2020 2020 2320  timeout...    # 
+00000650: 6f74 6865 7220 6d65 7468 6f64 7320 6d61  other methods ma
+00000660: 7920 636f 6e74 6169 6e20 7469 6d65 6f75  y contain timeou
+00000670: 7420 7061 7261 6d65 7465 7220 7468 6174  t parameter that
+00000680: 2073 686f 756c 6420 6265 2061 7070 6c69   should be appli
+00000690: 6564 2074 6f0d 0a20 2020 2023 2043 6c69  ed to..    # Cli
+000006a0: 656e 7454 696d 656f 7574 206f 6e6c 792e  entTimeout only.
+000006b0: 0d0a 2020 2020 2320 7469 6d65 6f75 7420  ..    # timeout 
+000006c0: 7368 6f75 6c64 2062 6520 6164 6465 6420  should be added 
+000006d0: 746f 2070 6172 616d 7320 666f 7220 6765  to params for ge
+000006e0: 7455 7064 6174 6573 2e20 416c 6c20 6f74  tUpdates. All ot
+000006f0: 6865 7220 7469 6d65 6f75 7427 7320 7368  her timeout's sh
+00000700: 6f75 6c64 2062 6520 7573 6564 0d0a 2020  ould be used..  
+00000710: 2020 2320 666f 7220 7265 7175 6573 7420    # for request 
+00000720: 7469 6d65 6f75 742e 0d0a 2020 2020 2320  timeout...    # 
+00000730: 6865 7265 2077 6520 676f 7420 7265 7175  here we got requ
+00000740: 6573 745f 7469 6d65 6f75 742c 2073 6f20  est_timeout, so 
+00000750: 7468 6973 2069 7320 6765 7455 7064 6174  this is getUpdat
+00000760: 6573 206d 6574 686f 642e 0d0a 2020 2020  es method...    
+00000770: 6966 2027 7265 7175 6573 745f 7469 6d65  if 'request_time
+00000780: 6f75 7427 2069 6e20 6b77 6172 6773 3a0d  out' in kwargs:.
+00000790: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+000007a0: 5f74 696d 656f 7574 203d 206b 7761 7267  _timeout = kwarg
+000007b0: 732e 706f 7028 2772 6571 7565 7374 5f74  s.pop('request_t
+000007c0: 696d 656f 7574 2729 0d0a 0d0a 2020 2020  imeout')....    
+000007d0: 656c 7365 3a0d 0a20 2020 2020 2020 2023  else:..        #
+000007e0: 206c 6574 2773 2063 6865 636b 2066 6f72   let's check for
+000007f0: 2074 696d 656f 7574 2069 6e20 7061 7261   timeout in para
+00000800: 6d73 0d0a 2020 2020 2020 2020 7265 7175  ms..        requ
+00000810: 6573 745f 7469 6d65 6f75 7420 3d20 7061  est_timeout = pa
+00000820: 7261 6d73 2e70 6f70 2827 7469 6d65 6f75  rams.pop('timeou
+00000830: 7427 2c20 4e6f 6e65 2920 6966 2070 6172  t', None) if par
+00000840: 616d 7320 656c 7365 204e 6f6e 650d 0a20  ams else None.. 
+00000850: 2020 2020 2020 2023 2077 6520 7769 6c6c         # we will
+00000860: 2061 7070 6c79 2064 6566 6175 6c74 2072   apply default r
+00000870: 6571 7565 7374 5f74 696d 656f 7574 2069  equest_timeout i
+00000880: 6620 7468 6572 6520 6973 206e 6f20 7469  f there is no ti
+00000890: 6d65 6f75 7420 696e 2070 6172 616d 730d  meout in params.
+000008a0: 0a20 2020 2020 2020 2023 206f 7468 6572  .        # other
+000008b0: 7769 7365 2c20 7765 2077 696c 6c20 7573  wise, we will us
+000008c0: 6520 7469 6d65 6f75 7420 7061 7261 6d65  e timeout parame
+000008d0: 7465 7220 6170 706c 6965 6420 666f 7220  ter applied for 
+000008e0: 7061 796c 6f61 642e 0d0a 2020 2020 0d0a  payload...    ..
+000008f0: 2020 2020 7265 7175 6573 745f 7469 6d65      request_time
+00000900: 6f75 7420 3d20 5245 5155 4553 545f 5449  out = REQUEST_TI
+00000910: 4d45 4f55 5420 6966 2072 6571 7565 7374  MEOUT if request
+00000920: 5f74 696d 656f 7574 2069 7320 4e6f 6e65  _timeout is None
+00000930: 2065 6c73 6520 7265 7175 6573 745f 7469   else request_ti
+00000940: 6d65 6f75 740d 0a20 2020 200d 0a0d 0a20  meout..    .... 
+00000950: 2020 2023 2050 7265 7061 7269 6e67 2064     # Preparing d
+00000960: 6174 6120 6279 2061 6464 696e 6720 616c  ata by adding al
+00000970: 6c20 7061 7261 6d65 7465 7273 2061 6e64  l parameters and
+00000980: 2066 696c 6573 2074 6f20 466f 726d 4461   files to FormDa
+00000990: 7461 0d0a 2020 2020 7061 7261 6d73 203d  ta..    params =
+000009a0: 205f 7072 6570 6172 655f 6461 7461 2870   _prepare_data(p
+000009b0: 6172 616d 732c 2066 696c 6573 290d 0a0d  arams, files)...
+000009c0: 0a20 2020 2074 696d 656f 7574 203d 2061  .    timeout = a
+000009d0: 696f 6874 7470 2e43 6c69 656e 7454 696d  iohttp.ClientTim
+000009e0: 656f 7574 2874 6f74 616c 3d72 6571 7565  eout(total=reque
+000009f0: 7374 5f74 696d 656f 7574 290d 0a20 2020  st_timeout)..   
+00000a00: 2067 6f74 5f72 6573 756c 7420 3d20 4661   got_result = Fa
+00000a10: 6c73 650d 0a20 2020 2063 7572 7265 6e74  lse..    current
+00000a20: 5f74 7279 3d30 0d0a 2020 2020 7365 7373  _try=0..    sess
+00000a30: 696f 6e20 3d20 6177 6169 7420 7365 7373  ion = await sess
+00000a40: 696f 6e5f 6d61 6e61 6765 722e 6765 745f  ion_manager.get_
+00000a50: 7365 7373 696f 6e28 290d 0a20 2020 2077  session()..    w
+00000a60: 6869 6c65 206e 6f74 2067 6f74 5f72 6573  hile not got_res
+00000a70: 756c 7420 616e 6420 6375 7272 656e 745f  ult and current_
+00000a80: 7472 793c 4d41 585f 5245 5452 4945 532d  try<MAX_RETRIES-
+00000a90: 313a 0d0a 2020 2020 2020 2020 6375 7272  1:..        curr
+00000aa0: 656e 745f 7472 7920 2b3d 310d 0a20 2020  ent_try +=1..   
+00000ab0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00000ac0: 2020 2020 2020 2061 7379 6e63 2077 6974         async wit
+00000ad0: 6820 7365 7373 696f 6e2e 7265 7175 6573  h session.reques
+00000ae0: 7428 6d65 7468 6f64 3d6d 6574 686f 642c  t(method=method,
+00000af0: 2075 726c 3d41 5049 5f55 524c 2e66 6f72   url=API_URL.for
+00000b00: 6d61 7428 746f 6b65 6e2c 2075 726c 292c  mat(token, url),
+00000b10: 2064 6174 613d 7061 7261 6d73 2c20 7469   data=params, ti
+00000b20: 6d65 6f75 743d 7469 6d65 6f75 742c 2070  meout=timeout, p
+00000b30: 726f 7879 3d70 726f 7879 2920 6173 2072  roxy=proxy) as r
+00000b40: 6573 703a 0d0a 2020 2020 2020 2020 2020  esp:..          
+00000b50: 2020 2020 2020 676f 745f 7265 7375 6c74        got_result
+00000b60: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+00000b70: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00000b80: 6465 6275 6728 2252 6571 7565 7374 3a20  debug("Request: 
+00000b90: 6d65 7468 6f64 3d7b 307d 2075 726c 3d7b  method={0} url={
+00000ba0: 317d 2070 6172 616d 733d 7b32 7d20 6669  1} params={2} fi
+00000bb0: 6c65 733d 7b33 7d20 7265 7175 6573 745f  les={3} request_
+00000bc0: 7469 6d65 6f75 743d 7b34 7d20 6375 7272  timeout={4} curr
+00000bd0: 656e 745f 7472 793d 7b35 7d22 2e66 6f72  ent_try={5}".for
+00000be0: 6d61 7428 6d65 7468 6f64 2c20 7572 6c2c  mat(method, url,
+00000bf0: 2070 6172 616d 732c 2066 696c 6573 2c20   params, files, 
+00000c00: 7265 7175 6573 745f 7469 6d65 6f75 742c  request_timeout,
+00000c10: 2063 7572 7265 6e74 5f74 7279 292e 7265   current_try).re
+00000c20: 706c 6163 6528 746f 6b65 6e2c 2074 6f6b  place(token, tok
+00000c30: 656e 2e73 706c 6974 2827 3a27 295b 305d  en.split(':')[0]
+00000c40: 202b 2022 3a7b 544f 4b45 4e7d 2229 290d   + ":{TOKEN}")).
+00000c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000c60: 200d 0a20 2020 2020 2020 2020 2020 2020   ..             
+00000c70: 2020 206a 736f 6e5f 7265 7375 6c74 203d     json_result =
+00000c80: 2061 7761 6974 205f 6368 6563 6b5f 7265   await _check_re
+00000c90: 7375 6c74 2875 726c 2c20 7265 7370 290d  sult(url, resp).
+00000ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000cb0: 2069 6620 6a73 6f6e 5f72 6573 756c 743a   if json_result:
+00000cc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00000cd0: 2020 2020 2020 7265 7475 726e 206a 736f        return jso
+00000ce0: 6e5f 7265 7375 6c74 5b27 7265 7375 6c74  n_result['result
+00000cf0: 275d 0d0a 2020 2020 2020 2020 6578 6365  ']..        exce
+00000d00: 7074 2028 4170 6954 656c 6567 7261 6d45  pt (ApiTelegramE
+00000d10: 7863 6570 7469 6f6e 2c41 7069 496e 7661  xception,ApiInva
+00000d20: 6c69 644a 534f 4e45 7863 6570 7469 6f6e  lidJSONException
+00000d30: 2c20 4170 6948 5454 5045 7863 6570 7469  , ApiHTTPExcepti
+00000d40: 6f6e 2920 6173 2065 3a0d 0a20 2020 2020  on) as e:..     
+00000d50: 2020 2020 2020 2072 6169 7365 2065 0d0a         raise e..
+00000d60: 2020 2020 2020 2020 6578 6365 7074 2061          except a
+00000d70: 696f 6874 7470 2e43 6c69 656e 7445 7272  iohttp.ClientErr
+00000d80: 6f72 2061 7320 653a 0d0a 2020 2020 2020  or as e:..      
+00000d90: 2020 2020 2020 6c6f 6767 6572 2e65 7272        logger.err
+00000da0: 6f72 2827 4169 6f68 7474 7020 436c 6965  or('Aiohttp Clie
+00000db0: 6e74 4572 726f 723a 207b 307d 272e 666f  ntError: {0}'.fo
+00000dc0: 726d 6174 2865 2e5f 5f63 6c61 7373 5f5f  rmat(e.__class__
+00000dd0: 2e5f 5f6e 616d 655f 5f29 290d 0a20 2020  .__name__))..   
+00000de0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00000df0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00000e00: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00000e10: 6572 726f 7228 6627 556e 6b6e 6f77 6e20  error(f'Unknown 
+00000e20: 6572 726f 723a 207b 652e 5f5f 636c 6173  error: {e.__clas
+00000e30: 735f 5f2e 5f5f 6e61 6d65 5f5f 7d27 290d  s__.__name__}').
+00000e40: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00000e50: 676f 745f 7265 7375 6c74 3a0d 0a20 2020  got_result:..   
+00000e60: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+00000e70: 6571 7565 7374 5469 6d65 6f75 7428 2252  equestTimeout("R
+00000e80: 6571 7565 7374 2074 696d 656f 7574 2e20  equest timeout. 
+00000e90: 5265 7175 6573 743a 206d 6574 686f 643d  Request: method=
+00000ea0: 7b30 7d20 7572 6c3d 7b31 7d20 7061 7261  {0} url={1} para
+00000eb0: 6d73 3d7b 327d 2066 696c 6573 3d7b 337d  ms={2} files={3}
+00000ec0: 2072 6571 7565 7374 5f74 696d 656f 7574   request_timeout
+00000ed0: 3d7b 347d 222e 666f 726d 6174 286d 6574  ={4}".format(met
+00000ee0: 686f 642c 2075 726c 2c20 7061 7261 6d73  hod, url, params
+00000ef0: 2c20 6669 6c65 732c 2072 6571 7565 7374  , files, request
+00000f00: 5f74 696d 656f 7574 2c20 6375 7272 656e  _timeout, curren
+00000f10: 745f 7472 7929 290d 0a20 2020 2020 2020  t_try))..       
+00000f20: 200d 0a64 6566 205f 7072 6570 6172 655f   ..def _prepare_
+00000f30: 6669 6c65 286f 626a 293a 0d0a 2020 2020  file(obj):..    
+00000f40: 2222 220d 0a20 2020 2050 7265 7061 7265  """..    Prepare
+00000f50: 7320 6669 6c65 2066 6f72 2075 706c 6f61  s file for uploa
+00000f60: 642e 0d0a 2020 2020 2222 220d 0a20 2020  d...    """..   
+00000f70: 206e 616d 6520 3d20 6765 7461 7474 7228   name = getattr(
+00000f80: 6f62 6a2c 2027 6e61 6d65 272c 204e 6f6e  obj, 'name', Non
+00000f90: 6529 0d0a 2020 2020 6966 206e 616d 6520  e)..    if name 
+00000fa0: 616e 6420 6973 696e 7374 616e 6365 286e  and isinstance(n
+00000fb0: 616d 652c 2073 7472 2920 616e 6420 6e61  ame, str) and na
+00000fc0: 6d65 5b30 5d20 213d 2027 3c27 2061 6e64  me[0] != '<' and
+00000fd0: 206e 616d 655b 2d31 5d20 213d 2027 3e27   name[-1] != '>'
+00000fe0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00000ff0: 6e20 6f73 2e70 6174 682e 6261 7365 6e61  n os.path.basena
+00001000: 6d65 286e 616d 6529 0d0a 0d0a 6465 6620  me(name)....def 
+00001010: 5f70 7265 7061 7265 5f64 6174 6128 7061  _prepare_data(pa
+00001020: 7261 6d73 3d4e 6f6e 652c 2066 696c 6573  rams=None, files
+00001030: 3d4e 6f6e 6529 3a0d 0a20 2020 2022 2222  =None):..    """
+00001040: 0d0a 2020 2020 4164 6473 2074 6865 2070  ..    Adds the p
+00001050: 6172 616d 6574 6572 7320 616e 6420 6669  arameters and fi
+00001060: 6c65 7320 746f 2074 6865 2072 6571 7565  les to the reque
+00001070: 7374 2e0d 0a0d 0a20 2020 203a 7061 7261  st.....    :para
+00001080: 6d20 7061 7261 6d73 3a0d 0a20 2020 203a  m params:..    :
+00001090: 7061 7261 6d20 6669 6c65 733a 0d0a 2020  param files:..  
+000010a0: 2020 3a72 6574 7572 6e3a 0d0a 2020 2020    :return:..    
+000010b0: 2222 220d 0a20 2020 2064 6174 6120 3d20  """..    data = 
+000010c0: 6169 6f68 7474 702e 666f 726d 6461 7461  aiohttp.formdata
+000010d0: 2e46 6f72 6d44 6174 6128 7175 6f74 655f  .FormData(quote_
+000010e0: 6669 656c 6473 3d46 616c 7365 290d 0a0d  fields=False)...
+000010f0: 0a20 2020 2069 6620 7061 7261 6d73 3a0d  .    if params:.
+00001100: 0a20 2020 2020 2020 2066 6f72 206b 6579  .        for key
+00001110: 2c20 7661 6c75 6520 696e 2070 6172 616d  , value in param
+00001120: 732e 6974 656d 7328 293a 0d0a 2020 2020  s.items():..    
+00001130: 2020 2020 2020 2020 6461 7461 2e61 6464          data.add
+00001140: 5f66 6965 6c64 286b 6579 2c20 7374 7228  _field(key, str(
+00001150: 7661 6c75 6529 290d 0a20 2020 2069 6620  value))..    if 
+00001160: 6669 6c65 733a 0d0a 2020 2020 2020 2020  files:..        
+00001170: 666f 7220 6b65 792c 2066 2069 6e20 6669  for key, f in fi
+00001180: 6c65 732e 6974 656d 7328 293a 0d0a 2020  les.items():..  
+00001190: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+000011a0: 6e73 7461 6e63 6528 662c 2074 7570 6c65  nstance(f, tuple
+000011b0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000011c0: 2020 2020 6966 206c 656e 2866 2920 3d3d      if len(f) ==
+000011d0: 2032 3a0d 0a20 2020 2020 2020 2020 2020   2:..           
+000011e0: 2020 2020 2020 2020 2066 696c 655f 6e61           file_na
+000011f0: 6d65 2c20 6669 6c65 203d 2066 0d0a 2020  me, file = f..  
+00001200: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00001210: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00001220: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00001230: 616c 7565 4572 726f 7228 2754 7570 6c65  alueError('Tuple
+00001240: 206d 7573 7420 6861 7665 2065 7861 6374   must have exact
+00001250: 6c79 2032 2065 6c65 6d65 6e74 733a 2066  ly 2 elements: f
+00001260: 696c 656e 616d 652c 2066 696c 656f 626a  ilename, fileobj
+00001270: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
+00001280: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00001290: 662c 2074 7970 6573 2e49 6e70 7574 4669  f, types.InputFi
+000012a0: 6c65 293a 0d0a 2020 2020 2020 2020 2020  le):..          
+000012b0: 2020 2020 2020 6669 6c65 5f6e 616d 6520        file_name 
+000012c0: 3d20 662e 6669 6c65 5f6e 616d 650d 0a20  = f.file_name.. 
+000012d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000012e0: 696c 6520 3d20 662e 6669 6c65 0d0a 2020  ile = f.file..  
+000012f0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00001300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001310: 2066 696c 655f 6e61 6d65 2c20 6669 6c65   file_name, file
+00001320: 203d 205f 7072 6570 6172 655f 6669 6c65   = _prepare_file
+00001330: 2866 2920 6f72 206b 6579 2c20 660d 0a0d  (f) or key, f...
+00001340: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00001350: 612e 6164 645f 6669 656c 6428 6b65 792c  a.add_field(key,
+00001360: 2066 696c 652c 2066 696c 656e 616d 653d   file, filename=
+00001370: 6669 6c65 5f6e 616d 6529 0d0a 0d0a 2020  file_name)....  
+00001380: 2020 7265 7475 726e 2064 6174 610d 0a0d    return data...
+00001390: 0a61 7379 6e63 2064 6566 205f 636f 6e76  .async def _conv
+000013a0: 6572 745f 6d61 726b 7570 286d 6172 6b75  ert_markup(marku
+000013b0: 7029 3a0d 0a20 2020 2069 6620 6973 696e  p):..    if isin
+000013c0: 7374 616e 6365 286d 6172 6b75 702c 2074  stance(markup, t
+000013d0: 7970 6573 2e4a 736f 6e53 6572 6961 6c69  ypes.JsonSeriali
+000013e0: 7a61 626c 6529 3a0d 0a20 2020 2020 2020  zable):..       
+000013f0: 2072 6574 7572 6e20 6d61 726b 7570 2e74   return markup.t
+00001400: 6f5f 6a73 6f6e 2829 0d0a 2020 2020 7265  o_json()..    re
+00001410: 7475 726e 206d 6172 6b75 700d 0a0d 0a0d  turn markup.....
+00001420: 0a0d 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+00001430: 5f6d 6528 746f 6b65 6e29 3a0d 0a20 2020  _me(token):..   
+00001440: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00001450: 6765 744d 6527 0d0a 2020 2020 7265 7475  getMe'..    retu
+00001460: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+00001470: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+00001480: 206d 6574 686f 645f 7572 6c29 0d0a 0d0a   method_url)....
+00001490: 0d0a 6173 796e 6320 6465 6620 6c6f 675f  ..async def log_
+000014a0: 6f75 7428 746f 6b65 6e29 3a0d 0a20 2020  out(token):..   
+000014b0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+000014c0: 6c6f 674f 7574 270d 0a20 2020 2072 6574  logOut'..    ret
+000014d0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+000014e0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+000014f0: 2c20 6d65 7468 6f64 5f75 726c 290d 0a0d  , method_url)...
+00001500: 0a0d 0a61 7379 6e63 2064 6566 2063 6c6f  ...async def clo
+00001510: 7365 2874 6f6b 656e 293a 0d0a 2020 2020  se(token):..    
+00001520: 6d65 7468 6f64 5f75 726c 203d 2072 2763  method_url = r'c
+00001530: 6c6f 7365 270d 0a20 2020 2072 6574 7572  lose'..    retur
+00001540: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+00001550: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00001560: 6d65 7468 6f64 5f75 726c 290d 0a0d 0a0d  method_url).....
+00001570: 0a61 7379 6e63 2064 6566 2067 6574 5f66  .async def get_f
+00001580: 696c 6528 746f 6b65 6e2c 2066 696c 655f  ile(token, file_
+00001590: 6964 293a 0d0a 2020 2020 6d65 7468 6f64  id):..    method
+000015a0: 5f75 726c 203d 2072 2767 6574 4669 6c65  _url = r'getFile
+000015b0: 270d 0a20 2020 2072 6574 7572 6e20 6177  '..    return aw
+000015c0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+000015d0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+000015e0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d7b  od_url, params={
+000015f0: 2766 696c 655f 6964 273a 2066 696c 655f  'file_id': file_
+00001600: 6964 7d29 0d0a 0d0a 0d0a 6173 796e 6320  id})......async 
+00001610: 6465 6620 6765 745f 6669 6c65 5f75 726c  def get_file_url
+00001620: 2874 6f6b 656e 2c20 6669 6c65 5f69 6429  (token, file_id)
+00001630: 3a0d 0a20 2020 2069 6620 4649 4c45 5f55  :..    if FILE_U
+00001640: 524c 2069 7320 4e6f 6e65 3a0d 0a20 2020  RL is None:..   
+00001650: 2020 2020 2072 6574 7572 6e20 2268 7474       return "htt
+00001660: 7073 3a2f 2f61 7069 2e74 656c 6567 7261  ps://api.telegra
+00001670: 6d2e 6f72 672f 6669 6c65 2f62 6f74 7b30  m.org/file/bot{0
+00001680: 7d2f 7b31 7d22 2e66 6f72 6d61 7428 746f  }/{1}".format(to
+00001690: 6b65 6e2c 2028 6177 6169 7420 6765 745f  ken, (await get_
+000016a0: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
+000016b0: 5f69 6429 295b 2766 696c 655f 7061 7468  _id))['file_path
+000016c0: 275d 290d 0a20 2020 2065 6c73 653a 0d0a  '])..    else:..
+000016d0: 2020 2020 2020 2020 2320 6e6f 696e 7370          # noinsp
+000016e0: 6563 7469 6f6e 2050 7955 6e72 6573 6f6c  ection PyUnresol
+000016f0: 7665 6452 6566 6572 656e 6365 730d 0a20  vedReferences.. 
+00001700: 2020 2020 2020 2072 6574 7572 6e20 4649         return FI
+00001710: 4c45 5f55 524c 2e66 6f72 6d61 7428 746f  LE_URL.format(to
+00001720: 6b65 6e2c 2028 6177 6169 7420 6765 745f  ken, (await get_
+00001730: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
+00001740: 5f69 6429 295b 2766 696c 655f 7061 7468  _id))['file_path
+00001750: 275d 290d 0a0d 0a0d 0a61 7379 6e63 2064  '])......async d
+00001760: 6566 2064 6f77 6e6c 6f61 645f 6669 6c65  ef download_file
+00001770: 2874 6f6b 656e 2c20 6669 6c65 5f70 6174  (token, file_pat
+00001780: 6829 3a0d 0a20 2020 2069 6620 4649 4c45  h):..    if FILE
+00001790: 5f55 524c 2069 7320 4e6f 6e65 3a0d 0a20  _URL is None:.. 
+000017a0: 2020 2020 2020 2075 726c 203d 2020 2268         url =  "h
+000017b0: 7474 7073 3a2f 2f61 7069 2e74 656c 6567  ttps://api.teleg
+000017c0: 7261 6d2e 6f72 672f 6669 6c65 2f62 6f74  ram.org/file/bot
+000017d0: 7b30 7d2f 7b31 7d22 2e66 6f72 6d61 7428  {0}/{1}".format(
+000017e0: 746f 6b65 6e2c 2066 696c 655f 7061 7468  token, file_path
+000017f0: 290d 0a20 2020 2065 6c73 653a 2075 726c  )..    else: url
+00001800: 203d 2020 4649 4c45 5f55 524c 2e66 6f72   =  FILE_URL.for
+00001810: 6d61 7428 746f 6b65 6e2c 2066 696c 655f  mat(token, file_
+00001820: 7061 7468 290d 0a20 2020 2073 6573 7369  path)..    sessi
+00001830: 6f6e 203d 2061 7761 6974 2073 6573 7369  on = await sessi
+00001840: 6f6e 5f6d 616e 6167 6572 2e67 6574 5f73  on_manager.get_s
+00001850: 6573 7369 6f6e 2829 0d0a 2020 2020 6173  ession()..    as
+00001860: 796e 6320 7769 7468 2073 6573 7369 6f6e  ync with session
+00001870: 2e67 6574 2875 726c 2c20 7072 6f78 793d  .get(url, proxy=
+00001880: 7072 6f78 7929 2061 7320 7265 7370 6f6e  proxy) as respon
+00001890: 7365 3a0d 0a20 2020 2020 2020 2069 6620  se:..        if 
+000018a0: 7265 7370 6f6e 7365 2e73 7461 7475 7320  response.status 
+000018b0: 213d 2032 3030 3a0d 0a20 2020 2020 2020  != 200:..       
+000018c0: 2020 2020 2072 6169 7365 2041 7069 4854       raise ApiHT
+000018d0: 5450 4578 6365 7074 696f 6e28 2744 6f77  TPException('Dow
+000018e0: 6e6c 6f61 6420 6669 6c65 272c 2072 6573  nload file', res
+000018f0: 756c 7429 0d0a 2020 2020 2020 2020 7265  ult)..        re
+00001900: 7375 6c74 203d 2061 7761 6974 2072 6573  sult = await res
+00001910: 706f 6e73 652e 7265 6164 2829 0d0a 2020  ponse.read()..  
+00001920: 2020 0d0a 2020 2020 7265 7475 726e 2072    ..    return r
+00001930: 6573 756c 740d 0a0d 0a0d 0a61 7379 6e63  esult......async
+00001940: 2064 6566 2073 6574 5f77 6562 686f 6f6b   def set_webhook
+00001950: 2874 6f6b 656e 2c20 7572 6c3d 4e6f 6e65  (token, url=None
+00001960: 2c20 6365 7274 6966 6963 6174 653d 4e6f  , certificate=No
+00001970: 6e65 2c20 6d61 785f 636f 6e6e 6563 7469  ne, max_connecti
+00001980: 6f6e 733d 4e6f 6e65 2c20 616c 6c6f 7765  ons=None, allowe
+00001990: 645f 7570 6461 7465 733d 4e6f 6e65 2c20  d_updates=None, 
+000019a0: 6970 5f61 6464 7265 7373 3d4e 6f6e 652c  ip_address=None,
+000019b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000019c0: 2020 6472 6f70 5f70 656e 6469 6e67 5f75    drop_pending_u
+000019d0: 7064 6174 6573 203d 204e 6f6e 652c 2074  pdates = None, t
+000019e0: 696d 656f 7574 3d4e 6f6e 652c 2073 6563  imeout=None, sec
+000019f0: 7265 745f 746f 6b65 6e3d 4e6f 6e65 293a  ret_token=None):
+00001a00: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00001a10: 203d 2072 2773 6574 5765 6268 6f6f 6b27   = r'setWebhook'
+00001a20: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+00001a30: 7b0d 0a20 2020 2020 2020 2027 7572 6c27  {..        'url'
+00001a40: 3a20 7572 6c20 6966 2075 726c 2065 6c73  : url if url els
+00001a50: 6520 2222 2c0d 0a20 2020 207d 0d0a 2020  e "",..    }..  
+00001a60: 2020 6669 6c65 7320 3d20 4e6f 6e65 0d0a    files = None..
+00001a70: 2020 2020 6966 2063 6572 7469 6669 6361      if certifica
+00001a80: 7465 3a0d 0a20 2020 2020 2020 2066 696c  te:..        fil
+00001a90: 6573 203d 207b 2763 6572 7469 6669 6361  es = {'certifica
+00001aa0: 7465 273a 2063 6572 7469 6669 6361 7465  te': certificate
+00001ab0: 7d0d 0a20 2020 2069 6620 6d61 785f 636f  }..    if max_co
+00001ac0: 6e6e 6563 7469 6f6e 733a 0d0a 2020 2020  nnections:..    
+00001ad0: 2020 2020 7061 796c 6f61 645b 276d 6178      payload['max
+00001ae0: 5f63 6f6e 6e65 6374 696f 6e73 275d 203d  _connections'] =
+00001af0: 206d 6178 5f63 6f6e 6e65 6374 696f 6e73   max_connections
+00001b00: 0d0a 2020 2020 6966 2061 6c6c 6f77 6564  ..    if allowed
+00001b10: 5f75 7064 6174 6573 2069 7320 6e6f 7420  _updates is not 
+00001b20: 4e6f 6e65 3a20 2020 2020 2020 2320 456d  None:       # Em
+00001b30: 7074 7920 6c69 7374 7320 7368 6f75 6c64  pty lists should
+00001b40: 2070 6173 730d 0a20 2020 2020 2020 2070   pass..        p
+00001b50: 6179 6c6f 6164 5b27 616c 6c6f 7765 645f  ayload['allowed_
+00001b60: 7570 6461 7465 7327 5d20 3d20 6a73 6f6e  updates'] = json
+00001b70: 2e64 756d 7073 2861 6c6c 6f77 6564 5f75  .dumps(allowed_u
+00001b80: 7064 6174 6573 290d 0a20 2020 2069 6620  pdates)..    if 
+00001b90: 6970 5f61 6464 7265 7373 2069 7320 6e6f  ip_address is no
+00001ba0: 7420 4e6f 6e65 3a20 2020 2020 2020 2020  t None:         
+00001bb0: 2020 2023 2045 6d70 7479 2073 7472 696e     # Empty strin
+00001bc0: 6720 7368 6f75 6c64 2070 6173 730d 0a20  g should pass.. 
+00001bd0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00001be0: 6970 5f61 6464 7265 7373 275d 203d 2069  ip_address'] = i
+00001bf0: 705f 6164 6472 6573 730d 0a20 2020 2069  p_address..    i
+00001c00: 6620 6472 6f70 5f70 656e 6469 6e67 5f75  f drop_pending_u
+00001c10: 7064 6174 6573 2069 7320 6e6f 7420 4e6f  pdates is not No
+00001c20: 6e65 3a20 2023 2041 6e79 2062 6f6f 6c20  ne:  # Any bool 
+00001c30: 7661 6c75 6520 7368 6f75 6c64 2070 6173  value should pas
+00001c40: 730d 0a20 2020 2020 2020 2070 6179 6c6f  s..        paylo
+00001c50: 6164 5b27 6472 6f70 5f70 656e 6469 6e67  ad['drop_pending
+00001c60: 5f75 7064 6174 6573 275d 203d 2064 726f  _updates'] = dro
+00001c70: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
+00001c80: 730d 0a20 2020 2069 6620 7469 6d65 6f75  s..    if timeou
+00001c90: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+00001ca0: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
+00001cb0: 2074 696d 656f 7574 0d0a 2020 2020 6966   timeout..    if
+00001cc0: 2073 6563 7265 745f 746f 6b65 6e3a 0d0a   secret_token:..
+00001cd0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00001ce0: 2773 6563 7265 745f 746f 6b65 6e27 5d20  'secret_token'] 
+00001cf0: 3d20 7365 6372 6574 5f74 6f6b 656e 0d0a  = secret_token..
+00001d00: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00001d10: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00001d20: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00001d30: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00001d40: 6f61 642c 2066 696c 6573 3d66 696c 6573  oad, files=files
+00001d50: 290d 0a0d 0a0d 0a61 7379 6e63 2064 6566  )......async def
+00001d60: 2064 656c 6574 655f 7765 6268 6f6f 6b28   delete_webhook(
+00001d70: 746f 6b65 6e2c 2064 726f 705f 7065 6e64  token, drop_pend
+00001d80: 696e 675f 7570 6461 7465 733d 4e6f 6e65  ing_updates=None
+00001d90: 2c20 7469 6d65 6f75 743d 4e6f 6e65 293a  , timeout=None):
+00001da0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00001db0: 203d 2072 2764 656c 6574 6557 6562 686f   = r'deleteWebho
+00001dc0: 6f6b 270d 0a20 2020 2070 6179 6c6f 6164  ok'..    payload
+00001dd0: 203d 207b 7d0d 0a20 2020 2069 6620 6472   = {}..    if dr
+00001de0: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
+00001df0: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a20  es is not None: 
+00001e00: 2023 2041 6e79 2062 6f6f 6c20 7661 6c75   # Any bool valu
+00001e10: 6520 7368 6f75 6c64 2070 6173 730d 0a20  e should pass.. 
+00001e20: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00001e30: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
+00001e40: 6174 6573 275d 203d 2064 726f 705f 7065  ates'] = drop_pe
+00001e50: 6e64 696e 675f 7570 6461 7465 730d 0a20  nding_updates.. 
+00001e60: 2020 2069 6620 7469 6d65 6f75 743a 0d0a     if timeout:..
+00001e70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00001e80: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
+00001e90: 656f 7574 0d0a 2020 2020 7265 7475 726e  eout..    return
+00001ea0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00001eb0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00001ec0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00001ed0: 733d 7061 796c 6f61 6429 0d0a 0d0a 0d0a  s=payload)......
+00001ee0: 6173 796e 6320 6465 6620 6765 745f 7765  async def get_we
+00001ef0: 6268 6f6f 6b5f 696e 666f 2874 6f6b 656e  bhook_info(token
+00001f00: 2c20 7469 6d65 6f75 743d 4e6f 6e65 293a  , timeout=None):
+00001f10: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00001f20: 203d 2072 2767 6574 5765 6268 6f6f 6b49   = r'getWebhookI
+00001f30: 6e66 6f27 0d0a 2020 2020 7061 796c 6f61  nfo'..    payloa
+00001f40: 6420 3d20 7b7d 0d0a 2020 2020 6966 2074  d = {}..    if t
+00001f50: 696d 656f 7574 3a0d 0a20 2020 2020 2020  imeout:..       
+00001f60: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+00001f70: 7427 5d20 3d20 7469 6d65 6f75 740d 0a20  t'] = timeout.. 
+00001f80: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00001f90: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00001fa0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00001fb0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00001fc0: 6164 290d 0a0d 0a0d 0a0d 0a61 7379 6e63  ad)........async
+00001fd0: 2064 6566 2067 6574 5f75 7064 6174 6573   def get_updates
+00001fe0: 2874 6f6b 656e 2c20 6f66 6673 6574 3d4e  (token, offset=N
+00001ff0: 6f6e 652c 206c 696d 6974 3d4e 6f6e 652c  one, limit=None,
+00002000: 0d0a 2020 2020 2020 2020 7469 6d65 6f75  ..        timeou
+00002010: 743d 4e6f 6e65 2c20 616c 6c6f 7765 645f  t=None, allowed_
+00002020: 7570 6461 7465 733d 4e6f 6e65 2c20 7265  updates=None, re
+00002030: 7175 6573 745f 7469 6d65 6f75 743d 4e6f  quest_timeout=No
+00002040: 6e65 293a 0d0a 2020 2020 6d65 7468 6f64  ne):..    method
+00002050: 5f6e 616d 6520 3d20 2767 6574 5570 6461  _name = 'getUpda
+00002060: 7465 7327 0d0a 2020 2020 7061 7261 6d73  tes'..    params
+00002070: 203d 207b 7d0d 0a20 2020 2069 6620 6f66   = {}..    if of
+00002080: 6673 6574 3a0d 0a20 2020 2020 2020 2070  fset:..        p
+00002090: 6172 616d 735b 276f 6666 7365 7427 5d20  arams['offset'] 
+000020a0: 3d20 6f66 6673 6574 0d0a 2020 2020 6966  = offset..    if
+000020b0: 206c 696d 6974 3a0d 0a20 2020 2020 2020   limit:..       
+000020c0: 2070 6172 616d 735b 276c 696d 6974 275d   params['limit']
+000020d0: 203d 206c 696d 6974 0d0a 2020 2020 6966   = limit..    if
+000020e0: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+000020f0: 2020 2070 6172 616d 735b 2774 696d 656f     params['timeo
+00002100: 7574 275d 203d 2074 696d 656f 7574 0d0a  ut'] = timeout..
+00002110: 2020 2020 6966 2061 6c6c 6f77 6564 5f75      if allowed_u
+00002120: 7064 6174 6573 3a0d 0a20 2020 2020 2020  pdates:..       
+00002130: 2070 6172 616d 735b 2761 6c6c 6f77 6564   params['allowed
+00002140: 5f75 7064 6174 6573 275d 203d 2061 6c6c  _updates'] = all
+00002150: 6f77 6564 5f75 7064 6174 6573 0d0a 2020  owed_updates..  
+00002160: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+00002170: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00002180: 746f 6b65 6e2c 206d 6574 686f 645f 6e61  token, method_na
+00002190: 6d65 2c20 7061 7261 6d73 3d70 6172 616d  me, params=param
+000021a0: 732c 2072 6571 7565 7374 5f74 696d 656f  s, request_timeo
+000021b0: 7574 3d72 6571 7565 7374 5f74 696d 656f  ut=request_timeo
+000021c0: 7574 290d 0a0d 0a61 7379 6e63 2064 6566  ut)....async def
+000021d0: 205f 6368 6563 6b5f 7265 7375 6c74 286d   _check_result(m
+000021e0: 6574 686f 645f 6e61 6d65 2c20 7265 7375  ethod_name, resu
+000021f0: 6c74 293a 0d0a 2020 2020 2222 220d 0a20  lt):..    """.. 
+00002200: 2020 2043 6865 636b 7320 7768 6574 6865     Checks whethe
+00002210: 7220 6072 6573 756c 7460 2069 7320 6120  r `result` is a 
+00002220: 7661 6c69 6420 4150 4920 7265 7370 6f6e  valid API respon
+00002230: 7365 2e0d 0a20 2020 2041 2072 6573 756c  se...    A resul
+00002240: 7420 6973 2063 6f6e 7369 6465 7265 6420  t is considered 
+00002250: 696e 7661 6c69 6420 6966 3a0d 0a20 2020  invalid if:..   
+00002260: 2020 2020 202d 2054 6865 2073 6572 7665       - The serve
+00002270: 7220 7265 7475 726e 6564 2061 6e20 4854  r returned an HT
+00002280: 5450 2072 6573 706f 6e73 6520 636f 6465  TP response code
+00002290: 206f 7468 6572 2074 6861 6e20 3230 300d   other than 200.
+000022a0: 0a20 2020 2020 2020 202d 2054 6865 2063  .        - The c
+000022b0: 6f6e 7465 6e74 206f 6620 7468 6520 7265  ontent of the re
+000022c0: 7375 6c74 2069 7320 696e 7661 6c69 6420  sult is invalid 
+000022d0: 4a53 4f4e 2e0d 0a20 2020 2020 2020 202d  JSON...        -
+000022e0: 2054 6865 206d 6574 686f 6420 6361 6c6c   The method call
+000022f0: 2077 6173 2075 6e73 7563 6365 7373 6675   was unsuccessfu
+00002300: 6c20 2854 6865 204a 534f 4e20 276f 6b27  l (The JSON 'ok'
+00002310: 2066 6965 6c64 2065 7175 616c 7320 4661   field equals Fa
+00002320: 6c73 6529 0d0a 0d0a 2020 2020 3a72 6169  lse)....    :rai
+00002330: 7365 7320 4170 6945 7863 6570 7469 6f6e  ses ApiException
+00002340: 3a20 6966 206f 6e65 206f 6620 7468 6520  : if one of the 
+00002350: 6162 6f76 6520 6c69 7374 6564 2063 6173  above listed cas
+00002360: 6573 2069 7320 6170 706c 6963 6162 6c65  es is applicable
+00002370: 0d0a 2020 2020 3a70 6172 616d 206d 6574  ..    :param met
+00002380: 686f 645f 6e61 6d65 3a20 5468 6520 6e61  hod_name: The na
+00002390: 6d65 206f 6620 7468 6520 6d65 7468 6f64  me of the method
+000023a0: 2063 616c 6c65 640d 0a20 2020 203a 7061   called..    :pa
+000023b0: 7261 6d20 7265 7375 6c74 3a20 5468 6520  ram result: The 
+000023c0: 7265 7475 726e 6564 2072 6573 756c 7420  returned result 
+000023d0: 6f66 2074 6865 206d 6574 686f 6420 7265  of the method re
+000023e0: 7175 6573 740d 0a20 2020 203a 7265 7475  quest..    :retu
+000023f0: 726e 3a20 5468 6520 7265 7375 6c74 2070  rn: The result p
+00002400: 6172 7365 6420 746f 2061 204a 534f 4e20  arsed to a JSON 
+00002410: 6469 6374 696f 6e61 7279 2e0d 0a20 2020  dictionary...   
+00002420: 2022 2222 0d0a 2020 2020 7472 793a 0d0a   """..    try:..
+00002430: 2020 2020 2020 2020 7265 7375 6c74 5f6a          result_j
+00002440: 736f 6e20 3d20 6177 6169 7420 7265 7375  son = await resu
+00002450: 6c74 2e6a 736f 6e28 656e 636f 6469 6e67  lt.json(encoding
+00002460: 3d22 7574 662d 3822 290d 0a20 2020 2065  ="utf-8")..    e
+00002470: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
+00002480: 6966 2072 6573 756c 742e 7374 6174 7573  if result.status
+00002490: 5f63 6f64 6520 213d 2032 3030 3a0d 0a20  _code != 200:.. 
+000024a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000024b0: 2041 7069 4854 5450 4578 6365 7074 696f   ApiHTTPExceptio
+000024c0: 6e28 6d65 7468 6f64 5f6e 616d 652c 2072  n(method_name, r
+000024d0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+000024e0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000024f0: 2020 2072 6169 7365 2041 7069 496e 7661     raise ApiInva
+00002500: 6c69 644a 534f 4e45 7863 6570 7469 6f6e  lidJSONException
+00002510: 286d 6574 686f 645f 6e61 6d65 2c20 7265  (method_name, re
+00002520: 7375 6c74 290d 0a20 2020 2065 6c73 653a  sult)..    else:
+00002530: 2020 2020 0d0a 2020 2020 2020 2020 6966      ..        if
+00002540: 206e 6f74 2072 6573 756c 745f 6a73 6f6e   not result_json
+00002550: 5b27 6f6b 275d 3a0d 0a20 2020 2020 2020  ['ok']:..       
+00002560: 2020 2020 2072 6169 7365 2041 7069 5465       raise ApiTe
+00002570: 6c65 6772 616d 4578 6365 7074 696f 6e28  legramException(
+00002580: 6d65 7468 6f64 5f6e 616d 652c 2072 6573  method_name, res
+00002590: 756c 742c 2072 6573 756c 745f 6a73 6f6e  ult, result_json
+000025a0: 290d 0a20 2020 2020 2020 2020 2020 200d  )..            .
+000025b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000025c0: 7265 7375 6c74 5f6a 736f 6e0d 0a0d 0a0d  result_json.....
+000025d0: 0a61 7379 6e63 2064 6566 2073 656e 645f  .async def send_
+000025e0: 6d65 7373 6167 6528 0d0a 2020 2020 2020  message(..      
+000025f0: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
+00002600: 2c20 7465 7874 2c0d 0a20 2020 2020 2020  , text,..       
+00002610: 2064 6973 6162 6c65 5f77 6562 5f70 6167   disable_web_pag
+00002620: 655f 7072 6576 6965 773d 4e6f 6e65 2c20  e_preview=None, 
+00002630: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00002640: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
+00002650: 6d61 726b 7570 3d4e 6f6e 652c 0d0a 2020  markup=None,..  
+00002660: 2020 2020 2020 7061 7273 655f 6d6f 6465        parse_mode
+00002670: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f6e  =None, disable_n
+00002680: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00002690: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c0d  , timeout=None,.
+000026a0: 0a20 2020 2020 2020 2065 6e74 6974 6965  .        entitie
+000026b0: 733d 4e6f 6e65 2c20 616c 6c6f 775f 7365  s=None, allow_se
+000026c0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
+000026d0: 706c 793d 4e6f 6e65 2c20 7072 6f74 6563  ply=None, protec
+000026e0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0d  t_content=None,.
+000026f0: 0a20 2020 2020 2020 206d 6573 7361 6765  .        message
+00002700: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
+00002710: 3a0d 0a20 2020 206d 6574 686f 645f 6e61  :..    method_na
+00002720: 6d65 203d 2027 7365 6e64 4d65 7373 6167  me = 'sendMessag
+00002730: 6527 0d0a 2020 2020 7061 7261 6d73 203d  e'..    params =
+00002740: 207b 2763 6861 745f 6964 273a 2073 7472   {'chat_id': str
+00002750: 2863 6861 745f 6964 292c 2027 7465 7874  (chat_id), 'text
+00002760: 273a 2074 6578 747d 0d0a 2020 2020 6966  ': text}..    if
+00002770: 2064 6973 6162 6c65 5f77 6562 5f70 6167   disable_web_pag
+00002780: 655f 7072 6576 6965 7720 6973 206e 6f74  e_preview is not
+00002790: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000027a0: 7061 7261 6d73 5b27 6469 7361 626c 655f  params['disable_
+000027b0: 7765 625f 7061 6765 5f70 7265 7669 6577  web_page_preview
+000027c0: 275d 203d 2064 6973 6162 6c65 5f77 6562  '] = disable_web
+000027d0: 5f70 6167 655f 7072 6576 6965 770d 0a20  _page_preview.. 
+000027e0: 2020 2069 6620 7265 706c 795f 746f 5f6d     if reply_to_m
+000027f0: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+00002800: 2020 2020 7061 7261 6d73 5b27 7265 706c      params['repl
+00002810: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
+00002820: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
+00002830: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+00002840: 7265 706c 795f 6d61 726b 7570 3a0d 0a20  reply_markup:.. 
+00002850: 2020 2020 2020 2070 6172 616d 735b 2772         params['r
+00002860: 6570 6c79 5f6d 6172 6b75 7027 5d20 3d20  eply_markup'] = 
+00002870: 6177 6169 7420 5f63 6f6e 7665 7274 5f6d  await _convert_m
+00002880: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
+00002890: 7570 290d 0a20 2020 2069 6620 7061 7273  up)..    if pars
+000028a0: 655f 6d6f 6465 3a0d 0a20 2020 2020 2020  e_mode:..       
+000028b0: 2070 6172 616d 735b 2770 6172 7365 5f6d   params['parse_m
+000028c0: 6f64 6527 5d20 3d20 7061 7273 655f 6d6f  ode'] = parse_mo
+000028d0: 6465 0d0a 2020 2020 6966 2064 6973 6162  de..    if disab
+000028e0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
+000028f0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00002900: 2020 2020 2020 7061 7261 6d73 5b27 6469        params['di
+00002910: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00002920: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
+00002930: 6f74 6966 6963 6174 696f 6e0d 0a20 2020  otification..   
+00002940: 2069 6620 7469 6d65 6f75 743a 0d0a 2020   if timeout:..  
+00002950: 2020 2020 2020 7061 7261 6d73 5b27 7469        params['ti
+00002960: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
+00002970: 740d 0a20 2020 2069 6620 656e 7469 7469  t..    if entiti
+00002980: 6573 3a0d 0a20 2020 2020 2020 2070 6172  es:..        par
+00002990: 616d 735b 2765 6e74 6974 6965 7327 5d20  ams['entities'] 
+000029a0: 3d20 6a73 6f6e 2e64 756d 7073 2874 7970  = json.dumps(typ
+000029b0: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
+000029c0: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
+000029d0: 7328 656e 7469 7469 6573 2929 0d0a 2020  s(entities))..  
+000029e0: 2020 6966 2061 6c6c 6f77 5f73 656e 6469    if allow_sendi
+000029f0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00002a00: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00002a10: 2020 2020 2020 2070 6172 616d 735b 2761         params['a
+00002a20: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00002a30: 686f 7574 5f72 6570 6c79 275d 203d 2061  hout_reply'] = a
+00002a40: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00002a50: 686f 7574 5f72 6570 6c79 0d0a 2020 2020  hout_reply..    
+00002a60: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+00002a70: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0d  nt is not None:.
+00002a80: 0a20 2020 2020 2020 2070 6172 616d 735b  .        params[
+00002a90: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
+00002aa0: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
+00002ab0: 7465 6e74 0d0a 2020 2020 6966 206d 6573  tent..    if mes
+00002ac0: 7361 6765 5f74 6872 6561 645f 6964 3a0d  sage_thread_id:.
+00002ad0: 0a20 2020 2020 2020 2070 6172 616d 735b  .        params[
+00002ae0: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+00002af0: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
+00002b00: 6872 6561 645f 6964 0d0a 2020 2020 0d0a  hread_id..    ..
+00002b10: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00002b20: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00002b30: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00002b40: 6e61 6d65 2c20 7061 7261 6d73 3d70 6172  name, params=par
+00002b50: 616d 7329 0d0a 0d0a 2320 6d65 7468 6f64  ams)....# method
+00002b60: 730d 0a0d 0a61 7379 6e63 2064 6566 2067  s....async def g
+00002b70: 6574 5f75 7365 725f 7072 6f66 696c 655f  et_user_profile_
+00002b80: 7068 6f74 6f73 2874 6f6b 656e 2c20 7573  photos(token, us
+00002b90: 6572 5f69 642c 206f 6666 7365 743d 4e6f  er_id, offset=No
+00002ba0: 6e65 2c20 6c69 6d69 743d 4e6f 6e65 293a  ne, limit=None):
+00002bb0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00002bc0: 203d 2072 2767 6574 5573 6572 5072 6f66   = r'getUserProf
+00002bd0: 696c 6550 686f 746f 7327 0d0a 2020 2020  ilePhotos'..    
+00002be0: 7061 796c 6f61 6420 3d20 7b27 7573 6572  payload = {'user
+00002bf0: 5f69 6427 3a20 7573 6572 5f69 647d 0d0a  _id': user_id}..
+00002c00: 2020 2020 6966 206f 6666 7365 743a 0d0a      if offset:..
+00002c10: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00002c20: 276f 6666 7365 7427 5d20 3d20 6f66 6673  'offset'] = offs
+00002c30: 6574 0d0a 2020 2020 6966 206c 696d 6974  et..    if limit
+00002c40: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00002c50: 6164 5b27 6c69 6d69 7427 5d20 3d20 6c69  ad['limit'] = li
+00002c60: 6d69 740d 0a20 2020 2072 6574 7572 6e20  mit..    return 
+00002c70: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00002c80: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00002c90: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00002ca0: 3d70 6179 6c6f 6164 290d 0a0d 0a0d 0a61  =payload)......a
+00002cb0: 7379 6e63 2064 6566 2067 6574 5f63 6861  sync def get_cha
+00002cc0: 7428 746f 6b65 6e2c 2063 6861 745f 6964  t(token, chat_id
+00002cd0: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00002ce0: 726c 203d 2072 2767 6574 4368 6174 270d  rl = r'getChat'.
+00002cf0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00002d00: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00002d10: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+00002d20: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00002d30: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00002d40: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00002d50: 3d70 6179 6c6f 6164 290d 0a0d 0a0d 0a61  =payload)......a
+00002d60: 7379 6e63 2064 6566 206c 6561 7665 5f63  sync def leave_c
+00002d70: 6861 7428 746f 6b65 6e2c 2063 6861 745f  hat(token, chat_
+00002d80: 6964 293a 0d0a 2020 2020 6d65 7468 6f64  id):..    method
+00002d90: 5f75 726c 203d 2072 276c 6561 7665 4368  _url = r'leaveCh
+00002da0: 6174 270d 0a20 2020 2070 6179 6c6f 6164  at'..    payload
+00002db0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00002dc0: 6861 745f 6964 7d0d 0a20 2020 2072 6574  hat_id}..    ret
+00002dd0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00002de0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00002df0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00002e00: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+00002e10: 0a0d 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+00002e20: 5f63 6861 745f 6164 6d69 6e69 7374 7261  _chat_administra
+00002e30: 746f 7273 2874 6f6b 656e 2c20 6368 6174  tors(token, chat
+00002e40: 5f69 6429 3a0d 0a20 2020 206d 6574 686f  _id):..    metho
+00002e50: 645f 7572 6c20 3d20 7227 6765 7443 6861  d_url = r'getCha
+00002e60: 7441 646d 696e 6973 7472 6174 6f72 7327  tAdministrators'
+00002e70: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+00002e80: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+00002e90: 5f69 647d 0d0a 2020 2020 7265 7475 726e  _id}..    return
+00002ea0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00002eb0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00002ec0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00002ed0: 733d 7061 796c 6f61 6429 0d0a 0d0a 0d0a  s=payload)......
+00002ee0: 6173 796e 6320 6465 6620 6765 745f 6368  async def get_ch
+00002ef0: 6174 5f6d 656d 6265 725f 636f 756e 7428  at_member_count(
+00002f00: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
+00002f10: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00002f20: 203d 2072 2767 6574 4368 6174 4d65 6d62   = r'getChatMemb
+00002f30: 6572 436f 756e 7427 0d0a 2020 2020 7061  erCount'..    pa
+00002f40: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00002f50: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+00002f60: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+00002f70: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00002f80: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00002f90: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00002fa0: 6429 0d0a 0d0a 0d0a 6173 796e 6320 6465  d)......async de
+00002fb0: 6620 7365 745f 7374 6963 6b65 725f 7365  f set_sticker_se
+00002fc0: 745f 7468 756d 6228 746f 6b65 6e2c 206e  t_thumb(token, n
+00002fd0: 616d 652c 2075 7365 725f 6964 2c20 7468  ame, user_id, th
+00002fe0: 756d 6229 3a0d 0a20 2020 206d 6574 686f  umb):..    metho
+00002ff0: 645f 7572 6c20 3d20 7227 7365 7453 7469  d_url = r'setSti
+00003000: 636b 6572 5365 7454 6875 6d62 270d 0a20  ckerSetThumb'.. 
+00003010: 2020 2070 6179 6c6f 6164 203d 207b 276e     payload = {'n
+00003020: 616d 6527 3a20 6e61 6d65 2c20 2775 7365  ame': name, 'use
+00003030: 725f 6964 273a 2075 7365 725f 6964 7d0d  r_id': user_id}.
+00003040: 0a20 2020 2066 696c 6573 203d 207b 7d0d  .    files = {}.
+00003050: 0a20 2020 2069 6620 7468 756d 623a 0d0a  .    if thumb:..
+00003060: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00003070: 7369 6e73 7461 6e63 6528 7468 756d 622c  sinstance(thumb,
+00003080: 2073 7472 293a 0d0a 2020 2020 2020 2020   str):..        
+00003090: 2020 2020 6669 6c65 735b 2774 6875 6d62      files['thumb
+000030a0: 275d 203d 2074 6875 6d62 0d0a 2020 2020  '] = thumb..    
+000030b0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000030c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000030d0: 7468 756d 6227 5d20 3d20 7468 756d 620d  thumb'] = thumb.
+000030e0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+000030f0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+00003100: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00003110: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00003120: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+00003130: 7320 6f72 204e 6f6e 6529 0d0a 0d0a 0d0a  s or None)......
+00003140: 6173 796e 6320 6465 6620 7365 745f 6368  async def set_ch
+00003150: 6174 5f73 7469 636b 6572 5f73 6574 2874  at_sticker_set(t
+00003160: 6f6b 656e 2c20 6368 6174 5f69 642c 2073  oken, chat_id, s
+00003170: 7469 636b 6572 5f73 6574 5f6e 616d 6529  ticker_set_name)
+00003180: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+00003190: 6c20 3d20 7227 7365 7443 6861 7453 7469  l = r'setChatSti
+000031a0: 636b 6572 5365 7427 0d0a 2020 2020 7061  ckerSet'..    pa
+000031b0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+000031c0: 6427 3a20 6368 6174 5f69 642c 2027 7374  d': chat_id, 'st
+000031d0: 6963 6b65 725f 7365 745f 6e61 6d65 273a  icker_set_name':
+000031e0: 2073 7469 636b 6572 5f73 6574 5f6e 616d   sticker_set_nam
+000031f0: 657d 0d0a 2020 2020 7265 7475 726e 2061  e}..    return a
+00003200: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+00003210: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00003220: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00003230: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6173  payload)......as
+00003240: 796e 6320 6465 6620 6465 6c65 7465 5f63  ync def delete_c
+00003250: 6861 745f 7374 6963 6b65 725f 7365 7428  hat_sticker_set(
+00003260: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
+00003270: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00003280: 203d 2072 2764 656c 6574 6543 6861 7453   = r'deleteChatS
+00003290: 7469 636b 6572 5365 7427 0d0a 2020 2020  tickerSet'..    
+000032a0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+000032b0: 5f69 6427 3a20 6368 6174 5f69 647d 0d0a  _id': chat_id}..
+000032c0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+000032d0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+000032e0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000032f0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00003300: 6f61 6429 0d0a 0d0a 0d0a 6173 796e 6320  oad)......async 
+00003310: 6465 6620 616e 7377 6572 5f77 6562 5f61  def answer_web_a
+00003320: 7070 5f71 7565 7279 2874 6f6b 656e 2c20  pp_query(token, 
+00003330: 7765 625f 6170 705f 7175 6572 795f 6964  web_app_query_id
+00003340: 2c20 7265 7375 6c74 3a20 7479 7065 732e  , result: types.
+00003350: 496e 6c69 6e65 5175 6572 7952 6573 756c  InlineQueryResul
+00003360: 7442 6173 6529 3a0d 0a20 2020 206d 6574  tBase):..    met
+00003370: 686f 645f 7572 6c20 3d20 2761 6e73 7765  hod_url = 'answe
+00003380: 7257 6562 4170 7051 7565 7279 270d 0a20  rWebAppQuery'.. 
+00003390: 2020 2070 6179 6c6f 6164 203d 207b 2777     payload = {'w
+000033a0: 6562 5f61 7070 5f71 7565 7279 5f69 6427  eb_app_query_id'
+000033b0: 3a20 7765 625f 6170 705f 7175 6572 795f  : web_app_query_
+000033c0: 6964 2c20 2772 6573 756c 7427 3a20 7265  id, 'result': re
+000033d0: 7375 6c74 2e74 6f5f 6a73 6f6e 2829 7d0d  sult.to_json()}.
+000033e0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+000033f0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+00003400: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00003410: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00003420: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+00003430: 7374 2729 0d0a 0d0a 0d0a 6173 796e 6320  st')......async 
+00003440: 6465 6620 6765 745f 6368 6174 5f6d 656d  def get_chat_mem
+00003450: 6265 7228 746f 6b65 6e2c 2063 6861 745f  ber(token, chat_
+00003460: 6964 2c20 7573 6572 5f69 6429 3a0d 0a20  id, user_id):.. 
+00003470: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00003480: 7227 6765 7443 6861 744d 656d 6265 7227  r'getChatMember'
+00003490: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+000034a0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+000034b0: 5f69 642c 2027 7573 6572 5f69 6427 3a20  _id, 'user_id': 
+000034c0: 7573 6572 5f69 647d 0d0a 2020 2020 7265  user_id}..    re
+000034d0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+000034e0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+000034f0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+00003500: 6172 616d 733d 7061 796c 6f61 6429 0d0a  arams=payload)..
+00003510: 0d0a 0d0a 6173 796e 6320 6465 6620 666f  ....async def fo
+00003520: 7277 6172 645f 6d65 7373 6167 6528 0d0a  rward_message(..
+00003530: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
+00003540: 6861 745f 6964 2c20 6672 6f6d 5f63 6861  hat_id, from_cha
+00003550: 745f 6964 2c20 6d65 7373 6167 655f 6964  t_id, message_id
+00003560: 2c0d 0a20 2020 2020 2020 2064 6973 6162  ,..        disab
+00003570: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00003580: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00003590: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
+000035a0: 656e 743d 4e6f 6e65 2c0d 0a20 2020 2020  ent=None,..     
+000035b0: 2020 206d 6573 7361 6765 5f74 6872 6561     message_threa
+000035c0: 645f 6964 3d4e 6f6e 6529 3a0d 0a20 2020  d_id=None):..   
+000035d0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+000035e0: 666f 7277 6172 644d 6573 7361 6765 270d  forwardMessage'.
+000035f0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00003600: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00003610: 6964 2c20 2766 726f 6d5f 6368 6174 5f69  id, 'from_chat_i
+00003620: 6427 3a20 6672 6f6d 5f63 6861 745f 6964  d': from_chat_id
+00003630: 2c20 276d 6573 7361 6765 5f69 6427 3a20  , 'message_id': 
+00003640: 6d65 7373 6167 655f 6964 7d0d 0a20 2020  message_id}..   
+00003650: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00003660: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+00003670: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00003680: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+00003690: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+000036a0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+000036b0: 6174 696f 6e0d 0a20 2020 2069 6620 7469  ation..    if ti
+000036c0: 6d65 6f75 743a 0d0a 2020 2020 2020 2020  meout:..        
+000036d0: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+000036e0: 275d 203d 2074 696d 656f 7574 0d0a 2020  '] = timeout..  
+000036f0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+00003700: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+00003710: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00003720: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
+00003730: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
+00003740: 636f 6e74 656e 740d 0a20 2020 2069 6620  content..    if 
+00003750: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00003760: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+00003770: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
+00003780: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
+00003790: 6765 5f74 6872 6561 645f 6964 0d0a 2020  ge_thread_id..  
+000037a0: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+000037b0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+000037c0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+000037d0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+000037e0: 6429 0d0a 0d0a 0d0a 6173 796e 6320 6465  d)......async de
+000037f0: 6620 636f 7079 5f6d 6573 7361 6765 2874  f copy_message(t
+00003800: 6f6b 656e 2c20 6368 6174 5f69 642c 2066  oken, chat_id, f
+00003810: 726f 6d5f 6368 6174 5f69 642c 206d 6573  rom_chat_id, mes
+00003820: 7361 6765 5f69 642c 2063 6170 7469 6f6e  sage_id, caption
+00003830: 3d4e 6f6e 652c 2070 6172 7365 5f6d 6f64  =None, parse_mod
+00003840: 653d 4e6f 6e65 2c20 6361 7074 696f 6e5f  e=None, caption_
+00003850: 656e 7469 7469 6573 3d4e 6f6e 652c 0d0a  entities=None,..
+00003860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003870: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00003880: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
+00003890: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
+000038a0: 4e6f 6e65 2c20 616c 6c6f 775f 7365 6e64  None, allow_send
+000038b0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+000038c0: 793d 4e6f 6e65 2c0d 0a20 2020 2020 2020  y=None,..       
+000038d0: 2020 2020 2020 2020 2020 7265 706c 795f            reply_
+000038e0: 6d61 726b 7570 3d4e 6f6e 652c 2074 696d  markup=None, tim
+000038f0: 656f 7574 3d4e 6f6e 652c 2070 726f 7465  eout=None, prote
+00003900: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
+00003910: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00003920: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+00003930: 6574 686f 645f 7572 6c20 3d20 7227 636f  ethod_url = r'co
+00003940: 7079 4d65 7373 6167 6527 0d0a 2020 2020  pyMessage'..    
+00003950: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+00003960: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
+00003970: 6672 6f6d 5f63 6861 745f 6964 273a 2066  from_chat_id': f
+00003980: 726f 6d5f 6368 6174 5f69 642c 2027 6d65  rom_chat_id, 'me
+00003990: 7373 6167 655f 6964 273a 206d 6573 7361  ssage_id': messa
+000039a0: 6765 5f69 647d 0d0a 2020 2020 6966 2063  ge_id}..    if c
+000039b0: 6170 7469 6f6e 2069 7320 6e6f 7420 4e6f  aption is not No
+000039c0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+000039d0: 6c6f 6164 5b27 6361 7074 696f 6e27 5d20  load['caption'] 
+000039e0: 3d20 6361 7074 696f 6e0d 0a20 2020 2069  = caption..    i
+000039f0: 6620 7061 7273 655f 6d6f 6465 3a0d 0a20  f parse_mode:.. 
+00003a00: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00003a10: 7061 7273 655f 6d6f 6465 275d 203d 2070  parse_mode'] = p
+00003a20: 6172 7365 5f6d 6f64 650d 0a20 2020 2069  arse_mode..    i
+00003a30: 6620 6361 7074 696f 6e5f 656e 7469 7469  f caption_entiti
+00003a40: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0d  es is not None:.
+00003a50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00003a60: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
+00003a70: 6573 275d 203d 2061 7761 6974 205f 636f  es'] = await _co
+00003a80: 6e76 6572 745f 656e 7469 7465 7328 6361  nvert_entites(ca
+00003a90: 7074 696f 6e5f 656e 7469 7469 6573 290d  ption_entities).
+00003aa0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+00003ab0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+00003ac0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00003ad0: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+00003ae0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00003af0: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
+00003b00: 6966 6963 6174 696f 6e0d 0a20 2020 2069  ification..    i
+00003b10: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
+00003b20: 6765 5f69 643a 0d0a 2020 2020 2020 2020  ge_id:..        
+00003b30: 7061 796c 6f61 645b 2772 6570 6c79 5f74  payload['reply_t
+00003b40: 6f5f 6d65 7373 6167 655f 6964 275d 203d  o_message_id'] =
+00003b50: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
+00003b60: 655f 6964 0d0a 2020 2020 6966 2072 6570  e_id..    if rep
+00003b70: 6c79 5f6d 6172 6b75 7020 6973 206e 6f74  ly_markup is not
+00003b80: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00003b90: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
+00003ba0: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
+00003bb0: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+00003bc0: 7265 706c 795f 6d61 726b 7570 290d 0a20  reply_markup).. 
+00003bd0: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
+00003be0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+00003bf0: 7920 6973 206e 6f74 204e 6f6e 653a 0d0a  y is not None:..
+00003c00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00003c10: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
+00003c20: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
+00003c30: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00003c40: 6974 686f 7574 5f72 6570 6c79 0d0a 2020  ithout_reply..  
+00003c50: 2020 6966 2074 696d 656f 7574 3a0d 0a20    if timeout:.. 
+00003c60: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00003c70: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
+00003c80: 6f75 740d 0a20 2020 2069 6620 7072 6f74  out..    if prot
+00003c90: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
+00003ca0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00003cb0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
+00003cc0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
+00003cd0: 726f 7465 6374 5f63 6f6e 7465 6e74 0d0a  rotect_content..
+00003ce0: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
+00003cf0: 6872 6561 645f 6964 3a0d 0a20 2020 2020  hread_id:..     
+00003d00: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
+00003d10: 6167 655f 7468 7265 6164 5f69 6427 5d20  age_thread_id'] 
+00003d20: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
+00003d30: 5f69 640d 0a20 2020 2072 6574 7572 6e20  _id..    return 
+00003d40: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00003d50: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00003d60: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00003d70: 3d70 6179 6c6f 6164 290d 0a0d 0a0d 0a61  =payload)......a
+00003d80: 7379 6e63 2064 6566 2073 656e 645f 6469  sync def send_di
+00003d90: 6365 280d 0a20 2020 2020 2020 2074 6f6b  ce(..        tok
+00003da0: 656e 2c20 6368 6174 5f69 642c 0d0a 2020  en, chat_id,..  
+00003db0: 2020 2020 2020 656d 6f6a 693d 4e6f 6e65        emoji=None
+00003dc0: 2c20 6469 7361 626c 655f 6e6f 7469 6669  , disable_notifi
+00003dd0: 6361 7469 6f6e 3d4e 6f6e 652c 2072 6570  cation=None, rep
+00003de0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00003df0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00003e00: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00003e10: 652c 2074 696d 656f 7574 3d4e 6f6e 652c  e, timeout=None,
+00003e20: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00003e30: 6974 686f 7574 5f72 6570 6c79 3d4e 6f6e  ithout_reply=Non
+00003e40: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
+00003e50: 6e74 3d4e 6f6e 652c 0d0a 2020 2020 2020  nt=None,..      
+00003e60: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
+00003e70: 5f69 643d 4e6f 6e65 293a 0d0a 2020 2020  _id=None):..    
+00003e80: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+00003e90: 656e 6444 6963 6527 0d0a 2020 2020 7061  endDice'..    pa
+00003ea0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00003eb0: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+00003ec0: 2020 6966 2065 6d6f 6a69 3a0d 0a20 2020    if emoji:..   
+00003ed0: 2020 2020 2070 6179 6c6f 6164 5b27 656d       payload['em
+00003ee0: 6f6a 6927 5d20 3d20 656d 6f6a 690d 0a20  oji'] = emoji.. 
+00003ef0: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
+00003f00: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
+00003f10: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00003f20: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+00003f30: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+00003f40: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00003f50: 6963 6174 696f 6e0d 0a20 2020 2069 6620  ication..    if 
+00003f60: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00003f70: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+00003f80: 796c 6f61 645b 2772 6570 6c79 5f74 6f5f  yload['reply_to_
+00003f90: 6d65 7373 6167 655f 6964 275d 203d 2072  message_id'] = r
+00003fa0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00003fb0: 6964 0d0a 2020 2020 6966 2072 6570 6c79  id..    if reply
+00003fc0: 5f6d 6172 6b75 703a 0d0a 2020 2020 2020  _markup:..      
+00003fd0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+00003fe0: 5f6d 6172 6b75 7027 5d20 3d20 6177 6169  _markup'] = awai
+00003ff0: 7420 5f63 6f6e 7665 7274 5f6d 6172 6b75  t _convert_marku
+00004000: 7028 7265 706c 795f 6d61 726b 7570 290d  p(reply_markup).
+00004010: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00004020: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00004030: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
+00004040: 696d 656f 7574 0d0a 2020 2020 6966 2061  imeout..    if a
+00004050: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00004060: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
+00004070: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00004080: 2070 6179 6c6f 6164 5b27 616c 6c6f 775f   payload['allow_
+00004090: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+000040a0: 7265 706c 7927 5d20 3d20 616c 6c6f 775f  reply'] = allow_
+000040b0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+000040c0: 7265 706c 790d 0a20 2020 2069 6620 7072  reply..    if pr
+000040d0: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
+000040e0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+000040f0: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
+00004100: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
+00004110: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00004120: 0d0a 2020 2020 6966 206d 6573 7361 6765  ..    if message
+00004130: 5f74 6872 6561 645f 6964 3a0d 0a20 2020  _thread_id:..   
+00004140: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00004150: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00004160: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00004170: 6164 5f69 640d 0a20 2020 2072 6574 7572  ad_id..    retur
+00004180: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+00004190: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+000041a0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+000041b0: 6d73 3d70 6179 6c6f 6164 290d 0a0d 0a0d  ms=payload).....
+000041c0: 0a61 7379 6e63 2064 6566 2073 656e 645f  .async def send_
+000041d0: 7068 6f74 6f28 0d0a 2020 2020 2020 2020  photo(..        
+000041e0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+000041f0: 7068 6f74 6f2c 0d0a 2020 2020 2020 2020  photo,..        
+00004200: 6361 7074 696f 6e3d 4e6f 6e65 2c20 7265  caption=None, re
+00004210: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+00004220: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
+00004230: 726b 7570 3d4e 6f6e 652c 0d0a 2020 2020  rkup=None,..    
+00004240: 2020 2020 7061 7273 655f 6d6f 6465 3d4e      parse_mode=N
+00004250: 6f6e 652c 2064 6973 6162 6c65 5f6e 6f74  one, disable_not
+00004260: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c20  ification=None, 
+00004270: 7469 6d65 6f75 743d 4e6f 6e65 2c0d 0a20  timeout=None,.. 
+00004280: 2020 2020 2020 2063 6170 7469 6f6e 5f65         caption_e
+00004290: 6e74 6974 6965 733d 4e6f 6e65 2c20 616c  ntities=None, al
+000042a0: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+000042b0: 6f75 745f 7265 706c 793d 4e6f 6e65 2c20  out_reply=None, 
+000042c0: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
+000042d0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 206d  None,..        m
+000042e0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000042f0: 3d4e 6f6e 652c 2068 6173 5f73 706f 696c  =None, has_spoil
+00004300: 6572 3d4e 6f6e 6529 3a0d 0a20 2020 206d  er=None):..    m
+00004310: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
+00004320: 6e64 5068 6f74 6f27 0d0a 2020 2020 7061  ndPhoto'..    pa
+00004330: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00004340: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+00004350: 2020 6669 6c65 7320 3d20 4e6f 6e65 0d0a    files = None..
+00004360: 2020 2020 6966 2075 7469 6c2e 6973 5f73      if util.is_s
+00004370: 7472 696e 6728 7068 6f74 6f29 3a0d 0a20  tring(photo):.. 
+00004380: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00004390: 7068 6f74 6f27 5d20 3d20 7068 6f74 6f0d  photo'] = photo.
+000043a0: 0a20 2020 2065 6c69 6620 7574 696c 2e69  .    elif util.i
+000043b0: 735f 7069 6c5f 696d 6167 6528 7068 6f74  s_pil_image(phot
+000043c0: 6f29 3a0d 0a20 2020 2020 2020 2066 696c  o):..        fil
+000043d0: 6573 203d 207b 2770 686f 746f 273a 2075  es = {'photo': u
+000043e0: 7469 6c2e 7069 6c5f 696d 6167 655f 746f  til.pil_image_to
+000043f0: 5f66 696c 6528 7068 6f74 6f29 7d0d 0a20  _file(photo)}.. 
+00004400: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00004410: 2020 6669 6c65 7320 3d20 7b27 7068 6f74    files = {'phot
+00004420: 6f27 3a20 7068 6f74 6f7d 0d0a 2020 2020  o': photo}..    
+00004430: 6966 2063 6170 7469 6f6e 3a0d 0a20 2020  if caption:..   
+00004440: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+00004450: 7074 696f 6e27 5d20 3d20 6361 7074 696f  ption'] = captio
+00004460: 6e0d 0a20 2020 2069 6620 7265 706c 795f  n..    if reply_
+00004470: 746f 5f6d 6573 7361 6765 5f69 643a 0d0a  to_message_id:..
+00004480: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00004490: 2772 6570 6c79 5f74 6f5f 6d65 7373 6167  'reply_to_messag
+000044a0: 655f 6964 275d 203d 2072 6570 6c79 5f74  e_id'] = reply_t
+000044b0: 6f5f 6d65 7373 6167 655f 6964 0d0a 2020  o_message_id..  
+000044c0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+000044d0: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+000044e0: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+000044f0: 7027 5d20 3d20 6177 6169 7420 5f63 6f6e  p'] = await _con
+00004500: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+00004510: 795f 6d61 726b 7570 290d 0a20 2020 2069  y_markup)..    i
+00004520: 6620 7061 7273 655f 6d6f 6465 3a0d 0a20  f parse_mode:.. 
+00004530: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00004540: 7061 7273 655f 6d6f 6465 275d 203d 2070  parse_mode'] = p
+00004550: 6172 7365 5f6d 6f64 650d 0a20 2020 2069  arse_mode..    i
+00004560: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
+00004570: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
+00004580: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00004590: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
+000045a0: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
+000045b0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+000045c0: 696f 6e0d 0a20 2020 2069 6620 7469 6d65  ion..    if time
+000045d0: 6f75 743a 0d0a 2020 2020 2020 2020 7061  out:..        pa
+000045e0: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+000045f0: 203d 2074 696d 656f 7574 0d0a 2020 2020   = timeout..    
+00004600: 6966 2063 6170 7469 6f6e 5f65 6e74 6974  if caption_entit
+00004610: 6965 733a 0d0a 2020 2020 2020 2020 7061  ies:..        pa
+00004620: 796c 6f61 645b 2763 6170 7469 6f6e 5f65  yload['caption_e
+00004630: 6e74 6974 6965 7327 5d20 3d20 6a73 6f6e  ntities'] = json
+00004640: 2e64 756d 7073 2874 7970 6573 2e4d 6573  .dumps(types.Mes
+00004650: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
+00004660: 7374 5f6f 665f 6469 6374 7328 6361 7074  st_of_dicts(capt
+00004670: 696f 6e5f 656e 7469 7469 6573 2929 0d0a  ion_entities))..
+00004680: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
+00004690: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+000046a0: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ly is not None:.
 000046b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000046c0: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
-000046d0: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
-000046e0: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
-000046f0: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
-00004700: 5f64 6963 7473 2863 6170 7469 6f6e 5f65  _dicts(caption_e
-00004710: 6e74 6974 6965 7329 290a 2020 2020 6966  ntities)).    if
-00004720: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
-00004730: 6974 686f 7574 5f72 6570 6c79 2069 7320  ithout_reply is 
-00004740: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00004750: 2020 7061 796c 6f61 645b 2761 6c6c 6f77    payload['allow
-00004760: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00004770: 5f72 6570 6c79 275d 203d 2061 6c6c 6f77  _reply'] = allow
-00004780: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00004790: 5f72 6570 6c79 0a20 2020 2069 6620 7072  _reply.    if pr
-000047a0: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
-000047b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000047c0: 2020 2070 6179 6c6f 6164 5b27 7072 6f74     payload['prot
-000047d0: 6563 745f 636f 6e74 656e 7427 5d20 3d20  ect_content'] = 
-000047e0: 7072 6f74 6563 745f 636f 6e74 656e 740a  protect_content.
-000047f0: 2020 2020 6966 206d 6573 7361 6765 5f74      if message_t
-00004800: 6872 6561 645f 6964 2069 7320 6e6f 7420  hread_id is not 
-00004810: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00004820: 796c 6f61 645b 276d 6573 7361 6765 5f74  yload['message_t
-00004830: 6872 6561 645f 6964 275d 203d 206d 6573  hread_id'] = mes
-00004840: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
-00004850: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00004860: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00004870: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00004880: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-00004890: 3d66 696c 6573 2c20 6d65 7468 6f64 3d27  =files, method='
-000048a0: 706f 7374 2729 0a0a 0a64 6566 2073 656e  post')...def sen
-000048b0: 645f 6d65 6469 615f 6772 6f75 7028 0a20  d_media_group(. 
-000048c0: 2020 2020 2020 2074 6f6b 656e 2c20 6368         token, ch
-000048d0: 6174 5f69 642c 206d 6564 6961 2c0a 2020  at_id, media,.  
-000048e0: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
-000048f0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
-00004900: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00004910: 655f 6964 3d4e 6f6e 652c 0a20 2020 2020  e_id=None,.     
-00004920: 2020 2074 696d 656f 7574 3d4e 6f6e 652c     timeout=None,
-00004930: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
-00004940: 6974 686f 7574 5f72 6570 6c79 3d4e 6f6e  ithout_reply=Non
-00004950: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-00004960: 6e74 3d4e 6f6e 652c 206d 6573 7361 6765  nt=None, message
-00004970: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
-00004980: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00004990: 203d 2072 2773 656e 644d 6564 6961 4772   = r'sendMediaGr
-000049a0: 6f75 7027 0a20 2020 206d 6564 6961 5f6a  oup'.    media_j
-000049b0: 736f 6e2c 2066 696c 6573 203d 2063 6f6e  son, files = con
-000049c0: 7665 7274 5f69 6e70 7574 5f6d 6564 6961  vert_input_media
-000049d0: 5f61 7272 6179 286d 6564 6961 290a 2020  _array(media).  
-000049e0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-000049f0: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-00004a00: 2027 6d65 6469 6127 3a20 6d65 6469 615f   'media': media_
-00004a10: 6a73 6f6e 7d0a 2020 2020 6966 2064 6973  json}.    if dis
-00004a20: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00004a30: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00004a40: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00004a50: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00004a60: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00004a70: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00004a80: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
-00004a90: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-00004aa0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-00004ab0: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
-00004ac0: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
-00004ad0: 6167 655f 6964 0a20 2020 2069 6620 7469  age_id.    if ti
-00004ae0: 6d65 6f75 743a 0a20 2020 2020 2020 2070  meout:.        p
-00004af0: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
-00004b00: 5d20 3d20 7469 6d65 6f75 740a 2020 2020  ] = timeout.    
-00004b10: 6966 2061 6c6c 6f77 5f73 656e 6469 6e67  if allow_sending
-00004b20: 5f77 6974 686f 7574 5f72 6570 6c79 2069  _without_reply i
-00004b30: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004b40: 2020 2020 7061 796c 6f61 645b 2761 6c6c      payload['all
-00004b50: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-00004b60: 7574 5f72 6570 6c79 275d 203d 2061 6c6c  ut_reply'] = all
-00004b70: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-00004b80: 7574 5f72 6570 6c79 0a20 2020 2069 6620  ut_reply.    if 
-00004b90: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-00004ba0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004bb0: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
-00004bc0: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
-00004bd0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00004be0: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-00004bf0: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
-00004c00: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00004c10: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-00004c20: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
-00004c30: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00004c40: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
-00004c50: 655f 7265 7175 6573 7428 0a20 2020 2020  e_request(.     
-00004c60: 2020 2074 6f6b 656e 2c20 6d65 7468 6f64     token, method
-00004c70: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00004c80: 6c6f 6164 2c0a 2020 2020 2020 2020 6d65  load,.        me
-00004c90: 7468 6f64 3d27 706f 7374 2720 6966 2066  thod='post' if f
-00004ca0: 696c 6573 2065 6c73 6520 2767 6574 272c  iles else 'get',
-00004cb0: 0a20 2020 2020 2020 2066 696c 6573 3d66  .        files=f
-00004cc0: 696c 6573 2069 6620 6669 6c65 7320 656c  iles if files el
-00004cd0: 7365 204e 6f6e 6529 0a0a 0a64 6566 2073  se None)...def s
-00004ce0: 656e 645f 6c6f 6361 7469 6f6e 280a 2020  end_location(.  
-00004cf0: 2020 2020 2020 746f 6b65 6e2c 2063 6861        token, cha
-00004d00: 745f 6964 2c20 6c61 7469 7475 6465 2c20  t_id, latitude, 
-00004d10: 6c6f 6e67 6974 7564 652c 0a20 2020 2020  longitude,.     
-00004d20: 2020 206c 6976 655f 7065 7269 6f64 3d4e     live_period=N
-00004d30: 6f6e 652c 2072 6570 6c79 5f74 6f5f 6d65  one, reply_to_me
-00004d40: 7373 6167 655f 6964 3d4e 6f6e 652c 200a  ssage_id=None, .
-00004d50: 2020 2020 2020 2020 7265 706c 795f 6d61          reply_ma
-00004d60: 726b 7570 3d4e 6f6e 652c 2064 6973 6162  rkup=None, disab
-00004d70: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00004d80: 4e6f 6e65 2c20 0a20 2020 2020 2020 2074  None, .        t
-00004d90: 696d 656f 7574 3d4e 6f6e 652c 2068 6f72  imeout=None, hor
-00004da0: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
-00004db0: 3d4e 6f6e 652c 2068 6561 6469 6e67 3d4e  =None, heading=N
-00004dc0: 6f6e 652c 0a20 2020 2020 2020 2070 726f  one,.        pro
-00004dd0: 7869 6d69 7479 5f61 6c65 7274 5f72 6164  ximity_alert_rad
-00004de0: 6975 733d 4e6f 6e65 2c20 616c 6c6f 775f  ius=None, allow_
-00004df0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-00004e00: 7265 706c 793d 4e6f 6e65 2c20 7072 6f74  reply=None, prot
-00004e10: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
-00004e20: 2c0a 2020 2020 2020 2020 6d65 7373 6167  ,.        messag
-00004e30: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
-00004e40: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00004e50: 6c20 3d20 7227 7365 6e64 4c6f 6361 7469  l = r'sendLocati
-00004e60: 6f6e 270a 2020 2020 7061 796c 6f61 6420  on'.    payload 
-00004e70: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00004e80: 6174 5f69 642c 2027 6c61 7469 7475 6465  at_id, 'latitude
-00004e90: 273a 206c 6174 6974 7564 652c 2027 6c6f  ': latitude, 'lo
-00004ea0: 6e67 6974 7564 6527 3a20 6c6f 6e67 6974  ngitude': longit
-00004eb0: 7564 657d 0a20 2020 2069 6620 6c69 7665  ude}.    if live
-00004ec0: 5f70 6572 696f 643a 0a20 2020 2020 2020  _period:.       
-00004ed0: 2070 6179 6c6f 6164 5b27 6c69 7665 5f70   payload['live_p
-00004ee0: 6572 696f 6427 5d20 3d20 6c69 7665 5f70  eriod'] = live_p
-00004ef0: 6572 696f 640a 2020 2020 6966 2068 6f72  eriod.    if hor
-00004f00: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
-00004f10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00004f20: 645b 2768 6f72 697a 6f6e 7461 6c5f 6163  d['horizontal_ac
-00004f30: 6375 7261 6379 275d 203d 2068 6f72 697a  curacy'] = horiz
-00004f40: 6f6e 7461 6c5f 6163 6375 7261 6379 0a20  ontal_accuracy. 
-00004f50: 2020 2069 6620 6865 6164 696e 673a 0a20     if heading:. 
-00004f60: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00004f70: 6865 6164 696e 6727 5d20 3d20 6865 6164  heading'] = head
-00004f80: 696e 670a 2020 2020 6966 2070 726f 7869  ing.    if proxi
-00004f90: 6d69 7479 5f61 6c65 7274 5f72 6164 6975  mity_alert_radiu
-00004fa0: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
-00004fb0: 6164 5b27 7072 6f78 696d 6974 795f 616c  ad['proximity_al
-00004fc0: 6572 745f 7261 6469 7573 275d 203d 2070  ert_radius'] = p
-00004fd0: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
-00004fe0: 6164 6975 730a 2020 2020 6966 2072 6570  adius.    if rep
-00004ff0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00005000: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005010: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
-00005020: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
-00005030: 5f74 6f5f 6d65 7373 6167 655f 6964 0a20  _to_message_id. 
-00005040: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
-00005050: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00005060: 7920 6973 206e 6f74 204e 6f6e 653a 0a20  y is not None:. 
-00005070: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005080: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00005090: 7468 6f75 745f 7265 706c 7927 5d20 3d20  thout_reply'] = 
-000050a0: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-000050b0: 7468 6f75 745f 7265 706c 790a 2020 2020  thout_reply.    
-000050c0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-000050d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000050e0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
-000050f0: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
-00005100: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00005110: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-00005120: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
-00005130: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00005140: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
-00005150: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
-00005160: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
-00005170: 6669 6361 7469 6f6e 0a20 2020 2069 6620  fication.    if 
-00005180: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
-00005190: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
-000051a0: 7427 5d20 3d20 7469 6d65 6f75 740a 2020  t'] = timeout.  
-000051b0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
-000051c0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
-000051d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000051e0: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
-000051f0: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
-00005200: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
-00005210: 7373 6167 655f 7468 7265 6164 5f69 6420  ssage_thread_id 
-00005220: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00005230: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-00005240: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
-00005250: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-00005260: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
-00005270: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00005280: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00005290: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000052a0: 290a 0a0a 6465 6620 6564 6974 5f6d 6573  )...def edit_mes
-000052b0: 7361 6765 5f6c 6976 655f 6c6f 6361 7469  sage_live_locati
-000052c0: 6f6e 280a 2020 2020 2020 2020 746f 6b65  on(.        toke
-000052d0: 6e2c 206c 6174 6974 7564 652c 206c 6f6e  n, latitude, lon
-000052e0: 6769 7475 6465 2c20 6368 6174 5f69 643d  gitude, chat_id=
-000052f0: 4e6f 6e65 2c20 6d65 7373 6167 655f 6964  None, message_id
-00005300: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
-00005310: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-00005320: 3d4e 6f6e 652c 2072 6570 6c79 5f6d 6172  =None, reply_mar
-00005330: 6b75 703d 4e6f 6e65 2c20 7469 6d65 6f75  kup=None, timeou
-00005340: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00005350: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
-00005360: 6163 793d 4e6f 6e65 2c20 6865 6164 696e  acy=None, headin
-00005370: 673d 4e6f 6e65 2c20 7072 6f78 696d 6974  g=None, proximit
-00005380: 795f 616c 6572 745f 7261 6469 7573 3d4e  y_alert_radius=N
-00005390: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-000053a0: 5f75 726c 203d 2072 2765 6469 744d 6573  _url = r'editMes
-000053b0: 7361 6765 4c69 7665 4c6f 6361 7469 6f6e  sageLiveLocation
-000053c0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-000053d0: 7b27 6c61 7469 7475 6465 273a 206c 6174  {'latitude': lat
-000053e0: 6974 7564 652c 2027 6c6f 6e67 6974 7564  itude, 'longitud
-000053f0: 6527 3a20 6c6f 6e67 6974 7564 657d 0a20  e': longitude}. 
-00005400: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
-00005410: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005420: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
-00005430: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
-00005440: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-00005450: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-00005460: 6964 275d 203d 206d 6573 7361 6765 5f69  id'] = message_i
-00005470: 640a 2020 2020 6966 2068 6f72 697a 6f6e  d.    if horizon
-00005480: 7461 6c5f 6163 6375 7261 6379 3a0a 2020  tal_accuracy:.  
-00005490: 2020 2020 2020 7061 796c 6f61 645b 2768        payload['h
-000054a0: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
-000054b0: 6379 275d 203d 2068 6f72 697a 6f6e 7461  cy'] = horizonta
-000054c0: 6c5f 6163 6375 7261 6379 0a20 2020 2069  l_accuracy.    i
-000054d0: 6620 6865 6164 696e 673a 0a20 2020 2020  f heading:.     
-000054e0: 2020 2070 6179 6c6f 6164 5b27 6865 6164     payload['head
-000054f0: 696e 6727 5d20 3d20 6865 6164 696e 670a  ing'] = heading.
-00005500: 2020 2020 6966 2070 726f 7869 6d69 7479      if proximity
-00005510: 5f61 6c65 7274 5f72 6164 6975 733a 0a20  _alert_radius:. 
-00005520: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005530: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
-00005540: 7261 6469 7573 275d 203d 2070 726f 7869  radius'] = proxi
-00005550: 6d69 7479 5f61 6c65 7274 5f72 6164 6975  mity_alert_radiu
-00005560: 730a 2020 2020 6966 2069 6e6c 696e 655f  s.    if inline_
-00005570: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-00005580: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
-00005590: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
-000055a0: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
-000055b0: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
-000055c0: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-000055d0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-000055e0: 5f6d 6172 6b75 7027 5d20 3d20 5f63 6f6e  _markup'] = _con
-000055f0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
-00005600: 795f 6d61 726b 7570 290a 2020 2020 6966  y_markup).    if
-00005610: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-00005620: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
-00005630: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
-00005640: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00005650: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00005660: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00005670: 733d 7061 796c 6f61 6429 0a0a 0a64 6566  s=payload)...def
-00005680: 2073 746f 705f 6d65 7373 6167 655f 6c69   stop_message_li
-00005690: 7665 5f6c 6f63 6174 696f 6e28 0a20 2020  ve_location(.   
-000056a0: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
-000056b0: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
-000056c0: 655f 6964 3d4e 6f6e 652c 0a20 2020 2020  e_id=None,.     
-000056d0: 2020 2069 6e6c 696e 655f 6d65 7373 6167     inline_messag
-000056e0: 655f 6964 3d4e 6f6e 652c 2072 6570 6c79  e_id=None, reply
-000056f0: 5f6d 6172 6b75 703d 4e6f 6e65 2c20 7469  _markup=None, ti
-00005700: 6d65 6f75 743d 4e6f 6e65 293a 0a20 2020  meout=None):.   
-00005710: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
-00005720: 7374 6f70 4d65 7373 6167 654c 6976 654c  stopMessageLiveL
-00005730: 6f63 6174 696f 6e27 0a20 2020 2070 6179  ocation'.    pay
-00005740: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-00005750: 2063 6861 745f 6964 3a0a 2020 2020 2020   chat_id:.      
-00005760: 2020 7061 796c 6f61 645b 2763 6861 745f    payload['chat_
-00005770: 6964 275d 203d 2063 6861 745f 6964 0a20  id'] = chat_id. 
-00005780: 2020 2069 6620 6d65 7373 6167 655f 6964     if message_id
-00005790: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000057a0: 645b 276d 6573 7361 6765 5f69 6427 5d20  d['message_id'] 
-000057b0: 3d20 6d65 7373 6167 655f 6964 0a20 2020  = message_id.   
-000057c0: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
-000057d0: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-000057e0: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
-000057f0: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
-00005800: 6c69 6e65 5f6d 6573 7361 6765 5f69 640a  line_message_id.
-00005810: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-00005820: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-00005830: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
-00005840: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
-00005850: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-00005860: 6b75 7029 0a20 2020 2069 6620 7469 6d65  kup).    if time
-00005870: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00005880: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00005890: 3d20 7469 6d65 6f75 740a 2020 2020 7265  = timeout.    re
-000058a0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-000058b0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-000058c0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-000058d0: 6c6f 6164 290a 0a0a 6465 6620 7365 6e64  load)...def send
-000058e0: 5f76 656e 7565 280a 2020 2020 2020 2020  _venue(.        
-000058f0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00005900: 6c61 7469 7475 6465 2c20 6c6f 6e67 6974  latitude, longit
-00005910: 7564 652c 2074 6974 6c65 2c20 6164 6472  ude, title, addr
-00005920: 6573 732c 0a20 2020 2020 2020 2066 6f75  ess,.        fou
-00005930: 7273 7175 6172 655f 6964 3d4e 6f6e 652c  rsquare_id=None,
-00005940: 2066 6f75 7273 7175 6172 655f 7479 7065   foursquare_type
-00005950: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f6e  =None, disable_n
-00005960: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-00005970: 2c0a 2020 2020 2020 2020 7265 706c 795f  ,.        reply_
-00005980: 746f 5f6d 6573 7361 6765 5f69 643d 4e6f  to_message_id=No
-00005990: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
-000059a0: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
-000059b0: 6f6e 652c 0a20 2020 2020 2020 2061 6c6c  one,.        all
-000059c0: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-000059d0: 7574 5f72 6570 6c79 3d4e 6f6e 652c 2067  ut_reply=None, g
-000059e0: 6f6f 676c 655f 706c 6163 655f 6964 3d4e  oogle_place_id=N
-000059f0: 6f6e 652c 0a20 2020 2020 2020 2067 6f6f  one,.        goo
-00005a00: 676c 655f 706c 6163 655f 7479 7065 3d4e  gle_place_type=N
-00005a10: 6f6e 652c 2070 726f 7465 6374 5f63 6f6e  one, protect_con
-00005a20: 7465 6e74 3d4e 6f6e 652c 206d 6573 7361  tent=None, messa
-00005a30: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
-00005a40: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00005a50: 726c 203d 2072 2773 656e 6456 656e 7565  rl = r'sendVenue
-00005a60: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00005a70: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-00005a80: 5f69 642c 2027 6c61 7469 7475 6465 273a  _id, 'latitude':
-00005a90: 206c 6174 6974 7564 652c 2027 6c6f 6e67   latitude, 'long
-00005aa0: 6974 7564 6527 3a20 6c6f 6e67 6974 7564  itude': longitud
-00005ab0: 652c 2027 7469 746c 6527 3a20 7469 746c  e, 'title': titl
-00005ac0: 652c 2027 6164 6472 6573 7327 3a20 6164  e, 'address': ad
-00005ad0: 6472 6573 737d 0a20 2020 2069 6620 666f  dress}.    if fo
-00005ae0: 7572 7371 7561 7265 5f69 643a 0a20 2020  ursquare_id:.   
-00005af0: 2020 2020 2070 6179 6c6f 6164 5b27 666f       payload['fo
-00005b00: 7572 7371 7561 7265 5f69 6427 5d20 3d20  ursquare_id'] = 
-00005b10: 666f 7572 7371 7561 7265 5f69 640a 2020  foursquare_id.  
-00005b20: 2020 6966 2066 6f75 7273 7175 6172 655f    if foursquare_
-00005b30: 7479 7065 3a0a 2020 2020 2020 2020 7061  type:.        pa
-00005b40: 796c 6f61 645b 2766 6f75 7273 7175 6172  yload['foursquar
-00005b50: 655f 7479 7065 275d 203d 2066 6f75 7273  e_type'] = fours
-00005b60: 7175 6172 655f 7479 7065 0a20 2020 2069  quare_type.    i
-00005b70: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-00005b80: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-00005b90: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00005ba0: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
-00005bb0: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-00005bc0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00005bd0: 6f6e 0a20 2020 2069 6620 7265 706c 795f  on.    if reply_
-00005be0: 746f 5f6d 6573 7361 6765 5f69 643a 0a20  to_message_id:. 
-00005bf0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005c00: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00005c10: 5f69 6427 5d20 3d20 7265 706c 795f 746f  _id'] = reply_to
-00005c20: 5f6d 6573 7361 6765 5f69 640a 2020 2020  _message_id.    
-00005c30: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-00005c40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00005c50: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
-00005c60: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
-00005c70: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00005c80: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00005c90: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00005ca0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00005cb0: 6d65 6f75 740a 2020 2020 6966 2061 6c6c  meout.    if all
-00005cc0: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-00005cd0: 7574 5f72 6570 6c79 2069 7320 6e6f 7420  ut_reply is not 
-00005ce0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00005cf0: 796c 6f61 645b 2761 6c6c 6f77 5f73 656e  yload['allow_sen
-00005d00: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00005d10: 6c79 275d 203d 2061 6c6c 6f77 5f73 656e  ly'] = allow_sen
-00005d20: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00005d30: 6c79 0a20 2020 2069 6620 676f 6f67 6c65  ly.    if google
-00005d40: 5f70 6c61 6365 5f69 643a 0a20 2020 2020  _place_id:.     
-00005d50: 2020 2070 6179 6c6f 6164 5b27 676f 6f67     payload['goog
-00005d60: 6c65 5f70 6c61 6365 5f69 6427 5d20 3d20  le_place_id'] = 
-00005d70: 676f 6f67 6c65 5f70 6c61 6365 5f69 640a  google_place_id.
-00005d80: 2020 2020 6966 2067 6f6f 676c 655f 706c      if google_pl
-00005d90: 6163 655f 7479 7065 3a0a 2020 2020 2020  ace_type:.      
-00005da0: 2020 7061 796c 6f61 645b 2767 6f6f 676c    payload['googl
-00005db0: 655f 706c 6163 655f 7479 7065 275d 203d  e_place_type'] =
-00005dc0: 2067 6f6f 676c 655f 706c 6163 655f 7479   google_place_ty
-00005dd0: 7065 0a20 2020 2069 6620 7072 6f74 6563  pe.    if protec
-00005de0: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
-00005df0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00005e00: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
-00005e10: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
-00005e20: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
-00005e30: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-00005e40: 645f 6964 2069 7320 6e6f 7420 4e6f 6e65  d_id is not None
-00005e50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005e60: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-00005e70: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-00005e80: 5f74 6872 6561 645f 6964 0a20 2020 2072  _thread_id.    r
-00005e90: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-00005ea0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00005eb0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00005ec0: 796c 6f61 6429 0a0a 0a64 6566 2073 656e  yload)...def sen
-00005ed0: 645f 636f 6e74 6163 7428 0a20 2020 2020  d_contact(.     
-00005ee0: 2020 2074 6f6b 656e 2c20 6368 6174 5f69     token, chat_i
-00005ef0: 642c 2070 686f 6e65 5f6e 756d 6265 722c  d, phone_number,
-00005f00: 2066 6972 7374 5f6e 616d 652c 206c 6173   first_name, las
-00005f10: 745f 6e61 6d65 3d4e 6f6e 652c 2076 6361  t_name=None, vca
-00005f20: 7264 3d4e 6f6e 652c 0a20 2020 2020 2020  rd=None,.       
-00005f30: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00005f40: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
-00005f50: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
-00005f60: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
-00005f70: 7570 3d4e 6f6e 652c 2074 696d 656f 7574  up=None, timeout
-00005f80: 3d4e 6f6e 652c 0a20 2020 2020 2020 2061  =None,.        a
-00005f90: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00005fa0: 686f 7574 5f72 6570 6c79 3d4e 6f6e 652c  hout_reply=None,
-00005fb0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00005fc0: 3d4e 6f6e 652c 206d 6573 7361 6765 5f74  =None, message_t
-00005fd0: 6872 6561 645f 6964 3d4e 6f6e 6529 3a0a  hread_id=None):.
-00005fe0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00005ff0: 2072 2773 656e 6443 6f6e 7461 6374 270a   r'sendContact'.
-00006000: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00006010: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-00006020: 642c 2027 7068 6f6e 655f 6e75 6d62 6572  d, 'phone_number
-00006030: 273a 2070 686f 6e65 5f6e 756d 6265 722c  ': phone_number,
-00006040: 2027 6669 7273 745f 6e61 6d65 273a 2066   'first_name': f
-00006050: 6972 7374 5f6e 616d 657d 0a20 2020 2069  irst_name}.    i
-00006060: 6620 6c61 7374 5f6e 616d 653a 0a20 2020  f last_name:.   
-00006070: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
-00006080: 7374 5f6e 616d 6527 5d20 3d20 6c61 7374  st_name'] = last
-00006090: 5f6e 616d 650a 2020 2020 6966 2076 6361  _name.    if vca
-000060a0: 7264 3a0a 2020 2020 2020 2020 7061 796c  rd:.        payl
-000060b0: 6f61 645b 2776 6361 7264 275d 203d 2076  oad['vcard'] = v
-000060c0: 6361 7264 0a20 2020 2069 6620 6469 7361  card.    if disa
-000060d0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-000060e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000060f0: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
-00006100: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00006110: 696f 6e27 5d20 3d20 6469 7361 626c 655f  ion'] = disable_
-00006120: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
-00006130: 2069 6620 7265 706c 795f 746f 5f6d 6573   if reply_to_mes
-00006140: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
-00006150: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-00006160: 746f 5f6d 6573 7361 6765 5f69 6427 5d20  to_message_id'] 
-00006170: 3d20 7265 706c 795f 746f 5f6d 6573 7361  = reply_to_messa
-00006180: 6765 5f69 640a 2020 2020 6966 2072 6570  ge_id.    if rep
-00006190: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-000061a0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-000061b0: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
-000061c0: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-000061d0: 6c79 5f6d 6172 6b75 7029 0a20 2020 2069  ly_markup).    i
-000061e0: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-000061f0: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
-00006200: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
-00006210: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
-00006220: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00006230: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ly is not None:.
-00006240: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00006250: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
-00006260: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
-00006270: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
-00006280: 6974 686f 7574 5f72 6570 6c79 0a20 2020  ithout_reply.   
-00006290: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
-000062a0: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-000062b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000062c0: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
-000062d0: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
-000062e0: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
-000062f0: 7361 6765 5f74 6872 6561 645f 6964 2069  sage_thread_id i
-00006300: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00006310: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
-00006320: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
-00006330: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00006340: 645f 6964 0a0a 2020 2020 7265 7475 726e  d_id..    return
-00006350: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00006360: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00006370: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00006380: 290a 0a0a 6465 6620 7365 6e64 5f63 6861  )...def send_cha
-00006390: 745f 6163 7469 6f6e 2874 6f6b 656e 2c20  t_action(token, 
-000063a0: 6368 6174 5f69 642c 2061 6374 696f 6e2c  chat_id, action,
-000063b0: 2074 696d 656f 7574 3d4e 6f6e 6529 3a0a   timeout=None):.
-000063c0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000063d0: 2072 2773 656e 6443 6861 7441 6374 696f   r'sendChatActio
-000063e0: 6e27 0a20 2020 2070 6179 6c6f 6164 203d  n'.    payload =
-000063f0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-00006400: 745f 6964 2c20 2761 6374 696f 6e27 3a20  t_id, 'action': 
-00006410: 6163 7469 6f6e 7d0a 2020 2020 6966 2074  action}.    if t
-00006420: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-00006430: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
-00006440: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
-00006450: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-00006460: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00006470: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00006480: 7061 796c 6f61 6429 0a0a 0a64 6566 2073  payload)...def s
-00006490: 656e 645f 7669 6465 6f28 746f 6b65 6e2c  end_video(token,
-000064a0: 2063 6861 745f 6964 2c20 6461 7461 2c20   chat_id, data, 
-000064b0: 6475 7261 7469 6f6e 3d4e 6f6e 652c 2063  duration=None, c
-000064c0: 6170 7469 6f6e 3d4e 6f6e 652c 2072 6570  aption=None, rep
-000064d0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-000064e0: 3d4e 6f6e 652c 2072 6570 6c79 5f6d 6172  =None, reply_mar
-000064f0: 6b75 703d 4e6f 6e65 2c0a 2020 2020 2020  kup=None,.      
-00006500: 2020 2020 2020 2020 2070 6172 7365 5f6d           parse_m
-00006510: 6f64 653d 4e6f 6e65 2c20 7375 7070 6f72  ode=None, suppor
-00006520: 7473 5f73 7472 6561 6d69 6e67 3d4e 6f6e  ts_streaming=Non
-00006530: 652c 2064 6973 6162 6c65 5f6e 6f74 6966  e, disable_notif
-00006540: 6963 6174 696f 6e3d 4e6f 6e65 2c20 7469  ication=None, ti
-00006550: 6d65 6f75 743d 4e6f 6e65 2c20 0a20 2020  meout=None, .   
-00006560: 2020 2020 2020 2020 2020 2020 7468 756d              thum
-00006570: 623d 4e6f 6e65 2c20 7769 6474 683d 4e6f  b=None, width=No
-00006580: 6e65 2c20 6865 6967 6874 3d4e 6f6e 652c  ne, height=None,
-00006590: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
-000065a0: 733d 4e6f 6e65 2c20 616c 6c6f 775f 7365  s=None, allow_se
-000065b0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-000065c0: 706c 793d 4e6f 6e65 2c20 7072 6f74 6563  ply=None, protec
-000065d0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c0a  t_content=None,.
-000065e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000065f0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00006600: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-00006610: 6f64 5f75 726c 203d 2072 2773 656e 6456  od_url = r'sendV
-00006620: 6964 656f 270a 2020 2020 7061 796c 6f61  ideo'.    payloa
-00006630: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00006640: 6368 6174 5f69 647d 0a20 2020 2066 696c  chat_id}.    fil
-00006650: 6573 203d 204e 6f6e 650a 2020 2020 6966  es = None.    if
-00006660: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
-00006670: 696e 6728 6461 7461 293a 0a20 2020 2020  ing(data):.     
-00006680: 2020 2066 696c 6573 203d 207b 2776 6964     files = {'vid
-00006690: 656f 273a 2064 6174 617d 0a20 2020 2065  eo': data}.    e
-000066a0: 6c73 653a 0a20 2020 2020 2020 2070 6179  lse:.        pay
-000066b0: 6c6f 6164 5b27 7669 6465 6f27 5d20 3d20  load['video'] = 
-000066c0: 6461 7461 0a20 2020 2069 6620 6475 7261  data.    if dura
-000066d0: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-000066e0: 796c 6f61 645b 2764 7572 6174 696f 6e27  yload['duration'
-000066f0: 5d20 3d20 6475 7261 7469 6f6e 0a20 2020  ] = duration.   
-00006700: 2069 6620 6361 7074 696f 6e3a 0a20 2020   if caption:.   
-00006710: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
-00006720: 7074 696f 6e27 5d20 3d20 6361 7074 696f  ption'] = captio
-00006730: 6e0a 2020 2020 6966 2072 6570 6c79 5f74  n.    if reply_t
-00006740: 6f5f 6d65 7373 6167 655f 6964 3a0a 2020  o_message_id:.  
-00006750: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
-00006760: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00006770: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
-00006780: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-00006790: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-000067a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000067b0: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-000067c0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
-000067d0: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-000067e0: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
-000067f0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00006800: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
-00006810: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
-00006820: 2020 6966 2073 7570 706f 7274 735f 7374    if supports_st
-00006830: 7265 616d 696e 6720 6973 206e 6f74 204e  reaming is not N
-00006840: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00006850: 6c6f 6164 5b27 7375 7070 6f72 7473 5f73  load['supports_s
-00006860: 7472 6561 6d69 6e67 275d 203d 2073 7570  treaming'] = sup
-00006870: 706f 7274 735f 7374 7265 616d 696e 670a  ports_streaming.
-00006880: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
-00006890: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
-000068a0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000068b0: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
-000068c0: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
-000068d0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
-000068e0: 6963 6174 696f 6e0a 2020 2020 6966 2074  ication.    if t
-000068f0: 696d 656f 7574 3a0a 2020 2020 2020 2020  imeout:.        
-00006900: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
-00006910: 275d 203d 2074 696d 656f 7574 0a20 2020  '] = timeout.   
-00006920: 2069 6620 7468 756d 623a 0a20 2020 2020   if thumb:.     
-00006930: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
-00006940: 735f 7374 7269 6e67 2874 6875 6d62 293a  s_string(thumb):
-00006950: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00006960: 6669 6c65 733a 0a20 2020 2020 2020 2020  files:.         
-00006970: 2020 2020 2020 2066 696c 6573 5b27 7468         files['th
-00006980: 756d 6227 5d20 3d20 7468 756d 620a 2020  umb'] = thumb.  
-00006990: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000069a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000069b0: 6669 6c65 7320 3d20 7b27 7468 756d 6227  files = {'thumb'
-000069c0: 3a20 7468 756d 627d 0a20 2020 2020 2020  : thumb}.       
-000069d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000069e0: 2020 2070 6179 6c6f 6164 5b27 7468 756d     payload['thum
-000069f0: 6227 5d20 3d20 7468 756d 620a 2020 2020  b'] = thumb.    
-00006a00: 6966 2077 6964 7468 3a0a 2020 2020 2020  if width:.      
-00006a10: 2020 7061 796c 6f61 645b 2777 6964 7468    payload['width
-00006a20: 275d 203d 2077 6964 7468 0a20 2020 2069  '] = width.    i
-00006a30: 6620 6865 6967 6874 3a0a 2020 2020 2020  f height:.      
-00006a40: 2020 7061 796c 6f61 645b 2768 6569 6768    payload['heigh
-00006a50: 7427 5d20 3d20 6865 6967 6874 0a20 2020  t'] = height.   
-00006a60: 2069 6620 6361 7074 696f 6e5f 656e 7469   if caption_enti
-00006a70: 7469 6573 3a0a 2020 2020 2020 2020 7061  ties:.        pa
-00006a80: 796c 6f61 645b 2763 6170 7469 6f6e 5f65  yload['caption_e
-00006a90: 6e74 6974 6965 7327 5d20 3d20 6a73 6f6e  ntities'] = json
-00006aa0: 2e64 756d 7073 2874 7970 6573 2e4d 6573  .dumps(types.Mes
-00006ab0: 7361 6765 456e 7469 7479 2e74 6f5f 6c69  sageEntity.to_li
-00006ac0: 7374 5f6f 665f 6469 6374 7328 6361 7074  st_of_dicts(capt
-00006ad0: 696f 6e5f 656e 7469 7469 6573 2929 0a20  ion_entities)). 
-00006ae0: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
-00006af0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00006b00: 7920 6973 206e 6f74 204e 6f6e 653a 0a20  y is not None:. 
-00006b10: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006b20: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00006b30: 7468 6f75 745f 7265 706c 7927 5d20 3d20  thout_reply'] = 
-00006b40: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00006b50: 7468 6f75 745f 7265 706c 790a 2020 2020  thout_reply.    
-00006b60: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-00006b70: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-00006b80: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00006b90: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
-00006ba0: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
-00006bb0: 7465 6e74 0a20 2020 2069 6620 6d65 7373  tent.    if mess
-00006bc0: 6167 655f 7468 7265 6164 5f69 643a 0a20  age_thread_id:. 
-00006bd0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006be0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00006bf0: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
-00006c00: 7265 6164 5f69 640a 2020 2020 7265 7475  read_id.    retu
-00006c10: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
-00006c20: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00006c30: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00006c40: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
-00006c50: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00006c60: 0a0a 6465 6620 7365 6e64 5f61 6e69 6d61  ..def send_anima
-00006c70: 7469 6f6e 280a 2020 2020 2020 2020 746f  tion(.        to
-00006c80: 6b65 6e2c 2063 6861 745f 6964 2c20 6461  ken, chat_id, da
-00006c90: 7461 2c20 6475 7261 7469 6f6e 3d4e 6f6e  ta, duration=Non
-00006ca0: 652c 2063 6170 7469 6f6e 3d4e 6f6e 652c  e, caption=None,
-00006cb0: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00006cc0: 655f 6964 3d4e 6f6e 652c 2072 6570 6c79  e_id=None, reply
-00006cd0: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
-00006ce0: 2020 2020 2020 7061 7273 655f 6d6f 6465        parse_mode
-00006cf0: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f6e  =None, disable_n
-00006d00: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
-00006d10: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c20  , timeout=None, 
-00006d20: 7468 756d 623d 4e6f 6e65 2c20 6361 7074  thumb=None, capt
-00006d30: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
-00006d40: 652c 0a20 2020 2020 2020 2061 6c6c 6f77  e,.        allow
-00006d50: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00006d60: 5f72 6570 6c79 3d4e 6f6e 652c 2070 726f  _reply=None, pro
-00006d70: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-00006d80: 652c 2077 6964 7468 3d4e 6f6e 652c 2068  e, width=None, h
-00006d90: 6569 6768 743d 4e6f 6e65 2c20 6d65 7373  eight=None, mess
-00006da0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00006db0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00006dc0: 7572 6c20 3d20 7227 7365 6e64 416e 696d  url = r'sendAnim
-00006dd0: 6174 696f 6e27 0a20 2020 2070 6179 6c6f  ation'.    paylo
-00006de0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00006df0: 2063 6861 745f 6964 7d0a 2020 2020 6669   chat_id}.    fi
-00006e00: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-00006e10: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00006e20: 7269 6e67 2864 6174 6129 3a0a 2020 2020  ring(data):.    
-00006e30: 2020 2020 6669 6c65 7320 3d20 7b27 616e      files = {'an
-00006e40: 696d 6174 696f 6e27 3a20 6461 7461 7d0a  imation': data}.
-00006e50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00006e60: 2020 7061 796c 6f61 645b 2761 6e69 6d61    payload['anima
-00006e70: 7469 6f6e 275d 203d 2064 6174 610a 2020  tion'] = data.  
-00006e80: 2020 6966 2064 7572 6174 696f 6e3a 0a20    if duration:. 
-00006e90: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006ea0: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
-00006eb0: 6174 696f 6e0a 2020 2020 6966 2063 6170  ation.    if cap
-00006ec0: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-00006ed0: 796c 6f61 645b 2763 6170 7469 6f6e 275d  yload['caption']
-00006ee0: 203d 2063 6170 7469 6f6e 0a20 2020 2069   = caption.    i
-00006ef0: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
-00006f00: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-00006f10: 6179 6c6f 6164 5b27 7265 706c 795f 746f  ayload['reply_to
-00006f20: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
-00006f30: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00006f40: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
-00006f50: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
-00006f60: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-00006f70: 6d61 726b 7570 275d 203d 205f 636f 6e76  markup'] = _conv
-00006f80: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-00006f90: 5f6d 6172 6b75 7029 0a20 2020 2069 6620  _markup).    if 
-00006fa0: 7061 7273 655f 6d6f 6465 3a0a 2020 2020  parse_mode:.    
-00006fb0: 2020 2020 7061 796c 6f61 645b 2770 6172      payload['par
-00006fc0: 7365 5f6d 6f64 6527 5d20 3d20 7061 7273  se_mode'] = pars
-00006fd0: 655f 6d6f 6465 0a20 2020 2069 6620 6469  e_mode.    if di
-00006fe0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00006ff0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-00007000: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00007010: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
-00007020: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
-00007030: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
-00007040: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-00007050: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00007060: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
-00007070: 6f75 740a 2020 2020 6966 2074 6875 6d62  out.    if thumb
-00007080: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00007090: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
-000070a0: 7468 756d 6229 3a0a 2020 2020 2020 2020  thumb):.        
-000070b0: 2020 2020 6966 2066 696c 6573 3a0a 2020      if files:.  
-000070c0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-000070d0: 6c65 735b 2774 6875 6d62 275d 203d 2074  les['thumb'] = t
-000070e0: 6875 6d62 0a20 2020 2020 2020 2020 2020  humb.           
-000070f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00007100: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00007110: 2774 6875 6d62 273a 2074 6875 6d62 7d0a  'thumb': thumb}.
-00007120: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00007130: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
-00007140: 645b 2774 6875 6d62 275d 203d 2074 6875  d['thumb'] = thu
-00007150: 6d62 0a20 2020 2069 6620 6361 7074 696f  mb.    if captio
-00007160: 6e5f 656e 7469 7469 6573 3a0a 2020 2020  n_entities:.    
-00007170: 2020 2020 7061 796c 6f61 645b 2763 6170      payload['cap
-00007180: 7469 6f6e 5f65 6e74 6974 6965 7327 5d20  tion_entities'] 
-00007190: 3d20 6a73 6f6e 2e64 756d 7073 2874 7970  = json.dumps(typ
-000071a0: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
-000071b0: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
-000071c0: 7328 6361 7074 696f 6e5f 656e 7469 7469  s(caption_entiti
-000071d0: 6573 2929 0a20 2020 2069 6620 616c 6c6f  es)).    if allo
-000071e0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-000071f0: 745f 7265 706c 7920 6973 206e 6f74 204e  t_reply is not N
-00007200: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00007210: 6c6f 6164 5b27 616c 6c6f 775f 7365 6e64  load['allow_send
-00007220: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00007230: 7927 5d20 3d20 616c 6c6f 775f 7365 6e64  y'] = allow_send
-00007240: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00007250: 790a 2020 2020 6966 2070 726f 7465 6374  y.    if protect
-00007260: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
-00007270: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00007280: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
-00007290: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
-000072a0: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
-000072b0: 6620 7769 6474 683a 0a20 2020 2020 2020  f width:.       
-000072c0: 2070 6179 6c6f 6164 5b27 7769 6474 6827   payload['width'
-000072d0: 5d20 3d20 7769 6474 680a 2020 2020 6966  ] = width.    if
-000072e0: 2068 6569 6768 743a 0a20 2020 2020 2020   height:.       
-000072f0: 2070 6179 6c6f 6164 5b27 6865 6967 6874   payload['height
-00007300: 275d 203d 2068 6569 6768 740a 2020 2020  '] = height.    
-00007310: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-00007320: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
-00007330: 796c 6f61 645b 276d 6573 7361 6765 5f74  yload['message_t
-00007340: 6872 6561 645f 6964 275d 203d 206d 6573  hread_id'] = mes
-00007350: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
-00007360: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-00007370: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00007380: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00007390: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-000073a0: 3d66 696c 6573 2c20 6d65 7468 6f64 3d27  =files, method='
-000073b0: 706f 7374 2729 0a0a 0a64 6566 2073 656e  post')...def sen
-000073c0: 645f 766f 6963 6528 746f 6b65 6e2c 2063  d_voice(token, c
-000073d0: 6861 745f 6964 2c20 766f 6963 652c 2063  hat_id, voice, c
-000073e0: 6170 7469 6f6e 3d4e 6f6e 652c 2064 7572  aption=None, dur
-000073f0: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
-00007400: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
-00007410: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
-00007420: 7570 3d4e 6f6e 652c 0a20 2020 2020 2020  up=None,.       
-00007430: 2020 2020 2020 2020 7061 7273 655f 6d6f          parse_mo
-00007440: 6465 3d4e 6f6e 652c 2064 6973 6162 6c65  de=None, disable
-00007450: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
-00007460: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
-00007470: 2c20 6361 7074 696f 6e5f 656e 7469 7469  , caption_entiti
-00007480: 6573 3d4e 6f6e 652c 0a20 2020 2020 2020  es=None,.       
-00007490: 2020 2020 2020 2020 616c 6c6f 775f 7365          allow_se
-000074a0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-000074b0: 706c 793d 4e6f 6e65 2c20 7072 6f74 6563  ply=None, protec
-000074c0: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-000074d0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-000074e0: 643d 4e6f 6e65 293a 0a20 2020 206d 6574  d=None):.    met
-000074f0: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
-00007500: 566f 6963 6527 0a20 2020 2070 6179 6c6f  Voice'.    paylo
-00007510: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00007520: 2063 6861 745f 6964 7d0a 2020 2020 6669   chat_id}.    fi
-00007530: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-00007540: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00007550: 7269 6e67 2876 6f69 6365 293a 0a20 2020  ring(voice):.   
-00007560: 2020 2020 2066 696c 6573 203d 207b 2776       files = {'v
-00007570: 6f69 6365 273a 2076 6f69 6365 7d0a 2020  oice': voice}.  
-00007580: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00007590: 7061 796c 6f61 645b 2776 6f69 6365 275d  payload['voice']
-000075a0: 203d 2076 6f69 6365 0a20 2020 2069 6620   = voice.    if 
-000075b0: 6361 7074 696f 6e3a 0a20 2020 2020 2020  caption:.       
-000075c0: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
-000075d0: 6e27 5d20 3d20 6361 7074 696f 6e0a 2020  n'] = caption.  
-000075e0: 2020 6966 2064 7572 6174 696f 6e3a 0a20    if duration:. 
-000075f0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00007600: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
-00007610: 6174 696f 6e0a 2020 2020 6966 2072 6570  ation.    if rep
-00007620: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00007630: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007640: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
-00007650: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
-00007660: 5f74 6f5f 6d65 7373 6167 655f 6964 0a20  _to_message_id. 
-00007670: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-00007680: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-00007690: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
-000076a0: 7027 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p'] = _convert_m
-000076b0: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
-000076c0: 7570 290a 2020 2020 6966 2070 6172 7365  up).    if parse
-000076d0: 5f6d 6f64 653a 0a20 2020 2020 2020 2070  _mode:.        p
-000076e0: 6179 6c6f 6164 5b27 7061 7273 655f 6d6f  ayload['parse_mo
-000076f0: 6465 275d 203d 2070 6172 7365 5f6d 6f64  de'] = parse_mod
-00007700: 650a 2020 2020 6966 2064 6973 6162 6c65  e.    if disable
-00007710: 5f6e 6f74 6966 6963 6174 696f 6e20 6973  _notification is
-00007720: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00007730: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
-00007740: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00007750: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
-00007760: 6966 6963 6174 696f 6e0a 2020 2020 6966  ification.    if
-00007770: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-00007780: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
-00007790: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
-000077a0: 2020 2069 6620 6361 7074 696f 6e5f 656e     if caption_en
-000077b0: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-000077c0: 7061 796c 6f61 645b 2763 6170 7469 6f6e  payload['caption
-000077d0: 5f65 6e74 6974 6965 7327 5d20 3d20 6a73  _entities'] = js
-000077e0: 6f6e 2e64 756d 7073 2874 7970 6573 2e4d  on.dumps(types.M
-000077f0: 6573 7361 6765 456e 7469 7479 2e74 6f5f  essageEntity.to_
-00007800: 6c69 7374 5f6f 665f 6469 6374 7328 6361  list_of_dicts(ca
-00007810: 7074 696f 6e5f 656e 7469 7469 6573 2929  ption_entities))
-00007820: 0a20 2020 2069 6620 616c 6c6f 775f 7365  .    if allow_se
-00007830: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-00007840: 706c 7920 6973 206e 6f74 204e 6f6e 653a  ply is not None:
-00007850: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007860: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
-00007870: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
-00007880: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
-00007890: 7769 7468 6f75 745f 7265 706c 790a 2020  without_reply.  
-000078a0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
-000078b0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
-000078c0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000078d0: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
-000078e0: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
-000078f0: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
-00007900: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
-00007910: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007920: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
-00007930: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
-00007940: 7468 7265 6164 5f69 640a 2020 2020 7265  thread_id.    re
-00007950: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00007960: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00007970: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00007980: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00007990: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
-000079a0: 290a 0a0a 6465 6620 7365 6e64 5f76 6964  )...def send_vid
-000079b0: 656f 5f6e 6f74 6528 746f 6b65 6e2c 2063  eo_note(token, c
-000079c0: 6861 745f 6964 2c20 6461 7461 2c20 6475  hat_id, data, du
-000079d0: 7261 7469 6f6e 3d4e 6f6e 652c 206c 656e  ration=None, len
-000079e0: 6774 683d 4e6f 6e65 2c20 7265 706c 795f  gth=None, reply_
-000079f0: 746f 5f6d 6573 7361 6765 5f69 643d 4e6f  to_message_id=No
-00007a00: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
-00007a10: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
-00007a20: 2020 2020 2020 2020 2020 2064 6973 6162             disab
-00007a30: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00007a40: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00007a50: 6e65 2c20 7468 756d 623d 4e6f 6e65 2c20  ne, thumb=None, 
-00007a60: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00007a70: 7468 6f75 745f 7265 706c 793d 4e6f 6e65  thout_reply=None
-00007a80: 2c20 7072 6f74 6563 745f 636f 6e74 656e  , protect_conten
-00007a90: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00007aa0: 2020 2020 2020 2020 2020 2020 6d65 7373              mess
-00007ab0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00007ac0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00007ad0: 7572 6c20 3d20 7227 7365 6e64 5669 6465  url = r'sendVide
-00007ae0: 6f4e 6f74 6527 0a20 2020 2070 6179 6c6f  oNote'.    paylo
-00007af0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00007b00: 2063 6861 745f 6964 7d0a 2020 2020 6669   chat_id}.    fi
-00007b10: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-00007b20: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00007b30: 7269 6e67 2864 6174 6129 3a0a 2020 2020  ring(data):.    
-00007b40: 2020 2020 6669 6c65 7320 3d20 7b27 7669      files = {'vi
-00007b50: 6465 6f5f 6e6f 7465 273a 2064 6174 617d  deo_note': data}
-00007b60: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00007b70: 2020 2070 6179 6c6f 6164 5b27 7669 6465     payload['vide
-00007b80: 6f5f 6e6f 7465 275d 203d 2064 6174 610a  o_note'] = data.
-00007b90: 2020 2020 6966 2064 7572 6174 696f 6e3a      if duration:
-00007ba0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007bb0: 5b27 6475 7261 7469 6f6e 275d 203d 2064  ['duration'] = d
-00007bc0: 7572 6174 696f 6e0a 2020 2020 6966 206c  uration.    if l
-00007bd0: 656e 6774 6820 616e 6420 2873 7472 286c  ength and (str(l
-00007be0: 656e 6774 6829 2e69 7364 6967 6974 2829  ength).isdigit()
-00007bf0: 2061 6e64 2069 6e74 286c 656e 6774 6829   and int(length)
-00007c00: 203c 3d20 3633 3929 3a0a 2020 2020 2020   <= 639):.      
-00007c10: 2020 7061 796c 6f61 645b 276c 656e 6774    payload['lengt
-00007c20: 6827 5d20 3d20 6c65 6e67 7468 0a20 2020  h'] = length.   
-00007c30: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
-00007c40: 6179 6c6f 6164 5b27 6c65 6e67 7468 275d  ayload['length']
-00007c50: 203d 2036 3339 2020 2320 7365 656d 7320   = 639  # seems 
-00007c60: 6c69 6b65 2069 7420 6973 204d 4158 206c  like it is MAX l
-00007c70: 656e 6774 6820 7369 7a65 0a20 2020 2069  ength size.    i
-00007c80: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
-00007c90: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-00007ca0: 6179 6c6f 6164 5b27 7265 706c 795f 746f  ayload['reply_to
-00007cb0: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
-00007cc0: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00007cd0: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
-00007ce0: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
-00007cf0: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-00007d00: 6d61 726b 7570 275d 203d 205f 636f 6e76  markup'] = _conv
-00007d10: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-00007d20: 5f6d 6172 6b75 7029 0a20 2020 2069 6620  _markup).    if 
-00007d30: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00007d40: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-00007d50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007d60: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
-00007d70: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
-00007d80: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00007d90: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00007da0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007db0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00007dc0: 6d65 6f75 740a 2020 2020 6966 2074 6875  meout.    if thu
-00007dd0: 6d62 3a0a 2020 2020 2020 2020 6966 206e  mb:.        if n
-00007de0: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
-00007df0: 6728 7468 756d 6229 3a0a 2020 2020 2020  g(thumb):.      
-00007e00: 2020 2020 2020 6966 2066 696c 6573 3a0a        if files:.
-00007e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e20: 6669 6c65 735b 2774 6875 6d62 275d 203d  files['thumb'] =
-00007e30: 2074 6875 6d62 0a20 2020 2020 2020 2020   thumb.         
-00007e40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00007e50: 2020 2020 2020 2020 2066 696c 6573 203d           files =
-00007e60: 207b 2774 6875 6d62 273a 2074 6875 6d62   {'thumb': thumb
-00007e70: 7d0a 2020 2020 2020 2020 656c 7365 3a0a  }.        else:.
-00007e80: 2020 2020 2020 2020 2020 2020 7061 796c              payl
-00007e90: 6f61 645b 2774 6875 6d62 275d 203d 2074  oad['thumb'] = t
-00007ea0: 6875 6d62 0a20 2020 2069 6620 616c 6c6f  humb.    if allo
-00007eb0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00007ec0: 745f 7265 706c 7920 6973 206e 6f74 204e  t_reply is not N
-00007ed0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00007ee0: 6c6f 6164 5b27 616c 6c6f 775f 7365 6e64  load['allow_send
-00007ef0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00007f00: 7927 5d20 3d20 616c 6c6f 775f 7365 6e64  y'] = allow_send
-00007f10: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
-00007f20: 790a 2020 2020 6966 2070 726f 7465 6374  y.    if protect
-00007f30: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
-00007f40: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00007f50: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
-00007f60: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
-00007f70: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
-00007f80: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
-00007f90: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00007fa0: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
-00007fb0: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
-00007fc0: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
-00007fd0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-00007fe0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00007ff0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00008000: 3d70 6179 6c6f 6164 2c20 6669 6c65 733d  =payload, files=
-00008010: 6669 6c65 732c 206d 6574 686f 643d 2770  files, method='p
-00008020: 6f73 7427 290a 0a0a 6465 6620 7365 6e64  ost')...def send
-00008030: 5f61 7564 696f 2874 6f6b 656e 2c20 6368  _audio(token, ch
-00008040: 6174 5f69 642c 2061 7564 696f 2c20 6361  at_id, audio, ca
-00008050: 7074 696f 6e3d 4e6f 6e65 2c20 6475 7261  ption=None, dura
-00008060: 7469 6f6e 3d4e 6f6e 652c 2070 6572 666f  tion=None, perfo
-00008070: 726d 6572 3d4e 6f6e 652c 2074 6974 6c65  rmer=None, title
-00008080: 3d4e 6f6e 652c 2072 6570 6c79 5f74 6f5f  =None, reply_to_
-00008090: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
-000080a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000080b0: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
-000080c0: 652c 2070 6172 7365 5f6d 6f64 653d 4e6f  e, parse_mode=No
-000080d0: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-000080e0: 6669 6361 7469 6f6e 3d4e 6f6e 652c 2074  fication=None, t
-000080f0: 696d 656f 7574 3d4e 6f6e 652c 2074 6875  imeout=None, thu
-00008100: 6d62 3d4e 6f6e 652c 0a20 2020 2020 2020  mb=None,.       
-00008110: 2020 2020 2020 2020 6361 7074 696f 6e5f          caption_
-00008120: 656e 7469 7469 6573 3d4e 6f6e 652c 2061  entities=None, a
-00008130: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00008140: 686f 7574 5f72 6570 6c79 3d4e 6f6e 652c  hout_reply=None,
-00008150: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00008160: 3d4e 6f6e 652c 206d 6573 7361 6765 5f74  =None, message_t
-00008170: 6872 6561 645f 6964 3d4e 6f6e 6529 3a0a  hread_id=None):.
-00008180: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00008190: 2072 2773 656e 6441 7564 696f 270a 2020   r'sendAudio'.  
-000081a0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-000081b0: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
-000081c0: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
-000081d0: 650a 2020 2020 6966 206e 6f74 2075 7469  e.    if not uti
-000081e0: 6c2e 6973 5f73 7472 696e 6728 6175 6469  l.is_string(audi
-000081f0: 6f29 3a0a 2020 2020 2020 2020 6669 6c65  o):.        file
-00008200: 7320 3d20 7b27 6175 6469 6f27 3a20 6175  s = {'audio': au
-00008210: 6469 6f7d 0a20 2020 2065 6c73 653a 0a20  dio}.    else:. 
-00008220: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00008230: 6175 6469 6f27 5d20 3d20 6175 6469 6f0a  audio'] = audio.
-00008240: 2020 2020 6966 2063 6170 7469 6f6e 3a0a      if caption:.
-00008250: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008260: 2763 6170 7469 6f6e 275d 203d 2063 6170  'caption'] = cap
-00008270: 7469 6f6e 0a20 2020 2069 6620 6475 7261  tion.    if dura
-00008280: 7469 6f6e 3a0a 2020 2020 2020 2020 7061  tion:.        pa
-00008290: 796c 6f61 645b 2764 7572 6174 696f 6e27  yload['duration'
-000082a0: 5d20 3d20 6475 7261 7469 6f6e 0a20 2020  ] = duration.   
-000082b0: 2069 6620 7065 7266 6f72 6d65 723a 0a20   if performer:. 
-000082c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000082d0: 7065 7266 6f72 6d65 7227 5d20 3d20 7065  performer'] = pe
-000082e0: 7266 6f72 6d65 720a 2020 2020 6966 2074  rformer.    if t
-000082f0: 6974 6c65 3a0a 2020 2020 2020 2020 7061  itle:.        pa
-00008300: 796c 6f61 645b 2774 6974 6c65 275d 203d  yload['title'] =
-00008310: 2074 6974 6c65 0a20 2020 2069 6620 7265   title.    if re
-00008320: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-00008330: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00008340: 6164 5b27 7265 706c 795f 746f 5f6d 6573  ad['reply_to_mes
-00008350: 7361 6765 5f69 6427 5d20 3d20 7265 706c  sage_id'] = repl
-00008360: 795f 746f 5f6d 6573 7361 6765 5f69 640a  y_to_message_id.
-00008370: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-00008380: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-00008390: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
-000083a0: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
-000083b0: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-000083c0: 6b75 7029 0a20 2020 2069 6620 7061 7273  kup).    if pars
-000083d0: 655f 6d6f 6465 3a0a 2020 2020 2020 2020  e_mode:.        
-000083e0: 7061 796c 6f61 645b 2770 6172 7365 5f6d  payload['parse_m
-000083f0: 6f64 6527 5d20 3d20 7061 7273 655f 6d6f  ode'] = parse_mo
-00008400: 6465 0a20 2020 2069 6620 6469 7361 626c  de.    if disabl
-00008410: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-00008420: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00008430: 2020 2020 7061 796c 6f61 645b 2764 6973      payload['dis
-00008440: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00008450: 6e27 5d20 3d20 6469 7361 626c 655f 6e6f  n'] = disable_no
-00008460: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00008470: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00008480: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
-00008490: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
-000084a0: 2020 2020 6966 2074 6875 6d62 3a0a 2020      if thumb:.  
-000084b0: 2020 2020 2020 6966 206e 6f74 2075 7469        if not uti
-000084c0: 6c2e 6973 5f73 7472 696e 6728 7468 756d  l.is_string(thum
-000084d0: 6229 3a0a 2020 2020 2020 2020 2020 2020  b):.            
-000084e0: 6966 2066 696c 6573 3a0a 2020 2020 2020  if files:.      
-000084f0: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
-00008500: 2774 6875 6d62 275d 203d 2074 6875 6d62  'thumb'] = thumb
-00008510: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00008520: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00008530: 2020 2066 696c 6573 203d 207b 2774 6875     files = {'thu
-00008540: 6d62 273a 2074 6875 6d62 7d0a 2020 2020  mb': thumb}.    
-00008550: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00008560: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00008570: 6875 6d62 275d 203d 2074 6875 6d62 0a20  humb'] = thumb. 
-00008580: 2020 2069 6620 6361 7074 696f 6e5f 656e     if caption_en
-00008590: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-000085a0: 7061 796c 6f61 645b 2763 6170 7469 6f6e  payload['caption
-000085b0: 5f65 6e74 6974 6965 7327 5d20 3d20 6a73  _entities'] = js
-000085c0: 6f6e 2e64 756d 7073 2874 7970 6573 2e4d  on.dumps(types.M
-000085d0: 6573 7361 6765 456e 7469 7479 2e74 6f5f  essageEntity.to_
-000085e0: 6c69 7374 5f6f 665f 6469 6374 7328 6361  list_of_dicts(ca
-000085f0: 7074 696f 6e5f 656e 7469 7469 6573 2929  ption_entities))
-00008600: 0a20 2020 2069 6620 616c 6c6f 775f 7365  .    if allow_se
-00008610: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-00008620: 706c 7920 6973 206e 6f74 204e 6f6e 653a  ply is not None:
-00008630: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008640: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
-00008650: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
-00008660: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
-00008670: 7769 7468 6f75 745f 7265 706c 790a 2020  without_reply.  
-00008680: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
-00008690: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
-000086a0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000086b0: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
-000086c0: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
-000086d0: 6f6e 7465 6e74 0a20 2020 2069 6620 6d65  ontent.    if me
-000086e0: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
-000086f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008700: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
-00008710: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
-00008720: 7468 7265 6164 5f69 640a 2020 2020 7265  thread_id.    re
-00008730: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00008740: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00008750: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00008760: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00008770: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
-00008780: 290a 0a0a 6465 6620 7365 6e64 5f64 6174  )...def send_dat
-00008790: 6128 746f 6b65 6e2c 2063 6861 745f 6964  a(token, chat_id
-000087a0: 2c20 6461 7461 2c20 6461 7461 5f74 7970  , data, data_typ
-000087b0: 652c 2072 6570 6c79 5f74 6f5f 6d65 7373  e, reply_to_mess
-000087c0: 6167 655f 6964 3d4e 6f6e 652c 2072 6570  age_id=None, rep
-000087d0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c20  ly_markup=None, 
-000087e0: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
-000087f0: 0a20 2020 2020 2020 2020 2020 2020 2064  .              d
-00008800: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00008810: 696f 6e3d 4e6f 6e65 2c20 7469 6d65 6f75  ion=None, timeou
-00008820: 743d 4e6f 6e65 2c20 6361 7074 696f 6e3d  t=None, caption=
-00008830: 4e6f 6e65 2c20 7468 756d 623d 4e6f 6e65  None, thumb=None
-00008840: 2c20 6361 7074 696f 6e5f 656e 7469 7469  , caption_entiti
-00008850: 6573 3d4e 6f6e 652c 0a20 2020 2020 2020  es=None,.       
-00008860: 2020 2020 2020 2061 6c6c 6f77 5f73 656e         allow_sen
-00008870: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00008880: 6c79 3d4e 6f6e 652c 2064 6973 6162 6c65  ly=None, disable
-00008890: 5f63 6f6e 7465 6e74 5f74 7970 655f 6465  _content_type_de
-000088a0: 7465 6374 696f 6e3d 4e6f 6e65 2c20 7669  tection=None, vi
-000088b0: 7369 626c 655f 6669 6c65 5f6e 616d 653d  sible_file_name=
-000088c0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-000088d0: 2020 2020 7072 6f74 6563 745f 636f 6e74      protect_cont
-000088e0: 656e 7420 3d20 4e6f 6e65 2c20 6d65 7373  ent = None, mess
-000088f0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-00008900: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00008910: 7572 6c20 3d20 6765 745f 6d65 7468 6f64  url = get_method
-00008920: 5f62 795f 7479 7065 2864 6174 615f 7479  _by_type(data_ty
-00008930: 7065 290a 2020 2020 7061 796c 6f61 6420  pe).    payload 
-00008940: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00008950: 6174 5f69 647d 0a20 2020 2066 696c 6573  at_id}.    files
-00008960: 203d 204e 6f6e 650a 2020 2020 6966 206e   = None.    if n
-00008970: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
-00008980: 6728 6461 7461 293a 0a20 2020 2020 2020  g(data):.       
-00008990: 2066 696c 655f 6461 7461 203d 2064 6174   file_data = dat
-000089a0: 610a 2020 2020 2020 2020 6966 2076 6973  a.        if vis
-000089b0: 6962 6c65 5f66 696c 655f 6e61 6d65 3a0a  ible_file_name:.
-000089c0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000089d0: 5f64 6174 6120 3d20 2876 6973 6962 6c65  _data = (visible
-000089e0: 5f66 696c 655f 6e61 6d65 2c20 6461 7461  _file_name, data
-000089f0: 290a 2020 2020 2020 2020 6669 6c65 7320  ).        files 
-00008a00: 3d20 7b64 6174 615f 7479 7065 3a20 6669  = {data_type: fi
-00008a10: 6c65 5f64 6174 617d 0a20 2020 2065 6c73  le_data}.    els
-00008a20: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00008a30: 6164 5b64 6174 615f 7479 7065 5d20 3d20  ad[data_type] = 
-00008a40: 6461 7461 0a20 2020 2069 6620 7265 706c  data.    if repl
-00008a50: 795f 746f 5f6d 6573 7361 6765 5f69 643a  y_to_message_id:
-00008a60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008a70: 5b27 7265 706c 795f 746f 5f6d 6573 7361  ['reply_to_messa
-00008a80: 6765 5f69 6427 5d20 3d20 7265 706c 795f  ge_id'] = reply_
-00008a90: 746f 5f6d 6573 7361 6765 5f69 640a 2020  to_message_id.  
-00008aa0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-00008ab0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-00008ac0: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
-00008ad0: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
-00008ae0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
-00008af0: 7029 0a20 2020 2069 6620 7061 7273 655f  p).    if parse_
-00008b00: 6d6f 6465 2061 6e64 2064 6174 615f 7479  mode and data_ty
-00008b10: 7065 203d 3d20 2764 6f63 756d 656e 7427  pe == 'document'
-00008b20: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008b30: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
-00008b40: 3d20 7061 7273 655f 6d6f 6465 0a20 2020  = parse_mode.   
-00008b50: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
-00008b60: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
-00008b70: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00008b80: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
-00008b90: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
-00008ba0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00008bb0: 7469 6f6e 0a20 2020 2069 6620 7469 6d65  tion.    if time
-00008bc0: 6f75 743a 0a20 2020 2020 2020 2070 6179  out:.        pay
-00008bd0: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
-00008be0: 3d20 7469 6d65 6f75 740a 2020 2020 6966  = timeout.    if
-00008bf0: 2063 6170 7469 6f6e 3a0a 2020 2020 2020   caption:.      
-00008c00: 2020 7061 796c 6f61 645b 2763 6170 7469    payload['capti
-00008c10: 6f6e 275d 203d 2063 6170 7469 6f6e 0a20  on'] = caption. 
-00008c20: 2020 2069 6620 7468 756d 623a 0a20 2020     if thumb:.   
-00008c30: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
-00008c40: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
-00008c50: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00008c60: 6620 6669 6c65 733a 0a20 2020 2020 2020  f files:.       
-00008c70: 2020 2020 2020 2020 2066 696c 6573 5b27           files['
-00008c80: 7468 756d 6227 5d20 3d20 7468 756d 620a  thumb'] = thumb.
-00008c90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00008ca0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008cb0: 2020 6669 6c65 7320 3d20 7b27 7468 756d    files = {'thum
-00008cc0: 6227 3a20 7468 756d 627d 0a20 2020 2020  b': thumb}.     
-00008cd0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008ce0: 2020 2020 2070 6179 6c6f 6164 5b27 7468       payload['th
-00008cf0: 756d 6227 5d20 3d20 7468 756d 620a 2020  umb'] = thumb.  
-00008d00: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
-00008d10: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
-00008d20: 6179 6c6f 6164 5b27 6361 7074 696f 6e5f  ayload['caption_
-00008d30: 656e 7469 7469 6573 275d 203d 206a 736f  entities'] = jso
-00008d40: 6e2e 6475 6d70 7328 7479 7065 732e 4d65  n.dumps(types.Me
-00008d50: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
-00008d60: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
-00008d70: 7469 6f6e 5f65 6e74 6974 6965 7329 290a  tion_entities)).
-00008d80: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
-00008d90: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00008da0: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ly is not None:.
+000046c0: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
+000046d0: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
+000046e0: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
+000046f0: 7769 7468 6f75 745f 7265 706c 790d 0a20  without_reply.. 
+00004700: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00004710: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00004720: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00004730: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
+00004740: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
+00004750: 5f63 6f6e 7465 6e74 0d0a 2020 2020 6966  _content..    if
+00004760: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00004770: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+00004780: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
+00004790: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
+000047a0: 6167 655f 7468 7265 6164 5f69 640d 0a20  age_thread_id.. 
+000047b0: 2020 2069 6620 6861 735f 7370 6f69 6c65     if has_spoile
+000047c0: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+000047d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000047e0: 2768 6173 5f73 706f 696c 6572 275d 203d  'has_spoiler'] =
+000047f0: 2068 6173 5f73 706f 696c 6572 0d0a 2020   has_spoiler..  
+00004800: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+00004810: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+00004820: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00004830: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00004840: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
+00004850: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+00004860: 0d0a 0d0a 6173 796e 6320 6465 6620 7365  ....async def se
+00004870: 6e64 5f6d 6564 6961 5f67 726f 7570 280d  nd_media_group(.
+00004880: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
+00004890: 6368 6174 5f69 642c 206d 6564 6961 2c0d  chat_id, media,.
+000048a0: 0a20 2020 2020 2020 2064 6973 6162 6c65  .        disable
+000048b0: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
+000048c0: 6e65 2c20 7265 706c 795f 746f 5f6d 6573  ne, reply_to_mes
+000048d0: 7361 6765 5f69 643d 4e6f 6e65 2c0d 0a20  sage_id=None,.. 
+000048e0: 2020 2020 2020 2074 696d 656f 7574 3d4e         timeout=N
+000048f0: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
+00004900: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00004910: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
+00004920: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
+00004930: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+00004940: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+00004950: 645f 7572 6c20 3d20 7227 7365 6e64 4d65  d_url = r'sendMe
+00004960: 6469 6147 726f 7570 270d 0a20 2020 206d  diaGroup'..    m
+00004970: 6564 6961 5f6a 736f 6e2c 2066 696c 6573  edia_json, files
+00004980: 203d 2061 7761 6974 2063 6f6e 7665 7274   = await convert
+00004990: 5f69 6e70 7574 5f6d 6564 6961 5f61 7272  _input_media_arr
+000049a0: 6179 286d 6564 6961 290d 0a20 2020 2070  ay(media)..    p
+000049b0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+000049c0: 6964 273a 2063 6861 745f 6964 2c20 276d  id': chat_id, 'm
+000049d0: 6564 6961 273a 206d 6564 6961 5f6a 736f  edia': media_jso
+000049e0: 6e7d 0d0a 2020 2020 6966 2064 6973 6162  n}..    if disab
+000049f0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e20  le_notification 
+00004a00: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00004a10: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+00004a20: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00004a30: 696f 6e27 5d20 3d20 6469 7361 626c 655f  ion'] = disable_
+00004a40: 6e6f 7469 6669 6361 7469 6f6e 0d0a 2020  notification..  
+00004a50: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
+00004a60: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+00004a70: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00004a80: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
+00004a90: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
+00004aa0: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+00004ab0: 7469 6d65 6f75 743a 0d0a 2020 2020 2020  timeout:..      
+00004ac0: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
+00004ad0: 7574 275d 203d 2074 696d 656f 7574 0d0a  ut'] = timeout..
+00004ae0: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
+00004af0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+00004b00: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ly is not None:.
+00004b10: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00004b20: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
+00004b30: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
+00004b40: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
+00004b50: 7769 7468 6f75 745f 7265 706c 790d 0a20  without_reply.. 
+00004b60: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
+00004b70: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
+00004b80: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00004b90: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
+00004ba0: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
+00004bb0: 5f63 6f6e 7465 6e74 0d0a 2020 2020 6966  _content..    if
+00004bc0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00004bd0: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+00004be0: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
+00004bf0: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
+00004c00: 6167 655f 7468 7265 6164 5f69 640d 0a20  age_thread_id.. 
+00004c10: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00004c20: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00004c30: 280d 0a20 2020 2020 2020 2074 6f6b 656e  (..        token
+00004c40: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00004c50: 7261 6d73 3d70 6179 6c6f 6164 2c0d 0a20  rams=payload,.. 
+00004c60: 2020 2020 2020 206d 6574 686f 643d 2770         method='p
+00004c70: 6f73 7427 2069 6620 6669 6c65 7320 656c  ost' if files el
+00004c80: 7365 2027 6765 7427 2c0d 0a20 2020 2020  se 'get',..     
+00004c90: 2020 2066 696c 6573 3d66 696c 6573 2069     files=files i
+00004ca0: 6620 6669 6c65 7320 656c 7365 204e 6f6e  f files else Non
+00004cb0: 6529 0d0a 0d0a 0d0a 6173 796e 6320 6465  e)......async de
+00004cc0: 6620 7365 6e64 5f6c 6f63 6174 696f 6e28  f send_location(
+00004cd0: 0d0a 2020 2020 2020 2020 746f 6b65 6e2c  ..        token,
+00004ce0: 2063 6861 745f 6964 2c20 6c61 7469 7475   chat_id, latitu
+00004cf0: 6465 2c20 6c6f 6e67 6974 7564 652c 0d0a  de, longitude,..
+00004d00: 2020 2020 2020 2020 6c69 7665 5f70 6572          live_per
+00004d10: 696f 643d 4e6f 6e65 2c20 7265 706c 795f  iod=None, reply_
+00004d20: 746f 5f6d 6573 7361 6765 5f69 643d 4e6f  to_message_id=No
+00004d30: 6e65 2c20 0d0a 2020 2020 2020 2020 7265  ne, ..        re
+00004d40: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00004d50: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00004d60: 6174 696f 6e3d 4e6f 6e65 2c20 0d0a 2020  ation=None, ..  
+00004d70: 2020 2020 2020 7469 6d65 6f75 743d 4e6f        timeout=No
+00004d80: 6e65 2c20 686f 7269 7a6f 6e74 616c 5f61  ne, horizontal_a
+00004d90: 6363 7572 6163 793d 4e6f 6e65 2c20 6865  ccuracy=None, he
+00004da0: 6164 696e 673d 4e6f 6e65 2c0d 0a20 2020  ading=None,..   
+00004db0: 2020 2020 2070 726f 7869 6d69 7479 5f61       proximity_a
+00004dc0: 6c65 7274 5f72 6164 6975 733d 4e6f 6e65  lert_radius=None
+00004dd0: 2c20 616c 6c6f 775f 7365 6e64 696e 675f  , allow_sending_
+00004de0: 7769 7468 6f75 745f 7265 706c 793d 4e6f  without_reply=No
+00004df0: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
+00004e00: 656e 743d 4e6f 6e65 2c20 6d65 7373 6167  ent=None, messag
+00004e10: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
+00004e20: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00004e30: 726c 203d 2072 2773 656e 644c 6f63 6174  rl = r'sendLocat
+00004e40: 696f 6e27 0d0a 2020 2020 7061 796c 6f61  ion'..    payloa
+00004e50: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00004e60: 6368 6174 5f69 642c 2027 6c61 7469 7475  chat_id, 'latitu
+00004e70: 6465 273a 206c 6174 6974 7564 652c 2027  de': latitude, '
+00004e80: 6c6f 6e67 6974 7564 6527 3a20 6c6f 6e67  longitude': long
+00004e90: 6974 7564 657d 0d0a 2020 2020 6966 206c  itude}..    if l
+00004ea0: 6976 655f 7065 7269 6f64 3a0d 0a20 2020  ive_period:..   
+00004eb0: 2020 2020 2070 6179 6c6f 6164 5b27 6c69       payload['li
+00004ec0: 7665 5f70 6572 696f 6427 5d20 3d20 6c69  ve_period'] = li
+00004ed0: 7665 5f70 6572 696f 640d 0a20 2020 2069  ve_period..    i
+00004ee0: 6620 686f 7269 7a6f 6e74 616c 5f61 6363  f horizontal_acc
+00004ef0: 7572 6163 793a 0d0a 2020 2020 2020 2020  uracy:..        
+00004f00: 7061 796c 6f61 645b 2768 6f72 697a 6f6e  payload['horizon
+00004f10: 7461 6c5f 6163 6375 7261 6379 275d 203d  tal_accuracy'] =
+00004f20: 2068 6f72 697a 6f6e 7461 6c5f 6163 6375   horizontal_accu
+00004f30: 7261 6379 0d0a 2020 2020 6966 2068 6561  racy..    if hea
+00004f40: 6469 6e67 3a0d 0a20 2020 2020 2020 2070  ding:..        p
+00004f50: 6179 6c6f 6164 5b27 6865 6164 696e 6727  ayload['heading'
+00004f60: 5d20 3d20 6865 6164 696e 670d 0a20 2020  ] = heading..   
+00004f70: 2069 6620 7072 6f78 696d 6974 795f 616c   if proximity_al
+00004f80: 6572 745f 7261 6469 7573 3a0d 0a20 2020  ert_radius:..   
+00004f90: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
+00004fa0: 6f78 696d 6974 795f 616c 6572 745f 7261  oximity_alert_ra
+00004fb0: 6469 7573 275d 203d 2070 726f 7869 6d69  dius'] = proximi
+00004fc0: 7479 5f61 6c65 7274 5f72 6164 6975 730d  ty_alert_radius.
+00004fd0: 0a20 2020 2069 6620 7265 706c 795f 746f  .    if reply_to
+00004fe0: 5f6d 6573 7361 6765 5f69 643a 0d0a 2020  _message_id:..  
+00004ff0: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+00005000: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00005010: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
+00005020: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+00005030: 6966 2061 6c6c 6f77 5f73 656e 6469 6e67  if allow_sending
+00005040: 5f77 6974 686f 7574 5f72 6570 6c79 2069  _without_reply i
+00005050: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00005060: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
+00005070: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00005080: 6f75 745f 7265 706c 7927 5d20 3d20 616c  out_reply'] = al
+00005090: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+000050a0: 6f75 745f 7265 706c 790d 0a20 2020 2069  out_reply..    i
+000050b0: 6620 7265 706c 795f 6d61 726b 7570 3a0d  f reply_markup:.
+000050c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000050d0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+000050e0: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
+000050f0: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00005100: 6172 6b75 7029 0d0a 2020 2020 6966 2064  arkup)..    if d
+00005110: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00005120: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+00005130: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00005140: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
+00005150: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
+00005160: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00005170: 0d0a 2020 2020 6966 2074 696d 656f 7574  ..    if timeout
+00005180: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005190: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
+000051a0: 7469 6d65 6f75 740d 0a20 2020 2069 6620  timeout..    if 
+000051b0: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+000051c0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000051d0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+000051e0: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+000051f0: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+00005200: 6e74 0d0a 2020 2020 6966 206d 6573 7361  nt..    if messa
+00005210: 6765 5f74 6872 6561 645f 6964 3a0d 0a20  ge_thread_id:.. 
+00005220: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00005230: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00005240: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
+00005250: 7265 6164 5f69 640d 0a20 2020 2072 6574  read_id..    ret
+00005260: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00005270: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00005280: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00005290: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+000052a0: 0a0d 0a61 7379 6e63 2064 6566 2065 6469  ...async def edi
+000052b0: 745f 6d65 7373 6167 655f 6c69 7665 5f6c  t_message_live_l
+000052c0: 6f63 6174 696f 6e28 0d0a 2020 2020 2020  ocation(..      
+000052d0: 2020 746f 6b65 6e2c 206c 6174 6974 7564    token, latitud
+000052e0: 652c 206c 6f6e 6769 7475 6465 2c20 6368  e, longitude, ch
+000052f0: 6174 5f69 643d 4e6f 6e65 2c20 6d65 7373  at_id=None, mess
+00005300: 6167 655f 6964 3d4e 6f6e 652c 0d0a 2020  age_id=None,..  
+00005310: 2020 2020 2020 696e 6c69 6e65 5f6d 6573        inline_mes
+00005320: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
+00005330: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00005340: 2074 696d 656f 7574 3d4e 6f6e 652c 0d0a   timeout=None,..
+00005350: 2020 2020 2020 2020 686f 7269 7a6f 6e74          horizont
+00005360: 616c 5f61 6363 7572 6163 793d 4e6f 6e65  al_accuracy=None
+00005370: 2c20 6865 6164 696e 673d 4e6f 6e65 2c20  , heading=None, 
+00005380: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
+00005390: 7261 6469 7573 3d4e 6f6e 6529 3a0d 0a20  radius=None):.. 
+000053a0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+000053b0: 7227 6564 6974 4d65 7373 6167 654c 6976  r'editMessageLiv
+000053c0: 654c 6f63 6174 696f 6e27 0d0a 2020 2020  eLocation'..    
+000053d0: 7061 796c 6f61 6420 3d20 7b27 6c61 7469  payload = {'lati
+000053e0: 7475 6465 273a 206c 6174 6974 7564 652c  tude': latitude,
+000053f0: 2027 6c6f 6e67 6974 7564 6527 3a20 6c6f   'longitude': lo
+00005400: 6e67 6974 7564 657d 0d0a 2020 2020 6966  ngitude}..    if
+00005410: 2063 6861 745f 6964 3a0d 0a20 2020 2020   chat_id:..     
+00005420: 2020 2070 6179 6c6f 6164 5b27 6368 6174     payload['chat
+00005430: 5f69 6427 5d20 3d20 6368 6174 5f69 640d  _id'] = chat_id.
+00005440: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
+00005450: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+00005460: 6c6f 6164 5b27 6d65 7373 6167 655f 6964  load['message_id
+00005470: 275d 203d 206d 6573 7361 6765 5f69 640d  '] = message_id.
+00005480: 0a20 2020 2069 6620 686f 7269 7a6f 6e74  .    if horizont
+00005490: 616c 5f61 6363 7572 6163 793a 0d0a 2020  al_accuracy:..  
+000054a0: 2020 2020 2020 7061 796c 6f61 645b 2768        payload['h
+000054b0: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
+000054c0: 6379 275d 203d 2068 6f72 697a 6f6e 7461  cy'] = horizonta
+000054d0: 6c5f 6163 6375 7261 6379 0d0a 2020 2020  l_accuracy..    
+000054e0: 6966 2068 6561 6469 6e67 3a0d 0a20 2020  if heading:..   
+000054f0: 2020 2020 2070 6179 6c6f 6164 5b27 6865       payload['he
+00005500: 6164 696e 6727 5d20 3d20 6865 6164 696e  ading'] = headin
+00005510: 670d 0a20 2020 2069 6620 7072 6f78 696d  g..    if proxim
+00005520: 6974 795f 616c 6572 745f 7261 6469 7573  ity_alert_radius
+00005530: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005540: 6164 5b27 7072 6f78 696d 6974 795f 616c  ad['proximity_al
+00005550: 6572 745f 7261 6469 7573 275d 203d 2070  ert_radius'] = p
+00005560: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
+00005570: 6164 6975 730d 0a20 2020 2069 6620 696e  adius..    if in
+00005580: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+00005590: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000055a0: 645b 2769 6e6c 696e 655f 6d65 7373 6167  d['inline_messag
+000055b0: 655f 6964 275d 203d 2069 6e6c 696e 655f  e_id'] = inline_
+000055c0: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+000055d0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+000055e0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000055f0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
+00005600: 5d20 3d20 6177 6169 7420 5f63 6f6e 7665  ] = await _conve
+00005610: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+00005620: 6d61 726b 7570 290d 0a20 2020 2069 6620  markup)..    if 
+00005630: 7469 6d65 6f75 743a 0d0a 2020 2020 2020  timeout:..      
+00005640: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
+00005650: 7574 275d 203d 2074 696d 656f 7574 0d0a  ut'] = timeout..
+00005660: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00005670: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+00005680: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00005690: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+000056a0: 6f61 6429 0d0a 0d0a 0d0a 6173 796e 6320  oad)......async 
+000056b0: 6465 6620 7374 6f70 5f6d 6573 7361 6765  def stop_message
+000056c0: 5f6c 6976 655f 6c6f 6361 7469 6f6e 280d  _live_location(.
+000056d0: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
+000056e0: 6368 6174 5f69 643d 4e6f 6e65 2c20 6d65  chat_id=None, me
+000056f0: 7373 6167 655f 6964 3d4e 6f6e 652c 0d0a  ssage_id=None,..
+00005700: 2020 2020 2020 2020 696e 6c69 6e65 5f6d          inline_m
+00005710: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
+00005720: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00005730: 652c 2074 696d 656f 7574 3d4e 6f6e 6529  e, timeout=None)
+00005740: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+00005750: 6c20 3d20 7227 7374 6f70 4d65 7373 6167  l = r'stopMessag
+00005760: 654c 6976 654c 6f63 6174 696f 6e27 0d0a  eLiveLocation'..
+00005770: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
+00005780: 0d0a 2020 2020 6966 2063 6861 745f 6964  ..    if chat_id
+00005790: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000057a0: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
+000057b0: 6368 6174 5f69 640d 0a20 2020 2069 6620  chat_id..    if 
+000057c0: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+000057d0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+000057e0: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
+000057f0: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+00005800: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+00005810: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+00005820: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
+00005830: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
+00005840: 655f 6d65 7373 6167 655f 6964 0d0a 2020  e_message_id..  
+00005850: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00005860: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+00005870: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+00005880: 7027 5d20 3d20 6177 6169 7420 5f63 6f6e  p'] = await _con
+00005890: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+000058a0: 795f 6d61 726b 7570 290d 0a20 2020 2069  y_markup)..    i
+000058b0: 6620 7469 6d65 6f75 743a 0d0a 2020 2020  f timeout:..    
+000058c0: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
+000058d0: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
+000058e0: 0d0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
+000058f0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+00005900: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00005910: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00005920: 796c 6f61 6429 0d0a 0d0a 0d0a 6173 796e  yload)......asyn
+00005930: 6320 6465 6620 7365 6e64 5f76 656e 7565  c def send_venue
+00005940: 280d 0a20 2020 2020 2020 2074 6f6b 656e  (..        token
+00005950: 2c20 6368 6174 5f69 642c 206c 6174 6974  , chat_id, latit
+00005960: 7564 652c 206c 6f6e 6769 7475 6465 2c20  ude, longitude, 
+00005970: 7469 746c 652c 2061 6464 7265 7373 2c0d  title, address,.
+00005980: 0a20 2020 2020 2020 2066 6f75 7273 7175  .        foursqu
+00005990: 6172 655f 6964 3d4e 6f6e 652c 2066 6f75  are_id=None, fou
+000059a0: 7273 7175 6172 655f 7479 7065 3d4e 6f6e  rsquare_type=Non
+000059b0: 652c 2064 6973 6162 6c65 5f6e 6f74 6966  e, disable_notif
+000059c0: 6963 6174 696f 6e3d 4e6f 6e65 2c0d 0a20  ication=None,.. 
+000059d0: 2020 2020 2020 2072 6570 6c79 5f74 6f5f         reply_to_
+000059e0: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+000059f0: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
+00005a00: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
+00005a10: 2c0d 0a20 2020 2020 2020 2061 6c6c 6f77  ,..        allow
+00005a20: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+00005a30: 5f72 6570 6c79 3d4e 6f6e 652c 2067 6f6f  _reply=None, goo
+00005a40: 676c 655f 706c 6163 655f 6964 3d4e 6f6e  gle_place_id=Non
+00005a50: 652c 0d0a 2020 2020 2020 2020 676f 6f67  e,..        goog
+00005a60: 6c65 5f70 6c61 6365 5f74 7970 653d 4e6f  le_place_type=No
+00005a70: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
+00005a80: 656e 743d 4e6f 6e65 2c20 6d65 7373 6167  ent=None, messag
+00005a90: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
+00005aa0: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00005ab0: 726c 203d 2072 2773 656e 6456 656e 7565  rl = r'sendVenue
+00005ac0: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+00005ad0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+00005ae0: 745f 6964 2c20 276c 6174 6974 7564 6527  t_id, 'latitude'
+00005af0: 3a20 6c61 7469 7475 6465 2c20 276c 6f6e  : latitude, 'lon
+00005b00: 6769 7475 6465 273a 206c 6f6e 6769 7475  gitude': longitu
+00005b10: 6465 2c20 2774 6974 6c65 273a 2074 6974  de, 'title': tit
+00005b20: 6c65 2c20 2761 6464 7265 7373 273a 2061  le, 'address': a
+00005b30: 6464 7265 7373 7d0d 0a20 2020 2069 6620  ddress}..    if 
+00005b40: 666f 7572 7371 7561 7265 5f69 643a 0d0a  foursquare_id:..
+00005b50: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005b60: 2766 6f75 7273 7175 6172 655f 6964 275d  'foursquare_id']
+00005b70: 203d 2066 6f75 7273 7175 6172 655f 6964   = foursquare_id
+00005b80: 0d0a 2020 2020 6966 2066 6f75 7273 7175  ..    if foursqu
+00005b90: 6172 655f 7479 7065 3a0d 0a20 2020 2020  are_type:..     
+00005ba0: 2020 2070 6179 6c6f 6164 5b27 666f 7572     payload['four
+00005bb0: 7371 7561 7265 5f74 7970 6527 5d20 3d20  square_type'] = 
+00005bc0: 666f 7572 7371 7561 7265 5f74 7970 650d  foursquare_type.
+00005bd0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+00005be0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+00005bf0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00005c00: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+00005c10: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00005c20: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
+00005c30: 6966 6963 6174 696f 6e0d 0a20 2020 2069  ification..    i
+00005c40: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
+00005c50: 6765 5f69 643a 0d0a 2020 2020 2020 2020  ge_id:..        
+00005c60: 7061 796c 6f61 645b 2772 6570 6c79 5f74  payload['reply_t
+00005c70: 6f5f 6d65 7373 6167 655f 6964 275d 203d  o_message_id'] =
+00005c80: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
+00005c90: 655f 6964 0d0a 2020 2020 6966 2072 6570  e_id..    if rep
+00005ca0: 6c79 5f6d 6172 6b75 703a 0d0a 2020 2020  ly_markup:..    
+00005cb0: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
+00005cc0: 6c79 5f6d 6172 6b75 7027 5d20 3d20 6177  ly_markup'] = aw
+00005cd0: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
+00005ce0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+00005cf0: 290d 0a20 2020 2069 6620 7469 6d65 6f75  )..    if timeou
+00005d00: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+00005d10: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
+00005d20: 2074 696d 656f 7574 0d0a 2020 2020 6966   timeout..    if
+00005d30: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00005d40: 6974 686f 7574 5f72 6570 6c79 2069 7320  ithout_reply is 
+00005d50: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00005d60: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
+00005d70: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00005d80: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
+00005d90: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00005da0: 745f 7265 706c 790d 0a20 2020 2069 6620  t_reply..    if 
+00005db0: 676f 6f67 6c65 5f70 6c61 6365 5f69 643a  google_place_id:
+00005dc0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00005dd0: 645b 2767 6f6f 676c 655f 706c 6163 655f  d['google_place_
+00005de0: 6964 275d 203d 2067 6f6f 676c 655f 706c  id'] = google_pl
+00005df0: 6163 655f 6964 0d0a 2020 2020 6966 2067  ace_id..    if g
+00005e00: 6f6f 676c 655f 706c 6163 655f 7479 7065  oogle_place_type
+00005e10: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005e20: 6164 5b27 676f 6f67 6c65 5f70 6c61 6365  ad['google_place
+00005e30: 5f74 7970 6527 5d20 3d20 676f 6f67 6c65  _type'] = google
+00005e40: 5f70 6c61 6365 5f74 7970 650d 0a20 2020  _place_type..   
+00005e50: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00005e60: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00005e70: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00005e80: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
+00005e90: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
+00005ea0: 6f6e 7465 6e74 0d0a 2020 2020 6966 206d  ontent..    if m
+00005eb0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00005ec0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005ed0: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+00005ee0: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+00005ef0: 655f 7468 7265 6164 5f69 640d 0a20 2020  e_thread_id..   
+00005f00: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+00005f10: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+00005f20: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00005f30: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00005f40: 290d 0a0d 0a0d 0a61 7379 6e63 2064 6566  )......async def
+00005f50: 2073 656e 645f 636f 6e74 6163 7428 0d0a   send_contact(..
+00005f60: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
+00005f70: 6861 745f 6964 2c20 7068 6f6e 655f 6e75  hat_id, phone_nu
+00005f80: 6d62 6572 2c20 6669 7273 745f 6e61 6d65  mber, first_name
+00005f90: 2c20 6c61 7374 5f6e 616d 653d 4e6f 6e65  , last_name=None
+00005fa0: 2c20 7663 6172 643d 4e6f 6e65 2c0d 0a20  , vcard=None,.. 
+00005fb0: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
+00005fc0: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00005fd0: 2c20 7265 706c 795f 746f 5f6d 6573 7361  , reply_to_messa
+00005fe0: 6765 5f69 643d 4e6f 6e65 2c20 7265 706c  ge_id=None, repl
+00005ff0: 795f 6d61 726b 7570 3d4e 6f6e 652c 2074  y_markup=None, t
+00006000: 696d 656f 7574 3d4e 6f6e 652c 0d0a 2020  imeout=None,..  
+00006010: 2020 2020 2020 616c 6c6f 775f 7365 6e64        allow_send
+00006020: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+00006030: 793d 4e6f 6e65 2c20 7072 6f74 6563 745f  y=None, protect_
+00006040: 636f 6e74 656e 743d 4e6f 6e65 2c20 6d65  content=None, me
+00006050: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+00006060: 4e6f 6e65 293a 0d0a 2020 2020 6d65 7468  None):..    meth
+00006070: 6f64 5f75 726c 203d 2072 2773 656e 6443  od_url = r'sendC
+00006080: 6f6e 7461 6374 270d 0a20 2020 2070 6179  ontact'..    pay
+00006090: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+000060a0: 273a 2063 6861 745f 6964 2c20 2770 686f  ': chat_id, 'pho
+000060b0: 6e65 5f6e 756d 6265 7227 3a20 7068 6f6e  ne_number': phon
+000060c0: 655f 6e75 6d62 6572 2c20 2766 6972 7374  e_number, 'first
+000060d0: 5f6e 616d 6527 3a20 6669 7273 745f 6e61  _name': first_na
+000060e0: 6d65 7d0d 0a20 2020 2069 6620 6c61 7374  me}..    if last
+000060f0: 5f6e 616d 653a 0d0a 2020 2020 2020 2020  _name:..        
+00006100: 7061 796c 6f61 645b 276c 6173 745f 6e61  payload['last_na
+00006110: 6d65 275d 203d 206c 6173 745f 6e61 6d65  me'] = last_name
+00006120: 0d0a 2020 2020 6966 2076 6361 7264 3a0d  ..    if vcard:.
+00006130: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006140: 5b27 7663 6172 6427 5d20 3d20 7663 6172  ['vcard'] = vcar
+00006150: 640d 0a20 2020 2069 6620 6469 7361 626c  d..    if disabl
+00006160: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
+00006170: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00006180: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
+00006190: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+000061a0: 6f6e 275d 203d 2064 6973 6162 6c65 5f6e  on'] = disable_n
+000061b0: 6f74 6966 6963 6174 696f 6e0d 0a20 2020  otification..   
+000061c0: 2069 6620 7265 706c 795f 746f 5f6d 6573   if reply_to_mes
+000061d0: 7361 6765 5f69 643a 0d0a 2020 2020 2020  sage_id:..      
+000061e0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+000061f0: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
+00006200: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
+00006210: 6167 655f 6964 0d0a 2020 2020 6966 2072  age_id..    if r
+00006220: 6570 6c79 5f6d 6172 6b75 703a 0d0a 2020  eply_markup:..  
+00006230: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+00006240: 6570 6c79 5f6d 6172 6b75 7027 5d20 3d20  eply_markup'] = 
+00006250: 6177 6169 7420 5f63 6f6e 7665 7274 5f6d  await _convert_m
+00006260: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
+00006270: 7570 290d 0a20 2020 2069 6620 7469 6d65  up)..    if time
+00006280: 6f75 743a 0d0a 2020 2020 2020 2020 7061  out:..        pa
+00006290: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+000062a0: 203d 2074 696d 656f 7574 0d0a 2020 2020   = timeout..    
+000062b0: 6966 2061 6c6c 6f77 5f73 656e 6469 6e67  if allow_sending
+000062c0: 5f77 6974 686f 7574 5f72 6570 6c79 2069  _without_reply i
+000062d0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000062e0: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
+000062f0: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00006300: 6f75 745f 7265 706c 7927 5d20 3d20 616c  out_reply'] = al
+00006310: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00006320: 6f75 745f 7265 706c 790d 0a20 2020 2069  out_reply..    i
+00006330: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
+00006340: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+00006350: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006360: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
+00006370: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
+00006380: 7465 6e74 0d0a 2020 2020 6966 206d 6573  tent..    if mes
+00006390: 7361 6765 5f74 6872 6561 645f 6964 3a0d  sage_thread_id:.
+000063a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000063b0: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
+000063c0: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
+000063d0: 7468 7265 6164 5f69 640d 0a20 2020 2072  thread_id..    r
+000063e0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+000063f0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00006400: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00006410: 7061 7261 6d73 3d70 6179 6c6f 6164 290d  params=payload).
+00006420: 0a0d 0a0d 0a61 7379 6e63 2064 6566 2073  .....async def s
+00006430: 656e 645f 6368 6174 5f61 6374 696f 6e28  end_chat_action(
+00006440: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00006450: 6163 7469 6f6e 2c20 7469 6d65 6f75 743d  action, timeout=
+00006460: 4e6f 6e65 2c20 6d65 7373 6167 655f 7468  None, message_th
+00006470: 7265 6164 5f69 643d 4e6f 6e65 293a 0d0a  read_id=None):..
+00006480: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00006490: 2072 2773 656e 6443 6861 7441 6374 696f   r'sendChatActio
+000064a0: 6e27 0d0a 2020 2020 7061 796c 6f61 6420  n'..    payload 
+000064b0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+000064c0: 6174 5f69 642c 2027 6163 7469 6f6e 273a  at_id, 'action':
+000064d0: 2061 6374 696f 6e7d 0d0a 2020 2020 6966   action}..    if
+000064e0: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+000064f0: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+00006500: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+00006510: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
+00006520: 7468 7265 6164 5f69 643a 0d0a 2020 2020  thread_id:..    
+00006530: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+00006540: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
+00006550: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
+00006560: 645f 6964 0d0a 2020 2020 7265 7475 726e  d_id..    return
+00006570: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00006580: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00006590: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+000065a0: 733d 7061 796c 6f61 6429 0d0a 0d0a 0d0a  s=payload)......
+000065b0: 6173 796e 6320 6465 6620 7365 6e64 5f76  async def send_v
+000065c0: 6964 656f 2874 6f6b 656e 2c20 6368 6174  ideo(token, chat
+000065d0: 5f69 642c 2064 6174 612c 2064 7572 6174  _id, data, durat
+000065e0: 696f 6e3d 4e6f 6e65 2c20 6361 7074 696f  ion=None, captio
+000065f0: 6e3d 4e6f 6e65 2c20 7265 706c 795f 746f  n=None, reply_to
+00006600: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
+00006610: 2c20 7265 706c 795f 6d61 726b 7570 3d4e  , reply_markup=N
+00006620: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
+00006630: 2020 2020 2070 6172 7365 5f6d 6f64 653d       parse_mode=
+00006640: 4e6f 6e65 2c20 7375 7070 6f72 7473 5f73  None, supports_s
+00006650: 7472 6561 6d69 6e67 3d4e 6f6e 652c 2064  treaming=None, d
+00006660: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00006670: 696f 6e3d 4e6f 6e65 2c20 7469 6d65 6f75  ion=None, timeou
+00006680: 743d 4e6f 6e65 2c20 0d0a 2020 2020 2020  t=None, ..      
+00006690: 2020 2020 2020 2020 2074 6875 6d62 3d4e           thumb=N
+000066a0: 6f6e 652c 2077 6964 7468 3d4e 6f6e 652c  one, width=None,
+000066b0: 2068 6569 6768 743d 4e6f 6e65 2c20 6361   height=None, ca
+000066c0: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
+000066d0: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
+000066e0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+000066f0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00006700: 2020 2020 2020 2070 726f 7465 6374 5f63         protect_c
+00006710: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
+00006720: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+00006730: 6f6e 652c 2068 6173 5f73 706f 696c 6572  one, has_spoiler
+00006740: 3d4e 6f6e 6529 3a0d 0a20 2020 206d 6574  =None):..    met
+00006750: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
+00006760: 5669 6465 6f27 0d0a 2020 2020 7061 796c  Video'..    payl
+00006770: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
+00006780: 3a20 6368 6174 5f69 647d 0d0a 2020 2020  : chat_id}..    
+00006790: 6669 6c65 7320 3d20 4e6f 6e65 0d0a 2020  files = None..  
+000067a0: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
+000067b0: 5f73 7472 696e 6728 6461 7461 293a 0d0a  _string(data):..
+000067c0: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
+000067d0: 7b27 7669 6465 6f27 3a20 6461 7461 7d0d  {'video': data}.
+000067e0: 0a20 2020 2065 6c73 653a 0d0a 2020 2020  .    else:..    
+000067f0: 2020 2020 7061 796c 6f61 645b 2776 6964      payload['vid
+00006800: 656f 275d 203d 2064 6174 610d 0a20 2020  eo'] = data..   
+00006810: 2069 6620 6475 7261 7469 6f6e 3a0d 0a20   if duration:.. 
+00006820: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00006830: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
+00006840: 6174 696f 6e0d 0a20 2020 2069 6620 6361  ation..    if ca
+00006850: 7074 696f 6e3a 0d0a 2020 2020 2020 2020  ption:..        
+00006860: 7061 796c 6f61 645b 2763 6170 7469 6f6e  payload['caption
+00006870: 275d 203d 2063 6170 7469 6f6e 0d0a 2020  '] = caption..  
+00006880: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
+00006890: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+000068a0: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+000068b0: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
+000068c0: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
+000068d0: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+000068e0: 7265 706c 795f 6d61 726b 7570 3a0d 0a20  reply_markup:.. 
+000068f0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00006900: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+00006910: 2061 7761 6974 205f 636f 6e76 6572 745f   await _convert_
+00006920: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+00006930: 6b75 7029 0d0a 2020 2020 6966 2070 6172  kup)..    if par
+00006940: 7365 5f6d 6f64 653a 0d0a 2020 2020 2020  se_mode:..      
+00006950: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
+00006960: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
+00006970: 6d6f 6465 0d0a 2020 2020 6966 2073 7570  mode..    if sup
+00006980: 706f 7274 735f 7374 7265 616d 696e 6720  ports_streaming 
+00006990: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000069a0: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
+000069b0: 7570 706f 7274 735f 7374 7265 616d 696e  upports_streamin
+000069c0: 6727 5d20 3d20 7375 7070 6f72 7473 5f73  g'] = supports_s
+000069d0: 7472 6561 6d69 6e67 0d0a 2020 2020 6966  treaming..    if
+000069e0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+000069f0: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
+00006a00: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00006a10: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
+00006a20: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
+00006a30: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00006a40: 6f6e 0d0a 2020 2020 6966 2074 696d 656f  on..    if timeo
+00006a50: 7574 3a0d 0a20 2020 2020 2020 2070 6179  ut:..        pay
+00006a60: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+00006a70: 3d20 7469 6d65 6f75 740d 0a20 2020 2069  = timeout..    i
+00006a80: 6620 7468 756d 623a 0d0a 2020 2020 2020  f thumb:..      
+00006a90: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
+00006aa0: 5f73 7472 696e 6728 7468 756d 6229 3a0d  _string(thumb):.
+00006ab0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00006ac0: 6669 6c65 733a 0d0a 2020 2020 2020 2020  files:..        
+00006ad0: 2020 2020 2020 2020 6669 6c65 735b 2774          files['t
+00006ae0: 6875 6d62 275d 203d 2074 6875 6d62 0d0a  humb'] = thumb..
+00006af0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00006b00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00006b10: 2020 2066 696c 6573 203d 207b 2774 6875     files = {'thu
+00006b20: 6d62 273a 2074 6875 6d62 7d0d 0a20 2020  mb': thumb}..   
+00006b30: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00006b40: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006b50: 2774 6875 6d62 275d 203d 2074 6875 6d62  'thumb'] = thumb
+00006b60: 0d0a 2020 2020 6966 2077 6964 7468 3a0d  ..    if width:.
+00006b70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006b80: 5b27 7769 6474 6827 5d20 3d20 7769 6474  ['width'] = widt
+00006b90: 680d 0a20 2020 2069 6620 6865 6967 6874  h..    if height
+00006ba0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006bb0: 6164 5b27 6865 6967 6874 275d 203d 2068  ad['height'] = h
+00006bc0: 6569 6768 740d 0a20 2020 2069 6620 6361  eight..    if ca
+00006bd0: 7074 696f 6e5f 656e 7469 7469 6573 3a0d  ption_entities:.
+00006be0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006bf0: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
+00006c00: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
+00006c10: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
+00006c20: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
+00006c30: 5f64 6963 7473 2863 6170 7469 6f6e 5f65  _dicts(caption_e
+00006c40: 6e74 6974 6965 7329 290d 0a20 2020 2069  ntities))..    i
+00006c50: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
+00006c60: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
+00006c70: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00006c80: 2020 2020 7061 796c 6f61 645b 2761 6c6c      payload['all
+00006c90: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00006ca0: 7574 5f72 6570 6c79 275d 203d 2061 6c6c  ut_reply'] = all
+00006cb0: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00006cc0: 7574 5f72 6570 6c79 0d0a 2020 2020 6966  ut_reply..    if
+00006cd0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00006ce0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00006cf0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00006d00: 7072 6f74 6563 745f 636f 6e74 656e 7427  protect_content'
+00006d10: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
+00006d20: 656e 740d 0a20 2020 2069 6620 6d65 7373  ent..    if mess
+00006d30: 6167 655f 7468 7265 6164 5f69 643a 0d0a  age_thread_id:..
+00006d40: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006d50: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+00006d60: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
+00006d70: 6872 6561 645f 6964 0d0a 2020 2020 6966  hread_id..    if
+00006d80: 2068 6173 5f73 706f 696c 6572 2069 7320   has_spoiler is 
+00006d90: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00006da0: 2020 2070 6179 6c6f 6164 5b27 6861 735f     payload['has_
+00006db0: 7370 6f69 6c65 7227 5d20 3d20 6861 735f  spoiler'] = has_
+00006dc0: 7370 6f69 6c65 720d 0a20 2020 2072 6574  spoiler..    ret
+00006dd0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+00006de0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00006df0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00006e00: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
+00006e10: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
+00006e20: 643d 2770 6f73 7427 290d 0a0d 0a0d 0a61  d='post')......a
+00006e30: 7379 6e63 2064 6566 2073 656e 645f 616e  sync def send_an
+00006e40: 696d 6174 696f 6e28 0d0a 2020 2020 2020  imation(..      
+00006e50: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
+00006e60: 2c20 6461 7461 2c20 6475 7261 7469 6f6e  , data, duration
+00006e70: 3d4e 6f6e 652c 2063 6170 7469 6f6e 3d4e  =None, caption=N
+00006e80: 6f6e 652c 2072 6570 6c79 5f74 6f5f 6d65  one, reply_to_me
+00006e90: 7373 6167 655f 6964 3d4e 6f6e 652c 2072  ssage_id=None, r
+00006ea0: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+00006eb0: 2c0d 0a20 2020 2020 2020 2070 6172 7365  ,..        parse
+00006ec0: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
+00006ed0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00006ee0: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+00006ef0: 6f6e 652c 2074 6875 6d62 3d4e 6f6e 652c  one, thumb=None,
+00006f00: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+00006f10: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
+00006f20: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00006f30: 6974 686f 7574 5f72 6570 6c79 3d4e 6f6e  ithout_reply=Non
+00006f40: 652c 2077 6964 7468 3d4e 6f6e 652c 2068  e, width=None, h
+00006f50: 6569 6768 743d 4e6f 6e65 2c20 7072 6f74  eight=None, prot
+00006f60: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
+00006f70: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
+00006f80: 5f69 643d 4e6f 6e65 2c0d 0a20 2020 2020  _id=None,..     
+00006f90: 2020 2068 6173 5f73 706f 696c 6572 3d4e     has_spoiler=N
+00006fa0: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+00006fb0: 645f 7572 6c20 3d20 7227 7365 6e64 416e  d_url = r'sendAn
+00006fc0: 696d 6174 696f 6e27 0d0a 2020 2020 7061  imation'..    pa
+00006fd0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00006fe0: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+00006ff0: 2020 6669 6c65 7320 3d20 4e6f 6e65 0d0a    files = None..
+00007000: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
+00007010: 6973 5f73 7472 696e 6728 6461 7461 293a  is_string(data):
+00007020: 0d0a 2020 2020 2020 2020 6669 6c65 7320  ..        files 
+00007030: 3d20 7b27 616e 696d 6174 696f 6e27 3a20  = {'animation': 
+00007040: 6461 7461 7d0d 0a20 2020 2065 6c73 653a  data}..    else:
+00007050: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00007060: 645b 2761 6e69 6d61 7469 6f6e 275d 203d  d['animation'] =
+00007070: 2064 6174 610d 0a20 2020 2069 6620 6475   data..    if du
+00007080: 7261 7469 6f6e 3a0d 0a20 2020 2020 2020  ration:..       
+00007090: 2070 6179 6c6f 6164 5b27 6475 7261 7469   payload['durati
+000070a0: 6f6e 275d 203d 2064 7572 6174 696f 6e0d  on'] = duration.
+000070b0: 0a20 2020 2069 6620 6361 7074 696f 6e3a  .    if caption:
+000070c0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000070d0: 645b 2763 6170 7469 6f6e 275d 203d 2063  d['caption'] = c
+000070e0: 6170 7469 6f6e 0d0a 2020 2020 6966 2072  aption..    if r
+000070f0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00007100: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+00007110: 6c6f 6164 5b27 7265 706c 795f 746f 5f6d  load['reply_to_m
+00007120: 6573 7361 6765 5f69 6427 5d20 3d20 7265  essage_id'] = re
+00007130: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+00007140: 640d 0a20 2020 2069 6620 7265 706c 795f  d..    if reply_
+00007150: 6d61 726b 7570 3a0d 0a20 2020 2020 2020  markup:..       
+00007160: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
+00007170: 6d61 726b 7570 275d 203d 2061 7761 6974  markup'] = await
+00007180: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+00007190: 2872 6570 6c79 5f6d 6172 6b75 7029 0d0a  (reply_markup)..
+000071a0: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
+000071b0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+000071c0: 6f61 645b 2770 6172 7365 5f6d 6f64 6527  oad['parse_mode'
+000071d0: 5d20 3d20 7061 7273 655f 6d6f 6465 0d0a  ] = parse_mode..
+000071e0: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+000071f0: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00007200: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00007210: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+00007220: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+00007230: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00007240: 6669 6361 7469 6f6e 0d0a 2020 2020 6966  fication..    if
+00007250: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+00007260: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+00007270: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+00007280: 0a20 2020 2069 6620 7468 756d 623a 0d0a  .    if thumb:..
+00007290: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+000072a0: 7469 6c2e 6973 5f73 7472 696e 6728 7468  til.is_string(th
+000072b0: 756d 6229 3a0d 0a20 2020 2020 2020 2020  umb):..         
+000072c0: 2020 2069 6620 6669 6c65 733a 0d0a 2020     if files:..  
+000072d0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000072e0: 6c65 735b 2774 6875 6d62 275d 203d 2074  les['thumb'] = t
+000072f0: 6875 6d62 0d0a 2020 2020 2020 2020 2020  humb..          
+00007300: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00007310: 2020 2020 2020 2020 2066 696c 6573 203d           files =
+00007320: 207b 2774 6875 6d62 273a 2074 6875 6d62   {'thumb': thumb
+00007330: 7d0d 0a20 2020 2020 2020 2065 6c73 653a  }..        else:
+00007340: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00007350: 796c 6f61 645b 2774 6875 6d62 275d 203d  yload['thumb'] =
+00007360: 2074 6875 6d62 0d0a 2020 2020 6966 2063   thumb..    if c
+00007370: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
+00007380: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00007390: 645b 2763 6170 7469 6f6e 5f65 6e74 6974  d['caption_entit
+000073a0: 6965 7327 5d20 3d20 6a73 6f6e 2e64 756d  ies'] = json.dum
+000073b0: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
+000073c0: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
+000073d0: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
+000073e0: 656e 7469 7469 6573 2929 0d0a 2020 2020  entities))..    
+000073f0: 6966 2061 6c6c 6f77 5f73 656e 6469 6e67  if allow_sending
+00007400: 5f77 6974 686f 7574 5f72 6570 6c79 2069  _without_reply i
+00007410: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00007420: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
+00007430: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00007440: 6f75 745f 7265 706c 7927 5d20 3d20 616c  out_reply'] = al
+00007450: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00007460: 6f75 745f 7265 706c 790d 0a20 2020 2069  out_reply..    i
+00007470: 6620 7769 6474 683a 0d0a 2020 2020 2020  f width:..      
+00007480: 2020 7061 796c 6f61 645b 2777 6964 7468    payload['width
+00007490: 275d 203d 2077 6964 7468 0d0a 2020 2020  '] = width..    
+000074a0: 6966 2068 6569 6768 743a 0d0a 2020 2020  if height:..    
+000074b0: 2020 2020 7061 796c 6f61 645b 2768 6569      payload['hei
+000074c0: 6768 7427 5d20 3d20 6865 6967 6874 0d0a  ght'] = height..
+000074d0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+000074e0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+000074f0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00007500: 6c6f 6164 5b27 7072 6f74 6563 745f 636f  load['protect_co
+00007510: 6e74 656e 7427 5d20 3d20 7072 6f74 6563  ntent'] = protec
+00007520: 745f 636f 6e74 656e 740d 0a20 2020 2069  t_content..    i
+00007530: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
+00007540: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+00007550: 796c 6f61 645b 276d 6573 7361 6765 5f74  yload['message_t
+00007560: 6872 6561 645f 6964 275d 203d 206d 6573  hread_id'] = mes
+00007570: 7361 6765 5f74 6872 6561 645f 6964 0d0a  sage_thread_id..
+00007580: 2020 2020 6966 2068 6173 5f73 706f 696c      if has_spoil
+00007590: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
+000075a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000075b0: 5b27 6861 735f 7370 6f69 6c65 7227 5d20  ['has_spoiler'] 
+000075c0: 3d20 6861 735f 7370 6f69 6c65 720d 0a20  = has_spoiler.. 
+000075d0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+000075e0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+000075f0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00007600: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00007610: 6164 2c20 6669 6c65 733d 6669 6c65 732c  ad, files=files,
+00007620: 206d 6574 686f 643d 2770 6f73 7427 290d   method='post').
+00007630: 0a0d 0a0d 0a61 7379 6e63 2064 6566 2073  .....async def s
+00007640: 656e 645f 766f 6963 6528 746f 6b65 6e2c  end_voice(token,
+00007650: 2063 6861 745f 6964 2c20 766f 6963 652c   chat_id, voice,
+00007660: 2063 6170 7469 6f6e 3d4e 6f6e 652c 2064   caption=None, d
+00007670: 7572 6174 696f 6e3d 4e6f 6e65 2c20 7265  uration=None, re
+00007680: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+00007690: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
+000076a0: 726b 7570 3d4e 6f6e 652c 0d0a 2020 2020  rkup=None,..    
+000076b0: 2020 2020 2020 2020 2020 2070 6172 7365             parse
+000076c0: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
+000076d0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000076e0: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+000076f0: 6f6e 652c 2063 6170 7469 6f6e 5f65 6e74  one, caption_ent
+00007700: 6974 6965 733d 4e6f 6e65 2c0d 0a20 2020  ities=None,..   
+00007710: 2020 2020 2020 2020 2020 2020 616c 6c6f              allo
+00007720: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00007730: 745f 7265 706c 793d 4e6f 6e65 2c20 7072  t_reply=None, pr
+00007740: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
+00007750: 6e65 2c20 6d65 7373 6167 655f 7468 7265  ne, message_thre
+00007760: 6164 5f69 643d 4e6f 6e65 293a 0d0a 2020  ad_id=None):..  
+00007770: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00007780: 2773 656e 6456 6f69 6365 270d 0a20 2020  'sendVoice'..   
+00007790: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+000077a0: 745f 6964 273a 2063 6861 745f 6964 7d0d  t_id': chat_id}.
+000077b0: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
+000077c0: 650d 0a20 2020 2069 6620 6e6f 7420 7574  e..    if not ut
+000077d0: 696c 2e69 735f 7374 7269 6e67 2876 6f69  il.is_string(voi
+000077e0: 6365 293a 0d0a 2020 2020 2020 2020 6669  ce):..        fi
+000077f0: 6c65 7320 3d20 7b27 766f 6963 6527 3a20  les = {'voice': 
+00007800: 766f 6963 657d 0d0a 2020 2020 656c 7365  voice}..    else
+00007810: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00007820: 6164 5b27 766f 6963 6527 5d20 3d20 766f  ad['voice'] = vo
+00007830: 6963 650d 0a20 2020 2069 6620 6361 7074  ice..    if capt
+00007840: 696f 6e3a 0d0a 2020 2020 2020 2020 7061  ion:..        pa
+00007850: 796c 6f61 645b 2763 6170 7469 6f6e 275d  yload['caption']
+00007860: 203d 2063 6170 7469 6f6e 0d0a 2020 2020   = caption..    
+00007870: 6966 2064 7572 6174 696f 6e3a 0d0a 2020  if duration:..  
+00007880: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+00007890: 7572 6174 696f 6e27 5d20 3d20 6475 7261  uration'] = dura
+000078a0: 7469 6f6e 0d0a 2020 2020 6966 2072 6570  tion..    if rep
+000078b0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+000078c0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000078d0: 6164 5b27 7265 706c 795f 746f 5f6d 6573  ad['reply_to_mes
+000078e0: 7361 6765 5f69 6427 5d20 3d20 7265 706c  sage_id'] = repl
+000078f0: 795f 746f 5f6d 6573 7361 6765 5f69 640d  y_to_message_id.
+00007900: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00007910: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+00007920: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+00007930: 726b 7570 275d 203d 2061 7761 6974 205f  rkup'] = await _
+00007940: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
+00007950: 6570 6c79 5f6d 6172 6b75 7029 0d0a 2020  eply_markup)..  
+00007960: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
+00007970: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00007980: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
+00007990: 3d20 7061 7273 655f 6d6f 6465 0d0a 2020  = parse_mode..  
+000079a0: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+000079b0: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+000079c0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000079d0: 7061 796c 6f61 645b 2764 6973 6162 6c65  payload['disable
+000079e0: 5f6e 6f74 6966 6963 6174 696f 6e27 5d20  _notification'] 
+000079f0: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
+00007a00: 6361 7469 6f6e 0d0a 2020 2020 6966 2074  cation..    if t
+00007a10: 696d 656f 7574 3a0d 0a20 2020 2020 2020  imeout:..       
+00007a20: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+00007a30: 7427 5d20 3d20 7469 6d65 6f75 740d 0a20  t'] = timeout.. 
+00007a40: 2020 2069 6620 6361 7074 696f 6e5f 656e     if caption_en
+00007a50: 7469 7469 6573 3a0d 0a20 2020 2020 2020  tities:..       
+00007a60: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
+00007a70: 6e5f 656e 7469 7469 6573 275d 203d 206a  n_entities'] = j
+00007a80: 736f 6e2e 6475 6d70 7328 7479 7065 732e  son.dumps(types.
+00007a90: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
+00007aa0: 5f6c 6973 745f 6f66 5f64 6963 7473 2863  _list_of_dicts(c
+00007ab0: 6170 7469 6f6e 5f65 6e74 6974 6965 7329  aption_entities)
+00007ac0: 290d 0a20 2020 2069 6620 616c 6c6f 775f  )..    if allow_
+00007ad0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00007ae0: 7265 706c 7920 6973 206e 6f74 204e 6f6e  reply is not Non
+00007af0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00007b00: 6f61 645b 2761 6c6c 6f77 5f73 656e 6469  oad['allow_sendi
+00007b10: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00007b20: 275d 203d 2061 6c6c 6f77 5f73 656e 6469  '] = allow_sendi
+00007b30: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00007b40: 0d0a 2020 2020 6966 2070 726f 7465 6374  ..    if protect
+00007b50: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+00007b60: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00007b70: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
+00007b80: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
+00007b90: 6563 745f 636f 6e74 656e 740d 0a20 2020  ect_content..   
+00007ba0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+00007bb0: 6164 5f69 643a 0d0a 2020 2020 2020 2020  ad_id:..        
+00007bc0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+00007bd0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
+00007be0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00007bf0: 0d0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
+00007c00: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+00007c10: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00007c20: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00007c30: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00007c40: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+00007c50: 2729 0d0a 0d0a 0d0a 6173 796e 6320 6465  ')......async de
+00007c60: 6620 7365 6e64 5f76 6964 656f 5f6e 6f74  f send_video_not
+00007c70: 6528 746f 6b65 6e2c 2063 6861 745f 6964  e(token, chat_id
+00007c80: 2c20 6461 7461 2c20 6475 7261 7469 6f6e  , data, duration
+00007c90: 3d4e 6f6e 652c 206c 656e 6774 683d 4e6f  =None, length=No
+00007ca0: 6e65 2c20 7265 706c 795f 746f 5f6d 6573  ne, reply_to_mes
+00007cb0: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
+00007cc0: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00007cd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007ce0: 2020 2020 2020 6469 7361 626c 655f 6e6f        disable_no
+00007cf0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+00007d00: 2074 696d 656f 7574 3d4e 6f6e 652c 2074   timeout=None, t
+00007d10: 6875 6d62 3d4e 6f6e 652c 2061 6c6c 6f77  humb=None, allow
+00007d20: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+00007d30: 5f72 6570 6c79 3d4e 6f6e 652c 2070 726f  _reply=None, pro
+00007d40: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
+00007d50: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00007d60: 2020 2020 2020 2020 6d65 7373 6167 655f          message_
+00007d70: 7468 7265 6164 5f69 643d 4e6f 6e65 293a  thread_id=None):
+00007d80: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00007d90: 203d 2072 2773 656e 6456 6964 656f 4e6f   = r'sendVideoNo
+00007da0: 7465 270d 0a20 2020 2070 6179 6c6f 6164  te'..    payload
+00007db0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00007dc0: 6861 745f 6964 7d0d 0a20 2020 2066 696c  hat_id}..    fil
+00007dd0: 6573 203d 204e 6f6e 650d 0a20 2020 2069  es = None..    i
+00007de0: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
+00007df0: 7269 6e67 2864 6174 6129 3a0d 0a20 2020  ring(data):..   
+00007e00: 2020 2020 2066 696c 6573 203d 207b 2776       files = {'v
+00007e10: 6964 656f 5f6e 6f74 6527 3a20 6461 7461  ideo_note': data
+00007e20: 7d0d 0a20 2020 2065 6c73 653a 0d0a 2020  }..    else:..  
+00007e30: 2020 2020 2020 7061 796c 6f61 645b 2776        payload['v
+00007e40: 6964 656f 5f6e 6f74 6527 5d20 3d20 6461  ideo_note'] = da
+00007e50: 7461 0d0a 2020 2020 6966 2064 7572 6174  ta..    if durat
+00007e60: 696f 6e3a 0d0a 2020 2020 2020 2020 7061  ion:..        pa
+00007e70: 796c 6f61 645b 2764 7572 6174 696f 6e27  yload['duration'
+00007e80: 5d20 3d20 6475 7261 7469 6f6e 0d0a 2020  ] = duration..  
+00007e90: 2020 6966 206c 656e 6774 6820 616e 6420    if length and 
+00007ea0: 2873 7472 286c 656e 6774 6829 2e69 7364  (str(length).isd
+00007eb0: 6967 6974 2829 2061 6e64 2069 6e74 286c  igit() and int(l
+00007ec0: 656e 6774 6829 203c 3d20 3633 3929 3a0d  ength) <= 639):.
+00007ed0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007ee0: 5b27 6c65 6e67 7468 275d 203d 206c 656e  ['length'] = len
+00007ef0: 6774 680d 0a20 2020 2065 6c73 653a 0d0a  gth..    else:..
+00007f00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007f10: 276c 656e 6774 6827 5d20 3d20 3633 3920  'length'] = 639 
+00007f20: 2023 2073 6565 6d73 206c 696b 6520 6974   # seems like it
+00007f30: 2069 7320 4d41 5820 6c65 6e67 7468 2073   is MAX length s
+00007f40: 697a 650d 0a20 2020 2069 6620 7265 706c  ize..    if repl
+00007f50: 795f 746f 5f6d 6573 7361 6765 5f69 643a  y_to_message_id:
+00007f60: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00007f70: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
+00007f80: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
+00007f90: 5f74 6f5f 6d65 7373 6167 655f 6964 0d0a  _to_message_id..
+00007fa0: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+00007fb0: 6b75 703a 0d0a 2020 2020 2020 2020 7061  kup:..        pa
+00007fc0: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+00007fd0: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
+00007fe0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+00007ff0: 706c 795f 6d61 726b 7570 290d 0a20 2020  ply_markup)..   
+00008000: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00008010: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+00008020: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00008030: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+00008040: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+00008050: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00008060: 6174 696f 6e0d 0a20 2020 2069 6620 7469  ation..    if ti
+00008070: 6d65 6f75 743a 0d0a 2020 2020 2020 2020  meout:..        
+00008080: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+00008090: 275d 203d 2074 696d 656f 7574 0d0a 2020  '] = timeout..  
+000080a0: 2020 6966 2074 6875 6d62 3a0d 0a20 2020    if thumb:..   
+000080b0: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
+000080c0: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
+000080d0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000080e0: 6966 2066 696c 6573 3a0d 0a20 2020 2020  if files:..     
+000080f0: 2020 2020 2020 2020 2020 2066 696c 6573             files
+00008100: 5b27 7468 756d 6227 5d20 3d20 7468 756d  ['thumb'] = thum
+00008110: 620d 0a20 2020 2020 2020 2020 2020 2065  b..            e
+00008120: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00008130: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
+00008140: 7468 756d 6227 3a20 7468 756d 627d 0d0a  thumb': thumb}..
+00008150: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00008160: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+00008170: 6164 5b27 7468 756d 6227 5d20 3d20 7468  ad['thumb'] = th
+00008180: 756d 620d 0a20 2020 2069 6620 616c 6c6f  umb..    if allo
+00008190: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+000081a0: 745f 7265 706c 7920 6973 206e 6f74 204e  t_reply is not N
+000081b0: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+000081c0: 796c 6f61 645b 2761 6c6c 6f77 5f73 656e  yload['allow_sen
+000081d0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+000081e0: 6c79 275d 203d 2061 6c6c 6f77 5f73 656e  ly'] = allow_sen
+000081f0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+00008200: 6c79 0d0a 2020 2020 6966 2070 726f 7465  ly..    if prote
+00008210: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
+00008220: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00008230: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
+00008240: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
+00008250: 6f74 6563 745f 636f 6e74 656e 740d 0a20  otect_content.. 
+00008260: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00008270: 7265 6164 5f69 643a 0d0a 2020 2020 2020  read_id:..      
+00008280: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+00008290: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
+000082a0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000082b0: 6964 0d0a 2020 2020 7265 7475 726e 2061  id..    return a
+000082c0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+000082d0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+000082e0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+000082f0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00008300: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
+00008310: 7374 2729 0d0a 0d0a 0d0a 6173 796e 6320  st')......async 
+00008320: 6465 6620 7365 6e64 5f61 7564 696f 2874  def send_audio(t
+00008330: 6f6b 656e 2c20 6368 6174 5f69 642c 2061  oken, chat_id, a
+00008340: 7564 696f 2c20 6361 7074 696f 6e3d 4e6f  udio, caption=No
+00008350: 6e65 2c20 6475 7261 7469 6f6e 3d4e 6f6e  ne, duration=Non
+00008360: 652c 2070 6572 666f 726d 6572 3d4e 6f6e  e, performer=Non
+00008370: 652c 2074 6974 6c65 3d4e 6f6e 652c 2072  e, title=None, r
+00008380: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00008390: 6964 3d4e 6f6e 652c 0d0a 2020 2020 2020  id=None,..      
+000083a0: 2020 2020 2020 2020 2072 6570 6c79 5f6d           reply_m
+000083b0: 6172 6b75 703d 4e6f 6e65 2c20 7061 7273  arkup=None, pars
+000083c0: 655f 6d6f 6465 3d4e 6f6e 652c 2064 6973  e_mode=None, dis
+000083d0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+000083e0: 6e3d 4e6f 6e65 2c20 7469 6d65 6f75 743d  n=None, timeout=
+000083f0: 4e6f 6e65 2c20 7468 756d 623d 4e6f 6e65  None, thumb=None
+00008400: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00008410: 2020 6361 7074 696f 6e5f 656e 7469 7469    caption_entiti
+00008420: 6573 3d4e 6f6e 652c 2061 6c6c 6f77 5f73  es=None, allow_s
+00008430: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
+00008440: 6570 6c79 3d4e 6f6e 652c 2070 726f 7465  eply=None, prote
+00008450: 6374 5f63 6f6e 7465 6e74 3d4e 6f6e 652c  ct_content=None,
+00008460: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00008470: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+00008480: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
+00008490: 6e64 4175 6469 6f27 0d0a 2020 2020 7061  ndAudio'..    pa
+000084a0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+000084b0: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+000084c0: 2020 6669 6c65 7320 3d20 4e6f 6e65 0d0a    files = None..
+000084d0: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
+000084e0: 6973 5f73 7472 696e 6728 6175 6469 6f29  is_string(audio)
+000084f0: 3a0d 0a20 2020 2020 2020 2066 696c 6573  :..        files
+00008500: 203d 207b 2761 7564 696f 273a 2061 7564   = {'audio': aud
+00008510: 696f 7d0d 0a20 2020 2065 6c73 653a 0d0a  io}..    else:..
+00008520: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008530: 2761 7564 696f 275d 203d 2061 7564 696f  'audio'] = audio
+00008540: 0d0a 2020 2020 6966 2063 6170 7469 6f6e  ..    if caption
+00008550: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00008560: 6164 5b27 6361 7074 696f 6e27 5d20 3d20  ad['caption'] = 
+00008570: 6361 7074 696f 6e0d 0a20 2020 2069 6620  caption..    if 
+00008580: 6475 7261 7469 6f6e 3a0d 0a20 2020 2020  duration:..     
+00008590: 2020 2070 6179 6c6f 6164 5b27 6475 7261     payload['dura
+000085a0: 7469 6f6e 275d 203d 2064 7572 6174 696f  tion'] = duratio
+000085b0: 6e0d 0a20 2020 2069 6620 7065 7266 6f72  n..    if perfor
+000085c0: 6d65 723a 0d0a 2020 2020 2020 2020 7061  mer:..        pa
+000085d0: 796c 6f61 645b 2770 6572 666f 726d 6572  yload['performer
+000085e0: 275d 203d 2070 6572 666f 726d 6572 0d0a  '] = performer..
+000085f0: 2020 2020 6966 2074 6974 6c65 3a0d 0a20      if title:.. 
+00008600: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008610: 7469 746c 6527 5d20 3d20 7469 746c 650d  title'] = title.
+00008620: 0a20 2020 2069 6620 7265 706c 795f 746f  .    if reply_to
+00008630: 5f6d 6573 7361 6765 5f69 643a 0d0a 2020  _message_id:..  
+00008640: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+00008650: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00008660: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
+00008670: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+00008680: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+00008690: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000086a0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
+000086b0: 5d20 3d20 6177 6169 7420 5f63 6f6e 7665  ] = await _conve
+000086c0: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+000086d0: 6d61 726b 7570 290d 0a20 2020 2069 6620  markup)..    if 
+000086e0: 7061 7273 655f 6d6f 6465 3a0d 0a20 2020  parse_mode:..   
+000086f0: 2020 2020 2070 6179 6c6f 6164 5b27 7061       payload['pa
+00008700: 7273 655f 6d6f 6465 275d 203d 2070 6172  rse_mode'] = par
+00008710: 7365 5f6d 6f64 650d 0a20 2020 2069 6620  se_mode..    if 
+00008720: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00008730: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
+00008740: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00008750: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
+00008760: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
+00008770: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00008780: 6e0d 0a20 2020 2069 6620 7469 6d65 6f75  n..    if timeou
+00008790: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+000087a0: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
+000087b0: 2074 696d 656f 7574 0d0a 2020 2020 6966   timeout..    if
+000087c0: 2074 6875 6d62 3a0d 0a20 2020 2020 2020   thumb:..       
+000087d0: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
+000087e0: 7374 7269 6e67 2874 6875 6d62 293a 0d0a  string(thumb):..
+000087f0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+00008800: 696c 6573 3a0d 0a20 2020 2020 2020 2020  iles:..         
+00008810: 2020 2020 2020 2066 696c 6573 5b27 7468         files['th
+00008820: 756d 6227 5d20 3d20 7468 756d 620d 0a20  umb'] = thumb.. 
+00008830: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00008840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008850: 2020 6669 6c65 7320 3d20 7b27 7468 756d    files = {'thum
+00008860: 6227 3a20 7468 756d 627d 0d0a 2020 2020  b': thumb}..    
+00008870: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00008880: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008890: 7468 756d 6227 5d20 3d20 7468 756d 620d  thumb'] = thumb.
+000088a0: 0a20 2020 2069 6620 6361 7074 696f 6e5f  .    if caption_
+000088b0: 656e 7469 7469 6573 3a0d 0a20 2020 2020  entities:..     
+000088c0: 2020 2070 6179 6c6f 6164 5b27 6361 7074     payload['capt
+000088d0: 696f 6e5f 656e 7469 7469 6573 275d 203d  ion_entities'] =
+000088e0: 206a 736f 6e2e 6475 6d70 7328 7479 7065   json.dumps(type
+000088f0: 732e 4d65 7373 6167 6545 6e74 6974 792e  s.MessageEntity.
+00008900: 746f 5f6c 6973 745f 6f66 5f64 6963 7473  to_list_of_dicts
+00008910: 2863 6170 7469 6f6e 5f65 6e74 6974 6965  (caption_entitie
+00008920: 7329 290d 0a20 2020 2069 6620 616c 6c6f  s))..    if allo
+00008930: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00008940: 745f 7265 706c 7920 6973 206e 6f74 204e  t_reply is not N
+00008950: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00008960: 796c 6f61 645b 2761 6c6c 6f77 5f73 656e  yload['allow_sen
+00008970: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+00008980: 6c79 275d 203d 2061 6c6c 6f77 5f73 656e  ly'] = allow_sen
+00008990: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+000089a0: 6c79 0d0a 2020 2020 6966 2070 726f 7465  ly..    if prote
+000089b0: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
+000089c0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+000089d0: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
+000089e0: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
+000089f0: 6f74 6563 745f 636f 6e74 656e 740d 0a20  otect_content.. 
+00008a00: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
+00008a10: 7265 6164 5f69 643a 0d0a 2020 2020 2020  read_id:..      
+00008a20: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+00008a30: 6765 5f74 6872 6561 645f 6964 275d 203d  ge_thread_id'] =
+00008a40: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00008a50: 6964 0d0a 2020 2020 7265 7475 726e 2061  id..    return a
+00008a60: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+00008a70: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00008a80: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00008a90: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00008aa0: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
+00008ab0: 7374 2729 0d0a 0d0a 0d0a 6173 796e 6320  st')......async 
+00008ac0: 6465 6620 7365 6e64 5f64 6174 6128 746f  def send_data(to
+00008ad0: 6b65 6e2c 2063 6861 745f 6964 2c20 6461  ken, chat_id, da
+00008ae0: 7461 2c20 6461 7461 5f74 7970 652c 2072  ta, data_type, r
+00008af0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00008b00: 6964 3d4e 6f6e 652c 2072 6570 6c79 5f6d  id=None, reply_m
+00008b10: 6172 6b75 703d 4e6f 6e65 2c20 7061 7273  arkup=None, pars
+00008b20: 655f 6d6f 6465 3d4e 6f6e 652c 0d0a 2020  e_mode=None,..  
+00008b30: 2020 2020 2020 2020 2020 2020 6469 7361              disa
+00008b40: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00008b50: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+00008b60: 6f6e 652c 2063 6170 7469 6f6e 3d4e 6f6e  one, caption=Non
+00008b70: 652c 2074 6875 6d62 3d4e 6f6e 652c 2063  e, thumb=None, c
+00008b80: 6170 7469 6f6e 5f65 6e74 6974 6965 733d  aption_entities=
+00008b90: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
+00008ba0: 2020 2020 2061 6c6c 6f77 5f73 656e 6469       allow_sendi
+00008bb0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00008bc0: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f63  =None, disable_c
+00008bd0: 6f6e 7465 6e74 5f74 7970 655f 6465 7465  ontent_type_dete
+00008be0: 6374 696f 6e3d 4e6f 6e65 2c20 7669 7369  ction=None, visi
+00008bf0: 626c 655f 6669 6c65 5f6e 616d 653d 4e6f  ble_file_name=No
+00008c00: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
+00008c10: 656e 743d 4e6f 6e65 2c0d 0a20 2020 2020  ent=None,..     
+00008c20: 2020 2020 2020 2020 206d 6573 7361 6765           message
+00008c30: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
+00008c40: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+00008c50: 6c20 3d20 6177 6169 7420 6765 745f 6d65  l = await get_me
+00008c60: 7468 6f64 5f62 795f 7479 7065 2864 6174  thod_by_type(dat
+00008c70: 615f 7479 7065 290d 0a20 2020 2070 6179  a_type)..    pay
+00008c80: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+00008c90: 273a 2063 6861 745f 6964 7d0d 0a20 2020  ': chat_id}..   
+00008ca0: 2066 696c 6573 203d 204e 6f6e 650d 0a20   files = None.. 
+00008cb0: 2020 2069 6620 6e6f 7420 7574 696c 2e69     if not util.i
+00008cc0: 735f 7374 7269 6e67 2864 6174 6129 3a0d  s_string(data):.
+00008cd0: 0a20 2020 2020 2020 2066 696c 655f 6461  .        file_da
+00008ce0: 7461 203d 2064 6174 610d 0a20 2020 2020  ta = data..     
+00008cf0: 2020 2069 6620 7669 7369 626c 655f 6669     if visible_fi
+00008d00: 6c65 5f6e 616d 653a 0d0a 2020 2020 2020  le_name:..      
+00008d10: 2020 2020 2020 6669 6c65 5f64 6174 6120        file_data 
+00008d20: 3d20 2876 6973 6962 6c65 5f66 696c 655f  = (visible_file_
+00008d30: 6e61 6d65 2c20 6461 7461 290d 0a20 2020  name, data)..   
+00008d40: 2020 2020 2066 696c 6573 203d 207b 6461       files = {da
+00008d50: 7461 5f74 7970 653a 2066 696c 655f 6461  ta_type: file_da
+00008d60: 7461 7d0d 0a20 2020 2065 6c73 653a 0d0a  ta}..    else:..
+00008d70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00008d80: 6461 7461 5f74 7970 655d 203d 2064 6174  data_type] = dat
+00008d90: 610d 0a20 2020 2069 6620 7265 706c 795f  a..    if reply_
+00008da0: 746f 5f6d 6573 7361 6765 5f69 643a 0d0a  to_message_id:..
 00008db0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008dc0: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
-00008dd0: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
-00008de0: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
-00008df0: 6974 686f 7574 5f72 6570 6c79 0a20 2020  ithout_reply.   
-00008e00: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
-00008e10: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
-00008e20: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008e30: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
-00008e40: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
-00008e50: 6e74 656e 740a 2020 2020 6966 206d 6574  ntent.    if met
-00008e60: 686f 645f 7572 6c20 3d3d 2027 7365 6e64  hod_url == 'send
-00008e70: 446f 6375 6d65 6e74 2720 616e 6420 6469  Document' and di
-00008e80: 7361 626c 655f 636f 6e74 656e 745f 7479  sable_content_ty
-00008e90: 7065 5f64 6574 6563 7469 6f6e 2069 7320  pe_detection is 
-00008ea0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00008eb0: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
-00008ec0: 6c65 5f63 6f6e 7465 6e74 5f74 7970 655f  le_content_type_
-00008ed0: 6465 7465 6374 696f 6e27 5d20 3d20 6469  detection'] = di
-00008ee0: 7361 626c 655f 636f 6e74 656e 745f 7479  sable_content_ty
-00008ef0: 7065 5f64 6574 6563 7469 6f6e 0a20 2020  pe_detection.   
-00008f00: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-00008f10: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-00008f20: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-00008f30: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-00008f40: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-00008f50: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00008f60: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00008f70: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00008f80: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
-00008f90: 733d 6669 6c65 732c 206d 6574 686f 643d  s=files, method=
-00008fa0: 2770 6f73 7427 290a 0a0a 6465 6620 6765  'post')...def ge
-00008fb0: 745f 6d65 7468 6f64 5f62 795f 7479 7065  t_method_by_type
-00008fc0: 2864 6174 615f 7479 7065 293a 0a20 2020  (data_type):.   
-00008fd0: 2069 6620 6461 7461 5f74 7970 6520 3d3d   if data_type ==
-00008fe0: 2027 646f 6375 6d65 6e74 273a 0a20 2020   'document':.   
-00008ff0: 2020 2020 2072 6574 7572 6e20 7227 7365       return r'se
-00009000: 6e64 446f 6375 6d65 6e74 270a 2020 2020  ndDocument'.    
-00009010: 6966 2064 6174 615f 7479 7065 203d 3d20  if data_type == 
-00009020: 2773 7469 636b 6572 273a 0a20 2020 2020  'sticker':.     
-00009030: 2020 2072 6574 7572 6e20 7227 7365 6e64     return r'send
-00009040: 5374 6963 6b65 7227 0a0a 0a64 6566 2062  Sticker'...def b
-00009050: 616e 5f63 6861 745f 6d65 6d62 6572 2874  an_chat_member(t
-00009060: 6f6b 656e 2c20 6368 6174 5f69 642c 2075  oken, chat_id, u
-00009070: 7365 725f 6964 2c20 756e 7469 6c5f 6461  ser_id, until_da
-00009080: 7465 3d4e 6f6e 652c 2072 6576 6f6b 655f  te=None, revoke_
-00009090: 6d65 7373 6167 6573 3d4e 6f6e 6529 3a0a  messages=None):.
-000090a0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000090b0: 2027 6261 6e43 6861 744d 656d 6265 7227   'banChatMember'
-000090c0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-000090d0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-000090e0: 6964 2c20 2775 7365 725f 6964 273a 2075  id, 'user_id': u
-000090f0: 7365 725f 6964 7d0a 2020 2020 6966 2069  ser_id}.    if i
-00009100: 7369 6e73 7461 6e63 6528 756e 7469 6c5f  sinstance(until_
-00009110: 6461 7465 2c20 6461 7465 7469 6d65 293a  date, datetime):
-00009120: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009130: 5b27 756e 7469 6c5f 6461 7465 275d 203d  ['until_date'] =
-00009140: 2075 6e74 696c 5f64 6174 652e 7469 6d65   until_date.time
-00009150: 7374 616d 7028 290a 2020 2020 656c 7365  stamp().    else
-00009160: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00009170: 645b 2775 6e74 696c 5f64 6174 6527 5d20  d['until_date'] 
-00009180: 3d20 756e 7469 6c5f 6461 7465 0a20 2020  = until_date.   
-00009190: 2069 6620 7265 766f 6b65 5f6d 6573 7361   if revoke_messa
-000091a0: 6765 7320 6973 206e 6f74 204e 6f6e 653a  ges is not None:
-000091b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000091c0: 5b27 7265 766f 6b65 5f6d 6573 7361 6765  ['revoke_message
-000091d0: 7327 5d20 3d20 7265 766f 6b65 5f6d 6573  s'] = revoke_mes
-000091e0: 7361 6765 730a 2020 2020 7265 7475 726e  sages.    return
-000091f0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-00009200: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00009210: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00009220: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-00009230: 0a0a 0a64 6566 2075 6e62 616e 5f63 6861  ...def unban_cha
-00009240: 745f 6d65 6d62 6572 2874 6f6b 656e 2c20  t_member(token, 
-00009250: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
-00009260: 2c20 6f6e 6c79 5f69 665f 6261 6e6e 6564  , only_if_banned
-00009270: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00009280: 6c20 3d20 2775 6e62 616e 4368 6174 4d65  l = 'unbanChatMe
-00009290: 6d62 6572 270a 2020 2020 7061 796c 6f61  mber'.    payloa
-000092a0: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-000092b0: 6368 6174 5f69 642c 2027 7573 6572 5f69  chat_id, 'user_i
-000092c0: 6427 3a20 7573 6572 5f69 647d 0a20 2020  d': user_id}.   
-000092d0: 2069 6620 6f6e 6c79 5f69 665f 6261 6e6e   if only_if_bann
-000092e0: 6564 2069 7320 6e6f 7420 4e6f 6e65 3a20  ed is not None: 
-000092f0: 2023 204e 6f6e 6520 2f20 5472 7565 202f   # None / True /
-00009300: 2046 616c 7365 0a20 2020 2020 2020 2070   False.        p
-00009310: 6179 6c6f 6164 5b27 6f6e 6c79 5f69 665f  ayload['only_if_
-00009320: 6261 6e6e 6564 275d 203d 206f 6e6c 795f  banned'] = only_
-00009330: 6966 5f62 616e 6e65 640a 2020 2020 7265  if_banned.    re
-00009340: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00009350: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00009360: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00009370: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-00009380: 7374 2729 0a0a 0a64 6566 2072 6573 7472  st')...def restr
-00009390: 6963 745f 6368 6174 5f6d 656d 6265 7228  ict_chat_member(
-000093a0: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
-000093b0: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
-000093c0: 2c20 756e 7469 6c5f 6461 7465 3d4e 6f6e  , until_date=Non
-000093d0: 652c 0a20 2020 2020 2020 2063 616e 5f73  e,.        can_s
-000093e0: 656e 645f 6d65 7373 6167 6573 3d4e 6f6e  end_messages=Non
-000093f0: 652c 2063 616e 5f73 656e 645f 6d65 6469  e, can_send_medi
-00009400: 615f 6d65 7373 6167 6573 3d4e 6f6e 652c  a_messages=None,
-00009410: 0a20 2020 2020 2020 2063 616e 5f73 656e  .        can_sen
-00009420: 645f 706f 6c6c 733d 4e6f 6e65 2c20 6361  d_polls=None, ca
-00009430: 6e5f 7365 6e64 5f6f 7468 6572 5f6d 6573  n_send_other_mes
-00009440: 7361 6765 733d 4e6f 6e65 2c0a 2020 2020  sages=None,.    
-00009450: 2020 2020 6361 6e5f 6164 645f 7765 625f      can_add_web_
-00009460: 7061 6765 5f70 7265 7669 6577 733d 4e6f  page_previews=No
-00009470: 6e65 2c20 6361 6e5f 6368 616e 6765 5f69  ne, can_change_i
-00009480: 6e66 6f3d 4e6f 6e65 2c0a 2020 2020 2020  nfo=None,.      
-00009490: 2020 6361 6e5f 696e 7669 7465 5f75 7365    can_invite_use
-000094a0: 7273 3d4e 6f6e 652c 2063 616e 5f70 696e  rs=None, can_pin
-000094b0: 5f6d 6573 7361 6765 733d 4e6f 6e65 293a  _messages=None):
-000094c0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-000094d0: 3d20 2772 6573 7472 6963 7443 6861 744d  = 'restrictChatM
-000094e0: 656d 6265 7227 0a20 2020 2070 6572 6d69  ember'.    permi
-000094f0: 7373 696f 6e73 203d 207b 7d0a 2020 2020  ssions = {}.    
-00009500: 6966 2063 616e 5f73 656e 645f 6d65 7373  if can_send_mess
-00009510: 6167 6573 2069 7320 6e6f 7420 4e6f 6e65  ages is not None
-00009520: 3a0a 2020 2020 2020 2020 7065 726d 6973  :.        permis
-00009530: 7369 6f6e 735b 2763 616e 5f73 656e 645f  sions['can_send_
-00009540: 6d65 7373 6167 6573 275d 203d 2063 616e  messages'] = can
-00009550: 5f73 656e 645f 6d65 7373 6167 6573 0a20  _send_messages. 
-00009560: 2020 2069 6620 6361 6e5f 7365 6e64 5f6d     if can_send_m
-00009570: 6564 6961 5f6d 6573 7361 6765 7320 6973  edia_messages is
-00009580: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00009590: 2020 2070 6572 6d69 7373 696f 6e73 5b27     permissions['
-000095a0: 6361 6e5f 7365 6e64 5f6d 6564 6961 5f6d  can_send_media_m
-000095b0: 6573 7361 6765 7327 5d20 3d20 6361 6e5f  essages'] = can_
-000095c0: 7365 6e64 5f6d 6564 6961 5f6d 6573 7361  send_media_messa
-000095d0: 6765 730a 2020 2020 6966 2063 616e 5f73  ges.    if can_s
-000095e0: 656e 645f 706f 6c6c 7320 6973 206e 6f74  end_polls is not
-000095f0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00009600: 6572 6d69 7373 696f 6e73 5b27 6361 6e5f  ermissions['can_
-00009610: 7365 6e64 5f70 6f6c 6c73 275d 203d 2063  send_polls'] = c
-00009620: 616e 5f73 656e 645f 706f 6c6c 730a 2020  an_send_polls.  
-00009630: 2020 6966 2063 616e 5f73 656e 645f 6f74    if can_send_ot
-00009640: 6865 725f 6d65 7373 6167 6573 2069 7320  her_messages is 
-00009650: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00009660: 2020 7065 726d 6973 7369 6f6e 735b 2763    permissions['c
-00009670: 616e 5f73 656e 645f 6f74 6865 725f 6d65  an_send_other_me
-00009680: 7373 6167 6573 275d 203d 2063 616e 5f73  ssages'] = can_s
-00009690: 656e 645f 6f74 6865 725f 6d65 7373 6167  end_other_messag
-000096a0: 6573 0a20 2020 2069 6620 6361 6e5f 6164  es.    if can_ad
-000096b0: 645f 7765 625f 7061 6765 5f70 7265 7669  d_web_page_previ
-000096c0: 6577 7320 6973 206e 6f74 204e 6f6e 653a  ews is not None:
-000096d0: 0a20 2020 2020 2020 2070 6572 6d69 7373  .        permiss
-000096e0: 696f 6e73 5b27 6361 6e5f 6164 645f 7765  ions['can_add_we
-000096f0: 625f 7061 6765 5f70 7265 7669 6577 7327  b_page_previews'
-00009700: 5d20 3d20 6361 6e5f 6164 645f 7765 625f  ] = can_add_web_
-00009710: 7061 6765 5f70 7265 7669 6577 730a 2020  page_previews.  
-00009720: 2020 6966 2063 616e 5f63 6861 6e67 655f    if can_change_
-00009730: 696e 666f 2069 7320 6e6f 7420 4e6f 6e65  info is not None
-00009740: 3a0a 2020 2020 2020 2020 7065 726d 6973  :.        permis
-00009750: 7369 6f6e 735b 2763 616e 5f63 6861 6e67  sions['can_chang
-00009760: 655f 696e 666f 275d 203d 2063 616e 5f63  e_info'] = can_c
-00009770: 6861 6e67 655f 696e 666f 0a20 2020 2069  hange_info.    i
-00009780: 6620 6361 6e5f 696e 7669 7465 5f75 7365  f can_invite_use
-00009790: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rs is not None:.
-000097a0: 2020 2020 2020 2020 7065 726d 6973 7369          permissi
-000097b0: 6f6e 735b 2763 616e 5f69 6e76 6974 655f  ons['can_invite_
-000097c0: 7573 6572 7327 5d20 3d20 6361 6e5f 696e  users'] = can_in
-000097d0: 7669 7465 5f75 7365 7273 0a20 2020 2069  vite_users.    i
-000097e0: 6620 6361 6e5f 7069 6e5f 6d65 7373 6167  f can_pin_messag
-000097f0: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0a  es is not None:.
-00009800: 2020 2020 2020 2020 7065 726d 6973 7369          permissi
-00009810: 6f6e 735b 2763 616e 5f70 696e 5f6d 6573  ons['can_pin_mes
-00009820: 7361 6765 7327 5d20 3d20 6361 6e5f 7069  sages'] = can_pi
-00009830: 6e5f 6d65 7373 6167 6573 0a20 2020 2070  n_messages.    p
-00009840: 6572 6d69 7373 696f 6e73 5f6a 736f 6e20  ermissions_json 
-00009850: 3d20 6a73 6f6e 2e64 756d 7073 2870 6572  = json.dumps(per
-00009860: 6d69 7373 696f 6e73 290a 2020 2020 7061  missions).    pa
-00009870: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00009880: 6427 3a20 6368 6174 5f69 642c 2027 7573  d': chat_id, 'us
-00009890: 6572 5f69 6427 3a20 7573 6572 5f69 642c  er_id': user_id,
-000098a0: 2027 7065 726d 6973 7369 6f6e 7327 3a20   'permissions': 
-000098b0: 7065 726d 6973 7369 6f6e 735f 6a73 6f6e  permissions_json
-000098c0: 7d0a 2020 2020 6966 2075 6e74 696c 5f64  }.    if until_d
-000098d0: 6174 6520 6973 206e 6f74 204e 6f6e 653a  ate is not None:
-000098e0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-000098f0: 7374 616e 6365 2875 6e74 696c 5f64 6174  stance(until_dat
-00009900: 652c 2064 6174 6574 696d 6529 3a0a 2020  e, datetime):.  
-00009910: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
-00009920: 645b 2775 6e74 696c 5f64 6174 6527 5d20  d['until_date'] 
-00009930: 3d20 756e 7469 6c5f 6461 7465 2e74 696d  = until_date.tim
-00009940: 6573 7461 6d70 2829 0a20 2020 2020 2020  estamp().       
-00009950: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00009960: 2020 2070 6179 6c6f 6164 5b27 756e 7469     payload['unti
-00009970: 6c5f 6461 7465 275d 203d 2075 6e74 696c  l_date'] = until
-00009980: 5f64 6174 650a 2020 2020 7265 7475 726e  _date.    return
-00009990: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-000099a0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-000099b0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-000099c0: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-000099d0: 0a0a 0a64 6566 2070 726f 6d6f 7465 5f63  ...def promote_c
-000099e0: 6861 745f 6d65 6d62 6572 280a 2020 2020  hat_member(.    
-000099f0: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
-00009a00: 6964 2c20 7573 6572 5f69 642c 2063 616e  id, user_id, can
-00009a10: 5f63 6861 6e67 655f 696e 666f 3d4e 6f6e  _change_info=Non
-00009a20: 652c 2063 616e 5f70 6f73 745f 6d65 7373  e, can_post_mess
-00009a30: 6167 6573 3d4e 6f6e 652c 0a20 2020 2020  ages=None,.     
-00009a40: 2020 2063 616e 5f65 6469 745f 6d65 7373     can_edit_mess
-00009a50: 6167 6573 3d4e 6f6e 652c 2063 616e 5f64  ages=None, can_d
-00009a60: 656c 6574 655f 6d65 7373 6167 6573 3d4e  elete_messages=N
-00009a70: 6f6e 652c 2063 616e 5f69 6e76 6974 655f  one, can_invite_
-00009a80: 7573 6572 733d 4e6f 6e65 2c0a 2020 2020  users=None,.    
-00009a90: 2020 2020 6361 6e5f 7265 7374 7269 6374      can_restrict
-00009aa0: 5f6d 656d 6265 7273 3d4e 6f6e 652c 2063  _members=None, c
-00009ab0: 616e 5f70 696e 5f6d 6573 7361 6765 733d  an_pin_messages=
-00009ac0: 4e6f 6e65 2c20 6361 6e5f 7072 6f6d 6f74  None, can_promot
-00009ad0: 655f 6d65 6d62 6572 733d 4e6f 6e65 2c0a  e_members=None,.
-00009ae0: 2020 2020 2020 2020 6973 5f61 6e6f 6e79          is_anony
-00009af0: 6d6f 7573 3d4e 6f6e 652c 2063 616e 5f6d  mous=None, can_m
-00009b00: 616e 6167 655f 6368 6174 3d4e 6f6e 652c  anage_chat=None,
-00009b10: 2063 616e 5f6d 616e 6167 655f 7669 6465   can_manage_vide
-00009b20: 6f5f 6368 6174 733d 4e6f 6e65 2c0a 2020  o_chats=None,.  
-00009b30: 2020 2020 2020 6361 6e5f 6d61 6e61 6765        can_manage
-00009b40: 5f74 6f70 6963 733d 4e6f 6e65 293a 0a20  _topics=None):. 
-00009b50: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00009b60: 2770 726f 6d6f 7465 4368 6174 4d65 6d62  'promoteChatMemb
-00009b70: 6572 270a 2020 2020 7061 796c 6f61 6420  er'.    payload 
-00009b80: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00009b90: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
-00009ba0: 3a20 7573 6572 5f69 647d 0a20 2020 2069  : user_id}.    i
-00009bb0: 6620 6361 6e5f 6368 616e 6765 5f69 6e66  f can_change_inf
-00009bc0: 6f20 6973 206e 6f74 204e 6f6e 653a 0a20  o is not None:. 
-00009bd0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00009be0: 6361 6e5f 6368 616e 6765 5f69 6e66 6f27  can_change_info'
-00009bf0: 5d20 3d20 6361 6e5f 6368 616e 6765 5f69  ] = can_change_i
-00009c00: 6e66 6f0a 2020 2020 6966 2063 616e 5f70  nfo.    if can_p
-00009c10: 6f73 745f 6d65 7373 6167 6573 2069 7320  ost_messages is 
-00009c20: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00009c30: 2020 7061 796c 6f61 645b 2763 616e 5f70    payload['can_p
-00009c40: 6f73 745f 6d65 7373 6167 6573 275d 203d  ost_messages'] =
-00009c50: 2063 616e 5f70 6f73 745f 6d65 7373 6167   can_post_messag
-00009c60: 6573 0a20 2020 2069 6620 6361 6e5f 6564  es.    if can_ed
-00009c70: 6974 5f6d 6573 7361 6765 7320 6973 206e  it_messages is n
-00009c80: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00009c90: 2070 6179 6c6f 6164 5b27 6361 6e5f 6564   payload['can_ed
-00009ca0: 6974 5f6d 6573 7361 6765 7327 5d20 3d20  it_messages'] = 
-00009cb0: 6361 6e5f 6564 6974 5f6d 6573 7361 6765  can_edit_message
-00009cc0: 730a 2020 2020 6966 2063 616e 5f64 656c  s.    if can_del
-00009cd0: 6574 655f 6d65 7373 6167 6573 2069 7320  ete_messages is 
-00009ce0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00009cf0: 2020 7061 796c 6f61 645b 2763 616e 5f64    payload['can_d
-00009d00: 656c 6574 655f 6d65 7373 6167 6573 275d  elete_messages']
-00009d10: 203d 2063 616e 5f64 656c 6574 655f 6d65   = can_delete_me
-00009d20: 7373 6167 6573 0a20 2020 2069 6620 6361  ssages.    if ca
-00009d30: 6e5f 696e 7669 7465 5f75 7365 7273 2069  n_invite_users i
-00009d40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00009d50: 2020 2020 7061 796c 6f61 645b 2763 616e      payload['can
-00009d60: 5f69 6e76 6974 655f 7573 6572 7327 5d20  _invite_users'] 
-00009d70: 3d20 6361 6e5f 696e 7669 7465 5f75 7365  = can_invite_use
-00009d80: 7273 0a20 2020 2069 6620 6361 6e5f 7265  rs.    if can_re
-00009d90: 7374 7269 6374 5f6d 656d 6265 7273 2069  strict_members i
-00009da0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00009db0: 2020 2020 7061 796c 6f61 645b 2763 616e      payload['can
-00009dc0: 5f72 6573 7472 6963 745f 6d65 6d62 6572  _restrict_member
-00009dd0: 7327 5d20 3d20 6361 6e5f 7265 7374 7269  s'] = can_restri
-00009de0: 6374 5f6d 656d 6265 7273 0a20 2020 2069  ct_members.    i
-00009df0: 6620 6361 6e5f 7069 6e5f 6d65 7373 6167  f can_pin_messag
-00009e00: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0a  es is not None:.
-00009e10: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009e20: 2763 616e 5f70 696e 5f6d 6573 7361 6765  'can_pin_message
-00009e30: 7327 5d20 3d20 6361 6e5f 7069 6e5f 6d65  s'] = can_pin_me
-00009e40: 7373 6167 6573 0a20 2020 2069 6620 6361  ssages.    if ca
-00009e50: 6e5f 7072 6f6d 6f74 655f 6d65 6d62 6572  n_promote_member
-00009e60: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00009e70: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00009e80: 6361 6e5f 7072 6f6d 6f74 655f 6d65 6d62  can_promote_memb
-00009e90: 6572 7327 5d20 3d20 6361 6e5f 7072 6f6d  ers'] = can_prom
-00009ea0: 6f74 655f 6d65 6d62 6572 730a 2020 2020  ote_members.    
-00009eb0: 6966 2069 735f 616e 6f6e 796d 6f75 7320  if is_anonymous 
-00009ec0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00009ed0: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
-00009ee0: 5f61 6e6f 6e79 6d6f 7573 275d 203d 2069  _anonymous'] = i
-00009ef0: 735f 616e 6f6e 796d 6f75 730a 2020 2020  s_anonymous.    
-00009f00: 6966 2063 616e 5f6d 616e 6167 655f 6368  if can_manage_ch
-00009f10: 6174 2069 7320 6e6f 7420 4e6f 6e65 3a0a  at is not None:.
-00009f20: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009f30: 2763 616e 5f6d 616e 6167 655f 6368 6174  'can_manage_chat
-00009f40: 275d 203d 2063 616e 5f6d 616e 6167 655f  '] = can_manage_
-00009f50: 6368 6174 0a20 2020 2069 6620 6361 6e5f  chat.    if can_
-00009f60: 6d61 6e61 6765 5f76 6964 656f 5f63 6861  manage_video_cha
-00009f70: 7473 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ts is not None:.
-00009f80: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009f90: 2763 616e 5f6d 616e 6167 655f 7669 6465  'can_manage_vide
-00009fa0: 6f5f 6368 6174 7327 5d20 3d20 6361 6e5f  o_chats'] = can_
-00009fb0: 6d61 6e61 6765 5f76 6964 656f 5f63 6861  manage_video_cha
-00009fc0: 7473 0a20 2020 2069 6620 6361 6e5f 6d61  ts.    if can_ma
-00009fd0: 6e61 6765 5f74 6f70 6963 7320 6973 206e  nage_topics is n
-00009fe0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00009ff0: 2070 6179 6c6f 6164 5b27 6361 6e5f 6d61   payload['can_ma
-0000a000: 6e61 6765 5f74 6f70 6963 7327 5d20 3d20  nage_topics'] = 
-0000a010: 6361 6e5f 6d61 6e61 6765 5f74 6f70 6963  can_manage_topic
-0000a020: 730a 2020 2020 7265 7475 726e 205f 6d61  s.    return _ma
-0000a030: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000a040: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000a050: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a060: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000a070: 6566 2073 6574 5f63 6861 745f 6164 6d69  ef set_chat_admi
-0000a080: 6e69 7374 7261 746f 725f 6375 7374 6f6d  nistrator_custom
-0000a090: 5f74 6974 6c65 2874 6f6b 656e 2c20 6368  _title(token, ch
-0000a0a0: 6174 5f69 642c 2075 7365 725f 6964 2c20  at_id, user_id, 
-0000a0b0: 6375 7374 6f6d 5f74 6974 6c65 293a 0a20  custom_title):. 
-0000a0c0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000a0d0: 2773 6574 4368 6174 4164 6d69 6e69 7374  'setChatAdminist
-0000a0e0: 7261 746f 7243 7573 746f 6d54 6974 6c65  ratorCustomTitle
-0000a0f0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000a100: 7b0a 2020 2020 2020 2020 2763 6861 745f  {.        'chat_
-0000a110: 6964 273a 2063 6861 745f 6964 2c20 2775  id': chat_id, 'u
-0000a120: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
-0000a130: 2c20 2763 7573 746f 6d5f 7469 746c 6527  , 'custom_title'
-0000a140: 3a20 6375 7374 6f6d 5f74 6974 6c65 0a20  : custom_title. 
-0000a150: 2020 207d 0a20 2020 2072 6574 7572 6e20     }.    return 
-0000a160: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000a170: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000a180: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000a190: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000a1a0: 0a0a 6465 6620 6261 6e5f 6368 6174 5f73  ..def ban_chat_s
-0000a1b0: 656e 6465 725f 6368 6174 2874 6f6b 656e  ender_chat(token
-0000a1c0: 2c20 6368 6174 5f69 642c 2073 656e 6465  , chat_id, sende
-0000a1d0: 725f 6368 6174 5f69 6429 3a0a 2020 2020  r_chat_id):.    
-0000a1e0: 6d65 7468 6f64 5f75 726c 203d 2027 6261  method_url = 'ba
-0000a1f0: 6e43 6861 7453 656e 6465 7243 6861 7427  nChatSenderChat'
-0000a200: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000a210: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000a220: 6964 2c20 2773 656e 6465 725f 6368 6174  id, 'sender_chat
-0000a230: 5f69 6427 3a20 7365 6e64 6572 5f63 6861  _id': sender_cha
-0000a240: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
-0000a250: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
-0000a260: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000a270: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000a280: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-0000a290: 0a0a 0a64 6566 2075 6e62 616e 5f63 6861  ...def unban_cha
-0000a2a0: 745f 7365 6e64 6572 5f63 6861 7428 746f  t_sender_chat(to
-0000a2b0: 6b65 6e2c 2063 6861 745f 6964 2c20 7365  ken, chat_id, se
-0000a2c0: 6e64 6572 5f63 6861 745f 6964 293a 0a20  nder_chat_id):. 
-0000a2d0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000a2e0: 2775 6e62 616e 4368 6174 5365 6e64 6572  'unbanChatSender
-0000a2f0: 4368 6174 270a 2020 2020 7061 796c 6f61  Chat'.    payloa
-0000a300: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-0000a310: 6368 6174 5f69 642c 2027 7365 6e64 6572  chat_id, 'sender
-0000a320: 5f63 6861 745f 6964 273a 2073 656e 6465  _chat_id': sende
-0000a330: 725f 6368 6174 5f69 647d 0a20 2020 2072  r_chat_id}.    r
-0000a340: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000a350: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000a360: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000a370: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
-0000a380: 6f73 7427 290a 0a0a 6465 6620 7365 745f  ost')...def set_
-0000a390: 6368 6174 5f70 6572 6d69 7373 696f 6e73  chat_permissions
-0000a3a0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-0000a3b0: 2070 6572 6d69 7373 696f 6e73 293a 0a20   permissions):. 
-0000a3c0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000a3d0: 2773 6574 4368 6174 5065 726d 6973 7369  'setChatPermissi
-0000a3e0: 6f6e 7327 0a20 2020 2070 6179 6c6f 6164  ons'.    payload
-0000a3f0: 203d 207b 0a20 2020 2020 2020 2027 6368   = {.        'ch
-0000a400: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-0000a410: 0a20 2020 2020 2020 2027 7065 726d 6973  .        'permis
-0000a420: 7369 6f6e 7327 3a20 7065 726d 6973 7369  sions': permissi
-0000a430: 6f6e 732e 746f 5f6a 736f 6e28 290a 2020  ons.to_json().  
-0000a440: 2020 7d0a 2020 2020 7265 7475 726e 205f    }.    return _
-0000a450: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000a460: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000a470: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000a480: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000a490: 0a64 6566 2063 7265 6174 655f 6368 6174  .def create_chat
-0000a4a0: 5f69 6e76 6974 655f 6c69 6e6b 2874 6f6b  _invite_link(tok
-0000a4b0: 656e 2c20 6368 6174 5f69 642c 206e 616d  en, chat_id, nam
-0000a4c0: 652c 2065 7870 6972 655f 6461 7465 2c20  e, expire_date, 
-0000a4d0: 6d65 6d62 6572 5f6c 696d 6974 2c20 6372  member_limit, cr
-0000a4e0: 6561 7465 735f 6a6f 696e 5f72 6571 7565  eates_join_reque
-0000a4f0: 7374 293a 0a20 2020 206d 6574 686f 645f  st):.    method_
-0000a500: 7572 6c20 3d20 2763 7265 6174 6543 6861  url = 'createCha
-0000a510: 7449 6e76 6974 654c 696e 6b27 0a20 2020  tInviteLink'.   
-0000a520: 2070 6179 6c6f 6164 203d 207b 0a20 2020   payload = {.   
-0000a530: 2020 2020 2027 6368 6174 5f69 6427 3a20       'chat_id': 
-0000a540: 6368 6174 5f69 640a 2020 2020 7d0a 0a20  chat_id.    }.. 
-0000a550: 2020 2069 6620 6578 7069 7265 5f64 6174     if expire_dat
-0000a560: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000a570: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000a580: 616e 6365 2865 7870 6972 655f 6461 7465  ance(expire_date
-0000a590: 2c20 6461 7465 7469 6d65 293a 0a20 2020  , datetime):.   
-0000a5a0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-0000a5b0: 5b27 6578 7069 7265 5f64 6174 6527 5d20  ['expire_date'] 
-0000a5c0: 3d20 6578 7069 7265 5f64 6174 652e 7469  = expire_date.ti
-0000a5d0: 6d65 7374 616d 7028 290a 2020 2020 2020  mestamp().      
-0000a5e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000a5f0: 2020 2020 7061 796c 6f61 645b 2765 7870      payload['exp
-0000a600: 6972 655f 6461 7465 275d 203d 2065 7870  ire_date'] = exp
-0000a610: 6972 655f 6461 7465 0a20 2020 2069 6620  ire_date.    if 
-0000a620: 6d65 6d62 6572 5f6c 696d 6974 3a0a 2020  member_limit:.  
-0000a630: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
-0000a640: 656d 6265 725f 6c69 6d69 7427 5d20 3d20  ember_limit'] = 
-0000a650: 6d65 6d62 6572 5f6c 696d 6974 0a20 2020  member_limit.   
-0000a660: 2069 6620 6372 6561 7465 735f 6a6f 696e   if creates_join
-0000a670: 5f72 6571 7565 7374 2069 7320 6e6f 7420  _request is not 
-0000a680: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000a690: 796c 6f61 645b 2763 7265 6174 6573 5f6a  yload['creates_j
-0000a6a0: 6f69 6e5f 7265 7175 6573 7427 5d20 3d20  oin_request'] = 
-0000a6b0: 6372 6561 7465 735f 6a6f 696e 5f72 6571  creates_join_req
-0000a6c0: 7565 7374 0a20 2020 2069 6620 6e61 6d65  uest.    if name
-0000a6d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000a6e0: 645b 276e 616d 6527 5d20 3d20 6e61 6d65  d['name'] = name
-0000a6f0: 0a0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
-0000a700: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000a710: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000a720: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a730: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-0000a740: 6566 2065 6469 745f 6368 6174 5f69 6e76  ef edit_chat_inv
-0000a750: 6974 655f 6c69 6e6b 2874 6f6b 656e 2c20  ite_link(token, 
-0000a760: 6368 6174 5f69 642c 2069 6e76 6974 655f  chat_id, invite_
-0000a770: 6c69 6e6b 2c20 6e61 6d65 2c20 6578 7069  link, name, expi
-0000a780: 7265 5f64 6174 652c 206d 656d 6265 725f  re_date, member_
-0000a790: 6c69 6d69 742c 2063 7265 6174 6573 5f6a  limit, creates_j
-0000a7a0: 6f69 6e5f 7265 7175 6573 7429 3a0a 2020  oin_request):.  
-0000a7b0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
-0000a7c0: 6564 6974 4368 6174 496e 7669 7465 4c69  editChatInviteLi
-0000a7d0: 6e6b 270a 2020 2020 7061 796c 6f61 6420  nk'.    payload 
-0000a7e0: 3d20 7b0a 2020 2020 2020 2020 2763 6861  = {.        'cha
-0000a7f0: 745f 6964 273a 2063 6861 745f 6964 2c0a  t_id': chat_id,.
-0000a800: 2020 2020 2020 2020 2769 6e76 6974 655f          'invite_
-0000a810: 6c69 6e6b 273a 2069 6e76 6974 655f 6c69  link': invite_li
-0000a820: 6e6b 0a20 2020 207d 0a0a 2020 2020 6966  nk.    }..    if
-0000a830: 2065 7870 6972 655f 6461 7465 2069 7320   expire_date is 
-0000a840: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a850: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0000a860: 6578 7069 7265 5f64 6174 652c 2064 6174  expire_date, dat
-0000a870: 6574 696d 6529 3a0a 2020 2020 2020 2020  etime):.        
-0000a880: 2020 2020 7061 796c 6f61 645b 2765 7870      payload['exp
-0000a890: 6972 655f 6461 7465 275d 203d 2065 7870  ire_date'] = exp
-0000a8a0: 6972 655f 6461 7465 2e74 696d 6573 7461  ire_date.timesta
-0000a8b0: 6d70 2829 0a20 2020 2020 2020 2065 6c73  mp().        els
-0000a8c0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-0000a8d0: 6179 6c6f 6164 5b27 6578 7069 7265 5f64  ayload['expire_d
-0000a8e0: 6174 6527 5d20 3d20 6578 7069 7265 5f64  ate'] = expire_d
-0000a8f0: 6174 650a 0a20 2020 2069 6620 6d65 6d62  ate..    if memb
-0000a900: 6572 5f6c 696d 6974 2069 7320 6e6f 7420  er_limit is not 
-0000a910: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000a920: 796c 6f61 645b 276d 656d 6265 725f 6c69  yload['member_li
-0000a930: 6d69 7427 5d20 3d20 6d65 6d62 6572 5f6c  mit'] = member_l
-0000a940: 696d 6974 0a20 2020 2069 6620 6e61 6d65  imit.    if name
-0000a950: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000a960: 645b 276e 616d 6527 5d20 3d20 6e61 6d65  d['name'] = name
-0000a970: 0a20 2020 2069 6620 6372 6561 7465 735f  .    if creates_
-0000a980: 6a6f 696e 5f72 6571 7565 7374 2069 7320  join_request is 
-0000a990: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a9a0: 2020 7061 796c 6f61 645b 2763 7265 6174    payload['creat
-0000a9b0: 6573 5f6a 6f69 6e5f 7265 7175 6573 7427  es_join_request'
-0000a9c0: 5d20 3d20 6372 6561 7465 735f 6a6f 696e  ] = creates_join
-0000a9d0: 5f72 6571 7565 7374 0a0a 2020 2020 7265  _request..    re
-0000a9e0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000a9f0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000aa00: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000aa10: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000aa20: 7374 2729 0a0a 0a64 6566 2072 6576 6f6b  st')...def revok
-0000aa30: 655f 6368 6174 5f69 6e76 6974 655f 6c69  e_chat_invite_li
-0000aa40: 6e6b 2874 6f6b 656e 2c20 6368 6174 5f69  nk(token, chat_i
-0000aa50: 642c 2069 6e76 6974 655f 6c69 6e6b 293a  d, invite_link):
-0000aa60: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000aa70: 3d20 2772 6576 6f6b 6543 6861 7449 6e76  = 'revokeChatInv
-0000aa80: 6974 654c 696e 6b27 0a20 2020 2070 6179  iteLink'.    pay
-0000aa90: 6c6f 6164 203d 207b 0a20 2020 2020 2020  load = {.       
-0000aaa0: 2027 6368 6174 5f69 6427 3a20 6368 6174   'chat_id': chat
-0000aab0: 5f69 642c 0a20 2020 2020 2020 2027 696e  _id,.        'in
-0000aac0: 7669 7465 5f6c 696e 6b27 3a20 696e 7669  vite_link': invi
-0000aad0: 7465 5f6c 696e 6b0a 2020 2020 7d0a 2020  te_link.    }.  
-0000aae0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000aaf0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000ab00: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000ab10: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-0000ab20: 3d27 706f 7374 2729 0a0a 0a64 6566 2065  ='post')...def e
-0000ab30: 7870 6f72 745f 6368 6174 5f69 6e76 6974  xport_chat_invit
-0000ab40: 655f 6c69 6e6b 2874 6f6b 656e 2c20 6368  e_link(token, ch
-0000ab50: 6174 5f69 6429 3a0a 2020 2020 6d65 7468  at_id):.    meth
-0000ab60: 6f64 5f75 726c 203d 2027 6578 706f 7274  od_url = 'export
-0000ab70: 4368 6174 496e 7669 7465 4c69 6e6b 270a  ChatInviteLink'.
-0000ab80: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-0000ab90: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
-0000aba0: 647d 0a20 2020 2072 6574 7572 6e20 5f6d  d}.    return _m
-0000abb0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000abc0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000abd0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000abe0: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000abf0: 6465 6620 6170 7072 6f76 655f 6368 6174  def approve_chat
-0000ac00: 5f6a 6f69 6e5f 7265 7175 6573 7428 746f  _join_request(to
-0000ac10: 6b65 6e2c 2063 6861 745f 6964 2c20 7573  ken, chat_id, us
-0000ac20: 6572 5f69 6429 3a0a 2020 2020 6d65 7468  er_id):.    meth
-0000ac30: 6f64 5f75 726c 203d 2027 6170 7072 6f76  od_url = 'approv
-0000ac40: 6543 6861 744a 6f69 6e52 6571 7565 7374  eChatJoinRequest
-0000ac50: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000ac60: 7b0a 2020 2020 2020 2020 2763 6861 745f  {.        'chat_
-0000ac70: 6964 273a 2063 6861 745f 6964 2c0a 2020  id': chat_id,.  
-0000ac80: 2020 2020 2020 2775 7365 725f 6964 273a        'user_id':
-0000ac90: 2075 7365 725f 6964 0a20 2020 207d 0a20   user_id.    }. 
-0000aca0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000acb0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000acc0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000acd0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000ace0: 643d 2770 6f73 7427 290a 0a0a 6465 6620  d='post')...def 
-0000acf0: 6465 636c 696e 655f 6368 6174 5f6a 6f69  decline_chat_joi
-0000ad00: 6e5f 7265 7175 6573 7428 746f 6b65 6e2c  n_request(token,
-0000ad10: 2063 6861 745f 6964 2c20 7573 6572 5f69   chat_id, user_i
-0000ad20: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000ad30: 726c 203d 2027 6465 636c 696e 6543 6861  rl = 'declineCha
-0000ad40: 744a 6f69 6e52 6571 7565 7374 270a 2020  tJoinRequest'.  
-0000ad50: 2020 7061 796c 6f61 6420 3d20 7b0a 2020    payload = {.  
-0000ad60: 2020 2020 2020 2763 6861 745f 6964 273a        'chat_id':
-0000ad70: 2063 6861 745f 6964 2c0a 2020 2020 2020   chat_id,.      
-0000ad80: 2020 2775 7365 725f 6964 273a 2075 7365    'user_id': use
-0000ad90: 725f 6964 0a20 2020 207d 0a20 2020 2072  r_id.    }.    r
-0000ada0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000adb0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000adc0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000add0: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
-0000ade0: 6f73 7427 290a 0a0a 6465 6620 7365 745f  ost')...def set_
-0000adf0: 6368 6174 5f70 686f 746f 2874 6f6b 656e  chat_photo(token
-0000ae00: 2c20 6368 6174 5f69 642c 2070 686f 746f  , chat_id, photo
-0000ae10: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000ae20: 6c20 3d20 2773 6574 4368 6174 5068 6f74  l = 'setChatPhot
-0000ae30: 6f27 0a20 2020 2070 6179 6c6f 6164 203d  o'.    payload =
-0000ae40: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-0000ae50: 745f 6964 7d0a 2020 2020 6669 6c65 7320  t_id}.    files 
-0000ae60: 3d20 4e6f 6e65 0a20 2020 2069 6620 7574  = None.    if ut
-0000ae70: 696c 2e69 735f 7374 7269 6e67 2870 686f  il.is_string(pho
-0000ae80: 746f 293a 0a20 2020 2020 2020 2070 6179  to):.        pay
-0000ae90: 6c6f 6164 5b27 7068 6f74 6f27 5d20 3d20  load['photo'] = 
-0000aea0: 7068 6f74 6f0a 2020 2020 656c 6966 2075  photo.    elif u
-0000aeb0: 7469 6c2e 6973 5f70 696c 5f69 6d61 6765  til.is_pil_image
-0000aec0: 2870 686f 746f 293a 0a20 2020 2020 2020  (photo):.       
-0000aed0: 2066 696c 6573 203d 207b 2770 686f 746f   files = {'photo
-0000aee0: 273a 2075 7469 6c2e 7069 6c5f 696d 6167  ': util.pil_imag
-0000aef0: 655f 746f 5f66 696c 6528 7068 6f74 6f29  e_to_file(photo)
-0000af00: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
-0000af10: 2020 2020 6669 6c65 7320 3d20 7b27 7068      files = {'ph
-0000af20: 6f74 6f27 3a20 7068 6f74 6f7d 0a20 2020  oto': photo}.   
-0000af30: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000af40: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000af50: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000af60: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
-0000af70: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
-0000af80: 7374 2729 0a0a 0a64 6566 2064 656c 6574  st')...def delet
-0000af90: 655f 6368 6174 5f70 686f 746f 2874 6f6b  e_chat_photo(tok
-0000afa0: 656e 2c20 6368 6174 5f69 6429 3a0a 2020  en, chat_id):.  
-0000afb0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
-0000afc0: 6465 6c65 7465 4368 6174 5068 6f74 6f27  deleteChatPhoto'
-0000afd0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000afe0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000aff0: 6964 7d0a 2020 2020 7265 7475 726e 205f  id}.    return _
-0000b000: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000b010: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000b020: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000b030: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000b040: 0a64 6566 2073 6574 5f63 6861 745f 7469  .def set_chat_ti
-0000b050: 746c 6528 746f 6b65 6e2c 2063 6861 745f  tle(token, chat_
-0000b060: 6964 2c20 7469 746c 6529 3a0a 2020 2020  id, title):.    
-0000b070: 6d65 7468 6f64 5f75 726c 203d 2027 7365  method_url = 'se
-0000b080: 7443 6861 7454 6974 6c65 270a 2020 2020  tChatTitle'.    
-0000b090: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-0000b0a0: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
-0000b0b0: 7469 746c 6527 3a20 7469 746c 657d 0a20  title': title}. 
-0000b0c0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000b0d0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000b0e0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000b0f0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000b100: 643d 2770 6f73 7427 290a 0a0a 6465 6620  d='post')...def 
-0000b110: 6765 745f 6d79 5f63 6f6d 6d61 6e64 7328  get_my_commands(
-0000b120: 746f 6b65 6e2c 2073 636f 7065 3d4e 6f6e  token, scope=Non
-0000b130: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
-0000b140: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000b150: 6f64 5f75 726c 203d 2072 2767 6574 4d79  od_url = r'getMy
-0000b160: 436f 6d6d 616e 6473 270a 2020 2020 7061  Commands'.    pa
-0000b170: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000b180: 6620 7363 6f70 653a 0a20 2020 2020 2020  f scope:.       
-0000b190: 2070 6179 6c6f 6164 5b27 7363 6f70 6527   payload['scope'
-0000b1a0: 5d20 3d20 7363 6f70 652e 746f 5f6a 736f  ] = scope.to_jso
-0000b1b0: 6e28 290a 2020 2020 6966 206c 616e 6775  n().    if langu
-0000b1c0: 6167 655f 636f 6465 3a0a 2020 2020 2020  age_code:.      
-0000b1d0: 2020 7061 796c 6f61 645b 276c 616e 6775    payload['langu
-0000b1e0: 6167 655f 636f 6465 275d 203d 206c 616e  age_code'] = lan
-0000b1f0: 6775 6167 655f 636f 6465 0a20 2020 2072  guage_code.    r
-0000b200: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000b210: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000b220: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000b230: 796c 6f61 6429 0a0a 6465 6620 7365 745f  yload)..def set_
-0000b240: 6368 6174 5f6d 656e 755f 6275 7474 6f6e  chat_menu_button
-0000b250: 2874 6f6b 656e 2c20 6368 6174 5f69 643d  (token, chat_id=
-0000b260: 4e6f 6e65 2c20 6d65 6e75 5f62 7574 746f  None, menu_butto
-0000b270: 6e3d 4e6f 6e65 293a 0a20 2020 206d 6574  n=None):.    met
-0000b280: 686f 645f 7572 6c20 3d20 7227 7365 7443  hod_url = r'setC
-0000b290: 6861 744d 656e 7542 7574 746f 6e27 0a20  hatMenuButton'. 
-0000b2a0: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
-0000b2b0: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000b2c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000b2d0: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
-0000b2e0: 745f 6964 0a20 2020 2069 6620 6d65 6e75  t_id.    if menu
-0000b2f0: 5f62 7574 746f 6e3a 0a20 2020 2020 2020  _button:.       
-0000b300: 2070 6179 6c6f 6164 5b27 6d65 6e75 5f62   payload['menu_b
-0000b310: 7574 746f 6e27 5d20 3d20 6d65 6e75 5f62  utton'] = menu_b
-0000b320: 7574 746f 6e2e 746f 5f6a 736f 6e28 290a  utton.to_json().
-0000b330: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000b340: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000b350: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000b360: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-0000b370: 6f64 3d27 706f 7374 2729 0a0a 6465 6620  od='post')..def 
-0000b380: 6765 745f 6368 6174 5f6d 656e 755f 6275  get_chat_menu_bu
-0000b390: 7474 6f6e 2874 6f6b 656e 2c20 6368 6174  tton(token, chat
-0000b3a0: 5f69 643d 4e6f 6e65 293a 0a20 2020 206d  _id=None):.    m
-0000b3b0: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
-0000b3c0: 7443 6861 744d 656e 7542 7574 746f 6e27  tChatMenuButton'
-0000b3d0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000b3e0: 7d0a 2020 2020 6966 2063 6861 745f 6964  }.    if chat_id
-0000b3f0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000b400: 645b 2763 6861 745f 6964 275d 203d 2063  d['chat_id'] = c
-0000b410: 6861 745f 6964 0a20 2020 2072 6574 7572  hat_id.    retur
-0000b420: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-0000b430: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-0000b440: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-0000b450: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-0000b460: 290a 0a0a 6465 6620 7365 745f 6d79 5f64  )...def set_my_d
-0000b470: 6566 6175 6c74 5f61 646d 696e 6973 7472  efault_administr
-0000b480: 6174 6f72 5f72 6967 6874 7328 746f 6b65  ator_rights(toke
-0000b490: 6e2c 2072 6967 6874 733d 4e6f 6e65 2c20  n, rights=None, 
-0000b4a0: 666f 725f 6368 616e 6e65 6c73 3d4e 6f6e  for_channels=Non
-0000b4b0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000b4c0: 726c 203d 2072 2773 6574 4d79 4465 6661  rl = r'setMyDefa
-0000b4d0: 756c 7441 646d 696e 6973 7472 6174 6f72  ultAdministrator
-0000b4e0: 5269 6768 7473 270a 2020 2020 7061 796c  Rights'.    payl
-0000b4f0: 6f61 6420 3d20 7b7d 0a20 2020 2069 6620  oad = {}.    if 
-0000b500: 7269 6768 7473 3a0a 2020 2020 2020 2020  rights:.        
-0000b510: 7061 796c 6f61 645b 2772 6967 6874 7327  payload['rights'
-0000b520: 5d20 3d20 7269 6768 7473 2e74 6f5f 6a73  ] = rights.to_js
-0000b530: 6f6e 2829 0a20 2020 2069 6620 666f 725f  on().    if for_
-0000b540: 6368 616e 6e65 6c73 2069 7320 6e6f 7420  channels is not 
-0000b550: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000b560: 796c 6f61 645b 2766 6f72 5f63 6861 6e6e  yload['for_chann
-0000b570: 656c 7327 5d20 3d20 666f 725f 6368 616e  els'] = for_chan
-0000b580: 6e65 6c73 0a20 2020 2072 6574 7572 6e20  nels.    return 
-0000b590: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000b5a0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000b5b0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000b5c0: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000b5d0: 0a0a 6465 6620 6765 745f 6d79 5f64 6566  ..def get_my_def
-0000b5e0: 6175 6c74 5f61 646d 696e 6973 7472 6174  ault_administrat
-0000b5f0: 6f72 5f72 6967 6874 7328 746f 6b65 6e2c  or_rights(token,
-0000b600: 2066 6f72 5f63 6861 6e6e 656c 733d 4e6f   for_channels=No
-0000b610: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000b620: 7572 6c20 3d20 7227 6765 744d 7944 6566  url = r'getMyDef
-0000b630: 6175 6c74 4164 6d69 6e69 7374 7261 746f  aultAdministrato
-0000b640: 7252 6967 6874 7327 0a20 2020 2070 6179  rRights'.    pay
-0000b650: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-0000b660: 2066 6f72 5f63 6861 6e6e 656c 733a 0a20   for_channels:. 
-0000b670: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000b680: 666f 725f 6368 616e 6e65 6c73 275d 203d  for_channels'] =
-0000b690: 2066 6f72 5f63 6861 6e6e 656c 730a 2020   for_channels.  
-0000b6a0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000b6b0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000b6c0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000b6d0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-0000b6e0: 3d27 706f 7374 2729 0a0a 0a64 6566 2073  ='post')...def s
-0000b6f0: 6574 5f6d 795f 636f 6d6d 616e 6473 2874  et_my_commands(t
-0000b700: 6f6b 656e 2c20 636f 6d6d 616e 6473 2c20  oken, commands, 
-0000b710: 7363 6f70 653d 4e6f 6e65 2c20 6c61 6e67  scope=None, lang
-0000b720: 7561 6765 5f63 6f64 653d 4e6f 6e65 293a  uage_code=None):
-0000b730: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b740: 3d20 7227 7365 744d 7943 6f6d 6d61 6e64  = r'setMyCommand
-0000b750: 7327 0a20 2020 2070 6179 6c6f 6164 203d  s'.    payload =
-0000b760: 207b 2763 6f6d 6d61 6e64 7327 3a20 5f63   {'commands': _c
-0000b770: 6f6e 7665 7274 5f6c 6973 745f 6a73 6f6e  onvert_list_json
-0000b780: 5f73 6572 6961 6c69 7a61 626c 6528 636f  _serializable(co
-0000b790: 6d6d 616e 6473 297d 0a20 2020 2069 6620  mmands)}.    if 
-0000b7a0: 7363 6f70 653a 0a20 2020 2020 2020 2070  scope:.        p
-0000b7b0: 6179 6c6f 6164 5b27 7363 6f70 6527 5d20  ayload['scope'] 
-0000b7c0: 3d20 7363 6f70 652e 746f 5f6a 736f 6e28  = scope.to_json(
-0000b7d0: 290a 2020 2020 6966 206c 616e 6775 6167  ).    if languag
-0000b7e0: 655f 636f 6465 3a0a 2020 2020 2020 2020  e_code:.        
-0000b7f0: 7061 796c 6f61 645b 276c 616e 6775 6167  payload['languag
-0000b800: 655f 636f 6465 275d 203d 206c 616e 6775  e_code'] = langu
-0000b810: 6167 655f 636f 6465 0a20 2020 2072 6574  age_code.    ret
-0000b820: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000b830: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000b840: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000b850: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000b860: 7427 290a 0a0a 6465 6620 6465 6c65 7465  t')...def delete
-0000b870: 5f6d 795f 636f 6d6d 616e 6473 2874 6f6b  _my_commands(tok
-0000b880: 656e 2c20 7363 6f70 653d 4e6f 6e65 2c20  en, scope=None, 
-0000b890: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
-0000b8a0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-0000b8b0: 7572 6c20 3d20 7227 6465 6c65 7465 4d79  url = r'deleteMy
-0000b8c0: 436f 6d6d 616e 6473 270a 2020 2020 7061  Commands'.    pa
-0000b8d0: 796c 6f61 6420 3d20 7b7d 0a20 2020 2069  yload = {}.    i
-0000b8e0: 6620 7363 6f70 653a 200a 2020 2020 2020  f scope: .      
-0000b8f0: 2020 7061 796c 6f61 645b 2773 636f 7065    payload['scope
-0000b900: 275d 203d 2073 636f 7065 2e74 6f5f 6a73  '] = scope.to_js
-0000b910: 6f6e 2829 0a20 2020 2069 6620 6c61 6e67  on().    if lang
-0000b920: 7561 6765 5f63 6f64 653a 200a 2020 2020  uage_code: .    
-0000b930: 2020 2020 7061 796c 6f61 645b 276c 616e      payload['lan
-0000b940: 6775 6167 655f 636f 6465 275d 203d 206c  guage_code'] = l
-0000b950: 616e 6775 6167 655f 636f 6465 0a20 2020  anguage_code.   
-0000b960: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000b970: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b980: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b990: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b9a0: 2770 6f73 7427 290a 0a0a 6465 6620 7365  'post')...def se
-0000b9b0: 745f 6368 6174 5f64 6573 6372 6970 7469  t_chat_descripti
-0000b9c0: 6f6e 2874 6f6b 656e 2c20 6368 6174 5f69  on(token, chat_i
-0000b9d0: 642c 2064 6573 6372 6970 7469 6f6e 293a  d, description):
-0000b9e0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000b9f0: 3d20 2773 6574 4368 6174 4465 7363 7269  = 'setChatDescri
-0000ba00: 7074 696f 6e27 0a20 2020 2070 6179 6c6f  ption'.    paylo
-0000ba10: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-0000ba20: 2063 6861 745f 6964 7d0a 2020 2020 6966   chat_id}.    if
-0000ba30: 2064 6573 6372 6970 7469 6f6e 2069 7320   description is 
-0000ba40: 6e6f 7420 4e6f 6e65 3a20 2023 2041 6c6c  not None:  # All
-0000ba50: 6f77 2065 6d70 7479 2073 7472 696e 6773  ow empty strings
-0000ba60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000ba70: 5b27 6465 7363 7269 7074 696f 6e27 5d20  ['description'] 
-0000ba80: 3d20 6465 7363 7269 7074 696f 6e0a 2020  = description.  
-0000ba90: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000baa0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000bab0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000bac0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
-0000bad0: 3d27 706f 7374 2729 0a0a 0a64 6566 2070  ='post')...def p
-0000bae0: 696e 5f63 6861 745f 6d65 7373 6167 6528  in_chat_message(
-0000baf0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000bb00: 6d65 7373 6167 655f 6964 2c20 6469 7361  message_id, disa
-0000bb10: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-0000bb20: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000bb30: 6f64 5f75 726c 203d 2027 7069 6e43 6861  od_url = 'pinCha
-0000bb40: 744d 6573 7361 6765 270a 2020 2020 7061  tMessage'.    pa
-0000bb50: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-0000bb60: 6427 3a20 6368 6174 5f69 642c 2027 6d65  d': chat_id, 'me
-0000bb70: 7373 6167 655f 6964 273a 206d 6573 7361  ssage_id': messa
-0000bb80: 6765 5f69 647d 0a20 2020 2069 6620 6469  ge_id}.    if di
-0000bb90: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-0000bba0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  on is not None:.
-0000bbb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000bbc0: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
-0000bbd0: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
-0000bbe0: 655f 6e6f 7469 6669 6361 7469 6f6e 0a20  e_notification. 
-0000bbf0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000bc00: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000bc10: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000bc20: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000bc30: 643d 2770 6f73 7427 290a 0a0a 6465 6620  d='post')...def 
-0000bc40: 756e 7069 6e5f 6368 6174 5f6d 6573 7361  unpin_chat_messa
-0000bc50: 6765 2874 6f6b 656e 2c20 6368 6174 5f69  ge(token, chat_i
-0000bc60: 642c 206d 6573 7361 6765 5f69 6429 3a0a  d, message_id):.
-0000bc70: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000bc80: 2027 756e 7069 6e43 6861 744d 6573 7361   'unpinChatMessa
-0000bc90: 6765 270a 2020 2020 7061 796c 6f61 6420  ge'.    payload 
-0000bca0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-0000bcb0: 6174 5f69 647d 0a20 2020 2069 6620 6d65  at_id}.    if me
-0000bcc0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000bcd0: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
-0000bce0: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
-0000bcf0: 655f 6964 0a20 2020 2072 6574 7572 6e20  e_id.    return 
-0000bd00: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000bd10: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000bd20: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000bd30: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000bd40: 0a0a 6465 6620 756e 7069 6e5f 616c 6c5f  ..def unpin_all_
-0000bd50: 6368 6174 5f6d 6573 7361 6765 7328 746f  chat_messages(to
-0000bd60: 6b65 6e2c 2063 6861 745f 6964 293a 0a20  ken, chat_id):. 
-0000bd70: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000bd80: 2775 6e70 696e 416c 6c43 6861 744d 6573  'unpinAllChatMes
-0000bd90: 7361 6765 7327 0a20 2020 2070 6179 6c6f  sages'.    paylo
-0000bda0: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-0000bdb0: 2063 6861 745f 6964 7d0a 2020 2020 7265   chat_id}.    re
-0000bdc0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-0000bdd0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000bde0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000bdf0: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000be00: 7374 2729 0a0a 0a23 2055 7064 6174 696e  st')...# Updatin
-0000be10: 6720 6d65 7373 6167 6573 0a0a 6465 6620  g messages..def 
-0000be20: 6564 6974 5f6d 6573 7361 6765 5f74 6578  edit_message_tex
-0000be30: 7428 746f 6b65 6e2c 2074 6578 742c 2063  t(token, text, c
-0000be40: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
-0000be50: 7361 6765 5f69 643d 4e6f 6e65 2c20 696e  sage_id=None, in
-0000be60: 6c69 6e65 5f6d 6573 7361 6765 5f69 643d  line_message_id=
-0000be70: 4e6f 6e65 2c20 7061 7273 655f 6d6f 6465  None, parse_mode
-0000be80: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
-0000be90: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
-0000bea0: 6974 6965 7320 3d20 4e6f 6e65 2c20 6469  ities = None, di
-0000beb0: 7361 626c 655f 7765 625f 7061 6765 5f70  sable_web_page_p
-0000bec0: 7265 7669 6577 3d4e 6f6e 652c 2072 6570  review=None, rep
-0000bed0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 293a  ly_markup=None):
-0000bee0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000bef0: 3d20 7227 6564 6974 4d65 7373 6167 6554  = r'editMessageT
-0000bf00: 6578 7427 0a20 2020 2070 6179 6c6f 6164  ext'.    payload
-0000bf10: 203d 207b 2774 6578 7427 3a20 7465 7874   = {'text': text
-0000bf20: 7d0a 2020 2020 6966 2063 6861 745f 6964  }.    if chat_id
-0000bf30: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000bf40: 645b 2763 6861 745f 6964 275d 203d 2063  d['chat_id'] = c
-0000bf50: 6861 745f 6964 0a20 2020 2069 6620 6d65  hat_id.    if me
-0000bf60: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000bf70: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
-0000bf80: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
-0000bf90: 655f 6964 0a20 2020 2069 6620 696e 6c69  e_id.    if inli
-0000bfa0: 6e65 5f6d 6573 7361 6765 5f69 643a 0a20  ne_message_id:. 
-0000bfb0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000bfc0: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000bfd0: 6427 5d20 3d20 696e 6c69 6e65 5f6d 6573  d'] = inline_mes
-0000bfe0: 7361 6765 5f69 640a 2020 2020 6966 2070  sage_id.    if p
-0000bff0: 6172 7365 5f6d 6f64 653a 0a20 2020 2020  arse_mode:.     
-0000c000: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
-0000c010: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
-0000c020: 5f6d 6f64 650a 2020 2020 6966 2065 6e74  _mode.    if ent
-0000c030: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
-0000c040: 6179 6c6f 6164 5b27 656e 7469 7469 6573  ayload['entities
-0000c050: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
-0000c060: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-0000c070: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-0000c080: 6963 7473 2865 6e74 6974 6965 7329 290a  icts(entities)).
-0000c090: 2020 2020 6966 2064 6973 6162 6c65 5f77      if disable_w
-0000c0a0: 6562 5f70 6167 655f 7072 6576 6965 7720  eb_page_preview 
-0000c0b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000c0c0: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-0000c0d0: 7361 626c 655f 7765 625f 7061 6765 5f70  sable_web_page_p
-0000c0e0: 7265 7669 6577 275d 203d 2064 6973 6162  review'] = disab
-0000c0f0: 6c65 5f77 6562 5f70 6167 655f 7072 6576  le_web_page_prev
-0000c100: 6965 770a 2020 2020 6966 2072 6570 6c79  iew.    if reply
-0000c110: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
-0000c120: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-0000c130: 6d61 726b 7570 275d 203d 205f 636f 6e76  markup'] = _conv
-0000c140: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-0000c150: 5f6d 6172 6b75 7029 0a20 2020 2072 6574  _markup).    ret
-0000c160: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-0000c170: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000c180: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000c190: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000c1a0: 7427 290a 0a0a 6465 6620 6564 6974 5f6d  t')...def edit_m
-0000c1b0: 6573 7361 6765 5f63 6170 7469 6f6e 2874  essage_caption(t
-0000c1c0: 6f6b 656e 2c20 6361 7074 696f 6e2c 2063  oken, caption, c
-0000c1d0: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
-0000c1e0: 7361 6765 5f69 643d 4e6f 6e65 2c20 696e  sage_id=None, in
-0000c1f0: 6c69 6e65 5f6d 6573 7361 6765 5f69 643d  line_message_id=
-0000c200: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0000c210: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000c220: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c20  arse_mode=None, 
-0000c230: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-0000c240: 3d4e 6f6e 652c 7265 706c 795f 6d61 726b  =None,reply_mark
-0000c250: 7570 3d4e 6f6e 6529 3a0a 2020 2020 6d65  up=None):.    me
-0000c260: 7468 6f64 5f75 726c 203d 2072 2765 6469  thod_url = r'edi
-0000c270: 744d 6573 7361 6765 4361 7074 696f 6e27  tMessageCaption'
-0000c280: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000c290: 2763 6170 7469 6f6e 273a 2063 6170 7469  'caption': capti
-0000c2a0: 6f6e 7d0a 2020 2020 6966 2063 6861 745f  on}.    if chat_
-0000c2b0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-0000c2c0: 6f61 645b 2763 6861 745f 6964 275d 203d  oad['chat_id'] =
-0000c2d0: 2063 6861 745f 6964 0a20 2020 2069 6620   chat_id.    if 
-0000c2e0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-0000c2f0: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
-0000c300: 7361 6765 5f69 6427 5d20 3d20 6d65 7373  sage_id'] = mess
-0000c310: 6167 655f 6964 0a20 2020 2069 6620 696e  age_id.    if in
-0000c320: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
-0000c330: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c340: 5b27 696e 6c69 6e65 5f6d 6573 7361 6765  ['inline_message
-0000c350: 5f69 6427 5d20 3d20 696e 6c69 6e65 5f6d  _id'] = inline_m
-0000c360: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-0000c370: 2070 6172 7365 5f6d 6f64 653a 0a20 2020   parse_mode:.   
-0000c380: 2020 2020 2070 6179 6c6f 6164 5b27 7061       payload['pa
-0000c390: 7273 655f 6d6f 6465 275d 203d 2070 6172  rse_mode'] = par
-0000c3a0: 7365 5f6d 6f64 650a 2020 2020 6966 2063  se_mode.    if c
-0000c3b0: 6170 7469 6f6e 5f65 6e74 6974 6965 733a  aption_entities:
-0000c3c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000c3d0: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
-0000c3e0: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
-0000c3f0: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
-0000c400: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
-0000c410: 5f64 6963 7473 2863 6170 7469 6f6e 5f65  _dicts(caption_e
-0000c420: 6e74 6974 6965 7329 290a 2020 2020 6966  ntities)).    if
-0000c430: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-0000c440: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000c450: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
-0000c460: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-0000c470: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-0000c480: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
-0000c490: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-0000c4a0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-0000c4b0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-0000c4c0: 643d 2770 6f73 7427 290a 0a0a 6465 6620  d='post')...def 
-0000c4d0: 6564 6974 5f6d 6573 7361 6765 5f6d 6564  edit_message_med
-0000c4e0: 6961 2874 6f6b 656e 2c20 6d65 6469 612c  ia(token, media,
-0000c4f0: 2063 6861 745f 6964 3d4e 6f6e 652c 206d   chat_id=None, m
-0000c500: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-0000c510: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000c520: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-0000c530: 726b 7570 3d4e 6f6e 6529 3a0a 2020 2020  rkup=None):.    
-0000c540: 6d65 7468 6f64 5f75 726c 203d 2072 2765  method_url = r'e
-0000c550: 6469 744d 6573 7361 6765 4d65 6469 6127  ditMessageMedia'
-0000c560: 0a20 2020 206d 6564 6961 5f6a 736f 6e2c  .    media_json,
-0000c570: 2066 696c 6520 3d20 636f 6e76 6572 745f   file = convert_
-0000c580: 696e 7075 745f 6d65 6469 6128 6d65 6469  input_media(medi
-0000c590: 6129 0a20 2020 2070 6179 6c6f 6164 203d  a).    payload =
-0000c5a0: 207b 276d 6564 6961 273a 206d 6564 6961   {'media': media
-0000c5b0: 5f6a 736f 6e7d 0a20 2020 2069 6620 6368  _json}.    if ch
-0000c5c0: 6174 5f69 643a 0a20 2020 2020 2020 2070  at_id:.        p
-0000c5d0: 6179 6c6f 6164 5b27 6368 6174 5f69 6427  ayload['chat_id'
-0000c5e0: 5d20 3d20 6368 6174 5f69 640a 2020 2020  ] = chat_id.    
-0000c5f0: 6966 206d 6573 7361 6765 5f69 643a 0a20  if message_id:. 
-0000c600: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000c610: 6d65 7373 6167 655f 6964 275d 203d 206d  message_id'] = m
-0000c620: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-0000c630: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-0000c640: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-0000c650: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
-0000c660: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
-0000c670: 655f 6d65 7373 6167 655f 6964 0a20 2020  e_message_id.   
-0000c680: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
-0000c690: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000c6a0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
-0000c6b0: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
-0000c6c0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-0000c6d0: 290a 2020 2020 7265 7475 726e 205f 6d61  ).    return _ma
-0000c6e0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-0000c6f0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c700: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
-0000c710: 6c65 733d 6669 6c65 2c20 6d65 7468 6f64  les=file, method
-0000c720: 3d27 706f 7374 2720 6966 2066 696c 6520  ='post' if file 
-0000c730: 656c 7365 2027 6765 7427 290a 0a0a 6465  else 'get')...de
-0000c740: 6620 6564 6974 5f6d 6573 7361 6765 5f72  f edit_message_r
-0000c750: 6570 6c79 5f6d 6172 6b75 7028 746f 6b65  eply_markup(toke
-0000c760: 6e2c 2063 6861 745f 6964 3d4e 6f6e 652c  n, chat_id=None,
-0000c770: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
-0000c780: 2c20 696e 6c69 6e65 5f6d 6573 7361 6765  , inline_message
-0000c790: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
-0000c7a0: 6d61 726b 7570 3d4e 6f6e 6529 3a0a 2020  markup=None):.  
-0000c7b0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000c7c0: 2765 6469 744d 6573 7361 6765 5265 706c  'editMessageRepl
-0000c7d0: 794d 6172 6b75 7027 0a20 2020 2070 6179  yMarkup'.    pay
-0000c7e0: 6c6f 6164 203d 207b 7d0a 2020 2020 6966  load = {}.    if
-0000c7f0: 2063 6861 745f 6964 3a0a 2020 2020 2020   chat_id:.      
-0000c800: 2020 7061 796c 6f61 645b 2763 6861 745f    payload['chat_
-0000c810: 6964 275d 203d 2063 6861 745f 6964 0a20  id'] = chat_id. 
-0000c820: 2020 2069 6620 6d65 7373 6167 655f 6964     if message_id
-0000c830: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000c840: 645b 276d 6573 7361 6765 5f69 6427 5d20  d['message_id'] 
-0000c850: 3d20 6d65 7373 6167 655f 6964 0a20 2020  = message_id.   
-0000c860: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
-0000c870: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-0000c880: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
-0000c890: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
-0000c8a0: 6c69 6e65 5f6d 6573 7361 6765 5f69 640a  line_message_id.
-0000c8b0: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-0000c8c0: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-0000c8d0: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
-0000c8e0: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
-0000c8f0: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-0000c900: 6b75 7029 0a20 2020 2072 6574 7572 6e20  kup).    return 
-0000c910: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-0000c920: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000c930: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000c940: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000c950: 0a0a 6465 6620 6465 6c65 7465 5f6d 6573  ..def delete_mes
-0000c960: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
-0000c970: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
-0000c980: 2074 696d 656f 7574 3d4e 6f6e 6529 3a0a   timeout=None):.
-0000c990: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000c9a0: 2072 2764 656c 6574 654d 6573 7361 6765   r'deleteMessage
-0000c9b0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000c9c0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
-0000c9d0: 5f69 642c 2027 6d65 7373 6167 655f 6964  _id, 'message_id
-0000c9e0: 273a 206d 6573 7361 6765 5f69 647d 0a20  ': message_id}. 
-0000c9f0: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-0000ca00: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000ca10: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
-0000ca20: 6f75 740a 2020 2020 7265 7475 726e 205f  out.    return _
-0000ca30: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-0000ca40: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000ca50: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000ca60: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000ca70: 0a23 2047 616d 650a 0a64 6566 2073 656e  .# Game..def sen
-0000ca80: 645f 6761 6d65 280a 2020 2020 2020 2020  d_game(.        
-0000ca90: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000caa0: 6761 6d65 5f73 686f 7274 5f6e 616d 652c  game_short_name,
-0000cab0: 0a20 2020 2020 2020 2064 6973 6162 6c65  .        disable
-0000cac0: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
-0000cad0: 6e65 2c20 7265 706c 795f 746f 5f6d 6573  ne, reply_to_mes
-0000cae0: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
-0000caf0: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-0000cb00: 2074 696d 656f 7574 3d4e 6f6e 652c 0a20   timeout=None,. 
-0000cb10: 2020 2020 2020 2061 6c6c 6f77 5f73 656e         allow_sen
-0000cb20: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-0000cb30: 6c79 3d4e 6f6e 652c 2070 726f 7465 6374  ly=None, protect
-0000cb40: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 206d  _content=None, m
-0000cb50: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-0000cb60: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-0000cb70: 6f64 5f75 726c 203d 2072 2773 656e 6447  od_url = r'sendG
-0000cb80: 616d 6527 0a20 2020 2070 6179 6c6f 6164  ame'.    payload
-0000cb90: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-0000cba0: 6861 745f 6964 2c20 2767 616d 655f 7368  hat_id, 'game_sh
-0000cbb0: 6f72 745f 6e61 6d65 273a 2067 616d 655f  ort_name': game_
-0000cbc0: 7368 6f72 745f 6e61 6d65 7d0a 2020 2020  short_name}.    
-0000cbd0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-0000cbe0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-0000cbf0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000cc00: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
-0000cc10: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
-0000cc20: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-0000cc30: 696f 6e0a 2020 2020 6966 2072 6570 6c79  ion.    if reply
-0000cc40: 5f74 6f5f 6d65 7373 6167 655f 6964 3a0a  _to_message_id:.
-0000cc50: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000cc60: 2772 6570 6c79 5f74 6f5f 6d65 7373 6167  'reply_to_messag
-0000cc70: 655f 6964 275d 203d 2072 6570 6c79 5f74  e_id'] = reply_t
-0000cc80: 6f5f 6d65 7373 6167 655f 6964 0a20 2020  o_message_id.   
-0000cc90: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
-0000cca0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000ccb0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
-0000ccc0: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
-0000ccd0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-0000cce0: 290a 2020 2020 6966 2074 696d 656f 7574  ).    if timeout
-0000ccf0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000cd00: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-0000cd10: 696d 656f 7574 0a20 2020 2069 6620 616c  imeout.    if al
-0000cd20: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
-0000cd30: 6f75 745f 7265 706c 7920 6973 206e 6f74  out_reply is not
-0000cd40: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-0000cd50: 6179 6c6f 6164 5b27 616c 6c6f 775f 7365  ayload['allow_se
-0000cd60: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-0000cd70: 706c 7927 5d20 3d20 616c 6c6f 775f 7365  ply'] = allow_se
-0000cd80: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-0000cd90: 706c 790a 2020 2020 6966 2070 726f 7465  ply.    if prote
-0000cda0: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-0000cdb0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000cdc0: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-0000cdd0: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-0000cde0: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-0000cdf0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-0000ce00: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-0000ce10: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-0000ce20: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-0000ce30: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-0000ce40: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-0000ce50: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000ce60: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000ce70: 6d73 3d70 6179 6c6f 6164 290a 0a0a 2320  ms=payload)...# 
-0000ce80: 6874 7470 733a 2f2f 636f 7265 2e74 656c  https://core.tel
-0000ce90: 6567 7261 6d2e 6f72 672f 626f 7473 2f61  egram.org/bots/a
-0000cea0: 7069 2373 6574 6761 6d65 7363 6f72 650a  pi#setgamescore.
-0000ceb0: 6465 6620 7365 745f 6761 6d65 5f73 636f  def set_game_sco
-0000cec0: 7265 2874 6f6b 656e 2c20 7573 6572 5f69  re(token, user_i
-0000ced0: 642c 2073 636f 7265 2c20 666f 7263 653d  d, score, force=
-0000cee0: 4e6f 6e65 2c20 6469 7361 626c 655f 6564  None, disable_ed
-0000cef0: 6974 5f6d 6573 7361 6765 3d4e 6f6e 652c  it_message=None,
-0000cf00: 2063 6861 745f 6964 3d4e 6f6e 652c 206d   chat_id=None, m
-0000cf10: 6573 7361 6765 5f69 643d 4e6f 6e65 2c0a  essage_id=None,.
-0000cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf30: 2020 2069 6e6c 696e 655f 6d65 7373 6167     inline_messag
-0000cf40: 655f 6964 3d4e 6f6e 6529 3a0a 2020 2020  e_id=None):.    
-0000cf50: 2222 220a 2020 2020 5573 6520 7468 6973  """.    Use this
-0000cf60: 206d 6574 686f 6420 746f 2073 6574 2074   method to set t
-0000cf70: 6865 2073 636f 7265 206f 6620 7468 6520  he score of the 
-0000cf80: 7370 6563 6966 6965 6420 7573 6572 2069  specified user i
-0000cf90: 6e20 6120 6761 6d65 2e20 4f6e 2073 7563  n a game. On suc
-0000cfa0: 6365 7373 2c20 6966 2074 6865 206d 6573  cess, if the mes
-0000cfb0: 7361 6765 2077 6173 2073 656e 7420 6279  sage was sent by
-0000cfc0: 2074 6865 2062 6f74 2c20 7265 7475 726e   the bot, return
-0000cfd0: 7320 7468 6520 6564 6974 6564 204d 6573  s the edited Mes
-0000cfe0: 7361 6765 2c20 6f74 6865 7277 6973 6520  sage, otherwise 
-0000cff0: 7265 7475 726e 7320 5472 7565 2e20 5265  returns True. Re
-0000d000: 7475 726e 7320 616e 2065 7272 6f72 2c20  turns an error, 
-0000d010: 6966 2074 6865 206e 6577 2073 636f 7265  if the new score
-0000d020: 2069 7320 6e6f 7420 6772 6561 7465 7220   is not greater 
-0000d030: 7468 616e 2074 6865 2075 7365 7227 7320  than the user's 
-0000d040: 6375 7272 656e 7420 7363 6f72 6520 696e  current score in
-0000d050: 2074 6865 2063 6861 742e 0a20 2020 203a   the chat..    :
-0000d060: 7061 7261 6d20 746f 6b65 6e3a 2042 6f74  param token: Bot
-0000d070: 2773 2074 6f6b 656e 2028 796f 7520 646f  's token (you do
-0000d080: 6e27 7420 6e65 6564 2074 6f20 6669 6c6c  n't need to fill
-0000d090: 2074 6869 7329 0a20 2020 203a 7061 7261   this).    :para
-0000d0a0: 6d20 7573 6572 5f69 643a 2055 7365 7220  m user_id: User 
-0000d0b0: 6964 656e 7469 6669 6572 0a20 2020 203a  identifier.    :
-0000d0c0: 7061 7261 6d20 7363 6f72 653a 204e 6577  param score: New
-0000d0d0: 2073 636f 7265 2c20 6d75 7374 2062 6520   score, must be 
-0000d0e0: 6e6f 6e2d 6e65 6761 7469 7665 0a20 2020  non-negative.   
-0000d0f0: 203a 7061 7261 6d20 666f 7263 653a 2028   :param force: (
-0000d100: 4f70 7469 6f6e 616c 2920 5061 7373 2054  Optional) Pass T
-0000d110: 7275 652c 2069 6620 7468 6520 6869 6768  rue, if the high
-0000d120: 2073 636f 7265 2069 7320 616c 6c6f 7765   score is allowe
-0000d130: 6420 746f 2064 6563 7265 6173 652e 2054  d to decrease. T
-0000d140: 6869 7320 6361 6e20 6265 2075 7365 6675  his can be usefu
-0000d150: 6c20 7768 656e 2066 6978 696e 6720 6d69  l when fixing mi
-0000d160: 7374 616b 6573 206f 7220 6261 6e6e 696e  stakes or bannin
-0000d170: 6720 6368 6561 7465 7273 0a20 2020 203a  g cheaters.    :
-0000d180: 7061 7261 6d20 6469 7361 626c 655f 6564  param disable_ed
-0000d190: 6974 5f6d 6573 7361 6765 3a20 284f 7074  it_message: (Opt
-0000d1a0: 696f 6e61 6c29 2050 6173 7320 5472 7565  ional) Pass True
-0000d1b0: 2c20 6966 2074 6865 2067 616d 6520 6d65  , if the game me
-0000d1c0: 7373 6167 6520 7368 6f75 6c64 206e 6f74  ssage should not
-0000d1d0: 2062 6520 6175 746f 6d61 7469 6361 6c6c   be automaticall
-0000d1e0: 7920 6564 6974 6564 2074 6f20 696e 636c  y edited to incl
-0000d1f0: 7564 6520 7468 6520 6375 7272 656e 7420  ude the current 
-0000d200: 7363 6f72 6562 6f61 7264 0a20 2020 203a  scoreboard.    :
-0000d210: 7061 7261 6d20 6368 6174 5f69 643a 2028  param chat_id: (
-0000d220: 4f70 7469 6f6e 616c 2c20 7265 7175 6972  Optional, requir
-0000d230: 6564 2069 6620 696e 6c69 6e65 5f6d 6573  ed if inline_mes
-0000d240: 7361 6765 5f69 6420 6973 206e 6f74 2073  sage_id is not s
-0000d250: 7065 6369 6669 6564 2920 556e 6971 7565  pecified) Unique
-0000d260: 2069 6465 6e74 6966 6965 7220 666f 7220   identifier for 
-0000d270: 7468 6520 7461 7267 6574 2063 6861 7420  the target chat 
-0000d280: 286f 7220 7573 6572 6e61 6d65 206f 6620  (or username of 
-0000d290: 7468 6520 7461 7267 6574 2063 6861 6e6e  the target chann
-0000d2a0: 656c 2069 6e20 7468 6520 666f 726d 6174  el in the format
-0000d2b0: 2040 6368 616e 6e65 6c75 7365 726e 616d   @channelusernam
-0000d2c0: 6529 0a20 2020 203a 7061 7261 6d20 6d65  e).    :param me
-0000d2d0: 7373 6167 655f 6964 3a20 284f 7074 696f  ssage_id: (Optio
-0000d2e0: 6e61 6c2c 2072 6571 7569 7265 6420 6966  nal, required if
-0000d2f0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-0000d300: 6964 2069 7320 6e6f 7420 7370 6563 6966  id is not specif
-0000d310: 6965 6429 2055 6e69 7175 6520 6964 656e  ied) Unique iden
-0000d320: 7469 6669 6572 206f 6620 7468 6520 7365  tifier of the se
-0000d330: 6e74 206d 6573 7361 6765 0a20 2020 203a  nt message.    :
-0000d340: 7061 7261 6d20 696e 6c69 6e65 5f6d 6573  param inline_mes
-0000d350: 7361 6765 5f69 643a 2028 4f70 7469 6f6e  sage_id: (Option
-0000d360: 616c 2c20 7265 7175 6972 6564 2069 6620  al, required if 
-0000d370: 6368 6174 5f69 6420 616e 6420 6d65 7373  chat_id and mess
-0000d380: 6167 655f 6964 2061 7265 206e 6f74 2073  age_id are not s
-0000d390: 7065 6369 6669 6564 2920 4964 656e 7469  pecified) Identi
-0000d3a0: 6669 6572 206f 6620 7468 6520 696e 6c69  fier of the inli
-0000d3b0: 6e65 206d 6573 7361 6765 0a20 2020 203a  ne message.    :
-0000d3c0: 7265 7475 726e 3a0a 2020 2020 2222 220a  return:.    """.
-0000d3d0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000d3e0: 2072 2773 6574 4761 6d65 5363 6f72 6527   r'setGameScore'
-0000d3f0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000d400: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
-0000d410: 6964 2c20 2773 636f 7265 273a 2073 636f  id, 'score': sco
-0000d420: 7265 7d0a 2020 2020 6966 2066 6f72 6365  re}.    if force
-0000d430: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000d440: 2020 2020 2020 7061 796c 6f61 645b 2766        payload['f
-0000d450: 6f72 6365 275d 203d 2066 6f72 6365 0a20  orce'] = force. 
-0000d460: 2020 2069 6620 6368 6174 5f69 643a 0a20     if chat_id:. 
-0000d470: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000d480: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
-0000d490: 5f69 640a 2020 2020 6966 206d 6573 7361  _id.    if messa
-0000d4a0: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-0000d4b0: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-0000d4c0: 6964 275d 203d 206d 6573 7361 6765 5f69  id'] = message_i
-0000d4d0: 640a 2020 2020 6966 2069 6e6c 696e 655f  d.    if inline_
-0000d4e0: 6d65 7373 6167 655f 6964 3a0a 2020 2020  message_id:.    
-0000d4f0: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
-0000d500: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
-0000d510: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
-0000d520: 655f 6964 0a20 2020 2069 6620 6469 7361  e_id.    if disa
-0000d530: 626c 655f 6564 6974 5f6d 6573 7361 6765  ble_edit_message
-0000d540: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000d550: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
-0000d560: 6973 6162 6c65 5f65 6469 745f 6d65 7373  isable_edit_mess
-0000d570: 6167 6527 5d20 3d20 6469 7361 626c 655f  age'] = disable_
-0000d580: 6564 6974 5f6d 6573 7361 6765 0a20 2020  edit_message.   
-0000d590: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
-0000d5a0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000d5b0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000d5c0: 7061 796c 6f61 6429 0a0a 0a23 2068 7474  payload)...# htt
-0000d5d0: 7073 3a2f 2f63 6f72 652e 7465 6c65 6772  ps://core.telegr
-0000d5e0: 616d 2e6f 7267 2f62 6f74 732f 6170 6923  am.org/bots/api#
-0000d5f0: 6765 7467 616d 6568 6967 6873 636f 7265  getgamehighscore
-0000d600: 730a 6465 6620 6765 745f 6761 6d65 5f68  s.def get_game_h
-0000d610: 6967 685f 7363 6f72 6573 2874 6f6b 656e  igh_scores(token
-0000d620: 2c20 7573 6572 5f69 642c 2063 6861 745f  , user_id, chat_
-0000d630: 6964 3d4e 6f6e 652c 206d 6573 7361 6765  id=None, message
-0000d640: 5f69 643d 4e6f 6e65 2c20 696e 6c69 6e65  _id=None, inline
-0000d650: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
-0000d660: 293a 0a20 2020 2022 2222 0a20 2020 2055  ):.    """.    U
-0000d670: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
-0000d680: 6f20 6765 7420 6461 7461 2066 6f72 2068  o get data for h
-0000d690: 6967 6820 7363 6f72 6520 7461 626c 6573  igh score tables
-0000d6a0: 2e20 5769 6c6c 2072 6574 7572 6e20 7468  . Will return th
-0000d6b0: 6520 7363 6f72 6520 6f66 2074 6865 2073  e score of the s
-0000d6c0: 7065 6369 6669 6564 2075 7365 7220 616e  pecified user an
-0000d6d0: 6420 7365 7665 7261 6c20 6f66 2068 6973  d several of his
-0000d6e0: 206e 6569 6768 626f 7273 2069 6e20 6120   neighbors in a 
-0000d6f0: 6761 6d65 2e20 4f6e 2073 7563 6365 7373  game. On success
-0000d700: 2c20 7265 7475 726e 7320 616e 2041 7272  , returns an Arr
-0000d710: 6179 206f 6620 4761 6d65 4869 6768 5363  ay of GameHighSc
-0000d720: 6f72 6520 6f62 6a65 6374 732e 0a20 2020  ore objects..   
-0000d730: 2054 6869 7320 6d65 7468 6f64 2077 696c   This method wil
-0000d740: 6c20 6375 7272 656e 746c 7920 7265 7475  l currently retu
-0000d750: 726e 2073 636f 7265 7320 666f 7220 7468  rn scores for th
-0000d760: 6520 7461 7267 6574 2075 7365 722c 2070  e target user, p
-0000d770: 6c75 7320 7477 6f20 6f66 2068 6973 2063  lus two of his c
-0000d780: 6c6f 7365 7374 206e 6569 6768 626f 7273  losest neighbors
-0000d790: 206f 6e20 6561 6368 2073 6964 652e 2057   on each side. W
-0000d7a0: 696c 6c20 616c 736f 2072 6574 7572 6e20  ill also return 
-0000d7b0: 7468 6520 746f 7020 7468 7265 6520 7573  the top three us
-0000d7c0: 6572 7320 6966 2074 6865 2075 7365 7220  ers if the user 
-0000d7d0: 616e 6420 6869 7320 6e65 6967 6862 6f72  and his neighbor
-0000d7e0: 7320 6172 6520 6e6f 7420 616d 6f6e 6720  s are not among 
-0000d7f0: 7468 656d 2e20 506c 6561 7365 206e 6f74  them. Please not
-0000d800: 6520 7468 6174 2074 6869 7320 6265 6861  e that this beha
-0000d810: 7669 6f72 2069 7320 7375 626a 6563 7420  vior is subject 
-0000d820: 746f 2063 6861 6e67 652e 0a20 2020 203a  to change..    :
-0000d830: 7061 7261 6d20 746f 6b65 6e3a 2042 6f74  param token: Bot
-0000d840: 2773 2074 6f6b 656e 2028 796f 7520 646f  's token (you do
-0000d850: 6e27 7420 6e65 6564 2074 6f20 6669 6c6c  n't need to fill
-0000d860: 2074 6869 7329 0a20 2020 203a 7061 7261   this).    :para
-0000d870: 6d20 7573 6572 5f69 643a 2054 6172 6765  m user_id: Targe
-0000d880: 7420 7573 6572 2069 640a 2020 2020 3a70  t user id.    :p
-0000d890: 6172 616d 2063 6861 745f 6964 3a20 284f  aram chat_id: (O
-0000d8a0: 7074 696f 6e61 6c2c 2072 6571 7569 7265  ptional, require
-0000d8b0: 6420 6966 2069 6e6c 696e 655f 6d65 7373  d if inline_mess
-0000d8c0: 6167 655f 6964 2069 7320 6e6f 7420 7370  age_id is not sp
-0000d8d0: 6563 6966 6965 6429 2055 6e69 7175 6520  ecified) Unique 
-0000d8e0: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
-0000d8f0: 6865 2074 6172 6765 7420 6368 6174 2028  he target chat (
-0000d900: 6f72 2075 7365 726e 616d 6520 6f66 2074  or username of t
-0000d910: 6865 2074 6172 6765 7420 6368 616e 6e65  he target channe
-0000d920: 6c20 696e 2074 6865 2066 6f72 6d61 7420  l in the format 
-0000d930: 4063 6861 6e6e 656c 7573 6572 6e61 6d65  @channelusername
-0000d940: 290a 2020 2020 3a70 6172 616d 206d 6573  ).    :param mes
-0000d950: 7361 6765 5f69 643a 2028 4f70 7469 6f6e  sage_id: (Option
-0000d960: 616c 2c20 7265 7175 6972 6564 2069 6620  al, required if 
-0000d970: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000d980: 6420 6973 206e 6f74 2073 7065 6369 6669  d is not specifi
-0000d990: 6564 2920 556e 6971 7565 2069 6465 6e74  ed) Unique ident
-0000d9a0: 6966 6965 7220 6f66 2074 6865 2073 656e  ifier of the sen
-0000d9b0: 7420 6d65 7373 6167 650a 2020 2020 3a70  t message.    :p
-0000d9c0: 6172 616d 2069 6e6c 696e 655f 6d65 7373  aram inline_mess
-0000d9d0: 6167 655f 6964 3a20 284f 7074 696f 6e61  age_id: (Optiona
-0000d9e0: 6c2c 2072 6571 7569 7265 6420 6966 2063  l, required if c
-0000d9f0: 6861 745f 6964 2061 6e64 206d 6573 7361  hat_id and messa
-0000da00: 6765 5f69 6420 6172 6520 6e6f 7420 7370  ge_id are not sp
-0000da10: 6563 6966 6965 6429 2049 6465 6e74 6966  ecified) Identif
-0000da20: 6965 7220 6f66 2074 6865 2069 6e6c 696e  ier of the inlin
-0000da30: 6520 6d65 7373 6167 650a 2020 2020 3a72  e message.    :r
-0000da40: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
-0000da50: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000da60: 7227 6765 7447 616d 6548 6967 6853 636f  r'getGameHighSco
-0000da70: 7265 7327 0a20 2020 2070 6179 6c6f 6164  res'.    payload
-0000da80: 203d 207b 2775 7365 725f 6964 273a 2075   = {'user_id': u
-0000da90: 7365 725f 6964 7d0a 2020 2020 6966 2063  ser_id}.    if c
-0000daa0: 6861 745f 6964 3a0a 2020 2020 2020 2020  hat_id:.        
-0000dab0: 7061 796c 6f61 645b 2763 6861 745f 6964  payload['chat_id
-0000dac0: 275d 203d 2063 6861 745f 6964 0a20 2020  '] = chat_id.   
-0000dad0: 2069 6620 6d65 7373 6167 655f 6964 3a0a   if message_id:.
-0000dae0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000daf0: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
-0000db00: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-0000db10: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
-0000db20: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000db30: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
-0000db40: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
-0000db50: 6e65 5f6d 6573 7361 6765 5f69 640a 2020  ne_message_id.  
-0000db60: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000db70: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000db80: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000db90: 3d70 6179 6c6f 6164 290a 0a0a 2320 5061  =payload)...# Pa
-0000dba0: 796d 656e 7473 2028 6874 7470 733a 2f2f  yments (https://
-0000dbb0: 636f 7265 2e74 656c 6567 7261 6d2e 6f72  core.telegram.or
-0000dbc0: 672f 626f 7473 2f61 7069 2370 6179 6d65  g/bots/api#payme
-0000dbd0: 6e74 7329 0a0a 6465 6620 7365 6e64 5f69  nts)..def send_i
-0000dbe0: 6e76 6f69 6365 280a 2020 2020 2020 2020  nvoice(.        
-0000dbf0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000dc00: 7469 746c 652c 2064 6573 6372 6970 7469  title, descripti
-0000dc10: 6f6e 2c20 696e 766f 6963 655f 7061 796c  on, invoice_payl
-0000dc20: 6f61 642c 2070 726f 7669 6465 725f 746f  oad, provider_to
-0000dc30: 6b65 6e2c 2063 7572 7265 6e63 792c 2070  ken, currency, p
-0000dc40: 7269 6365 732c 0a20 2020 2020 2020 2073  rices,.        s
-0000dc50: 7461 7274 5f70 6172 616d 6574 6572 203d  tart_parameter =
-0000dc60: 204e 6f6e 652c 2070 686f 746f 5f75 726c   None, photo_url
-0000dc70: 3d4e 6f6e 652c 2070 686f 746f 5f73 697a  =None, photo_siz
-0000dc80: 653d 4e6f 6e65 2c20 7068 6f74 6f5f 7769  e=None, photo_wi
-0000dc90: 6474 683d 4e6f 6e65 2c20 7068 6f74 6f5f  dth=None, photo_
-0000dca0: 6865 6967 6874 3d4e 6f6e 652c 0a20 2020  height=None,.   
-0000dcb0: 2020 2020 206e 6565 645f 6e61 6d65 3d4e       need_name=N
-0000dcc0: 6f6e 652c 206e 6565 645f 7068 6f6e 655f  one, need_phone_
-0000dcd0: 6e75 6d62 6572 3d4e 6f6e 652c 206e 6565  number=None, nee
-0000dce0: 645f 656d 6169 6c3d 4e6f 6e65 2c20 6e65  d_email=None, ne
-0000dcf0: 6564 5f73 6869 7070 696e 675f 6164 6472  ed_shipping_addr
-0000dd00: 6573 733d 4e6f 6e65 2c0a 2020 2020 2020  ess=None,.      
-0000dd10: 2020 7365 6e64 5f70 686f 6e65 5f6e 756d    send_phone_num
-0000dd20: 6265 725f 746f 5f70 726f 7669 6465 7220  ber_to_provider 
-0000dd30: 3d20 4e6f 6e65 2c20 7365 6e64 5f65 6d61  = None, send_ema
-0000dd40: 696c 5f74 6f5f 7072 6f76 6964 6572 203d  il_to_provider =
-0000dd50: 204e 6f6e 652c 2069 735f 666c 6578 6962   None, is_flexib
-0000dd60: 6c65 3d4e 6f6e 652c 0a20 2020 2020 2020  le=None,.       
-0000dd70: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-0000dd80: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
-0000dd90: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
-0000dda0: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
-0000ddb0: 7570 3d4e 6f6e 652c 2070 726f 7669 6465  up=None, provide
-0000ddc0: 725f 6461 7461 3d4e 6f6e 652c 0a20 2020  r_data=None,.   
-0000ddd0: 2020 2020 2074 696d 656f 7574 3d4e 6f6e       timeout=Non
-0000dde0: 652c 2061 6c6c 6f77 5f73 656e 6469 6e67  e, allow_sending
-0000ddf0: 5f77 6974 686f 7574 5f72 6570 6c79 3d4e  _without_reply=N
-0000de00: 6f6e 652c 206d 6178 5f74 6970 5f61 6d6f  one, max_tip_amo
-0000de10: 756e 743d 4e6f 6e65 2c20 7375 6767 6573  unt=None, sugges
-0000de20: 7465 645f 7469 705f 616d 6f75 6e74 733d  ted_tip_amounts=
-0000de30: 4e6f 6e65 2c0a 2020 2020 2020 2020 7072  None,.        pr
-0000de40: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
-0000de50: 6e65 2c20 6d65 7373 6167 655f 7468 7265  ne, message_thre
-0000de60: 6164 5f69 643d 4e6f 6e65 293a 0a20 2020  ad_id=None):.   
-0000de70: 2022 2222 0a20 2020 2055 7365 2074 6869   """.    Use thi
-0000de80: 7320 6d65 7468 6f64 2074 6f20 7365 6e64  s method to send
-0000de90: 2069 6e76 6f69 6365 732e 204f 6e20 7375   invoices. On su
-0000dea0: 6363 6573 732c 2074 6865 2073 656e 7420  ccess, the sent 
-0000deb0: 4d65 7373 6167 6520 6973 2072 6574 7572  Message is retur
-0000dec0: 6e65 642e 0a20 2020 203a 7061 7261 6d20  ned..    :param 
-0000ded0: 746f 6b65 6e3a 2042 6f74 2773 2074 6f6b  token: Bot's tok
-0000dee0: 656e 2028 796f 7520 646f 6e27 7420 6e65  en (you don't ne
-0000def0: 6564 2074 6f20 6669 6c6c 2074 6869 7329  ed to fill this)
-0000df00: 0a20 2020 203a 7061 7261 6d20 6368 6174  .    :param chat
-0000df10: 5f69 643a 2055 6e69 7175 6520 6964 656e  _id: Unique iden
-0000df20: 7469 6669 6572 2066 6f72 2074 6865 2074  tifier for the t
-0000df30: 6172 6765 7420 7072 6976 6174 6520 6368  arget private ch
-0000df40: 6174 0a20 2020 203a 7061 7261 6d20 7469  at.    :param ti
-0000df50: 746c 653a 2050 726f 6475 6374 206e 616d  tle: Product nam
-0000df60: 650a 2020 2020 3a70 6172 616d 2064 6573  e.    :param des
-0000df70: 6372 6970 7469 6f6e 3a20 5072 6f64 7563  cription: Produc
-0000df80: 7420 6465 7363 7269 7074 696f 6e0a 2020  t description.  
-0000df90: 2020 3a70 6172 616d 2069 6e76 6f69 6365    :param invoice
-0000dfa0: 5f70 6179 6c6f 6164 3a20 426f 742d 6465  _payload: Bot-de
-0000dfb0: 6669 6e65 6420 696e 766f 6963 6520 7061  fined invoice pa
-0000dfc0: 796c 6f61 642c 2031 2d31 3238 2062 7974  yload, 1-128 byt
-0000dfd0: 6573 2e20 5468 6973 2077 696c 6c20 6e6f  es. This will no
-0000dfe0: 7420 6265 2064 6973 706c 6179 6564 2074  t be displayed t
-0000dff0: 6f20 7468 6520 7573 6572 2c20 7573 6520  o the user, use 
-0000e000: 666f 7220 796f 7572 2069 6e74 6572 6e61  for your interna
-0000e010: 6c20 7072 6f63 6573 7365 732e 0a20 2020  l processes..   
-0000e020: 203a 7061 7261 6d20 7072 6f76 6964 6572   :param provider
-0000e030: 5f74 6f6b 656e 3a20 5061 796d 656e 7473  _token: Payments
-0000e040: 2070 726f 7669 6465 7220 746f 6b65 6e2c   provider token,
-0000e050: 206f 6274 6169 6e65 6420 7669 6120 4042   obtained via @B
-0000e060: 6f74 6661 7468 6572 0a20 2020 203a 7061  otfather.    :pa
-0000e070: 7261 6d20 6375 7272 656e 6379 3a20 5468  ram currency: Th
-0000e080: 7265 652d 6c65 7474 6572 2049 534f 2034  ree-letter ISO 4
-0000e090: 3231 3720 6375 7272 656e 6379 2063 6f64  217 currency cod
-0000e0a0: 652c 2073 6565 2068 7474 7073 3a2f 2f63  e, see https://c
-0000e0b0: 6f72 652e 7465 6c65 6772 616d 2e6f 7267  ore.telegram.org
-0000e0c0: 2f62 6f74 732f 7061 796d 656e 7473 2373  /bots/payments#s
-0000e0d0: 7570 706f 7274 6564 2d63 7572 7265 6e63  upported-currenc
-0000e0e0: 6965 730a 2020 2020 3a70 6172 616d 2070  ies.    :param p
-0000e0f0: 7269 6365 733a 2050 7269 6365 2062 7265  rices: Price bre
-0000e100: 616b 646f 776e 2c20 6120 6c69 7374 206f  akdown, a list o
-0000e110: 6620 636f 6d70 6f6e 656e 7473 2028 652e  f components (e.
-0000e120: 672e 2070 726f 6475 6374 2070 7269 6365  g. product price
-0000e130: 2c20 7461 782c 2064 6973 636f 756e 742c  , tax, discount,
-0000e140: 2064 656c 6976 6572 7920 636f 7374 2c20   delivery cost, 
-0000e150: 6465 6c69 7665 7279 2074 6178 2c20 626f  delivery tax, bo
-0000e160: 6e75 732c 2065 7463 2e29 0a20 2020 203a  nus, etc.).    :
-0000e170: 7061 7261 6d20 7374 6172 745f 7061 7261  param start_para
-0000e180: 6d65 7465 723a 2055 6e69 7175 6520 6465  meter: Unique de
-0000e190: 6570 2d6c 696e 6b69 6e67 2070 6172 616d  ep-linking param
-0000e1a0: 6574 6572 2074 6861 7420 6361 6e20 6265  eter that can be
-0000e1b0: 2075 7365 6420 746f 2067 656e 6572 6174   used to generat
-0000e1c0: 6520 7468 6973 2069 6e76 6f69 6365 2077  e this invoice w
-0000e1d0: 6865 6e20 7573 6564 2061 7320 6120 7374  hen used as a st
-0000e1e0: 6172 7420 7061 7261 6d65 7465 720a 2020  art parameter.  
-0000e1f0: 2020 3a70 6172 616d 2070 686f 746f 5f75    :param photo_u
-0000e200: 726c 3a20 5552 4c20 6f66 2074 6865 2070  rl: URL of the p
-0000e210: 726f 6475 6374 2070 686f 746f 2066 6f72  roduct photo for
-0000e220: 2074 6865 2069 6e76 6f69 6365 2e20 4361   the invoice. Ca
-0000e230: 6e20 6265 2061 2070 686f 746f 206f 6620  n be a photo of 
-0000e240: 7468 6520 676f 6f64 7320 6f72 2061 206d  the goods or a m
-0000e250: 6172 6b65 7469 6e67 2069 6d61 6765 2066  arketing image f
-0000e260: 6f72 2061 2073 6572 7669 6365 2e20 5065  or a service. Pe
-0000e270: 6f70 6c65 206c 696b 6520 6974 2062 6574  ople like it bet
-0000e280: 7465 7220 7768 656e 2074 6865 7920 7365  ter when they se
-0000e290: 6520 7768 6174 2074 6865 7920 6172 6520  e what they are 
-0000e2a0: 7061 7969 6e67 2066 6f72 2e0a 2020 2020  paying for..    
-0000e2b0: 3a70 6172 616d 2070 686f 746f 5f73 697a  :param photo_siz
-0000e2c0: 653a 2050 686f 746f 2073 697a 650a 2020  e: Photo size.  
-0000e2d0: 2020 3a70 6172 616d 2070 686f 746f 5f77    :param photo_w
-0000e2e0: 6964 7468 3a20 5068 6f74 6f20 7769 6474  idth: Photo widt
-0000e2f0: 680a 2020 2020 3a70 6172 616d 2070 686f  h.    :param pho
-0000e300: 746f 5f68 6569 6768 743a 2050 686f 746f  to_height: Photo
-0000e310: 2068 6569 6768 740a 2020 2020 3a70 6172   height.    :par
-0000e320: 616d 206e 6565 645f 6e61 6d65 3a20 5061  am need_name: Pa
-0000e330: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
-0000e340: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
-0000e350: 2773 2066 756c 6c20 6e61 6d65 2074 6f20  's full name to 
-0000e360: 636f 6d70 6c65 7465 2074 6865 206f 7264  complete the ord
-0000e370: 6572 0a20 2020 203a 7061 7261 6d20 6e65  er.    :param ne
-0000e380: 6564 5f70 686f 6e65 5f6e 756d 6265 723a  ed_phone_number:
-0000e390: 2050 6173 7320 5472 7565 2c20 6966 2079   Pass True, if y
-0000e3a0: 6f75 2072 6571 7569 7265 2074 6865 2075  ou require the u
-0000e3b0: 7365 7227 7320 7068 6f6e 6520 6e75 6d62  ser's phone numb
-0000e3c0: 6572 2074 6f20 636f 6d70 6c65 7465 2074  er to complete t
-0000e3d0: 6865 206f 7264 6572 0a20 2020 203a 7061  he order.    :pa
-0000e3e0: 7261 6d20 6e65 6564 5f65 6d61 696c 3a20  ram need_email: 
-0000e3f0: 5061 7373 2054 7275 652c 2069 6620 796f  Pass True, if yo
-0000e400: 7520 7265 7175 6972 6520 7468 6520 7573  u require the us
-0000e410: 6572 2773 2065 6d61 696c 2074 6f20 636f  er's email to co
-0000e420: 6d70 6c65 7465 2074 6865 206f 7264 6572  mplete the order
-0000e430: 0a20 2020 203a 7061 7261 6d20 6e65 6564  .    :param need
-0000e440: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
-0000e450: 733a 2050 6173 7320 5472 7565 2c20 6966  s: Pass True, if
-0000e460: 2079 6f75 2072 6571 7569 7265 2074 6865   you require the
-0000e470: 2075 7365 7227 7320 7368 6970 7069 6e67   user's shipping
-0000e480: 2061 6464 7265 7373 2074 6f20 636f 6d70   address to comp
-0000e490: 6c65 7465 2074 6865 206f 7264 6572 0a20  lete the order. 
-0000e4a0: 2020 203a 7061 7261 6d20 6973 5f66 6c65     :param is_fle
-0000e4b0: 7869 626c 653a 2050 6173 7320 5472 7565  xible: Pass True
-0000e4c0: 2c20 6966 2074 6865 2066 696e 616c 2070  , if the final p
-0000e4d0: 7269 6365 2064 6570 656e 6473 206f 6e20  rice depends on 
-0000e4e0: 7468 6520 7368 6970 7069 6e67 206d 6574  the shipping met
-0000e4f0: 686f 640a 2020 2020 3a70 6172 616d 2073  hod.    :param s
-0000e500: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
-0000e510: 5f74 6f5f 7072 6f76 6964 6572 3a20 5061  _to_provider: Pa
-0000e520: 7373 2054 7275 652c 2069 6620 7573 6572  ss True, if user
-0000e530: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
-0000e540: 7368 6f75 6c64 2062 6520 7365 6e74 2074  should be sent t
-0000e550: 6f20 7072 6f76 6964 6572 0a20 2020 203a  o provider.    :
-0000e560: 7061 7261 6d20 7365 6e64 5f65 6d61 696c  param send_email
-0000e570: 5f74 6f5f 7072 6f76 6964 6572 3a20 5061  _to_provider: Pa
-0000e580: 7373 2054 7275 652c 2069 6620 7573 6572  ss True, if user
-0000e590: 2773 2065 6d61 696c 2061 6464 7265 7373  's email address
-0000e5a0: 2073 686f 756c 6420 6265 2073 656e 7420   should be sent 
-0000e5b0: 746f 2070 726f 7669 6465 720a 2020 2020  to provider.    
-0000e5c0: 3a70 6172 616d 2064 6973 6162 6c65 5f6e  :param disable_n
-0000e5d0: 6f74 6966 6963 6174 696f 6e3a 2053 656e  otification: Sen
-0000e5e0: 6473 2074 6865 206d 6573 7361 6765 2073  ds the message s
-0000e5f0: 696c 656e 746c 792e 2055 7365 7273 2077  ilently. Users w
-0000e600: 696c 6c20 7265 6365 6976 6520 6120 6e6f  ill receive a no
-0000e610: 7469 6669 6361 7469 6f6e 2077 6974 6820  tification with 
-0000e620: 6e6f 2073 6f75 6e64 2e0a 2020 2020 3a70  no sound..    :p
-0000e630: 6172 616d 2072 6570 6c79 5f74 6f5f 6d65  aram reply_to_me
-0000e640: 7373 6167 655f 6964 3a20 4966 2074 6865  ssage_id: If the
-0000e650: 206d 6573 7361 6765 2069 7320 6120 7265   message is a re
-0000e660: 706c 792c 2049 4420 6f66 2074 6865 206f  ply, ID of the o
-0000e670: 7269 6769 6e61 6c20 6d65 7373 6167 650a  riginal message.
-0000e680: 2020 2020 3a70 6172 616d 2072 6570 6c79      :param reply
-0000e690: 5f6d 6172 6b75 703a 2041 204a 534f 4e2d  _markup: A JSON-
-0000e6a0: 7365 7269 616c 697a 6564 206f 626a 6563  serialized objec
-0000e6b0: 7420 666f 7220 616e 2069 6e6c 696e 6520  t for an inline 
-0000e6c0: 6b65 7962 6f61 7264 2e20 4966 2065 6d70  keyboard. If emp
-0000e6d0: 7479 2c20 6f6e 6520 2750 6179 2074 6f74  ty, one 'Pay tot
-0000e6e0: 616c 2070 7269 6365 2720 6275 7474 6f6e  al price' button
-0000e6f0: 2077 696c 6c20 6265 2073 686f 776e 2e20   will be shown. 
-0000e700: 4966 206e 6f74 2065 6d70 7479 2c20 7468  If not empty, th
-0000e710: 6520 6669 7273 7420 6275 7474 6f6e 206d  e first button m
-0000e720: 7573 7420 6265 2061 2050 6179 2062 7574  ust be a Pay but
-0000e730: 746f 6e0a 2020 2020 3a70 6172 616d 2070  ton.    :param p
-0000e740: 726f 7669 6465 725f 6461 7461 3a20 4120  rovider_data: A 
-0000e750: 4a53 4f4e 2d73 6572 6961 6c69 7a65 6420  JSON-serialized 
-0000e760: 6461 7461 2061 626f 7574 2074 6865 2069  data about the i
-0000e770: 6e76 6f69 6365 2c20 7768 6963 6820 7769  nvoice, which wi
-0000e780: 6c6c 2062 6520 7368 6172 6564 2077 6974  ll be shared wit
-0000e790: 6820 7468 6520 7061 796d 656e 7420 7072  h the payment pr
-0000e7a0: 6f76 6964 6572 2e20 4120 6465 7461 696c  ovider. A detail
-0000e7b0: 6564 2064 6573 6372 6970 7469 6f6e 206f  ed description o
-0000e7c0: 6620 7265 7175 6972 6564 2066 6965 6c64  f required field
-0000e7d0: 7320 7368 6f75 6c64 2062 6520 7072 6f76  s should be prov
-0000e7e0: 6964 6564 2062 7920 7468 6520 7061 796d  ided by the paym
-0000e7f0: 656e 7420 7072 6f76 6964 6572 2e0a 2020  ent provider..  
-0000e800: 2020 3a70 6172 616d 2074 696d 656f 7574    :param timeout
-0000e810: 3a0a 2020 2020 3a70 6172 616d 2061 6c6c  :.    :param all
-0000e820: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-0000e830: 7574 5f72 6570 6c79 3a0a 2020 2020 3a70  ut_reply:.    :p
-0000e840: 6172 616d 206d 6178 5f74 6970 5f61 6d6f  aram max_tip_amo
-0000e850: 756e 743a 2054 6865 206d 6178 696d 756d  unt: The maximum
-0000e860: 2061 6363 6570 7465 6420 616d 6f75 6e74   accepted amount
-0000e870: 2066 6f72 2074 6970 7320 696e 2074 6865   for tips in the
-0000e880: 2073 6d61 6c6c 6573 7420 756e 6974 7320   smallest units 
-0000e890: 6f66 2074 6865 2063 7572 7265 6e63 790a  of the currency.
-0000e8a0: 2020 2020 3a70 6172 616d 2073 7567 6765      :param sugge
-0000e8b0: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
-0000e8c0: 3a20 4120 4a53 4f4e 2d73 6572 6961 6c69  : A JSON-seriali
-0000e8d0: 7a65 6420 6172 7261 7920 6f66 2073 7567  zed array of sug
-0000e8e0: 6765 7374 6564 2061 6d6f 756e 7473 206f  gested amounts o
-0000e8f0: 6620 7469 7073 2069 6e20 7468 6520 736d  f tips in the sm
-0000e900: 616c 6c65 7374 2075 6e69 7473 206f 6620  allest units of 
-0000e910: 7468 6520 6375 7272 656e 6379 2e0a 2020  the currency..  
-0000e920: 2020 2020 2020 4174 206d 6f73 7420 3420        At most 4 
-0000e930: 7375 6767 6573 7465 6420 7469 7020 616d  suggested tip am
-0000e940: 6f75 6e74 7320 6361 6e20 6265 2073 7065  ounts can be spe
-0000e950: 6369 6669 6564 2e20 5468 6520 7375 6767  cified. The sugg
-0000e960: 6573 7465 6420 7469 7020 616d 6f75 6e74  ested tip amount
-0000e970: 7320 6d75 7374 2062 6520 706f 7369 7469  s must be positi
-0000e980: 7665 2c20 7061 7373 6564 2069 6e20 6120  ve, passed in a 
-0000e990: 7374 7269 6374 6c79 2069 6e63 7265 6173  strictly increas
-0000e9a0: 6564 206f 7264 6572 2061 6e64 206d 7573  ed order and mus
-0000e9b0: 7420 6e6f 7420 6578 6365 6564 206d 6178  t not exceed max
-0000e9c0: 5f74 6970 5f61 6d6f 756e 742e 0a20 2020  _tip_amount..   
-0000e9d0: 203a 7061 7261 6d20 7072 6f74 6563 745f   :param protect_
-0000e9e0: 636f 6e74 656e 743a 0a20 2020 203a 7265  content:.    :re
-0000e9f0: 7475 726e 3a0a 2020 2020 2222 220a 2020  turn:.    """.  
-0000ea00: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000ea10: 2773 656e 6449 6e76 6f69 6365 270a 2020  'sendInvoice'.  
-0000ea20: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-0000ea30: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-0000ea40: 2027 7469 746c 6527 3a20 7469 746c 652c   'title': title,
-0000ea50: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
-0000ea60: 6465 7363 7269 7074 696f 6e2c 2027 7061  description, 'pa
-0000ea70: 796c 6f61 6427 3a20 696e 766f 6963 655f  yload': invoice_
-0000ea80: 7061 796c 6f61 642c 0a20 2020 2020 2020  payload,.       
-0000ea90: 2020 2020 2020 2020 2770 726f 7669 6465          'provide
-0000eaa0: 725f 746f 6b65 6e27 3a20 7072 6f76 6964  r_token': provid
-0000eab0: 6572 5f74 6f6b 656e 2c20 2763 7572 7265  er_token, 'curre
-0000eac0: 6e63 7927 3a20 6375 7272 656e 6379 2c0a  ncy': currency,.
-0000ead0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0000eae0: 7072 6963 6573 273a 205f 636f 6e76 6572  prices': _conver
-0000eaf0: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
-0000eb00: 616c 697a 6162 6c65 2870 7269 6365 7329  alizable(prices)
-0000eb10: 7d0a 2020 2020 6966 2073 7461 7274 5f70  }.    if start_p
-0000eb20: 6172 616d 6574 6572 3a0a 2020 2020 2020  arameter:.      
-0000eb30: 2020 7061 796c 6f61 645b 2773 7461 7274    payload['start
-0000eb40: 5f70 6172 616d 6574 6572 275d 203d 2073  _parameter'] = s
-0000eb50: 7461 7274 5f70 6172 616d 6574 6572 0a20  tart_parameter. 
-0000eb60: 2020 2069 6620 7068 6f74 6f5f 7572 6c3a     if photo_url:
-0000eb70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000eb80: 5b27 7068 6f74 6f5f 7572 6c27 5d20 3d20  ['photo_url'] = 
-0000eb90: 7068 6f74 6f5f 7572 6c0a 2020 2020 6966  photo_url.    if
-0000eba0: 2070 686f 746f 5f73 697a 653a 0a20 2020   photo_size:.   
-0000ebb0: 2020 2020 2070 6179 6c6f 6164 5b27 7068       payload['ph
-0000ebc0: 6f74 6f5f 7369 7a65 275d 203d 2070 686f  oto_size'] = pho
-0000ebd0: 746f 5f73 697a 650a 2020 2020 6966 2070  to_size.    if p
-0000ebe0: 686f 746f 5f77 6964 7468 3a0a 2020 2020  hoto_width:.    
-0000ebf0: 2020 2020 7061 796c 6f61 645b 2770 686f      payload['pho
-0000ec00: 746f 5f77 6964 7468 275d 203d 2070 686f  to_width'] = pho
-0000ec10: 746f 5f77 6964 7468 0a20 2020 2069 6620  to_width.    if 
-0000ec20: 7068 6f74 6f5f 6865 6967 6874 3a0a 2020  photo_height:.  
-0000ec30: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-0000ec40: 686f 746f 5f68 6569 6768 7427 5d20 3d20  hoto_height'] = 
-0000ec50: 7068 6f74 6f5f 6865 6967 6874 0a20 2020  photo_height.   
-0000ec60: 2069 6620 6e65 6564 5f6e 616d 6520 6973   if need_name is
-0000ec70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000ec80: 2020 2070 6179 6c6f 6164 5b27 6e65 6564     payload['need
-0000ec90: 5f6e 616d 6527 5d20 3d20 6e65 6564 5f6e  _name'] = need_n
-0000eca0: 616d 650a 2020 2020 6966 206e 6565 645f  ame.    if need_
-0000ecb0: 7068 6f6e 655f 6e75 6d62 6572 2069 7320  phone_number is 
-0000ecc0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000ecd0: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
-0000ece0: 7068 6f6e 655f 6e75 6d62 6572 275d 203d  phone_number'] =
-0000ecf0: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
-0000ed00: 6572 0a20 2020 2069 6620 6e65 6564 5f65  er.    if need_e
-0000ed10: 6d61 696c 2069 7320 6e6f 7420 4e6f 6e65  mail is not None
-0000ed20: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000ed30: 645b 276e 6565 645f 656d 6169 6c27 5d20  d['need_email'] 
-0000ed40: 3d20 6e65 6564 5f65 6d61 696c 0a20 2020  = need_email.   
-0000ed50: 2069 6620 6e65 6564 5f73 6869 7070 696e   if need_shippin
-0000ed60: 675f 6164 6472 6573 7320 6973 206e 6f74  g_address is not
-0000ed70: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-0000ed80: 6179 6c6f 6164 5b27 6e65 6564 5f73 6869  ayload['need_shi
-0000ed90: 7070 696e 675f 6164 6472 6573 7327 5d20  pping_address'] 
-0000eda0: 3d20 6e65 6564 5f73 6869 7070 696e 675f  = need_shipping_
-0000edb0: 6164 6472 6573 730a 2020 2020 6966 2073  address.    if s
-0000edc0: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
-0000edd0: 5f74 6f5f 7072 6f76 6964 6572 2069 7320  _to_provider is 
-0000ede0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000edf0: 2020 7061 796c 6f61 645b 2773 656e 645f    payload['send_
-0000ee00: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
-0000ee10: 7072 6f76 6964 6572 275d 203d 2073 656e  provider'] = sen
-0000ee20: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
-0000ee30: 6f5f 7072 6f76 6964 6572 0a20 2020 2069  o_provider.    i
-0000ee40: 6620 7365 6e64 5f65 6d61 696c 5f74 6f5f  f send_email_to_
-0000ee50: 7072 6f76 6964 6572 2069 7320 6e6f 7420  provider is not 
-0000ee60: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000ee70: 796c 6f61 645b 2773 656e 645f 656d 6169  yload['send_emai
-0000ee80: 6c5f 746f 5f70 726f 7669 6465 7227 5d20  l_to_provider'] 
-0000ee90: 3d20 7365 6e64 5f65 6d61 696c 5f74 6f5f  = send_email_to_
-0000eea0: 7072 6f76 6964 6572 0a20 2020 2069 6620  provider.    if 
-0000eeb0: 6973 5f66 6c65 7869 626c 6520 6973 206e  is_flexible is n
-0000eec0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000eed0: 2070 6179 6c6f 6164 5b27 6973 5f66 6c65   payload['is_fle
-0000eee0: 7869 626c 6527 5d20 3d20 6973 5f66 6c65  xible'] = is_fle
-0000eef0: 7869 626c 650a 2020 2020 6966 2064 6973  xible.    if dis
-0000ef00: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-0000ef10: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-0000ef20: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000ef30: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000ef40: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-0000ef50: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-0000ef60: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
-0000ef70: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000ef80: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-0000ef90: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
-0000efa0: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
-0000efb0: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
-0000efc0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-0000efd0: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-0000efe0: 6c79 5f6d 6172 6b75 7027 5d20 3d20 5f63  ly_markup'] = _c
-0000eff0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-0000f000: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-0000f010: 6966 2070 726f 7669 6465 725f 6461 7461  if provider_data
-0000f020: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000f030: 645b 2770 726f 7669 6465 725f 6461 7461  d['provider_data
-0000f040: 275d 203d 2070 726f 7669 6465 725f 6461  '] = provider_da
-0000f050: 7461 0a20 2020 2069 6620 7469 6d65 6f75  ta.    if timeou
-0000f060: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-0000f070: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
-0000f080: 7469 6d65 6f75 740a 2020 2020 6966 2061  timeout.    if a
-0000f090: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-0000f0a0: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
-0000f0b0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000f0c0: 7061 796c 6f61 645b 2761 6c6c 6f77 5f73  payload['allow_s
-0000f0d0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-0000f0e0: 6570 6c79 275d 203d 2061 6c6c 6f77 5f73  eply'] = allow_s
-0000f0f0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-0000f100: 6570 6c79 0a20 2020 2069 6620 6d61 785f  eply.    if max_
-0000f110: 7469 705f 616d 6f75 6e74 2069 7320 6e6f  tip_amount is no
-0000f120: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000f130: 7061 796c 6f61 645b 276d 6178 5f74 6970  payload['max_tip
-0000f140: 5f61 6d6f 756e 7427 5d20 3d20 6d61 785f  _amount'] = max_
-0000f150: 7469 705f 616d 6f75 6e74 0a20 2020 2069  tip_amount.    i
-0000f160: 6620 7375 6767 6573 7465 645f 7469 705f  f suggested_tip_
-0000f170: 616d 6f75 6e74 7320 6973 206e 6f74 204e  amounts is not N
-0000f180: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000f190: 6c6f 6164 5b27 7375 6767 6573 7465 645f  load['suggested_
-0000f1a0: 7469 705f 616d 6f75 6e74 7327 5d20 3d20  tip_amounts'] = 
-0000f1b0: 6a73 6f6e 2e64 756d 7073 2873 7567 6765  json.dumps(sugge
-0000f1c0: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
-0000f1d0: 290a 2020 2020 6966 2070 726f 7465 6374  ).    if protect
-0000f1e0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
-0000f1f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-0000f200: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
-0000f210: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
-0000f220: 6374 5f63 6f6e 7465 6e74 0a20 2020 2069  ct_content.    i
-0000f230: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
-0000f240: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000f250: 6c6f 6164 5b27 6d65 7373 6167 655f 7468  load['message_th
-0000f260: 7265 6164 5f69 6427 5d20 3d20 6d65 7373  read_id'] = mess
-0000f270: 6167 655f 7468 7265 6164 5f69 640a 2020  age_thread_id.  
-0000f280: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
-0000f290: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-0000f2a0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-0000f2b0: 3d70 6179 6c6f 6164 290a 0a0a 6465 6620  =payload)...def 
-0000f2c0: 616e 7377 6572 5f73 6869 7070 696e 675f  answer_shipping_
-0000f2d0: 7175 6572 7928 746f 6b65 6e2c 2073 6869  query(token, shi
-0000f2e0: 7070 696e 675f 7175 6572 795f 6964 2c20  pping_query_id, 
-0000f2f0: 6f6b 2c20 7368 6970 7069 6e67 5f6f 7074  ok, shipping_opt
-0000f300: 696f 6e73 3d4e 6f6e 652c 2065 7272 6f72  ions=None, error
-0000f310: 5f6d 6573 7361 6765 3d4e 6f6e 6529 3a0a  _message=None):.
-0000f320: 2020 2020 2222 220a 2020 2020 4966 2079      """.    If y
-0000f330: 6f75 2073 656e 7420 616e 2069 6e76 6f69  ou sent an invoi
-0000f340: 6365 2072 6571 7565 7374 696e 6720 6120  ce requesting a 
-0000f350: 7368 6970 7069 6e67 2061 6464 7265 7373  shipping address
-0000f360: 2061 6e64 2074 6865 2070 6172 616d 6574   and the paramet
-0000f370: 6572 2069 735f 666c 6578 6962 6c65 2077  er is_flexible w
-0000f380: 6173 2073 7065 6369 6669 6564 2c20 7468  as specified, th
-0000f390: 6520 426f 7420 4150 4920 7769 6c6c 2073  e Bot API will s
-0000f3a0: 656e 6420 616e 2055 7064 6174 6520 7769  end an Update wi
-0000f3b0: 7468 2061 2073 6869 7070 696e 675f 7175  th a shipping_qu
-0000f3c0: 6572 7920 6669 656c 6420 746f 2074 6865  ery field to the
-0000f3d0: 2062 6f74 2e20 5573 6520 7468 6973 206d   bot. Use this m
-0000f3e0: 6574 686f 6420 746f 2072 6570 6c79 2074  ethod to reply t
-0000f3f0: 6f20 7368 6970 7069 6e67 2071 7565 7269  o shipping queri
-0000f400: 6573 2e20 4f6e 2073 7563 6365 7373 2c20  es. On success, 
-0000f410: 5472 7565 2069 7320 7265 7475 726e 6564  True is returned
-0000f420: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
-0000f430: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
-0000f440: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
-0000f450: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
-0000f460: 2020 3a70 6172 616d 2073 6869 7070 696e    :param shippin
-0000f470: 675f 7175 6572 795f 6964 3a20 556e 6971  g_query_id: Uniq
-0000f480: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
-0000f490: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
-0000f4a0: 6520 616e 7377 6572 6564 0a20 2020 203a  e answered.    :
-0000f4b0: 7061 7261 6d20 6f6b 3a20 5370 6563 6966  param ok: Specif
-0000f4c0: 7920 5472 7565 2069 6620 6465 6c69 7665  y True if delive
-0000f4d0: 7279 2074 6f20 7468 6520 7370 6563 6966  ry to the specif
-0000f4e0: 6965 6420 6164 6472 6573 7320 6973 2070  ied address is p
-0000f4f0: 6f73 7369 626c 6520 616e 6420 4661 6c73  ossible and Fals
-0000f500: 6520 6966 2074 6865 7265 2061 7265 2061  e if there are a
-0000f510: 6e79 2070 726f 626c 656d 7320 2866 6f72  ny problems (for
-0000f520: 2065 7861 6d70 6c65 2c20 6966 2064 656c   example, if del
-0000f530: 6976 6572 7920 746f 2074 6865 2073 7065  ivery to the spe
-0000f540: 6369 6669 6564 2061 6464 7265 7373 2069  cified address i
-0000f550: 7320 6e6f 7420 706f 7373 6962 6c65 290a  s not possible).
-0000f560: 2020 2020 3a70 6172 616d 2073 6869 7070      :param shipp
-0000f570: 696e 675f 6f70 7469 6f6e 733a 2052 6571  ing_options: Req
-0000f580: 7569 7265 6420 6966 206f 6b20 6973 2054  uired if ok is T
-0000f590: 7275 652e 2041 204a 534f 4e2d 7365 7269  rue. A JSON-seri
-0000f5a0: 616c 697a 6564 2061 7272 6179 206f 6620  alized array of 
-0000f5b0: 6176 6169 6c61 626c 6520 7368 6970 7069  available shippi
-0000f5c0: 6e67 206f 7074 696f 6e73 2e0a 2020 2020  ng options..    
-0000f5d0: 3a70 6172 616d 2065 7272 6f72 5f6d 6573  :param error_mes
-0000f5e0: 7361 6765 3a20 5265 7175 6972 6564 2069  sage: Required i
-0000f5f0: 6620 6f6b 2069 7320 4661 6c73 652e 2045  f ok is False. E
-0000f600: 7272 6f72 206d 6573 7361 6765 2069 6e20  rror message in 
-0000f610: 6875 6d61 6e20 7265 6164 6162 6c65 2066  human readable f
-0000f620: 6f72 6d20 7468 6174 2065 7870 6c61 696e  orm that explain
-0000f630: 7320 7768 7920 6974 2069 7320 696d 706f  s why it is impo
-0000f640: 7373 6962 6c65 2074 6f20 636f 6d70 6c65  ssible to comple
-0000f650: 7465 2074 6865 206f 7264 6572 2028 652e  te the order (e.
-0000f660: 672e 2022 536f 7272 792c 2064 656c 6976  g. "Sorry, deliv
-0000f670: 6572 7920 746f 2079 6f75 7220 6465 7369  ery to your desi
-0000f680: 7265 6420 6164 6472 6573 7320 6973 2075  red address is u
-0000f690: 6e61 7661 696c 6162 6c65 2729 2e20 5465  navailable'). Te
-0000f6a0: 6c65 6772 616d 2077 696c 6c20 6469 7370  legram will disp
-0000f6b0: 6c61 7920 7468 6973 206d 6573 7361 6765  lay this message
-0000f6c0: 2074 6f20 7468 6520 7573 6572 2e0a 2020   to the user..  
-0000f6d0: 2020 3a72 6574 7572 6e3a 0a20 2020 2022    :return:.    "
-0000f6e0: 2222 0a20 2020 206d 6574 686f 645f 7572  "".    method_ur
-0000f6f0: 6c20 3d20 2761 6e73 7765 7253 6869 7070  l = 'answerShipp
-0000f700: 696e 6751 7565 7279 270a 2020 2020 7061  ingQuery'.    pa
-0000f710: 796c 6f61 6420 3d20 7b27 7368 6970 7069  yload = {'shippi
-0000f720: 6e67 5f71 7565 7279 5f69 6427 3a20 7368  ng_query_id': sh
-0000f730: 6970 7069 6e67 5f71 7565 7279 5f69 642c  ipping_query_id,
-0000f740: 2027 6f6b 273a 206f 6b7d 0a20 2020 2069   'ok': ok}.    i
-0000f750: 6620 7368 6970 7069 6e67 5f6f 7074 696f  f shipping_optio
-0000f760: 6e73 3a0a 2020 2020 2020 2020 7061 796c  ns:.        payl
-0000f770: 6f61 645b 2773 6869 7070 696e 675f 6f70  oad['shipping_op
-0000f780: 7469 6f6e 7327 5d20 3d20 5f63 6f6e 7665  tions'] = _conve
-0000f790: 7274 5f6c 6973 745f 6a73 6f6e 5f73 6572  rt_list_json_ser
-0000f7a0: 6961 6c69 7a61 626c 6528 7368 6970 7069  ializable(shippi
-0000f7b0: 6e67 5f6f 7074 696f 6e73 290a 2020 2020  ng_options).    
-0000f7c0: 6966 2065 7272 6f72 5f6d 6573 7361 6765  if error_message
-0000f7d0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000f7e0: 645b 2765 7272 6f72 5f6d 6573 7361 6765  d['error_message
-0000f7f0: 275d 203d 2065 7272 6f72 5f6d 6573 7361  '] = error_messa
-0000f800: 6765 0a20 2020 2072 6574 7572 6e20 5f6d  ge.    return _m
-0000f810: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
-0000f820: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000f830: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-0000f840: 0a64 6566 2061 6e73 7765 725f 7072 655f  .def answer_pre_
-0000f850: 6368 6563 6b6f 7574 5f71 7565 7279 2874  checkout_query(t
-0000f860: 6f6b 656e 2c20 7072 655f 6368 6563 6b6f  oken, pre_checko
-0000f870: 7574 5f71 7565 7279 5f69 642c 206f 6b2c  ut_query_id, ok,
-0000f880: 2065 7272 6f72 5f6d 6573 7361 6765 3d4e   error_message=N
-0000f890: 6f6e 6529 3a0a 2020 2020 2222 220a 2020  one):.    """.  
-0000f8a0: 2020 4f6e 6365 2074 6865 2075 7365 7220    Once the user 
-0000f8b0: 6861 7320 636f 6e66 6972 6d65 6420 7468  has confirmed th
-0000f8c0: 6569 7220 7061 796d 656e 7420 616e 6420  eir payment and 
-0000f8d0: 7368 6970 7069 6e67 2064 6574 6169 6c73  shipping details
-0000f8e0: 2c20 7468 6520 426f 7420 4150 4920 7365  , the Bot API se
-0000f8f0: 6e64 7320 7468 6520 6669 6e61 6c20 636f  nds the final co
-0000f900: 6e66 6972 6d61 7469 6f6e 2069 6e20 7468  nfirmation in th
-0000f910: 6520 666f 726d 206f 6620 616e 2055 7064  e form of an Upd
-0000f920: 6174 6520 7769 7468 2074 6865 2066 6965  ate with the fie
-0000f930: 6c64 2070 7265 5f63 6865 636b 6f75 745f  ld pre_checkout_
-0000f940: 7175 6572 792e 2055 7365 2074 6869 7320  query. Use this 
-0000f950: 6d65 7468 6f64 2074 6f20 7265 7370 6f6e  method to respon
-0000f960: 6420 746f 2073 7563 6820 7072 652d 6368  d to such pre-ch
-0000f970: 6563 6b6f 7574 2071 7565 7269 6573 2e20  eckout queries. 
-0000f980: 4f6e 2073 7563 6365 7373 2c20 5472 7565  On success, True
-0000f990: 2069 7320 7265 7475 726e 6564 2e20 4e6f   is returned. No
-0000f9a0: 7465 3a20 5468 6520 426f 7420 4150 4920  te: The Bot API 
-0000f9b0: 6d75 7374 2072 6563 6569 7665 2061 6e20  must receive an 
-0000f9c0: 616e 7377 6572 2077 6974 6869 6e20 3130  answer within 10
-0000f9d0: 2073 6563 6f6e 6473 2061 6674 6572 2074   seconds after t
-0000f9e0: 6865 2070 7265 2d63 6865 636b 6f75 7420  he pre-checkout 
-0000f9f0: 7175 6572 7920 7761 7320 7365 6e74 2e0a  query was sent..
-0000fa00: 2020 2020 3a70 6172 616d 2074 6f6b 656e      :param token
-0000fa10: 3a20 426f 7427 7320 746f 6b65 6e20 2879  : Bot's token (y
-0000fa20: 6f75 2064 6f6e 2774 206e 6565 6420 746f  ou don't need to
-0000fa30: 2066 696c 6c20 7468 6973 290a 2020 2020   fill this).    
-0000fa40: 3a70 6172 616d 2070 7265 5f63 6865 636b  :param pre_check
-0000fa50: 6f75 745f 7175 6572 795f 6964 3a20 556e  out_query_id: Un
-0000fa60: 6971 7565 2069 6465 6e74 6966 6965 7220  ique identifier 
-0000fa70: 666f 7220 7468 6520 7175 6572 7920 746f  for the query to
-0000fa80: 2062 6520 616e 7377 6572 6564 0a20 2020   be answered.   
-0000fa90: 203a 7061 7261 6d20 6f6b 3a20 5370 6563   :param ok: Spec
-0000faa0: 6966 7920 5472 7565 2069 6620 6576 6572  ify True if ever
-0000fab0: 7974 6869 6e67 2069 7320 616c 7269 6768  ything is alrigh
-0000fac0: 7420 2867 6f6f 6473 2061 7265 2061 7661  t (goods are ava
-0000fad0: 696c 6162 6c65 2c20 6574 632e 2920 616e  ilable, etc.) an
-0000fae0: 6420 7468 6520 626f 7420 6973 2072 6561  d the bot is rea
-0000faf0: 6479 2074 6f20 7072 6f63 6565 6420 7769  dy to proceed wi
-0000fb00: 7468 2074 6865 206f 7264 6572 2e20 5573  th the order. Us
-0000fb10: 6520 4661 6c73 6520 6966 2074 6865 7265  e False if there
-0000fb20: 2061 7265 2061 6e79 2070 726f 626c 656d   are any problem
-0000fb30: 732e 0a20 2020 203a 7061 7261 6d20 6572  s..    :param er
-0000fb40: 726f 725f 6d65 7373 6167 653a 2052 6571  ror_message: Req
-0000fb50: 7569 7265 6420 6966 206f 6b20 6973 2046  uired if ok is F
-0000fb60: 616c 7365 2e20 4572 726f 7220 6d65 7373  alse. Error mess
-0000fb70: 6167 6520 696e 2068 756d 616e 2072 6561  age in human rea
-0000fb80: 6461 626c 6520 666f 726d 2074 6861 7420  dable form that 
-0000fb90: 6578 706c 6169 6e73 2074 6865 2072 6561  explains the rea
-0000fba0: 736f 6e20 666f 7220 6661 696c 7572 6520  son for failure 
-0000fbb0: 746f 2070 726f 6365 6564 2077 6974 6820  to proceed with 
-0000fbc0: 7468 6520 6368 6563 6b6f 7574 2028 652e  the checkout (e.
-0000fbd0: 672e 2022 536f 7272 792c 2073 6f6d 6562  g. "Sorry, someb
-0000fbe0: 6f64 7920 6a75 7374 2062 6f75 6768 7420  ody just bought 
-0000fbf0: 7468 6520 6c61 7374 206f 6620 6f75 7220  the last of our 
-0000fc00: 616d 617a 696e 6720 626c 6163 6b20 542d  amazing black T-
-0000fc10: 7368 6972 7473 2077 6869 6c65 2079 6f75  shirts while you
-0000fc20: 2077 6572 6520 6275 7379 2066 696c 6c69   were busy filli
-0000fc30: 6e67 206f 7574 2079 6f75 7220 7061 796d  ng out your paym
-0000fc40: 656e 7420 6465 7461 696c 732e 2050 6c65  ent details. Ple
-0000fc50: 6173 6520 6368 6f6f 7365 2061 2064 6966  ase choose a dif
-0000fc60: 6665 7265 6e74 2063 6f6c 6f72 206f 7220  ferent color or 
-0000fc70: 6761 726d 656e 7421 2229 2e20 5465 6c65  garment!"). Tele
-0000fc80: 6772 616d 2077 696c 6c20 6469 7370 6c61  gram will displa
-0000fc90: 7920 7468 6973 206d 6573 7361 6765 2074  y this message t
-0000fca0: 6f20 7468 6520 7573 6572 2e0a 2020 2020  o the user..    
-0000fcb0: 3a72 6574 7572 6e3a 0a20 2020 2022 2222  :return:.    """
-0000fcc0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000fcd0: 3d20 2761 6e73 7765 7250 7265 4368 6563  = 'answerPreChec
-0000fce0: 6b6f 7574 5175 6572 7927 0a20 2020 2070  koutQuery'.    p
-0000fcf0: 6179 6c6f 6164 203d 207b 2770 7265 5f63  ayload = {'pre_c
-0000fd00: 6865 636b 6f75 745f 7175 6572 795f 6964  heckout_query_id
-0000fd10: 273a 2070 7265 5f63 6865 636b 6f75 745f  ': pre_checkout_
-0000fd20: 7175 6572 795f 6964 2c20 276f 6b27 3a20  query_id, 'ok': 
-0000fd30: 6f6b 7d0a 2020 2020 6966 2065 7272 6f72  ok}.    if error
-0000fd40: 5f6d 6573 7361 6765 3a0a 2020 2020 2020  _message:.      
-0000fd50: 2020 7061 796c 6f61 645b 2765 7272 6f72    payload['error
-0000fd60: 5f6d 6573 7361 6765 275d 203d 2065 7272  _message'] = err
-0000fd70: 6f72 5f6d 6573 7361 6765 0a20 2020 2072  or_message.    r
-0000fd80: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
-0000fd90: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-0000fda0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-0000fdb0: 796c 6f61 6429 0a0a 0a23 2049 6e6c 696e  yload)...# Inlin
-0000fdc0: 6551 7565 7279 0a0a 6465 6620 616e 7377  eQuery..def answ
-0000fdd0: 6572 5f63 616c 6c62 6163 6b5f 7175 6572  er_callback_quer
-0000fde0: 7928 746f 6b65 6e2c 2063 616c 6c62 6163  y(token, callbac
-0000fdf0: 6b5f 7175 6572 795f 6964 2c20 7465 7874  k_query_id, text
-0000fe00: 3d4e 6f6e 652c 2073 686f 775f 616c 6572  =None, show_aler
-0000fe10: 743d 4e6f 6e65 2c20 7572 6c3d 4e6f 6e65  t=None, url=None
-0000fe20: 2c20 6361 6368 655f 7469 6d65 3d4e 6f6e  , cache_time=Non
-0000fe30: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
-0000fe40: 5573 6520 7468 6973 206d 6574 686f 6420  Use this method 
-0000fe50: 746f 2073 656e 6420 616e 7377 6572 7320  to send answers 
-0000fe60: 746f 2063 616c 6c62 6163 6b20 7175 6572  to callback quer
-0000fe70: 6965 7320 7365 6e74 2066 726f 6d20 696e  ies sent from in
-0000fe80: 6c69 6e65 206b 6579 626f 6172 6473 2e20  line keyboards. 
-0000fe90: 5468 6520 616e 7377 6572 2077 696c 6c20  The answer will 
-0000fea0: 6265 2064 6973 706c 6179 6564 2074 6f20  be displayed to 
-0000feb0: 7468 6520 7573 6572 2061 7320 6120 6e6f  the user as a no
-0000fec0: 7469 6669 6361 7469 6f6e 2061 7420 7468  tification at th
-0000fed0: 6520 746f 7020 6f66 2074 6865 2063 6861  e top of the cha
-0000fee0: 7420 7363 7265 656e 206f 7220 6173 2061  t screen or as a
-0000fef0: 6e20 616c 6572 742e 204f 6e20 7375 6363  n alert. On succ
-0000ff00: 6573 732c 2054 7275 6520 6973 2072 6574  ess, True is ret
-0000ff10: 7572 6e65 642e 0a20 2020 2041 6c74 6572  urned..    Alter
-0000ff20: 6e61 7469 7665 6c79 2c20 7468 6520 7573  natively, the us
-0000ff30: 6572 2063 616e 2062 6520 7265 6469 7265  er can be redire
-0000ff40: 6374 6564 2074 6f20 7468 6520 7370 6563  cted to the spec
-0000ff50: 6966 6965 6420 4761 6d65 2055 524c 2e20  ified Game URL. 
-0000ff60: 466f 7220 7468 6973 206f 7074 696f 6e20  For this option 
-0000ff70: 746f 2077 6f72 6b2c 2079 6f75 206d 7573  to work, you mus
-0000ff80: 7420 6669 7273 7420 6372 6561 7465 2061  t first create a
-0000ff90: 2067 616d 6520 666f 7220 796f 7572 2062   game for your b
-0000ffa0: 6f74 2076 6961 2042 6f74 4661 7468 6572  ot via BotFather
-0000ffb0: 2061 6e64 2061 6363 6570 7420 7468 6520   and accept the 
-0000ffc0: 7465 726d 732e 204f 7468 6572 7769 7365  terms. Otherwise
-0000ffd0: 2c20 796f 7520 6d61 7920 7573 6520 6c69  , you may use li
-0000ffe0: 6e6b 7320 6c69 6b65 2074 656c 6567 7261  nks like telegra
-0000fff0: 6d2e 6d65 2f79 6f75 725f 626f 743f 7374  m.me/your_bot?st
-00010000: 6172 743d 5858 5858 2074 6861 7420 6f70  art=XXXX that op
-00010010: 656e 2079 6f75 7220 626f 7420 7769 7468  en your bot with
-00010020: 2061 2070 6172 616d 6574 6572 2e0a 2020   a parameter..  
-00010030: 2020 3a70 6172 616d 2074 6f6b 656e 3a20    :param token: 
-00010040: 426f 7427 7320 746f 6b65 6e20 2879 6f75  Bot's token (you
-00010050: 2064 6f6e 2774 206e 6565 6420 746f 2066   don't need to f
-00010060: 696c 6c20 7468 6973 290a 2020 2020 3a70  ill this).    :p
-00010070: 6172 616d 2063 616c 6c62 6163 6b5f 7175  aram callback_qu
-00010080: 6572 795f 6964 3a20 556e 6971 7565 2069  ery_id: Unique i
-00010090: 6465 6e74 6966 6965 7220 666f 7220 7468  dentifier for th
-000100a0: 6520 7175 6572 7920 746f 2062 6520 616e  e query to be an
-000100b0: 7377 6572 6564 0a20 2020 203a 7061 7261  swered.    :para
-000100c0: 6d20 7465 7874 3a20 284f 7074 696f 6e61  m text: (Optiona
-000100d0: 6c29 2054 6578 7420 6f66 2074 6865 206e  l) Text of the n
-000100e0: 6f74 6966 6963 6174 696f 6e2e 2049 6620  otification. If 
-000100f0: 6e6f 7420 7370 6563 6966 6965 642c 206e  not specified, n
-00010100: 6f74 6869 6e67 2077 696c 6c20 6265 2073  othing will be s
-00010110: 686f 776e 2074 6f20 7468 6520 7573 6572  hown to the user
-00010120: 2c20 302d 3230 3020 6368 6172 6163 7465  , 0-200 characte
-00010130: 7273 0a20 2020 203a 7061 7261 6d20 7368  rs.    :param sh
-00010140: 6f77 5f61 6c65 7274 3a20 284f 7074 696f  ow_alert: (Optio
-00010150: 6e61 6c29 2049 6620 7472 7565 2c20 616e  nal) If true, an
-00010160: 2061 6c65 7274 2077 696c 6c20 6265 2073   alert will be s
-00010170: 686f 776e 2062 7920 7468 6520 636c 6965  hown by the clie
-00010180: 6e74 2069 6e73 7465 6164 206f 6620 6120  nt instead of a 
-00010190: 6e6f 7469 6669 6361 7469 6f6e 2061 7420  notification at 
-000101a0: 7468 6520 746f 7020 6f66 2074 6865 2063  the top of the c
-000101b0: 6861 7420 7363 7265 656e 2e20 4465 6661  hat screen. Defa
-000101c0: 756c 7473 2074 6f20 6661 6c73 652e 0a20  ults to false.. 
-000101d0: 2020 203a 7061 7261 6d20 7572 6c3a 2028     :param url: (
-000101e0: 4f70 7469 6f6e 616c 2920 5552 4c20 7468  Optional) URL th
-000101f0: 6174 2077 696c 6c20 6265 206f 7065 6e65  at will be opene
-00010200: 6420 6279 2074 6865 2075 7365 7227 7320  d by the user's 
-00010210: 636c 6965 6e74 2e20 4966 2079 6f75 2068  client. If you h
-00010220: 6176 6520 6372 6561 7465 6420 6120 4761  ave created a Ga
-00010230: 6d65 2061 6e64 2061 6363 6570 7465 6420  me and accepted 
-00010240: 7468 6520 636f 6e64 6974 696f 6e73 2076  the conditions v
-00010250: 6961 2040 426f 7466 6174 6865 722c 2073  ia @Botfather, s
-00010260: 7065 6369 6679 2074 6865 2055 524c 2074  pecify the URL t
-00010270: 6861 7420 6f70 656e 7320 796f 7572 2067  hat opens your g
-00010280: 616d 6520 e280 9320 6e6f 7465 2074 6861  ame ... note tha
-00010290: 7420 7468 6973 2077 696c 6c20 6f6e 6c79  t this will only
-000102a0: 2077 6f72 6b20 6966 2074 6865 2071 7565   work if the que
-000102b0: 7279 2063 6f6d 6573 2066 726f 6d20 6120  ry comes from a 
-000102c0: 6361 6c6c 6261 636b 5f67 616d 6520 6275  callback_game bu
-000102d0: 7474 6f6e 2e0a 2020 2020 4f74 6865 7277  tton..    Otherw
-000102e0: 6973 652c 2079 6f75 206d 6179 2075 7365  ise, you may use
-000102f0: 206c 696e 6b73 206c 696b 6520 7465 6c65   links like tele
-00010300: 6772 616d 2e6d 652f 796f 7572 5f62 6f74  gram.me/your_bot
-00010310: 3f73 7461 7274 3d58 5858 5820 7468 6174  ?start=XXXX that
-00010320: 206f 7065 6e20 796f 7572 2062 6f74 2077   open your bot w
-00010330: 6974 6820 6120 7061 7261 6d65 7465 722e  ith a parameter.
-00010340: 0a20 2020 203a 7061 7261 6d20 6361 6368  .    :param cach
-00010350: 655f 7469 6d65 3a20 284f 7074 696f 6e61  e_time: (Optiona
-00010360: 6c29 2054 6865 206d 6178 696d 756d 2061  l) The maximum a
-00010370: 6d6f 756e 7420 6f66 2074 696d 6520 696e  mount of time in
-00010380: 2073 6563 6f6e 6473 2074 6861 7420 7468   seconds that th
-00010390: 6520 7265 7375 6c74 206f 6620 7468 6520  e result of the 
-000103a0: 6361 6c6c 6261 636b 2071 7565 7279 206d  callback query m
-000103b0: 6179 2062 6520 6361 6368 6564 2063 6c69  ay be cached cli
-000103c0: 656e 742d 7369 6465 2e20 5465 6c65 6772  ent-side. Telegr
-000103d0: 616d 2061 7070 7320 7769 6c6c 2073 7570  am apps will sup
-000103e0: 706f 7274 2063 6163 6869 6e67 2073 7461  port caching sta
-000103f0: 7274 696e 6720 696e 2076 6572 7369 6f6e  rting in version
-00010400: 2033 2e31 342e 2044 6566 6175 6c74 7320   3.14. Defaults 
-00010410: 746f 2030 2e0a 2020 2020 3a72 6574 7572  to 0..    :retur
-00010420: 6e3a 0a20 2020 2022 2222 0a20 2020 206d  n:.    """.    m
-00010430: 6574 686f 645f 7572 6c20 3d20 2761 6e73  ethod_url = 'ans
-00010440: 7765 7243 616c 6c62 6163 6b51 7565 7279  werCallbackQuery
-00010450: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00010460: 7b27 6361 6c6c 6261 636b 5f71 7565 7279  {'callback_query
-00010470: 5f69 6427 3a20 6361 6c6c 6261 636b 5f71  _id': callback_q
-00010480: 7565 7279 5f69 647d 0a20 2020 2069 6620  uery_id}.    if 
-00010490: 7465 7874 3a0a 2020 2020 2020 2020 7061  text:.        pa
-000104a0: 796c 6f61 645b 2774 6578 7427 5d20 3d20  yload['text'] = 
-000104b0: 7465 7874 0a20 2020 2069 6620 7368 6f77  text.    if show
-000104c0: 5f61 6c65 7274 2069 7320 6e6f 7420 4e6f  _alert is not No
-000104d0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000104e0: 6f61 645b 2773 686f 775f 616c 6572 7427  oad['show_alert'
-000104f0: 5d20 3d20 7368 6f77 5f61 6c65 7274 0a20  ] = show_alert. 
-00010500: 2020 2069 6620 7572 6c3a 0a20 2020 2020     if url:.     
-00010510: 2020 2070 6179 6c6f 6164 5b27 7572 6c27     payload['url'
-00010520: 5d20 3d20 7572 6c0a 2020 2020 6966 2063  ] = url.    if c
-00010530: 6163 6865 5f74 696d 6520 6973 206e 6f74  ache_time is not
-00010540: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00010550: 6179 6c6f 6164 5b27 6361 6368 655f 7469  ayload['cache_ti
-00010560: 6d65 275d 203d 2063 6163 6865 5f74 696d  me'] = cache_tim
-00010570: 650a 2020 2020 7265 7475 726e 205f 6d61  e.    return _ma
-00010580: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00010590: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-000105a0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-000105b0: 7468 6f64 3d27 706f 7374 2729 0a0a 0a64  thod='post')...d
-000105c0: 6566 2061 6e73 7765 725f 696e 6c69 6e65  ef answer_inline
-000105d0: 5f71 7565 7279 2874 6f6b 656e 2c20 696e  _query(token, in
-000105e0: 6c69 6e65 5f71 7565 7279 5f69 642c 2072  line_query_id, r
-000105f0: 6573 756c 7473 2c20 6361 6368 655f 7469  esults, cache_ti
-00010600: 6d65 3d4e 6f6e 652c 2069 735f 7065 7273  me=None, is_pers
-00010610: 6f6e 616c 3d4e 6f6e 652c 206e 6578 745f  onal=None, next_
-00010620: 6f66 6673 6574 3d4e 6f6e 652c 0a20 2020  offset=None,.   
-00010630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010640: 2020 2020 2073 7769 7463 685f 706d 5f74       switch_pm_t
-00010650: 6578 743d 4e6f 6e65 2c20 7377 6974 6368  ext=None, switch
-00010660: 5f70 6d5f 7061 7261 6d65 7465 723d 4e6f  _pm_parameter=No
-00010670: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00010680: 7572 6c20 3d20 2761 6e73 7765 7249 6e6c  url = 'answerInl
-00010690: 696e 6551 7565 7279 270a 2020 2020 7061  ineQuery'.    pa
-000106a0: 796c 6f61 6420 3d20 7b27 696e 6c69 6e65  yload = {'inline
-000106b0: 5f71 7565 7279 5f69 6427 3a20 696e 6c69  _query_id': inli
-000106c0: 6e65 5f71 7565 7279 5f69 642c 2027 7265  ne_query_id, 're
-000106d0: 7375 6c74 7327 3a20 5f63 6f6e 7665 7274  sults': _convert
-000106e0: 5f6c 6973 745f 6a73 6f6e 5f73 6572 6961  _list_json_seria
-000106f0: 6c69 7a61 626c 6528 7265 7375 6c74 7329  lizable(results)
-00010700: 7d0a 2020 2020 6966 2063 6163 6865 5f74  }.    if cache_t
-00010710: 696d 6520 6973 206e 6f74 204e 6f6e 653a  ime is not None:
-00010720: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00010730: 5b27 6361 6368 655f 7469 6d65 275d 203d  ['cache_time'] =
-00010740: 2063 6163 6865 5f74 696d 650a 2020 2020   cache_time.    
-00010750: 6966 2069 735f 7065 7273 6f6e 616c 2069  if is_personal i
-00010760: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00010770: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
-00010780: 7065 7273 6f6e 616c 275d 203d 2069 735f  personal'] = is_
-00010790: 7065 7273 6f6e 616c 0a20 2020 2069 6620  personal.    if 
-000107a0: 6e65 7874 5f6f 6666 7365 7420 6973 206e  next_offset is n
-000107b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000107c0: 2070 6179 6c6f 6164 5b27 6e65 7874 5f6f   payload['next_o
-000107d0: 6666 7365 7427 5d20 3d20 6e65 7874 5f6f  ffset'] = next_o
-000107e0: 6666 7365 740a 2020 2020 6966 2073 7769  ffset.    if swi
-000107f0: 7463 685f 706d 5f74 6578 743a 0a20 2020  tch_pm_text:.   
-00010800: 2020 2020 2070 6179 6c6f 6164 5b27 7377       payload['sw
-00010810: 6974 6368 5f70 6d5f 7465 7874 275d 203d  itch_pm_text'] =
-00010820: 2073 7769 7463 685f 706d 5f74 6578 740a   switch_pm_text.
-00010830: 2020 2020 6966 2073 7769 7463 685f 706d      if switch_pm
-00010840: 5f70 6172 616d 6574 6572 3a0a 2020 2020  _parameter:.    
-00010850: 2020 2020 7061 796c 6f61 645b 2773 7769      payload['swi
-00010860: 7463 685f 706d 5f70 6172 616d 6574 6572  tch_pm_parameter
-00010870: 275d 203d 2073 7769 7463 685f 706d 5f70  '] = switch_pm_p
-00010880: 6172 616d 6574 6572 0a20 2020 2072 6574  arameter.    ret
-00010890: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-000108a0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-000108b0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-000108c0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-000108d0: 7427 290a 0a0a 6465 6620 6765 745f 7374  t')...def get_st
-000108e0: 6963 6b65 725f 7365 7428 746f 6b65 6e2c  icker_set(token,
-000108f0: 206e 616d 6529 3a0a 2020 2020 6d65 7468   name):.    meth
-00010900: 6f64 5f75 726c 203d 2027 6765 7453 7469  od_url = 'getSti
-00010910: 636b 6572 5365 7427 0a20 2020 2072 6574  ckerSet'.    ret
-00010920: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00010930: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00010940: 7572 6c2c 2070 6172 616d 733d 7b27 6e61  url, params={'na
-00010950: 6d65 273a 206e 616d 657d 290a 0a64 6566  me': name})..def
-00010960: 2067 6574 5f63 7573 746f 6d5f 656d 6f6a   get_custom_emoj
-00010970: 695f 7374 6963 6b65 7273 2874 6f6b 656e  i_stickers(token
-00010980: 2c20 6375 7374 6f6d 5f65 6d6f 6a69 5f69  , custom_emoji_i
-00010990: 6473 293a 0a20 2020 206d 6574 686f 645f  ds):.    method_
-000109a0: 7572 6c20 3d20 7227 6765 7443 7573 746f  url = r'getCusto
-000109b0: 6d45 6d6f 6a69 5374 6963 6b65 7273 270a  mEmojiStickers'.
-000109c0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000109d0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000109e0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-000109f0: 6d73 3d7b 2763 7573 746f 6d5f 656d 6f6a  ms={'custom_emoj
-00010a00: 695f 6964 7327 3a20 6375 7374 6f6d 5f65  i_ids': custom_e
-00010a10: 6d6f 6a69 5f69 6473 7d29 0a20 2020 200a  moji_ids}).    .
-00010a20: 6465 6620 7570 6c6f 6164 5f73 7469 636b  def upload_stick
-00010a30: 6572 5f66 696c 6528 746f 6b65 6e2c 2075  er_file(token, u
-00010a40: 7365 725f 6964 2c20 706e 675f 7374 6963  ser_id, png_stic
-00010a50: 6b65 7229 3a0a 2020 2020 6d65 7468 6f64  ker):.    method
-00010a60: 5f75 726c 203d 2027 7570 6c6f 6164 5374  _url = 'uploadSt
-00010a70: 6963 6b65 7246 696c 6527 0a20 2020 2070  ickerFile'.    p
-00010a80: 6179 6c6f 6164 203d 207b 2775 7365 725f  ayload = {'user_
-00010a90: 6964 273a 2075 7365 725f 6964 7d0a 2020  id': user_id}.  
-00010aa0: 2020 6669 6c65 7320 3d20 7b27 706e 675f    files = {'png_
-00010ab0: 7374 6963 6b65 7227 3a20 706e 675f 7374  sticker': png_st
-00010ac0: 6963 6b65 727d 0a20 2020 2072 6574 7572  icker}.    retur
-00010ad0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00010ae0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00010af0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00010b00: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
-00010b10: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-00010b20: 0a64 6566 2063 7265 6174 655f 6e65 775f  .def create_new_
-00010b30: 7374 6963 6b65 725f 7365 7428 0a20 2020  sticker_set(.   
-00010b40: 2020 2020 2074 6f6b 656e 2c20 7573 6572       token, user
-00010b50: 5f69 642c 206e 616d 652c 2074 6974 6c65  _id, name, title
-00010b60: 2c20 656d 6f6a 6973 2c20 706e 675f 7374  , emojis, png_st
-00010b70: 6963 6b65 722c 2074 6773 5f73 7469 636b  icker, tgs_stick
-00010b80: 6572 2c0a 2020 2020 2020 2020 6d61 736b  er,.        mask
-00010b90: 5f70 6f73 6974 696f 6e3d 4e6f 6e65 2c20  _position=None, 
-00010ba0: 7765 626d 5f73 7469 636b 6572 3d4e 6f6e  webm_sticker=Non
-00010bb0: 652c 2073 7469 636b 6572 5f74 7970 653d  e, sticker_type=
-00010bc0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-00010bd0: 645f 7572 6c20 3d20 2763 7265 6174 654e  d_url = 'createN
-00010be0: 6577 5374 6963 6b65 7253 6574 270a 2020  ewStickerSet'.  
-00010bf0: 2020 7061 796c 6f61 6420 3d20 7b27 7573    payload = {'us
-00010c00: 6572 5f69 6427 3a20 7573 6572 5f69 642c  er_id': user_id,
-00010c10: 2027 6e61 6d65 273a 206e 616d 652c 2027   'name': name, '
-00010c20: 7469 746c 6527 3a20 7469 746c 652c 2027  title': title, '
-00010c30: 656d 6f6a 6973 273a 2065 6d6f 6a69 737d  emojis': emojis}
-00010c40: 0a20 2020 2069 6620 706e 675f 7374 6963  .    if png_stic
-00010c50: 6b65 723a 0a20 2020 2020 2020 2073 7479  ker:.        sty
-00010c60: 7065 203d 2027 706e 675f 7374 6963 6b65  pe = 'png_sticke
-00010c70: 7227 0a20 2020 2065 6c69 6620 7765 626d  r'.    elif webm
-00010c80: 5f73 7469 636b 6572 3a0a 2020 2020 2020  _sticker:.      
-00010c90: 2020 7374 7970 6520 3d20 2777 6562 6d5f    stype = 'webm_
-00010ca0: 7374 6963 6b65 7227 0a20 2020 2065 6c73  sticker'.    els
-00010cb0: 653a 0a20 2020 2020 2020 2073 7479 7065  e:.        stype
-00010cc0: 203d 2027 7467 735f 7374 6963 6b65 7227   = 'tgs_sticker'
-00010cd0: 0a20 2020 2073 7469 636b 6572 203d 2070  .    sticker = p
-00010ce0: 6e67 5f73 7469 636b 6572 206f 7220 7467  ng_sticker or tg
-00010cf0: 735f 7374 6963 6b65 7220 6f72 2077 6562  s_sticker or web
-00010d00: 6d5f 7374 6963 6b65 720a 2020 2020 6669  m_sticker.    fi
-00010d10: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-00010d20: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00010d30: 7269 6e67 2873 7469 636b 6572 293a 0a20  ring(sticker):. 
-00010d40: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00010d50: 7374 7970 653a 2073 7469 636b 6572 7d0a  stype: sticker}.
-00010d60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00010d70: 2020 7061 796c 6f61 645b 7374 7970 655d    payload[stype]
-00010d80: 203d 2073 7469 636b 6572 0a20 2020 2069   = sticker.    i
-00010d90: 6620 6d61 736b 5f70 6f73 6974 696f 6e3a  f mask_position:
-00010da0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00010db0: 5b27 6d61 736b 5f70 6f73 6974 696f 6e27  ['mask_position'
-00010dc0: 5d20 3d20 6d61 736b 5f70 6f73 6974 696f  ] = mask_positio
-00010dd0: 6e2e 746f 5f6a 736f 6e28 290a 2020 2020  n.to_json().    
-00010de0: 6966 2077 6562 6d5f 7374 6963 6b65 723a  if webm_sticker:
-00010df0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00010e00: 5b27 7765 626d 5f73 7469 636b 6572 275d  ['webm_sticker']
-00010e10: 203d 2077 6562 6d5f 7374 6963 6b65 720a   = webm_sticker.
-00010e20: 2020 2020 6966 2073 7469 636b 6572 5f74      if sticker_t
-00010e30: 7970 653a 0a20 2020 2020 2020 2070 6179  ype:.        pay
-00010e40: 6c6f 6164 5b27 7374 6963 6b65 725f 7479  load['sticker_ty
-00010e50: 7065 275d 203d 2073 7469 636b 6572 5f74  pe'] = sticker_t
-00010e60: 7970 650a 2020 2020 7265 7475 726e 205f  ype.    return _
-00010e70: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00010e80: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00010e90: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00010ea0: 6669 6c65 733d 6669 6c65 732c 206d 6574  files=files, met
-00010eb0: 686f 643d 2770 6f73 7427 290a 0a0a 6465  hod='post')...de
-00010ec0: 6620 6164 645f 7374 6963 6b65 725f 746f  f add_sticker_to
-00010ed0: 5f73 6574 2874 6f6b 656e 2c20 7573 6572  _set(token, user
-00010ee0: 5f69 642c 206e 616d 652c 2065 6d6f 6a69  _id, name, emoji
-00010ef0: 732c 2070 6e67 5f73 7469 636b 6572 2c20  s, png_sticker, 
-00010f00: 7467 735f 7374 6963 6b65 722c 206d 6173  tgs_sticker, mas
-00010f10: 6b5f 706f 7369 7469 6f6e 2c20 7765 626d  k_position, webm
-00010f20: 5f73 7469 636b 6572 293a 0a20 2020 206d  _sticker):.    m
-00010f30: 6574 686f 645f 7572 6c20 3d20 2761 6464  ethod_url = 'add
-00010f40: 5374 6963 6b65 7254 6f53 6574 270a 2020  StickerToSet'.  
-00010f50: 2020 7061 796c 6f61 6420 3d20 7b27 7573    payload = {'us
-00010f60: 6572 5f69 6427 3a20 7573 6572 5f69 642c  er_id': user_id,
-00010f70: 2027 6e61 6d65 273a 206e 616d 652c 2027   'name': name, '
-00010f80: 656d 6f6a 6973 273a 2065 6d6f 6a69 737d  emojis': emojis}
-00010f90: 0a20 2020 2069 6620 706e 675f 7374 6963  .    if png_stic
-00010fa0: 6b65 723a 0a20 2020 2020 2020 2073 7479  ker:.        sty
-00010fb0: 7065 203d 2027 706e 675f 7374 6963 6b65  pe = 'png_sticke
-00010fc0: 7227 0a20 2020 2065 6c69 6620 7765 626d  r'.    elif webm
-00010fd0: 5f73 7469 636b 6572 3a0a 2020 2020 2020  _sticker:.      
-00010fe0: 2020 7374 7970 6520 3d20 2777 6562 6d5f    stype = 'webm_
-00010ff0: 7374 6963 6b65 7227 0a20 2020 2065 6c73  sticker'.    els
-00011000: 653a 0a20 2020 2020 2020 2073 7479 7065  e:.        stype
-00011010: 203d 2027 7467 735f 7374 6963 6b65 7227   = 'tgs_sticker'
-00011020: 0a20 2020 2073 7469 636b 6572 203d 2070  .    sticker = p
-00011030: 6e67 5f73 7469 636b 6572 206f 7220 7467  ng_sticker or tg
-00011040: 735f 7374 6963 6b65 7220 6f72 2077 6562  s_sticker or web
-00011050: 6d5f 7374 6963 6b65 720a 2020 2020 6669  m_sticker.    fi
-00011060: 6c65 7320 3d20 4e6f 6e65 0a20 2020 2069  les = None.    i
-00011070: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
-00011080: 7269 6e67 2873 7469 636b 6572 293a 0a20  ring(sticker):. 
-00011090: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-000110a0: 7374 7970 653a 2073 7469 636b 6572 7d0a  stype: sticker}.
-000110b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000110c0: 2020 7061 796c 6f61 645b 7374 7970 655d    payload[stype]
-000110d0: 203d 2073 7469 636b 6572 0a20 2020 2069   = sticker.    i
-000110e0: 6620 6d61 736b 5f70 6f73 6974 696f 6e3a  f mask_position:
-000110f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00011100: 5b27 6d61 736b 5f70 6f73 6974 696f 6e27  ['mask_position'
-00011110: 5d20 3d20 6d61 736b 5f70 6f73 6974 696f  ] = mask_positio
-00011120: 6e2e 746f 5f6a 736f 6e28 290a 2020 2020  n.to_json().    
-00011130: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-00011140: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00011150: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00011160: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
-00011170: 6c65 732c 206d 6574 686f 643d 2770 6f73  les, method='pos
-00011180: 7427 290a 0a0a 6465 6620 7365 745f 7374  t')...def set_st
-00011190: 6963 6b65 725f 706f 7369 7469 6f6e 5f69  icker_position_i
-000111a0: 6e5f 7365 7428 746f 6b65 6e2c 2073 7469  n_set(token, sti
-000111b0: 636b 6572 2c20 706f 7369 7469 6f6e 293a  cker, position):
-000111c0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-000111d0: 3d20 2773 6574 5374 6963 6b65 7250 6f73  = 'setStickerPos
-000111e0: 6974 696f 6e49 6e53 6574 270a 2020 2020  itionInSet'.    
-000111f0: 7061 796c 6f61 6420 3d20 7b27 7374 6963  payload = {'stic
-00011200: 6b65 7227 3a20 7374 6963 6b65 722c 2027  ker': sticker, '
-00011210: 706f 7369 7469 6f6e 273a 2070 6f73 6974  position': posit
-00011220: 696f 6e7d 0a20 2020 2072 6574 7572 6e20  ion}.    return 
-00011230: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00011240: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00011250: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00011260: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00011270: 0a0a 6465 6620 6465 6c65 7465 5f73 7469  ..def delete_sti
-00011280: 636b 6572 5f66 726f 6d5f 7365 7428 746f  cker_from_set(to
-00011290: 6b65 6e2c 2073 7469 636b 6572 293a 0a20  ken, sticker):. 
-000112a0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000112b0: 2764 656c 6574 6553 7469 636b 6572 4672  'deleteStickerFr
-000112c0: 6f6d 5365 7427 0a20 2020 2070 6179 6c6f  omSet'.    paylo
-000112d0: 6164 203d 207b 2773 7469 636b 6572 273a  ad = {'sticker':
-000112e0: 2073 7469 636b 6572 7d0a 2020 2020 7265   sticker}.    re
-000112f0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-00011300: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00011310: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00011320: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-00011330: 7374 2729 0a0a 0a64 6566 2061 6e73 7765  st')...def answe
-00011340: 725f 7765 625f 6170 705f 7175 6572 7928  r_web_app_query(
-00011350: 746f 6b65 6e2c 2077 6562 5f61 7070 5f71  token, web_app_q
-00011360: 7565 7279 5f69 642c 2072 6573 756c 743a  uery_id, result:
-00011370: 2074 7970 6573 2e49 6e6c 696e 6551 7565   types.InlineQue
-00011380: 7279 5265 7375 6c74 4261 7365 293a 0a20  ryResultBase):. 
-00011390: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-000113a0: 2761 6e73 7765 7257 6562 4170 7051 7565  'answerWebAppQue
-000113b0: 7279 270a 2020 2020 7061 796c 6f61 6420  ry'.    payload 
-000113c0: 3d20 7b27 7765 625f 6170 705f 7175 6572  = {'web_app_quer
-000113d0: 795f 6964 273a 2077 6562 5f61 7070 5f71  y_id': web_app_q
-000113e0: 7565 7279 5f69 642c 2027 7265 7375 6c74  uery_id, 'result
-000113f0: 273a 2072 6573 756c 742e 746f 5f6a 736f  ': result.to_jso
-00011400: 6e28 297d 0a20 2020 2072 6574 7572 6e20  n()}.    return 
-00011410: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00011420: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00011430: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00011440: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-00011450: 0a0a 6465 6620 6372 6561 7465 5f69 6e76  ..def create_inv
-00011460: 6f69 6365 5f6c 696e 6b28 746f 6b65 6e2c  oice_link(token,
-00011470: 2074 6974 6c65 2c20 6465 7363 7269 7074   title, descript
-00011480: 696f 6e2c 2070 6179 6c6f 6164 2c20 7072  ion, payload, pr
-00011490: 6f76 6964 6572 5f74 6f6b 656e 2c0a 2020  ovider_token,.  
-000114a0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-000114b0: 6379 2c20 7072 6963 6573 2c20 6d61 785f  cy, prices, max_
-000114c0: 7469 705f 616d 6f75 6e74 3d4e 6f6e 652c  tip_amount=None,
-000114d0: 2073 7567 6765 7374 6564 5f74 6970 5f61   suggested_tip_a
-000114e0: 6d6f 756e 7473 3d4e 6f6e 652c 2070 726f  mounts=None, pro
-000114f0: 7669 6465 725f 6461 7461 3d4e 6f6e 652c  vider_data=None,
-00011500: 0a20 2020 2020 2020 2020 2020 2070 686f  .            pho
-00011510: 746f 5f75 726c 3d4e 6f6e 652c 2070 686f  to_url=None, pho
-00011520: 746f 5f73 697a 653d 4e6f 6e65 2c20 7068  to_size=None, ph
-00011530: 6f74 6f5f 7769 6474 683d 4e6f 6e65 2c20  oto_width=None, 
-00011540: 7068 6f74 6f5f 6865 6967 6874 3d4e 6f6e  photo_height=Non
-00011550: 652c 206e 6565 645f 6e61 6d65 3d4e 6f6e  e, need_name=Non
-00011560: 652c 206e 6565 645f 7068 6f6e 655f 6e75  e, need_phone_nu
-00011570: 6d62 6572 3d4e 6f6e 652c 0a20 2020 2020  mber=None,.     
-00011580: 2020 2020 2020 206e 6565 645f 656d 6169         need_emai
-00011590: 6c3d 4e6f 6e65 2c20 6e65 6564 5f73 6869  l=None, need_shi
-000115a0: 7070 696e 675f 6164 6472 6573 733d 4e6f  pping_address=No
-000115b0: 6e65 2c20 7365 6e64 5f70 686f 6e65 5f6e  ne, send_phone_n
-000115c0: 756d 6265 725f 746f 5f70 726f 7669 6465  umber_to_provide
-000115d0: 723d 4e6f 6e65 2c0a 2020 2020 2020 2020  r=None,.        
-000115e0: 2020 2020 7365 6e64 5f65 6d61 696c 5f74      send_email_t
-000115f0: 6f5f 7072 6f76 6964 6572 3d4e 6f6e 652c  o_provider=None,
-00011600: 2069 735f 666c 6578 6962 6c65 3d4e 6f6e   is_flexible=Non
-00011610: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00011620: 726c 203d 2072 2763 7265 6174 6549 6e76  rl = r'createInv
-00011630: 6f69 6365 4c69 6e6b 270a 2020 2020 7061  oiceLink'.    pa
-00011640: 796c 6f61 6420 3d20 7b27 7469 746c 6527  yload = {'title'
-00011650: 3a20 7469 746c 652c 2027 6465 7363 7269  : title, 'descri
-00011660: 7074 696f 6e27 3a20 6465 7363 7269 7074  ption': descript
-00011670: 696f 6e2c 2027 7061 796c 6f61 6427 3a20  ion, 'payload': 
-00011680: 7061 796c 6f61 642c 2027 7072 6f76 6964  payload, 'provid
-00011690: 6572 5f74 6f6b 656e 273a 2070 726f 7669  er_token': provi
-000116a0: 6465 725f 746f 6b65 6e2c 0a20 2020 2020  der_token,.     
-000116b0: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-000116c0: 656e 6379 273a 2063 7572 7265 6e63 792c  ency': currency,
-000116d0: 2027 7072 6963 6573 273a 205f 636f 6e76   'prices': _conv
-000116e0: 6572 745f 6c69 7374 5f6a 736f 6e5f 7365  ert_list_json_se
-000116f0: 7269 616c 697a 6162 6c65 2870 7269 6365  rializable(price
-00011700: 7329 7d0a 2020 2020 6966 206d 6178 5f74  s)}.    if max_t
-00011710: 6970 5f61 6d6f 756e 743a 0a20 2020 2020  ip_amount:.     
-00011720: 2020 2070 6179 6c6f 6164 5b27 6d61 785f     payload['max_
-00011730: 7469 705f 616d 6f75 6e74 275d 203d 206d  tip_amount'] = m
-00011740: 6178 5f74 6970 5f61 6d6f 756e 740a 2020  ax_tip_amount.  
-00011750: 2020 6966 2073 7567 6765 7374 6564 5f74    if suggested_t
-00011760: 6970 5f61 6d6f 756e 7473 3a0a 2020 2020  ip_amounts:.    
-00011770: 2020 2020 7061 796c 6f61 645b 2773 7567      payload['sug
-00011780: 6765 7374 6564 5f74 6970 5f61 6d6f 756e  gested_tip_amoun
-00011790: 7473 275d 203d 206a 736f 6e2e 6475 6d70  ts'] = json.dump
-000117a0: 7328 7375 6767 6573 7465 645f 7469 705f  s(suggested_tip_
-000117b0: 616d 6f75 6e74 7329 0a20 2020 2069 6620  amounts).    if 
-000117c0: 7072 6f76 6964 6572 5f64 6174 613a 0a20  provider_data:. 
-000117d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000117e0: 7072 6f76 6964 6572 5f64 6174 6127 5d20  provider_data'] 
-000117f0: 3d20 7072 6f76 6964 6572 5f64 6174 610a  = provider_data.
-00011800: 2020 2020 6966 2070 686f 746f 5f75 726c      if photo_url
-00011810: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00011820: 645b 2770 686f 746f 5f75 726c 275d 203d  d['photo_url'] =
-00011830: 2070 686f 746f 5f75 726c 0a20 2020 2069   photo_url.    i
-00011840: 6620 7068 6f74 6f5f 7369 7a65 3a0a 2020  f photo_size:.  
-00011850: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00011860: 686f 746f 5f73 697a 6527 5d20 3d20 7068  hoto_size'] = ph
-00011870: 6f74 6f5f 7369 7a65 0a20 2020 2069 6620  oto_size.    if 
-00011880: 7068 6f74 6f5f 7769 6474 683a 0a20 2020  photo_width:.   
-00011890: 2020 2020 2070 6179 6c6f 6164 5b27 7068       payload['ph
-000118a0: 6f74 6f5f 7769 6474 6827 5d20 3d20 7068  oto_width'] = ph
-000118b0: 6f74 6f5f 7769 6474 680a 2020 2020 6966  oto_width.    if
-000118c0: 2070 686f 746f 5f68 6569 6768 743a 0a20   photo_height:. 
-000118d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000118e0: 7068 6f74 6f5f 6865 6967 6874 275d 203d  photo_height'] =
-000118f0: 2070 686f 746f 5f68 6569 6768 740a 2020   photo_height.  
-00011900: 2020 6966 206e 6565 645f 6e61 6d65 2069    if need_name i
-00011910: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00011920: 2020 2020 7061 796c 6f61 645b 276e 6565      payload['nee
-00011930: 645f 6e61 6d65 275d 203d 206e 6565 645f  d_name'] = need_
-00011940: 6e61 6d65 0a20 2020 2069 6620 6e65 6564  name.    if need
-00011950: 5f70 686f 6e65 5f6e 756d 6265 7220 6973  _phone_number is
-00011960: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00011970: 2020 2070 6179 6c6f 6164 5b27 6e65 6564     payload['need
-00011980: 5f70 686f 6e65 5f6e 756d 6265 7227 5d20  _phone_number'] 
-00011990: 3d20 6e65 6564 5f70 686f 6e65 5f6e 756d  = need_phone_num
-000119a0: 6265 720a 2020 2020 6966 206e 6565 645f  ber.    if need_
-000119b0: 656d 6169 6c20 6973 206e 6f74 204e 6f6e  email is not Non
-000119c0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000119d0: 6164 5b27 6e65 6564 5f65 6d61 696c 275d  ad['need_email']
-000119e0: 203d 206e 6565 645f 656d 6169 6c0a 2020   = need_email.  
-000119f0: 2020 6966 206e 6565 645f 7368 6970 7069    if need_shippi
-00011a00: 6e67 5f61 6464 7265 7373 2069 7320 6e6f  ng_address is no
-00011a10: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00011a20: 7061 796c 6f61 645b 276e 6565 645f 7368  payload['need_sh
-00011a30: 6970 7069 6e67 5f61 6464 7265 7373 275d  ipping_address']
-00011a40: 203d 206e 6565 645f 7368 6970 7069 6e67   = need_shipping
-00011a50: 5f61 6464 7265 7373 0a20 2020 2069 6620  _address.    if 
-00011a60: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
-00011a70: 725f 746f 5f70 726f 7669 6465 7220 6973  r_to_provider is
-00011a80: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00011a90: 2020 2070 6179 6c6f 6164 5b27 7365 6e64     payload['send
-00011aa0: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-00011ab0: 5f70 726f 7669 6465 7227 5d20 3d20 7365  _provider'] = se
-00011ac0: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-00011ad0: 746f 5f70 726f 7669 6465 720a 2020 2020  to_provider.    
-00011ae0: 6966 2073 656e 645f 656d 6169 6c5f 746f  if send_email_to
-00011af0: 5f70 726f 7669 6465 7220 6973 206e 6f74  _provider is not
-00011b00: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00011b10: 6179 6c6f 6164 5b27 7365 6e64 5f65 6d61  ayload['send_ema
-00011b20: 696c 5f74 6f5f 7072 6f76 6964 6572 275d  il_to_provider']
-00011b30: 203d 2073 656e 645f 656d 6169 6c5f 746f   = send_email_to
-00011b40: 5f70 726f 7669 6465 720a 2020 2020 6966  _provider.    if
-00011b50: 2069 735f 666c 6578 6962 6c65 2069 7320   is_flexible is 
-00011b60: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00011b70: 2020 7061 796c 6f61 645b 2769 735f 666c    payload['is_fl
-00011b80: 6578 6962 6c65 275d 203d 2069 735f 666c  exible'] = is_fl
-00011b90: 6578 6962 6c65 0a20 2020 2072 6574 7572  exible.    retur
-00011ba0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
-00011bb0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00011bc0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00011bd0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-00011be0: 290a 0a0a 2320 6e6f 696e 7370 6563 7469  )...# noinspecti
-00011bf0: 6f6e 2050 7953 6861 646f 7769 6e67 4275  on PyShadowingBu
-00011c00: 696c 7469 6e73 0a64 6566 2073 656e 645f  iltins.def send_
-00011c10: 706f 6c6c 280a 2020 2020 2020 2020 746f  poll(.        to
-00011c20: 6b65 6e2c 2063 6861 745f 6964 2c0a 2020  ken, chat_id,.  
-00011c30: 2020 2020 2020 7175 6573 7469 6f6e 2c20        question, 
-00011c40: 6f70 7469 6f6e 732c 0a20 2020 2020 2020  options,.       
-00011c50: 2069 735f 616e 6f6e 796d 6f75 7320 3d20   is_anonymous = 
-00011c60: 4e6f 6e65 2c20 7479 7065 203d 204e 6f6e  None, type = Non
-00011c70: 652c 2061 6c6c 6f77 735f 6d75 6c74 6970  e, allows_multip
-00011c80: 6c65 5f61 6e73 7765 7273 203d 204e 6f6e  le_answers = Non
-00011c90: 652c 2063 6f72 7265 6374 5f6f 7074 696f  e, correct_optio
-00011ca0: 6e5f 6964 203d 204e 6f6e 652c 0a20 2020  n_id = None,.   
-00011cb0: 2020 2020 2065 7870 6c61 6e61 7469 6f6e       explanation
-00011cc0: 203d 204e 6f6e 652c 2065 7870 6c61 6e61   = None, explana
-00011cd0: 7469 6f6e 5f70 6172 7365 5f6d 6f64 653d  tion_parse_mode=
-00011ce0: 4e6f 6e65 2c20 6f70 656e 5f70 6572 696f  None, open_perio
-00011cf0: 6420 3d20 4e6f 6e65 2c20 636c 6f73 655f  d = None, close_
-00011d00: 6461 7465 203d 204e 6f6e 652c 2069 735f  date = None, is_
-00011d10: 636c 6f73 6564 203d 204e 6f6e 652c 0a20  closed = None,. 
-00011d20: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
-00011d30: 6f74 6966 6963 6174 696f 6e3d 4661 6c73  otification=Fals
-00011d40: 652c 2072 6570 6c79 5f74 6f5f 6d65 7373  e, reply_to_mess
-00011d50: 6167 655f 6964 3d4e 6f6e 652c 2061 6c6c  age_id=None, all
-00011d60: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-00011d70: 7574 5f72 6570 6c79 3d4e 6f6e 652c 0a20  ut_reply=None,. 
-00011d80: 2020 2020 2020 2072 6570 6c79 5f6d 6172         reply_mar
-00011d90: 6b75 703d 4e6f 6e65 2c20 7469 6d65 6f75  kup=None, timeou
-00011da0: 743d 4e6f 6e65 2c20 6578 706c 616e 6174  t=None, explanat
-00011db0: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
-00011dc0: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-00011dd0: 6e74 3d4e 6f6e 652c 206d 6573 7361 6765  nt=None, message
-00011de0: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
-00011df0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00011e00: 203d 2072 2773 656e 6450 6f6c 6c27 0a20   = r'sendPoll'. 
-00011e10: 2020 2070 6179 6c6f 6164 203d 207b 0a20     payload = {. 
-00011e20: 2020 2020 2020 2027 6368 6174 5f69 6427         'chat_id'
-00011e30: 3a20 7374 7228 6368 6174 5f69 6429 2c0a  : str(chat_id),.
-00011e40: 2020 2020 2020 2020 2771 7565 7374 696f          'questio
-00011e50: 6e27 3a20 7175 6573 7469 6f6e 2c0a 2020  n': question,.  
-00011e60: 2020 2020 2020 276f 7074 696f 6e73 273a        'options':
-00011e70: 206a 736f 6e2e 6475 6d70 7328 5f63 6f6e   json.dumps(_con
-00011e80: 7665 7274 5f70 6f6c 6c5f 6f70 7469 6f6e  vert_poll_option
-00011e90: 7328 6f70 7469 6f6e 7329 297d 0a0a 2020  s(options))}..  
-00011ea0: 2020 6966 2069 735f 616e 6f6e 796d 6f75    if is_anonymou
-00011eb0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00011ec0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00011ed0: 6973 5f61 6e6f 6e79 6d6f 7573 275d 203d  is_anonymous'] =
-00011ee0: 2069 735f 616e 6f6e 796d 6f75 730a 2020   is_anonymous.  
-00011ef0: 2020 6966 2074 7970 6520 6973 206e 6f74    if type is not
-00011f00: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00011f10: 6179 6c6f 6164 5b27 7479 7065 275d 203d  ayload['type'] =
-00011f20: 2074 7970 650a 2020 2020 6966 2061 6c6c   type.    if all
-00011f30: 6f77 735f 6d75 6c74 6970 6c65 5f61 6e73  ows_multiple_ans
-00011f40: 7765 7273 2069 7320 6e6f 7420 4e6f 6e65  wers is not None
-00011f50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00011f60: 645b 2761 6c6c 6f77 735f 6d75 6c74 6970  d['allows_multip
-00011f70: 6c65 5f61 6e73 7765 7273 275d 203d 2061  le_answers'] = a
-00011f80: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
-00011f90: 6e73 7765 7273 0a20 2020 2069 6620 636f  nswers.    if co
-00011fa0: 7272 6563 745f 6f70 7469 6f6e 5f69 6420  rrect_option_id 
-00011fb0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00011fc0: 2020 2020 2070 6179 6c6f 6164 5b27 636f       payload['co
-00011fd0: 7272 6563 745f 6f70 7469 6f6e 5f69 6427  rrect_option_id'
-00011fe0: 5d20 3d20 636f 7272 6563 745f 6f70 7469  ] = correct_opti
-00011ff0: 6f6e 5f69 640a 2020 2020 6966 2065 7870  on_id.    if exp
-00012000: 6c61 6e61 7469 6f6e 2069 7320 6e6f 7420  lanation is not 
-00012010: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00012020: 796c 6f61 645b 2765 7870 6c61 6e61 7469  yload['explanati
-00012030: 6f6e 275d 203d 2065 7870 6c61 6e61 7469  on'] = explanati
-00012040: 6f6e 0a20 2020 2069 6620 6578 706c 616e  on.    if explan
-00012050: 6174 696f 6e5f 7061 7273 655f 6d6f 6465  ation_parse_mode
-00012060: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00012070: 2020 2020 2020 7061 796c 6f61 645b 2765        payload['e
-00012080: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
-00012090: 5f6d 6f64 6527 5d20 3d20 6578 706c 616e  _mode'] = explan
-000120a0: 6174 696f 6e5f 7061 7273 655f 6d6f 6465  ation_parse_mode
-000120b0: 0a20 2020 2069 6620 6f70 656e 5f70 6572  .    if open_per
-000120c0: 696f 6420 6973 206e 6f74 204e 6f6e 653a  iod is not None:
-000120d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000120e0: 5b27 6f70 656e 5f70 6572 696f 6427 5d20  ['open_period'] 
-000120f0: 3d20 6f70 656e 5f70 6572 696f 640a 2020  = open_period.  
-00012100: 2020 6966 2063 6c6f 7365 5f64 6174 6520    if close_date 
-00012110: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00012120: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00012130: 6365 2863 6c6f 7365 5f64 6174 652c 2064  ce(close_date, d
-00012140: 6174 6574 696d 6529 3a0a 2020 2020 2020  atetime):.      
-00012150: 2020 2020 2020 7061 796c 6f61 645b 2763        payload['c
-00012160: 6c6f 7365 5f64 6174 6527 5d20 3d20 636c  lose_date'] = cl
-00012170: 6f73 655f 6461 7465 2e74 696d 6573 7461  ose_date.timesta
-00012180: 6d70 2829 0a20 2020 2020 2020 2065 6c73  mp().        els
-00012190: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-000121a0: 6179 6c6f 6164 5b27 636c 6f73 655f 6461  ayload['close_da
-000121b0: 7465 275d 203d 2063 6c6f 7365 5f64 6174  te'] = close_dat
-000121c0: 650a 2020 2020 6966 2069 735f 636c 6f73  e.    if is_clos
-000121d0: 6564 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ed is not None:.
-000121e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000121f0: 2769 735f 636c 6f73 6564 275d 203d 2069  'is_closed'] = i
-00012200: 735f 636c 6f73 6564 0a0a 2020 2020 6966  s_closed..    if
-00012210: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00012220: 6174 696f 6e3a 0a20 2020 2020 2020 2070  ation:.        p
-00012230: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
-00012240: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
-00012250: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00012260: 6174 696f 6e0a 2020 2020 6966 2072 6570  ation.    if rep
-00012270: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00012280: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00012290: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
-000122a0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-000122b0: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
-000122c0: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-000122d0: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
-000122e0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
-000122f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012300: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-00012310: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00012320: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
-00012330: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00012340: 745f 7265 706c 790a 2020 2020 6966 2072  t_reply.    if r
-00012350: 6570 6c79 5f6d 6172 6b75 7020 6973 206e  eply_markup is n
-00012360: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00012370: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-00012380: 6d61 726b 7570 275d 203d 205f 636f 6e76  markup'] = _conv
-00012390: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-000123a0: 5f6d 6172 6b75 7029 0a20 2020 2069 6620  _markup).    if 
-000123b0: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
-000123c0: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
-000123d0: 7427 5d20 3d20 7469 6d65 6f75 740a 2020  t'] = timeout.  
-000123e0: 2020 6966 2065 7870 6c61 6e61 7469 6f6e    if explanation
-000123f0: 5f65 6e74 6974 6965 733a 0a20 2020 2020  _entities:.     
-00012400: 2020 2070 6179 6c6f 6164 5b27 6578 706c     payload['expl
-00012410: 616e 6174 696f 6e5f 656e 7469 7469 6573  anation_entities
-00012420: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
-00012430: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
-00012440: 6573 2e4d 6573 7361 6765 456e 7469 7479  es.MessageEntity
-00012450: 2e74 6f5f 6c69 7374 5f6f 665f 6469 6374  .to_list_of_dict
-00012460: 7328 6578 706c 616e 6174 696f 6e5f 656e  s(explanation_en
-00012470: 7469 7469 6573 2929 0a20 2020 2069 6620  tities)).    if 
-00012480: 7072 6f74 6563 745f 636f 6e74 656e 743a  protect_content:
-00012490: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000124a0: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
-000124b0: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
-000124c0: 6e74 656e 740a 2020 2020 6966 206d 6573  ntent.    if mes
-000124d0: 7361 6765 5f74 6872 6561 645f 6964 3a0a  sage_thread_id:.
-000124e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000124f0: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
-00012500: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
-00012510: 6872 6561 645f 6964 0a20 2020 2072 6574  hread_id.    ret
-00012520: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
-00012530: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00012540: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00012550: 6f61 6429 0a0a 6465 6620 6372 6561 7465  oad)..def create
-00012560: 5f66 6f72 756d 5f74 6f70 6963 2874 6f6b  _forum_topic(tok
-00012570: 656e 2c20 6368 6174 5f69 642c 206e 616d  en, chat_id, nam
-00012580: 652c 2069 636f 6e5f 636f 6c6f 723d 4e6f  e, icon_color=No
-00012590: 6e65 2c20 6963 6f6e 5f63 7573 746f 6d5f  ne, icon_custom_
-000125a0: 656d 6f6a 695f 6964 3d4e 6f6e 6529 3a0a  emoji_id=None):.
-000125b0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000125c0: 2072 2763 7265 6174 6546 6f72 756d 546f   r'createForumTo
-000125d0: 7069 6327 0a20 2020 2070 6179 6c6f 6164  pic'.    payload
-000125e0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-000125f0: 6861 745f 6964 2c20 276e 616d 6527 3a20  hat_id, 'name': 
-00012600: 6e61 6d65 7d0a 2020 2020 6966 2069 636f  name}.    if ico
-00012610: 6e5f 636f 6c6f 723a 0a20 2020 2020 2020  n_color:.       
-00012620: 2070 6179 6c6f 6164 5b27 6963 6f6e 5f63   payload['icon_c
-00012630: 6f6c 6f72 275d 203d 2069 636f 6e5f 636f  olor'] = icon_co
-00012640: 6c6f 720a 2020 2020 6966 2069 636f 6e5f  lor.    if icon_
-00012650: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 643a  custom_emoji_id:
-00012660: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00012670: 5b27 6963 6f6e 5f63 7573 746f 6d5f 656d  ['icon_custom_em
-00012680: 6f6a 695f 6964 275d 203d 2069 636f 6e5f  oji_id'] = icon_
-00012690: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 640a  custom_emoji_id.
-000126a0: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-000126b0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-000126c0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-000126d0: 6d73 3d70 6179 6c6f 6164 290a 0a64 6566  ms=payload)..def
-000126e0: 2065 6469 745f 666f 7275 6d5f 746f 7069   edit_forum_topi
-000126f0: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
-00012700: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
-00012710: 5f69 642c 206e 616d 652c 2069 636f 6e5f  _id, name, icon_
-00012720: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 6429  custom_emoji_id)
-00012730: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00012740: 203d 2072 2765 6469 7446 6f72 756d 546f   = r'editForumTo
-00012750: 7069 6327 0a20 2020 2070 6179 6c6f 6164  pic'.    payload
-00012760: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00012770: 6861 745f 6964 2c20 276d 6573 7361 6765  hat_id, 'message
-00012780: 5f74 6872 6561 645f 6964 273a 206d 6573  _thread_id': mes
-00012790: 7361 6765 5f74 6872 6561 645f 6964 2c20  sage_thread_id, 
-000127a0: 276e 616d 6527 3a20 6e61 6d65 2c20 2769  'name': name, 'i
-000127b0: 636f 6e5f 6375 7374 6f6d 5f65 6d6f 6a69  con_custom_emoji
-000127c0: 5f69 6427 3a20 6963 6f6e 5f63 7573 746f  _id': icon_custo
-000127d0: 6d5f 656d 6f6a 695f 6964 7d0a 2020 2020  m_emoji_id}.    
-000127e0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
-000127f0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00012800: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00012810: 6179 6c6f 6164 290a 0a64 6566 2063 6c6f  ayload)..def clo
-00012820: 7365 5f66 6f72 756d 5f74 6f70 6963 2874  se_forum_topic(t
-00012830: 6f6b 656e 2c20 6368 6174 5f69 642c 206d  oken, chat_id, m
-00012840: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00012850: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00012860: 6c20 3d20 7227 636c 6f73 6546 6f72 756d  l = r'closeForum
-00012870: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
-00012880: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00012890: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
-000128a0: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
-000128b0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-000128c0: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-000128d0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-000128e0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-000128f0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a64  rams=payload)..d
-00012900: 6566 2072 656f 7065 6e5f 666f 7275 6d5f  ef reopen_forum_
-00012910: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
-00012920: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
-00012930: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
-00012940: 7468 6f64 5f75 726c 203d 2072 2772 656f  thod_url = r'reo
-00012950: 7065 6e46 6f72 756d 546f 7069 6327 0a20  penForumTopic'. 
-00012960: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-00012970: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-00012980: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
-00012990: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
-000129a0: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
-000129b0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
-000129c0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-000129d0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-000129e0: 6c6f 6164 290a 0a64 6566 2064 656c 6574  load)..def delet
-000129f0: 655f 666f 7275 6d5f 746f 7069 6328 746f  e_forum_topic(to
-00012a00: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
-00012a10: 7373 6167 655f 7468 7265 6164 5f69 6429  ssage_thread_id)
-00012a20: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00012a30: 203d 2072 2764 656c 6574 6546 6f72 756d   = r'deleteForum
-00012a40: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
-00012a50: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00012a60: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
-00012a70: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
-00012a80: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00012a90: 7d0a 2020 2020 7265 7475 726e 205f 6d61  }.    return _ma
-00012aa0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
-00012ab0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00012ac0: 7261 6d73 3d70 6179 6c6f 6164 290a 0a64  rams=payload)..d
-00012ad0: 6566 2075 6e70 696e 5f61 6c6c 5f66 6f72  ef unpin_all_for
-00012ae0: 756d 5f74 6f70 6963 5f6d 6573 7361 6765  um_topic_message
-00012af0: 7328 746f 6b65 6e2c 2063 6861 745f 6964  s(token, chat_id
-00012b00: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
-00012b10: 5f69 6429 3a0a 2020 2020 6d65 7468 6f64  _id):.    method
-00012b20: 5f75 726c 203d 2072 2775 6e70 696e 416c  _url = r'unpinAl
-00012b30: 6c46 6f72 756d 546f 7069 634d 6573 7361  lForumTopicMessa
-00012b40: 6765 7327 0a20 2020 2070 6179 6c6f 6164  ges'.    payload
-00012b50: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00012b60: 6861 745f 6964 2c20 276d 6573 7361 6765  hat_id, 'message
-00012b70: 5f74 6872 6561 645f 6964 273a 206d 6573  _thread_id': mes
-00012b80: 7361 6765 5f74 6872 6561 645f 6964 7d0a  sage_thread_id}.
-00012b90: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
-00012ba0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00012bb0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00012bc0: 6d73 3d70 6179 6c6f 6164 290a 0a64 6566  ms=payload)..def
-00012bd0: 2067 6574 5f66 6f72 756d 5f74 6f70 6963   get_forum_topic
-00012be0: 5f69 636f 6e5f 7374 6963 6b65 7273 2874  _icon_stickers(t
-00012bf0: 6f6b 656e 293a 0a20 2020 206d 6574 686f  oken):.    metho
-00012c00: 645f 7572 6c20 3d20 7227 6765 7446 6f72  d_url = r'getFor
-00012c10: 756d 546f 7069 6349 636f 6e53 7469 636b  umTopicIconStick
-00012c20: 6572 7327 0a20 2020 2072 6574 7572 6e20  ers'.    return 
-00012c30: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
-00012c40: 6b65 6e2c 206d 6574 686f 645f 7572 6c29  ken, method_url)
-00012c50: 0a0a 6465 6620 7374 6f70 5f70 6f6c 6c28  ..def stop_poll(
-00012c60: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00012c70: 6d65 7373 6167 655f 6964 2c20 7265 706c  message_id, repl
-00012c80: 795f 6d61 726b 7570 3d4e 6f6e 6529 3a0a  y_markup=None):.
-00012c90: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00012ca0: 2072 2773 746f 7050 6f6c 6c27 0a20 2020   r'stopPoll'.   
-00012cb0: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00012cc0: 745f 6964 273a 2073 7472 2863 6861 745f  t_id': str(chat_
-00012cd0: 6964 292c 2027 6d65 7373 6167 655f 6964  id), 'message_id
-00012ce0: 273a 206d 6573 7361 6765 5f69 647d 0a20  ': message_id}. 
-00012cf0: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
-00012d00: 7570 3a0a 2020 2020 2020 2020 7061 796c  up:.        payl
-00012d10: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
-00012d20: 7027 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p'] = _convert_m
-00012d30: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
-00012d40: 7570 290a 2020 2020 7265 7475 726e 205f  up).    return _
-00012d50: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
-00012d60: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00012d70: 7061 7261 6d73 3d70 6179 6c6f 6164 290a  params=payload).
-00012d80: 0a0a 6465 6620 5f63 6f6e 7665 7274 5f6c  ..def _convert_l
-00012d90: 6973 745f 6a73 6f6e 5f73 6572 6961 6c69  ist_json_seriali
-00012da0: 7a61 626c 6528 7265 7375 6c74 7329 3a0a  zable(results):.
-00012db0: 2020 2020 7265 7420 3d20 2727 0a20 2020      ret = ''.   
-00012dc0: 2066 6f72 2072 2069 6e20 7265 7375 6c74   for r in result
-00012dd0: 733a 0a20 2020 2020 2020 2069 6620 6973  s:.        if is
-00012de0: 696e 7374 616e 6365 2872 2c20 7479 7065  instance(r, type
-00012df0: 732e 4a73 6f6e 5365 7269 616c 697a 6162  s.JsonSerializab
-00012e00: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-00012e10: 2072 6574 203d 2072 6574 202b 2072 2e74   ret = ret + r.t
-00012e20: 6f5f 6a73 6f6e 2829 202b 2027 2c27 0a20  o_json() + ','. 
-00012e30: 2020 2069 6620 6c65 6e28 7265 7429 203e     if len(ret) >
-00012e40: 2030 3a0a 2020 2020 2020 2020 7265 7420   0:.        ret 
-00012e50: 3d20 7265 745b 3a2d 315d 0a20 2020 2072  = ret[:-1].    r
-00012e60: 6574 7572 6e20 275b 2720 2b20 7265 7420  eturn '[' + ret 
-00012e70: 2b20 275d 270a 0a0a 6465 6620 5f63 6f6e  + ']'...def _con
-00012e80: 7665 7274 5f6d 6172 6b75 7028 6d61 726b  vert_markup(mark
-00012e90: 7570 293a 0a20 2020 2069 6620 6973 696e  up):.    if isin
-00012ea0: 7374 616e 6365 286d 6172 6b75 702c 2074  stance(markup, t
-00012eb0: 7970 6573 2e4a 736f 6e53 6572 6961 6c69  ypes.JsonSeriali
-00012ec0: 7a61 626c 6529 3a0a 2020 2020 2020 2020  zable):.        
-00012ed0: 7265 7475 726e 206d 6172 6b75 702e 746f  return markup.to
-00012ee0: 5f6a 736f 6e28 290a 2020 2020 7265 7475  _json().    retu
-00012ef0: 726e 206d 6172 6b75 700a 0a0a 6465 6620  rn markup...def 
-00012f00: 5f63 6f6e 7665 7274 5f65 6e74 6974 6573  _convert_entites
-00012f10: 2865 6e74 6974 6573 293a 0a20 2020 2069  (entites):.    i
-00012f20: 6620 656e 7469 7465 7320 6973 204e 6f6e  f entites is Non
-00012f30: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
-00012f40: 6e20 4e6f 6e65 0a20 2020 2065 6c69 6620  n None.    elif 
-00012f50: 6c65 6e28 656e 7469 7465 7329 203d 3d20  len(entites) == 
-00012f60: 303a 0a20 2020 2020 2020 2072 6574 7572  0:.        retur
-00012f70: 6e20 5b5d 0a20 2020 2065 6c69 6620 6973  n [].    elif is
-00012f80: 696e 7374 616e 6365 2865 6e74 6974 6573  instance(entites
-00012f90: 5b30 5d2c 2074 7970 6573 2e4a 736f 6e53  [0], types.JsonS
-00012fa0: 6572 6961 6c69 7a61 626c 6529 3a0a 2020  erializable):.  
-00012fb0: 2020 2020 2020 7265 7475 726e 205b 656e        return [en
-00012fc0: 7469 7479 2e74 6f5f 6a73 6f6e 2829 2066  tity.to_json() f
-00012fd0: 6f72 2065 6e74 6974 7920 696e 2065 6e74  or entity in ent
-00012fe0: 6974 6573 5d0a 2020 2020 656c 7365 3a0a  ites].    else:.
-00012ff0: 2020 2020 2020 2020 7265 7475 726e 2065          return e
-00013000: 6e74 6974 6573 0a0a 0a64 6566 205f 636f  ntites...def _co
-00013010: 6e76 6572 745f 706f 6c6c 5f6f 7074 696f  nvert_poll_optio
-00013020: 6e73 2870 6f6c 6c5f 6f70 7469 6f6e 7329  ns(poll_options)
-00013030: 3a0a 2020 2020 6966 2070 6f6c 6c5f 6f70  :.    if poll_op
-00013040: 7469 6f6e 7320 6973 204e 6f6e 653a 0a20  tions is None:. 
-00013050: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00013060: 6e65 0a20 2020 2065 6c69 6620 6c65 6e28  ne.    elif len(
-00013070: 706f 6c6c 5f6f 7074 696f 6e73 2920 3d3d  poll_options) ==
-00013080: 2030 3a0a 2020 2020 2020 2020 7265 7475   0:.        retu
-00013090: 726e 205b 5d0a 2020 2020 656c 6966 2069  rn [].    elif i
-000130a0: 7369 6e73 7461 6e63 6528 706f 6c6c 5f6f  sinstance(poll_o
-000130b0: 7074 696f 6e73 5b30 5d2c 2073 7472 293a  ptions[0], str):
-000130c0: 0a20 2020 2020 2020 2023 2043 6f6d 7061  .        # Compa
-000130d0: 7469 6269 6c69 7479 206d 6f64 6520 7769  tibility mode wi
-000130e0: 7468 2070 7265 7669 6f75 7320 6275 6720  th previous bug 
-000130f0: 7768 656e 206f 6e6c 7920 6c69 7374 206f  when only list o
-00013100: 6620 7374 7269 6e67 2077 6173 2061 6363  f string was acc
-00013110: 6570 7465 6420 6173 2070 6f6c 6c5f 6f70  epted as poll_op
-00013120: 7469 6f6e 730a 2020 2020 2020 2020 7265  tions.        re
-00013130: 7475 726e 2070 6f6c 6c5f 6f70 7469 6f6e  turn poll_option
-00013140: 730a 2020 2020 656c 6966 2069 7369 6e73  s.    elif isins
-00013150: 7461 6e63 6528 706f 6c6c 5f6f 7074 696f  tance(poll_optio
-00013160: 6e73 5b30 5d2c 2074 7970 6573 2e50 6f6c  ns[0], types.Pol
-00013170: 6c4f 7074 696f 6e29 3a0a 2020 2020 2020  lOption):.      
-00013180: 2020 7265 7475 726e 205b 6f70 7469 6f6e    return [option
-00013190: 2e74 6578 7420 666f 7220 6f70 7469 6f6e  .text for option
-000131a0: 2069 6e20 706f 6c6c 5f6f 7074 696f 6e73   in poll_options
-000131b0: 5d0a 2020 2020 656c 7365 3a0a 2020 2020  ].    else:.    
-000131c0: 2020 2020 7265 7475 726e 2070 6f6c 6c5f      return poll_
-000131d0: 6f70 7469 6f6e 730a 0a0a 6465 6620 636f  options...def co
-000131e0: 6e76 6572 745f 696e 7075 745f 6d65 6469  nvert_input_medi
-000131f0: 6128 6d65 6469 6129 3a0a 2020 2020 6966  a(media):.    if
-00013200: 2069 7369 6e73 7461 6e63 6528 6d65 6469   isinstance(medi
-00013210: 612c 2074 7970 6573 2e49 6e70 7574 4d65  a, types.InputMe
-00013220: 6469 6129 3a0a 2020 2020 2020 2020 7265  dia):.        re
-00013230: 7475 726e 206d 6564 6961 2e63 6f6e 7665  turn media.conve
-00013240: 7274 5f69 6e70 7574 5f6d 6564 6961 2829  rt_input_media()
-00013250: 0a20 2020 2072 6574 7572 6e20 4e6f 6e65  .    return None
-00013260: 2c20 4e6f 6e65 0a0a 0a64 6566 2063 6f6e  , None...def con
-00013270: 7665 7274 5f69 6e70 7574 5f6d 6564 6961  vert_input_media
-00013280: 5f61 7272 6179 2861 7272 6179 293a 0a20  _array(array):. 
-00013290: 2020 206d 6564 6961 203d 205b 5d0a 2020     media = [].  
-000132a0: 2020 6669 6c65 7320 3d20 7b7d 0a20 2020    files = {}.   
-000132b0: 2066 6f72 2069 6e70 7574 5f6d 6564 6961   for input_media
-000132c0: 2069 6e20 6172 7261 793a 0a20 2020 2020   in array:.     
-000132d0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000132e0: 2869 6e70 7574 5f6d 6564 6961 2c20 7479  (input_media, ty
-000132f0: 7065 732e 496e 7075 744d 6564 6961 293a  pes.InputMedia):
-00013300: 0a20 2020 2020 2020 2020 2020 206d 6564  .            med
-00013310: 6961 5f64 6963 7420 3d20 696e 7075 745f  ia_dict = input_
-00013320: 6d65 6469 612e 746f 5f64 6963 7428 290a  media.to_dict().
-00013330: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00013340: 6564 6961 5f64 6963 745b 276d 6564 6961  edia_dict['media
-00013350: 275d 2e73 7461 7274 7377 6974 6828 2761  '].startswith('a
-00013360: 7474 6163 683a 2f2f 2729 3a0a 2020 2020  ttach://'):.    
-00013370: 2020 2020 2020 2020 2020 2020 6b65 7920              key 
-00013380: 3d20 6d65 6469 615f 6469 6374 5b27 6d65  = media_dict['me
-00013390: 6469 6127 5d2e 7265 706c 6163 6528 2761  dia'].replace('a
-000133a0: 7474 6163 683a 2f2f 272c 2027 2729 0a20  ttach://', ''). 
-000133b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000133c0: 696c 6573 5b6b 6579 5d20 3d20 696e 7075  iles[key] = inpu
-000133d0: 745f 6d65 6469 612e 6d65 6469 610a 2020  t_media.media.  
-000133e0: 2020 2020 2020 2020 2020 6d65 6469 612e            media.
-000133f0: 6170 7065 6e64 286d 6564 6961 5f64 6963  append(media_dic
-00013400: 7429 0a20 2020 2072 6574 7572 6e20 6a73  t).    return js
-00013410: 6f6e 2e64 756d 7073 286d 6564 6961 292c  on.dumps(media),
-00013420: 2066 696c 6573 0a0a 0a64 6566 205f 6e6f   files...def _no
-00013430: 5f65 6e63 6f64 6528 6675 6e63 293a 0a20  _encode(func):. 
-00013440: 2020 2064 6566 2077 7261 7070 6572 286b     def wrapper(k
-00013450: 6579 2c20 7661 6c29 3a0a 2020 2020 2020  ey, val):.      
-00013460: 2020 6966 206b 6579 203d 3d20 2766 696c    if key == 'fil
-00013470: 656e 616d 6527 3a0a 2020 2020 2020 2020  ename':.        
-00013480: 2020 2020 7265 7475 726e 2075 277b 307d      return u'{0}
-00013490: 3d7b 317d 272e 666f 726d 6174 286b 6579  ={1}'.format(key
-000134a0: 2c20 7661 6c29 0a20 2020 2020 2020 2065  , val).        e
-000134b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000134c0: 2072 6574 7572 6e20 6675 6e63 286b 6579   return func(key
-000134d0: 2c20 7661 6c29 0a0a 2020 2020 7265 7475  , val)..    retu
-000134e0: 726e 2077 7261 7070 6572 0a0a 0a63 6c61  rn wrapper...cla
-000134f0: 7373 2041 7069 4578 6365 7074 696f 6e28  ss ApiException(
-00013500: 4578 6365 7074 696f 6e29 3a0a 2020 2020  Exception):.    
-00013510: 2222 220a 2020 2020 5468 6973 2063 6c61  """.    This cla
-00013520: 7373 2072 6570 7265 7365 6e74 7320 6120  ss represents a 
-00013530: 6261 7365 2045 7863 6570 7469 6f6e 2074  base Exception t
-00013540: 6872 6f77 6e20 7768 656e 2061 2063 616c  hrown when a cal
-00013550: 6c20 746f 2074 6865 2054 656c 6567 7261  l to the Telegra
-00013560: 6d20 4150 4920 6661 696c 732e 0a20 2020  m API fails..   
-00013570: 2049 6e20 6164 6469 7469 6f6e 2074 6f20   In addition to 
-00013580: 616e 2069 6e66 6f72 6d61 7469 7665 206d  an informative m
-00013590: 6573 7361 6765 2c20 6974 2068 6173 2061  essage, it has a
-000135a0: 2060 6675 6e63 7469 6f6e 5f6e 616d 6560   `function_name`
-000135b0: 2061 6e64 2061 2060 7265 7375 6c74 6020   and a `result` 
-000135c0: 6174 7472 6962 7574 652c 2077 6869 6368  attribute, which
-000135d0: 2072 6573 7065 6374 6976 656c 790a 2020   respectively.  
-000135e0: 2020 636f 6e74 6169 6e20 7468 6520 6e61    contain the na
-000135f0: 6d65 206f 6620 7468 6520 6661 696c 6564  me of the failed
-00013600: 2066 756e 6374 696f 6e20 616e 6420 7468   function and th
-00013610: 6520 7265 7475 726e 6564 2072 6573 756c  e returned resul
-00013620: 7420 7468 6174 206d 6164 6520 7468 6520  t that made the 
-00013630: 6675 6e63 7469 6f6e 2074 6f20 6265 2063  function to be c
-00013640: 6f6e 7369 6465 7265 6420 2061 730a 2020  onsidered  as.  
-00013650: 2020 6661 696c 6564 2e0a 2020 2020 2222    failed..    ""
-00013660: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-00013670: 745f 5f28 7365 6c66 2c20 6d73 672c 2066  t__(self, msg, f
-00013680: 756e 6374 696f 6e5f 6e61 6d65 2c20 7265  unction_name, re
-00013690: 7375 6c74 293a 0a20 2020 2020 2020 2073  sult):.        s
-000136a0: 7570 6572 2841 7069 4578 6365 7074 696f  uper(ApiExceptio
-000136b0: 6e2c 2073 656c 6629 2e5f 5f69 6e69 745f  n, self).__init_
-000136c0: 5f28 2241 2072 6571 7565 7374 2074 6f20  _("A request to 
-000136d0: 7468 6520 5465 6c65 6772 616d 2041 5049  the Telegram API
-000136e0: 2077 6173 2075 6e73 7563 6365 7373 6675   was unsuccessfu
-000136f0: 6c2e 207b 307d 222e 666f 726d 6174 286d  l. {0}".format(m
-00013700: 7367 2929 0a20 2020 2020 2020 2073 656c  sg)).        sel
-00013710: 662e 6675 6e63 7469 6f6e 5f6e 616d 6520  f.function_name 
-00013720: 3d20 6675 6e63 7469 6f6e 5f6e 616d 650a  = function_name.
-00013730: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
-00013740: 756c 7420 3d20 7265 7375 6c74 0a0a 0a63  ult = result...c
-00013750: 6c61 7373 2041 7069 4854 5450 4578 6365  lass ApiHTTPExce
-00013760: 7074 696f 6e28 4170 6945 7863 6570 7469  ption(ApiExcepti
-00013770: 6f6e 293a 0a20 2020 2022 2222 0a20 2020  on):.    """.   
-00013780: 2054 6869 7320 636c 6173 7320 7265 7072   This class repr
-00013790: 6573 656e 7473 2061 6e20 4578 6365 7074  esents an Except
-000137a0: 696f 6e20 7468 726f 776e 2077 6865 6e20  ion thrown when 
-000137b0: 6120 6361 6c6c 2074 6f20 7468 6520 0a20  a call to the . 
-000137c0: 2020 2054 656c 6567 7261 6d20 4150 4920     Telegram API 
-000137d0: 7365 7276 6572 2072 6574 7572 6e73 2048  server returns H
-000137e0: 5454 5020 636f 6465 2074 6861 7420 6973  TTP code that is
-000137f0: 206e 6f74 2032 3030 2e0a 2020 2020 2222   not 200..    ""
-00013800: 220a 2020 2020 6465 6620 5f5f 696e 6974  ".    def __init
-00013810: 5f5f 2873 656c 662c 2066 756e 6374 696f  __(self, functio
-00013820: 6e5f 6e61 6d65 2c20 7265 7375 6c74 293a  n_name, result):
-00013830: 0a20 2020 2020 2020 2073 7570 6572 2841  .        super(A
-00013840: 7069 4854 5450 4578 6365 7074 696f 6e2c  piHTTPException,
-00013850: 2073 656c 6629 2e5f 5f69 6e69 745f 5f28   self).__init__(
-00013860: 0a20 2020 2020 2020 2020 2020 2022 5468  .            "Th
-00013870: 6520 7365 7276 6572 2072 6574 7572 6e65  e server returne
-00013880: 6420 4854 5450 207b 307d 207b 317d 2e20  d HTTP {0} {1}. 
-00013890: 5265 7370 6f6e 7365 2062 6f64 793a 5c6e  Response body:\n
-000138a0: 5b7b 327d 5d22 205c 0a20 2020 2020 2020  [{2}]" \.       
-000138b0: 2020 2020 202e 666f 726d 6174 2872 6573       .format(res
-000138c0: 756c 742e 7374 6174 7573 5f63 6f64 652c  ult.status_code,
-000138d0: 2072 6573 756c 742e 7265 6173 6f6e 2c20   result.reason, 
-000138e0: 7265 7375 6c74 2e74 6578 742e 656e 636f  result.text.enco
-000138f0: 6465 2827 7574 6638 2729 292c 0a20 2020  de('utf8')),.   
-00013900: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-00013910: 6e5f 6e61 6d65 2c0a 2020 2020 2020 2020  n_name,.        
-00013920: 2020 2020 7265 7375 6c74 290a 0a0a 636c      result)...cl
-00013930: 6173 7320 4170 6949 6e76 616c 6964 4a53  ass ApiInvalidJS
-00013940: 4f4e 4578 6365 7074 696f 6e28 4170 6945  ONException(ApiE
-00013950: 7863 6570 7469 6f6e 293a 0a20 2020 2022  xception):.    "
-00013960: 2222 0a20 2020 2054 6869 7320 636c 6173  "".    This clas
-00013970: 7320 7265 7072 6573 656e 7473 2061 6e20  s represents an 
-00013980: 4578 6365 7074 696f 6e20 7468 726f 776e  Exception thrown
-00013990: 2077 6865 6e20 6120 6361 6c6c 2074 6f20   when a call to 
-000139a0: 7468 6520 0a20 2020 2054 656c 6567 7261  the .    Telegra
-000139b0: 6d20 4150 4920 7365 7276 6572 2072 6574  m API server ret
-000139c0: 7572 6e73 2069 6e76 616c 6964 206a 736f  urns invalid jso
-000139d0: 6e2e 0a20 2020 2022 2222 0a20 2020 2064  n..    """.    d
-000139e0: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-000139f0: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
-00013a00: 2072 6573 756c 7429 3a0a 2020 2020 2020   result):.      
-00013a10: 2020 7375 7065 7228 4170 6949 6e76 616c    super(ApiInval
-00013a20: 6964 4a53 4f4e 4578 6365 7074 696f 6e2c  idJSONException,
-00013a30: 2073 656c 6629 2e5f 5f69 6e69 745f 5f28   self).__init__(
-00013a40: 0a20 2020 2020 2020 2020 2020 2022 5468  .            "Th
-00013a50: 6520 7365 7276 6572 2072 6574 7572 6e65  e server returne
-00013a60: 6420 616e 2069 6e76 616c 6964 204a 534f  d an invalid JSO
-00013a70: 4e20 7265 7370 6f6e 7365 2e20 5265 7370  N response. Resp
-00013a80: 6f6e 7365 2062 6f64 793a 5c6e 5b7b 307d  onse body:\n[{0}
-00013a90: 5d22 205c 0a20 2020 2020 2020 2020 2020  ]" \.           
-00013aa0: 202e 666f 726d 6174 2872 6573 756c 742e   .format(result.
-00013ab0: 7465 7874 2e65 6e63 6f64 6528 2775 7466  text.encode('utf
-00013ac0: 3827 2929 2c0a 2020 2020 2020 2020 2020  8')),.          
-00013ad0: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
-00013ae0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00013af0: 756c 7429 0a0a 0a63 6c61 7373 2041 7069  ult)...class Api
-00013b00: 5465 6c65 6772 616d 4578 6365 7074 696f  TelegramExceptio
-00013b10: 6e28 4170 6945 7863 6570 7469 6f6e 293a  n(ApiException):
-00013b20: 0a20 2020 2022 2222 0a20 2020 2054 6869  .    """.    Thi
-00013b30: 7320 636c 6173 7320 7265 7072 6573 656e  s class represen
-00013b40: 7473 2061 6e20 4578 6365 7074 696f 6e20  ts an Exception 
-00013b50: 7468 726f 776e 2077 6865 6e20 6120 5465  thrown when a Te
-00013b60: 6c65 6772 616d 2041 5049 2072 6574 7572  legram API retur
-00013b70: 6e73 2065 7272 6f72 2063 6f64 652e 0a20  ns error code.. 
-00013b80: 2020 2022 2222 0a20 2020 2064 6566 205f     """.    def _
-00013b90: 5f69 6e69 745f 5f28 7365 6c66 2c20 6675  _init__(self, fu
-00013ba0: 6e63 7469 6f6e 5f6e 616d 652c 2072 6573  nction_name, res
-00013bb0: 756c 742c 2072 6573 756c 745f 6a73 6f6e  ult, result_json
-00013bc0: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
-00013bd0: 2841 7069 5465 6c65 6772 616d 4578 6365  (ApiTelegramExce
-00013be0: 7074 696f 6e2c 2073 656c 6629 2e5f 5f69  ption, self).__i
-00013bf0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-00013c00: 2020 2022 4572 726f 7220 636f 6465 3a20     "Error code: 
-00013c10: 7b30 7d2e 2044 6573 6372 6970 7469 6f6e  {0}. Description
-00013c20: 3a20 7b31 7d22 205c 0a20 2020 2020 2020  : {1}" \.       
-00013c30: 2020 2020 202e 666f 726d 6174 2872 6573       .format(res
-00013c40: 756c 745f 6a73 6f6e 5b27 6572 726f 725f  ult_json['error_
-00013c50: 636f 6465 275d 2c20 7265 7375 6c74 5f6a  code'], result_j
-00013c60: 736f 6e5b 2764 6573 6372 6970 7469 6f6e  son['description
-00013c70: 275d 292c 0a20 2020 2020 2020 2020 2020  ']),.           
-00013c80: 2066 756e 6374 696f 6e5f 6e61 6d65 2c0a   function_name,.
-00013c90: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00013ca0: 6c74 290a 2020 2020 2020 2020 7365 6c66  lt).        self
-00013cb0: 2e72 6573 756c 745f 6a73 6f6e 203d 2072  .result_json = r
-00013cc0: 6573 756c 745f 6a73 6f6e 0a20 2020 2020  esult_json.     
-00013cd0: 2020 2073 656c 662e 6572 726f 725f 636f     self.error_co
-00013ce0: 6465 203d 2072 6573 756c 745f 6a73 6f6e  de = result_json
-00013cf0: 5b27 6572 726f 725f 636f 6465 275d 0a20  ['error_code']. 
-00013d00: 2020 2020 2020 2073 656c 662e 6465 7363         self.desc
-00013d10: 7269 7074 696f 6e20 3d20 7265 7375 6c74  ription = result
-00013d20: 5f6a 736f 6e5b 2764 6573 6372 6970 7469  _json['descripti
-00013d30: 6f6e 275d 0a                             on'].
+00008dc0: 2772 6570 6c79 5f74 6f5f 6d65 7373 6167  'reply_to_messag
+00008dd0: 655f 6964 275d 203d 2072 6570 6c79 5f74  e_id'] = reply_t
+00008de0: 6f5f 6d65 7373 6167 655f 6964 0d0a 2020  o_message_id..  
+00008df0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00008e00: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+00008e10: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+00008e20: 7027 5d20 3d20 6177 6169 7420 5f63 6f6e  p'] = await _con
+00008e30: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+00008e40: 795f 6d61 726b 7570 290d 0a20 2020 2069  y_markup)..    i
+00008e50: 6620 7061 7273 655f 6d6f 6465 2061 6e64  f parse_mode and
+00008e60: 2064 6174 615f 7479 7065 203d 3d20 2764   data_type == 'd
+00008e70: 6f63 756d 656e 7427 3a0d 0a20 2020 2020  ocument':..     
+00008e80: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
+00008e90: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
+00008ea0: 5f6d 6f64 650d 0a20 2020 2069 6620 6469  _mode..    if di
+00008eb0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00008ec0: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  on is not None:.
+00008ed0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008ee0: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
+00008ef0: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
+00008f00: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0d  le_notification.
+00008f10: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00008f20: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00008f30: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
+00008f40: 696d 656f 7574 0d0a 2020 2020 6966 2063  imeout..    if c
+00008f50: 6170 7469 6f6e 3a0d 0a20 2020 2020 2020  aption:..       
+00008f60: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
+00008f70: 6e27 5d20 3d20 6361 7074 696f 6e0d 0a20  n'] = caption.. 
+00008f80: 2020 2069 6620 7468 756d 623a 0d0a 2020     if thumb:..  
+00008f90: 2020 2020 2020 6966 206e 6f74 2075 7469        if not uti
+00008fa0: 6c2e 6973 5f73 7472 696e 6728 7468 756d  l.is_string(thum
+00008fb0: 6229 3a0d 0a20 2020 2020 2020 2020 2020  b):..           
+00008fc0: 2069 6620 6669 6c65 733a 0d0a 2020 2020   if files:..    
+00008fd0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00008fe0: 735b 2774 6875 6d62 275d 203d 2074 6875  s['thumb'] = thu
+00008ff0: 6d62 0d0a 2020 2020 2020 2020 2020 2020  mb..            
+00009000: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00009010: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
+00009020: 2774 6875 6d62 273a 2074 6875 6d62 7d0d  'thumb': thumb}.
+00009030: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00009040: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+00009050: 6f61 645b 2774 6875 6d62 275d 203d 2074  oad['thumb'] = t
+00009060: 6875 6d62 0d0a 2020 2020 6966 2063 6170  humb..    if cap
+00009070: 7469 6f6e 5f65 6e74 6974 6965 733a 0d0a  tion_entities:..
+00009080: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009090: 2763 6170 7469 6f6e 5f65 6e74 6974 6965  'caption_entitie
+000090a0: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
+000090b0: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
+000090c0: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
+000090d0: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
+000090e0: 7469 7469 6573 2929 0d0a 2020 2020 6966  tities))..    if
+000090f0: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00009100: 6974 686f 7574 5f72 6570 6c79 2069 7320  ithout_reply is 
+00009110: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00009120: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
+00009130: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00009140: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
+00009150: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00009160: 745f 7265 706c 790d 0a20 2020 2069 6620  t_reply..    if 
+00009170: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+00009180: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00009190: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+000091a0: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+000091b0: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+000091c0: 6e74 0d0a 2020 2020 6966 206d 6574 686f  nt..    if metho
+000091d0: 645f 7572 6c20 3d3d 2027 7365 6e64 446f  d_url == 'sendDo
+000091e0: 6375 6d65 6e74 2720 616e 6420 6469 7361  cument' and disa
+000091f0: 626c 655f 636f 6e74 656e 745f 7479 7065  ble_content_type
+00009200: 5f64 6574 6563 7469 6f6e 2069 7320 6e6f  _detection is no
+00009210: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00009220: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+00009230: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
+00009240: 6574 6563 7469 6f6e 275d 203d 2064 6973  etection'] = dis
+00009250: 6162 6c65 5f63 6f6e 7465 6e74 5f74 7970  able_content_typ
+00009260: 655f 6465 7465 6374 696f 6e0d 0a20 2020  e_detection..   
+00009270: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+00009280: 6164 5f69 643a 0d0a 2020 2020 2020 2020  ad_id:..        
+00009290: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+000092a0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
+000092b0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000092c0: 0d0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
+000092d0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+000092e0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+000092f0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00009300: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00009310: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+00009320: 2729 0d0a 0d0a 0d0a 6173 796e 6320 6465  ')......async de
+00009330: 6620 6765 745f 6d65 7468 6f64 5f62 795f  f get_method_by_
+00009340: 7479 7065 2864 6174 615f 7479 7065 293a  type(data_type):
+00009350: 0d0a 2020 2020 6966 2064 6174 615f 7479  ..    if data_ty
+00009360: 7065 203d 3d20 2764 6f63 756d 656e 7427  pe == 'document'
+00009370: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00009380: 6e20 7227 7365 6e64 446f 6375 6d65 6e74  n r'sendDocument
+00009390: 270d 0a20 2020 2069 6620 6461 7461 5f74  '..    if data_t
+000093a0: 7970 6520 3d3d 2027 7374 6963 6b65 7227  ype == 'sticker'
+000093b0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+000093c0: 6e20 7227 7365 6e64 5374 6963 6b65 7227  n r'sendSticker'
+000093d0: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+000093e0: 6261 6e5f 6368 6174 5f6d 656d 6265 7228  ban_chat_member(
+000093f0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00009400: 7573 6572 5f69 642c 2075 6e74 696c 5f64  user_id, until_d
+00009410: 6174 653d 4e6f 6e65 2c20 7265 766f 6b65  ate=None, revoke
+00009420: 5f6d 6573 7361 6765 733d 4e6f 6e65 293a  _messages=None):
+00009430: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00009440: 203d 2027 6261 6e43 6861 744d 656d 6265   = 'banChatMembe
+00009450: 7227 0d0a 2020 2020 7061 796c 6f61 6420  r'..    payload 
+00009460: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00009470: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
+00009480: 3a20 7573 6572 5f69 647d 0d0a 2020 2020  : user_id}..    
+00009490: 6966 2069 7369 6e73 7461 6e63 6528 756e  if isinstance(un
+000094a0: 7469 6c5f 6461 7465 2c20 6461 7465 7469  til_date, dateti
+000094b0: 6d65 293a 0d0a 2020 2020 2020 2020 7061  me):..        pa
+000094c0: 796c 6f61 645b 2775 6e74 696c 5f64 6174  yload['until_dat
+000094d0: 6527 5d20 3d20 756e 7469 6c5f 6461 7465  e'] = until_date
+000094e0: 2e74 696d 6573 7461 6d70 2829 0d0a 2020  .timestamp()..  
+000094f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00009500: 2070 6179 6c6f 6164 5b27 756e 7469 6c5f   payload['until_
+00009510: 6461 7465 275d 203d 2075 6e74 696c 5f64  date'] = until_d
+00009520: 6174 650d 0a20 2020 2069 6620 7265 766f  ate..    if revo
+00009530: 6b65 5f6d 6573 7361 6765 7320 6973 206e  ke_messages is n
+00009540: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009550: 2020 7061 796c 6f61 645b 2772 6576 6f6b    payload['revok
+00009560: 655f 6d65 7373 6167 6573 275d 203d 2072  e_messages'] = r
+00009570: 6576 6f6b 655f 6d65 7373 6167 6573 0d0a  evoke_messages..
+00009580: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00009590: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+000095a0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000095b0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+000095c0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+000095d0: 7427 290d 0a0d 0a0d 0a61 7379 6e63 2064  t')......async d
+000095e0: 6566 2075 6e62 616e 5f63 6861 745f 6d65  ef unban_chat_me
+000095f0: 6d62 6572 2874 6f6b 656e 2c20 6368 6174  mber(token, chat
+00009600: 5f69 642c 2075 7365 725f 6964 2c20 6f6e  _id, user_id, on
+00009610: 6c79 5f69 665f 6261 6e6e 6564 293a 0d0a  ly_if_banned):..
+00009620: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00009630: 2027 756e 6261 6e43 6861 744d 656d 6265   'unbanChatMembe
+00009640: 7227 0d0a 2020 2020 7061 796c 6f61 6420  r'..    payload 
+00009650: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00009660: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
+00009670: 3a20 7573 6572 5f69 647d 0d0a 2020 2020  : user_id}..    
+00009680: 6966 206f 6e6c 795f 6966 5f62 616e 6e65  if only_if_banne
+00009690: 6420 6973 206e 6f74 204e 6f6e 653a 2020  d is not None:  
+000096a0: 2320 4e6f 6e65 202f 2054 7275 6520 2f20  # None / True / 
+000096b0: 4661 6c73 650d 0a20 2020 2020 2020 2070  False..        p
+000096c0: 6179 6c6f 6164 5b27 6f6e 6c79 5f69 665f  ayload['only_if_
+000096d0: 6261 6e6e 6564 275d 203d 206f 6e6c 795f  banned'] = only_
+000096e0: 6966 5f62 616e 6e65 640d 0a20 2020 2072  if_banned..    r
+000096f0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00009700: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00009710: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00009720: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+00009730: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+00009740: 0d0a 0d0a 6173 796e 6320 6465 6620 7265  ....async def re
+00009750: 7374 7269 6374 5f63 6861 745f 6d65 6d62  strict_chat_memb
+00009760: 6572 280d 0a20 2020 2020 2020 2074 6f6b  er(..        tok
+00009770: 656e 2c20 6368 6174 5f69 642c 2075 7365  en, chat_id, use
+00009780: 725f 6964 2c20 756e 7469 6c5f 6461 7465  r_id, until_date
+00009790: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+000097a0: 6361 6e5f 7365 6e64 5f6d 6573 7361 6765  can_send_message
+000097b0: 733d 4e6f 6e65 2c20 6361 6e5f 7365 6e64  s=None, can_send
+000097c0: 5f6d 6564 6961 5f6d 6573 7361 6765 733d  _media_messages=
+000097d0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2063  None,..        c
+000097e0: 616e 5f73 656e 645f 706f 6c6c 733d 4e6f  an_send_polls=No
+000097f0: 6e65 2c20 6361 6e5f 7365 6e64 5f6f 7468  ne, can_send_oth
+00009800: 6572 5f6d 6573 7361 6765 733d 4e6f 6e65  er_messages=None
+00009810: 2c0d 0a20 2020 2020 2020 2063 616e 5f61  ,..        can_a
+00009820: 6464 5f77 6562 5f70 6167 655f 7072 6576  dd_web_page_prev
+00009830: 6965 7773 3d4e 6f6e 652c 2063 616e 5f63  iews=None, can_c
+00009840: 6861 6e67 655f 696e 666f 3d4e 6f6e 652c  hange_info=None,
+00009850: 0d0a 2020 2020 2020 2020 6361 6e5f 696e  ..        can_in
+00009860: 7669 7465 5f75 7365 7273 3d4e 6f6e 652c  vite_users=None,
+00009870: 2063 616e 5f70 696e 5f6d 6573 7361 6765   can_pin_message
+00009880: 733d 4e6f 6e65 293a 0d0a 2020 2020 6d65  s=None):..    me
+00009890: 7468 6f64 5f75 726c 203d 2027 7265 7374  thod_url = 'rest
+000098a0: 7269 6374 4368 6174 4d65 6d62 6572 270d  rictChatMember'.
+000098b0: 0a20 2020 2070 6572 6d69 7373 696f 6e73  .    permissions
+000098c0: 203d 207b 7d0d 0a20 2020 2069 6620 6361   = {}..    if ca
+000098d0: 6e5f 7365 6e64 5f6d 6573 7361 6765 7320  n_send_messages 
+000098e0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000098f0: 2020 2020 2020 7065 726d 6973 7369 6f6e        permission
+00009900: 735b 2763 616e 5f73 656e 645f 6d65 7373  s['can_send_mess
+00009910: 6167 6573 275d 203d 2063 616e 5f73 656e  ages'] = can_sen
+00009920: 645f 6d65 7373 6167 6573 0d0a 2020 2020  d_messages..    
+00009930: 6966 2063 616e 5f73 656e 645f 6d65 6469  if can_send_medi
+00009940: 615f 6d65 7373 6167 6573 2069 7320 6e6f  a_messages is no
+00009950: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00009960: 2070 6572 6d69 7373 696f 6e73 5b27 6361   permissions['ca
+00009970: 6e5f 7365 6e64 5f6d 6564 6961 5f6d 6573  n_send_media_mes
+00009980: 7361 6765 7327 5d20 3d20 6361 6e5f 7365  sages'] = can_se
+00009990: 6e64 5f6d 6564 6961 5f6d 6573 7361 6765  nd_media_message
+000099a0: 730d 0a20 2020 2069 6620 6361 6e5f 7365  s..    if can_se
+000099b0: 6e64 5f70 6f6c 6c73 2069 7320 6e6f 7420  nd_polls is not 
+000099c0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+000099d0: 6572 6d69 7373 696f 6e73 5b27 6361 6e5f  ermissions['can_
+000099e0: 7365 6e64 5f70 6f6c 6c73 275d 203d 2063  send_polls'] = c
+000099f0: 616e 5f73 656e 645f 706f 6c6c 730d 0a20  an_send_polls.. 
+00009a00: 2020 2069 6620 6361 6e5f 7365 6e64 5f6f     if can_send_o
+00009a10: 7468 6572 5f6d 6573 7361 6765 7320 6973  ther_messages is
+00009a20: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00009a30: 2020 2020 7065 726d 6973 7369 6f6e 735b      permissions[
+00009a40: 2763 616e 5f73 656e 645f 6f74 6865 725f  'can_send_other_
+00009a50: 6d65 7373 6167 6573 275d 203d 2063 616e  messages'] = can
+00009a60: 5f73 656e 645f 6f74 6865 725f 6d65 7373  _send_other_mess
+00009a70: 6167 6573 0d0a 2020 2020 6966 2063 616e  ages..    if can
+00009a80: 5f61 6464 5f77 6562 5f70 6167 655f 7072  _add_web_page_pr
+00009a90: 6576 6965 7773 2069 7320 6e6f 7420 4e6f  eviews is not No
+00009aa0: 6e65 3a0d 0a20 2020 2020 2020 2070 6572  ne:..        per
+00009ab0: 6d69 7373 696f 6e73 5b27 6361 6e5f 6164  missions['can_ad
+00009ac0: 645f 7765 625f 7061 6765 5f70 7265 7669  d_web_page_previ
+00009ad0: 6577 7327 5d20 3d20 6361 6e5f 6164 645f  ews'] = can_add_
+00009ae0: 7765 625f 7061 6765 5f70 7265 7669 6577  web_page_preview
+00009af0: 730d 0a20 2020 2069 6620 6361 6e5f 6368  s..    if can_ch
+00009b00: 616e 6765 5f69 6e66 6f20 6973 206e 6f74  ange_info is not
+00009b10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00009b20: 7065 726d 6973 7369 6f6e 735b 2763 616e  permissions['can
+00009b30: 5f63 6861 6e67 655f 696e 666f 275d 203d  _change_info'] =
+00009b40: 2063 616e 5f63 6861 6e67 655f 696e 666f   can_change_info
+00009b50: 0d0a 2020 2020 6966 2063 616e 5f69 6e76  ..    if can_inv
+00009b60: 6974 655f 7573 6572 7320 6973 206e 6f74  ite_users is not
+00009b70: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00009b80: 7065 726d 6973 7369 6f6e 735b 2763 616e  permissions['can
+00009b90: 5f69 6e76 6974 655f 7573 6572 7327 5d20  _invite_users'] 
+00009ba0: 3d20 6361 6e5f 696e 7669 7465 5f75 7365  = can_invite_use
+00009bb0: 7273 0d0a 2020 2020 6966 2063 616e 5f70  rs..    if can_p
+00009bc0: 696e 5f6d 6573 7361 6765 7320 6973 206e  in_messages is n
+00009bd0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009be0: 2020 7065 726d 6973 7369 6f6e 735b 2763    permissions['c
+00009bf0: 616e 5f70 696e 5f6d 6573 7361 6765 7327  an_pin_messages'
+00009c00: 5d20 3d20 6361 6e5f 7069 6e5f 6d65 7373  ] = can_pin_mess
+00009c10: 6167 6573 0d0a 2020 2020 7065 726d 6973  ages..    permis
+00009c20: 7369 6f6e 735f 6a73 6f6e 203d 206a 736f  sions_json = jso
+00009c30: 6e2e 6475 6d70 7328 7065 726d 6973 7369  n.dumps(permissi
+00009c40: 6f6e 7329 0d0a 2020 2020 7061 796c 6f61  ons)..    payloa
+00009c50: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00009c60: 6368 6174 5f69 642c 2027 7573 6572 5f69  chat_id, 'user_i
+00009c70: 6427 3a20 7573 6572 5f69 642c 2027 7065  d': user_id, 'pe
+00009c80: 726d 6973 7369 6f6e 7327 3a20 7065 726d  rmissions': perm
+00009c90: 6973 7369 6f6e 735f 6a73 6f6e 7d0d 0a20  issions_json}.. 
+00009ca0: 2020 2069 6620 756e 7469 6c5f 6461 7465     if until_date
+00009cb0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00009cc0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00009cd0: 616e 6365 2875 6e74 696c 5f64 6174 652c  ance(until_date,
+00009ce0: 2064 6174 6574 696d 6529 3a0d 0a20 2020   datetime):..   
+00009cf0: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+00009d00: 5b27 756e 7469 6c5f 6461 7465 275d 203d  ['until_date'] =
+00009d10: 2075 6e74 696c 5f64 6174 652e 7469 6d65   until_date.time
+00009d20: 7374 616d 7028 290d 0a20 2020 2020 2020  stamp()..       
+00009d30: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00009d40: 2020 2020 7061 796c 6f61 645b 2775 6e74      payload['unt
+00009d50: 696c 5f64 6174 6527 5d20 3d20 756e 7469  il_date'] = unti
+00009d60: 6c5f 6461 7465 0d0a 2020 2020 7265 7475  l_date..    retu
+00009d70: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+00009d80: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+00009d90: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00009da0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+00009db0: 686f 643d 2770 6f73 7427 290d 0a0d 0a0d  hod='post').....
+00009dc0: 0a61 7379 6e63 2064 6566 2070 726f 6d6f  .async def promo
+00009dd0: 7465 5f63 6861 745f 6d65 6d62 6572 280d  te_chat_member(.
+00009de0: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
+00009df0: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
+00009e00: 2c20 6361 6e5f 6368 616e 6765 5f69 6e66  , can_change_inf
+00009e10: 6f3d 4e6f 6e65 2c20 6361 6e5f 706f 7374  o=None, can_post
+00009e20: 5f6d 6573 7361 6765 733d 4e6f 6e65 2c0d  _messages=None,.
+00009e30: 0a20 2020 2020 2020 2063 616e 5f65 6469  .        can_edi
+00009e40: 745f 6d65 7373 6167 6573 3d4e 6f6e 652c  t_messages=None,
+00009e50: 2063 616e 5f64 656c 6574 655f 6d65 7373   can_delete_mess
+00009e60: 6167 6573 3d4e 6f6e 652c 2063 616e 5f69  ages=None, can_i
+00009e70: 6e76 6974 655f 7573 6572 733d 4e6f 6e65  nvite_users=None
+00009e80: 2c0d 0a20 2020 2020 2020 2063 616e 5f72  ,..        can_r
+00009e90: 6573 7472 6963 745f 6d65 6d62 6572 733d  estrict_members=
+00009ea0: 4e6f 6e65 2c20 6361 6e5f 7069 6e5f 6d65  None, can_pin_me
+00009eb0: 7373 6167 6573 3d4e 6f6e 652c 2063 616e  ssages=None, can
+00009ec0: 5f70 726f 6d6f 7465 5f6d 656d 6265 7273  _promote_members
+00009ed0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00009ee0: 6973 5f61 6e6f 6e79 6d6f 7573 3d4e 6f6e  is_anonymous=Non
+00009ef0: 652c 2063 616e 5f6d 616e 6167 655f 6368  e, can_manage_ch
+00009f00: 6174 3d4e 6f6e 652c 2063 616e 5f6d 616e  at=None, can_man
+00009f10: 6167 655f 7669 6465 6f5f 6368 6174 733d  age_video_chats=
+00009f20: 4e6f 6e65 2c20 6361 6e5f 6d61 6e61 6765  None, can_manage
+00009f30: 5f74 6f70 6963 733d 4e6f 6e65 293a 0d0a  _topics=None):..
+00009f40: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00009f50: 2027 7072 6f6d 6f74 6543 6861 744d 656d   'promoteChatMem
+00009f60: 6265 7227 0d0a 2020 2020 7061 796c 6f61  ber'..    payloa
+00009f70: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00009f80: 6368 6174 5f69 642c 2027 7573 6572 5f69  chat_id, 'user_i
+00009f90: 6427 3a20 7573 6572 5f69 647d 0d0a 2020  d': user_id}..  
+00009fa0: 2020 6966 2063 616e 5f63 6861 6e67 655f    if can_change_
+00009fb0: 696e 666f 2069 7320 6e6f 7420 4e6f 6e65  info is not None
+00009fc0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00009fd0: 6164 5b27 6361 6e5f 6368 616e 6765 5f69  ad['can_change_i
+00009fe0: 6e66 6f27 5d20 3d20 6361 6e5f 6368 616e  nfo'] = can_chan
+00009ff0: 6765 5f69 6e66 6f0d 0a20 2020 2069 6620  ge_info..    if 
+0000a000: 6361 6e5f 706f 7374 5f6d 6573 7361 6765  can_post_message
+0000a010: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+0000a020: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000a030: 2763 616e 5f70 6f73 745f 6d65 7373 6167  'can_post_messag
+0000a040: 6573 275d 203d 2063 616e 5f70 6f73 745f  es'] = can_post_
+0000a050: 6d65 7373 6167 6573 0d0a 2020 2020 6966  messages..    if
+0000a060: 2063 616e 5f65 6469 745f 6d65 7373 6167   can_edit_messag
+0000a070: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0d  es is not None:.
+0000a080: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a090: 5b27 6361 6e5f 6564 6974 5f6d 6573 7361  ['can_edit_messa
+0000a0a0: 6765 7327 5d20 3d20 6361 6e5f 6564 6974  ges'] = can_edit
+0000a0b0: 5f6d 6573 7361 6765 730d 0a20 2020 2069  _messages..    i
+0000a0c0: 6620 6361 6e5f 6465 6c65 7465 5f6d 6573  f can_delete_mes
+0000a0d0: 7361 6765 7320 6973 206e 6f74 204e 6f6e  sages is not Non
+0000a0e0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000a0f0: 6f61 645b 2763 616e 5f64 656c 6574 655f  oad['can_delete_
+0000a100: 6d65 7373 6167 6573 275d 203d 2063 616e  messages'] = can
+0000a110: 5f64 656c 6574 655f 6d65 7373 6167 6573  _delete_messages
+0000a120: 0d0a 2020 2020 6966 2063 616e 5f69 6e76  ..    if can_inv
+0000a130: 6974 655f 7573 6572 7320 6973 206e 6f74  ite_users is not
+0000a140: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000a150: 7061 796c 6f61 645b 2763 616e 5f69 6e76  payload['can_inv
+0000a160: 6974 655f 7573 6572 7327 5d20 3d20 6361  ite_users'] = ca
+0000a170: 6e5f 696e 7669 7465 5f75 7365 7273 0d0a  n_invite_users..
+0000a180: 2020 2020 6966 2063 616e 5f72 6573 7472      if can_restr
+0000a190: 6963 745f 6d65 6d62 6572 7320 6973 206e  ict_members is n
+0000a1a0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0000a1b0: 2020 7061 796c 6f61 645b 2763 616e 5f72    payload['can_r
+0000a1c0: 6573 7472 6963 745f 6d65 6d62 6572 7327  estrict_members'
+0000a1d0: 5d20 3d20 6361 6e5f 7265 7374 7269 6374  ] = can_restrict
+0000a1e0: 5f6d 656d 6265 7273 0d0a 2020 2020 6966  _members..    if
+0000a1f0: 2063 616e 5f70 696e 5f6d 6573 7361 6765   can_pin_message
+0000a200: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+0000a210: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000a220: 2763 616e 5f70 696e 5f6d 6573 7361 6765  'can_pin_message
+0000a230: 7327 5d20 3d20 6361 6e5f 7069 6e5f 6d65  s'] = can_pin_me
+0000a240: 7373 6167 6573 0d0a 2020 2020 6966 2063  ssages..    if c
+0000a250: 616e 5f70 726f 6d6f 7465 5f6d 656d 6265  an_promote_membe
+0000a260: 7273 2069 7320 6e6f 7420 4e6f 6e65 3a0d  rs is not None:.
+0000a270: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a280: 5b27 6361 6e5f 7072 6f6d 6f74 655f 6d65  ['can_promote_me
+0000a290: 6d62 6572 7327 5d20 3d20 6361 6e5f 7072  mbers'] = can_pr
+0000a2a0: 6f6d 6f74 655f 6d65 6d62 6572 730d 0a20  omote_members.. 
+0000a2b0: 2020 2069 6620 6973 5f61 6e6f 6e79 6d6f     if is_anonymo
+0000a2c0: 7573 2069 7320 6e6f 7420 4e6f 6e65 3a0d  us is not None:.
+0000a2d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000a2e0: 5b27 6973 5f61 6e6f 6e79 6d6f 7573 275d  ['is_anonymous']
+0000a2f0: 203d 2069 735f 616e 6f6e 796d 6f75 730d   = is_anonymous.
+0000a300: 0a20 2020 2069 6620 6361 6e5f 6d61 6e61  .    if can_mana
+0000a310: 6765 5f63 6861 7420 6973 206e 6f74 204e  ge_chat is not N
+0000a320: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+0000a330: 796c 6f61 645b 2763 616e 5f6d 616e 6167  yload['can_manag
+0000a340: 655f 6368 6174 275d 203d 2063 616e 5f6d  e_chat'] = can_m
+0000a350: 616e 6167 655f 6368 6174 0d0a 2020 2020  anage_chat..    
+0000a360: 6966 2063 616e 5f6d 616e 6167 655f 7669  if can_manage_vi
+0000a370: 6465 6f5f 6368 6174 7320 6973 206e 6f74  deo_chats is not
+0000a380: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000a390: 7061 796c 6f61 645b 2763 616e 5f6d 616e  payload['can_man
+0000a3a0: 6167 655f 7669 6465 6f5f 6368 6174 7327  age_video_chats'
+0000a3b0: 5d20 3d20 6361 6e5f 6d61 6e61 6765 5f76  ] = can_manage_v
+0000a3c0: 6964 656f 5f63 6861 7473 0d0a 2020 2020  ideo_chats..    
+0000a3d0: 6966 2063 616e 5f6d 616e 6167 655f 746f  if can_manage_to
+0000a3e0: 7069 6373 2069 7320 6e6f 7420 4e6f 6e65  pics is not None
+0000a3f0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000a400: 6164 5b27 6361 6e5f 6d61 6e61 6765 5f74  ad['can_manage_t
+0000a410: 6f70 6963 7327 5d20 3d20 6361 6e5f 6d61  opics'] = can_ma
+0000a420: 6e61 6765 5f74 6f70 6963 730d 0a20 2020  nage_topics..   
+0000a430: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000a440: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000a450: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000a460: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000a470: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
+0000a480: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+0000a490: 7365 745f 6368 6174 5f61 646d 696e 6973  set_chat_adminis
+0000a4a0: 7472 6174 6f72 5f63 7573 746f 6d5f 7469  trator_custom_ti
+0000a4b0: 746c 6528 746f 6b65 6e2c 2063 6861 745f  tle(token, chat_
+0000a4c0: 6964 2c20 7573 6572 5f69 642c 2063 7573  id, user_id, cus
+0000a4d0: 746f 6d5f 7469 746c 6529 3a0d 0a20 2020  tom_title):..   
+0000a4e0: 206d 6574 686f 645f 7572 6c20 3d20 2773   method_url = 's
+0000a4f0: 6574 4368 6174 4164 6d69 6e69 7374 7261  etChatAdministra
+0000a500: 746f 7243 7573 746f 6d54 6974 6c65 270d  torCustomTitle'.
+0000a510: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000a520: 0d0a 2020 2020 2020 2020 2763 6861 745f  ..        'chat_
+0000a530: 6964 273a 2063 6861 745f 6964 2c20 2775  id': chat_id, 'u
+0000a540: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
+0000a550: 2c20 2763 7573 746f 6d5f 7469 746c 6527  , 'custom_title'
+0000a560: 3a20 6375 7374 6f6d 5f74 6974 6c65 0d0a  : custom_title..
+0000a570: 2020 2020 7d0d 0a20 2020 2072 6574 7572      }..    retur
+0000a580: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000a590: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000a5a0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000a5b0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000a5c0: 6f64 3d27 706f 7374 2729 0d0a 0d0a 0d0a  od='post')......
+0000a5d0: 6173 796e 6320 6465 6620 6261 6e5f 6368  async def ban_ch
+0000a5e0: 6174 5f73 656e 6465 725f 6368 6174 2874  at_sender_chat(t
+0000a5f0: 6f6b 656e 2c20 6368 6174 5f69 642c 2073  oken, chat_id, s
+0000a600: 656e 6465 725f 6368 6174 5f69 6429 3a0d  ender_chat_id):.
+0000a610: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+0000a620: 3d20 2762 616e 4368 6174 5365 6e64 6572  = 'banChatSender
+0000a630: 4368 6174 270d 0a20 2020 2070 6179 6c6f  Chat'..    paylo
+0000a640: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+0000a650: 2063 6861 745f 6964 2c20 2773 656e 6465   chat_id, 'sende
+0000a660: 725f 6368 6174 5f69 6427 3a20 7365 6e64  r_chat_id': send
+0000a670: 6572 5f63 6861 745f 6964 7d0d 0a20 2020  er_chat_id}..   
+0000a680: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000a690: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000a6a0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000a6b0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000a6c0: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
+0000a6d0: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+0000a6e0: 756e 6261 6e5f 6368 6174 5f73 656e 6465  unban_chat_sende
+0000a6f0: 725f 6368 6174 2874 6f6b 656e 2c20 6368  r_chat(token, ch
+0000a700: 6174 5f69 642c 2073 656e 6465 725f 6368  at_id, sender_ch
+0000a710: 6174 5f69 6429 3a0d 0a20 2020 206d 6574  at_id):..    met
+0000a720: 686f 645f 7572 6c20 3d20 2775 6e62 616e  hod_url = 'unban
+0000a730: 4368 6174 5365 6e64 6572 4368 6174 270d  ChatSenderChat'.
+0000a740: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000a750: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+0000a760: 6964 2c20 2773 656e 6465 725f 6368 6174  id, 'sender_chat
+0000a770: 5f69 6427 3a20 7365 6e64 6572 5f63 6861  _id': sender_cha
+0000a780: 745f 6964 7d0d 0a20 2020 2072 6574 7572  t_id}..    retur
+0000a790: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
+0000a7a0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000a7b0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000a7c0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000a7d0: 6f64 3d27 706f 7374 2729 0d0a 0d0a 6173  od='post')....as
+0000a7e0: 796e 6320 6465 6620 7365 745f 6368 6174  ync def set_chat
+0000a7f0: 5f70 6572 6d69 7373 696f 6e73 2874 6f6b  _permissions(tok
+0000a800: 656e 2c20 6368 6174 5f69 642c 2070 6572  en, chat_id, per
+0000a810: 6d69 7373 696f 6e73 293a 0d0a 2020 2020  missions):..    
+0000a820: 6d65 7468 6f64 5f75 726c 203d 2027 7365  method_url = 'se
+0000a830: 7443 6861 7450 6572 6d69 7373 696f 6e73  tChatPermissions
+0000a840: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000a850: 207b 0d0a 2020 2020 2020 2020 2763 6861   {..        'cha
+0000a860: 745f 6964 273a 2063 6861 745f 6964 2c0d  t_id': chat_id,.
+0000a870: 0a20 2020 2020 2020 2027 7065 726d 6973  .        'permis
+0000a880: 7369 6f6e 7327 3a20 7065 726d 6973 7369  sions': permissi
+0000a890: 6f6e 732e 746f 5f6a 736f 6e28 290d 0a20  ons.to_json().. 
+0000a8a0: 2020 207d 0d0a 2020 2020 7265 7475 726e     }..    return
+0000a8b0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000a8c0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000a8d0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000a8e0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000a8f0: 643d 2770 6f73 7427 290d 0a0d 0a0d 0a61  d='post')......a
+0000a900: 7379 6e63 2064 6566 2063 7265 6174 655f  sync def create_
+0000a910: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
+0000a920: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000a930: 206e 616d 652c 2065 7870 6972 655f 6461   name, expire_da
+0000a940: 7465 2c20 6d65 6d62 6572 5f6c 696d 6974  te, member_limit
+0000a950: 2c20 6372 6561 7465 735f 6a6f 696e 5f72  , creates_join_r
+0000a960: 6571 7565 7374 293a 0d0a 2020 2020 6d65  equest):..    me
+0000a970: 7468 6f64 5f75 726c 203d 2027 6372 6561  thod_url = 'crea
+0000a980: 7465 4368 6174 496e 7669 7465 4c69 6e6b  teChatInviteLink
+0000a990: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000a9a0: 207b 0d0a 2020 2020 2020 2020 2763 6861   {..        'cha
+0000a9b0: 745f 6964 273a 2063 6861 745f 6964 0d0a  t_id': chat_id..
+0000a9c0: 2020 2020 7d0d 0a0d 0a20 2020 2069 6620      }....    if 
+0000a9d0: 6578 7069 7265 5f64 6174 6520 6973 206e  expire_date is n
+0000a9e0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0000a9f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000aa00: 6578 7069 7265 5f64 6174 652c 2064 6174  expire_date, dat
+0000aa10: 6574 696d 6529 3a0d 0a20 2020 2020 2020  etime):..       
+0000aa20: 2020 2020 2070 6179 6c6f 6164 5b27 6578       payload['ex
+0000aa30: 7069 7265 5f64 6174 6527 5d20 3d20 6578  pire_date'] = ex
+0000aa40: 7069 7265 5f64 6174 652e 7469 6d65 7374  pire_date.timest
+0000aa50: 616d 7028 290d 0a20 2020 2020 2020 2065  amp()..        e
+0000aa60: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000aa70: 2020 7061 796c 6f61 645b 2765 7870 6972    payload['expir
+0000aa80: 655f 6461 7465 275d 203d 2065 7870 6972  e_date'] = expir
+0000aa90: 655f 6461 7465 0d0a 2020 2020 6966 206d  e_date..    if m
+0000aaa0: 656d 6265 725f 6c69 6d69 743a 0d0a 2020  ember_limit:..  
+0000aab0: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
+0000aac0: 656d 6265 725f 6c69 6d69 7427 5d20 3d20  ember_limit'] = 
+0000aad0: 6d65 6d62 6572 5f6c 696d 6974 0d0a 2020  member_limit..  
+0000aae0: 2020 6966 2063 7265 6174 6573 5f6a 6f69    if creates_joi
+0000aaf0: 6e5f 7265 7175 6573 7420 6973 206e 6f74  n_request is not
+0000ab00: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000ab10: 7061 796c 6f61 645b 2763 7265 6174 6573  payload['creates
+0000ab20: 5f6a 6f69 6e5f 7265 7175 6573 7427 5d20  _join_request'] 
+0000ab30: 3d20 6372 6561 7465 735f 6a6f 696e 5f72  = creates_join_r
+0000ab40: 6571 7565 7374 0d0a 2020 2020 6966 206e  equest..    if n
+0000ab50: 616d 653a 0d0a 2020 2020 2020 2020 7061  ame:..        pa
+0000ab60: 796c 6f61 645b 276e 616d 6527 5d20 3d20  yload['name'] = 
+0000ab70: 6e61 6d65 0d0a 0d0a 2020 2020 7265 7475  name....    retu
+0000ab80: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000ab90: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000aba0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000abb0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000abc0: 686f 643d 2770 6f73 7427 290d 0a0d 0a0d  hod='post').....
+0000abd0: 0a61 7379 6e63 2064 6566 2065 6469 745f  .async def edit_
+0000abe0: 6368 6174 5f69 6e76 6974 655f 6c69 6e6b  chat_invite_link
+0000abf0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000ac00: 2069 6e76 6974 655f 6c69 6e6b 2c20 6e61   invite_link, na
+0000ac10: 6d65 2c20 6578 7069 7265 5f64 6174 652c  me, expire_date,
+0000ac20: 206d 656d 6265 725f 6c69 6d69 742c 2063   member_limit, c
+0000ac30: 7265 6174 6573 5f6a 6f69 6e5f 7265 7175  reates_join_requ
+0000ac40: 6573 7429 3a0d 0a20 2020 206d 6574 686f  est):..    metho
+0000ac50: 645f 7572 6c20 3d20 2765 6469 7443 6861  d_url = 'editCha
+0000ac60: 7449 6e76 6974 654c 696e 6b27 0d0a 2020  tInviteLink'..  
+0000ac70: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
+0000ac80: 2020 2020 2020 2027 6368 6174 5f69 6427         'chat_id'
+0000ac90: 3a20 6368 6174 5f69 642c 0d0a 2020 2020  : chat_id,..    
+0000aca0: 2020 2020 2769 6e76 6974 655f 6c69 6e6b      'invite_link
+0000acb0: 273a 2069 6e76 6974 655f 6c69 6e6b 0d0a  ': invite_link..
+0000acc0: 2020 2020 7d0d 0a0d 0a20 2020 2069 6620      }....    if 
+0000acd0: 6578 7069 7265 5f64 6174 6520 6973 206e  expire_date is n
+0000ace0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0000acf0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000ad00: 6578 7069 7265 5f64 6174 652c 2064 6174  expire_date, dat
+0000ad10: 6574 696d 6529 3a0d 0a20 2020 2020 2020  etime):..       
+0000ad20: 2020 2020 2070 6179 6c6f 6164 5b27 6578       payload['ex
+0000ad30: 7069 7265 5f64 6174 6527 5d20 3d20 6578  pire_date'] = ex
+0000ad40: 7069 7265 5f64 6174 652e 7469 6d65 7374  pire_date.timest
+0000ad50: 616d 7028 290d 0a20 2020 2020 2020 2065  amp()..        e
+0000ad60: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000ad70: 2020 7061 796c 6f61 645b 2765 7870 6972    payload['expir
+0000ad80: 655f 6461 7465 275d 203d 2065 7870 6972  e_date'] = expir
+0000ad90: 655f 6461 7465 0d0a 0d0a 2020 2020 6966  e_date....    if
+0000ada0: 206d 656d 6265 725f 6c69 6d69 7420 6973   member_limit is
+0000adb0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0000adc0: 2020 2020 7061 796c 6f61 645b 276d 656d      payload['mem
+0000add0: 6265 725f 6c69 6d69 7427 5d20 3d20 6d65  ber_limit'] = me
+0000ade0: 6d62 6572 5f6c 696d 6974 0d0a 2020 2020  mber_limit..    
+0000adf0: 6966 206e 616d 653a 0d0a 2020 2020 2020  if name:..      
+0000ae00: 2020 7061 796c 6f61 645b 276e 616d 6527    payload['name'
+0000ae10: 5d20 3d20 6e61 6d65 0d0a 2020 2020 6966  ] = name..    if
+0000ae20: 2063 7265 6174 6573 5f6a 6f69 6e5f 7265   creates_join_re
+0000ae30: 7175 6573 7420 6973 206e 6f74 204e 6f6e  quest is not Non
+0000ae40: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000ae50: 6f61 645b 2763 7265 6174 6573 5f6a 6f69  oad['creates_joi
+0000ae60: 6e5f 7265 7175 6573 7427 5d20 3d20 6372  n_request'] = cr
+0000ae70: 6561 7465 735f 6a6f 696e 5f72 6571 7565  eates_join_reque
+0000ae80: 7374 0d0a 0d0a 2020 2020 7265 7475 726e  st....    return
+0000ae90: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000aea0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000aeb0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000aec0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000aed0: 643d 2770 6f73 7427 290d 0a0d 0a61 7379  d='post')....asy
+0000aee0: 6e63 2064 6566 2072 6576 6f6b 655f 6368  nc def revoke_ch
+0000aef0: 6174 5f69 6e76 6974 655f 6c69 6e6b 2874  at_invite_link(t
+0000af00: 6f6b 656e 2c20 6368 6174 5f69 642c 2069  oken, chat_id, i
+0000af10: 6e76 6974 655f 6c69 6e6b 293a 0d0a 2020  nvite_link):..  
+0000af20: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000af30: 7265 766f 6b65 4368 6174 496e 7669 7465  revokeChatInvite
+0000af40: 4c69 6e6b 270d 0a20 2020 2070 6179 6c6f  Link'..    paylo
+0000af50: 6164 203d 207b 0d0a 2020 2020 2020 2020  ad = {..        
+0000af60: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+0000af70: 6964 2c0d 0a20 2020 2020 2020 2027 696e  id,..        'in
+0000af80: 7669 7465 5f6c 696e 6b27 3a20 696e 7669  vite_link': invi
+0000af90: 7465 5f6c 696e 6b0d 0a20 2020 207d 0d0a  te_link..    }..
+0000afa0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+0000afb0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+0000afc0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000afd0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000afe0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000aff0: 7427 290d 0a0d 0a0d 0a61 7379 6e63 2064  t')......async d
+0000b000: 6566 2065 7870 6f72 745f 6368 6174 5f69  ef export_chat_i
+0000b010: 6e76 6974 655f 6c69 6e6b 2874 6f6b 656e  nvite_link(token
+0000b020: 2c20 6368 6174 5f69 6429 3a0d 0a20 2020  , chat_id):..   
+0000b030: 206d 6574 686f 645f 7572 6c20 3d20 2765   method_url = 'e
+0000b040: 7870 6f72 7443 6861 7449 6e76 6974 654c  xportChatInviteL
+0000b050: 696e 6b27 0d0a 2020 2020 7061 796c 6f61  ink'..    payloa
+0000b060: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000b070: 6368 6174 5f69 647d 0d0a 2020 2020 7265  chat_id}..    re
+0000b080: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+0000b090: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+0000b0a0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000b0b0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000b0c0: 6574 686f 643d 2770 6f73 7427 290d 0a0d  ethod='post')...
+0000b0d0: 0a61 7379 6e63 2064 6566 2061 7070 726f  .async def appro
+0000b0e0: 7665 5f63 6861 745f 6a6f 696e 5f72 6571  ve_chat_join_req
+0000b0f0: 7565 7374 2874 6f6b 656e 2c20 6368 6174  uest(token, chat
+0000b100: 5f69 642c 2075 7365 725f 6964 293a 0d0a  _id, user_id):..
+0000b110: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000b120: 2027 6170 7072 6f76 6543 6861 744a 6f69   'approveChatJoi
+0000b130: 6e52 6571 7565 7374 270d 0a20 2020 2070  nRequest'..    p
+0000b140: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
+0000b150: 2020 2020 2763 6861 745f 6964 273a 2063      'chat_id': c
+0000b160: 6861 745f 6964 2c0d 0a20 2020 2020 2020  hat_id,..       
+0000b170: 2027 7573 6572 5f69 6427 3a20 7573 6572   'user_id': user
+0000b180: 5f69 640d 0a20 2020 207d 0d0a 2020 2020  _id..    }..    
+0000b190: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+0000b1a0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+0000b1b0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+0000b1c0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+0000b1d0: 206d 6574 686f 643d 2770 6f73 7427 290d   method='post').
+0000b1e0: 0a0d 0a0d 0a61 7379 6e63 2064 6566 2064  .....async def d
+0000b1f0: 6563 6c69 6e65 5f63 6861 745f 6a6f 696e  ecline_chat_join
+0000b200: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000b210: 6368 6174 5f69 642c 2075 7365 725f 6964  chat_id, user_id
+0000b220: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+0000b230: 726c 203d 2027 6465 636c 696e 6543 6861  rl = 'declineCha
+0000b240: 744a 6f69 6e52 6571 7565 7374 270d 0a20  tJoinRequest'.. 
+0000b250: 2020 2070 6179 6c6f 6164 203d 207b 0d0a     payload = {..
+0000b260: 2020 2020 2020 2020 2763 6861 745f 6964          'chat_id
+0000b270: 273a 2063 6861 745f 6964 2c0d 0a20 2020  ': chat_id,..   
+0000b280: 2020 2020 2027 7573 6572 5f69 6427 3a20       'user_id': 
+0000b290: 7573 6572 5f69 640d 0a20 2020 207d 0d0a  user_id..    }..
+0000b2a0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+0000b2b0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+0000b2c0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000b2d0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000b2e0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000b2f0: 7427 290d 0a0d 0a0d 0a61 7379 6e63 2064  t')......async d
+0000b300: 6566 2073 6574 5f63 6861 745f 7068 6f74  ef set_chat_phot
+0000b310: 6f28 746f 6b65 6e2c 2063 6861 745f 6964  o(token, chat_id
+0000b320: 2c20 7068 6f74 6f29 3a0d 0a20 2020 206d  , photo):..    m
+0000b330: 6574 686f 645f 7572 6c20 3d20 2773 6574  ethod_url = 'set
+0000b340: 4368 6174 5068 6f74 6f27 0d0a 2020 2020  ChatPhoto'..    
+0000b350: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
+0000b360: 5f69 6427 3a20 6368 6174 5f69 647d 0d0a  _id': chat_id}..
+0000b370: 2020 2020 6669 6c65 7320 3d20 4e6f 6e65      files = None
+0000b380: 0d0a 2020 2020 6966 2075 7469 6c2e 6973  ..    if util.is
+0000b390: 5f73 7472 696e 6728 7068 6f74 6f29 3a0d  _string(photo):.
+0000b3a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000b3b0: 5b27 7068 6f74 6f27 5d20 3d20 7068 6f74  ['photo'] = phot
+0000b3c0: 6f0d 0a20 2020 2065 6c69 6620 7574 696c  o..    elif util
+0000b3d0: 2e69 735f 7069 6c5f 696d 6167 6528 7068  .is_pil_image(ph
+0000b3e0: 6f74 6f29 3a0d 0a20 2020 2020 2020 2066  oto):..        f
+0000b3f0: 696c 6573 203d 207b 2770 686f 746f 273a  iles = {'photo':
+0000b400: 2075 7469 6c2e 7069 6c5f 696d 6167 655f   util.pil_image_
+0000b410: 746f 5f66 696c 6528 7068 6f74 6f29 7d0d  to_file(photo)}.
+0000b420: 0a20 2020 2065 6c73 653a 0d0a 2020 2020  .    else:..    
+0000b430: 2020 2020 6669 6c65 7320 3d20 7b27 7068      files = {'ph
+0000b440: 6f74 6f27 3a20 7068 6f74 6f7d 0d0a 2020  oto': photo}..  
+0000b450: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000b460: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000b470: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000b480: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000b490: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
+0000b4a0: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000b4b0: 0d0a 0d0a 6173 796e 6320 6465 6620 6465  ....async def de
+0000b4c0: 6c65 7465 5f63 6861 745f 7068 6f74 6f28  lete_chat_photo(
+0000b4d0: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
+0000b4e0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000b4f0: 203d 2027 6465 6c65 7465 4368 6174 5068   = 'deleteChatPh
+0000b500: 6f74 6f27 0d0a 2020 2020 7061 796c 6f61  oto'..    payloa
+0000b510: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000b520: 6368 6174 5f69 647d 0d0a 2020 2020 7265  chat_id}..    re
+0000b530: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+0000b540: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+0000b550: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000b560: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000b570: 6574 686f 643d 2770 6f73 7427 290d 0a0d  ethod='post')...
+0000b580: 0a0d 0a61 7379 6e63 2064 6566 2073 6574  ...async def set
+0000b590: 5f63 6861 745f 7469 746c 6528 746f 6b65  _chat_title(toke
+0000b5a0: 6e2c 2063 6861 745f 6964 2c20 7469 746c  n, chat_id, titl
+0000b5b0: 6529 3a0d 0a20 2020 206d 6574 686f 645f  e):..    method_
+0000b5c0: 7572 6c20 3d20 2773 6574 4368 6174 5469  url = 'setChatTi
+0000b5d0: 746c 6527 0d0a 2020 2020 7061 796c 6f61  tle'..    payloa
+0000b5e0: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000b5f0: 6368 6174 5f69 642c 2027 7469 746c 6527  chat_id, 'title'
+0000b600: 3a20 7469 746c 657d 0d0a 2020 2020 7265  : title}..    re
+0000b610: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+0000b620: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+0000b630: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000b640: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000b650: 6574 686f 643d 2770 6f73 7427 290d 0a0d  ethod='post')...
+0000b660: 0a0d 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+0000b670: 5f6d 795f 636f 6d6d 616e 6473 2874 6f6b  _my_commands(tok
+0000b680: 656e 2c20 7363 6f70 653d 4e6f 6e65 2c20  en, scope=None, 
+0000b690: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
+0000b6a0: 6e65 293a 0d0a 2020 2020 6d65 7468 6f64  ne):..    method
+0000b6b0: 5f75 726c 203d 2072 2767 6574 4d79 436f  _url = r'getMyCo
+0000b6c0: 6d6d 616e 6473 270d 0a20 2020 2070 6179  mmands'..    pay
+0000b6d0: 6c6f 6164 203d 207b 7d0d 0a20 2020 2069  load = {}..    i
+0000b6e0: 6620 7363 6f70 653a 0d0a 2020 2020 2020  f scope:..      
+0000b6f0: 2020 7061 796c 6f61 645b 2773 636f 7065    payload['scope
+0000b700: 275d 203d 2073 636f 7065 2e74 6f5f 6a73  '] = scope.to_js
+0000b710: 6f6e 2829 0d0a 2020 2020 6966 206c 616e  on()..    if lan
+0000b720: 6775 6167 655f 636f 6465 3a0d 0a20 2020  guage_code:..   
+0000b730: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
+0000b740: 6e67 7561 6765 5f63 6f64 6527 5d20 3d20  nguage_code'] = 
+0000b750: 6c61 6e67 7561 6765 5f63 6f64 650d 0a20  language_code.. 
+0000b760: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000b770: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000b780: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000b790: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000b7a0: 6164 290d 0a0d 0a61 7379 6e63 2064 6566  ad)....async def
+0000b7b0: 2073 6574 5f63 6861 745f 6d65 6e75 5f62   set_chat_menu_b
+0000b7c0: 7574 746f 6e28 746f 6b65 6e2c 2063 6861  utton(token, cha
+0000b7d0: 745f 6964 3d4e 6f6e 652c 206d 656e 755f  t_id=None, menu_
+0000b7e0: 6275 7474 6f6e 3d4e 6f6e 6529 3a0d 0a20  button=None):.. 
+0000b7f0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000b800: 7227 7365 7443 6861 744d 656e 7542 7574  r'setChatMenuBut
+0000b810: 746f 6e27 0d0a 2020 2020 7061 796c 6f61  ton'..    payloa
+0000b820: 6420 3d20 7b7d 0d0a 2020 2020 6966 2063  d = {}..    if c
+0000b830: 6861 745f 6964 3a0d 0a20 2020 2020 2020  hat_id:..       
+0000b840: 2070 6179 6c6f 6164 5b27 6368 6174 5f69   payload['chat_i
+0000b850: 6427 5d20 3d20 6368 6174 5f69 640d 0a20  d'] = chat_id.. 
+0000b860: 2020 2069 6620 6d65 6e75 5f62 7574 746f     if menu_butto
+0000b870: 6e3a 0d0a 2020 2020 2020 2020 7061 796c  n:..        payl
+0000b880: 6f61 645b 276d 656e 755f 6275 7474 6f6e  oad['menu_button
+0000b890: 275d 203d 206d 656e 755f 6275 7474 6f6e  '] = menu_button
+0000b8a0: 2e74 6f5f 6a73 6f6e 2829 0d0a 0d0a 2020  .to_json()....  
+0000b8b0: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000b8c0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000b8d0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000b8e0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000b8f0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000b900: 290d 0a0d 0a61 7379 6e63 2064 6566 2067  )....async def g
+0000b910: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
+0000b920: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
+0000b930: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+0000b940: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
+0000b950: 7443 6861 744d 656e 7542 7574 746f 6e27  tChatMenuButton'
+0000b960: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000b970: 7b7d 0d0a 2020 2020 6966 2063 6861 745f  {}..    if chat_
+0000b980: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000b990: 6c6f 6164 5b27 6368 6174 5f69 6427 5d20  load['chat_id'] 
+0000b9a0: 3d20 6368 6174 5f69 640d 0a0d 0a20 2020  = chat_id....   
+0000b9b0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000b9c0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000b9d0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000b9e0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000b9f0: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
+0000ba00: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+0000ba10: 7365 745f 6d79 5f64 6566 6175 6c74 5f61  set_my_default_a
+0000ba20: 646d 696e 6973 7472 6174 6f72 5f72 6967  dministrator_rig
+0000ba30: 6874 7328 746f 6b65 6e2c 2072 6967 6874  hts(token, right
+0000ba40: 733d 4e6f 6e65 2c20 666f 725f 6368 616e  s=None, for_chan
+0000ba50: 6e65 6c73 3d4e 6f6e 6529 3a0d 0a20 2020  nels=None):..   
+0000ba60: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+0000ba70: 7365 744d 7944 6566 6175 6c74 4164 6d69  setMyDefaultAdmi
+0000ba80: 6e69 7374 7261 746f 7252 6967 6874 7327  nistratorRights'
+0000ba90: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000baa0: 7b7d 0d0a 2020 2020 6966 2072 6967 6874  {}..    if right
+0000bab0: 733a 0d0a 2020 2020 2020 2020 7061 796c  s:..        payl
+0000bac0: 6f61 645b 2772 6967 6874 7327 5d20 3d20  oad['rights'] = 
+0000bad0: 7269 6768 7473 2e74 6f5f 6a73 6f6e 2829  rights.to_json()
+0000bae0: 0d0a 2020 2020 6966 2066 6f72 5f63 6861  ..    if for_cha
+0000baf0: 6e6e 656c 7320 6973 206e 6f74 204e 6f6e  nnels is not Non
+0000bb00: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000bb10: 6f61 645b 2766 6f72 5f63 6861 6e6e 656c  oad['for_channel
+0000bb20: 7327 5d20 3d20 666f 725f 6368 616e 6e65  s'] = for_channe
+0000bb30: 6c73 0d0a 0d0a 2020 2020 7265 7475 726e  ls....    return
+0000bb40: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000bb50: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000bb60: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000bb70: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000bb80: 643d 2770 6f73 7427 290d 0a0d 0a61 7379  d='post')....asy
+0000bb90: 6e63 2064 6566 2067 6574 5f6d 795f 6465  nc def get_my_de
+0000bba0: 6661 756c 745f 6164 6d69 6e69 7374 7261  fault_administra
+0000bbb0: 746f 725f 7269 6768 7473 2874 6f6b 656e  tor_rights(token
+0000bbc0: 2c20 666f 725f 6368 616e 6e65 6c73 3d4e  , for_channels=N
+0000bbd0: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+0000bbe0: 645f 7572 6c20 3d20 7227 6765 744d 7944  d_url = r'getMyD
+0000bbf0: 6566 6175 6c74 4164 6d69 6e69 7374 7261  efaultAdministra
+0000bc00: 746f 7252 6967 6874 7327 0d0a 2020 2020  torRights'..    
+0000bc10: 7061 796c 6f61 6420 3d20 7b7d 0d0a 2020  payload = {}..  
+0000bc20: 2020 6966 2066 6f72 5f63 6861 6e6e 656c    if for_channel
+0000bc30: 733a 0d0a 2020 2020 2020 2020 7061 796c  s:..        payl
+0000bc40: 6f61 645b 2766 6f72 5f63 6861 6e6e 656c  oad['for_channel
+0000bc50: 7327 5d20 3d20 666f 725f 6368 616e 6e65  s'] = for_channe
+0000bc60: 6c73 0d0a 0d0a 2020 2020 7265 7475 726e  ls....    return
+0000bc70: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+0000bc80: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000bc90: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000bca0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
+0000bcb0: 643d 2770 6f73 7427 290d 0a0d 0a61 7379  d='post')....asy
+0000bcc0: 6e63 2064 6566 2073 6574 5f6d 795f 636f  nc def set_my_co
+0000bcd0: 6d6d 616e 6473 2874 6f6b 656e 2c20 636f  mmands(token, co
+0000bce0: 6d6d 616e 6473 2c20 7363 6f70 653d 4e6f  mmands, scope=No
+0000bcf0: 6e65 2c20 6c61 6e67 7561 6765 5f63 6f64  ne, language_cod
+0000bd00: 653d 4e6f 6e65 293a 0d0a 2020 2020 6d65  e=None):..    me
+0000bd10: 7468 6f64 5f75 726c 203d 2072 2773 6574  thod_url = r'set
+0000bd20: 4d79 436f 6d6d 616e 6473 270d 0a20 2020  MyCommands'..   
+0000bd30: 2070 6179 6c6f 6164 203d 207b 2763 6f6d   payload = {'com
+0000bd40: 6d61 6e64 7327 3a20 6177 6169 7420 5f63  mands': await _c
+0000bd50: 6f6e 7665 7274 5f6c 6973 745f 6a73 6f6e  onvert_list_json
+0000bd60: 5f73 6572 6961 6c69 7a61 626c 6528 636f  _serializable(co
+0000bd70: 6d6d 616e 6473 297d 0d0a 2020 2020 6966  mmands)}..    if
+0000bd80: 2073 636f 7065 3a0d 0a20 2020 2020 2020   scope:..       
+0000bd90: 2070 6179 6c6f 6164 5b27 7363 6f70 6527   payload['scope'
+0000bda0: 5d20 3d20 7363 6f70 652e 746f 5f6a 736f  ] = scope.to_jso
+0000bdb0: 6e28 290d 0a20 2020 2069 6620 6c61 6e67  n()..    if lang
+0000bdc0: 7561 6765 5f63 6f64 653a 0d0a 2020 2020  uage_code:..    
+0000bdd0: 2020 2020 7061 796c 6f61 645b 276c 616e      payload['lan
+0000bde0: 6775 6167 655f 636f 6465 275d 203d 206c  guage_code'] = l
+0000bdf0: 616e 6775 6167 655f 636f 6465 0d0a 2020  anguage_code..  
+0000be00: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000be10: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000be20: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000be30: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000be40: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000be50: 290d 0a0d 0a0d 0a61 7379 6e63 2064 6566  )......async def
+0000be60: 2064 656c 6574 655f 6d79 5f63 6f6d 6d61   delete_my_comma
+0000be70: 6e64 7328 746f 6b65 6e2c 2073 636f 7065  nds(token, scope
+0000be80: 3d4e 6f6e 652c 206c 616e 6775 6167 655f  =None, language_
+0000be90: 636f 6465 3d4e 6f6e 6529 3a0d 0a20 2020  code=None):..   
+0000bea0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+0000beb0: 6465 6c65 7465 4d79 436f 6d6d 616e 6473  deleteMyCommands
+0000bec0: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000bed0: 207b 7d0d 0a20 2020 2069 6620 7363 6f70   {}..    if scop
+0000bee0: 653a 200d 0a20 2020 2020 2020 2070 6179  e: ..        pay
+0000bef0: 6c6f 6164 5b27 7363 6f70 6527 5d20 3d20  load['scope'] = 
+0000bf00: 7363 6f70 652e 746f 5f6a 736f 6e28 290d  scope.to_json().
+0000bf10: 0a20 2020 2069 6620 6c61 6e67 7561 6765  .    if language
+0000bf20: 5f63 6f64 653a 200d 0a20 2020 2020 2020  _code: ..       
+0000bf30: 2070 6179 6c6f 6164 5b27 6c61 6e67 7561   payload['langua
+0000bf40: 6765 5f63 6f64 6527 5d20 3d20 6c61 6e67  ge_code'] = lang
+0000bf50: 7561 6765 5f63 6f64 650d 0a20 2020 2072  uage_code..    r
+0000bf60: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000bf70: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000bf80: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000bf90: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000bfa0: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000bfb0: 0d0a 0d0a 6173 796e 6320 6465 6620 7365  ....async def se
+0000bfc0: 745f 6368 6174 5f64 6573 6372 6970 7469  t_chat_descripti
+0000bfd0: 6f6e 2874 6f6b 656e 2c20 6368 6174 5f69  on(token, chat_i
+0000bfe0: 642c 2064 6573 6372 6970 7469 6f6e 293a  d, description):
+0000bff0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000c000: 203d 2027 7365 7443 6861 7444 6573 6372   = 'setChatDescr
+0000c010: 6970 7469 6f6e 270d 0a20 2020 2070 6179  iption'..    pay
+0000c020: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+0000c030: 273a 2063 6861 745f 6964 7d0d 0a20 2020  ': chat_id}..   
+0000c040: 2069 6620 6465 7363 7269 7074 696f 6e20   if description 
+0000c050: 6973 206e 6f74 204e 6f6e 653a 2020 2320  is not None:  # 
+0000c060: 416c 6c6f 7720 656d 7074 7920 7374 7269  Allow empty stri
+0000c070: 6e67 730d 0a20 2020 2020 2020 2070 6179  ngs..        pay
+0000c080: 6c6f 6164 5b27 6465 7363 7269 7074 696f  load['descriptio
+0000c090: 6e27 5d20 3d20 6465 7363 7269 7074 696f  n'] = descriptio
+0000c0a0: 6e0d 0a20 2020 2072 6574 7572 6e20 6177  n..    return aw
+0000c0b0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+0000c0c0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000c0d0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000c0e0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+0000c0f0: 706f 7374 2729 0d0a 0d0a 0d0a 6173 796e  post')......asyn
+0000c100: 6320 6465 6620 7069 6e5f 6368 6174 5f6d  c def pin_chat_m
+0000c110: 6573 7361 6765 2874 6f6b 656e 2c20 6368  essage(token, ch
+0000c120: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
+0000c130: 642c 2064 6973 6162 6c65 5f6e 6f74 6966  d, disable_notif
+0000c140: 6963 6174 696f 6e3d 4e6f 6e65 293a 0d0a  ication=None):..
+0000c150: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000c160: 2027 7069 6e43 6861 744d 6573 7361 6765   'pinChatMessage
+0000c170: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000c180: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+0000c190: 745f 6964 2c20 276d 6573 7361 6765 5f69  t_id, 'message_i
+0000c1a0: 6427 3a20 6d65 7373 6167 655f 6964 7d0d  d': message_id}.
+0000c1b0: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+0000c1c0: 6e6f 7469 6669 6361 7469 6f6e 2069 7320  notification is 
+0000c1d0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000c1e0: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+0000c1f0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+0000c200: 275d 203d 2064 6973 6162 6c65 5f6e 6f74  '] = disable_not
+0000c210: 6966 6963 6174 696f 6e0d 0a20 2020 2072  ification..    r
+0000c220: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000c230: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000c240: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000c250: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000c260: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000c270: 0d0a 0d0a 6173 796e 6320 6465 6620 756e  ....async def un
+0000c280: 7069 6e5f 6368 6174 5f6d 6573 7361 6765  pin_chat_message
+0000c290: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000c2a0: 206d 6573 7361 6765 5f69 6429 3a0d 0a20   message_id):.. 
+0000c2b0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000c2c0: 2775 6e70 696e 4368 6174 4d65 7373 6167  'unpinChatMessag
+0000c2d0: 6527 0d0a 2020 2020 7061 796c 6f61 6420  e'..    payload 
+0000c2e0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+0000c2f0: 6174 5f69 647d 0d0a 2020 2020 6966 206d  at_id}..    if m
+0000c300: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+0000c310: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+0000c320: 7361 6765 5f69 6427 5d20 3d20 6d65 7373  sage_id'] = mess
+0000c330: 6167 655f 6964 0d0a 2020 2020 7265 7475  age_id..    retu
+0000c340: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000c350: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000c360: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000c370: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000c380: 686f 643d 2770 6f73 7427 290d 0a0d 0a0d  hod='post').....
+0000c390: 0a61 7379 6e63 2064 6566 2075 6e70 696e  .async def unpin
+0000c3a0: 5f61 6c6c 5f63 6861 745f 6d65 7373 6167  _all_chat_messag
+0000c3b0: 6573 2874 6f6b 656e 2c20 6368 6174 5f69  es(token, chat_i
+0000c3c0: 6429 3a0d 0a20 2020 206d 6574 686f 645f  d):..    method_
+0000c3d0: 7572 6c20 3d20 2775 6e70 696e 416c 6c43  url = 'unpinAllC
+0000c3e0: 6861 744d 6573 7361 6765 7327 0d0a 2020  hatMessages'..  
+0000c3f0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+0000c400: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+0000c410: 0d0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
+0000c420: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+0000c430: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000c440: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000c450: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+0000c460: 6f73 7427 290d 0a0d 0a0d 0a23 2055 7064  ost')......# Upd
+0000c470: 6174 696e 6720 6d65 7373 6167 6573 0d0a  ating messages..
+0000c480: 0d0a 6173 796e 6320 6465 6620 6564 6974  ..async def edit
+0000c490: 5f6d 6573 7361 6765 5f74 6578 7428 746f  _message_text(to
+0000c4a0: 6b65 6e2c 2074 6578 742c 2063 6861 745f  ken, text, chat_
+0000c4b0: 6964 3d4e 6f6e 652c 206d 6573 7361 6765  id=None, message
+0000c4c0: 5f69 643d 4e6f 6e65 2c20 696e 6c69 6e65  _id=None, inline
+0000c4d0: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
+0000c4e0: 2c20 7061 7273 655f 6d6f 6465 3d4e 6f6e  , parse_mode=Non
+0000c4f0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0000c500: 2020 2020 2020 2020 2020 656e 7469 7469            entiti
+0000c510: 6573 203d 204e 6f6e 652c 2064 6973 6162  es = None, disab
+0000c520: 6c65 5f77 6562 5f70 6167 655f 7072 6576  le_web_page_prev
+0000c530: 6965 773d 4e6f 6e65 2c20 7265 706c 795f  iew=None, reply_
+0000c540: 6d61 726b 7570 3d4e 6f6e 6529 3a0d 0a20  markup=None):.. 
+0000c550: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000c560: 7227 6564 6974 4d65 7373 6167 6554 6578  r'editMessageTex
+0000c570: 7427 0d0a 2020 2020 7061 796c 6f61 6420  t'..    payload 
+0000c580: 3d20 7b27 7465 7874 273a 2074 6578 747d  = {'text': text}
+0000c590: 0d0a 2020 2020 6966 2063 6861 745f 6964  ..    if chat_id
+0000c5a0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000c5b0: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
+0000c5c0: 6368 6174 5f69 640d 0a20 2020 2069 6620  chat_id..    if 
+0000c5d0: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+0000c5e0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+0000c5f0: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
+0000c600: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+0000c610: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000c620: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+0000c630: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
+0000c640: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
+0000c650: 655f 6d65 7373 6167 655f 6964 0d0a 2020  e_message_id..  
+0000c660: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
+0000c670: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000c680: 645b 2770 6172 7365 5f6d 6f64 6527 5d20  d['parse_mode'] 
+0000c690: 3d20 7061 7273 655f 6d6f 6465 0d0a 2020  = parse_mode..  
+0000c6a0: 2020 6966 2065 6e74 6974 6965 733a 0d0a    if entities:..
+0000c6b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000c6c0: 2765 6e74 6974 6965 7327 5d20 3d20 6a73  'entities'] = js
+0000c6d0: 6f6e 2e64 756d 7073 2874 7970 6573 2e4d  on.dumps(types.M
+0000c6e0: 6573 7361 6765 456e 7469 7479 2e74 6f5f  essageEntity.to_
+0000c6f0: 6c69 7374 5f6f 665f 6469 6374 7328 656e  list_of_dicts(en
+0000c700: 7469 7469 6573 2929 0d0a 2020 2020 6966  tities))..    if
+0000c710: 2064 6973 6162 6c65 5f77 6562 5f70 6167   disable_web_pag
+0000c720: 655f 7072 6576 6965 7720 6973 206e 6f74  e_preview is not
+0000c730: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000c740: 7061 796c 6f61 645b 2764 6973 6162 6c65  payload['disable
+0000c750: 5f77 6562 5f70 6167 655f 7072 6576 6965  _web_page_previe
+0000c760: 7727 5d20 3d20 6469 7361 626c 655f 7765  w'] = disable_we
+0000c770: 625f 7061 6765 5f70 7265 7669 6577 0d0a  b_page_preview..
+0000c780: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+0000c790: 6b75 703a 0d0a 2020 2020 2020 2020 7061  kup:..        pa
+0000c7a0: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+0000c7b0: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
+0000c7c0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+0000c7d0: 706c 795f 6d61 726b 7570 290d 0a20 2020  ply_markup)..   
+0000c7e0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+0000c7f0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+0000c800: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000c810: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000c820: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
+0000c830: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+0000c840: 6564 6974 5f6d 6573 7361 6765 5f63 6170  edit_message_cap
+0000c850: 7469 6f6e 2874 6f6b 656e 2c20 6361 7074  tion(token, capt
+0000c860: 696f 6e2c 2063 6861 745f 6964 3d4e 6f6e  ion, chat_id=Non
+0000c870: 652c 206d 6573 7361 6765 5f69 643d 4e6f  e, message_id=No
+0000c880: 6e65 2c20 696e 6c69 6e65 5f6d 6573 7361  ne, inline_messa
+0000c890: 6765 5f69 643d 4e6f 6e65 2c0d 0a20 2020  ge_id=None,..   
+0000c8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8b0: 2020 2020 2020 7061 7273 655f 6d6f 6465        parse_mode
+0000c8c0: 3d4e 6f6e 652c 2063 6170 7469 6f6e 5f65  =None, caption_e
+0000c8d0: 6e74 6974 6965 733d 4e6f 6e65 2c72 6570  ntities=None,rep
+0000c8e0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 293a  ly_markup=None):
+0000c8f0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000c900: 203d 2072 2765 6469 744d 6573 7361 6765   = r'editMessage
+0000c910: 4361 7074 696f 6e27 0d0a 2020 2020 7061  Caption'..    pa
+0000c920: 796c 6f61 6420 3d20 7b27 6361 7074 696f  yload = {'captio
+0000c930: 6e27 3a20 6361 7074 696f 6e7d 0d0a 2020  n': caption}..  
+0000c940: 2020 6966 2063 6861 745f 6964 3a0d 0a20    if chat_id:.. 
+0000c950: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000c960: 6368 6174 5f69 6427 5d20 3d20 6368 6174  chat_id'] = chat
+0000c970: 5f69 640d 0a20 2020 2069 6620 6d65 7373  _id..    if mess
+0000c980: 6167 655f 6964 3a0d 0a20 2020 2020 2020  age_id:..       
+0000c990: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+0000c9a0: 655f 6964 275d 203d 206d 6573 7361 6765  e_id'] = message
+0000c9b0: 5f69 640d 0a20 2020 2069 6620 696e 6c69  _id..    if inli
+0000c9c0: 6e65 5f6d 6573 7361 6765 5f69 643a 0d0a  ne_message_id:..
+0000c9d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000c9e0: 2769 6e6c 696e 655f 6d65 7373 6167 655f  'inline_message_
+0000c9f0: 6964 275d 203d 2069 6e6c 696e 655f 6d65  id'] = inline_me
+0000ca00: 7373 6167 655f 6964 0d0a 2020 2020 6966  ssage_id..    if
+0000ca10: 2070 6172 7365 5f6d 6f64 653a 0d0a 2020   parse_mode:..  
+0000ca20: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+0000ca30: 6172 7365 5f6d 6f64 6527 5d20 3d20 7061  arse_mode'] = pa
+0000ca40: 7273 655f 6d6f 6465 0d0a 2020 2020 6966  rse_mode..    if
+0000ca50: 2063 6170 7469 6f6e 5f65 6e74 6974 6965   caption_entitie
+0000ca60: 733a 0d0a 2020 2020 2020 2020 7061 796c  s:..        payl
+0000ca70: 6f61 645b 2763 6170 7469 6f6e 5f65 6e74  oad['caption_ent
+0000ca80: 6974 6965 7327 5d20 3d20 6a73 6f6e 2e64  ities'] = json.d
+0000ca90: 756d 7073 2874 7970 6573 2e4d 6573 7361  umps(types.Messa
+0000caa0: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
+0000cab0: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
+0000cac0: 6e5f 656e 7469 7469 6573 2929 0d0a 2020  n_entities))..  
+0000cad0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+0000cae0: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+0000caf0: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+0000cb00: 7027 5d20 3d20 6177 6169 7420 5f63 6f6e  p'] = await _con
+0000cb10: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+0000cb20: 795f 6d61 726b 7570 290d 0a20 2020 2072  y_markup)..    r
+0000cb30: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+0000cb40: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+0000cb50: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000cb60: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000cb70: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000cb80: 0d0a 0d0a 6173 796e 6320 6465 6620 6564  ....async def ed
+0000cb90: 6974 5f6d 6573 7361 6765 5f6d 6564 6961  it_message_media
+0000cba0: 2874 6f6b 656e 2c20 6d65 6469 612c 2063  (token, media, c
+0000cbb0: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
+0000cbc0: 7361 6765 5f69 643d 4e6f 6e65 2c20 696e  sage_id=None, in
+0000cbd0: 6c69 6e65 5f6d 6573 7361 6765 5f69 643d  line_message_id=
+0000cbe0: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
+0000cbf0: 7570 3d4e 6f6e 6529 3a0d 0a20 2020 206d  up=None):..    m
+0000cc00: 6574 686f 645f 7572 6c20 3d20 7227 6564  ethod_url = r'ed
+0000cc10: 6974 4d65 7373 6167 654d 6564 6961 270d  itMessageMedia'.
+0000cc20: 0a20 2020 206d 6564 6961 5f6a 736f 6e2c  .    media_json,
+0000cc30: 2066 696c 6520 3d20 6177 6169 7420 636f   file = await co
+0000cc40: 6e76 6572 745f 696e 7075 745f 6d65 6469  nvert_input_medi
+0000cc50: 6128 6d65 6469 6129 0d0a 2020 2020 7061  a(media)..    pa
+0000cc60: 796c 6f61 6420 3d20 7b27 6d65 6469 6127  yload = {'media'
+0000cc70: 3a20 6d65 6469 615f 6a73 6f6e 7d0d 0a20  : media_json}.. 
+0000cc80: 2020 2069 6620 6368 6174 5f69 643a 0d0a     if chat_id:..
+0000cc90: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000cca0: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
+0000ccb0: 745f 6964 0d0a 2020 2020 6966 206d 6573  t_id..    if mes
+0000ccc0: 7361 6765 5f69 643a 0d0a 2020 2020 2020  sage_id:..      
+0000ccd0: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+0000cce0: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
+0000ccf0: 655f 6964 0d0a 2020 2020 6966 2069 6e6c  e_id..    if inl
+0000cd00: 696e 655f 6d65 7373 6167 655f 6964 3a0d  ine_message_id:.
+0000cd10: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000cd20: 5b27 696e 6c69 6e65 5f6d 6573 7361 6765  ['inline_message
+0000cd30: 5f69 6427 5d20 3d20 696e 6c69 6e65 5f6d  _id'] = inline_m
+0000cd40: 6573 7361 6765 5f69 640d 0a20 2020 2069  essage_id..    i
+0000cd50: 6620 7265 706c 795f 6d61 726b 7570 3a0d  f reply_markup:.
+0000cd60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000cd70: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+0000cd80: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
+0000cd90: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+0000cda0: 6172 6b75 7029 0d0a 2020 2020 7265 7475  arkup)..    retu
+0000cdb0: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000cdc0: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000cdd0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000cde0: 616d 733d 7061 796c 6f61 642c 2066 696c  ams=payload, fil
+0000cdf0: 6573 3d66 696c 652c 206d 6574 686f 643d  es=file, method=
+0000ce00: 2770 6f73 7427 2069 6620 6669 6c65 2065  'post' if file e
+0000ce10: 6c73 6520 2767 6574 2729 0d0a 0d0a 0d0a  lse 'get')......
+0000ce20: 6173 796e 6320 6465 6620 6564 6974 5f6d  async def edit_m
+0000ce30: 6573 7361 6765 5f72 6570 6c79 5f6d 6172  essage_reply_mar
+0000ce40: 6b75 7028 746f 6b65 6e2c 2063 6861 745f  kup(token, chat_
+0000ce50: 6964 3d4e 6f6e 652c 206d 6573 7361 6765  id=None, message
+0000ce60: 5f69 643d 4e6f 6e65 2c20 696e 6c69 6e65  _id=None, inline
+0000ce70: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
+0000ce80: 2c20 7265 706c 795f 6d61 726b 7570 3d4e  , reply_markup=N
+0000ce90: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+0000cea0: 645f 7572 6c20 3d20 7227 6564 6974 4d65  d_url = r'editMe
+0000ceb0: 7373 6167 6552 6570 6c79 4d61 726b 7570  ssageReplyMarkup
+0000cec0: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000ced0: 207b 7d0d 0a20 2020 2069 6620 6368 6174   {}..    if chat
+0000cee0: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+0000cef0: 796c 6f61 645b 2763 6861 745f 6964 275d  yload['chat_id']
+0000cf00: 203d 2063 6861 745f 6964 0d0a 2020 2020   = chat_id..    
+0000cf10: 6966 206d 6573 7361 6765 5f69 643a 0d0a  if message_id:..
+0000cf20: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000cf30: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
+0000cf40: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+0000cf50: 6966 2069 6e6c 696e 655f 6d65 7373 6167  if inline_messag
+0000cf60: 655f 6964 3a0d 0a20 2020 2020 2020 2070  e_id:..        p
+0000cf70: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
+0000cf80: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
+0000cf90: 6c69 6e65 5f6d 6573 7361 6765 5f69 640d  line_message_id.
+0000cfa0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+0000cfb0: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+0000cfc0: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+0000cfd0: 726b 7570 275d 203d 2061 7761 6974 205f  rkup'] = await _
+0000cfe0: 636f 6e76 6572 745f 6d61 726b 7570 2872  convert_markup(r
+0000cff0: 6570 6c79 5f6d 6172 6b75 7029 0d0a 2020  eply_markup)..  
+0000d000: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000d010: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000d020: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000d030: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000d040: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000d050: 290d 0a0d 0a0d 0a61 7379 6e63 2064 6566  )......async def
+0000d060: 2064 656c 6574 655f 6d65 7373 6167 6528   delete_message(
+0000d070: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000d080: 6d65 7373 6167 655f 6964 2c20 7469 6d65  message_id, time
+0000d090: 6f75 743d 4e6f 6e65 293a 0d0a 2020 2020  out=None):..    
+0000d0a0: 6d65 7468 6f64 5f75 726c 203d 2072 2764  method_url = r'd
+0000d0b0: 656c 6574 654d 6573 7361 6765 270d 0a20  eleteMessage'.. 
+0000d0c0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+0000d0d0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+0000d0e0: 2c20 276d 6573 7361 6765 5f69 6427 3a20  , 'message_id': 
+0000d0f0: 6d65 7373 6167 655f 6964 7d0d 0a20 2020  message_id}..   
+0000d100: 2069 6620 7469 6d65 6f75 743a 0d0a 2020   if timeout:..  
+0000d110: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
+0000d120: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
+0000d130: 7574 0d0a 2020 2020 7265 7475 726e 2061  ut..    return a
+0000d140: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
+0000d150: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000d160: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000d170: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+0000d180: 2770 6f73 7427 290d 0a0d 0a0d 0a23 2047  'post')......# G
+0000d190: 616d 650d 0a0d 0a61 7379 6e63 2064 6566  ame....async def
+0000d1a0: 2073 656e 645f 6761 6d65 280d 0a20 2020   send_game(..   
+0000d1b0: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
+0000d1c0: 5f69 642c 2067 616d 655f 7368 6f72 745f  _id, game_short_
+0000d1d0: 6e61 6d65 2c0d 0a20 2020 2020 2020 2064  name,..        d
+0000d1e0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+0000d1f0: 696f 6e3d 4e6f 6e65 2c20 7265 706c 795f  ion=None, reply_
+0000d200: 746f 5f6d 6573 7361 6765 5f69 643d 4e6f  to_message_id=No
+0000d210: 6e65 2c20 7265 706c 795f 6d61 726b 7570  ne, reply_markup
+0000d220: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+0000d230: 6f6e 652c 0d0a 2020 2020 2020 2020 616c  one,..        al
+0000d240: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+0000d250: 6f75 745f 7265 706c 793d 4e6f 6e65 2c20  out_reply=None, 
+0000d260: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
+0000d270: 4e6f 6e65 2c20 6d65 7373 6167 655f 7468  None, message_th
+0000d280: 7265 6164 5f69 643d 4e6f 6e65 293a 0d0a  read_id=None):..
+0000d290: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000d2a0: 2072 2773 656e 6447 616d 6527 0d0a 2020   r'sendGame'..  
+0000d2b0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+0000d2c0: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+0000d2d0: 2027 6761 6d65 5f73 686f 7274 5f6e 616d   'game_short_nam
+0000d2e0: 6527 3a20 6761 6d65 5f73 686f 7274 5f6e  e': game_short_n
+0000d2f0: 616d 657d 0d0a 2020 2020 6966 2064 6973  ame}..    if dis
+0000d300: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+0000d310: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
+0000d320: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000d330: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
+0000d340: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
+0000d350: 655f 6e6f 7469 6669 6361 7469 6f6e 0d0a  e_notification..
+0000d360: 2020 2020 6966 2072 6570 6c79 5f74 6f5f      if reply_to_
+0000d370: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+0000d380: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
+0000d390: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+0000d3a0: 6427 5d20 3d20 7265 706c 795f 746f 5f6d  d'] = reply_to_m
+0000d3b0: 6573 7361 6765 5f69 640d 0a20 2020 2069  essage_id..    i
+0000d3c0: 6620 7265 706c 795f 6d61 726b 7570 3a0d  f reply_markup:.
+0000d3d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000d3e0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+0000d3f0: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
+0000d400: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+0000d410: 6172 6b75 7029 0d0a 2020 2020 6966 2074  arkup)..    if t
+0000d420: 696d 656f 7574 3a0d 0a20 2020 2020 2020  imeout:..       
+0000d430: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+0000d440: 7427 5d20 3d20 7469 6d65 6f75 740d 0a20  t'] = timeout.. 
+0000d450: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
+0000d460: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+0000d470: 7920 6973 206e 6f74 204e 6f6e 653a 0d0a  y is not None:..
+0000d480: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000d490: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
+0000d4a0: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
+0000d4b0: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+0000d4c0: 6974 686f 7574 5f72 6570 6c79 0d0a 2020  ithout_reply..  
+0000d4d0: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+0000d4e0: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+0000d4f0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000d500: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
+0000d510: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
+0000d520: 636f 6e74 656e 740d 0a20 2020 2069 6620  content..    if 
+0000d530: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+0000d540: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+0000d550: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
+0000d560: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
+0000d570: 6765 5f74 6872 6561 645f 6964 0d0a 2020  ge_thread_id..  
+0000d580: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
+0000d590: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
+0000d5a0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000d5b0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000d5c0: 6429 0d0a 0d0a 0d0a 2320 6874 7470 733a  d)......# https:
+0000d5d0: 2f2f 636f 7265 2e74 656c 6567 7261 6d2e  //core.telegram.
+0000d5e0: 6f72 672f 626f 7473 2f61 7069 2373 6574  org/bots/api#set
+0000d5f0: 6761 6d65 7363 6f72 650d 0a61 7379 6e63  gamescore..async
+0000d600: 2064 6566 2073 6574 5f67 616d 655f 7363   def set_game_sc
+0000d610: 6f72 6528 746f 6b65 6e2c 2075 7365 725f  ore(token, user_
+0000d620: 6964 2c20 7363 6f72 652c 2066 6f72 6365  id, score, force
+0000d630: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f65  =None, disable_e
+0000d640: 6469 745f 6d65 7373 6167 653d 4e6f 6e65  dit_message=None
+0000d650: 2c20 6368 6174 5f69 643d 4e6f 6e65 2c20  , chat_id=None, 
+0000d660: 6d65 7373 6167 655f 6964 3d4e 6f6e 652c  message_id=None,
+0000d670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d680: 2020 2020 2069 6e6c 696e 655f 6d65 7373       inline_mess
+0000d690: 6167 655f 6964 3d4e 6f6e 6529 3a0d 0a20  age_id=None):.. 
+0000d6a0: 2020 2022 2222 0d0a 2020 2020 5573 6520     """..    Use 
+0000d6b0: 7468 6973 206d 6574 686f 6420 746f 2073  this method to s
+0000d6c0: 6574 2074 6865 2073 636f 7265 206f 6620  et the score of 
+0000d6d0: 7468 6520 7370 6563 6966 6965 6420 7573  the specified us
+0000d6e0: 6572 2069 6e20 6120 6761 6d65 2e20 4f6e  er in a game. On
+0000d6f0: 2073 7563 6365 7373 2c20 6966 2074 6865   success, if the
+0000d700: 206d 6573 7361 6765 2077 6173 2073 656e   message was sen
+0000d710: 7420 6279 2074 6865 2062 6f74 2c20 7265  t by the bot, re
+0000d720: 7475 726e 7320 7468 6520 6564 6974 6564  turns the edited
+0000d730: 204d 6573 7361 6765 2c20 6f74 6865 7277   Message, otherw
+0000d740: 6973 6520 7265 7475 726e 7320 5472 7565  ise returns True
+0000d750: 2e20 5265 7475 726e 7320 616e 2065 7272  . Returns an err
+0000d760: 6f72 2c20 6966 2074 6865 206e 6577 2073  or, if the new s
+0000d770: 636f 7265 2069 7320 6e6f 7420 6772 6561  core is not grea
+0000d780: 7465 7220 7468 616e 2074 6865 2075 7365  ter than the use
+0000d790: 7227 7320 6375 7272 656e 7420 7363 6f72  r's current scor
+0000d7a0: 6520 696e 2074 6865 2063 6861 742e 0d0a  e in the chat...
+0000d7b0: 2020 2020 3a70 6172 616d 2074 6f6b 656e      :param token
+0000d7c0: 3a20 426f 7427 7320 746f 6b65 6e20 2879  : Bot's token (y
+0000d7d0: 6f75 2064 6f6e 2774 206e 6565 6420 746f  ou don't need to
+0000d7e0: 2066 696c 6c20 7468 6973 290d 0a20 2020   fill this)..   
+0000d7f0: 203a 7061 7261 6d20 7573 6572 5f69 643a   :param user_id:
+0000d800: 2055 7365 7220 6964 656e 7469 6669 6572   User identifier
+0000d810: 0d0a 2020 2020 3a70 6172 616d 2073 636f  ..    :param sco
+0000d820: 7265 3a20 4e65 7720 7363 6f72 652c 206d  re: New score, m
+0000d830: 7573 7420 6265 206e 6f6e 2d6e 6567 6174  ust be non-negat
+0000d840: 6976 650d 0a20 2020 203a 7061 7261 6d20  ive..    :param 
+0000d850: 666f 7263 653a 2028 4f70 7469 6f6e 616c  force: (Optional
+0000d860: 2920 5061 7373 2054 7275 652c 2069 6620  ) Pass True, if 
+0000d870: 7468 6520 6869 6768 2073 636f 7265 2069  the high score i
+0000d880: 7320 616c 6c6f 7765 6420 746f 2064 6563  s allowed to dec
+0000d890: 7265 6173 652e 2054 6869 7320 6361 6e20  rease. This can 
+0000d8a0: 6265 2075 7365 6675 6c20 7768 656e 2066  be useful when f
+0000d8b0: 6978 696e 6720 6d69 7374 616b 6573 206f  ixing mistakes o
+0000d8c0: 7220 6261 6e6e 696e 6720 6368 6561 7465  r banning cheate
+0000d8d0: 7273 0d0a 2020 2020 3a70 6172 616d 2064  rs..    :param d
+0000d8e0: 6973 6162 6c65 5f65 6469 745f 6d65 7373  isable_edit_mess
+0000d8f0: 6167 653a 2028 4f70 7469 6f6e 616c 2920  age: (Optional) 
+0000d900: 5061 7373 2054 7275 652c 2069 6620 7468  Pass True, if th
+0000d910: 6520 6761 6d65 206d 6573 7361 6765 2073  e game message s
+0000d920: 686f 756c 6420 6e6f 7420 6265 2061 7574  hould not be aut
+0000d930: 6f6d 6174 6963 616c 6c79 2065 6469 7465  omatically edite
+0000d940: 6420 746f 2069 6e63 6c75 6465 2074 6865  d to include the
+0000d950: 2063 7572 7265 6e74 2073 636f 7265 626f   current scorebo
+0000d960: 6172 640d 0a20 2020 203a 7061 7261 6d20  ard..    :param 
+0000d970: 6368 6174 5f69 643a 2028 4f70 7469 6f6e  chat_id: (Option
+0000d980: 616c 2c20 7265 7175 6972 6564 2069 6620  al, required if 
+0000d990: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000d9a0: 6420 6973 206e 6f74 2073 7065 6369 6669  d is not specifi
+0000d9b0: 6564 2920 556e 6971 7565 2069 6465 6e74  ed) Unique ident
+0000d9c0: 6966 6965 7220 666f 7220 7468 6520 7461  ifier for the ta
+0000d9d0: 7267 6574 2063 6861 7420 286f 7220 7573  rget chat (or us
+0000d9e0: 6572 6e61 6d65 206f 6620 7468 6520 7461  ername of the ta
+0000d9f0: 7267 6574 2063 6861 6e6e 656c 2069 6e20  rget channel in 
+0000da00: 7468 6520 666f 726d 6174 2040 6368 616e  the format @chan
+0000da10: 6e65 6c75 7365 726e 616d 6529 0d0a 2020  nelusername)..  
+0000da20: 2020 3a70 6172 616d 206d 6573 7361 6765    :param message
+0000da30: 5f69 643a 2028 4f70 7469 6f6e 616c 2c20  _id: (Optional, 
+0000da40: 7265 7175 6972 6564 2069 6620 696e 6c69  required if inli
+0000da50: 6e65 5f6d 6573 7361 6765 5f69 6420 6973  ne_message_id is
+0000da60: 206e 6f74 2073 7065 6369 6669 6564 2920   not specified) 
+0000da70: 556e 6971 7565 2069 6465 6e74 6966 6965  Unique identifie
+0000da80: 7220 6f66 2074 6865 2073 656e 7420 6d65  r of the sent me
+0000da90: 7373 6167 650d 0a20 2020 203a 7061 7261  ssage..    :para
+0000daa0: 6d20 696e 6c69 6e65 5f6d 6573 7361 6765  m inline_message
+0000dab0: 5f69 643a 2028 4f70 7469 6f6e 616c 2c20  _id: (Optional, 
+0000dac0: 7265 7175 6972 6564 2069 6620 6368 6174  required if chat
+0000dad0: 5f69 6420 616e 6420 6d65 7373 6167 655f  _id and message_
+0000dae0: 6964 2061 7265 206e 6f74 2073 7065 6369  id are not speci
+0000daf0: 6669 6564 2920 4964 656e 7469 6669 6572  fied) Identifier
+0000db00: 206f 6620 7468 6520 696e 6c69 6e65 206d   of the inline m
+0000db10: 6573 7361 6765 0d0a 2020 2020 3a72 6574  essage..    :ret
+0000db20: 7572 6e3a 0d0a 2020 2020 2222 220d 0a20  urn:..    """.. 
+0000db30: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000db40: 7227 7365 7447 616d 6553 636f 7265 270d  r'setGameScore'.
+0000db50: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000db60: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
+0000db70: 6964 2c20 2773 636f 7265 273a 2073 636f  id, 'score': sco
+0000db80: 7265 7d0d 0a20 2020 2069 6620 666f 7263  re}..    if forc
+0000db90: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
+0000dba0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000dbb0: 2766 6f72 6365 275d 203d 2066 6f72 6365  'force'] = force
+0000dbc0: 0d0a 2020 2020 6966 2063 6861 745f 6964  ..    if chat_id
+0000dbd0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000dbe0: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
+0000dbf0: 6368 6174 5f69 640d 0a20 2020 2069 6620  chat_id..    if 
+0000dc00: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+0000dc10: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+0000dc20: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
+0000dc30: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+0000dc40: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000dc50: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+0000dc60: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
+0000dc70: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
+0000dc80: 655f 6d65 7373 6167 655f 6964 0d0a 2020  e_message_id..  
+0000dc90: 2020 6966 2064 6973 6162 6c65 5f65 6469    if disable_edi
+0000dca0: 745f 6d65 7373 6167 6520 6973 206e 6f74  t_message is not
+0000dcb0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000dcc0: 7061 796c 6f61 645b 2764 6973 6162 6c65  payload['disable
+0000dcd0: 5f65 6469 745f 6d65 7373 6167 6527 5d20  _edit_message'] 
+0000dce0: 3d20 6469 7361 626c 655f 6564 6974 5f6d  = disable_edit_m
+0000dcf0: 6573 7361 6765 0d0a 2020 2020 7265 7475  essage..    retu
+0000dd00: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+0000dd10: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+0000dd20: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000dd30: 616d 733d 7061 796c 6f61 6429 0d0a 0d0a  ams=payload)....
+0000dd40: 0d0a 2320 6874 7470 733a 2f2f 636f 7265  ..# https://core
+0000dd50: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
+0000dd60: 7473 2f61 7069 2367 6574 6761 6d65 6869  ts/api#getgamehi
+0000dd70: 6768 7363 6f72 6573 0d0a 6173 796e 6320  ghscores..async 
+0000dd80: 6465 6620 6765 745f 6761 6d65 5f68 6967  def get_game_hig
+0000dd90: 685f 7363 6f72 6573 2874 6f6b 656e 2c20  h_scores(token, 
+0000dda0: 7573 6572 5f69 642c 2063 6861 745f 6964  user_id, chat_id
+0000ddb0: 3d4e 6f6e 652c 206d 6573 7361 6765 5f69  =None, message_i
+0000ddc0: 643d 4e6f 6e65 2c20 696e 6c69 6e65 5f6d  d=None, inline_m
+0000ddd0: 6573 7361 6765 5f69 643d 4e6f 6e65 293a  essage_id=None):
+0000dde0: 0d0a 2020 2020 2222 220d 0a20 2020 2055  ..    """..    U
+0000ddf0: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
+0000de00: 6f20 6765 7420 6461 7461 2066 6f72 2068  o get data for h
+0000de10: 6967 6820 7363 6f72 6520 7461 626c 6573  igh score tables
+0000de20: 2e20 5769 6c6c 2072 6574 7572 6e20 7468  . Will return th
+0000de30: 6520 7363 6f72 6520 6f66 2074 6865 2073  e score of the s
+0000de40: 7065 6369 6669 6564 2075 7365 7220 616e  pecified user an
+0000de50: 6420 7365 7665 7261 6c20 6f66 2068 6973  d several of his
+0000de60: 206e 6569 6768 626f 7273 2069 6e20 6120   neighbors in a 
+0000de70: 6761 6d65 2e20 4f6e 2073 7563 6365 7373  game. On success
+0000de80: 2c20 7265 7475 726e 7320 616e 2041 7272  , returns an Arr
+0000de90: 6179 206f 6620 4761 6d65 4869 6768 5363  ay of GameHighSc
+0000dea0: 6f72 6520 6f62 6a65 6374 732e 0d0a 2020  ore objects...  
+0000deb0: 2020 5468 6973 206d 6574 686f 6420 7769    This method wi
+0000dec0: 6c6c 2063 7572 7265 6e74 6c79 2072 6574  ll currently ret
+0000ded0: 7572 6e20 7363 6f72 6573 2066 6f72 2074  urn scores for t
+0000dee0: 6865 2074 6172 6765 7420 7573 6572 2c20  he target user, 
+0000def0: 706c 7573 2074 776f 206f 6620 6869 7320  plus two of his 
+0000df00: 636c 6f73 6573 7420 6e65 6967 6862 6f72  closest neighbor
+0000df10: 7320 6f6e 2065 6163 6820 7369 6465 2e20  s on each side. 
+0000df20: 5769 6c6c 2061 6c73 6f20 7265 7475 726e  Will also return
+0000df30: 2074 6865 2074 6f70 2074 6872 6565 2075   the top three u
+0000df40: 7365 7273 2069 6620 7468 6520 7573 6572  sers if the user
+0000df50: 2061 6e64 2068 6973 206e 6569 6768 626f   and his neighbo
+0000df60: 7273 2061 7265 206e 6f74 2061 6d6f 6e67  rs are not among
+0000df70: 2074 6865 6d2e 2050 6c65 6173 6520 6e6f   them. Please no
+0000df80: 7465 2074 6861 7420 7468 6973 2062 6568  te that this beh
+0000df90: 6176 696f 7220 6973 2073 7562 6a65 6374  avior is subject
+0000dfa0: 2074 6f20 6368 616e 6765 2e0d 0a20 2020   to change...   
+0000dfb0: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
+0000dfc0: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
+0000dfd0: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
+0000dfe0: 6c6c 2074 6869 7329 0d0a 2020 2020 3a70  ll this)..    :p
+0000dff0: 6172 616d 2075 7365 725f 6964 3a20 5461  aram user_id: Ta
+0000e000: 7267 6574 2075 7365 7220 6964 0d0a 2020  rget user id..  
+0000e010: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
+0000e020: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
+0000e030: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
+0000e040: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
+0000e050: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
+0000e060: 7175 6520 6964 656e 7469 6669 6572 2066  que identifier f
+0000e070: 6f72 2074 6865 2074 6172 6765 7420 6368  or the target ch
+0000e080: 6174 2028 6f72 2075 7365 726e 616d 6520  at (or username 
+0000e090: 6f66 2074 6865 2074 6172 6765 7420 6368  of the target ch
+0000e0a0: 616e 6e65 6c20 696e 2074 6865 2066 6f72  annel in the for
+0000e0b0: 6d61 7420 4063 6861 6e6e 656c 7573 6572  mat @channeluser
+0000e0c0: 6e61 6d65 290d 0a20 2020 203a 7061 7261  name)..    :para
+0000e0d0: 6d20 6d65 7373 6167 655f 6964 3a20 284f  m message_id: (O
+0000e0e0: 7074 696f 6e61 6c2c 2072 6571 7569 7265  ptional, require
+0000e0f0: 6420 6966 2069 6e6c 696e 655f 6d65 7373  d if inline_mess
+0000e100: 6167 655f 6964 2069 7320 6e6f 7420 7370  age_id is not sp
+0000e110: 6563 6966 6965 6429 2055 6e69 7175 6520  ecified) Unique 
+0000e120: 6964 656e 7469 6669 6572 206f 6620 7468  identifier of th
+0000e130: 6520 7365 6e74 206d 6573 7361 6765 0d0a  e sent message..
+0000e140: 2020 2020 3a70 6172 616d 2069 6e6c 696e      :param inlin
+0000e150: 655f 6d65 7373 6167 655f 6964 3a20 284f  e_message_id: (O
+0000e160: 7074 696f 6e61 6c2c 2072 6571 7569 7265  ptional, require
+0000e170: 6420 6966 2063 6861 745f 6964 2061 6e64  d if chat_id and
+0000e180: 206d 6573 7361 6765 5f69 6420 6172 6520   message_id are 
+0000e190: 6e6f 7420 7370 6563 6966 6965 6429 2049  not specified) I
+0000e1a0: 6465 6e74 6966 6965 7220 6f66 2074 6865  dentifier of the
+0000e1b0: 2069 6e6c 696e 6520 6d65 7373 6167 650d   inline message.
+0000e1c0: 0a20 2020 203a 7265 7475 726e 3a0d 0a20  .    :return:.. 
+0000e1d0: 2020 2022 2222 0d0a 2020 2020 6d65 7468     """..    meth
+0000e1e0: 6f64 5f75 726c 203d 2072 2767 6574 4761  od_url = r'getGa
+0000e1f0: 6d65 4869 6768 5363 6f72 6573 270d 0a20  meHighScores'.. 
+0000e200: 2020 2070 6179 6c6f 6164 203d 207b 2775     payload = {'u
+0000e210: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
+0000e220: 7d0d 0a20 2020 2069 6620 6368 6174 5f69  }..    if chat_i
+0000e230: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+0000e240: 6f61 645b 2763 6861 745f 6964 275d 203d  oad['chat_id'] =
+0000e250: 2063 6861 745f 6964 0d0a 2020 2020 6966   chat_id..    if
+0000e260: 206d 6573 7361 6765 5f69 643a 0d0a 2020   message_id:..  
+0000e270: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
+0000e280: 6573 7361 6765 5f69 6427 5d20 3d20 6d65  essage_id'] = me
+0000e290: 7373 6167 655f 6964 0d0a 2020 2020 6966  ssage_id..    if
+0000e2a0: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000e2b0: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000e2c0: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
+0000e2d0: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
+0000e2e0: 6e65 5f6d 6573 7361 6765 5f69 640d 0a20  ne_message_id.. 
+0000e2f0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+0000e300: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+0000e310: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000e320: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000e330: 6164 290d 0a0d 0a0d 0a23 2050 6179 6d65  ad)......# Payme
+0000e340: 6e74 7320 2868 7474 7073 3a2f 2f63 6f72  nts (https://cor
+0000e350: 652e 7465 6c65 6772 616d 2e6f 7267 2f62  e.telegram.org/b
+0000e360: 6f74 732f 6170 6923 7061 796d 656e 7473  ots/api#payments
+0000e370: 290d 0a0d 0a61 7379 6e63 2064 6566 2073  )....async def s
+0000e380: 656e 645f 696e 766f 6963 6528 0d0a 2020  end_invoice(..  
+0000e390: 2020 2020 2020 746f 6b65 6e2c 2063 6861        token, cha
+0000e3a0: 745f 6964 2c20 7469 746c 652c 2064 6573  t_id, title, des
+0000e3b0: 6372 6970 7469 6f6e 2c20 696e 766f 6963  cription, invoic
+0000e3c0: 655f 7061 796c 6f61 642c 2070 726f 7669  e_payload, provi
+0000e3d0: 6465 725f 746f 6b65 6e2c 2063 7572 7265  der_token, curre
+0000e3e0: 6e63 792c 2070 7269 6365 732c 0d0a 2020  ncy, prices,..  
+0000e3f0: 2020 2020 2020 7374 6172 745f 7061 7261        start_para
+0000e400: 6d65 7465 7220 3d20 4e6f 6e65 2c20 7068  meter = None, ph
+0000e410: 6f74 6f5f 7572 6c3d 4e6f 6e65 2c20 7068  oto_url=None, ph
+0000e420: 6f74 6f5f 7369 7a65 3d4e 6f6e 652c 2070  oto_size=None, p
+0000e430: 686f 746f 5f77 6964 7468 3d4e 6f6e 652c  hoto_width=None,
+0000e440: 2070 686f 746f 5f68 6569 6768 743d 4e6f   photo_height=No
+0000e450: 6e65 2c0d 0a20 2020 2020 2020 206e 6565  ne,..        nee
+0000e460: 645f 6e61 6d65 3d4e 6f6e 652c 206e 6565  d_name=None, nee
+0000e470: 645f 7068 6f6e 655f 6e75 6d62 6572 3d4e  d_phone_number=N
+0000e480: 6f6e 652c 206e 6565 645f 656d 6169 6c3d  one, need_email=
+0000e490: 4e6f 6e65 2c20 6e65 6564 5f73 6869 7070  None, need_shipp
+0000e4a0: 696e 675f 6164 6472 6573 733d 4e6f 6e65  ing_address=None
+0000e4b0: 2c0d 0a20 2020 2020 2020 2073 656e 645f  ,..        send_
+0000e4c0: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
+0000e4d0: 7072 6f76 6964 6572 203d 204e 6f6e 652c  provider = None,
+0000e4e0: 2073 656e 645f 656d 6169 6c5f 746f 5f70   send_email_to_p
+0000e4f0: 726f 7669 6465 7220 3d20 4e6f 6e65 2c20  rovider = None, 
+0000e500: 6973 5f66 6c65 7869 626c 653d 4e6f 6e65  is_flexible=None
+0000e510: 2c0d 0a20 2020 2020 2020 2064 6973 6162  ,..        disab
+0000e520: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+0000e530: 4e6f 6e65 2c20 7265 706c 795f 746f 5f6d  None, reply_to_m
+0000e540: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
+0000e550: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+0000e560: 652c 2070 726f 7669 6465 725f 6461 7461  e, provider_data
+0000e570: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+0000e580: 7469 6d65 6f75 743d 4e6f 6e65 2c20 616c  timeout=None, al
+0000e590: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+0000e5a0: 6f75 745f 7265 706c 793d 4e6f 6e65 2c20  out_reply=None, 
+0000e5b0: 6d61 785f 7469 705f 616d 6f75 6e74 3d4e  max_tip_amount=N
+0000e5c0: 6f6e 652c 2073 7567 6765 7374 6564 5f74  one, suggested_t
+0000e5d0: 6970 5f61 6d6f 756e 7473 3d4e 6f6e 652c  ip_amounts=None,
+0000e5e0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+0000e5f0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+0000e600: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+0000e610: 643d 4e6f 6e65 293a 0d0a 2020 2020 2222  d=None):..    ""
+0000e620: 220d 0a20 2020 2055 7365 2074 6869 7320  "..    Use this 
+0000e630: 6d65 7468 6f64 2074 6f20 7365 6e64 2069  method to send i
+0000e640: 6e76 6f69 6365 732e 204f 6e20 7375 6363  nvoices. On succ
+0000e650: 6573 732c 2074 6865 2073 656e 7420 4d65  ess, the sent Me
+0000e660: 7373 6167 6520 6973 2072 6574 7572 6e65  ssage is returne
+0000e670: 642e 0d0a 2020 2020 3a70 6172 616d 2074  d...    :param t
+0000e680: 6f6b 656e 3a20 426f 7427 7320 746f 6b65  oken: Bot's toke
+0000e690: 6e20 2879 6f75 2064 6f6e 2774 206e 6565  n (you don't nee
+0000e6a0: 6420 746f 2066 696c 6c20 7468 6973 290d  d to fill this).
+0000e6b0: 0a20 2020 203a 7061 7261 6d20 6368 6174  .    :param chat
+0000e6c0: 5f69 643a 2055 6e69 7175 6520 6964 656e  _id: Unique iden
+0000e6d0: 7469 6669 6572 2066 6f72 2074 6865 2074  tifier for the t
+0000e6e0: 6172 6765 7420 7072 6976 6174 6520 6368  arget private ch
+0000e6f0: 6174 0d0a 2020 2020 3a70 6172 616d 2074  at..    :param t
+0000e700: 6974 6c65 3a20 5072 6f64 7563 7420 6e61  itle: Product na
+0000e710: 6d65 0d0a 2020 2020 3a70 6172 616d 2064  me..    :param d
+0000e720: 6573 6372 6970 7469 6f6e 3a20 5072 6f64  escription: Prod
+0000e730: 7563 7420 6465 7363 7269 7074 696f 6e0d  uct description.
+0000e740: 0a20 2020 203a 7061 7261 6d20 696e 766f  .    :param invo
+0000e750: 6963 655f 7061 796c 6f61 643a 2042 6f74  ice_payload: Bot
+0000e760: 2d64 6566 696e 6564 2069 6e76 6f69 6365  -defined invoice
+0000e770: 2070 6179 6c6f 6164 2c20 312d 3132 3820   payload, 1-128 
+0000e780: 6279 7465 732e 2054 6869 7320 7769 6c6c  bytes. This will
+0000e790: 206e 6f74 2062 6520 6469 7370 6c61 7965   not be displaye
+0000e7a0: 6420 746f 2074 6865 2075 7365 722c 2075  d to the user, u
+0000e7b0: 7365 2066 6f72 2079 6f75 7220 696e 7465  se for your inte
+0000e7c0: 726e 616c 2070 726f 6365 7373 6573 2e0d  rnal processes..
+0000e7d0: 0a20 2020 203a 7061 7261 6d20 7072 6f76  .    :param prov
+0000e7e0: 6964 6572 5f74 6f6b 656e 3a20 5061 796d  ider_token: Paym
+0000e7f0: 656e 7473 2070 726f 7669 6465 7220 746f  ents provider to
+0000e800: 6b65 6e2c 206f 6274 6169 6e65 6420 7669  ken, obtained vi
+0000e810: 6120 4042 6f74 6661 7468 6572 0d0a 2020  a @Botfather..  
+0000e820: 2020 3a70 6172 616d 2063 7572 7265 6e63    :param currenc
+0000e830: 793a 2054 6872 6565 2d6c 6574 7465 7220  y: Three-letter 
+0000e840: 4953 4f20 3432 3137 2063 7572 7265 6e63  ISO 4217 currenc
+0000e850: 7920 636f 6465 2c20 7365 6520 6874 7470  y code, see http
+0000e860: 733a 2f2f 636f 7265 2e74 656c 6567 7261  s://core.telegra
+0000e870: 6d2e 6f72 672f 626f 7473 2f70 6179 6d65  m.org/bots/payme
+0000e880: 6e74 7323 7375 7070 6f72 7465 642d 6375  nts#supported-cu
+0000e890: 7272 656e 6369 6573 0d0a 2020 2020 3a70  rrencies..    :p
+0000e8a0: 6172 616d 2070 7269 6365 733a 2050 7269  aram prices: Pri
+0000e8b0: 6365 2062 7265 616b 646f 776e 2c20 6120  ce breakdown, a 
+0000e8c0: 6c69 7374 206f 6620 636f 6d70 6f6e 656e  list of componen
+0000e8d0: 7473 2028 652e 672e 2070 726f 6475 6374  ts (e.g. product
+0000e8e0: 2070 7269 6365 2c20 7461 782c 2064 6973   price, tax, dis
+0000e8f0: 636f 756e 742c 2064 656c 6976 6572 7920  count, delivery 
+0000e900: 636f 7374 2c20 6465 6c69 7665 7279 2074  cost, delivery t
+0000e910: 6178 2c20 626f 6e75 732c 2065 7463 2e29  ax, bonus, etc.)
+0000e920: 0d0a 2020 2020 3a70 6172 616d 2073 7461  ..    :param sta
+0000e930: 7274 5f70 6172 616d 6574 6572 3a20 556e  rt_parameter: Un
+0000e940: 6971 7565 2064 6565 702d 6c69 6e6b 696e  ique deep-linkin
+0000e950: 6720 7061 7261 6d65 7465 7220 7468 6174  g parameter that
+0000e960: 2063 616e 2062 6520 7573 6564 2074 6f20   can be used to 
+0000e970: 6765 6e65 7261 7465 2074 6869 7320 696e  generate this in
+0000e980: 766f 6963 6520 7768 656e 2075 7365 6420  voice when used 
+0000e990: 6173 2061 2073 7461 7274 2070 6172 616d  as a start param
+0000e9a0: 6574 6572 0d0a 2020 2020 3a70 6172 616d  eter..    :param
+0000e9b0: 2070 686f 746f 5f75 726c 3a20 5552 4c20   photo_url: URL 
+0000e9c0: 6f66 2074 6865 2070 726f 6475 6374 2070  of the product p
+0000e9d0: 686f 746f 2066 6f72 2074 6865 2069 6e76  hoto for the inv
+0000e9e0: 6f69 6365 2e20 4361 6e20 6265 2061 2070  oice. Can be a p
+0000e9f0: 686f 746f 206f 6620 7468 6520 676f 6f64  hoto of the good
+0000ea00: 7320 6f72 2061 206d 6172 6b65 7469 6e67  s or a marketing
+0000ea10: 2069 6d61 6765 2066 6f72 2061 2073 6572   image for a ser
+0000ea20: 7669 6365 2e20 5065 6f70 6c65 206c 696b  vice. People lik
+0000ea30: 6520 6974 2062 6574 7465 7220 7768 656e  e it better when
+0000ea40: 2074 6865 7920 7365 6520 7768 6174 2074   they see what t
+0000ea50: 6865 7920 6172 6520 7061 7969 6e67 2066  hey are paying f
+0000ea60: 6f72 2e0d 0a20 2020 203a 7061 7261 6d20  or...    :param 
+0000ea70: 7068 6f74 6f5f 7369 7a65 3a20 5068 6f74  photo_size: Phot
+0000ea80: 6f20 7369 7a65 0d0a 2020 2020 3a70 6172  o size..    :par
+0000ea90: 616d 2070 686f 746f 5f77 6964 7468 3a20  am photo_width: 
+0000eaa0: 5068 6f74 6f20 7769 6474 680d 0a20 2020  Photo width..   
+0000eab0: 203a 7061 7261 6d20 7068 6f74 6f5f 6865   :param photo_he
+0000eac0: 6967 6874 3a20 5068 6f74 6f20 6865 6967  ight: Photo heig
+0000ead0: 6874 0d0a 2020 2020 3a70 6172 616d 206e  ht..    :param n
+0000eae0: 6565 645f 6e61 6d65 3a20 5061 7373 2054  eed_name: Pass T
+0000eaf0: 7275 652c 2069 6620 796f 7520 7265 7175  rue, if you requ
+0000eb00: 6972 6520 7468 6520 7573 6572 2773 2066  ire the user's f
+0000eb10: 756c 6c20 6e61 6d65 2074 6f20 636f 6d70  ull name to comp
+0000eb20: 6c65 7465 2074 6865 206f 7264 6572 0d0a  lete the order..
+0000eb30: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
+0000eb40: 7068 6f6e 655f 6e75 6d62 6572 3a20 5061  phone_number: Pa
+0000eb50: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
+0000eb60: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
+0000eb70: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
+0000eb80: 746f 2063 6f6d 706c 6574 6520 7468 6520  to complete the 
+0000eb90: 6f72 6465 720d 0a20 2020 203a 7061 7261  order..    :para
+0000eba0: 6d20 6e65 6564 5f65 6d61 696c 3a20 5061  m need_email: Pa
+0000ebb0: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
+0000ebc0: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
+0000ebd0: 2773 2065 6d61 696c 2074 6f20 636f 6d70  's email to comp
+0000ebe0: 6c65 7465 2074 6865 206f 7264 6572 0d0a  lete the order..
+0000ebf0: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
+0000ec00: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
+0000ec10: 3a20 5061 7373 2054 7275 652c 2069 6620  : Pass True, if 
+0000ec20: 796f 7520 7265 7175 6972 6520 7468 6520  you require the 
+0000ec30: 7573 6572 2773 2073 6869 7070 696e 6720  user's shipping 
+0000ec40: 6164 6472 6573 7320 746f 2063 6f6d 706c  address to compl
+0000ec50: 6574 6520 7468 6520 6f72 6465 720d 0a20  ete the order.. 
+0000ec60: 2020 203a 7061 7261 6d20 6973 5f66 6c65     :param is_fle
+0000ec70: 7869 626c 653a 2050 6173 7320 5472 7565  xible: Pass True
+0000ec80: 2c20 6966 2074 6865 2066 696e 616c 2070  , if the final p
+0000ec90: 7269 6365 2064 6570 656e 6473 206f 6e20  rice depends on 
+0000eca0: 7468 6520 7368 6970 7069 6e67 206d 6574  the shipping met
+0000ecb0: 686f 640d 0a20 2020 203a 7061 7261 6d20  hod..    :param 
+0000ecc0: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
+0000ecd0: 725f 746f 5f70 726f 7669 6465 723a 2050  r_to_provider: P
+0000ece0: 6173 7320 5472 7565 2c20 6966 2075 7365  ass True, if use
+0000ecf0: 7227 7320 7068 6f6e 6520 6e75 6d62 6572  r's phone number
+0000ed00: 2073 686f 756c 6420 6265 2073 656e 7420   should be sent 
+0000ed10: 746f 2070 726f 7669 6465 720d 0a20 2020  to provider..   
+0000ed20: 203a 7061 7261 6d20 7365 6e64 5f65 6d61   :param send_ema
+0000ed30: 696c 5f74 6f5f 7072 6f76 6964 6572 3a20  il_to_provider: 
+0000ed40: 5061 7373 2054 7275 652c 2069 6620 7573  Pass True, if us
+0000ed50: 6572 2773 2065 6d61 696c 2061 6464 7265  er's email addre
+0000ed60: 7373 2073 686f 756c 6420 6265 2073 656e  ss should be sen
+0000ed70: 7420 746f 2070 726f 7669 6465 720d 0a20  t to provider.. 
+0000ed80: 2020 203a 7061 7261 6d20 6469 7361 626c     :param disabl
+0000ed90: 655f 6e6f 7469 6669 6361 7469 6f6e 3a20  e_notification: 
+0000eda0: 5365 6e64 7320 7468 6520 6d65 7373 6167  Sends the messag
+0000edb0: 6520 7369 6c65 6e74 6c79 2e20 5573 6572  e silently. User
+0000edc0: 7320 7769 6c6c 2072 6563 6569 7665 2061  s will receive a
+0000edd0: 206e 6f74 6966 6963 6174 696f 6e20 7769   notification wi
+0000ede0: 7468 206e 6f20 736f 756e 642e 0d0a 2020  th no sound...  
+0000edf0: 2020 3a70 6172 616d 2072 6570 6c79 5f74    :param reply_t
+0000ee00: 6f5f 6d65 7373 6167 655f 6964 3a20 4966  o_message_id: If
+0000ee10: 2074 6865 206d 6573 7361 6765 2069 7320   the message is 
+0000ee20: 6120 7265 706c 792c 2049 4420 6f66 2074  a reply, ID of t
+0000ee30: 6865 206f 7269 6769 6e61 6c20 6d65 7373  he original mess
+0000ee40: 6167 650d 0a20 2020 203a 7061 7261 6d20  age..    :param 
+0000ee50: 7265 706c 795f 6d61 726b 7570 3a20 4120  reply_markup: A 
+0000ee60: 4a53 4f4e 2d73 6572 6961 6c69 7a65 6420  JSON-serialized 
+0000ee70: 6f62 6a65 6374 2066 6f72 2061 6e20 696e  object for an in
+0000ee80: 6c69 6e65 206b 6579 626f 6172 642e 2049  line keyboard. I
+0000ee90: 6620 656d 7074 792c 206f 6e65 2027 5061  f empty, one 'Pa
+0000eea0: 7920 746f 7461 6c20 7072 6963 6527 2062  y total price' b
+0000eeb0: 7574 746f 6e20 7769 6c6c 2062 6520 7368  utton will be sh
+0000eec0: 6f77 6e2e 2049 6620 6e6f 7420 656d 7074  own. If not empt
+0000eed0: 792c 2074 6865 2066 6972 7374 2062 7574  y, the first but
+0000eee0: 746f 6e20 6d75 7374 2062 6520 6120 5061  ton must be a Pa
+0000eef0: 7920 6275 7474 6f6e 0d0a 2020 2020 3a70  y button..    :p
+0000ef00: 6172 616d 2070 726f 7669 6465 725f 6461  aram provider_da
+0000ef10: 7461 3a20 4120 4a53 4f4e 2d73 6572 6961  ta: A JSON-seria
+0000ef20: 6c69 7a65 6420 6461 7461 2061 626f 7574  lized data about
+0000ef30: 2074 6865 2069 6e76 6f69 6365 2c20 7768   the invoice, wh
+0000ef40: 6963 6820 7769 6c6c 2062 6520 7368 6172  ich will be shar
+0000ef50: 6564 2077 6974 6820 7468 6520 7061 796d  ed with the paym
+0000ef60: 656e 7420 7072 6f76 6964 6572 2e20 4120  ent provider. A 
+0000ef70: 6465 7461 696c 6564 2064 6573 6372 6970  detailed descrip
+0000ef80: 7469 6f6e 206f 6620 7265 7175 6972 6564  tion of required
+0000ef90: 2066 6965 6c64 7320 7368 6f75 6c64 2062   fields should b
+0000efa0: 6520 7072 6f76 6964 6564 2062 7920 7468  e provided by th
+0000efb0: 6520 7061 796d 656e 7420 7072 6f76 6964  e payment provid
+0000efc0: 6572 2e0d 0a20 2020 203a 7061 7261 6d20  er...    :param 
+0000efd0: 7469 6d65 6f75 743a 0d0a 2020 2020 3a70  timeout:..    :p
+0000efe0: 6172 616d 2061 6c6c 6f77 5f73 656e 6469  aram allow_sendi
+0000eff0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+0000f000: 3a0d 0a20 2020 203a 7061 7261 6d20 6d61  :..    :param ma
+0000f010: 785f 7469 705f 616d 6f75 6e74 3a20 5468  x_tip_amount: Th
+0000f020: 6520 6d61 7869 6d75 6d20 6163 6365 7074  e maximum accept
+0000f030: 6564 2061 6d6f 756e 7420 666f 7220 7469  ed amount for ti
+0000f040: 7073 2069 6e20 7468 6520 736d 616c 6c65  ps in the smalle
+0000f050: 7374 2075 6e69 7473 206f 6620 7468 6520  st units of the 
+0000f060: 6375 7272 656e 6379 0d0a 2020 2020 3a70  currency..    :p
+0000f070: 6172 616d 2073 7567 6765 7374 6564 5f74  aram suggested_t
+0000f080: 6970 5f61 6d6f 756e 7473 3a20 4120 4a53  ip_amounts: A JS
+0000f090: 4f4e 2d73 6572 6961 6c69 7a65 6420 6172  ON-serialized ar
+0000f0a0: 7261 7920 6f66 2073 7567 6765 7374 6564  ray of suggested
+0000f0b0: 2061 6d6f 756e 7473 206f 6620 7469 7073   amounts of tips
+0000f0c0: 2069 6e20 7468 6520 736d 616c 6c65 7374   in the smallest
+0000f0d0: 2075 6e69 7473 206f 6620 7468 6520 6375   units of the cu
+0000f0e0: 7272 656e 6379 2e0d 0a20 2020 2020 2020  rrency...       
+0000f0f0: 2041 7420 6d6f 7374 2034 2073 7567 6765   At most 4 sugge
+0000f100: 7374 6564 2074 6970 2061 6d6f 756e 7473  sted tip amounts
+0000f110: 2063 616e 2062 6520 7370 6563 6966 6965   can be specifie
+0000f120: 642e 2054 6865 2073 7567 6765 7374 6564  d. The suggested
+0000f130: 2074 6970 2061 6d6f 756e 7473 206d 7573   tip amounts mus
+0000f140: 7420 6265 2070 6f73 6974 6976 652c 2070  t be positive, p
+0000f150: 6173 7365 6420 696e 2061 2073 7472 6963  assed in a stric
+0000f160: 746c 7920 696e 6372 6561 7365 6420 6f72  tly increased or
+0000f170: 6465 7220 616e 6420 6d75 7374 206e 6f74  der and must not
+0000f180: 2065 7863 6565 6420 6d61 785f 7469 705f   exceed max_tip_
+0000f190: 616d 6f75 6e74 2e0d 0a20 2020 203a 7061  amount...    :pa
+0000f1a0: 7261 6d20 7072 6f74 6563 745f 636f 6e74  ram protect_cont
+0000f1b0: 656e 743a 0d0a 2020 2020 3a72 6574 7572  ent:..    :retur
+0000f1c0: 6e3a 0d0a 2020 2020 2222 220d 0a20 2020  n:..    """..   
+0000f1d0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+0000f1e0: 7365 6e64 496e 766f 6963 6527 0d0a 2020  sendInvoice'..  
+0000f1f0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+0000f200: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+0000f210: 2027 7469 746c 6527 3a20 7469 746c 652c   'title': title,
+0000f220: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
+0000f230: 6465 7363 7269 7074 696f 6e2c 2027 7061  description, 'pa
+0000f240: 796c 6f61 6427 3a20 696e 766f 6963 655f  yload': invoice_
+0000f250: 7061 796c 6f61 642c 0d0a 2020 2020 2020  payload,..      
+0000f260: 2020 2020 2020 2020 2027 7072 6f76 6964           'provid
+0000f270: 6572 5f74 6f6b 656e 273a 2070 726f 7669  er_token': provi
+0000f280: 6465 725f 746f 6b65 6e2c 2027 6375 7272  der_token, 'curr
+0000f290: 656e 6379 273a 2063 7572 7265 6e63 792c  ency': currency,
+0000f2a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000f2b0: 2027 7072 6963 6573 273a 2061 7761 6974   'prices': await
+0000f2c0: 205f 636f 6e76 6572 745f 6c69 7374 5f6a   _convert_list_j
+0000f2d0: 736f 6e5f 7365 7269 616c 697a 6162 6c65  son_serializable
+0000f2e0: 2870 7269 6365 7329 7d0d 0a20 2020 2069  (prices)}..    i
+0000f2f0: 6620 7374 6172 745f 7061 7261 6d65 7465  f start_paramete
+0000f300: 723a 0d0a 2020 2020 2020 2020 7061 796c  r:..        payl
+0000f310: 6f61 645b 2773 7461 7274 5f70 6172 616d  oad['start_param
+0000f320: 6574 6572 275d 203d 2073 7461 7274 5f70  eter'] = start_p
+0000f330: 6172 616d 6574 6572 0d0a 2020 2020 6966  arameter..    if
+0000f340: 2070 686f 746f 5f75 726c 3a0d 0a20 2020   photo_url:..   
+0000f350: 2020 2020 2070 6179 6c6f 6164 5b27 7068       payload['ph
+0000f360: 6f74 6f5f 7572 6c27 5d20 3d20 7068 6f74  oto_url'] = phot
+0000f370: 6f5f 7572 6c0d 0a20 2020 2069 6620 7068  o_url..    if ph
+0000f380: 6f74 6f5f 7369 7a65 3a0d 0a20 2020 2020  oto_size:..     
+0000f390: 2020 2070 6179 6c6f 6164 5b27 7068 6f74     payload['phot
+0000f3a0: 6f5f 7369 7a65 275d 203d 2070 686f 746f  o_size'] = photo
+0000f3b0: 5f73 697a 650d 0a20 2020 2069 6620 7068  _size..    if ph
+0000f3c0: 6f74 6f5f 7769 6474 683a 0d0a 2020 2020  oto_width:..    
+0000f3d0: 2020 2020 7061 796c 6f61 645b 2770 686f      payload['pho
+0000f3e0: 746f 5f77 6964 7468 275d 203d 2070 686f  to_width'] = pho
+0000f3f0: 746f 5f77 6964 7468 0d0a 2020 2020 6966  to_width..    if
+0000f400: 2070 686f 746f 5f68 6569 6768 743a 0d0a   photo_height:..
+0000f410: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000f420: 2770 686f 746f 5f68 6569 6768 7427 5d20  'photo_height'] 
+0000f430: 3d20 7068 6f74 6f5f 6865 6967 6874 0d0a  = photo_height..
+0000f440: 2020 2020 6966 206e 6565 645f 6e61 6d65      if need_name
+0000f450: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000f460: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000f470: 6e65 6564 5f6e 616d 6527 5d20 3d20 6e65  need_name'] = ne
+0000f480: 6564 5f6e 616d 650d 0a20 2020 2069 6620  ed_name..    if 
+0000f490: 6e65 6564 5f70 686f 6e65 5f6e 756d 6265  need_phone_numbe
+0000f4a0: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+0000f4b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000f4c0: 276e 6565 645f 7068 6f6e 655f 6e75 6d62  'need_phone_numb
+0000f4d0: 6572 275d 203d 206e 6565 645f 7068 6f6e  er'] = need_phon
+0000f4e0: 655f 6e75 6d62 6572 0d0a 2020 2020 6966  e_number..    if
+0000f4f0: 206e 6565 645f 656d 6169 6c20 6973 206e   need_email is n
+0000f500: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0000f510: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
+0000f520: 656d 6169 6c27 5d20 3d20 6e65 6564 5f65  email'] = need_e
+0000f530: 6d61 696c 0d0a 2020 2020 6966 206e 6565  mail..    if nee
+0000f540: 645f 7368 6970 7069 6e67 5f61 6464 7265  d_shipping_addre
+0000f550: 7373 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ss is not None:.
+0000f560: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000f570: 5b27 6e65 6564 5f73 6869 7070 696e 675f  ['need_shipping_
+0000f580: 6164 6472 6573 7327 5d20 3d20 6e65 6564  address'] = need
+0000f590: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+0000f5a0: 730d 0a20 2020 2069 6620 7365 6e64 5f70  s..    if send_p
+0000f5b0: 686f 6e65 5f6e 756d 6265 725f 746f 5f70  hone_number_to_p
+0000f5c0: 726f 7669 6465 7220 6973 206e 6f74 204e  rovider is not N
+0000f5d0: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+0000f5e0: 796c 6f61 645b 2773 656e 645f 7068 6f6e  yload['send_phon
+0000f5f0: 655f 6e75 6d62 6572 5f74 6f5f 7072 6f76  e_number_to_prov
+0000f600: 6964 6572 275d 203d 2073 656e 645f 7068  ider'] = send_ph
+0000f610: 6f6e 655f 6e75 6d62 6572 5f74 6f5f 7072  one_number_to_pr
+0000f620: 6f76 6964 6572 0d0a 2020 2020 6966 2073  ovider..    if s
+0000f630: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
+0000f640: 7669 6465 7220 6973 206e 6f74 204e 6f6e  vider is not Non
+0000f650: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000f660: 6f61 645b 2773 656e 645f 656d 6169 6c5f  oad['send_email_
+0000f670: 746f 5f70 726f 7669 6465 7227 5d20 3d20  to_provider'] = 
+0000f680: 7365 6e64 5f65 6d61 696c 5f74 6f5f 7072  send_email_to_pr
+0000f690: 6f76 6964 6572 0d0a 2020 2020 6966 2069  ovider..    if i
+0000f6a0: 735f 666c 6578 6962 6c65 2069 7320 6e6f  s_flexible is no
+0000f6b0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0000f6c0: 2070 6179 6c6f 6164 5b27 6973 5f66 6c65   payload['is_fle
+0000f6d0: 7869 626c 6527 5d20 3d20 6973 5f66 6c65  xible'] = is_fle
+0000f6e0: 7869 626c 650d 0a20 2020 2069 6620 6469  xible..    if di
+0000f6f0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+0000f700: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  on is not None:.
+0000f710: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000f720: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
+0000f730: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
+0000f740: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0d  le_notification.
+0000f750: 0a20 2020 2069 6620 7265 706c 795f 746f  .    if reply_to
+0000f760: 5f6d 6573 7361 6765 5f69 643a 0d0a 2020  _message_id:..  
+0000f770: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+0000f780: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+0000f790: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
+0000f7a0: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+0000f7b0: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+0000f7c0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000f7d0: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
+0000f7e0: 5d20 3d20 6177 6169 7420 5f63 6f6e 7665  ] = await _conve
+0000f7f0: 7274 5f6d 6172 6b75 7028 7265 706c 795f  rt_markup(reply_
+0000f800: 6d61 726b 7570 290d 0a20 2020 2069 6620  markup)..    if 
+0000f810: 7072 6f76 6964 6572 5f64 6174 613a 0d0a  provider_data:..
+0000f820: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000f830: 2770 726f 7669 6465 725f 6461 7461 275d  'provider_data']
+0000f840: 203d 2070 726f 7669 6465 725f 6461 7461   = provider_data
+0000f850: 0d0a 2020 2020 6966 2074 696d 656f 7574  ..    if timeout
+0000f860: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000f870: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
+0000f880: 7469 6d65 6f75 740d 0a20 2020 2069 6620  timeout..    if 
+0000f890: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
+0000f8a0: 7468 6f75 745f 7265 706c 7920 6973 206e  thout_reply is n
+0000f8b0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+0000f8c0: 2020 7061 796c 6f61 645b 2761 6c6c 6f77    payload['allow
+0000f8d0: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+0000f8e0: 5f72 6570 6c79 275d 203d 2061 6c6c 6f77  _reply'] = allow
+0000f8f0: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+0000f900: 5f72 6570 6c79 0d0a 2020 2020 6966 206d  _reply..    if m
+0000f910: 6178 5f74 6970 5f61 6d6f 756e 7420 6973  ax_tip_amount is
+0000f920: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0000f930: 2020 2020 7061 796c 6f61 645b 276d 6178      payload['max
+0000f940: 5f74 6970 5f61 6d6f 756e 7427 5d20 3d20  _tip_amount'] = 
+0000f950: 6d61 785f 7469 705f 616d 6f75 6e74 0d0a  max_tip_amount..
+0000f960: 2020 2020 6966 2073 7567 6765 7374 6564      if suggested
+0000f970: 5f74 6970 5f61 6d6f 756e 7473 2069 7320  _tip_amounts is 
+0000f980: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000f990: 2020 2070 6179 6c6f 6164 5b27 7375 6767     payload['sugg
+0000f9a0: 6573 7465 645f 7469 705f 616d 6f75 6e74  ested_tip_amount
+0000f9b0: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
+0000f9c0: 2873 7567 6765 7374 6564 5f74 6970 5f61  (suggested_tip_a
+0000f9d0: 6d6f 756e 7473 290d 0a20 2020 2069 6620  mounts)..    if 
+0000f9e0: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
+0000f9f0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0000fa00: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+0000fa10: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
+0000fa20: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
+0000fa30: 6e74 0d0a 2020 2020 6966 206d 6573 7361  nt..    if messa
+0000fa40: 6765 5f74 6872 6561 645f 6964 3a0d 0a20  ge_thread_id:.. 
+0000fa50: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000fa60: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+0000fa70: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
+0000fa80: 7265 6164 5f69 640d 0a20 2020 2072 6574  read_id..    ret
+0000fa90: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+0000faa0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+0000fab0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000fac0: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+0000fad0: 0a0d 0a61 7379 6e63 2064 6566 2061 6e73  ...async def ans
+0000fae0: 7765 725f 7368 6970 7069 6e67 5f71 7565  wer_shipping_que
+0000faf0: 7279 2874 6f6b 656e 2c20 7368 6970 7069  ry(token, shippi
+0000fb00: 6e67 5f71 7565 7279 5f69 642c 206f 6b2c  ng_query_id, ok,
+0000fb10: 2073 6869 7070 696e 675f 6f70 7469 6f6e   shipping_option
+0000fb20: 733d 4e6f 6e65 2c20 6572 726f 725f 6d65  s=None, error_me
+0000fb30: 7373 6167 653d 4e6f 6e65 293a 0d0a 2020  ssage=None):..  
+0000fb40: 2020 2222 220d 0a20 2020 2049 6620 796f    """..    If yo
+0000fb50: 7520 7365 6e74 2061 6e20 696e 766f 6963  u sent an invoic
+0000fb60: 6520 7265 7175 6573 7469 6e67 2061 2073  e requesting a s
+0000fb70: 6869 7070 696e 6720 6164 6472 6573 7320  hipping address 
+0000fb80: 616e 6420 7468 6520 7061 7261 6d65 7465  and the paramete
+0000fb90: 7220 6973 5f66 6c65 7869 626c 6520 7761  r is_flexible wa
+0000fba0: 7320 7370 6563 6966 6965 642c 2074 6865  s specified, the
+0000fbb0: 2042 6f74 2041 5049 2077 696c 6c20 7365   Bot API will se
+0000fbc0: 6e64 2061 6e20 5570 6461 7465 2077 6974  nd an Update wit
+0000fbd0: 6820 6120 7368 6970 7069 6e67 5f71 7565  h a shipping_que
+0000fbe0: 7279 2066 6965 6c64 2074 6f20 7468 6520  ry field to the 
+0000fbf0: 626f 742e 2055 7365 2074 6869 7320 6d65  bot. Use this me
+0000fc00: 7468 6f64 2074 6f20 7265 706c 7920 746f  thod to reply to
+0000fc10: 2073 6869 7070 696e 6720 7175 6572 6965   shipping querie
+0000fc20: 732e 204f 6e20 7375 6363 6573 732c 2054  s. On success, T
+0000fc30: 7275 6520 6973 2072 6574 7572 6e65 642e  rue is returned.
+0000fc40: 0d0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
+0000fc50: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
+0000fc60: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
+0000fc70: 746f 2066 696c 6c20 7468 6973 290d 0a20  to fill this).. 
+0000fc80: 2020 203a 7061 7261 6d20 7368 6970 7069     :param shippi
+0000fc90: 6e67 5f71 7565 7279 5f69 643a 2055 6e69  ng_query_id: Uni
+0000fca0: 7175 6520 6964 656e 7469 6669 6572 2066  que identifier f
+0000fcb0: 6f72 2074 6865 2071 7565 7279 2074 6f20  or the query to 
+0000fcc0: 6265 2061 6e73 7765 7265 640d 0a20 2020  be answered..   
+0000fcd0: 203a 7061 7261 6d20 6f6b 3a20 5370 6563   :param ok: Spec
+0000fce0: 6966 7920 5472 7565 2069 6620 6465 6c69  ify True if deli
+0000fcf0: 7665 7279 2074 6f20 7468 6520 7370 6563  very to the spec
+0000fd00: 6966 6965 6420 6164 6472 6573 7320 6973  ified address is
+0000fd10: 2070 6f73 7369 626c 6520 616e 6420 4661   possible and Fa
+0000fd20: 6c73 6520 6966 2074 6865 7265 2061 7265  lse if there are
+0000fd30: 2061 6e79 2070 726f 626c 656d 7320 2866   any problems (f
+0000fd40: 6f72 2065 7861 6d70 6c65 2c20 6966 2064  or example, if d
+0000fd50: 656c 6976 6572 7920 746f 2074 6865 2073  elivery to the s
+0000fd60: 7065 6369 6669 6564 2061 6464 7265 7373  pecified address
+0000fd70: 2069 7320 6e6f 7420 706f 7373 6962 6c65   is not possible
+0000fd80: 290d 0a20 2020 203a 7061 7261 6d20 7368  )..    :param sh
+0000fd90: 6970 7069 6e67 5f6f 7074 696f 6e73 3a20  ipping_options: 
+0000fda0: 5265 7175 6972 6564 2069 6620 6f6b 2069  Required if ok i
+0000fdb0: 7320 5472 7565 2e20 4120 4a53 4f4e 2d73  s True. A JSON-s
+0000fdc0: 6572 6961 6c69 7a65 6420 6172 7261 7920  erialized array 
+0000fdd0: 6f66 2061 7661 696c 6162 6c65 2073 6869  of available shi
+0000fde0: 7070 696e 6720 6f70 7469 6f6e 732e 0d0a  pping options...
+0000fdf0: 2020 2020 3a70 6172 616d 2065 7272 6f72      :param error
+0000fe00: 5f6d 6573 7361 6765 3a20 5265 7175 6972  _message: Requir
+0000fe10: 6564 2069 6620 6f6b 2069 7320 4661 6c73  ed if ok is Fals
+0000fe20: 652e 2045 7272 6f72 206d 6573 7361 6765  e. Error message
+0000fe30: 2069 6e20 6875 6d61 6e20 7265 6164 6162   in human readab
+0000fe40: 6c65 2066 6f72 6d20 7468 6174 2065 7870  le form that exp
+0000fe50: 6c61 696e 7320 7768 7920 6974 2069 7320  lains why it is 
+0000fe60: 696d 706f 7373 6962 6c65 2074 6f20 636f  impossible to co
+0000fe70: 6d70 6c65 7465 2074 6865 206f 7264 6572  mplete the order
+0000fe80: 2028 652e 672e 2022 536f 7272 792c 2064   (e.g. "Sorry, d
+0000fe90: 656c 6976 6572 7920 746f 2079 6f75 7220  elivery to your 
+0000fea0: 6465 7369 7265 6420 6164 6472 6573 7320  desired address 
+0000feb0: 6973 2075 6e61 7661 696c 6162 6c65 2729  is unavailable')
+0000fec0: 2e20 5465 6c65 6772 616d 2077 696c 6c20  . Telegram will 
+0000fed0: 6469 7370 6c61 7920 7468 6973 206d 6573  display this mes
+0000fee0: 7361 6765 2074 6f20 7468 6520 7573 6572  sage to the user
+0000fef0: 2e0d 0a20 2020 203a 7265 7475 726e 3a0d  ...    :return:.
+0000ff00: 0a20 2020 2022 2222 0d0a 2020 2020 6d65  .    """..    me
+0000ff10: 7468 6f64 5f75 726c 203d 2027 616e 7377  thod_url = 'answ
+0000ff20: 6572 5368 6970 7069 6e67 5175 6572 7927  erShippingQuery'
+0000ff30: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000ff40: 7b27 7368 6970 7069 6e67 5f71 7565 7279  {'shipping_query
+0000ff50: 5f69 6427 3a20 7368 6970 7069 6e67 5f71  _id': shipping_q
+0000ff60: 7565 7279 5f69 642c 2027 6f6b 273a 206f  uery_id, 'ok': o
+0000ff70: 6b7d 0d0a 2020 2020 6966 2073 6869 7070  k}..    if shipp
+0000ff80: 696e 675f 6f70 7469 6f6e 733a 0d0a 2020  ing_options:..  
+0000ff90: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
+0000ffa0: 6869 7070 696e 675f 6f70 7469 6f6e 7327  hipping_options'
+0000ffb0: 5d20 3d20 6177 6169 7420 5f63 6f6e 7665  ] = await _conve
+0000ffc0: 7274 5f6c 6973 745f 6a73 6f6e 5f73 6572  rt_list_json_ser
+0000ffd0: 6961 6c69 7a61 626c 6528 7368 6970 7069  ializable(shippi
+0000ffe0: 6e67 5f6f 7074 696f 6e73 290d 0a20 2020  ng_options)..   
+0000fff0: 2069 6620 6572 726f 725f 6d65 7373 6167   if error_messag
+00010000: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00010010: 6f61 645b 2765 7272 6f72 5f6d 6573 7361  oad['error_messa
+00010020: 6765 275d 203d 2065 7272 6f72 5f6d 6573  ge'] = error_mes
+00010030: 7361 6765 0d0a 2020 2020 7265 7475 726e  sage..    return
+00010040: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
+00010050: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00010060: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00010070: 733d 7061 796c 6f61 6429 0d0a 0d0a 0d0a  s=payload)......
+00010080: 6173 796e 6320 6465 6620 616e 7377 6572  async def answer
+00010090: 5f70 7265 5f63 6865 636b 6f75 745f 7175  _pre_checkout_qu
+000100a0: 6572 7928 746f 6b65 6e2c 2070 7265 5f63  ery(token, pre_c
+000100b0: 6865 636b 6f75 745f 7175 6572 795f 6964  heckout_query_id
+000100c0: 2c20 6f6b 2c20 6572 726f 725f 6d65 7373  , ok, error_mess
+000100d0: 6167 653d 4e6f 6e65 293a 0d0a 2020 2020  age=None):..    
+000100e0: 2222 220d 0a20 2020 204f 6e63 6520 7468  """..    Once th
+000100f0: 6520 7573 6572 2068 6173 2063 6f6e 6669  e user has confi
+00010100: 726d 6564 2074 6865 6972 2070 6179 6d65  rmed their payme
+00010110: 6e74 2061 6e64 2073 6869 7070 696e 6720  nt and shipping 
+00010120: 6465 7461 696c 732c 2074 6865 2042 6f74  details, the Bot
+00010130: 2041 5049 2073 656e 6473 2074 6865 2066   API sends the f
+00010140: 696e 616c 2063 6f6e 6669 726d 6174 696f  inal confirmatio
+00010150: 6e20 696e 2074 6865 2066 6f72 6d20 6f66  n in the form of
+00010160: 2061 6e20 5570 6461 7465 2077 6974 6820   an Update with 
+00010170: 7468 6520 6669 656c 6420 7072 655f 6368  the field pre_ch
+00010180: 6563 6b6f 7574 5f71 7565 7279 2e20 5573  eckout_query. Us
+00010190: 6520 7468 6973 206d 6574 686f 6420 746f  e this method to
+000101a0: 2072 6573 706f 6e64 2074 6f20 7375 6368   respond to such
+000101b0: 2070 7265 2d63 6865 636b 6f75 7420 7175   pre-checkout qu
+000101c0: 6572 6965 732e 204f 6e20 7375 6363 6573  eries. On succes
+000101d0: 732c 2054 7275 6520 6973 2072 6574 7572  s, True is retur
+000101e0: 6e65 642e 204e 6f74 653a 2054 6865 2042  ned. Note: The B
+000101f0: 6f74 2041 5049 206d 7573 7420 7265 6365  ot API must rece
+00010200: 6976 6520 616e 2061 6e73 7765 7220 7769  ive an answer wi
+00010210: 7468 696e 2031 3020 7365 636f 6e64 7320  thin 10 seconds 
+00010220: 6166 7465 7220 7468 6520 7072 652d 6368  after the pre-ch
+00010230: 6563 6b6f 7574 2071 7565 7279 2077 6173  eckout query was
+00010240: 2073 656e 742e 0d0a 2020 2020 3a70 6172   sent...    :par
+00010250: 616d 2074 6f6b 656e 3a20 426f 7427 7320  am token: Bot's 
+00010260: 746f 6b65 6e20 2879 6f75 2064 6f6e 2774  token (you don't
+00010270: 206e 6565 6420 746f 2066 696c 6c20 7468   need to fill th
+00010280: 6973 290d 0a20 2020 203a 7061 7261 6d20  is)..    :param 
+00010290: 7072 655f 6368 6563 6b6f 7574 5f71 7565  pre_checkout_que
+000102a0: 7279 5f69 643a 2055 6e69 7175 6520 6964  ry_id: Unique id
+000102b0: 656e 7469 6669 6572 2066 6f72 2074 6865  entifier for the
+000102c0: 2071 7565 7279 2074 6f20 6265 2061 6e73   query to be ans
+000102d0: 7765 7265 640d 0a20 2020 203a 7061 7261  wered..    :para
+000102e0: 6d20 6f6b 3a20 5370 6563 6966 7920 5472  m ok: Specify Tr
+000102f0: 7565 2069 6620 6576 6572 7974 6869 6e67  ue if everything
+00010300: 2069 7320 616c 7269 6768 7420 2867 6f6f   is alright (goo
+00010310: 6473 2061 7265 2061 7661 696c 6162 6c65  ds are available
+00010320: 2c20 6574 632e 2920 616e 6420 7468 6520  , etc.) and the 
+00010330: 626f 7420 6973 2072 6561 6479 2074 6f20  bot is ready to 
+00010340: 7072 6f63 6565 6420 7769 7468 2074 6865  proceed with the
+00010350: 206f 7264 6572 2e20 5573 6520 4661 6c73   order. Use Fals
+00010360: 6520 6966 2074 6865 7265 2061 7265 2061  e if there are a
+00010370: 6e79 2070 726f 626c 656d 732e 0d0a 2020  ny problems...  
+00010380: 2020 3a70 6172 616d 2065 7272 6f72 5f6d    :param error_m
+00010390: 6573 7361 6765 3a20 5265 7175 6972 6564  essage: Required
+000103a0: 2069 6620 6f6b 2069 7320 4661 6c73 652e   if ok is False.
+000103b0: 2045 7272 6f72 206d 6573 7361 6765 2069   Error message i
+000103c0: 6e20 6875 6d61 6e20 7265 6164 6162 6c65  n human readable
+000103d0: 2066 6f72 6d20 7468 6174 2065 7870 6c61   form that expla
+000103e0: 696e 7320 7468 6520 7265 6173 6f6e 2066  ins the reason f
+000103f0: 6f72 2066 6169 6c75 7265 2074 6f20 7072  or failure to pr
+00010400: 6f63 6565 6420 7769 7468 2074 6865 2063  oceed with the c
+00010410: 6865 636b 6f75 7420 2865 2e67 2e20 2253  heckout (e.g. "S
+00010420: 6f72 7279 2c20 736f 6d65 626f 6479 206a  orry, somebody j
+00010430: 7573 7420 626f 7567 6874 2074 6865 206c  ust bought the l
+00010440: 6173 7420 6f66 206f 7572 2061 6d61 7a69  ast of our amazi
+00010450: 6e67 2062 6c61 636b 2054 2d73 6869 7274  ng black T-shirt
+00010460: 7320 7768 696c 6520 796f 7520 7765 7265  s while you were
+00010470: 2062 7573 7920 6669 6c6c 696e 6720 6f75   busy filling ou
+00010480: 7420 796f 7572 2070 6179 6d65 6e74 2064  t your payment d
+00010490: 6574 6169 6c73 2e20 506c 6561 7365 2063  etails. Please c
+000104a0: 686f 6f73 6520 6120 6469 6666 6572 656e  hoose a differen
+000104b0: 7420 636f 6c6f 7220 6f72 2067 6172 6d65  t color or garme
+000104c0: 6e74 2122 292e 2054 656c 6567 7261 6d20  nt!"). Telegram 
+000104d0: 7769 6c6c 2064 6973 706c 6179 2074 6869  will display thi
+000104e0: 7320 6d65 7373 6167 6520 746f 2074 6865  s message to the
+000104f0: 2075 7365 722e 0d0a 2020 2020 3a72 6574   user...    :ret
+00010500: 7572 6e3a 0d0a 2020 2020 2222 220d 0a20  urn:..    """.. 
+00010510: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00010520: 2761 6e73 7765 7250 7265 4368 6563 6b6f  'answerPreChecko
+00010530: 7574 5175 6572 7927 0d0a 2020 2020 7061  utQuery'..    pa
+00010540: 796c 6f61 6420 3d20 7b27 7072 655f 6368  yload = {'pre_ch
+00010550: 6563 6b6f 7574 5f71 7565 7279 5f69 6427  eckout_query_id'
+00010560: 3a20 7072 655f 6368 6563 6b6f 7574 5f71  : pre_checkout_q
+00010570: 7565 7279 5f69 642c 2027 6f6b 273a 206f  uery_id, 'ok': o
+00010580: 6b7d 0d0a 2020 2020 6966 2065 7272 6f72  k}..    if error
+00010590: 5f6d 6573 7361 6765 3a0d 0a20 2020 2020  _message:..     
+000105a0: 2020 2070 6179 6c6f 6164 5b27 6572 726f     payload['erro
+000105b0: 725f 6d65 7373 6167 6527 5d20 3d20 6572  r_message'] = er
+000105c0: 726f 725f 6d65 7373 6167 650d 0a20 2020  ror_message..   
+000105d0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+000105e0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+000105f0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00010600: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00010610: 290d 0a0d 0a0d 0a23 2049 6e6c 696e 6551  )......# InlineQ
+00010620: 7565 7279 0d0a 0d0a 6173 796e 6320 6465  uery....async de
+00010630: 6620 616e 7377 6572 5f63 616c 6c62 6163  f answer_callbac
+00010640: 6b5f 7175 6572 7928 746f 6b65 6e2c 2063  k_query(token, c
+00010650: 616c 6c62 6163 6b5f 7175 6572 795f 6964  allback_query_id
+00010660: 2c20 7465 7874 3d4e 6f6e 652c 2073 686f  , text=None, sho
+00010670: 775f 616c 6572 743d 4e6f 6e65 2c20 7572  w_alert=None, ur
+00010680: 6c3d 4e6f 6e65 2c20 6361 6368 655f 7469  l=None, cache_ti
+00010690: 6d65 3d4e 6f6e 6529 3a0d 0a20 2020 2022  me=None):..    "
+000106a0: 2222 0d0a 2020 2020 5573 6520 7468 6973  ""..    Use this
+000106b0: 206d 6574 686f 6420 746f 2073 656e 6420   method to send 
+000106c0: 616e 7377 6572 7320 746f 2063 616c 6c62  answers to callb
+000106d0: 6163 6b20 7175 6572 6965 7320 7365 6e74  ack queries sent
+000106e0: 2066 726f 6d20 696e 6c69 6e65 206b 6579   from inline key
+000106f0: 626f 6172 6473 2e20 5468 6520 616e 7377  boards. The answ
+00010700: 6572 2077 696c 6c20 6265 2064 6973 706c  er will be displ
+00010710: 6179 6564 2074 6f20 7468 6520 7573 6572  ayed to the user
+00010720: 2061 7320 6120 6e6f 7469 6669 6361 7469   as a notificati
+00010730: 6f6e 2061 7420 7468 6520 746f 7020 6f66  on at the top of
+00010740: 2074 6865 2063 6861 7420 7363 7265 656e   the chat screen
+00010750: 206f 7220 6173 2061 6e20 616c 6572 742e   or as an alert.
+00010760: 204f 6e20 7375 6363 6573 732c 2054 7275   On success, Tru
+00010770: 6520 6973 2072 6574 7572 6e65 642e 0d0a  e is returned...
+00010780: 2020 2020 416c 7465 726e 6174 6976 656c      Alternativel
+00010790: 792c 2074 6865 2075 7365 7220 6361 6e20  y, the user can 
+000107a0: 6265 2072 6564 6972 6563 7465 6420 746f  be redirected to
+000107b0: 2074 6865 2073 7065 6369 6669 6564 2047   the specified G
+000107c0: 616d 6520 5552 4c2e 2046 6f72 2074 6869  ame URL. For thi
+000107d0: 7320 6f70 7469 6f6e 2074 6f20 776f 726b  s option to work
+000107e0: 2c20 796f 7520 6d75 7374 2066 6972 7374  , you must first
+000107f0: 2063 7265 6174 6520 6120 6761 6d65 2066   create a game f
+00010800: 6f72 2079 6f75 7220 626f 7420 7669 6120  or your bot via 
+00010810: 426f 7446 6174 6865 7220 616e 6420 6163  BotFather and ac
+00010820: 6365 7074 2074 6865 2074 6572 6d73 2e20  cept the terms. 
+00010830: 4f74 6865 7277 6973 652c 2079 6f75 206d  Otherwise, you m
+00010840: 6179 2075 7365 206c 696e 6b73 206c 696b  ay use links lik
+00010850: 6520 7465 6c65 6772 616d 2e6d 652f 796f  e telegram.me/yo
+00010860: 7572 5f62 6f74 3f73 7461 7274 3d58 5858  ur_bot?start=XXX
+00010870: 5820 7468 6174 206f 7065 6e20 796f 7572  X that open your
+00010880: 2062 6f74 2077 6974 6820 6120 7061 7261   bot with a para
+00010890: 6d65 7465 722e 0d0a 2020 2020 3a70 6172  meter...    :par
+000108a0: 616d 2074 6f6b 656e 3a20 426f 7427 7320  am token: Bot's 
+000108b0: 746f 6b65 6e20 2879 6f75 2064 6f6e 2774  token (you don't
+000108c0: 206e 6565 6420 746f 2066 696c 6c20 7468   need to fill th
+000108d0: 6973 290d 0a20 2020 203a 7061 7261 6d20  is)..    :param 
+000108e0: 6361 6c6c 6261 636b 5f71 7565 7279 5f69  callback_query_i
+000108f0: 643a 2055 6e69 7175 6520 6964 656e 7469  d: Unique identi
+00010900: 6669 6572 2066 6f72 2074 6865 2071 7565  fier for the que
+00010910: 7279 2074 6f20 6265 2061 6e73 7765 7265  ry to be answere
+00010920: 640d 0a20 2020 203a 7061 7261 6d20 7465  d..    :param te
+00010930: 7874 3a20 284f 7074 696f 6e61 6c29 2054  xt: (Optional) T
+00010940: 6578 7420 6f66 2074 6865 206e 6f74 6966  ext of the notif
+00010950: 6963 6174 696f 6e2e 2049 6620 6e6f 7420  ication. If not 
+00010960: 7370 6563 6966 6965 642c 206e 6f74 6869  specified, nothi
+00010970: 6e67 2077 696c 6c20 6265 2073 686f 776e  ng will be shown
+00010980: 2074 6f20 7468 6520 7573 6572 2c20 302d   to the user, 0-
+00010990: 3230 3020 6368 6172 6163 7465 7273 0d0a  200 characters..
+000109a0: 2020 2020 3a70 6172 616d 2073 686f 775f      :param show_
+000109b0: 616c 6572 743a 2028 4f70 7469 6f6e 616c  alert: (Optional
+000109c0: 2920 4966 2074 7275 652c 2061 6e20 616c  ) If true, an al
+000109d0: 6572 7420 7769 6c6c 2062 6520 7368 6f77  ert will be show
+000109e0: 6e20 6279 2074 6865 2063 6c69 656e 7420  n by the client 
+000109f0: 696e 7374 6561 6420 6f66 2061 206e 6f74  instead of a not
+00010a00: 6966 6963 6174 696f 6e20 6174 2074 6865  ification at the
+00010a10: 2074 6f70 206f 6620 7468 6520 6368 6174   top of the chat
+00010a20: 2073 6372 6565 6e2e 2044 6566 6175 6c74   screen. Default
+00010a30: 7320 746f 2066 616c 7365 2e0d 0a20 2020  s to false...   
+00010a40: 203a 7061 7261 6d20 7572 6c3a 2028 4f70   :param url: (Op
+00010a50: 7469 6f6e 616c 2920 5552 4c20 7468 6174  tional) URL that
+00010a60: 2077 696c 6c20 6265 206f 7065 6e65 6420   will be opened 
+00010a70: 6279 2074 6865 2075 7365 7227 7320 636c  by the user's cl
+00010a80: 6965 6e74 2e20 4966 2079 6f75 2068 6176  ient. If you hav
+00010a90: 6520 6372 6561 7465 6420 6120 4761 6d65  e created a Game
+00010aa0: 2061 6e64 2061 6363 6570 7465 6420 7468   and accepted th
+00010ab0: 6520 636f 6e64 6974 696f 6e73 2076 6961  e conditions via
+00010ac0: 2040 426f 7466 6174 6865 722c 2073 7065   @Botfather, spe
+00010ad0: 6369 6679 2074 6865 2055 524c 2074 6861  cify the URL tha
+00010ae0: 7420 6f70 656e 7320 796f 7572 2067 616d  t opens your gam
+00010af0: 6520 e280 9320 6e6f 7465 2074 6861 7420  e ... note that 
+00010b00: 7468 6973 2077 696c 6c20 6f6e 6c79 2077  this will only w
+00010b10: 6f72 6b20 6966 2074 6865 2071 7565 7279  ork if the query
+00010b20: 2063 6f6d 6573 2066 726f 6d20 6120 6361   comes from a ca
+00010b30: 6c6c 6261 636b 5f67 616d 6520 6275 7474  llback_game butt
+00010b40: 6f6e 2e0d 0a20 2020 204f 7468 6572 7769  on...    Otherwi
+00010b50: 7365 2c20 796f 7520 6d61 7920 7573 6520  se, you may use 
+00010b60: 6c69 6e6b 7320 6c69 6b65 2074 656c 6567  links like teleg
+00010b70: 7261 6d2e 6d65 2f79 6f75 725f 626f 743f  ram.me/your_bot?
+00010b80: 7374 6172 743d 5858 5858 2074 6861 7420  start=XXXX that 
+00010b90: 6f70 656e 2079 6f75 7220 626f 7420 7769  open your bot wi
+00010ba0: 7468 2061 2070 6172 616d 6574 6572 2e0d  th a parameter..
+00010bb0: 0a20 2020 203a 7061 7261 6d20 6361 6368  .    :param cach
+00010bc0: 655f 7469 6d65 3a20 284f 7074 696f 6e61  e_time: (Optiona
+00010bd0: 6c29 2054 6865 206d 6178 696d 756d 2061  l) The maximum a
+00010be0: 6d6f 756e 7420 6f66 2074 696d 6520 696e  mount of time in
+00010bf0: 2073 6563 6f6e 6473 2074 6861 7420 7468   seconds that th
+00010c00: 6520 7265 7375 6c74 206f 6620 7468 6520  e result of the 
+00010c10: 6361 6c6c 6261 636b 2071 7565 7279 206d  callback query m
+00010c20: 6179 2062 6520 6361 6368 6564 2063 6c69  ay be cached cli
+00010c30: 656e 742d 7369 6465 2e20 5465 6c65 6772  ent-side. Telegr
+00010c40: 616d 2061 7070 7320 7769 6c6c 2073 7570  am apps will sup
+00010c50: 706f 7274 2063 6163 6869 6e67 2073 7461  port caching sta
+00010c60: 7274 696e 6720 696e 2076 6572 7369 6f6e  rting in version
+00010c70: 2033 2e31 342e 2044 6566 6175 6c74 7320   3.14. Defaults 
+00010c80: 746f 2030 2e0d 0a20 2020 203a 7265 7475  to 0...    :retu
+00010c90: 726e 3a0d 0a20 2020 2022 2222 0d0a 2020  rn:..    """..  
+00010ca0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+00010cb0: 616e 7377 6572 4361 6c6c 6261 636b 5175  answerCallbackQu
+00010cc0: 6572 7927 0d0a 2020 2020 7061 796c 6f61  ery'..    payloa
+00010cd0: 6420 3d20 7b27 6361 6c6c 6261 636b 5f71  d = {'callback_q
+00010ce0: 7565 7279 5f69 6427 3a20 6361 6c6c 6261  uery_id': callba
+00010cf0: 636b 5f71 7565 7279 5f69 647d 0d0a 2020  ck_query_id}..  
+00010d00: 2020 6966 2074 6578 743a 0d0a 2020 2020    if text:..    
+00010d10: 2020 2020 7061 796c 6f61 645b 2774 6578      payload['tex
+00010d20: 7427 5d20 3d20 7465 7874 0d0a 2020 2020  t'] = text..    
+00010d30: 6966 2073 686f 775f 616c 6572 7420 6973  if show_alert is
+00010d40: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00010d50: 2020 2020 7061 796c 6f61 645b 2773 686f      payload['sho
+00010d60: 775f 616c 6572 7427 5d20 3d20 7368 6f77  w_alert'] = show
+00010d70: 5f61 6c65 7274 0d0a 2020 2020 6966 2075  _alert..    if u
+00010d80: 726c 3a0d 0a20 2020 2020 2020 2070 6179  rl:..        pay
+00010d90: 6c6f 6164 5b27 7572 6c27 5d20 3d20 7572  load['url'] = ur
+00010da0: 6c0d 0a20 2020 2069 6620 6361 6368 655f  l..    if cache_
+00010db0: 7469 6d65 2069 7320 6e6f 7420 4e6f 6e65  time is not None
+00010dc0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00010dd0: 6164 5b27 6361 6368 655f 7469 6d65 275d  ad['cache_time']
+00010de0: 203d 2063 6163 6865 5f74 696d 650d 0a20   = cache_time.. 
+00010df0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+00010e00: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+00010e10: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00010e20: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00010e30: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+00010e40: 2729 0d0a 0d0a 0d0a 6173 796e 6320 6465  ')......async de
+00010e50: 6620 616e 7377 6572 5f69 6e6c 696e 655f  f answer_inline_
+00010e60: 7175 6572 7928 746f 6b65 6e2c 2069 6e6c  query(token, inl
+00010e70: 696e 655f 7175 6572 795f 6964 2c20 7265  ine_query_id, re
+00010e80: 7375 6c74 732c 2063 6163 6865 5f74 696d  sults, cache_tim
+00010e90: 653d 4e6f 6e65 2c20 6973 5f70 6572 736f  e=None, is_perso
+00010ea0: 6e61 6c3d 4e6f 6e65 2c20 6e65 7874 5f6f  nal=None, next_o
+00010eb0: 6666 7365 743d 4e6f 6e65 2c0d 0a20 2020  ffset=None,..   
+00010ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010ed0: 2020 2020 2073 7769 7463 685f 706d 5f74       switch_pm_t
+00010ee0: 6578 743d 4e6f 6e65 2c20 7377 6974 6368  ext=None, switch
+00010ef0: 5f70 6d5f 7061 7261 6d65 7465 723d 4e6f  _pm_parameter=No
+00010f00: 6e65 293a 0d0a 2020 2020 6d65 7468 6f64  ne):..    method
+00010f10: 5f75 726c 203d 2027 616e 7377 6572 496e  _url = 'answerIn
+00010f20: 6c69 6e65 5175 6572 7927 0d0a 2020 2020  lineQuery'..    
+00010f30: 7061 796c 6f61 6420 3d20 7b27 696e 6c69  payload = {'inli
+00010f40: 6e65 5f71 7565 7279 5f69 6427 3a20 696e  ne_query_id': in
+00010f50: 6c69 6e65 5f71 7565 7279 5f69 642c 2027  line_query_id, '
+00010f60: 7265 7375 6c74 7327 3a20 6177 6169 7420  results': await 
+00010f70: 5f63 6f6e 7665 7274 5f6c 6973 745f 6a73  _convert_list_js
+00010f80: 6f6e 5f73 6572 6961 6c69 7a61 626c 6528  on_serializable(
+00010f90: 7265 7375 6c74 7329 7d0d 0a20 2020 2069  results)}..    i
+00010fa0: 6620 6361 6368 655f 7469 6d65 2069 7320  f cache_time is 
+00010fb0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00010fc0: 2020 2070 6179 6c6f 6164 5b27 6361 6368     payload['cach
+00010fd0: 655f 7469 6d65 275d 203d 2063 6163 6865  e_time'] = cache
+00010fe0: 5f74 696d 650d 0a20 2020 2069 6620 6973  _time..    if is
+00010ff0: 5f70 6572 736f 6e61 6c20 6973 206e 6f74  _personal is not
+00011000: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00011010: 7061 796c 6f61 645b 2769 735f 7065 7273  payload['is_pers
+00011020: 6f6e 616c 275d 203d 2069 735f 7065 7273  onal'] = is_pers
+00011030: 6f6e 616c 0d0a 2020 2020 6966 206e 6578  onal..    if nex
+00011040: 745f 6f66 6673 6574 2069 7320 6e6f 7420  t_offset is not 
+00011050: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00011060: 6179 6c6f 6164 5b27 6e65 7874 5f6f 6666  ayload['next_off
+00011070: 7365 7427 5d20 3d20 6e65 7874 5f6f 6666  set'] = next_off
+00011080: 7365 740d 0a20 2020 2069 6620 7377 6974  set..    if swit
+00011090: 6368 5f70 6d5f 7465 7874 3a0d 0a20 2020  ch_pm_text:..   
+000110a0: 2020 2020 2070 6179 6c6f 6164 5b27 7377       payload['sw
+000110b0: 6974 6368 5f70 6d5f 7465 7874 275d 203d  itch_pm_text'] =
+000110c0: 2073 7769 7463 685f 706d 5f74 6578 740d   switch_pm_text.
+000110d0: 0a20 2020 2069 6620 7377 6974 6368 5f70  .    if switch_p
+000110e0: 6d5f 7061 7261 6d65 7465 723a 0d0a 2020  m_parameter:..  
+000110f0: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
+00011100: 7769 7463 685f 706d 5f70 6172 616d 6574  witch_pm_paramet
+00011110: 6572 275d 203d 2073 7769 7463 685f 706d  er'] = switch_pm
+00011120: 5f70 6172 616d 6574 6572 0d0a 2020 2020  _parameter..    
+00011130: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00011140: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+00011150: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00011160: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00011170: 206d 6574 686f 643d 2770 6f73 7427 290d   method='post').
+00011180: 0a0d 0a0d 0a61 7379 6e63 2064 6566 2067  .....async def g
+00011190: 6574 5f73 7469 636b 6572 5f73 6574 2874  et_sticker_set(t
+000111a0: 6f6b 656e 2c20 6e61 6d65 293a 0d0a 2020  oken, name):..  
+000111b0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+000111c0: 6765 7453 7469 636b 6572 5365 7427 0d0a  getStickerSet'..
+000111d0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+000111e0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
+000111f0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00011200: 7572 6c2c 2070 6172 616d 733d 7b27 6e61  url, params={'na
+00011210: 6d65 273a 206e 616d 657d 290d 0a0d 0a61  me': name})....a
+00011220: 7379 6e63 2064 6566 2067 6574 5f63 7573  sync def get_cus
+00011230: 746f 6d5f 656d 6f6a 695f 7374 6963 6b65  tom_emoji_sticke
+00011240: 7273 2874 6f6b 656e 2c20 6375 7374 6f6d  rs(token, custom
+00011250: 5f65 6d6f 6a69 5f69 6473 293a 0d0a 2020  _emoji_ids):..  
+00011260: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00011270: 2767 6574 4375 7374 6f6d 456d 6f6a 6953  'getCustomEmojiS
+00011280: 7469 636b 6572 7327 0d0a 2020 2020 7265  tickers'..    re
+00011290: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
+000112a0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
+000112b0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000112c0: 6172 616d 733d 7b27 6375 7374 6f6d 5f65  arams={'custom_e
+000112d0: 6d6f 6a69 5f69 6473 273a 2063 7573 746f  moji_ids': custo
+000112e0: 6d5f 656d 6f6a 695f 6964 737d 290d 0a0d  m_emoji_ids})...
+000112f0: 0a61 7379 6e63 2064 6566 2075 706c 6f61  .async def uploa
+00011300: 645f 7374 6963 6b65 725f 6669 6c65 2874  d_sticker_file(t
+00011310: 6f6b 656e 2c20 7573 6572 5f69 642c 2070  oken, user_id, p
+00011320: 6e67 5f73 7469 636b 6572 293a 0d0a 2020  ng_sticker):..  
+00011330: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+00011340: 7570 6c6f 6164 5374 6963 6b65 7246 696c  uploadStickerFil
+00011350: 6527 0d0a 2020 2020 7061 796c 6f61 6420  e'..    payload 
+00011360: 3d20 7b27 7573 6572 5f69 6427 3a20 7573  = {'user_id': us
+00011370: 6572 5f69 647d 0d0a 2020 2020 6669 6c65  er_id}..    file
+00011380: 7320 3d20 7b27 706e 675f 7374 6963 6b65  s = {'png_sticke
+00011390: 7227 3a20 706e 675f 7374 6963 6b65 727d  r': png_sticker}
+000113a0: 0d0a 2020 2020 7265 7475 726e 2061 7761  ..    return awa
+000113b0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
+000113c0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+000113d0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+000113e0: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+000113f0: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+00011400: 2729 0d0a 0d0a 0d0a 6173 796e 6320 6465  ')......async de
+00011410: 6620 6372 6561 7465 5f6e 6577 5f73 7469  f create_new_sti
+00011420: 636b 6572 5f73 6574 280d 0a20 2020 2020  cker_set(..     
+00011430: 2020 2074 6f6b 656e 2c20 7573 6572 5f69     token, user_i
+00011440: 642c 206e 616d 652c 2074 6974 6c65 2c20  d, name, title, 
+00011450: 656d 6f6a 6973 2c20 706e 675f 7374 6963  emojis, png_stic
+00011460: 6b65 722c 2074 6773 5f73 7469 636b 6572  ker, tgs_sticker
+00011470: 2c0d 0a20 2020 2020 2020 206d 6173 6b5f  ,..        mask_
+00011480: 706f 7369 7469 6f6e 3d4e 6f6e 652c 2077  position=None, w
+00011490: 6562 6d5f 7374 6963 6b65 723d 4e6f 6e65  ebm_sticker=None
+000114a0: 2c20 7374 6963 6b65 725f 7479 7065 3d4e  , sticker_type=N
+000114b0: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+000114c0: 645f 7572 6c20 3d20 2763 7265 6174 654e  d_url = 'createN
+000114d0: 6577 5374 6963 6b65 7253 6574 270d 0a20  ewStickerSet'.. 
+000114e0: 2020 2070 6179 6c6f 6164 203d 207b 2775     payload = {'u
+000114f0: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
+00011500: 2c20 276e 616d 6527 3a20 6e61 6d65 2c20  , 'name': name, 
+00011510: 2774 6974 6c65 273a 2074 6974 6c65 2c20  'title': title, 
+00011520: 2765 6d6f 6a69 7327 3a20 656d 6f6a 6973  'emojis': emojis
+00011530: 7d0d 0a20 2020 2069 6620 706e 675f 7374  }..    if png_st
+00011540: 6963 6b65 723a 0d0a 2020 2020 2020 2020  icker:..        
+00011550: 7374 7970 6520 3d20 2770 6e67 5f73 7469  stype = 'png_sti
+00011560: 636b 6572 270d 0a20 2020 2065 6c69 6620  cker'..    elif 
+00011570: 7765 626d 5f73 7469 636b 6572 3a0d 0a20  webm_sticker:.. 
+00011580: 2020 2020 2020 2073 7479 7065 203d 2027         stype = '
+00011590: 7765 626d 5f73 7469 636b 6572 270d 0a20  webm_sticker'.. 
+000115a0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+000115b0: 2020 7374 7970 6520 3d20 2774 6773 5f73    stype = 'tgs_s
+000115c0: 7469 636b 6572 270d 0a20 2020 2073 7469  ticker'..    sti
+000115d0: 636b 6572 203d 2070 6e67 5f73 7469 636b  cker = png_stick
+000115e0: 6572 206f 7220 7467 735f 7374 6963 6b65  er or tgs_sticke
+000115f0: 7220 6f72 2077 6562 6d5f 7374 6963 6b65  r or webm_sticke
+00011600: 720d 0a20 2020 2066 696c 6573 203d 204e  r..    files = N
+00011610: 6f6e 650d 0a20 2020 2069 6620 6e6f 7420  one..    if not 
+00011620: 7574 696c 2e69 735f 7374 7269 6e67 2873  util.is_string(s
+00011630: 7469 636b 6572 293a 0d0a 2020 2020 2020  ticker):..      
+00011640: 2020 6669 6c65 7320 3d20 7b73 7479 7065    files = {stype
+00011650: 3a20 7374 6963 6b65 727d 0d0a 2020 2020  : sticker}..    
+00011660: 656c 7365 3a0d 0a20 2020 2020 2020 2070  else:..        p
+00011670: 6179 6c6f 6164 5b73 7479 7065 5d20 3d20  ayload[stype] = 
+00011680: 7374 6963 6b65 720d 0a20 2020 2069 6620  sticker..    if 
+00011690: 6d61 736b 5f70 6f73 6974 696f 6e3a 0d0a  mask_position:..
+000116a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000116b0: 276d 6173 6b5f 706f 7369 7469 6f6e 275d  'mask_position']
+000116c0: 203d 206d 6173 6b5f 706f 7369 7469 6f6e   = mask_position
+000116d0: 2e74 6f5f 6a73 6f6e 2829 0d0a 2020 2020  .to_json()..    
+000116e0: 6966 2077 6562 6d5f 7374 6963 6b65 723a  if webm_sticker:
+000116f0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00011700: 645b 2777 6562 6d5f 7374 6963 6b65 7227  d['webm_sticker'
+00011710: 5d20 3d20 7765 626d 5f73 7469 636b 6572  ] = webm_sticker
+00011720: 0d0a 2020 2020 6966 2073 7469 636b 6572  ..    if sticker
+00011730: 5f74 7970 653a 0d0a 2020 2020 2020 2020  _type:..        
+00011740: 7061 796c 6f61 645b 2773 7469 636b 6572  payload['sticker
+00011750: 5f74 7970 6527 5d20 3d20 7374 6963 6b65  _type'] = sticke
+00011760: 725f 7479 7065 0d0a 2020 2020 7265 7475  r_type..    retu
+00011770: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
+00011780: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
+00011790: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+000117a0: 616d 733d 7061 796c 6f61 642c 2066 696c  ams=payload, fil
+000117b0: 6573 3d66 696c 6573 2c20 6d65 7468 6f64  es=files, method
+000117c0: 3d27 706f 7374 2729 0d0a 0d0a 0d0a 6173  ='post')......as
+000117d0: 796e 6320 6465 6620 6164 645f 7374 6963  ync def add_stic
+000117e0: 6b65 725f 746f 5f73 6574 2874 6f6b 656e  ker_to_set(token
+000117f0: 2c20 7573 6572 5f69 642c 206e 616d 652c  , user_id, name,
+00011800: 2065 6d6f 6a69 732c 2070 6e67 5f73 7469   emojis, png_sti
+00011810: 636b 6572 2c20 7467 735f 7374 6963 6b65  cker, tgs_sticke
+00011820: 722c 206d 6173 6b5f 706f 7369 7469 6f6e  r, mask_position
+00011830: 2c20 7765 626d 5f73 7469 636b 6572 293a  , webm_sticker):
+00011840: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00011850: 203d 2027 6164 6453 7469 636b 6572 546f   = 'addStickerTo
+00011860: 5365 7427 0d0a 2020 2020 7061 796c 6f61  Set'..    payloa
+00011870: 6420 3d20 7b27 7573 6572 5f69 6427 3a20  d = {'user_id': 
+00011880: 7573 6572 5f69 642c 2027 6e61 6d65 273a  user_id, 'name':
+00011890: 206e 616d 652c 2027 656d 6f6a 6973 273a   name, 'emojis':
+000118a0: 2065 6d6f 6a69 737d 0d0a 2020 2020 6966   emojis}..    if
+000118b0: 2070 6e67 5f73 7469 636b 6572 3a0d 0a20   png_sticker:.. 
+000118c0: 2020 2020 2020 2073 7479 7065 203d 2027         stype = '
+000118d0: 706e 675f 7374 6963 6b65 7227 0d0a 2020  png_sticker'..  
+000118e0: 2020 656c 6966 2077 6562 6d5f 7374 6963    elif webm_stic
+000118f0: 6b65 723a 0d0a 2020 2020 2020 2020 7374  ker:..        st
+00011900: 7970 6520 3d20 2777 6562 6d5f 7374 6963  ype = 'webm_stic
+00011910: 6b65 7227 0d0a 2020 2020 656c 7365 3a0d  ker'..    else:.
+00011920: 0a20 2020 2020 2020 2073 7479 7065 203d  .        stype =
+00011930: 2027 7467 735f 7374 6963 6b65 7227 0d0a   'tgs_sticker'..
+00011940: 2020 2020 6669 6c65 7320 3d20 4e6f 6e65      files = None
+00011950: 0d0a 2020 2020 7374 6963 6b65 7220 3d20  ..    sticker = 
+00011960: 706e 675f 7374 6963 6b65 7220 6f72 2074  png_sticker or t
+00011970: 6773 5f73 7469 636b 6572 206f 7220 7765  gs_sticker or we
+00011980: 626d 5f73 7469 636b 6572 0d0a 0d0a 2020  bm_sticker....  
+00011990: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
+000119a0: 5f73 7472 696e 6728 7374 6963 6b65 7229  _string(sticker)
+000119b0: 3a0d 0a20 2020 2020 2020 2066 696c 6573  :..        files
+000119c0: 203d 207b 7374 7970 653a 2073 7469 636b   = {stype: stick
+000119d0: 6572 7d0d 0a20 2020 2065 6c73 653a 0d0a  er}..    else:..
+000119e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000119f0: 7374 7970 655d 203d 2073 7469 636b 6572  stype] = sticker
+00011a00: 0d0a 2020 2020 6966 206d 6173 6b5f 706f  ..    if mask_po
+00011a10: 7369 7469 6f6e 3a0d 0a20 2020 2020 2020  sition:..       
+00011a20: 2070 6179 6c6f 6164 5b27 6d61 736b 5f70   payload['mask_p
+00011a30: 6f73 6974 696f 6e27 5d20 3d20 6d61 736b  osition'] = mask
+00011a40: 5f70 6f73 6974 696f 6e2e 746f 5f6a 736f  _position.to_jso
+00011a50: 6e28 290d 0a0d 0a20 2020 2069 6620 7765  n()....    if we
+00011a60: 626d 5f73 7469 636b 6572 3a0d 0a20 2020  bm_sticker:..   
+00011a70: 2020 2020 2070 6179 6c6f 6164 5b27 7765       payload['we
+00011a80: 626d 5f73 7469 636b 6572 275d 203d 2077  bm_sticker'] = w
+00011a90: 6562 6d5f 7374 6963 6b65 720d 0a20 2020  ebm_sticker..   
+00011aa0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+00011ab0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+00011ac0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00011ad0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00011ae0: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
+00011af0: 6574 686f 643d 2770 6f73 7427 290d 0a0d  ethod='post')...
+00011b00: 0a0d 0a61 7379 6e63 2064 6566 2073 6574  ...async def set
+00011b10: 5f73 7469 636b 6572 5f70 6f73 6974 696f  _sticker_positio
+00011b20: 6e5f 696e 5f73 6574 2874 6f6b 656e 2c20  n_in_set(token, 
+00011b30: 7374 6963 6b65 722c 2070 6f73 6974 696f  sticker, positio
+00011b40: 6e29 3a0d 0a20 2020 206d 6574 686f 645f  n):..    method_
+00011b50: 7572 6c20 3d20 2773 6574 5374 6963 6b65  url = 'setSticke
+00011b60: 7250 6f73 6974 696f 6e49 6e53 6574 270d  rPositionInSet'.
+00011b70: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00011b80: 2773 7469 636b 6572 273a 2073 7469 636b  'sticker': stick
+00011b90: 6572 2c20 2770 6f73 6974 696f 6e27 3a20  er, 'position': 
+00011ba0: 706f 7369 7469 6f6e 7d0d 0a20 2020 2072  position}..    r
+00011bb0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00011bc0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00011bd0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00011be0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+00011bf0: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+00011c00: 0d0a 0d0a 6173 796e 6320 6465 6620 6465  ....async def de
+00011c10: 6c65 7465 5f73 7469 636b 6572 5f66 726f  lete_sticker_fro
+00011c20: 6d5f 7365 7428 746f 6b65 6e2c 2073 7469  m_set(token, sti
+00011c30: 636b 6572 293a 0d0a 2020 2020 6d65 7468  cker):..    meth
+00011c40: 6f64 5f75 726c 203d 2027 6465 6c65 7465  od_url = 'delete
+00011c50: 5374 6963 6b65 7246 726f 6d53 6574 270d  StickerFromSet'.
+00011c60: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00011c70: 2773 7469 636b 6572 273a 2073 7469 636b  'sticker': stick
+00011c80: 6572 7d0d 0a20 2020 2072 6574 7572 6e20  er}..    return 
+00011c90: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00011ca0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00011cb0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00011cc0: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+00011cd0: 3d27 706f 7374 2729 0d0a 0d0a 0d0a 0d0a  ='post')........
+00011ce0: 6173 796e 6320 6465 6620 6372 6561 7465  async def create
+00011cf0: 5f69 6e76 6f69 6365 5f6c 696e 6b28 746f  _invoice_link(to
+00011d00: 6b65 6e2c 2074 6974 6c65 2c20 6465 7363  ken, title, desc
+00011d10: 7269 7074 696f 6e2c 2070 6179 6c6f 6164  ription, payload
+00011d20: 2c20 7072 6f76 6964 6572 5f74 6f6b 656e  , provider_token
+00011d30: 2c0d 0a20 2020 2020 2020 2020 2020 2063  ,..            c
+00011d40: 7572 7265 6e63 792c 2070 7269 6365 732c  urrency, prices,
+00011d50: 206d 6178 5f74 6970 5f61 6d6f 756e 743d   max_tip_amount=
+00011d60: 4e6f 6e65 2c20 7375 6767 6573 7465 645f  None, suggested_
+00011d70: 7469 705f 616d 6f75 6e74 733d 4e6f 6e65  tip_amounts=None
+00011d80: 2c20 7072 6f76 6964 6572 5f64 6174 613d  , provider_data=
+00011d90: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
+00011da0: 2020 2070 686f 746f 5f75 726c 3d4e 6f6e     photo_url=Non
+00011db0: 652c 2070 686f 746f 5f73 697a 653d 4e6f  e, photo_size=No
+00011dc0: 6e65 2c20 7068 6f74 6f5f 7769 6474 683d  ne, photo_width=
+00011dd0: 4e6f 6e65 2c20 7068 6f74 6f5f 6865 6967  None, photo_heig
+00011de0: 6874 3d4e 6f6e 652c 206e 6565 645f 6e61  ht=None, need_na
+00011df0: 6d65 3d4e 6f6e 652c 206e 6565 645f 7068  me=None, need_ph
+00011e00: 6f6e 655f 6e75 6d62 6572 3d4e 6f6e 652c  one_number=None,
+00011e10: 0d0a 2020 2020 2020 2020 2020 2020 6e65  ..            ne
+00011e20: 6564 5f65 6d61 696c 3d4e 6f6e 652c 206e  ed_email=None, n
+00011e30: 6565 645f 7368 6970 7069 6e67 5f61 6464  eed_shipping_add
+00011e40: 7265 7373 3d4e 6f6e 652c 2073 656e 645f  ress=None, send_
+00011e50: 7068 6f6e 655f 6e75 6d62 6572 5f74 6f5f  phone_number_to_
+00011e60: 7072 6f76 6964 6572 3d4e 6f6e 652c 0d0a  provider=None,..
+00011e70: 2020 2020 2020 2020 2020 2020 7365 6e64              send
+00011e80: 5f65 6d61 696c 5f74 6f5f 7072 6f76 6964  _email_to_provid
+00011e90: 6572 3d4e 6f6e 652c 2069 735f 666c 6578  er=None, is_flex
+00011ea0: 6962 6c65 3d4e 6f6e 6529 3a0d 0a20 2020  ible=None):..   
+00011eb0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00011ec0: 6372 6561 7465 496e 766f 6963 654c 696e  createInvoiceLin
+00011ed0: 6b27 0d0a 2020 2020 7061 796c 6f61 6420  k'..    payload 
+00011ee0: 3d20 7b27 7469 746c 6527 3a20 7469 746c  = {'title': titl
+00011ef0: 652c 2027 6465 7363 7269 7074 696f 6e27  e, 'description'
+00011f00: 3a20 6465 7363 7269 7074 696f 6e2c 2027  : description, '
+00011f10: 7061 796c 6f61 6427 3a20 7061 796c 6f61  payload': payloa
+00011f20: 642c 2027 7072 6f76 6964 6572 5f74 6f6b  d, 'provider_tok
+00011f30: 656e 273a 2070 726f 7669 6465 725f 746f  en': provider_to
+00011f40: 6b65 6e2c 0d0a 2020 2020 2020 2020 2020  ken,..          
+00011f50: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+00011f60: 3a20 6375 7272 656e 6379 2c20 2770 7269  : currency, 'pri
+00011f70: 6365 7327 3a20 6177 6169 7420 5f63 6f6e  ces': await _con
+00011f80: 7665 7274 5f6c 6973 745f 6a73 6f6e 5f73  vert_list_json_s
+00011f90: 6572 6961 6c69 7a61 626c 6528 7072 6963  erializable(pric
+00011fa0: 6573 297d 0d0a 2020 2020 6966 206d 6178  es)}..    if max
+00011fb0: 5f74 6970 5f61 6d6f 756e 743a 0d0a 2020  _tip_amount:..  
+00011fc0: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
+00011fd0: 6178 5f74 6970 5f61 6d6f 756e 7427 5d20  ax_tip_amount'] 
+00011fe0: 3d20 6d61 785f 7469 705f 616d 6f75 6e74  = max_tip_amount
+00011ff0: 0d0a 2020 2020 6966 2073 7567 6765 7374  ..    if suggest
+00012000: 6564 5f74 6970 5f61 6d6f 756e 7473 3a0d  ed_tip_amounts:.
+00012010: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012020: 5b27 7375 6767 6573 7465 645f 7469 705f  ['suggested_tip_
+00012030: 616d 6f75 6e74 7327 5d20 3d20 6a73 6f6e  amounts'] = json
+00012040: 2e64 756d 7073 2873 7567 6765 7374 6564  .dumps(suggested
+00012050: 5f74 6970 5f61 6d6f 756e 7473 290d 0a20  _tip_amounts).. 
+00012060: 2020 2069 6620 7072 6f76 6964 6572 5f64     if provider_d
+00012070: 6174 613a 0d0a 2020 2020 2020 2020 7061  ata:..        pa
+00012080: 796c 6f61 645b 2770 726f 7669 6465 725f  yload['provider_
+00012090: 6461 7461 275d 203d 2070 726f 7669 6465  data'] = provide
+000120a0: 725f 6461 7461 0d0a 2020 2020 6966 2070  r_data..    if p
+000120b0: 686f 746f 5f75 726c 3a0d 0a20 2020 2020  hoto_url:..     
+000120c0: 2020 2070 6179 6c6f 6164 5b27 7068 6f74     payload['phot
+000120d0: 6f5f 7572 6c27 5d20 3d20 7068 6f74 6f5f  o_url'] = photo_
+000120e0: 7572 6c0d 0a20 2020 2069 6620 7068 6f74  url..    if phot
+000120f0: 6f5f 7369 7a65 3a0d 0a20 2020 2020 2020  o_size:..       
+00012100: 2070 6179 6c6f 6164 5b27 7068 6f74 6f5f   payload['photo_
+00012110: 7369 7a65 275d 203d 2070 686f 746f 5f73  size'] = photo_s
+00012120: 697a 650d 0a20 2020 2069 6620 7068 6f74  ize..    if phot
+00012130: 6f5f 7769 6474 683a 0d0a 2020 2020 2020  o_width:..      
+00012140: 2020 7061 796c 6f61 645b 2770 686f 746f    payload['photo
+00012150: 5f77 6964 7468 275d 203d 2070 686f 746f  _width'] = photo
+00012160: 5f77 6964 7468 0d0a 2020 2020 6966 2070  _width..    if p
+00012170: 686f 746f 5f68 6569 6768 743a 0d0a 2020  hoto_height:..  
+00012180: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+00012190: 686f 746f 5f68 6569 6768 7427 5d20 3d20  hoto_height'] = 
+000121a0: 7068 6f74 6f5f 6865 6967 6874 0d0a 2020  photo_height..  
+000121b0: 2020 6966 206e 6565 645f 6e61 6d65 2069    if need_name i
+000121c0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000121d0: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
+000121e0: 6564 5f6e 616d 6527 5d20 3d20 6e65 6564  ed_name'] = need
+000121f0: 5f6e 616d 650d 0a20 2020 2069 6620 6e65  _name..    if ne
+00012200: 6564 5f70 686f 6e65 5f6e 756d 6265 7220  ed_phone_number 
+00012210: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00012220: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
+00012230: 6565 645f 7068 6f6e 655f 6e75 6d62 6572  eed_phone_number
+00012240: 275d 203d 206e 6565 645f 7068 6f6e 655f  '] = need_phone_
+00012250: 6e75 6d62 6572 0d0a 2020 2020 6966 206e  number..    if n
+00012260: 6565 645f 656d 6169 6c20 6973 206e 6f74  eed_email is not
+00012270: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00012280: 7061 796c 6f61 645b 276e 6565 645f 656d  payload['need_em
+00012290: 6169 6c27 5d20 3d20 6e65 6564 5f65 6d61  ail'] = need_ema
+000122a0: 696c 0d0a 2020 2020 6966 206e 6565 645f  il..    if need_
+000122b0: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
+000122c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+000122d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000122e0: 6e65 6564 5f73 6869 7070 696e 675f 6164  need_shipping_ad
+000122f0: 6472 6573 7327 5d20 3d20 6e65 6564 5f73  dress'] = need_s
+00012300: 6869 7070 696e 675f 6164 6472 6573 730d  hipping_address.
+00012310: 0a20 2020 2069 6620 7365 6e64 5f70 686f  .    if send_pho
+00012320: 6e65 5f6e 756d 6265 725f 746f 5f70 726f  ne_number_to_pro
+00012330: 7669 6465 7220 6973 206e 6f74 204e 6f6e  vider is not Non
+00012340: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00012350: 6f61 645b 2773 656e 645f 7068 6f6e 655f  oad['send_phone_
+00012360: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
+00012370: 6572 275d 203d 2073 656e 645f 7068 6f6e  er'] = send_phon
+00012380: 655f 6e75 6d62 6572 5f74 6f5f 7072 6f76  e_number_to_prov
+00012390: 6964 6572 0d0a 2020 2020 6966 2073 656e  ider..    if sen
+000123a0: 645f 656d 6169 6c5f 746f 5f70 726f 7669  d_email_to_provi
+000123b0: 6465 7220 6973 206e 6f74 204e 6f6e 653a  der is not None:
+000123c0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000123d0: 645b 2773 656e 645f 656d 6169 6c5f 746f  d['send_email_to
+000123e0: 5f70 726f 7669 6465 7227 5d20 3d20 7365  _provider'] = se
+000123f0: 6e64 5f65 6d61 696c 5f74 6f5f 7072 6f76  nd_email_to_prov
+00012400: 6964 6572 0d0a 2020 2020 6966 2069 735f  ider..    if is_
+00012410: 666c 6578 6962 6c65 2069 7320 6e6f 7420  flexible is not 
+00012420: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00012430: 6179 6c6f 6164 5b27 6973 5f66 6c65 7869  ayload['is_flexi
+00012440: 626c 6527 5d20 3d20 6973 5f66 6c65 7869  ble'] = is_flexi
+00012450: 626c 650d 0a20 2020 2072 6574 7572 6e20  ble..    return 
+00012460: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00012470: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00012480: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00012490: 3d70 6179 6c6f 6164 2c20 6d65 7468 6f64  =payload, method
+000124a0: 3d27 706f 7374 2729 0d0a 0d0a 0d0a 0d0a  ='post')........
+000124b0: 2320 6e6f 696e 7370 6563 7469 6f6e 2050  # noinspection P
+000124c0: 7953 6861 646f 7769 6e67 4275 696c 7469  yShadowingBuilti
+000124d0: 6e73 0d0a 6173 796e 6320 6465 6620 7365  ns..async def se
+000124e0: 6e64 5f70 6f6c 6c28 0d0a 2020 2020 2020  nd_poll(..      
+000124f0: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
+00012500: 2c0d 0a20 2020 2020 2020 2071 7565 7374  ,..        quest
+00012510: 696f 6e2c 206f 7074 696f 6e73 2c0d 0a20  ion, options,.. 
+00012520: 2020 2020 2020 2069 735f 616e 6f6e 796d         is_anonym
+00012530: 6f75 7320 3d20 4e6f 6e65 2c20 7479 7065  ous = None, type
+00012540: 203d 204e 6f6e 652c 2061 6c6c 6f77 735f   = None, allows_
+00012550: 6d75 6c74 6970 6c65 5f61 6e73 7765 7273  multiple_answers
+00012560: 203d 204e 6f6e 652c 2063 6f72 7265 6374   = None, correct
+00012570: 5f6f 7074 696f 6e5f 6964 203d 204e 6f6e  _option_id = Non
+00012580: 652c 0d0a 2020 2020 2020 2020 6578 706c  e,..        expl
+00012590: 616e 6174 696f 6e20 3d20 4e6f 6e65 2c20  anation = None, 
+000125a0: 6578 706c 616e 6174 696f 6e5f 7061 7273  explanation_pars
+000125b0: 655f 6d6f 6465 3d4e 6f6e 652c 206f 7065  e_mode=None, ope
+000125c0: 6e5f 7065 7269 6f64 203d 204e 6f6e 652c  n_period = None,
+000125d0: 2063 6c6f 7365 5f64 6174 6520 3d20 4e6f   close_date = No
+000125e0: 6e65 2c20 6973 5f63 6c6f 7365 6420 3d20  ne, is_closed = 
+000125f0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2064  None,..        d
+00012600: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00012610: 696f 6e3d 4661 6c73 652c 2072 6570 6c79  ion=False, reply
+00012620: 5f74 6f5f 6d65 7373 6167 655f 6964 3d4e  _to_message_id=N
+00012630: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
+00012640: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00012650: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+00012660: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+00012670: 652c 2074 696d 656f 7574 3d4e 6f6e 652c  e, timeout=None,
+00012680: 2065 7870 6c61 6e61 7469 6f6e 5f65 6e74   explanation_ent
+00012690: 6974 6965 733d 4e6f 6e65 2c20 7072 6f74  ities=None, prot
+000126a0: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
+000126b0: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
+000126c0: 5f69 643d 4e6f 6e65 293a 0d0a 2020 2020  _id=None):..    
+000126d0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+000126e0: 656e 6450 6f6c 6c27 0d0a 2020 2020 7061  endPoll'..    pa
+000126f0: 796c 6f61 6420 3d20 7b0d 0a20 2020 2020  yload = {..     
+00012700: 2020 2027 6368 6174 5f69 6427 3a20 7374     'chat_id': st
+00012710: 7228 6368 6174 5f69 6429 2c0d 0a20 2020  r(chat_id),..   
+00012720: 2020 2020 2027 7175 6573 7469 6f6e 273a       'question':
+00012730: 2071 7565 7374 696f 6e2c 0d0a 2020 2020   question,..    
+00012740: 2020 2020 276f 7074 696f 6e73 273a 206a      'options': j
+00012750: 736f 6e2e 6475 6d70 7328 6177 6169 7420  son.dumps(await 
+00012760: 5f63 6f6e 7665 7274 5f70 6f6c 6c5f 6f70  _convert_poll_op
+00012770: 7469 6f6e 7328 6f70 7469 6f6e 7329 297d  tions(options))}
+00012780: 0d0a 0d0a 2020 2020 6966 2069 735f 616e  ....    if is_an
+00012790: 6f6e 796d 6f75 7320 6973 206e 6f74 204e  onymous is not N
+000127a0: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+000127b0: 796c 6f61 645b 2769 735f 616e 6f6e 796d  yload['is_anonym
+000127c0: 6f75 7327 5d20 3d20 6973 5f61 6e6f 6e79  ous'] = is_anony
+000127d0: 6d6f 7573 0d0a 2020 2020 6966 2074 7970  mous..    if typ
+000127e0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
+000127f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00012800: 2774 7970 6527 5d20 3d20 7479 7065 0d0a  'type'] = type..
+00012810: 2020 2020 6966 2061 6c6c 6f77 735f 6d75      if allows_mu
+00012820: 6c74 6970 6c65 5f61 6e73 7765 7273 2069  ltiple_answers i
+00012830: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00012840: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
+00012850: 6c6f 7773 5f6d 756c 7469 706c 655f 616e  lows_multiple_an
+00012860: 7377 6572 7327 5d20 3d20 616c 6c6f 7773  swers'] = allows
+00012870: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
+00012880: 730d 0a20 2020 2069 6620 636f 7272 6563  s..    if correc
+00012890: 745f 6f70 7469 6f6e 5f69 6420 6973 206e  t_option_id is n
+000128a0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000128b0: 2020 7061 796c 6f61 645b 2763 6f72 7265    payload['corre
+000128c0: 6374 5f6f 7074 696f 6e5f 6964 275d 203d  ct_option_id'] =
+000128d0: 2063 6f72 7265 6374 5f6f 7074 696f 6e5f   correct_option_
+000128e0: 6964 0d0a 2020 2020 6966 2065 7870 6c61  id..    if expla
+000128f0: 6e61 7469 6f6e 2069 7320 6e6f 7420 4e6f  nation is not No
+00012900: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00012910: 6c6f 6164 5b27 6578 706c 616e 6174 696f  load['explanatio
+00012920: 6e27 5d20 3d20 6578 706c 616e 6174 696f  n'] = explanatio
+00012930: 6e0d 0a20 2020 2069 6620 6578 706c 616e  n..    if explan
+00012940: 6174 696f 6e5f 7061 7273 655f 6d6f 6465  ation_parse_mode
+00012950: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00012960: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00012970: 6578 706c 616e 6174 696f 6e5f 7061 7273  explanation_pars
+00012980: 655f 6d6f 6465 275d 203d 2065 7870 6c61  e_mode'] = expla
+00012990: 6e61 7469 6f6e 5f70 6172 7365 5f6d 6f64  nation_parse_mod
+000129a0: 650d 0a20 2020 2069 6620 6f70 656e 5f70  e..    if open_p
+000129b0: 6572 696f 6420 6973 206e 6f74 204e 6f6e  eriod is not Non
+000129c0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+000129d0: 6f61 645b 276f 7065 6e5f 7065 7269 6f64  oad['open_period
+000129e0: 275d 203d 206f 7065 6e5f 7065 7269 6f64  '] = open_period
+000129f0: 0d0a 2020 2020 6966 2063 6c6f 7365 5f64  ..    if close_d
+00012a00: 6174 6520 6973 206e 6f74 204e 6f6e 653a  ate is not None:
+00012a10: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
+00012a20: 6e73 7461 6e63 6528 636c 6f73 655f 6461  nstance(close_da
+00012a30: 7465 2c20 6461 7465 7469 6d65 293a 0d0a  te, datetime):..
+00012a40: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+00012a50: 6f61 645b 2763 6c6f 7365 5f64 6174 6527  oad['close_date'
+00012a60: 5d20 3d20 636c 6f73 655f 6461 7465 2e74  ] = close_date.t
+00012a70: 696d 6573 7461 6d70 2829 0d0a 2020 2020  imestamp()..    
+00012a80: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00012a90: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00012aa0: 636c 6f73 655f 6461 7465 275d 203d 2063  close_date'] = c
+00012ab0: 6c6f 7365 5f64 6174 650d 0a20 2020 2069  lose_date..    i
+00012ac0: 6620 6973 5f63 6c6f 7365 6420 6973 206e  f is_closed is n
+00012ad0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00012ae0: 2020 7061 796c 6f61 645b 2769 735f 636c    payload['is_cl
+00012af0: 6f73 6564 275d 203d 2069 735f 636c 6f73  osed'] = is_clos
+00012b00: 6564 0d0a 0d0a 2020 2020 6966 2064 6973  ed....    if dis
+00012b10: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00012b20: 6e3a 0d0a 2020 2020 2020 2020 7061 796c  n:..        payl
+00012b30: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
+00012b40: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
+00012b50: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00012b60: 6f6e 0d0a 2020 2020 6966 2072 6570 6c79  on..    if reply
+00012b70: 5f74 6f5f 6d65 7373 6167 655f 6964 2069  _to_message_id i
+00012b80: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00012b90: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
+00012ba0: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+00012bb0: 6427 5d20 3d20 7265 706c 795f 746f 5f6d  d'] = reply_to_m
+00012bc0: 6573 7361 6765 5f69 640d 0a20 2020 2069  essage_id..    i
+00012bd0: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
+00012be0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
+00012bf0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00012c00: 2020 2020 7061 796c 6f61 645b 2761 6c6c      payload['all
+00012c10: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00012c20: 7574 5f72 6570 6c79 275d 203d 2061 6c6c  ut_reply'] = all
+00012c30: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00012c40: 7574 5f72 6570 6c79 0d0a 2020 2020 6966  ut_reply..    if
+00012c50: 2072 6570 6c79 5f6d 6172 6b75 7020 6973   reply_markup is
+00012c60: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00012c70: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
+00012c80: 6c79 5f6d 6172 6b75 7027 5d20 3d20 6177  ly_markup'] = aw
+00012c90: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
+00012ca0: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+00012cb0: 290d 0a20 2020 2069 6620 7469 6d65 6f75  )..    if timeou
+00012cc0: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+00012cd0: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
+00012ce0: 2074 696d 656f 7574 0d0a 2020 2020 6966   timeout..    if
+00012cf0: 2065 7870 6c61 6e61 7469 6f6e 5f65 6e74   explanation_ent
+00012d00: 6974 6965 733a 0d0a 2020 2020 2020 2020  ities:..        
+00012d10: 7061 796c 6f61 645b 2765 7870 6c61 6e61  payload['explana
+00012d20: 7469 6f6e 5f65 6e74 6974 6965 7327 5d20  tion_entities'] 
+00012d30: 3d20 6a73 6f6e 2e64 756d 7073 280d 0a20  = json.dumps(.. 
+00012d40: 2020 2020 2020 2020 2020 2074 7970 6573             types
+00012d50: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
+00012d60: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
+00012d70: 6578 706c 616e 6174 696f 6e5f 656e 7469  explanation_enti
+00012d80: 7469 6573 2929 0d0a 2020 2020 6966 2070  ties))..    if p
+00012d90: 726f 7465 6374 5f63 6f6e 7465 6e74 3a0d  rotect_content:.
+00012da0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012db0: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
+00012dc0: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
+00012dd0: 6e74 656e 740d 0a20 2020 2069 6620 6d65  ntent..    if me
+00012de0: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
+00012df0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00012e00: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+00012e10: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+00012e20: 5f74 6872 6561 645f 6964 0d0a 2020 2020  _thread_id..    
+00012e30: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
+00012e40: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
+00012e50: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00012e60: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00012e70: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+00012e80: 6372 6561 7465 5f66 6f72 756d 5f74 6f70  create_forum_top
+00012e90: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00012ea0: 642c 206e 616d 652c 2069 636f 6e5f 636f  d, name, icon_co
+00012eb0: 6c6f 723d 4e6f 6e65 2c20 6963 6f6e 5f63  lor=None, icon_c
+00012ec0: 7573 746f 6d5f 656d 6f6a 695f 6964 3d4e  ustom_emoji_id=N
+00012ed0: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+00012ee0: 645f 7572 6c20 3d20 7227 6372 6561 7465  d_url = r'create
+00012ef0: 466f 7275 6d54 6f70 6963 270d 0a20 2020  ForumTopic'..   
+00012f00: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00012f10: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
+00012f20: 276e 616d 6527 3a20 6e61 6d65 7d0d 0a20  'name': name}.. 
+00012f30: 2020 2069 6620 6963 6f6e 5f63 6f6c 6f72     if icon_color
+00012f40: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00012f50: 6164 5b27 6963 6f6e 5f63 6f6c 6f72 275d  ad['icon_color']
+00012f60: 203d 2069 636f 6e5f 636f 6c6f 720d 0a20   = icon_color.. 
+00012f70: 2020 2069 6620 6963 6f6e 5f63 7573 746f     if icon_custo
+00012f80: 6d5f 656d 6f6a 695f 6964 3a0d 0a20 2020  m_emoji_id:..   
+00012f90: 2020 2020 2070 6179 6c6f 6164 5b27 6963       payload['ic
+00012fa0: 6f6e 5f63 7573 746f 6d5f 656d 6f6a 695f  on_custom_emoji_
+00012fb0: 6964 275d 203d 2069 636f 6e5f 6375 7374  id'] = icon_cust
+00012fc0: 6f6d 5f65 6d6f 6a69 5f69 640d 0a20 2020  om_emoji_id..   
+00012fd0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
+00012fe0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
+00012ff0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00013000: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00013010: 290d 0a0d 0a61 7379 6e63 2064 6566 2065  )....async def e
+00013020: 6469 745f 666f 7275 6d5f 746f 7069 6328  dit_forum_topic(
+00013030: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+00013040: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00013050: 642c 206e 616d 653d 4e6f 6e65 2c20 6963  d, name=None, ic
+00013060: 6f6e 5f63 7573 746f 6d5f 656d 6f6a 695f  on_custom_emoji_
+00013070: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+00013080: 6574 686f 645f 7572 6c20 3d20 7227 6564  ethod_url = r'ed
+00013090: 6974 466f 7275 6d54 6f70 6963 270d 0a20  itForumTopic'.. 
+000130a0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+000130b0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+000130c0: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
+000130d0: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
+000130e0: 6872 6561 645f 6964 7d0d 0a20 2020 2069  hread_id}..    i
+000130f0: 6620 6e61 6d65 2069 7320 6e6f 7420 4e6f  f name is not No
+00013100: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00013110: 6c6f 6164 5b27 6e61 6d65 275d 203d 206e  load['name'] = n
+00013120: 616d 650d 0a20 2020 2069 6620 6963 6f6e  ame..    if icon
+00013130: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
+00013140: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00013150: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00013160: 6963 6f6e 5f63 7573 746f 6d5f 656d 6f6a  icon_custom_emoj
+00013170: 695f 6964 275d 203d 2069 636f 6e5f 6375  i_id'] = icon_cu
+00013180: 7374 6f6d 5f65 6d6f 6a69 5f69 640d 0a20  stom_emoji_id.. 
+00013190: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
+000131a0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
+000131b0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+000131c0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+000131d0: 6164 290d 0a0d 0a61 7379 6e63 2064 6566  ad)....async def
+000131e0: 2063 6c6f 7365 5f66 6f72 756d 5f74 6f70   close_forum_top
+000131f0: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00013200: 642c 206d 6573 7361 6765 5f74 6872 6561  d, message_threa
+00013210: 645f 6964 293a 0d0a 2020 2020 6d65 7468  d_id):..    meth
+00013220: 6f64 5f75 726c 203d 2072 2763 6c6f 7365  od_url = r'close
+00013230: 466f 7275 6d54 6f70 6963 270d 0a20 2020  ForumTopic'..   
+00013240: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00013250: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
+00013260: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+00013270: 6964 273a 206d 6573 7361 6765 5f74 6872  id': message_thr
+00013280: 6561 645f 6964 7d0d 0a20 2020 2072 6574  ead_id}..    ret
+00013290: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+000132a0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+000132b0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000132c0: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+000132d0: 0a61 7379 6e63 2064 6566 2072 656f 7065  .async def reope
+000132e0: 6e5f 666f 7275 6d5f 746f 7069 6328 746f  n_forum_topic(to
+000132f0: 6b65 6e2c 2063 6861 745f 6964 2c20 6d65  ken, chat_id, me
+00013300: 7373 6167 655f 7468 7265 6164 5f69 6429  ssage_thread_id)
+00013310: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+00013320: 6c20 3d20 7227 7265 6f70 656e 466f 7275  l = r'reopenForu
+00013330: 6d54 6f70 6963 270d 0a20 2020 2070 6179  mTopic'..    pay
+00013340: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+00013350: 273a 2063 6861 745f 6964 2c20 276d 6573  ': chat_id, 'mes
+00013360: 7361 6765 5f74 6872 6561 645f 6964 273a  sage_thread_id':
+00013370: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00013380: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+00013390: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+000133a0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+000133b0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+000133c0: 3d70 6179 6c6f 6164 290d 0a0d 0a61 7379  =payload)....asy
+000133d0: 6e63 2064 6566 2064 656c 6574 655f 666f  nc def delete_fo
+000133e0: 7275 6d5f 746f 7069 6328 746f 6b65 6e2c  rum_topic(token,
+000133f0: 2063 6861 745f 6964 2c20 6d65 7373 6167   chat_id, messag
+00013400: 655f 7468 7265 6164 5f69 6429 3a0d 0a20  e_thread_id):.. 
+00013410: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00013420: 7227 6465 6c65 7465 466f 7275 6d54 6f70  r'deleteForumTop
+00013430: 6963 270d 0a20 2020 2070 6179 6c6f 6164  ic'..    payload
+00013440: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00013450: 6861 745f 6964 2c20 276d 6573 7361 6765  hat_id, 'message
+00013460: 5f74 6872 6561 645f 6964 273a 206d 6573  _thread_id': mes
+00013470: 7361 6765 5f74 6872 6561 645f 6964 7d0d  sage_thread_id}.
+00013480: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
+00013490: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
+000134a0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+000134b0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000134c0: 6c6f 6164 290d 0a0d 0a61 7379 6e63 2064  load)....async d
+000134d0: 6566 2075 6e70 696e 5f61 6c6c 5f66 6f72  ef unpin_all_for
+000134e0: 756d 5f74 6f70 6963 5f6d 6573 7361 6765  um_topic_message
+000134f0: 7328 746f 6b65 6e2c 2063 6861 745f 6964  s(token, chat_id
+00013500: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
+00013510: 5f69 6429 3a0d 0a20 2020 206d 6574 686f  _id):..    metho
+00013520: 645f 7572 6c20 3d20 7227 756e 7069 6e41  d_url = r'unpinA
+00013530: 6c6c 466f 7275 6d54 6f70 6963 4d65 7373  llForumTopicMess
+00013540: 6167 6573 270d 0a20 2020 2070 6179 6c6f  ages'..    paylo
+00013550: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+00013560: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
+00013570: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
+00013580: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00013590: 7d0d 0a20 2020 2072 6574 7572 6e20 6177  }..    return aw
+000135a0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
+000135b0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+000135c0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+000135d0: 6179 6c6f 6164 290d 0a0d 0a61 7379 6e63  ayload)....async
+000135e0: 2064 6566 2067 6574 5f66 6f72 756d 5f74   def get_forum_t
+000135f0: 6f70 6963 5f69 636f 6e5f 7374 6963 6b65  opic_icon_sticke
+00013600: 7273 2874 6f6b 656e 293a 0d0a 2020 2020  rs(token):..    
+00013610: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
+00013620: 6574 466f 7275 6d54 6f70 6963 4963 6f6e  etForumTopicIcon
+00013630: 5374 6963 6b65 7273 270d 0a20 2020 2072  Stickers'..    r
+00013640: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00013650: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00013660: 656e 2c20 6d65 7468 6f64 5f75 726c 290d  en, method_url).
+00013670: 0a0d 0a61 7379 6e63 2064 6566 2065 6469  ...async def edi
+00013680: 745f 6765 6e65 7261 6c5f 666f 7275 6d5f  t_general_forum_
+00013690: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
+000136a0: 745f 6964 2c20 6e61 6d65 293a 0d0a 2020  t_id, name):..  
+000136b0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+000136c0: 2765 6469 7447 656e 6572 616c 466f 7275  'editGeneralForu
+000136d0: 6d54 6f70 6963 270d 0a20 2020 2070 6179  mTopic'..    pay
+000136e0: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+000136f0: 273a 2063 6861 745f 6964 2c20 276e 616d  ': chat_id, 'nam
+00013700: 6527 3a20 6e61 6d65 7d0d 0a20 2020 2072  e': name}..    r
+00013710: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+00013720: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00013730: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00013740: 7061 7261 6d73 3d70 6179 6c6f 6164 290d  params=payload).
+00013750: 0a0d 0a61 7379 6e63 2064 6566 2063 6c6f  ...async def clo
+00013760: 7365 5f67 656e 6572 616c 5f66 6f72 756d  se_general_forum
+00013770: 5f74 6f70 6963 2874 6f6b 656e 2c20 6368  _topic(token, ch
+00013780: 6174 5f69 6429 3a0d 0a20 2020 206d 6574  at_id):..    met
+00013790: 686f 645f 7572 6c20 3d20 7227 636c 6f73  hod_url = r'clos
+000137a0: 6547 656e 6572 616c 466f 7275 6d54 6f70  eGeneralForumTop
+000137b0: 6963 270d 0a20 2020 2070 6179 6c6f 6164  ic'..    payload
+000137c0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+000137d0: 6861 745f 6964 7d0d 0a20 2020 2072 6574  hat_id}..    ret
+000137e0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+000137f0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+00013800: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00013810: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+00013820: 0a61 7379 6e63 2064 6566 2072 656f 7065  .async def reope
+00013830: 6e5f 6765 6e65 7261 6c5f 666f 7275 6d5f  n_general_forum_
+00013840: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
+00013850: 745f 6964 293a 0d0a 2020 2020 6d65 7468  t_id):..    meth
+00013860: 6f64 5f75 726c 203d 2072 2772 656f 7065  od_url = r'reope
+00013870: 6e47 656e 6572 616c 466f 7275 6d54 6f70  nGeneralForumTop
+00013880: 6963 270d 0a20 2020 2070 6179 6c6f 6164  ic'..    payload
+00013890: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+000138a0: 6861 745f 6964 7d0d 0a20 2020 2072 6574  hat_id}..    ret
+000138b0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
+000138c0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
+000138d0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+000138e0: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+000138f0: 0a61 7379 6e63 2064 6566 2068 6964 655f  .async def hide_
+00013900: 6765 6e65 7261 6c5f 666f 7275 6d5f 746f  general_forum_to
+00013910: 7069 6328 746f 6b65 6e2c 2063 6861 745f  pic(token, chat_
+00013920: 6964 293a 0d0a 2020 2020 6d65 7468 6f64  id):..    method
+00013930: 5f75 726c 203d 2072 2768 6964 6547 656e  _url = r'hideGen
+00013940: 6572 616c 466f 7275 6d54 6f70 6963 270d  eralForumTopic'.
+00013950: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00013960: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00013970: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+00013980: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00013990: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+000139a0: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+000139b0: 3d70 6179 6c6f 6164 290d 0a0d 0a61 7379  =payload)....asy
+000139c0: 6e63 2064 6566 2075 6e68 6964 655f 6765  nc def unhide_ge
+000139d0: 6e65 7261 6c5f 666f 7275 6d5f 746f 7069  neral_forum_topi
+000139e0: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
+000139f0: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00013a00: 726c 203d 2072 2775 6e68 6964 6547 656e  rl = r'unhideGen
+00013a10: 6572 616c 466f 7275 6d54 6f70 6963 270d  eralForumTopic'.
+00013a20: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00013a30: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+00013a40: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+00013a50: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
+00013a60: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00013a70: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00013a80: 3d70 6179 6c6f 6164 290d 0a0d 0a61 7379  =payload)....asy
+00013a90: 6e63 2064 6566 205f 636f 6e76 6572 745f  nc def _convert_
+00013aa0: 6c69 7374 5f6a 736f 6e5f 7365 7269 616c  list_json_serial
+00013ab0: 697a 6162 6c65 2872 6573 756c 7473 293a  izable(results):
+00013ac0: 0d0a 2020 2020 7265 7420 3d20 2727 0d0a  ..    ret = ''..
+00013ad0: 2020 2020 666f 7220 7220 696e 2072 6573      for r in res
+00013ae0: 756c 7473 3a0d 0a20 2020 2020 2020 2069  ults:..        i
+00013af0: 6620 6973 696e 7374 616e 6365 2872 2c20  f isinstance(r, 
+00013b00: 7479 7065 732e 4a73 6f6e 5365 7269 616c  types.JsonSerial
+00013b10: 697a 6162 6c65 293a 0d0a 2020 2020 2020  izable):..      
+00013b20: 2020 2020 2020 7265 7420 3d20 7265 7420        ret = ret 
+00013b30: 2b20 722e 746f 5f6a 736f 6e28 2920 2b20  + r.to_json() + 
+00013b40: 272c 270d 0a20 2020 2069 6620 6c65 6e28  ','..    if len(
+00013b50: 7265 7429 203e 2030 3a0d 0a20 2020 2020  ret) > 0:..     
+00013b60: 2020 2072 6574 203d 2072 6574 5b3a 2d31     ret = ret[:-1
+00013b70: 5d0d 0a20 2020 2072 6574 7572 6e20 275b  ]..    return '[
+00013b80: 2720 2b20 7265 7420 2b20 275d 270d 0a0d  ' + ret + ']'...
+00013b90: 0a0d 0a0d 0a61 7379 6e63 2064 6566 205f  .....async def _
+00013ba0: 636f 6e76 6572 745f 656e 7469 7465 7328  convert_entites(
+00013bb0: 656e 7469 7465 7329 3a0d 0a20 2020 2069  entites):..    i
+00013bc0: 6620 656e 7469 7465 7320 6973 204e 6f6e  f entites is Non
+00013bd0: 653a 0d0a 2020 2020 2020 2020 7265 7475  e:..        retu
+00013be0: 726e 204e 6f6e 650d 0a20 2020 2065 6c69  rn None..    eli
+00013bf0: 6620 6c65 6e28 656e 7469 7465 7329 203d  f len(entites) =
+00013c00: 3d20 303a 0d0a 2020 2020 2020 2020 7265  = 0:..        re
+00013c10: 7475 726e 205b 5d0d 0a20 2020 2065 6c69  turn []..    eli
+00013c20: 6620 6973 696e 7374 616e 6365 2865 6e74  f isinstance(ent
+00013c30: 6974 6573 5b30 5d2c 2074 7970 6573 2e4a  ites[0], types.J
+00013c40: 736f 6e53 6572 6961 6c69 7a61 626c 6529  sonSerializable)
+00013c50: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00013c60: 6e20 5b65 6e74 6974 792e 746f 5f6a 736f  n [entity.to_jso
+00013c70: 6e28 2920 666f 7220 656e 7469 7479 2069  n() for entity i
+00013c80: 6e20 656e 7469 7465 735d 0d0a 2020 2020  n entites]..    
+00013c90: 656c 7365 3a0d 0a20 2020 2020 2020 2072  else:..        r
+00013ca0: 6574 7572 6e20 656e 7469 7465 730d 0a0d  eturn entites...
+00013cb0: 0a0d 0a61 7379 6e63 2064 6566 205f 636f  ...async def _co
+00013cc0: 6e76 6572 745f 706f 6c6c 5f6f 7074 696f  nvert_poll_optio
+00013cd0: 6e73 2870 6f6c 6c5f 6f70 7469 6f6e 7329  ns(poll_options)
+00013ce0: 3a0d 0a20 2020 2069 6620 706f 6c6c 5f6f  :..    if poll_o
+00013cf0: 7074 696f 6e73 2069 7320 4e6f 6e65 3a0d  ptions is None:.
+00013d00: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013d10: 4e6f 6e65 0d0a 2020 2020 656c 6966 206c  None..    elif l
+00013d20: 656e 2870 6f6c 6c5f 6f70 7469 6f6e 7329  en(poll_options)
+00013d30: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+00013d40: 7265 7475 726e 205b 5d0d 0a20 2020 2065  return []..    e
+00013d50: 6c69 6620 6973 696e 7374 616e 6365 2870  lif isinstance(p
+00013d60: 6f6c 6c5f 6f70 7469 6f6e 735b 305d 2c20  oll_options[0], 
+00013d70: 7374 7229 3a0d 0a20 2020 2020 2020 2023  str):..        #
+00013d80: 2043 6f6d 7061 7469 6269 6c69 7479 206d   Compatibility m
+00013d90: 6f64 6520 7769 7468 2070 7265 7669 6f75  ode with previou
+00013da0: 7320 6275 6720 7768 656e 206f 6e6c 7920  s bug when only 
+00013db0: 6c69 7374 206f 6620 7374 7269 6e67 2077  list of string w
+00013dc0: 6173 2061 6363 6570 7465 6420 6173 2070  as accepted as p
+00013dd0: 6f6c 6c5f 6f70 7469 6f6e 730d 0a20 2020  oll_options..   
+00013de0: 2020 2020 2072 6574 7572 6e20 706f 6c6c       return poll
+00013df0: 5f6f 7074 696f 6e73 0d0a 2020 2020 656c  _options..    el
+00013e00: 6966 2069 7369 6e73 7461 6e63 6528 706f  if isinstance(po
+00013e10: 6c6c 5f6f 7074 696f 6e73 5b30 5d2c 2074  ll_options[0], t
+00013e20: 7970 6573 2e50 6f6c 6c4f 7074 696f 6e29  ypes.PollOption)
+00013e30: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00013e40: 6e20 5b6f 7074 696f 6e2e 7465 7874 2066  n [option.text f
+00013e50: 6f72 206f 7074 696f 6e20 696e 2070 6f6c  or option in pol
+00013e60: 6c5f 6f70 7469 6f6e 735d 0d0a 2020 2020  l_options]..    
+00013e70: 656c 7365 3a0d 0a20 2020 2020 2020 2072  else:..        r
+00013e80: 6574 7572 6e20 706f 6c6c 5f6f 7074 696f  eturn poll_optio
+00013e90: 6e73 0d0a 0d0a 0d0a 6173 796e 6320 6465  ns......async de
+00013ea0: 6620 636f 6e76 6572 745f 696e 7075 745f  f convert_input_
+00013eb0: 6d65 6469 6128 6d65 6469 6129 3a0d 0a20  media(media):.. 
+00013ec0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00013ed0: 286d 6564 6961 2c20 7479 7065 732e 496e  (media, types.In
+00013ee0: 7075 744d 6564 6961 293a 0d0a 2020 2020  putMedia):..    
+00013ef0: 2020 2020 7265 7475 726e 206d 6564 6961      return media
+00013f00: 2e63 6f6e 7665 7274 5f69 6e70 7574 5f6d  .convert_input_m
+00013f10: 6564 6961 2829 0d0a 2020 2020 7265 7475  edia()..    retu
+00013f20: 726e 204e 6f6e 652c 204e 6f6e 650d 0a0d  rn None, None...
+00013f30: 0a0d 0a61 7379 6e63 2064 6566 2063 6f6e  ...async def con
+00013f40: 7665 7274 5f69 6e70 7574 5f6d 6564 6961  vert_input_media
+00013f50: 5f61 7272 6179 2861 7272 6179 293a 0d0a  _array(array):..
+00013f60: 2020 2020 6d65 6469 6120 3d20 5b5d 0d0a      media = []..
+00013f70: 2020 2020 6669 6c65 7320 3d20 7b7d 0d0a      files = {}..
+00013f80: 2020 2020 666f 7220 696e 7075 745f 6d65      for input_me
+00013f90: 6469 6120 696e 2061 7272 6179 3a0d 0a20  dia in array:.. 
+00013fa0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00013fb0: 616e 6365 2869 6e70 7574 5f6d 6564 6961  ance(input_media
+00013fc0: 2c20 7479 7065 732e 496e 7075 744d 6564  , types.InputMed
+00013fd0: 6961 293a 0d0a 2020 2020 2020 2020 2020  ia):..          
+00013fe0: 2020 6d65 6469 615f 6469 6374 203d 2069    media_dict = i
+00013ff0: 6e70 7574 5f6d 6564 6961 2e74 6f5f 6469  nput_media.to_di
+00014000: 6374 2829 0d0a 2020 2020 2020 2020 2020  ct()..          
+00014010: 2020 6966 206d 6564 6961 5f64 6963 745b    if media_dict[
+00014020: 276d 6564 6961 275d 2e73 7461 7274 7377  'media'].startsw
+00014030: 6974 6828 2761 7474 6163 683a 2f2f 2729  ith('attach://')
+00014040: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00014050: 2020 206b 6579 203d 206d 6564 6961 5f64     key = media_d
+00014060: 6963 745b 276d 6564 6961 275d 2e72 6570  ict['media'].rep
+00014070: 6c61 6365 2827 6174 7461 6368 3a2f 2f27  lace('attach://'
+00014080: 2c20 2727 290d 0a20 2020 2020 2020 2020  , '')..         
+00014090: 2020 2020 2020 2066 696c 6573 5b6b 6579         files[key
+000140a0: 5d20 3d20 696e 7075 745f 6d65 6469 612e  ] = input_media.
+000140b0: 6d65 6469 610d 0a20 2020 2020 2020 2020  media..         
+000140c0: 2020 206d 6564 6961 2e61 7070 656e 6428     media.append(
+000140d0: 6d65 6469 615f 6469 6374 290d 0a20 2020  media_dict)..   
+000140e0: 2072 6574 7572 6e20 6a73 6f6e 2e64 756d   return json.dum
+000140f0: 7073 286d 6564 6961 292c 2066 696c 6573  ps(media), files
+00014100: 0d0a 0d0a 0d0a 6173 796e 6320 6465 6620  ......async def 
+00014110: 5f6e 6f5f 656e 636f 6465 2866 756e 6329  _no_encode(func)
+00014120: 3a0d 0a20 2020 2064 6566 2077 7261 7070  :..    def wrapp
+00014130: 6572 286b 6579 2c20 7661 6c29 3a0d 0a20  er(key, val):.. 
+00014140: 2020 2020 2020 2069 6620 6b65 7920 3d3d         if key ==
+00014150: 2027 6669 6c65 6e61 6d65 273a 0d0a 2020   'filename':..  
+00014160: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00014170: 2075 277b 307d 3d7b 317d 272e 666f 726d   u'{0}={1}'.form
+00014180: 6174 286b 6579 2c20 7661 6c29 0d0a 2020  at(key, val)..  
+00014190: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000141a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000141b0: 6675 6e63 286b 6579 2c20 7661 6c29 0d0a  func(key, val)..
+000141c0: 0d0a 2020 2020 7265 7475 726e 2077 7261  ..    return wra
+000141d0: 7070 6572 0d0a 0d0a 6173 796e 6320 6465  pper....async de
+000141e0: 6620 7374 6f70 5f70 6f6c 6c28 746f 6b65  f stop_poll(toke
+000141f0: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
+00014200: 6167 655f 6964 2c20 7265 706c 795f 6d61  age_id, reply_ma
+00014210: 726b 7570 3d4e 6f6e 6529 3a0d 0a20 2020  rkup=None):..   
+00014220: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00014230: 7374 6f70 506f 6c6c 270d 0a20 2020 2070  stopPoll'..    p
+00014240: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+00014250: 6964 273a 2073 7472 2863 6861 745f 6964  id': str(chat_id
+00014260: 292c 2027 6d65 7373 6167 655f 6964 273a  ), 'message_id':
+00014270: 206d 6573 7361 6765 5f69 647d 0d0a 2020   message_id}..  
+00014280: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00014290: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+000142a0: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+000142b0: 7027 5d20 3d20 6177 6169 7420 5f63 6f6e  p'] = await _con
+000142c0: 7665 7274 5f6d 6172 6b75 7028 7265 706c  vert_markup(repl
+000142d0: 795f 6d61 726b 7570 290d 0a20 2020 2072  y_markup)..    r
+000142e0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
+000142f0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
+00014300: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00014310: 7061 7261 6d73 3d70 6179 6c6f 6164 290d  params=payload).
+00014320: 0a0d 0a23 2065 7863 6570 7469 6f6e 730d  ...# exceptions.
+00014330: 0a63 6c61 7373 2041 7069 4578 6365 7074  .class ApiExcept
+00014340: 696f 6e28 4578 6365 7074 696f 6e29 3a0d  ion(Exception):.
+00014350: 0a20 2020 2022 2222 0d0a 2020 2020 5468  .    """..    Th
+00014360: 6973 2063 6c61 7373 2072 6570 7265 7365  is class represe
+00014370: 6e74 7320 6120 6261 7365 2045 7863 6570  nts a base Excep
+00014380: 7469 6f6e 2074 6872 6f77 6e20 7768 656e  tion thrown when
+00014390: 2061 2063 616c 6c20 746f 2074 6865 2054   a call to the T
+000143a0: 656c 6567 7261 6d20 4150 4920 6661 696c  elegram API fail
+000143b0: 732e 0d0a 2020 2020 496e 2061 6464 6974  s...    In addit
+000143c0: 696f 6e20 746f 2061 6e20 696e 666f 726d  ion to an inform
+000143d0: 6174 6976 6520 6d65 7373 6167 652c 2069  ative message, i
+000143e0: 7420 6861 7320 6120 6066 756e 6374 696f  t has a `functio
+000143f0: 6e5f 6e61 6d65 6020 616e 6420 6120 6072  n_name` and a `r
+00014400: 6573 756c 7460 2061 7474 7269 6275 7465  esult` attribute
+00014410: 2c20 7768 6963 6820 7265 7370 6563 7469  , which respecti
+00014420: 7665 6c79 0d0a 2020 2020 636f 6e74 6169  vely..    contai
+00014430: 6e20 7468 6520 6e61 6d65 206f 6620 7468  n the name of th
+00014440: 6520 6661 696c 6564 2066 756e 6374 696f  e failed functio
+00014450: 6e20 616e 6420 7468 6520 7265 7475 726e  n and the return
+00014460: 6564 2072 6573 756c 7420 7468 6174 206d  ed result that m
+00014470: 6164 6520 7468 6520 6675 6e63 7469 6f6e  ade the function
+00014480: 2074 6f20 6265 2063 6f6e 7369 6465 7265   to be considere
+00014490: 6420 2061 730d 0a20 2020 2066 6169 6c65  d  as..    faile
+000144a0: 642e 0d0a 2020 2020 2222 220d 0a0d 0a20  d...    """.... 
+000144b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000144c0: 7365 6c66 2c20 6d73 672c 2066 756e 6374  self, msg, funct
+000144d0: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+000144e0: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
+000144f0: 7228 4170 6945 7863 6570 7469 6f6e 2c20  r(ApiException, 
+00014500: 7365 6c66 292e 5f5f 696e 6974 5f5f 2822  self).__init__("
+00014510: 4120 7265 7175 6573 7420 746f 2074 6865  A request to the
+00014520: 2054 656c 6567 7261 6d20 4150 4920 7761   Telegram API wa
+00014530: 7320 756e 7375 6363 6573 7366 756c 2e20  s unsuccessful. 
+00014540: 7b30 7d22 2e66 6f72 6d61 7428 6d73 6729  {0}".format(msg)
+00014550: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00014560: 6675 6e63 7469 6f6e 5f6e 616d 6520 3d20  function_name = 
+00014570: 6675 6e63 7469 6f6e 5f6e 616d 650d 0a20  function_name.. 
+00014580: 2020 2020 2020 2073 656c 662e 7265 7375         self.resu
+00014590: 6c74 203d 2072 6573 756c 740d 0a20 2020  lt = result..   
+000145a0: 200d 0a63 6c61 7373 2041 7069 4854 5450   ..class ApiHTTP
+000145b0: 4578 6365 7074 696f 6e28 4170 6945 7863  Exception(ApiExc
+000145c0: 6570 7469 6f6e 293a 0d0a 2020 2020 2222  eption):..    ""
+000145d0: 220d 0a20 2020 2054 6869 7320 636c 6173  "..    This clas
+000145e0: 7320 7265 7072 6573 656e 7473 2061 6e20  s represents an 
+000145f0: 4578 6365 7074 696f 6e20 7468 726f 776e  Exception thrown
+00014600: 2077 6865 6e20 6120 6361 6c6c 2074 6f20   when a call to 
+00014610: 7468 6520 0d0a 2020 2020 5465 6c65 6772  the ..    Telegr
+00014620: 616d 2041 5049 2073 6572 7665 7220 7265  am API server re
+00014630: 7475 726e 7320 4854 5450 2063 6f64 6520  turns HTTP code 
+00014640: 7468 6174 2069 7320 6e6f 7420 3230 302e  that is not 200.
+00014650: 0d0a 2020 2020 2222 220d 0a20 2020 2064  ..    """..    d
+00014660: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00014670: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
+00014680: 2072 6573 756c 7429 3a0d 0a20 2020 2020   result):..     
+00014690: 2020 2073 7570 6572 2841 7069 4854 5450     super(ApiHTTP
+000146a0: 4578 6365 7074 696f 6e2c 2073 656c 6629  Exception, self)
+000146b0: 2e5f 5f69 6e69 745f 5f28 0d0a 2020 2020  .__init__(..    
+000146c0: 2020 2020 2020 2020 2254 6865 2073 6572          "The ser
+000146d0: 7665 7220 7265 7475 726e 6564 2048 5454  ver returned HTT
+000146e0: 5020 7b30 7d20 7b31 7d2e 2052 6573 706f  P {0} {1}. Respo
+000146f0: 6e73 6520 626f 6479 3a5c 6e5b 7b32 7d5d  nse body:\n[{2}]
+00014700: 2220 5c0d 0a20 2020 2020 2020 2020 2020  " \..           
+00014710: 202e 666f 726d 6174 2872 6573 756c 742e   .format(result.
+00014720: 7374 6174 7573 5f63 6f64 652c 2072 6573  status_code, res
+00014730: 756c 742e 7265 6173 6f6e 2c20 7265 7375  ult.reason, resu
+00014740: 6c74 292c 0d0a 2020 2020 2020 2020 2020  lt),..          
+00014750: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
+00014760: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00014770: 7375 6c74 290d 0a20 2020 200d 0a63 6c61  sult)..    ..cla
+00014780: 7373 2041 7069 496e 7661 6c69 644a 534f  ss ApiInvalidJSO
+00014790: 4e45 7863 6570 7469 6f6e 2841 7069 4578  NException(ApiEx
+000147a0: 6365 7074 696f 6e29 3a0d 0a20 2020 2022  ception):..    "
+000147b0: 2222 0d0a 2020 2020 5468 6973 2063 6c61  ""..    This cla
+000147c0: 7373 2072 6570 7265 7365 6e74 7320 616e  ss represents an
+000147d0: 2045 7863 6570 7469 6f6e 2074 6872 6f77   Exception throw
+000147e0: 6e20 7768 656e 2061 2063 616c 6c20 746f  n when a call to
+000147f0: 2074 6865 200d 0a20 2020 2054 656c 6567   the ..    Teleg
+00014800: 7261 6d20 4150 4920 7365 7276 6572 2072  ram API server r
+00014810: 6574 7572 6e73 2069 6e76 616c 6964 206a  eturns invalid j
+00014820: 736f 6e2e 0d0a 2020 2020 2222 220d 0a20  son...    """.. 
+00014830: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00014840: 7365 6c66 2c20 6675 6e63 7469 6f6e 5f6e  self, function_n
+00014850: 616d 652c 2072 6573 756c 7429 3a0d 0a20  ame, result):.. 
+00014860: 2020 2020 2020 2073 7570 6572 2841 7069         super(Api
+00014870: 496e 7661 6c69 644a 534f 4e45 7863 6570  InvalidJSONExcep
+00014880: 7469 6f6e 2c20 7365 6c66 292e 5f5f 696e  tion, self).__in
+00014890: 6974 5f5f 280d 0a20 2020 2020 2020 2020  it__(..         
+000148a0: 2020 2022 5468 6520 7365 7276 6572 2072     "The server r
+000148b0: 6574 7572 6e65 6420 616e 2069 6e76 616c  eturned an inval
+000148c0: 6964 204a 534f 4e20 7265 7370 6f6e 7365  id JSON response
+000148d0: 2e20 5265 7370 6f6e 7365 2062 6f64 793a  . Response body:
+000148e0: 5c6e 5b7b 307d 5d22 205c 0d0a 2020 2020  \n[{0}]" \..    
+000148f0: 2020 2020 2020 2020 2e66 6f72 6d61 7428          .format(
+00014900: 7265 7375 6c74 292c 0d0a 2020 2020 2020  result),..      
+00014910: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+00014920: 616d 652c 0d0a 2020 2020 2020 2020 2020  ame,..          
+00014930: 2020 7265 7375 6c74 290d 0a20 2020 200d    result)..    .
+00014940: 0a63 6c61 7373 2041 7069 5465 6c65 6772  .class ApiTelegr
+00014950: 616d 4578 6365 7074 696f 6e28 4170 6945  amException(ApiE
+00014960: 7863 6570 7469 6f6e 293a 0d0a 2020 2020  xception):..    
+00014970: 2222 220d 0a20 2020 2054 6869 7320 636c  """..    This cl
+00014980: 6173 7320 7265 7072 6573 656e 7473 2061  ass represents a
+00014990: 6e20 4578 6365 7074 696f 6e20 7468 726f  n Exception thro
+000149a0: 776e 2077 6865 6e20 6120 5465 6c65 6772  wn when a Telegr
+000149b0: 616d 2041 5049 2072 6574 7572 6e73 2065  am API returns e
+000149c0: 7272 6f72 2063 6f64 652e 0d0a 2020 2020  rror code...    
+000149d0: 2222 220d 0a20 2020 2064 6566 205f 5f69  """..    def __i
+000149e0: 6e69 745f 5f28 7365 6c66 2c20 6675 6e63  nit__(self, func
+000149f0: 7469 6f6e 5f6e 616d 652c 2072 6573 756c  tion_name, resul
+00014a00: 742c 2072 6573 756c 745f 6a73 6f6e 293a  t, result_json):
+00014a10: 0d0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00014a20: 4170 6954 656c 6567 7261 6d45 7863 6570  ApiTelegramExcep
+00014a30: 7469 6f6e 2c20 7365 6c66 292e 5f5f 696e  tion, self).__in
+00014a40: 6974 5f5f 280d 0a20 2020 2020 2020 2020  it__(..         
+00014a50: 2020 2022 4572 726f 7220 636f 6465 3a20     "Error code: 
+00014a60: 7b30 7d2e 2044 6573 6372 6970 7469 6f6e  {0}. Description
+00014a70: 3a20 7b31 7d22 205c 0d0a 2020 2020 2020  : {1}" \..      
+00014a80: 2020 2020 2020 2e66 6f72 6d61 7428 7265        .format(re
+00014a90: 7375 6c74 5f6a 736f 6e5b 2765 7272 6f72  sult_json['error
+00014aa0: 5f63 6f64 6527 5d2c 2072 6573 756c 745f  _code'], result_
+00014ab0: 6a73 6f6e 5b27 6465 7363 7269 7074 696f  json['descriptio
+00014ac0: 6e27 5d29 2c0d 0a20 2020 2020 2020 2020  n']),..         
+00014ad0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+00014ae0: 2c0d 0a20 2020 2020 2020 2020 2020 2072  ,..            r
+00014af0: 6573 756c 7429 0d0a 2020 2020 2020 2020  esult)..        
+00014b00: 7365 6c66 2e72 6573 756c 745f 6a73 6f6e  self.result_json
+00014b10: 203d 2072 6573 756c 745f 6a73 6f6e 0d0a   = result_json..
+00014b20: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00014b30: 6f72 5f63 6f64 6520 3d20 7265 7375 6c74  or_code = result
+00014b40: 5f6a 736f 6e5b 2765 7272 6f72 5f63 6f64  _json['error_cod
+00014b50: 6527 5d0d 0a20 2020 2020 2020 2073 656c  e']..        sel
+00014b60: 662e 6465 7363 7269 7074 696f 6e20 3d20  f.description = 
+00014b70: 7265 7375 6c74 5f6a 736f 6e5b 2764 6573  result_json['des
+00014b80: 6372 6970 7469 6f6e 275d 0d0a 0d0a 636c  cription']....cl
+00014b90: 6173 7320 5265 7175 6573 7454 696d 656f  ass RequestTimeo
+00014ba0: 7574 2845 7863 6570 7469 6f6e 293a 0d0a  ut(Exception):..
+00014bb0: 2020 2020 2222 220d 0a20 2020 2054 6869      """..    Thi
+00014bc0: 7320 636c 6173 7320 7265 7072 6573 656e  s class represen
+00014bd0: 7473 2061 2072 6571 7565 7374 2074 696d  ts a request tim
+00014be0: 656f 7574 2e0d 0a20 2020 2022 2222 0d0a  eout...    """..
+00014bf0: 2020 2020 7061 7373 0d0a                     pass..
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/async_telebot.py` & `pyTelegramBotAPI-4.9.0/telebot/async_telebot.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,5728 +1,5815 @@
-# -*- coding: utf-8 -*-
-from datetime import datetime
-
-import logging
-import re
-import traceback
-from typing import Any, Awaitable, Callable, List, Optional, Union
-import sys
-
-# this imports are used to avoid circular import error
-import telebot.util
-import telebot.types
-
-
-# storages
-from telebot.asyncio_storage import StateMemoryStorage, StatePickleStorage, StateStorageBase
-from telebot.asyncio_handler_backends import BaseMiddleware, CancelUpdate, SkipHandler, State, ContinueHandling
-
-from inspect import signature
-
-from telebot import util, types, asyncio_helper
-import asyncio
-from telebot import asyncio_filters
-
-logger = logging.getLogger('TeleBot')
-
-REPLY_MARKUP_TYPES = Union[
-    types.InlineKeyboardMarkup, types.ReplyKeyboardMarkup, 
-    types.ReplyKeyboardRemove, types.ForceReply]
-
-
-import string
-import random
-import ssl
-
-
-"""
-Module : telebot
-"""
-
-
-class Handler:
-    """
-    Class for (next step|reply) handlers
-    """
-    def __init__(self, callback, *args, **kwargs):
-        self.callback = callback
-        self.args = args
-        self.kwargs = kwargs
-
-    def __getitem__(self, item):
-        return getattr(self, item)
-
-
-class ExceptionHandler:
-    """
-    Class for handling exceptions while Polling
-    """
-
-    # noinspection PyMethodMayBeStatic,PyUnusedLocal
-    def handle(self, exception):
-        return False
-
-
-class AsyncTeleBot:
-    """
-    This is the main asynchronous class for Bot.
-
-    It allows you to add handlers for different kind of updates.
-
-    Usage:
-
-    .. code-block:: python3
-        :caption: Using asynchronous implementation of TeleBot.
-
-        from telebot.async_telebot import AsyncTeleBot
-        bot = AsyncTeleBot('token') # get token from @BotFather
-        # now you can register other handlers/update listeners, 
-        # and use bot methods.
-        # Remember to use async/await keywords when necessary.
-
-    See more examples in examples/ directory:
-    https://github.com/eternnoir/pyTelegramBotAPI/tree/master/examples
-
-    .. note::
-
-        Install coloredlogs module to specify colorful_logs=True
-
-
-    :param token: Token of a bot, obtained from @BotFather
-    :type token: :obj:`str`
-
-    :param parse_mode: Default parse mode, defaults to None
-    :type parse_mode: :obj:`str`, optional
-
-    :param offset: Offset used in get_updates, defaults to None
-    :type offset: :obj:`int`, optional
-
-    :param exception_handler: Exception handler, which will handle the exception occured, defaults to None
-    :type exception_handler: Optional[ExceptionHandler], optional
-
-    :param state_storage: Storage for states, defaults to StateMemoryStorage()
-    :type state_storage: :class:`telebot.asyncio_storage.StateMemoryStorage`, optional
-
-    :param disable_web_page_preview: Default value for disable_web_page_preview, defaults to None
-    :type disable_web_page_preview: :obj:`bool`, optional
-
-    :param disable_notification: Default value for disable_notification, defaults to None
-    :type disable_notification: :obj:`bool`, optional
-
-    :param protect_content: Default value for protect_content, defaults to None
-    :type protect_content: :obj:`bool`, optional
-
-    :param allow_sending_without_reply: Default value for allow_sending_without_reply, defaults to None
-    :type allow_sending_without_reply: :obj:`bool`, optional
-    
-    :param colorful_logs: Outputs colorful logs
-    :type colorful_logs: :obj:`bool`, optional
-
-    """
-
-    def __init__(self, token: str, parse_mode: Optional[str]=None, offset: Optional[int]=None,
-                exception_handler: Optional[ExceptionHandler]=None,
-                state_storage: Optional[StateStorageBase]=StateMemoryStorage(),
-                disable_web_page_preview: Optional[bool]=None,
-                disable_notification: Optional[bool]=None,
-                protect_content: Optional[bool]=None,
-                allow_sending_without_reply: Optional[bool]=None,
-                colorful_logs: Optional[bool]=False) -> None:
-        
-        # update-related
-        self.token = token
-        self.offset = offset
-
-        # logs-related
-        if colorful_logs:
-            try:
-                import coloredlogs
-                coloredlogs.install(logger=logger, level=logger.level)
-            except ImportError:
-                raise ImportError(
-                    'Install colorredlogs module to use colorful_logs option.'
-                )
-                
-        # properties
-        self.parse_mode = parse_mode
-        self.disable_web_page_preview = disable_web_page_preview
-        self.disable_notification = disable_notification
-        self.protect_content = protect_content
-        self.allow_sending_without_reply = allow_sending_without_reply
-
-        # states
-        self.current_states = state_storage
-
-        # handlers
-        self.update_listener = []
-        self.exception_handler = exception_handler
-        self.message_handlers = []
-        self.edited_message_handlers = []
-        self.channel_post_handlers = []
-        self.edited_channel_post_handlers = []
-        self.inline_handlers = []
-        self.chosen_inline_handlers = []
-        self.callback_query_handlers = []
-        self.shipping_query_handlers = []
-        self.pre_checkout_query_handlers = []
-        self.poll_handlers = []
-        self.poll_answer_handlers = []
-        self.my_chat_member_handlers = []
-        self.chat_member_handlers = []
-        self.chat_join_request_handlers = []
-        self.custom_filters = {}
-        self.state_handlers = []
-        self.middlewares = []
-
-        self._user = None # set during polling
-
-    @property
-    def user(self):
-        return self._user
-
-    async def close_session(self):
-        """
-        Closes existing session of aiohttp.
-        Use this function if you stop polling/webhooks.
-        """
-        await asyncio_helper.session_manager.session.close()
-
-    async def get_updates(self, offset: Optional[int]=None, limit: Optional[int]=None,
-        timeout: Optional[int]=20, allowed_updates: Optional[List]=None, request_timeout: Optional[int]=None) -> List[types.Update]:
-        """
-        Use this method to receive incoming updates using long polling (wiki). An Array of Update objects is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getupdates
-
-
-        :param offset: Identifier of the first update to be returned. Must be greater by one than the highest among the identifiers of previously received updates.
-            By default, updates starting with the earliest unconfirmed update are returned. An update is considered confirmed as soon as getUpdates is called with an offset
-            higher than its update_id. The negative offset can be specified to retrieve updates starting from -offset update from the end of the updates queue.
-            All previous updates will forgotten.
-        :type offset: :obj:`int`, optional
-
-        :param limit: Limits the number of updates to be retrieved. Values between 1-100 are accepted. Defaults to 100.
-        :type limit: :obj:`int`, optional
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`, optional
-
-        :param allowed_updates: Array of string. List the types of updates you want your bot to receive.
-        :type allowed_updates: :obj:`list`, optional
-
-        :param long_polling_timeout: Timeout in seconds for long polling.
-        :type long_polling_timeout: :obj:`int`, optional
-
-        :return: An Array of Update objects is returned.
-        :rtype: :obj:`list` of :class:`telebot.types.Update`
-        """       
-        json_updates = await asyncio_helper.get_updates(self.token, offset, limit, timeout, allowed_updates, request_timeout)
-        return [types.Update.de_json(ju) for ju in json_updates]
-
-    def _setup_change_detector(self, path_to_watch: str) -> None:
-        try:
-            from watchdog.observers import Observer
-            from telebot.ext.reloader import EventHandler
-        except ImportError:
-            raise ImportError(
-                'Please install watchdog and psutil before using restart_on_change option.'
-            )
-
-        self.event_handler = EventHandler()
-        path = path_to_watch if path_to_watch else None
-        if path is None:
-            # Make it possible to specify --path argument to the script
-            path = sys.argv[sys.argv.index('--path') + 1] if '--path' in sys.argv else '.'
-            
-        self.event_observer = Observer()
-        self.event_observer.schedule(self.event_handler, path, recursive=True)
-        self.event_observer.start()
-
-    async def polling(self, non_stop: bool=False, skip_pending=False, interval: int=0, timeout: int=20,
-            request_timeout: Optional[int]=None, allowed_updates: Optional[List[str]]=None,
-            none_stop: Optional[bool]=None, restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None):
-        """
-        Runs bot in long-polling mode in a main loop.
-        This allows the bot to retrieve Updates automagically and notify listeners and message handlers accordingly.
-
-        Warning: Do not call this function more than once!
-        
-        Always gets updates.
-
-        .. note::
-
-            Set non_stop=True if you want your bot to continue receiving updates
-            if there is an error.
-
-        .. note::
-
-            Install watchdog and psutil before using restart_on_change option.
-
-        :param non_stop: Do not stop polling when an ApiException occurs.
-        :type non_stop: :obj:`bool`
-        
-        :param skip_pending: skip old updates
-        :type skip_pending: :obj:`bool`
-
-        :param interval: Delay between two update retrivals
-        :type interval: :obj:`int`
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`
-        
-        :param request_timeout: Timeout in seconds for get_updates(Defaults to None)
-        :type request_timeout: :obj:`int`
-
-        :param allowed_updates: A list of the update types you want your bot to receive.
-            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
-            See util.update_types for a complete list of available update types. 
-            Specify an empty list to receive all update types except chat_member (default). 
-            If not specified, the previous setting will be used.
-            
-            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
-            so unwanted updates may be received for a short period of time.
-        :type allowed_updates: :obj:`list` of :obj:`str`
-
-        :param none_stop: Deprecated, use non_stop. Old typo, kept for backward compatibility.
-        :type none_stop: :obj:`bool`
-
-        :param restart_on_change: Restart a file on file(s) change. Defaults to False.
-        :type restart_on_change: :obj:`bool`
-
-        :param path_to_watch: Path to watch for changes. Defaults to current directory
-        :type path_to_watch: :obj:`str`
-        
-        :return:
-        """
-        if none_stop is not None:
-            logger.warning("polling: none_stop parameter is deprecated. Use non_stop instead.")
-            non_stop = none_stop
-
-        if skip_pending:
-            await self.skip_updates()
-
-        if restart_on_change:
-            self._setup_change_detector(path_to_watch)
-
-        await self._process_polling(non_stop, interval, timeout, request_timeout, allowed_updates)
-
-    async def infinity_polling(self, timeout: Optional[int]=20, skip_pending: Optional[bool]=False, request_timeout: Optional[int]=None,
-            logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
-            restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None, *args, **kwargs):
-        """
-        Wrap polling with infinite loop and exception handling to avoid bot stops polling.
-
-        .. note::
-            Install watchdog and psutil before using restart_on_change option.
-
-        :param timeout: Timeout in seconds for get_updates(Defaults to None)
-        :type timeout: :obj:`int`
-
-        :param skip_pending: skip old updates
-        :type skip_pending: :obj:`bool`
-
-        :param request_timeout: Aiohttp's request timeout. Defaults to 5 minutes(aiohttp.ClientTimeout).
-        :type request_timeout: :obj:`int`
-
-        :param logger_level: Custom logging level for infinity_polling logging.
-            Use logger levels from logging as a value. None/NOTSET = no error logging
-        :type logger_level: :obj:`int`
-
-        :param allowed_updates: A list of the update types you want your bot to receive.
-            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
-            See util.update_types for a complete list of available update types. 
-            Specify an empty list to receive all update types except chat_member (default). 
-            If not specified, the previous setting will be used.
-            
-            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
-            so unwanted updates may be received for a short period of time.
-        :type allowed_updates: :obj:`list` of :obj:`str`
-
-        :param restart_on_change: Restart a file on file(s) change. Defaults to False
-        :type restart_on_change: :obj:`bool`
-
-        :param path_to_watch: Path to watch for changes. Defaults to current directory
-        :type path_to_watch: :obj:`str`
-
-        :return: None
-        """
-        if skip_pending:
-            await self.skip_updates()
-        self._polling = True
-
-        if restart_on_change:
-            self._setup_change_detector(path_to_watch)
-
-        while self._polling:
-            try:
-                await self._process_polling(non_stop=True, timeout=timeout, request_timeout=request_timeout,
-                             allowed_updates=allowed_updates, *args, **kwargs)
-            except Exception as e:
-                if logger_level and logger_level >= logging.ERROR:
-                    logger.error("Infinity polling exception: %s", str(e))
-                if logger_level and logger_level >= logging.DEBUG:
-                    logger.error("Exception traceback:\n%s", traceback.format_exc())
-                await asyncio.sleep(3)
-                continue
-            if logger_level and logger_level >= logging.INFO:
-                logger.error("Infinity polling: polling exited")
-        if logger_level and logger_level >= logging.INFO:
-            logger.error("Break infinity polling")
-
-    async def _process_polling(self, non_stop: bool=False, interval: int=0, timeout: int=20,
-            request_timeout: int=None, allowed_updates: Optional[List[str]]=None):
-        """
-        Function to process polling.
-
-        :param non_stop: Do not stop polling when an ApiException occurs.
-        :param interval: Delay between two update retrivals
-        :param timeout: Request connection timeout
-        :param request_timeout: Timeout in seconds for long polling (see API docs)
-        :param allowed_updates: A list of the update types you want your bot to receive.
-            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types.
-            See util.update_types for a complete list of available update types.
-            Specify an empty list to receive all update types except chat_member (default).
-            If not specified, the previous setting will be used.
-
-            Please note that this parameter doesn't affect updates created before the call to the get_updates,
-            so unwanted updates may be received for a short period of time.
-
-        :return:
-
-        """
-
-        if not non_stop:
-            # show warning
-            logger.warning("Setting non_stop to False will stop polling on API and system exceptions.")
-
-        self._user = await self.get_me()
-            
-        logger.info('Starting your bot with username: [@%s]', self.user.username)
-
-        self._polling = True
-
-        try:
-            while self._polling:
-                try:
-                    
-                    updates = await self.get_updates(offset=self.offset, allowed_updates=allowed_updates, timeout=timeout, request_timeout=request_timeout)
-                    if updates:
-                        self.offset = updates[-1].update_id + 1
-                        asyncio.create_task(self.process_new_updates(updates)) # Seperate task for processing updates
-                    if interval: await asyncio.sleep(interval)
-
-                except KeyboardInterrupt:
-                    return
-                except asyncio.CancelledError:
-                    return
-                except asyncio_helper.RequestTimeout as e:
-                    logger.error(str(e))
-                    if non_stop:
-                        await asyncio.sleep(2)
-                        continue
-                    else:
-                        return
-                except asyncio_helper.ApiException as e:
-                    handled = False
-                    if self.exception_handler:
-                        self.exception_handler.handle(e)
-                        handled = True
-
-                    if not handled:
-                        logger.error('Unhandled exception (full traceback for debug level): %s', str(e))
-                        logger.debug(traceback.format_exc())
-
-                    if non_stop or handled:
-                        continue
-                    else:
-                        break
-                except Exception as e:
-                    handled = False
-                    if self.exception_handler:
-                        self.exception_handler.handle(e)
-                        handled = True
-
-                    if not handled:
-                        logger.error('Unhandled exception (full traceback for debug level): %s', str(e))
-                        logger.debug(traceback.format_exc())
-
-                    if non_stop or handled:
-                        continue
-                    else:
-                        break
-        finally:
-            self._polling = False
-            await self.close_session()
-            logger.warning('Polling is stopped.')
-
-    @staticmethod
-    def _loop_create_task(coro):
-        return asyncio.create_task(coro)
-
-    async def _process_updates(self, handlers, messages, update_type):
-        """
-        Process updates.
-
-        :param handlers:
-        :param messages:
-        :return:
-        """
-        tasks = []
-        middlewares = await self._get_middlewares(update_type)
-        for message in messages:
-            tasks.append(self._run_middlewares_and_handlers(message, handlers, middlewares, update_type))
-        await asyncio.gather(*tasks)
-
-    async def _run_middlewares_and_handlers(self, message, handlers, middlewares, update_type):
-        """
-        This method is made to run handlers and middlewares in queue.
-
-        :param message: received message (update part) to process with handlers and/or middlewares
-        :param handlers: all created handlers (not filtered)
-        :param middlewares: middlewares that should be executed (already filtered)
-        :param update_type: handler/update type (Update field name)
-        :return:
-        """
-
-        handler_error = None
-        data = {}
-        skip_handlers = False
-
-        if middlewares:
-            for middleware in middlewares:
-                if middleware.update_sensitive:
-                    if hasattr(middleware, f'pre_process_{update_type}'):
-                        middleware_result = await getattr(middleware, f'pre_process_{update_type}')(message, data)
-                    else:
-                        logger.error('Middleware {} does not have pre_process_{} method. pre_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
-                        middleware_result = None
-                else:
-                    middleware_result = await middleware.pre_process(message, data)
-                if isinstance(middleware_result, CancelUpdate):
-                    return
-                elif isinstance(middleware_result, SkipHandler):
-                    await middleware.post_process(message, data, handler_error)
-                    skip_handlers = True
-
-        if handlers and not(skip_handlers):
-            try:
-                for handler in handlers:
-                    params = []
-                    process_update = await self._test_message_handler(handler, message)
-                    if not process_update: continue
-                    for i in signature(handler['function']).parameters:
-                        params.append(i)
-                    result = None
-                    if len(params) == 1:
-                        result = await handler['function'](message)
-                    elif "data" in params:
-                        if len(params) == 2:
-                            result = await handler['function'](message, data)
-                        elif len(params) == 3:
-                            result = await handler['function'](message, data=data, bot=self)
-                        else:
-                            logger.error("It is not allowed to pass data and values inside data to the handler. Check your handler: {}".format(handler['function']))
-                            return
-                    else:
-                        data_copy = data.copy()
-                        for key in list(data_copy):
-                            # remove data from data_copy if handler does not accept it
-                            if key not in params:
-                                del data_copy[key]
-                        if handler.get('pass_bot'):
-                            data_copy["bot"] = self
-                        if len(data_copy) > len(params) - 1: # remove the message parameter
-                            logger.error("You are passing more data than the handler needs. Check your handler: {}".format(handler['function']))
-                            return
-                        result = await handler["function"](message, **data_copy)
-                    if not isinstance(result, ContinueHandling):
-                        break
-            except Exception as e:
-                if self.exception_handler:
-                    self.exception_handler.handle(e)
-                else:
-                    logger.error(str(e))
-                    logger.debug("Exception traceback:\n%s", traceback.format_exc())
-
-        if middlewares:
-            for middleware in middlewares:
-                if middleware.update_sensitive:
-                    if hasattr(middleware, f'post_process_{update_type}'):
-                        await getattr(middleware, f'post_process_{update_type}')(message, data, handler_error)
-                    else:
-                        logger.error('Middleware {} does not have post_process_{} method. post_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
-                else: await middleware.post_process(message, data, handler_error)
-
-    async def process_new_updates(self, updates: List[types.Update]):
-        """
-        Process new updates.
-        Just pass list of updates - each update should be
-        instance of Update object.
-
-        :param updates: list of updates
-        :type updates: :obj:`list` of :obj:`telebot.types.Update`
-
-        :return: None
-        """
-        upd_count = len(updates)
-        logger.info('Received {0} new updates'.format(upd_count))
-        if upd_count == 0: return
-
-        new_messages = None
-        new_edited_messages = None
-        new_channel_posts = None
-        new_edited_channel_posts = None
-        new_inline_queries = None
-        new_chosen_inline_results = None
-        new_callback_queries = None
-        new_shipping_queries = None
-        new_pre_checkout_queries = None
-        new_polls = None
-        new_poll_answers = None
-        new_my_chat_members = None
-        new_chat_members = None
-        chat_join_request = None
-        for update in updates:
-            logger.debug('Processing updates: {0}'.format(update))
-            if update.message:
-                if new_messages is None: new_messages = []
-                new_messages.append(update.message)
-            if update.edited_message:
-                if new_edited_messages is None: new_edited_messages = []
-                new_edited_messages.append(update.edited_message)
-            if update.channel_post:
-                if new_channel_posts is None: new_channel_posts = []
-                new_channel_posts.append(update.channel_post)
-            if update.edited_channel_post:
-                if new_edited_channel_posts is None: new_edited_channel_posts = []
-                new_edited_channel_posts.append(update.edited_channel_post)
-            if update.inline_query:
-                if new_inline_queries is None: new_inline_queries = []
-                new_inline_queries.append(update.inline_query)
-            if update.chosen_inline_result:
-                if new_chosen_inline_results is None: new_chosen_inline_results = []
-                new_chosen_inline_results.append(update.chosen_inline_result)
-            if update.callback_query:
-                if new_callback_queries is None: new_callback_queries = []
-                new_callback_queries.append(update.callback_query)
-            if update.shipping_query:
-                if new_shipping_queries is None: new_shipping_queries = []
-                new_shipping_queries.append(update.shipping_query)
-            if update.pre_checkout_query:
-                if new_pre_checkout_queries is None: new_pre_checkout_queries = []
-                new_pre_checkout_queries.append(update.pre_checkout_query)
-            if update.poll:
-                if new_polls is None: new_polls = []
-                new_polls.append(update.poll)
-            if update.poll_answer:
-                if new_poll_answers is None: new_poll_answers = []
-                new_poll_answers.append(update.poll_answer)
-            if update.my_chat_member:
-                if new_my_chat_members is None: new_my_chat_members = []
-                new_my_chat_members.append(update.my_chat_member)
-            if update.chat_member:
-                if new_chat_members is None: new_chat_members = []
-                new_chat_members.append(update.chat_member)
-            if update.chat_join_request:
-                if chat_join_request is None: chat_join_request = []
-                chat_join_request.append(update.chat_join_request)
-
-        if new_messages:
-            await self.process_new_messages(new_messages)
-        if new_edited_messages:
-            await self.process_new_edited_messages(new_edited_messages)
-        if new_channel_posts:
-            await self.process_new_channel_posts(new_channel_posts)
-        if new_edited_channel_posts:
-            await self.process_new_edited_channel_posts(new_edited_channel_posts)
-        if new_inline_queries:
-            await self.process_new_inline_query(new_inline_queries)
-        if new_chosen_inline_results:
-            await self.process_new_chosen_inline_query(new_chosen_inline_results)
-        if new_callback_queries:
-            await self.process_new_callback_query(new_callback_queries)
-        if new_shipping_queries:
-            await self.process_new_shipping_query(new_shipping_queries)
-        if new_pre_checkout_queries:
-            await self.process_new_pre_checkout_query(new_pre_checkout_queries)
-        if new_polls:
-            await self.process_new_poll(new_polls)
-        if new_poll_answers:
-            await self.process_new_poll_answer(new_poll_answers)
-        if new_my_chat_members:
-            await self.process_new_my_chat_member(new_my_chat_members)
-        if new_chat_members:
-            await self.process_new_chat_member(new_chat_members)
-        if chat_join_request:
-            await self.process_chat_join_request(chat_join_request)
-
-    async def process_new_messages(self, new_messages):
-        """
-        :meta private:
-        """
-        await self.__notify_update(new_messages)
-        await self._process_updates(self.message_handlers, new_messages, 'message')
-
-    async def process_new_edited_messages(self, edited_message):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.edited_message_handlers, edited_message, 'edited_message')
-
-    async def process_new_channel_posts(self, channel_post):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.channel_post_handlers, channel_post , 'channel_post')
-
-    async def process_new_edited_channel_posts(self, edited_channel_post):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.edited_channel_post_handlers, edited_channel_post, 'edited_channel_post')
-
-    async def process_new_inline_query(self, new_inline_queries):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.inline_handlers, new_inline_queries, 'inline_query')
-
-    async def process_new_chosen_inline_query(self, new_chosen_inline_queries):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.chosen_inline_handlers, new_chosen_inline_queries, 'chosen_inline_query')
-
-    async def process_new_callback_query(self, new_callback_queries):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.callback_query_handlers, new_callback_queries, 'callback_query')
-
-    async def process_new_shipping_query(self, new_shipping_queries):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.shipping_query_handlers, new_shipping_queries, 'shipping_query')
-
-    async def process_new_pre_checkout_query(self, pre_checkout_queries):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.pre_checkout_query_handlers, pre_checkout_queries, 'pre_checkout_query')
-
-    async def process_new_poll(self, polls):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.poll_handlers, polls, 'poll')
-
-    async def process_new_poll_answer(self, poll_answers):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.poll_answer_handlers, poll_answers, 'poll_answer')
-    
-    async def process_new_my_chat_member(self, my_chat_members):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.my_chat_member_handlers, my_chat_members, 'my_chat_member')
-
-    async def process_new_chat_member(self, chat_members):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.chat_member_handlers, chat_members, 'chat_member')
-
-    async def process_chat_join_request(self, chat_join_request):
-        """
-        :meta private:
-        """
-        await self._process_updates(self.chat_join_request_handlers, chat_join_request, 'chat_join_request')
-
-    async def _get_middlewares(self, update_type):
-        """
-        :meta private:
-        """
-        if self.middlewares:
-            middlewares = [middleware for middleware in self.middlewares if update_type in middleware.update_types]
-            return middlewares
-        return None
-    
-    async def __notify_update(self, new_messages):
-        if len(self.update_listener) == 0:
-            return
-        for listener in self.update_listener:
-            self._loop_create_task(listener(new_messages))
-
-    async def _test_message_handler(self, message_handler, message):
-        """
-        Test message handler.
-
-        :param message_handler:
-        :param message:
-        :return:
-        """
-        for message_filter, filter_value in message_handler['filters'].items():
-            if filter_value is None:
-                continue
-
-            if not await self._test_filter(message_filter, filter_value, message):
-                return False
-
-        return True
-
-    def set_update_listener(self, func: Awaitable):
-        """
-        Update listener is a function that gets any update.
-
-        :param func: function that should get update.
-        :type func: :obj:`Awaitable`
-
-        .. code-block:: python3
-            :caption: Example on asynchronous update listeners.
-
-            async def update_listener(new_messages):
-                for message in new_messages:
-                    print(message.text) # Prints message text
-
-            bot.set_update_listener(update_listener)
-        
-        :return: None
-        """
-        self.update_listener.append(func)
-
-    def add_custom_filter(self, custom_filter: Union[asyncio_filters.SimpleCustomFilter, asyncio_filters.AdvancedCustomFilter]):
-        """
-        Create custom filter.
-
-        .. code-block:: python3
-            :caption: Example on checking the text of a message
-
-            class TextMatchFilter(AdvancedCustomFilter):
-                key = 'text'
-
-                async def check(self, message, text):
-                    return text == message.text
-
-        :param custom_filter: Class with check(message) method.
-        :type custom_filter: :class:`telebot.asyncio_filters.SimpleCustomFilter` or :class:`telebot.asyncio_filters.AdvancedCustomFilter`
-
-        :return: None
-        """
-        self.custom_filters[custom_filter.key] = custom_filter
-
-    async def _test_filter(self, message_filter, filter_value, message):
-        """
-        Test filters.
-
-        :param message_filter: Filter type passed in handler
-        :param filter_value: Filter value passed in handler
-        :param message: Message to test
-        :return: True if filter conforms
-        """
-        #     test_cases = {
-        #         'content_types': lambda msg: msg.content_type in filter_value,
-        #         'regexp': lambda msg: msg.content_type == 'text' and re.search(filter_value, msg.text, re.IGNORECASE),
-        #         'commands': lambda msg: msg.content_type == 'text' and util.extract_command(msg.text) in filter_value,
-        #         'func': lambda msg: filter_value(msg)
-        #     }
-        #     return test_cases.get(message_filter, lambda msg: False)(message)
-        if message_filter == 'content_types':
-            return message.content_type in filter_value
-        elif message_filter == 'regexp':
-            return message.content_type == 'text' and re.search(filter_value, message.text, re.IGNORECASE)
-        elif message_filter == 'commands':
-            return message.content_type == 'text' and util.extract_command(message.text) in filter_value
-        elif message_filter == 'chat_types':
-            return message.chat.type in filter_value
-        elif message_filter == 'func':
-            return filter_value(message)
-        elif self.custom_filters and message_filter in self.custom_filters:
-            return await self._check_filter(message_filter,filter_value,message)
-        else:
-            return False
-
-    async def _check_filter(self, message_filter, filter_value, message):
-        """
-        Check up the filter.
-
-        :param message_filter:
-        :param filter_value:
-        :param message:
-        :return:
-        """
-        filter_check = self.custom_filters.get(message_filter)
-        if not filter_check:
-            return False
-        elif isinstance(filter_check, asyncio_filters.SimpleCustomFilter):
-            return filter_value == await filter_check.check(message)
-        elif isinstance(filter_check, asyncio_filters.AdvancedCustomFilter):
-            return await filter_check.check(message, filter_value)
-        else:
-            logger.error("Custom filter: wrong type. Should be SimpleCustomFilter or AdvancedCustomFilter.")
-            return False
-
-    def setup_middleware(self, middleware: BaseMiddleware):
-        """
-        Setup middleware.
-
-        .. note::
-
-            Take a look at the :class:`telebot.asyncio_handler_backends.BaseMiddleware` section for more.
-
-        :param middleware: Middleware-class.
-        :type middleware: :class:`telebot.asyncio_handler_backends.BaseMiddleware`
-    
-        :return: None
-        """
-        if not hasattr(middleware, 'update_types'):
-            logger.error('Middleware has no update_types parameter. Please add list of updates to handle.')
-            return
-
-        if not hasattr(middleware, 'update_sensitive'):
-            logger.warning('Middleware has no update_sensitive parameter. Parameter was set to False.')
-            middleware.update_sensitive = False
-
-        self.middlewares.append(middleware)
-
-    def message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
-        """
-        Handles ew incoming message of any kind - text, photo, sticker, etc.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-        All message handlers are tested in the order they were added.
-
-        Example:
-
-        .. code-block:: python3
-            :caption: Usage of message_handler
-
-            bot = TeleBot('TOKEN')
-
-            # Handles all messages which text matches regexp.
-            @bot.message_handler(regexp='someregexp')
-            async def command_help(message):
-                await bot.send_message(message.chat.id, 'Did someone call for help?')
-
-            # Handles messages in private chat
-            @bot.message_handler(chat_types=['private']) # You can add more chat types
-            async def command_help(message):
-                await bot.send_message(message.chat.id, 'Private chat detected, sir!')
-
-            # Handle all sent documents of type 'text/plain'.
-            @bot.message_handler(func=lambda message: message.document.mime_type == 'text/plain',
-                content_types=['document'])
-            async def command_handle_document(message):
-                await bot.send_message(message.chat.id, 'Document received, sir!')
-
-            # Handle all other messages.
-            @bot.message_handler(func=lambda message: True, content_types=['audio', 'photo', 'voice', 'video', 'document',
-                'text', 'location', 'contact', 'sticker'])
-            async def default_command(message):
-                await bot.send_message(message.chat.id, "This is the default command handler.")
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Optional lambda function. The lambda receives the message to test as the first parameter.
-            It must return True if the command should handle the message.
-        
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param chat_types: list of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-
-        if content_types is None:
-            content_types = ["text"]
-
-        if isinstance(commands, str):
-            logger.warning("message_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    chat_types=chat_types,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_message_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_message_handler(self, handler_dict):
-        """
-        Adds a message handler.
-        Note that you should use register_message_handler to add message_handler.
-        
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.message_handlers.append(handler_dict)
-
-    def register_message_handler(self, callback: Awaitable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp:
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param chat_types: List of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        if content_types is None:
-            content_types = ["text"]
-        if isinstance(commands, str):
-            logger.warning("register_message_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("register_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                chat_types=chat_types,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_message_handler(handler_dict)
-
-    def edited_message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
-        """
-        Handles new version of a message that is known to the bot and was edited.
-
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param chat_types: list of chat types
-        :type chat_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        if content_types is None:
-            content_types = ["text"]
-
-        if isinstance(commands, str):
-            logger.warning("edited_message_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    chat_types=chat_types,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_edited_message_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_edited_message_handler(self, handler_dict):
-        """
-        Adds the edit message handler.
-        Note that you should use register_edited_message_handler to add edited_message_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.edited_message_handlers.append(handler_dict)
-
-    def register_edited_message_handler(self, callback: Awaitable, content_types: Optional[List[str]]=None,
-        commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None,
-        chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers edited message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param chat_types: True for private chat
-        :type chat_types: :obj:`bool`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        if isinstance(commands, str):
-            logger.warning("register_edited_message_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("register_edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                chat_types=chat_types,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_edited_message_handler(handler_dict)
-
-
-    def channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
-        """
-        Handles new incoming channel post of any kind - text, photo, sticker, etc.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        :return: None
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        if isinstance(commands, str):
-            logger.warning("channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_channel_post_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_channel_post_handler(self, handler_dict):
-        """
-        Adds channel post handler.
-        Note that you should use register_channel_post_handler to add channel_post_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.channel_post_handlers.append(handler_dict)
-    
-    def register_channel_post_handler(self, callback: Awaitable, content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
-            regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers channel post message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        if isinstance(commands, str):
-            logger.warning("register_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("register_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_channel_post_handler(handler_dict)
-
-    def edited_channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
-        """
-        Handles new version of a channel post that is known to the bot and was edited.
-        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
-
-        :param commands: Optional list of strings (commands to handle).
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Optional regular expression.
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return:
-        """
-        if content_types is None:
-            content_types = ["text"]
-
-        if isinstance(commands, str):
-            logger.warning("edited_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler,
-                                                    content_types=content_types,
-                                                    commands=commands,
-                                                    regexp=regexp,
-                                                    func=func,
-                                                    **kwargs)
-            self.add_edited_channel_post_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_edited_channel_post_handler(self, handler_dict):
-        """
-        Adds the edit channel post handler.
-        Note that you should use register_edited_channel_post_handler to add edited_channel_post_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.edited_channel_post_handlers.append(handler_dict)
-
-    def register_edited_channel_post_handler(self, callback: Awaitable, content_types: Optional[List[str]]=None,
-            commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers edited channel post message handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
-        :type content_types: :obj:`list` of :obj:`str`
-
-        :param commands: list of commands
-        :type commands: :obj:`list` of :obj:`str`
-
-        :param regexp: Regular expression
-        :type regexp: :obj:`str`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        if isinstance(commands, str):
-            logger.warning("register_edited_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
-            commands = [commands]
-
-        if isinstance(content_types, str):
-            logger.warning("register_edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
-            content_types = [content_types]
-
-        handler_dict = self._build_handler_dict(callback,
-                                                content_types=content_types,
-                                                commands=commands,
-                                                regexp=regexp,
-                                                func=func,
-                                                pass_bot=pass_bot,
-                                                **kwargs)
-        self.add_edited_channel_post_handler(handler_dict)
-
-    def inline_handler(self, func, **kwargs):
-        """
-        Handles new incoming inline query.
-        As a parameter to the decorator function, it passes :class:`telebot.types.InlineQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_inline_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_inline_handler(self, handler_dict):
-        """
-        Adds inline call handler.
-        Note that you should use register_inline_handler to add inline_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.inline_handlers.append(handler_dict)
-
-    def register_inline_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers inline handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_inline_handler(handler_dict)
-
-    def chosen_inline_handler(self, func, **kwargs):
-        """
-        The result of an inline query that was chosen by a user and sent to their chat partner.
-        Please see our documentation on the feedback collecting for details on how to enable these updates for your bot.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChosenInlineResult` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-        
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chosen_inline_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chosen_inline_handler(self, handler_dict):
-        """
-        Description: TBD
-        Note that you should use register_chosen_inline_handler to add chosen_inline_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chosen_inline_handlers.append(handler_dict)
-
-    def register_chosen_inline_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers chosen inline handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chosen_inline_handler(handler_dict)
-
-    def callback_query_handler(self, func, **kwargs):
-        """
-        Handles new incoming callback query.
-        As a parameter to the decorator function, it passes :class:`telebot.types.CallbackQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_callback_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_callback_query_handler(self, handler_dict):
-        """
-        Adds a callback request handler.
-        Note that you should use register_callback_query_handler to add callback_query_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.callback_query_handlers.append(handler_dict)
-
-    def register_callback_query_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers callback query handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_callback_query_handler(handler_dict)
-
-    def shipping_query_handler(self, func, **kwargs):
-        """
-        Handles new incoming shipping query. Only for invoices with flexible price.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ShippingQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_shipping_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_shipping_query_handler(self, handler_dict):
-        """
-        Adds a shipping request handler.
-        Note that you should use register_shipping_query_handler to add shipping_query_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.shipping_query_handlers.append(handler_dict)
-
-    def register_shipping_query_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers shipping query handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_shipping_query_handler(handler_dict)
-
-    def pre_checkout_query_handler(self, func, **kwargs):
-        """
-        New incoming pre-checkout query. Contains full information about checkout.
-        As a parameter to the decorator function, it passes :class:`telebot.types.PreCheckoutQuery` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_pre_checkout_query_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_pre_checkout_query_handler(self, handler_dict):
-        """
-        Adds a pre-checkout request handler.
-        Note that you should use register_pre_checkout_query_handler to add pre_checkout_query_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.pre_checkout_query_handlers.append(handler_dict)
-    
-    def register_pre_checkout_query_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers pre-checkout request handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: decorated function
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_pre_checkout_query_handler(handler_dict)
-
-    def poll_handler(self, func, **kwargs):
-        """
-        Handles new state of a poll. Bots receive only updates about stopped polls and polls, which are sent by the bot
-        As a parameter to the decorator function, it passes :class:`telebot.types.Poll` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_poll_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_poll_handler(self, handler_dict):
-        """
-        Adds a poll request handler.
-        Note that you should use register_poll_handler to add poll_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.poll_handlers.append(handler_dict)
-
-    def register_poll_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers poll handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_poll_handler(handler_dict)
-
-    def poll_answer_handler(self, func=None, **kwargs):
-        """
-        Handles change of user's answer in a non-anonymous poll(when user changes the vote).
-        Bots receive new votes only in polls that were sent by the bot itself.
-        As a parameter to the decorator function, it passes :class:`telebot.types.PollAnswer` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_poll_answer_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_poll_answer_handler(self, handler_dict):
-        """
-        Adds a poll_answer request handler.
-        Note that you should use register_poll_answer_handler to add poll_answer_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.poll_answer_handlers.append(handler_dict)
-
-    def register_poll_answer_handler(self, callback: Awaitable, func: Callable, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers poll answer handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_poll_answer_handler(handler_dict)
-
-    def my_chat_member_handler(self, func=None, **kwargs):
-        """
-        Handles update in a status of a bot. For private chats,
-        this update is received only when the bot is blocked or unblocked by the user.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_my_chat_member_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_my_chat_member_handler(self, handler_dict):
-        """
-        Adds a my_chat_member handler.
-        Note that you should use register_my_chat_member_handler to add my_chat_member_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.my_chat_member_handlers.append(handler_dict)
-
-    def register_my_chat_member_handler(self, callback: Awaitable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers my chat member handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_my_chat_member_handler(handler_dict)
-
-    def chat_member_handler(self, func=None, **kwargs):
-        """
-        Handles update in a status of a user in a chat.
-        The bot must be an administrator in the chat and must explicitly specify “chat_member”
-        in the list of allowed_updates to receive these updates.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chat_member_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chat_member_handler(self, handler_dict):
-        """
-        Adds a chat_member handler.
-        Note that you should use register_chat_member_handler to add chat_member_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chat_member_handlers.append(handler_dict)
-
-    def register_chat_member_handler(self, callback: Awaitable, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
-        """
-        Registers chat member handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable``
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return:None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chat_member_handler(handler_dict)
-
-    def chat_join_request_handler(self, func=None, **kwargs):
-        """
-        Handles a request to join the chat has been sent. The bot must have the can_invite_users
-        administrator right in the chat to receive these updates.
-        As a parameter to the decorator function, it passes :class:`telebot.types.ChatJoinRequest` object.
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-        
-        :return: None
-        """
-
-        def decorator(handler):
-            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
-            self.add_chat_join_request_handler(handler_dict)
-            return handler
-
-        return decorator
-
-    def add_chat_join_request_handler(self, handler_dict):
-        """
-        Adds a chat_join_request handler.
-        Note that you should use register_chat_join_request_handler to add chat_join_request_handler.
-
-        :meta private:
-
-        :param handler_dict:
-        :return:
-        """
-        self.chat_join_request_handlers.append(handler_dict)
-
-    def register_chat_join_request_handler(self, callback: Awaitable, func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
-        """
-        Registers chat join request handler.
-
-        :param callback: function to be called
-        :type callback: :obj:`Awaitable`
-
-        :param func: Function executed as a filter
-        :type func: :obj:`function`
-
-        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
-        :type pass_bot: :obj:`bool`
-
-        :param kwargs: Optional keyword arguments(custom filters)
-
-        :return: None
-        """
-        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
-        self.add_chat_join_request_handler(handler_dict)
-
-    @staticmethod
-    def _build_handler_dict(handler, pass_bot=False, **filters):
-        """
-        Builds a dictionary for a handler.
-
-        :param handler:
-        :param filters:
-        :return:
-        """
-        return {
-            'function': handler,
-            'pass_bot': pass_bot,
-            'filters': {ftype: fvalue for ftype, fvalue in filters.items() if fvalue is not None}
-            # Remove None values, they are skipped in _test_filter anyway
-            #'filters': filters
-        }
-
-    async def skip_updates(self):
-        """
-        Skip existing updates.
-        Only last update will remain on server.
-        """
-        await self.get_updates(-1)
-        return True
-
-    # all methods begin here
-    
-    async def get_me(self) -> types.User:
-        """
-        Returns basic information about the bot in form of a User object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getme
-        """
-        result = await asyncio_helper.get_me(self.token)
-        return types.User.de_json(result)
-
-    async def get_file(self, file_id: Optional[str]) -> types.File:
-        """
-        Use this method to get basic info about a file and prepare it for downloading.
-        For the moment, bots can download files of up to 20MB in size. 
-        On success, a File object is returned. 
-        It is guaranteed that the link will be valid for at least 1 hour. 
-        When the link expires, a new one can be requested by calling get_file again.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getfile
-
-        :param file_id: File identifier
-        :type file_id: :obj:`str`
-
-        :return: :class:`telebot.types.File`
-        """
-        return types.File.de_json(await asyncio_helper.get_file(self.token, file_id))
-
-    async def get_file_url(self, file_id: Optional[str]) -> str:
-        """
-        Get a valid URL for downloading a file.
-
-        :param file_id: File identifier to get download URL for.
-        :type file_id: :obj:`str`
-
-        :return: URL for downloading the file.
-        :rtype: :obj:`str`
-        """
-        return await asyncio_helper.get_file_url(self.token, file_id)
-
-    async def download_file(self, file_path: Optional[str]) -> bytes:
-        """
-        Downloads file.
-
-        :param file_path: Path where the file should be downloaded.
-        :type file_path: str
-        
-        :return: bytes
-        :rtype: :obj:`bytes`
-        """
-        return await asyncio_helper.download_file(self.token, file_path)
-
-    async def log_out(self) -> bool:
-        """
-        Use this method to log out from the cloud Bot API server before launching the bot locally. 
-        You MUST log out the bot before running it locally, otherwise there is no guarantee
-        that the bot will receive updates.
-        After a successful call, you can immediately log in on a local server, 
-        but will not be able to log in back to the cloud Bot API server for 10 minutes. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#logout
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.log_out(self.token)
-    
-    async def close(self) -> bool:
-        """
-        Use this method to close the bot instance before moving it from one local server to another. 
-        You need to delete the webhook before calling this method to ensure that the bot isn't launched again
-        after server restart.
-        The method will return error 429 in the first 10 minutes after the bot is launched. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#close
-
-        :return: :obj:`bool`
-        """
-        return await asyncio_helper.close(self.token)
-
-    def enable_saving_states(self, filename="./.state-save/states.pkl"):
-        """
-        Enable saving states (by default saving disabled)
-
-        .. note::
-            It is recommended to pass a :class:`~telebot.asyncio_storage.StatePickleStorage` instance as state_storage
-            to TeleBot class.
-
-        :param filename: Filename of saving file, defaults to "./.state-save/states.pkl"
-        :type filename: :obj:`str`, optional
-        """
-
-        self.current_states = StatePickleStorage(file_path=filename)
-
-    async def set_webhook(self, url: Optional[str]=None, certificate: Optional[Union[str, Any]]=None, max_connections: Optional[int]=None,
-                allowed_updates: Optional[List[str]]=None, ip_address: Optional[str]=None,
-                drop_pending_updates: Optional[bool] = None, timeout: Optional[int]=None,
-                secret_token: Optional[str]=None) -> bool:
-        """
-        Use this method to specify a URL and receive incoming updates via an outgoing webhook.
-        Whenever there is an update for the bot, we will send an HTTPS POST request to the specified URL,
-        containing a JSON-serialized Update. In case of an unsuccessful request, we will give up after
-        a reasonable amount of attempts. Returns True on success.
-
-        If you'd like to make sure that the webhook was set by you, you can specify secret data in the parameter secret_token.
-        If specified, the request will contain a header “X-Telegram-Bot-Api-Secret-Token” with the secret token as content.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#setwebhook
-
-        :param url: HTTPS URL to send updates to. Use an empty string to remove webhook integration, defaults to None
-        :type url: :obj:`str`, optional
-
-        :param certificate: Upload your public key certificate so that the root certificate in use can be checked, defaults to None
-        :type certificate: :class:`str`, optional
-
-        :param max_connections: The maximum allowed number of simultaneous HTTPS connections to the webhook for update delivery, 1-100.
-            Defaults to 40. Use lower values to limit the load on your bot's server, and higher values to increase your bot's throughput,
-            defaults to None
-        :type max_connections: :obj:`int`, optional
-        
-        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example,
-            specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See Update
-            for a complete list of available update types. Specify an empty list to receive all update types except chat_member (default).
-            If not specified, the previous setting will be used.
-            
-            Please note that this parameter doesn't affect updates created before the call to the setWebhook, so unwanted updates may be received
-            for a short period of time. Defaults to None
-        
-        :type allowed_updates: :obj:`list`, optional
-
-        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address
-            resolved through DNS, defaults to None
-        :type ip_address: :obj:`str`, optional
-
-        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
-        :type drop_pending_updates: :obj:`bool`, optional
-
-        :param timeout: Timeout of a request, defaults to None
-        :type timeout: :obj:`int`, optional
-
-        :param secret_token: A secret token to be sent in a header “X-Telegram-Bot-Api-Secret-Token” in every webhook request, 1-256 characters.
-            Only characters A-Z, a-z, 0-9, _ and - are allowed. The header is useful to ensure that the request comes from a webhook set by you. Defaults to None
-        :type secret_token: :obj:`str`, optional
-
-        :return: True on success.
-        :rtype: :obj:`bool` if the request was successful.
-        """
-        return await asyncio_helper.set_webhook(self.token, url, certificate, max_connections, allowed_updates, ip_address,
-                                     drop_pending_updates, timeout, secret_token)
-
-
-    async def run_webhooks(self,
-                    listen: Optional[str]="127.0.0.1",
-                    port: Optional[int]=443,
-                    url_path: Optional[str]=None,
-                    certificate: Optional[str]=None,
-                    certificate_key: Optional[str]=None,
-                    webhook_url: Optional[str]=None,
-                    max_connections: Optional[int]=None,
-                    allowed_updates: Optional[List]=None,
-                    ip_address: Optional[str]=None,
-                    drop_pending_updates: Optional[bool] = None,
-                    timeout: Optional[int]=None,
-                    secret_token: Optional[str]=None,
-                    secret_token_length: Optional[int]=20,
-                    debug: Optional[bool]=False):
-        """
-        This class sets webhooks and listens to a given url and port.
-
-        :param listen: IP address to listen to. Defaults to
-            0.0.0.0
-        :param port: A port which will be used to listen to webhooks.
-        :param url_path: Path to the webhook. Defaults to /token
-        :param certificate: Path to the certificate file.
-        :param certificate_key: Path to the certificate key file.
-        :param webhook_url: Webhook URL.
-        :param max_connections: Maximum allowed number of simultaneous HTTPS connections to the webhook for update delivery, 1-100. Defaults to 40. Use lower values to limit the load on your bot's server, and higher values to increase your bot's throughput.
-        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See Update for a complete list of available update types. Specify an empty list to receive all updates regardless of type (default). If not specified, the previous setting will be used.
-        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address resolved through DNS
-        :param drop_pending_updates: Pass True to drop all pending updates
-        :param timeout: Integer. Request connection timeout
-        :param secret_token: Secret token to be used to verify the webhook request.
-        :return:
-        """
-
-        # generate secret token if not set
-        if not secret_token:
-            secret_token = ''.join(random.choices(string.ascii_uppercase + string.digits, k=secret_token_length))
-
-
-        if not url_path:
-            url_path = self.token + '/'
-        if url_path[-1] != '/': url_path += '/'
-        
-
-
-        protocol = "https" if certificate else "http"
-        if not webhook_url:
-            webhook_url = "{}://{}:{}/{}".format(protocol, listen, port, url_path)
-
-        if certificate and certificate_key:
-            ssl_ctx = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)
-            ssl_ctx.load_cert_chain(certificate, certificate_key)
-        else:
-            ssl_ctx = None
-
-        # open certificate if it exists
-        cert_file = open(certificate, 'rb') if certificate else None
-        await self.set_webhook(
-            url=webhook_url,
-            certificate=cert_file,
-            max_connections=max_connections,
-            allowed_updates=allowed_updates,
-            ip_address=ip_address,
-            drop_pending_updates=drop_pending_updates,
-            timeout=timeout,
-            secret_token=secret_token
-        )
-        if cert_file: cert_file.close()
-
-        ssl_context = (certificate, certificate_key) if certificate else (None, None)
-        # for webhooks
-        try:
-            from telebot.ext.aio import AsyncWebhookListener
-        except (NameError, ImportError):
-            raise ImportError("Please install uvicorn and fastapi in order to use `run_webhooks` method.")
-        self.webhook_listener = AsyncWebhookListener(self, secret_token, listen, port, ssl_context, '/'+url_path, debug)
-        await self.webhook_listener.run_app()
-
-
-
-    async def delete_webhook(self, drop_pending_updates: Optional[bool]=None, timeout: Optional[int]=None) -> bool:
-        """
-        Use this method to remove webhook integration if you decide to switch back to getUpdates.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletewebhook
-
-        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
-        :type drop_pending_updates: :obj: `bool`, optional
-
-        :param timeout: Request connection timeout, defaults to None
-        :type timeout: :obj:`int`, optional
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_webhook(self.token, drop_pending_updates, timeout)
-
-    async def remove_webhook(self) -> bool:
-        """
-        Alternative for delete_webhook but uses set_webhook
-        """
-        result = await self.set_webhook()
-        return result
-
-    async def get_webhook_info(self, timeout: Optional[int]=None) -> types.WebhookInfo:
-        """
-        Use this method to get current webhook status. Requires no parameters.
-        On success, returns a WebhookInfo object. If the bot is using getUpdates, will return an object with the url field empty.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getwebhookinfo
-
-        :param timeout: Request connection timeout
-        :type timeout: :obj:`int`, optional
-
-        :return: On success, returns a WebhookInfo object.
-        :rtype: :class:`telebot.types.WebhookInfo`
-        """
-        result = await asyncio_helper.get_webhook_info(self.token, timeout)
-        return types.WebhookInfo.de_json(result)
-
-    async def get_user_profile_photos(self, user_id: int, offset: Optional[int]=None, 
-            limit: Optional[int]=None) -> types.UserProfilePhotos:
-        """
-        Use this method to get a list of profile pictures for a user.
-        Returns a :class:`telebot.types.UserProfilePhotos` object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getuserprofilephotos
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param offset: Sequential number of the first photo to be returned. By default, all photos are returned.
-        :type offset: :obj:`int`
-
-        :param limit: Limits the number of photos to be retrieved. Values between 1-100 are accepted. Defaults to 100.
-        :type limit: :obj:`int`
-
-        :return: `UserProfilePhotos <https://core.telegram.org/bots/api#userprofilephotos>`_
-        :rtype: :class:`telebot.types.UserProfilePhotos`
-
-        """
-        result = await asyncio_helper.get_user_profile_photos(self.token, user_id, offset, limit)
-        return types.UserProfilePhotos.de_json(result)
-
-    async def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
-        """
-        Use this method to get up to date information about the chat (current name of the user for one-on-one
-        conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Chat information
-        :rtype: :class:`telebot.types.Chat`
-        """
-        result = await asyncio_helper.get_chat(self.token, chat_id)
-        return types.Chat.de_json(result)
-
-    async def leave_chat(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#leavechat
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: :obj:`bool`
-        """
-        result = await asyncio_helper.leave_chat(self.token, chat_id)
-        return result
-
-    async def get_chat_administrators(self, chat_id: Union[int, str]) -> List[types.ChatMember]:
-        """
-        Use this method to get a list of administrators in a chat.
-        On success, returns an Array of ChatMember objects that contains
-        information about all chat administrators except other bots.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatadministrators    
-
-        :param chat_id: Unique identifier for the target chat or username
-            of the target supergroup or channel (in the format @channelusername)
-        :return: List made of ChatMember objects.
-        :rtype: :obj:`list` of :class:`telebot.types.ChatMember`
-        """
-        result = await asyncio_helper.get_chat_administrators(self.token, chat_id)
-        return [types.ChatMember.de_json(r) for r in result]
-
-    @util.deprecated(deprecation_text="Use get_chat_member_count instead")
-    async def get_chat_members_count(self, chat_id: Union[int, str]) -> int:
-        """
-        This function is deprecated. Use `get_chat_member_count` instead.
-
-        .. deprecated:: 4.0.0
-            This function is deprecated. Use `get_chat_member_count` instead.
-
-        Use this method to get the number of members in a chat.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Number of members in the chat.
-        :rtype: :obj:`int`
-        """
-        result = await asyncio_helper.get_chat_member_count(self.token, chat_id)
-        return result
-    
-    async def get_chat_member_count(self, chat_id: Union[int, str]) -> int:
-        """
-        Use this method to get the number of members in a chat.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Number of members in the chat.
-        :rtype: :obj:`int`
-        """
-        result = await asyncio_helper.get_chat_member_count(self.token, chat_id)
-        return result
-
-    async def set_chat_sticker_set(self, chat_id: Union[int, str], sticker_set_name: str) -> types.StickerSet:
-        """
-        Use this method to set a new group sticker set for a supergroup. The bot must be an administrator in the chat
-        for this to work and must have the appropriate administrator rights. Use the field can_set_sticker_set optionally returned
-        in getChat requests to check if the bot can use this method. Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#setchatstickerset
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sticker_set_name: Name of the sticker set to be set as the group sticker set
-        :type sticker_set_name: :obj:`str`
-
-        :return: StickerSet object
-        :rtype: :class:`telebot.types.StickerSet`
-        """
-        result = await asyncio_helper.set_chat_sticker_set(self.token, chat_id, sticker_set_name)
-        return result
-
-    async def delete_chat_sticker_set(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to delete a group sticker set from a supergroup. The bot must be an administrator in the chat
-        for this to work and must have the appropriate admin rights. Use the field can_set_sticker_set
-        optionally returned in getChat requests to check if the bot can use this method. Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#deletechatstickerset
-
-        :param chat_id:	Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        result = await asyncio_helper.delete_chat_sticker_set(self.token, chat_id)
-        return result
-
-    async def answer_web_app_query(self, web_app_query_id: str, result: types.InlineQueryResultBase) -> types.SentWebAppMessage:
-        """
-        Use this method to set the result of an interaction with a Web App and
-        send a corresponding message on behalf of the user to the chat from which
-        the query originated. 
-        On success, a SentWebAppMessage object is returned.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#answerwebappquery
-
-        :param web_app_query_id: Unique identifier for the query to be answered
-        :type web_app_query_id: :obj:`str`
-
-        :param result: A JSON-serialized object describing the message to be sent
-        :type result: :class:`telebot.types.InlineQueryResultBase`
-
-        :return: On success, a SentWebAppMessage object is returned.
-        :rtype: :class:`telebot.types.SentWebAppMessage`
-        """
-
-        return await asyncio_helper.answer_web_app_query(self.token, web_app_query_id, result)
-
-    async def get_chat_member(self, chat_id: Union[int, str], user_id: int) -> types.ChatMember:
-        """
-        Use this method to get information about a member of a chat. Returns a ChatMember object on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#getchatmember
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :return: Returns ChatMember object on success.
-        :rtype: :class:`telebot.types.ChatMember`
-        """
-        result = await asyncio_helper.get_chat_member(self.token, chat_id, user_id)
-        return types.ChatMember.de_json(result)
-
-    async def send_message(
-            self, chat_id: Union[int, str], text: str, 
-            parse_mode: Optional[str]=None, 
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None, 
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send text messages.
-
-        Warning: Do not send more than about 4096 characters each message, otherwise you'll risk an HTTP 414 error.
-        If you must send more than 4096 characters, 
-        use the `split_string` or `smart_split` function in util.py.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param text: Text of the message to be sent
-        :type text: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the message text.
-        :type parse_mode: :obj:`str`
-
-        :param entities: List of special entities that appear in message text, which can be specified instead of parse_mode
-        :type entities: Array of :class:`telebot.types.MessageEntity`
-
-        :param disable_web_page_preview: Disables link previews for links in this message
-        :type disable_web_page_preview: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: If True, the message content will be hidden for all users except for the target user
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Unique identifier for the target message thread (topic) of the forum; for forum supergroups only
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_message(
-                self.token, chat_id, text, disable_web_page_preview, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout,
-                entities, allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def forward_message(
-            self, chat_id: Union[int, str], from_chat_id: Union[int, str], 
-            message_id: int, disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to forward messages of any kind.
-
-        Telegram documentation: https://core.telegram.org/bots/api#forwardmessage
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound
-        :type disable_notification: :obj:`bool`
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
-        :type from_chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Message identifier in the chat specified in from_chat_id
-        :type message_id: :obj:`int`
-
-        :param protect_content: Protects the contents of the forwarded message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Unique identifier for the target message thread (topic) of the forum; for forum supergroups only
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-
-        return types.Message.de_json(
-            await asyncio_helper.forward_message(self.token, chat_id, from_chat_id, message_id, disable_notification, timeout, protect_content,
-                                                 message_thread_id))
-
-    async def copy_message(
-            self, chat_id: Union[int, str], 
-            from_chat_id: Union[int, str], 
-            message_id: int, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.MessageID:
-        """
-        Use this method to copy messages of any kind.
-
-        Telegram documentation: https://core.telegram.org/bots/api#copymessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
-        :type from_chat_id: :obj:`int` or :obj:`str`
-        :param message_id: Message identifier in the chat specified in from_chat_id
-        :type message_id: :obj:`int`
-
-        :param caption: New caption for media, 0-1024 characters after entities parsing. If not specified, the original caption is kept
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the new caption.
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the new caption, which can be specified instead of parse_mode
-        :type caption_entities: Array of :class:`telebot.types.MessageEntity`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-        
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.MessageID.de_json(
-            await asyncio_helper.copy_message(self.token, chat_id, from_chat_id, message_id, caption, parse_mode, caption_entities,
-                                   disable_notification, reply_to_message_id, allow_sending_without_reply, reply_markup,
-                                   timeout, protect_content, message_thread_id))
-
-    async def delete_message(self, chat_id: Union[int, str], message_id: int, 
-            timeout: Optional[int]=None) -> bool:
-        """
-        Use this method to delete a message, including service messages, with the following limitations:
-        - A message can only be deleted if it was sent less than 48 hours ago.
-        - A dice message in a private chat can only be deleted if it was sent more than 24 hours ago.
-        - Bots can delete outgoing messages in private chats, groups, and supergroups.
-        - Bots can delete incoming messages in private chats.
-        - Bots granted can_post_messages permissions can delete outgoing messages in channels.
-        - If the bot is an administrator of a group, it can delete any message there.
-        - If the bot has can_delete_messages permission in a supergroup or a channel, it can delete any message there.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletemessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Identifier of the message to delete
-        :type message_id: :obj:`int`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_message(self.token, chat_id, message_id, timeout)
-
-    async def send_dice(
-            self, chat_id: Union[int, str],
-            emoji: Optional[str]=None, disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send an animated emoji that will display a random value. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#senddice
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param emoji: Emoji on which the dice throw animation is based. Currently, must be one of “🎲”, “🎯”, “🏀”, “⚽”, “🎳”, or “🎰”.
-            Dice can have values 1-6 for “🎲”, “🎯” and “🎳”, values 1-5 for “🏀” and “⚽”, and values 1-64 for “🎰”. Defaults to “🎲”
-        :type emoji: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, unique within the chat to which the message with the thread identifier belongs
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_dice(
-                self.token, chat_id, emoji, disable_notification, reply_to_message_id,
-                reply_markup, timeout, allow_sending_without_reply, protect_content, message_thread_id)
-        )
-
-    async def send_photo(
-            self, chat_id: Union[int, str], photo: Union[Any, str], 
-            caption: Optional[str]=None, parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send photos. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendphoto
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param photo: Photo to send. Pass a file_id as String to send a photo that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get a photo from the Internet, or upload a new photo using multipart/form-data.
-            The photo must be at most 10 MB in size. The photo's width and height must not exceed 10000 in total. Width and height ratio must be at most 20.
-        :type photo: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Photo caption (may also be used when resending photos by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the photo caption.
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-        
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_photo(
-                self.token, chat_id, photo, caption, reply_to_message_id, reply_markup,
-                parse_mode, disable_notification, timeout, caption_entities,
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def send_audio(
-            self, chat_id: Union[int, str], audio: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            performer: Optional[str]=None, title: Optional[str]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None,
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send audio files, if you want Telegram clients to display them in the music player.
-        Your audio must be in the .MP3 or .M4A format. On success, the sent Message is returned. Bots can currently send audio files of up to 50 MB in size,
-        this limit may be changed in the future.
-
-        For sending voice messages, use the send_voice method instead.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendaudio
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param audio: Audio file to send. Pass a file_id as String to send an audio file that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get an audio file from the Internet, or upload a new one using multipart/form-data.
-            Audio must be in the .MP3 or .M4A format.
-        :type audio: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Audio caption, 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param duration: Duration of the audio in seconds
-        :type duration: :obj:`int`
-
-        :param performer: Performer
-        :type performer: :obj:`str`
-
-        :param title: Track name
-        :type title: :obj:`str`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup:
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the audio caption. See formatting options for more details.
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
-        :type thumb: :obj:`str`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_audio(
-                self.token, chat_id, audio, caption, duration, performer, title, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout, thumb,
-                caption_entities, allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def send_voice(
-            self, chat_id: Union[int, str], voice: Union[Any, str], 
-            caption: Optional[str]=None, duration: Optional[int]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
-        For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
-        On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendvoice
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param voice: Audio file to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type voice: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Voice message caption, 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param duration: Duration of the voice message in seconds
-        :type duration: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
-            to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the voice message caption. See formatting options for more details.
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_voice(
-                self.token, chat_id, voice, caption, duration, reply_to_message_id, reply_markup,
-                parse_mode, disable_notification, timeout, caption_entities,
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def send_document(
-            self, chat_id: Union[int, str], document: Union[Any, str],
-            reply_to_message_id: Optional[int]=None, 
-            caption: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            parse_mode: Optional[str]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            visible_file_name: Optional[str]=None,
-            disable_content_type_detection: Optional[bool]=None,
-            data: Optional[Union[Any, str]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send general files.
-
-        Telegram documentation: https://core.telegram.org/bots/api#senddocument
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param document: (document) File to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL as a
-            String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data
-        :type document: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param caption: Document caption (may also be used when resending documents by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param parse_mode: Mode for parsing entities in the document caption
-        :type parse_mode: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: InputFile or String : Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param visible_file_name: allows to define file name that will be visible in the Telegram instead of original file name
-        :type visible_file_name: :obj:`str`
-
-        :param disable_content_type_detection: Disables automatic server-side content type detection for files uploaded using multipart/form-data
-        :type disable_content_type_detection: :obj:`bool`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(document):
-            # function typo miss compatibility
-            document = data
-
-        return types.Message.de_json(
-            await asyncio_helper.send_data(
-                self.token, chat_id, document, 'document',
-                reply_to_message_id = reply_to_message_id, reply_markup = reply_markup, parse_mode = parse_mode,
-                disable_notification = disable_notification, timeout = timeout, caption = caption, thumb = thumb,
-                caption_entities = caption_entities, allow_sending_without_reply = allow_sending_without_reply,
-                disable_content_type_detection = disable_content_type_detection, visible_file_name = visible_file_name, protect_content = protect_content,
-                message_thread_id = message_thread_id))
-
-    async def send_sticker(
-            self, chat_id: Union[int, str], sticker: Union[Any, str], 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            data: Union[Any, str]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send static .WEBP, animated .TGS, or video .WEBM stickers.
-        On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendsticker
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sticker: Sticker to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL
-            as a String for Telegram to get a .webp file from the Internet, or upload a new one using multipart/form-data.
-        :type sticker: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: to disable the notification
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(sticker):
-            # function typo miss compatibility
-            logger.warning("send_sticker: data parameter is deprecated. Use sticker instead.")
-            sticker = data
-
-        return types.Message.de_json(
-            await asyncio_helper.send_data(
-                self.token, chat_id, sticker, 'sticker',
-                reply_to_message_id=reply_to_message_id, reply_markup=reply_markup,
-                disable_notification=disable_notification, timeout=timeout, 
-                allow_sending_without_reply=allow_sending_without_reply, protect_content=protect_content,
-                message_thread_id=message_thread_id))
-
-    async def send_video(
-            self, chat_id: Union[int, str], video: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None, 
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            supports_streaming: Optional[bool]=None, 
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            timeout: Optional[int]=None,
-            data: Optional[Union[Any, str]]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send video files, Telegram clients support mp4 videos (other formats may be sent as Document).
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendvideo
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param video: Video to send. You can either pass a file_id as String to resend a video that is already on the Telegram servers, or upload a new video file using multipart/form-data.
-        :type video: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent video in seconds
-        :type duration: :obj:`int`
-
-        :param width: Video width
-        :type width: :obj:`int`
-
-        :param height: Video height
-        :type height: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-        
-        :param caption: Video caption (may also be used when resending videos by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the video caption
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param supports_streaming: Pass True, if the uploaded video is suitable for streaming
-        :type supports_streaming: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param data: function typo miss compatibility: do not use it
-        :type data: :obj:`str`
-
-        :param message_thread_id: Identifier of a message thread, in which the video will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        if data and not(video):
-            # function typo miss compatibility
-            logger.warning("send_sticker: data parameter is deprecated. Use video instead.")
-            video = data
-
-        return types.Message.de_json(
-            await asyncio_helper.send_video(
-                self.token, chat_id, video, duration, caption, reply_to_message_id, reply_markup,
-                parse_mode, supports_streaming, disable_notification, timeout, thumb, width, height,
-                caption_entities, allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def send_animation(
-            self, chat_id: Union[int, str], animation: Union[Any, str], 
-            duration: Optional[int]=None,
-            width: Optional[int]=None,
-            height: Optional[int]=None,
-            thumb: Optional[Union[Any, str]]=None,
-            caption: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            disable_notification: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send animation files (GIF or H.264/MPEG-4 AVC video without sound).
-        On success, the sent Message is returned. Bots can currently send animation files of up to 50 MB in size, this limit may be changed in the future.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendanimation
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param animation: Animation to send. Pass a file_id as String to send an animation that exists on the Telegram servers (recommended),
-            pass an HTTP URL as a String for Telegram to get an animation from the Internet, or upload a new animation using multipart/form-data.
-        :type animation: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent animation in seconds
-        :type duration: :obj:`int`
-
-        :param width: Animation width
-        :type width: :obj:`int`
-
-        :param height: Animation height
-        :type height: :obj:`int`
-        
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param caption: Animation caption (may also be used when resending animation by file_id), 0-1024 characters after entities parsing
-        :type caption: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the animation caption
-        :type parse_mode: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
-        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the video will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_animation(
-                self.token, chat_id, animation, duration, caption, reply_to_message_id,
-                reply_markup, parse_mode, disable_notification, timeout, thumb,
-                caption_entities, allow_sending_without_reply, width, height, protect_content, message_thread_id))
-
-    async def send_video_note(
-            self, chat_id: Union[int, str], data: Union[Any, str], 
-            duration: Optional[int]=None, 
-            length: Optional[int]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None, 
-            thumb: Optional[Union[Any, str]]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        As of v.4.0, Telegram clients support rounded square MPEG4 videos of up to 1 minute long.
-        Use this method to send video messages. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendvideonote
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param data: Video note to send. Pass a file_id as String to send a video note that exists on the Telegram servers (recommended)
-            or upload a new video using multipart/form-data. Sending video notes by a URL is currently unsupported
-        :type data: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param duration: Duration of sent video in seconds
-        :type duration: :obj:`int`
-
-        :param length: Video width and height, i.e. diameter of the video message
-        :type length: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
-            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
-            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
-            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>. 
-        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the video note will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_video_note(
-                self.token, chat_id, data, duration, length, reply_to_message_id, reply_markup,
-                disable_notification, timeout, thumb, allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def send_media_group(
-            self, chat_id: Union[int, str], 
-            media: List[Union[
-                types.InputMediaAudio, types.InputMediaDocument, 
-                types.InputMediaPhoto, types.InputMediaVideo]],
-            disable_notification: Optional[bool]=None, 
-            protect_content: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> List[types.Message]:
-        """
-        Use this method to send a group of photos, videos, documents or audios as an album. Documents and audio files
-        can be only grouped in an album with messages of the same type. On success, an array of Messages that were sent is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendmediagroup
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param media: A JSON-serialized array describing messages to be sent, must include 2-10 items
-        :type media: :obj:`list` of :obj:`types.InputMedia`
-
-        :param disable_notification: Sends the messages silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the messages will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, an array of Messages that were sent is returned.
-        :rtype: List[types.Message]
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = await asyncio_helper.send_media_group(
-            self.token, chat_id, media, disable_notification, reply_to_message_id, timeout, 
-            allow_sending_without_reply, protect_content, message_thread_id)
-        return [types.Message.de_json(msg) for msg in result]
-
-    async def send_location(
-            self, chat_id: Union[int, str], 
-            latitude: float, longitude: float, 
-            live_period: Optional[int]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            disable_notification: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None, 
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send point on the map. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendlocation
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param latitude: Latitude of the location
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of the location
-        :type longitude: :obj:`float`
-
-        :param live_period: Period in seconds for which the location will be updated (see Live Locations, should be between 60 and 86400.
-        :type live_period: :obj:`int`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
-            or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
-        :type horizontal_accuracy: :obj:`float`
-
-        :param heading: For live locations, a direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
-        :type heading: :obj:`int`
-
-        :param proximity_alert_radius: For live locations, a maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
-        :type proximity_alert_radius: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-        
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of a message thread, in which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_location(
-                self.token, chat_id, latitude, longitude, live_period, 
-                reply_to_message_id, reply_markup, disable_notification, timeout, 
-                horizontal_accuracy, heading, proximity_alert_radius, 
-                allow_sending_without_reply, protect_content, message_thread_id))
-
-    async def edit_message_live_location(
-            self, latitude: float, longitude: float, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            horizontal_accuracy: Optional[float]=None, 
-            heading: Optional[int]=None, 
-            proximity_alert_radius: Optional[int]=None) -> types.Message:
-        """
-        Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
-            disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
-            is returned, otherwise True is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
-
-        :param latitude: Latitude of new location
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of new location
-        :type longitude: :obj:`float`
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the message to edit
-        :type message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for a new inline keyboard.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
-        :type horizontal_accuracy: :obj:`float`
-
-        :param heading: Direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
-        :type heading: :obj:`int`
-
-        :param proximity_alert_radius: The maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
-        :type proximity_alert_radius: :obj:`int`
-
-        :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
-        :rtype: :class:`telebot.types.Message` or bool
-        """
-        return types.Message.de_json(
-            await asyncio_helper.edit_message_live_location(
-                self.token, latitude, longitude, chat_id, message_id,
-                inline_message_id, reply_markup, timeout,
-                horizontal_accuracy, heading, proximity_alert_radius))
-
-    async def stop_message_live_location(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None) -> types.Message:
-        """
-        Use this method to stop updating a live location message before live_period expires.
-        On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#stopmessagelivelocation
-        
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: 	Required if inline_message_id is not specified. Identifier of the message with live location to stop
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message with live location to stop
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for a new inline keyboard.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
-        :rtype: :class:`telebot.types.Message` or bool
-        """
-        return types.Message.de_json(
-            await asyncio_helper.stop_message_live_location(
-                self.token, chat_id, message_id, inline_message_id, reply_markup, timeout))
-
-    async def send_venue(
-            self, chat_id: Union[int, str], 
-            latitude: float, longitude: float, 
-            title: str, address: str, 
-            foursquare_id: Optional[str]=None, 
-            foursquare_type: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            google_place_id: Optional[str]=None,
-            google_place_type: Optional[str]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send information about a venue. On success, the sent Message is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#sendvenue
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param latitude: Latitude of the venue
-        :type latitude: :obj:`float`
-
-        :param longitude: Longitude of the venue
-        :type longitude: :obj:`float`
-
-        :param title: Name of the venue
-        :type title: :obj:`str`
-
-        :param address: Address of the venue
-        :type address: :obj:`str`
-
-        :param foursquare_id: Foursquare identifier of the venue
-        :type foursquare_id: :obj:`str`
-
-        :param foursquare_type: Foursquare type of the venue, if known. (For example, “arts_entertainment/default”,
-            “arts_entertainment/aquarium” or “food/icecream”.)
-        :type foursquare_type: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
-            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
-            replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param google_place_id: Google Places identifier of the venue
-        :type google_place_id: :obj:`str`
-
-        :param google_place_type: Google Places type of the venue.
-        :type google_place_type: :obj:`str`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The thread to which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_venue(
-                self.token, chat_id, latitude, longitude, title, address, foursquare_id, foursquare_type,
-                disable_notification, reply_to_message_id, reply_markup, timeout,
-                allow_sending_without_reply, google_place_id, google_place_type, protect_content, message_thread_id)
-        )
-
-    async def send_contact(
-            self, chat_id: Union[int, str], phone_number: str, 
-            first_name: str, last_name: Optional[str]=None, 
-            vcard: Optional[str]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send phone contacts. On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendcontact
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param phone_number: Contact's phone number
-        :type phone_number: :obj:`str`
-
-        :param first_name: Contact's first name
-        :type first_name: :obj:`str`
-
-        :param last_name: Contact's last name
-        :type last_name: :obj:`str`
-
-        :param vcard: Additional data about the contact in the form of a vCard, 0-2048 bytes
-        :type vcard: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
-            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
-            or :class:`telebot.types.ForceReply`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
-            replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The thread to which the message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        return types.Message.de_json(
-            await asyncio_helper.send_contact(
-                self.token, chat_id, phone_number, first_name, last_name, vcard,
-                disable_notification, reply_to_message_id, reply_markup, timeout,
-                allow_sending_without_reply, protect_content, message_thread_id)
-        )
-
-    async def send_chat_action(
-            self, chat_id: Union[int, str], action: str, timeout: Optional[int]=None) -> bool:
-        """
-        Use this method when you need to tell the user that something is happening on the bot's side.
-        The status is set for 5 seconds or less (when a message arrives from your bot, Telegram clients clear its typing status).
-        Returns True on success.
-
-        Example: The ImageBot needs some time to process a request and upload the image. Instead of sending a text message along the lines of
-        “Retrieving image, please wait…”, the bot may use sendChatAction with action = upload_photo. The user will see a “sending photo” status for the bot.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendchataction
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` or :obj:`str`
-        
-        :param action: Type of action to broadcast. Choose one, depending on what the user is about
-            to receive: typing for text messages, upload_photo for photos, record_video or upload_video
-            for videos, record_voice or upload_voice for voice notes, upload_document for general files,
-            choose_sticker for stickers, find_location for location data, record_video_note or upload_video_note for video notes.
-        :type action: :obj:`str`
-
-        :param timeout: Timeout in seconds for the request.
-        :type timeout: :obj:`int`
-
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.send_chat_action(self.token, chat_id, action, timeout)
-
-    async def kick_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date:Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
-        """
-        This function is deprecated. Use `ban_chat_member` instead
-        """
-        logger.info('kick_chat_member is deprecated. Use ban_chat_member instead.')
-        return await asyncio_helper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
-
-    async def ban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date:Optional[Union[int, datetime]]=None, 
-            revoke_messages: Optional[bool]=None) -> bool:
-        """
-        Use this method to ban a user in a group, a supergroup or a channel. 
-        In the case of supergroups and channels, the user will not be able to return to the chat on their 
-        own using invite links, etc., unless unbanned first. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#banchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup
-            or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param until_date: Date when the user will be unbanned, unix time. If user is banned for more than 366 days or
-               less than 30 seconds from the current time they are considered to be banned forever
-        :type until_date: :obj:`int` or :obj:`datetime`
-
-        :param revoke_messages: Bool: Pass True to delete all messages from the chat for the user that is being removed.
-            If False, the user will be able to see messages in the group that were sent before the user was removed. 
-            Always True for supergroups and channels.
-        :type revoke_messages: :obj:`bool`
-        
-        :return: Returns True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
-
-    async def unban_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            only_if_banned: Optional[bool]=False) -> bool:
-        """
-        Use this method to unban a previously kicked user in a supergroup or channel.
-        The user will not return to the group or channel automatically, but will be able to join via link, etc.
-        The bot must be an administrator for this to work. By default, this method guarantees that after the call
-        the user is not a member of the chat, but will be able to join it. So if the user is a member of the chat
-        they will also be removed from the chat. If you don't want this, use the parameter only_if_banned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unbanchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup or channel
-            (in the format @username)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param only_if_banned: Do nothing if the user is not banned
-        :type only_if_banned: :obj:`bool`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.unban_chat_member(self.token, chat_id, user_id, only_if_banned)
-
-    async def restrict_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            until_date: Optional[Union[int, datetime]]=None,
-            can_send_messages: Optional[bool]=None, 
-            can_send_media_messages: Optional[bool]=None,
-            can_send_polls: Optional[bool]=None, 
-            can_send_other_messages: Optional[bool]=None,
-            can_add_web_page_previews: Optional[bool]=None, 
-            can_change_info: Optional[bool]=None,
-            can_invite_users: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None) -> bool:
-        """
-        Use this method to restrict a user in a supergroup.
-        The bot must be an administrator in the supergroup for this to work and must have
-        the appropriate admin rights. Pass True for all boolean parameters to lift restrictions from a user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#restrictchatmember
-
-        :param chat_id: Unique identifier for the target group or username of the target supergroup
-            or channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param until_date: Date when restrictions will be lifted for the user, unix time.
-            If user is restricted for more than 366 days or less than 30 seconds from the current time,
-            they are considered to be restricted forever
-        :type until_date: :obj:`int` or :obj:`datetime`
-
-        :param can_send_messages: Pass True, if the user can send text messages, contacts, locations and venues
-        :type can_send_messages: :obj:`bool`
-        
-        :param can_send_media_messages: Pass True, if the user can send audios, documents, photos, videos, video notes
-            and voice notes, implies can_send_messages
-        :type can_send_media_messages: :obj:`bool`
-        
-        :param can_send_polls: Pass True, if the user is allowed to send polls, implies can_send_messages
-        :type can_send_polls: :obj:`bool`
-
-        :param can_send_other_messages: Pass True, if the user can send animations, games, stickers and use inline bots, implies can_send_media_messages
-        :type can_send_other_messages: :obj:`bool`
-
-        :param can_add_web_page_previews: Pass True, if the user may add web page previews to their messages,
-            implies can_send_media_messages
-        :type can_add_web_page_previews: :obj:`bool`
-
-        :param can_change_info: Pass True, if the user is allowed to change the chat title, photo and other settings.
-            Ignored in public supergroups
-        :type can_change_info: :obj:`bool`
-
-        :param can_invite_users: Pass True, if the user is allowed to invite new users to the chat,
-            implies can_invite_users
-        :type can_invite_users: :obj:`bool`
-
-        :param can_pin_messages: Pass True, if the user is allowed to pin messages. Ignored in public supergroups
-        :type can_pin_messages: :obj:`bool`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.restrict_chat_member(
-            self.token, chat_id, user_id, until_date,
-            can_send_messages, can_send_media_messages,
-            can_send_polls, can_send_other_messages,
-            can_add_web_page_previews, can_change_info,
-            can_invite_users, can_pin_messages)
-
-    async def promote_chat_member(
-            self, chat_id: Union[int, str], user_id: int, 
-            can_change_info: Optional[bool]=None, 
-            can_post_messages: Optional[bool]=None,
-            can_edit_messages: Optional[bool]=None, 
-            can_delete_messages: Optional[bool]=None, 
-            can_invite_users: Optional[bool]=None,
-            can_restrict_members: Optional[bool]=None, 
-            can_pin_messages: Optional[bool]=None, 
-            can_promote_members: Optional[bool]=None,
-            is_anonymous: Optional[bool]=None, 
-            can_manage_chat: Optional[bool]=None, 
-            can_manage_video_chats: Optional[bool]=None,
-            can_manage_voice_chats: Optional[bool]=None,
-            can_manage_topics: Optional[bool]=None) -> bool:
-        """
-        Use this method to promote or demote a user in a supergroup or a channel. The bot must be an administrator
-        in the chat for this to work and must have the appropriate admin rights.
-        Pass False for all boolean parameters to demote a user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#promotechatmember
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (
-            in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param can_change_info: Pass True, if the administrator can change chat title, photo and other settings
-        :type can_change_info: :obj:`bool`
-
-        :param can_post_messages: Pass True, if the administrator can create channel posts, channels only
-        :type can_post_messages: :obj:`bool`
-
-        :param can_edit_messages: Pass True, if the administrator can edit messages of other users, channels only
-        :type can_edit_messages: :obj:`bool`
-
-        :param can_delete_messages: Pass True, if the administrator can delete messages of other users
-        :type can_delete_messages: :obj:`bool`
-
-        :param can_invite_users: Pass True, if the administrator can invite new users to the chat
-        :type can_invite_users: :obj:`bool`
-
-        :param can_restrict_members: Pass True, if the administrator can restrict, ban or unban chat members
-        :type can_restrict_members: :obj:`bool`
-
-        :param can_pin_messages: Pass True, if the administrator can pin messages, supergroups only
-        :type can_pin_messages: :obj:`bool`
-
-        :param can_promote_members: Pass True, if the administrator can add new administrators with a subset
-            of his own privileges or demote administrators that he has promoted, directly or indirectly
-            (promoted by administrators that were appointed by him)
-        :type can_promote_members: :obj:`bool`
-
-        :param is_anonymous: Pass True, if the administrator's presence in the chat is hidden
-        :type is_anonymous: :obj:`bool`
-
-        :param can_manage_chat: Pass True, if the administrator can access the chat event log, chat statistics, 
-            message statistics in channels, see channel members, 
-            see anonymous administrators in supergroups and ignore slow mode. 
-            Implied by any other administrator privilege
-        :type can_manage_chat: :obj:`bool`
-
-        :param can_manage_video_chats: Pass True, if the administrator can manage voice chats
-            For now, bots can use this privilege only for passing to other administrators.
-        :type can_manage_video_chats: :obj:`bool`
-
-        :param can_manage_voice_chats: Deprecated, use can_manage_video_chats.
-        :type can_manage_voice_chats: :obj:`bool`
-
-        :param can_manage_topics: Pass True if the user is allowed to create, rename, close,
-            and reopen forum topics, supergroups only
-        :type can_manage_topics: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-
-        if can_manage_voice_chats is not None:
-            logger.warning("promote_chat_member: can_manage_voice_chats parameter is deprecated. Use can_manage_video_chats instead.")
-            if can_manage_video_chats is None:
-                can_manage_video_chats = can_manage_voice_chats
-
-        return await asyncio_helper.promote_chat_member(
-            self.token, chat_id, user_id, can_change_info, can_post_messages,
-            can_edit_messages, can_delete_messages, can_invite_users,
-            can_restrict_members, can_pin_messages, can_promote_members,
-            is_anonymous, can_manage_chat, can_manage_video_chats, can_manage_topics)
-
-    async def set_chat_administrator_custom_title(
-            self, chat_id: Union[int, str], user_id: int, custom_title: str) -> bool:
-        """
-        Use this method to set a custom title for an administrator in a supergroup promoted by the bot.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatadministratorcustomtitle
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int`
-
-        :param custom_title: New custom title for the administrator;
-            0-16 characters, emoji are not allowed
-        :type custom_title: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_administrator_custom_title(self.token, chat_id, user_id, custom_title)
-
-
-    async def ban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to ban a channel chat in a supergroup or a channel.
-        The owner of the chat will not be able to send messages and join live 
-        streams on behalf of the chat, unless it is unbanned first. 
-        The bot must be an administrator in the supergroup or channel 
-        for this to work and must have the appropriate administrator rights. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#banchatsenderchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sender_chat_id: Unique identifier of the target sender chat
-        :type sender_chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.ban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
-    async def unban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to unban a previously banned channel chat in a supergroup or channel. 
-        The bot must be an administrator for this to work and must have the appropriate 
-        administrator rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unbanchatsenderchat
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param sender_chat_id: Unique identifier of the target sender chat.
-        :type sender_chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.unban_chat_sender_chat(self.token, chat_id, sender_chat_id)
-
-    async def set_chat_permissions(
-            self, chat_id: Union[int, str], permissions: types.ChatPermissions) -> bool:
-        """
-        Use this method to set default chat permissions for all members.
-        The bot must be an administrator in the group or a supergroup for this to work
-        and must have the can_restrict_members admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatpermissions
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param permissions: New default chat permissions
-        :type permissions: :class:`telebot.types..ChatPermissions`
-
-        :return: True on success
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_permissions(self.token, chat_id, permissions)
-
-    async def create_chat_invite_link(
-            self, chat_id: Union[int, str],
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None, 
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
-        """
-        Use this method to create an additional invite link for a chat. The bot must be an administrator in the chat for this to work and
-        must have the appropriate administrator rights.
-        The link can be revoked using the method revokeChatInviteLink.
-        Returns the new invite link as ChatInviteLink object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Invite link name; 0-32 characters
-        :type name: :obj:`str`
-
-        :param expire_date: Point in time (Unix timestamp) when the link will expire
-        :type expire_date: :obj:`int` or :obj:`datetime`
-
-        :param member_limit: Maximum number of users that can be members of the chat simultaneously
-        :type member_limit: :obj:`int`
-
-        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
-        :type creates_join_request: :obj:`bool`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            await asyncio_helper.create_chat_invite_link(self.token, chat_id, name, expire_date, member_limit, creates_join_request)
-        )
-
-    async def edit_chat_invite_link(
-            self, chat_id: Union[int, str],
-            invite_link: Optional[str] = None,
-            name: Optional[str]=None,
-            expire_date: Optional[Union[int, datetime]]=None,
-            member_limit: Optional[int]=None,
-            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
-        """
-        Use this method to edit a non-primary invite link created by the bot.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Invite link name; 0-32 characters
-        :type name: :obj:`str`
-
-        :param invite_link: The invite link to edit
-        :type invite_link: :obj:`str`
-
-        :param expire_date: Point in time (Unix timestamp) when the link will expire
-        :type expire_date: :obj:`int` or :obj:`datetime`
-
-        :param member_limit: Maximum number of users that can be members of the chat simultaneously
-        :type member_limit: :obj:`int`
-
-        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
-        :type creates_join_request: :obj:`bool`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            await asyncio_helper.edit_chat_invite_link(self.token, chat_id, name, invite_link, expire_date, member_limit, creates_join_request)
-        )
-
-    async def revoke_chat_invite_link(
-            self, chat_id: Union[int, str], invite_link: str) -> types.ChatInviteLink:
-        """
-        Use this method to revoke an invite link created by the bot.
-        Note: If the primary link is revoked, a new link is automatically generated The bot must be an administrator 
-        in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#revokechatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param invite_link: The invite link to revoke
-        :type invite_link: :obj:`str`
-
-        :return: Returns the new invite link as ChatInviteLink object.
-        :rtype: :class:`telebot.types.ChatInviteLink`
-        """
-        return types.ChatInviteLink.de_json(
-            await asyncio_helper.revoke_chat_invite_link(self.token, chat_id, invite_link)
-        )
-
-    async def export_chat_invite_link(self, chat_id: Union[int, str]) -> str:
-        """
-        Use this method to export an invite link to a supergroup or a channel. The bot must be an administrator
-        in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#exportchatinvitelink
-
-        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: exported invite link as String on success.
-        :rtype: :obj:`str`
-        """
-        return await asyncio_helper.export_chat_invite_link(self.token, chat_id)
-
-
-    async def approve_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
-        """
-        Use this method to approve a chat join request. 
-        The bot must be an administrator in the chat for this to work and must have
-        the can_invite_users administrator right. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#approvechatjoinrequest
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.approve_chat_join_request(self.token, chat_id, user_id)
-
-    async def decline_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
-        """
-        Use this method to decline a chat join request. 
-        The bot must be an administrator in the chat for this to work and must have
-        the can_invite_users administrator right. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#declinechatjoinrequest
-
-        :param chat_id: Unique identifier for the target chat or username of the target supergroup
-            (in the format @supergroupusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param user_id: Unique identifier of the target user
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.decline_chat_join_request(self.token, chat_id, user_id)
-
-    async def set_chat_photo(self, chat_id: Union[int, str], photo: Any) -> bool:
-        """
-        Use this method to set a new profile photo for the chat. Photos can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
-        setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatphoto
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param photo: InputFile: New chat photo, uploaded using multipart/form-data
-        :type photo: :obj:`typing.Union[file_like, str]`
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_photo(self.token, chat_id, photo)
-
-    async def delete_chat_photo(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to delete a chat photo. Photos can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’ setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletechatphoto
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_chat_photo(self.token, chat_id)
-    
-    async def get_my_commands(self, scope: Optional[types.BotCommandScope], 
-            language_code: Optional[str]) -> List[types.BotCommand]:
-        """
-        Use this method to get the current list of the bot's commands. 
-        Returns List of BotCommand on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getmycommands
-
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: List of BotCommand on success.
-        :rtype: :obj:`list` of :class:`telebot.types.BotCommand`
-        """
-        result = await asyncio_helper.get_my_commands(self.token, scope, language_code)
-        return [types.BotCommand.de_json(cmd) for cmd in result]
-
-    async def set_chat_menu_button(self, chat_id: Union[int, str]=None, 
-                menu_button: types.MenuButton=None) -> bool:
-        """
-        Use this method to change the bot's menu button in a private chat, 
-        or the default menu button. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatmenubutton
-
-        :param chat_id: Unique identifier for the target private chat. 
-            If not specified, default bot's menu button will be changed.
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param menu_button: A JSON-serialized object for the new bot's menu button. Defaults to MenuButtonDefault
-        :type menu_button: :class:`telebot.types.MenuButton`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_menu_button(self.token, chat_id, menu_button)
-
-
-    async def get_chat_menu_button(self, chat_id: Union[int, str]=None) -> types.MenuButton:
-        """
-        Use this method to get the current value of the bot's menu button
-        in a private chat, or the default menu button.
-        Returns MenuButton on success.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#getchatmenubutton
-
-        :param chat_id: Unique identifier for the target private chat.
-            If not specified, default bot's menu button will be returned.
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: types.MenuButton
-        :rtype: :class:`telebot.types.MenuButton`
-        """
-        return types.MenuButton.de_json(await asyncio_helper.get_chat_menu_button(self.token, chat_id))
-
-
-    async def set_my_default_administrator_rights(self, rights: types.ChatAdministratorRights=None, 
-                                    for_channels: bool=None) -> bool:
-        """
-        Use this method to change the default administrator rights requested by the bot
-        when it's added as an administrator to groups or channels.
-        These rights will be suggested to users, but they are are free to modify
-        the list before adding the bot. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setmydefaultadministratorrights
-
-        :param rights: A JSON-serialized object describing new default administrator rights. If not specified,
-            the default administrator rights will be cleared.
-        :type rights: :class:`telebot.types.ChatAdministratorRights`
-
-        :param for_channels: Pass True to change the default administrator rights of the bot in channels.
-            Otherwise, the default administrator rights of the bot for groups and supergroups will be changed.
-        :type for_channels: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-
-        return await asyncio_helper.set_my_default_administrator_rights(self.token, rights, for_channels)
-        
-
-    async def get_my_default_administrator_rights(self, for_channels: bool=None) -> types.ChatAdministratorRights:
-        """
-        Use this method to get the current default administrator rights of the bot.
-        Returns ChatAdministratorRights on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getmydefaultadministratorrights
-
-        :param for_channels: Pass True to get the default administrator rights of the bot in channels. Otherwise, the default administrator rights of the bot for groups and supergroups will be returned.
-        :type for_channels: :obj:`bool`
-
-        :return: Returns ChatAdministratorRights on success.
-        :rtype: :class:`telebot.types.ChatAdministratorRights`
-        """
-        
-        return types.ChatAdministratorRights.de_json(await asyncio_helper.get_my_default_administrator_rights(self.token, for_channels))
-
-    async def set_my_commands(self, commands: List[types.BotCommand], 
-            scope: Optional[types.BotCommandScope]=None,
-            language_code: Optional[str]=None) -> bool:
-        """
-        Use this method to change the list of the bot's commands.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setmycommands
-
-        :param commands: List of BotCommand. At most 100 commands can be specified.
-        :type commands: :obj:`list` of :class:`telebot.types.BotCommand`
-
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_my_commands(self.token, commands, scope, language_code)
-    
-    async def delete_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
-            language_code: Optional[int]=None) -> bool:
-        """
-        Use this method to delete the list of the bot's commands for the given scope and user language. 
-        After deletion, higher level commands will be shown to affected users. 
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deletemycommands
-        
-        :param scope: The scope of users for which the commands are relevant. 
-            Defaults to BotCommandScopeDefault.
-        :type scope: :class:`telebot.types.BotCommandScope`
-
-        :param language_code: A two-letter ISO 639-1 language code. If empty, 
-            commands will be applied to all users from the given scope, 
-            for whose language there are no dedicated commands
-        :type language_code: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_my_commands(self.token, scope, language_code)
-
-    async def set_chat_title(self, chat_id: Union[int, str], title: str) -> bool:
-        """
-        Use this method to change the title of a chat. Titles can't be changed for private chats.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
-        setting is off in the target group.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchattitle
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param title: New chat title, 1-255 characters
-        :type title: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_title(self.token, chat_id, title)
-
-    async def set_chat_description(self, chat_id: Union[int, str], description: Optional[str]=None) -> bool:
-        """
-        Use this method to change the description of a supergroup or a channel.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setchatdescription
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param description: Str: New chat description, 0-255 characters
-        :type description: :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_chat_description(self.token, chat_id, description)
-
-    async def pin_chat_message(
-            self, chat_id: Union[int, str], message_id: int, 
-            disable_notification: Optional[bool]=False) -> bool:
-        """
-        Use this method to pin a message in a supergroup.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#pinchatmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Identifier of a message to pin
-        :type message_id: :obj:`int`
-
-        :param disable_notification: Pass True, if it is not necessary to send a notification
-            to all group members about the new pinned message
-        :type disable_notification: :obj:`bool`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-
-        return await asyncio_helper.pin_chat_message(self.token, chat_id, message_id, disable_notification)
-
-    async def unpin_chat_message(self, chat_id: Union[int, str], message_id: Optional[int]=None) -> bool:
-        """
-        Use this method to unpin specific pinned message in a supergroup chat.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinchatmessage
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Int: Identifier of a message to unpin
-        :type message_id: :obj:`int`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.unpin_chat_message(self.token, chat_id, message_id)
-
-    async def unpin_all_chat_messages(self, chat_id: Union[int, str]) -> bool:
-        """
-        Use this method to unpin a all pinned messages in a supergroup chat.
-        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinallchatmessages
-
-        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
-            (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :return: True on success.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.unpin_all_chat_messages(self.token, chat_id)
-
-    async def edit_message_text(
-            self, text: str, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None, 
-            parse_mode: Optional[str]=None,
-            entities: Optional[List[types.MessageEntity]]=None,
-            disable_web_page_preview: Optional[bool]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit text and game messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagetext
-
-        :param text: New text of the message, 1-4096 characters after entities parsing
-        :type text: :obj:`str`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param parse_mode: Mode for parsing entities in the message text.
-        :type parse_mode: :obj:`str`
-
-        :param entities: List of special entities that appear in the message text, which can be specified instead of parse_mode
-        :type entities: List of :obj:`telebot.types.MessageEntity`
-
-        :param disable_web_page_preview: Disables link previews for links in this message
-        :type disable_web_page_preview: :obj:`bool`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
-
-        result = await asyncio_helper.edit_message_text(self.token, text, chat_id, message_id, inline_message_id, parse_mode,
-                                             entities, disable_web_page_preview, reply_markup)
-        if type(result) == bool:  # if edit inline message return is bool not Message.
-            return result
-        return types.Message.de_json(result)
-
-    async def edit_message_media(
-            self, media: Any, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit animation, audio, document, photo, or video messages.
-        If a message is a part of a message album, then it can be edited only to a photo or a video.
-        Otherwise, message type can be changed arbitrarily. When inline message is edited, new file can't be uploaded.
-        Use previously uploaded file via its file_id or specify a URL.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagemedia
-
-        :param media: A JSON-serialized object for a new media content of the message
-        :type media: :obj:`InputMedia`
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message 
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`telebot.types.InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = await asyncio_helper.edit_message_media(self.token, media, chat_id, message_id, inline_message_id, reply_markup)
-        if type(result) == bool:  # if edit inline message return is bool not Message.
-            return result
-        return types.Message.de_json(result)
-
-    async def edit_message_reply_markup(
-            self, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None,
-            inline_message_id: Optional[str]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit only the reply markup of messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagereplymarkup
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = await asyncio_helper.edit_message_reply_markup(self.token, chat_id, message_id, inline_message_id, reply_markup)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    async def send_game(
-            self, chat_id: Union[int, str], game_short_name: str, 
-            disable_notification: Optional[bool]=None,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Used to send the game.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendgame
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param game_short_name: Short name of the game, serves as the unique identifier for the game. Set up your games via @BotFather.
-        :type game_short_name: :obj:`str`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message 
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
-
-        :param timeout: Timeout in seconds for waiting for a response from the bot.
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified replied-to messages is not found.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param protect_content: Pass True, if content of the message needs to be protected from being viewed by the bot.
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: Identifier of the thread to which the message will be sent.
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = await asyncio_helper.send_game(
-            self.token, chat_id, game_short_name, disable_notification,
-            reply_to_message_id, reply_markup, timeout, 
-            allow_sending_without_reply, protect_content, message_thread_id)
-        return types.Message.de_json(result)
-
-    async def set_game_score(
-            self, user_id: Union[int, str], score: int, 
-            force: Optional[bool]=None, 
-            chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            disable_edit_message: Optional[bool]=None) -> Union[types.Message, bool]:
-        """
-        Sets the value of points in the game to a specific user.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setgamescore
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int` or :obj:`str`
-
-        :param score: New score, must be non-negative
-        :type score: :obj:`int`
-
-        :param force: Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters
-        :type force: :obj:`bool`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :param disable_edit_message: Pass True, if the game message should not be automatically edited to include the current scoreboard
-        :type disable_edit_message: :obj:`bool`
-
-        :return: On success, if the message was sent by the bot, returns the edited Message, otherwise returns True.
-        :rtype: :obj:`types.Message` or :obj:`bool`
-        """
-        result = await asyncio_helper.set_game_score(self.token, user_id, score, force, disable_edit_message, chat_id,
-                                          message_id, inline_message_id)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    async def get_game_high_scores(
-            self, user_id: int, chat_id: Optional[Union[int, str]]=None,
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None) -> List[types.GameHighScore]:
-        """
-        Use this method to get data for high score tables. Will return the score of the specified user and several of
-        their neighbors in a game. On success, returns an Array of GameHighScore objects.
-
-        This method will currently return scores for the target user, plus two of their closest neighbors on each side.
-        Will also return the top three users if the user and their neighbors are not among them.
-        Please note that this behavior is subject to change.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getgamehighscores
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
-        :type inline_message_id: :obj:`str`
-
-        :return: On success, returns an Array of GameHighScore objects.
-        :rtype: List[types.GameHighScore]
-        """
-        result = await asyncio_helper.get_game_high_scores(self.token, user_id, chat_id, message_id, inline_message_id)
-        return [types.GameHighScore.de_json(r) for r in result]
-
-    async def send_invoice(
-            self, chat_id: Union[int, str], title: str, description: str, 
-            invoice_payload: str, provider_token: str, currency: str, 
-            prices: List[types.LabeledPrice], start_parameter: Optional[str]=None, 
-            photo_url: Optional[str]=None, photo_size: Optional[int]=None, 
-            photo_width: Optional[int]=None, photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None, need_phone_number: Optional[bool]=None, 
-            need_email: Optional[bool]=None, need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None, 
-            send_email_to_provider: Optional[bool]=None, 
-            is_flexible: Optional[bool]=None,
-            disable_notification: Optional[bool]=None, 
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            provider_data: Optional[str]=None, 
-            timeout: Optional[int]=None,
-            allow_sending_without_reply: Optional[bool]=None,
-            max_tip_amount: Optional[int] = None,
-            suggested_tip_amounts: Optional[List[int]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Sends invoice.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendinvoice
-
-        :param chat_id: Unique identifier for the target private chat
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param title: Product name, 1-32 characters
-        :type title: :obj:`str`
-
-        :param description: Product description, 1-255 characters
-        :type description: :obj:`str`
-
-        :param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
-            use for your internal processes.
-        :type invoice_payload: :obj:`str`
-
-        :param provider_token: Payments provider token, obtained via @Botfather
-        :type provider_token: :obj:`str`
-
-        :param currency: Three-letter ISO 4217 currency code,
-            see https://core.telegram.org/bots/payments#supported-currencies
-        :type currency: :obj:`str`
-
-        :param prices: Price breakdown, a list of components
-            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
-        :type prices: List[:obj:`types.LabeledPrice`]
-
-        :param start_parameter: Unique deep-linking parameter that can be used to generate this invoice
-            when used as a start parameter
-        :type start_parameter: :obj:`str`
-
-        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
-            or a marketing image for a service. People like it better when they see what they are paying for.
-        :type photo_url: :obj:`str`
-
-        :param photo_size: Photo size in bytes
-        :type photo_size: :obj:`int`
-
-        :param photo_width: Photo width 
-        :type photo_width: :obj:`int`
-
-        :param photo_height: Photo height
-        :type photo_height: :obj:`int`
-
-        :param need_name: Pass True, if you require the user's full name to complete the order
-        :type need_name: :obj:`bool`
-
-        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
-        :type need_phone_number: :obj:`bool`
-
-        :param need_email: Pass True, if you require the user's email to complete the order
-        :type need_email: :obj:`bool`
-
-        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
-        :type need_shipping_address: :obj:`bool`
-
-        :param is_flexible: Pass True, if the final price depends on the shipping method
-        :type is_flexible: :obj:`bool`
-
-        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
-        :type send_phone_number_to_provider: :obj:`bool`
-
-        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
-        :type send_email_to_provider: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard. If empty,
-            one 'Pay total price' button will be shown. If not empty, the first button must be a Pay button
-        :type reply_markup: :obj:`str`
-
-        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
-            A detailed description of required fields should be provided by the payment provider.
-        :type provider_data: :obj:`str`
-
-        :param timeout: Timeout of a request, defaults to None
-        :type timeout: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
-        :type max_tip_amount: :obj:`int`
-
-        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
-            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
-            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
-        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, in which the invoice message will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-
-        result = await asyncio_helper.send_invoice(
-            self.token, chat_id, title, description, invoice_payload, provider_token,
-            currency, prices, start_parameter, photo_url, photo_size, photo_width,
-            photo_height, need_name, need_phone_number, need_email, need_shipping_address,
-            send_phone_number_to_provider, send_email_to_provider, is_flexible, disable_notification,
-            reply_to_message_id, reply_markup, provider_data, timeout, allow_sending_without_reply,
-            max_tip_amount, suggested_tip_amounts, protect_content, message_thread_id)
-        return types.Message.de_json(result)
-
-
-    async def create_invoice_link(self,
-            title: str, description: str, payload:str, provider_token: str, 
-            currency: str, prices: List[types.LabeledPrice],
-            max_tip_amount: Optional[int] = None, 
-            suggested_tip_amounts: Optional[List[int]]=None,
-            provider_data: Optional[str]=None,
-            photo_url: Optional[str]=None,
-            photo_size: Optional[int]=None,
-            photo_width: Optional[int]=None,
-            photo_height: Optional[int]=None,
-            need_name: Optional[bool]=None,
-            need_phone_number: Optional[bool]=None,
-            need_email: Optional[bool]=None,
-            need_shipping_address: Optional[bool]=None,
-            send_phone_number_to_provider: Optional[bool]=None,
-            send_email_to_provider: Optional[bool]=None,
-            is_flexible: Optional[bool]=None) -> str:
-            
-        """
-        Use this method to create a link for an invoice. 
-        Returns the created invoice link as String on success.
-
-        Telegram documentation:
-        https://core.telegram.org/bots/api#createinvoicelink
-
-        :param title: Product name, 1-32 characters
-        :type title: :obj:`str`
-
-        :param description: Product description, 1-255 characters
-        :type description: :obj:`str`
-
-        :param payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
-            use for your internal processes.
-        :type payload: :obj:`str`
-
-        :param provider_token: Payments provider token, obtained via @Botfather
-        :type provider_token: :obj:`str`
-
-        :param currency: Three-letter ISO 4217 currency code,
-            see https://core.telegram.org/bots/payments#supported-currencies
-        :type currency: :obj:`str`
-
-        :param prices: Price breakdown, a list of components
-            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
-        :type prices: :obj:`list` of :obj:`types.LabeledPrice`
-
-        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
-        :type max_tip_amount: :obj:`int`
-
-        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
-            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
-            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
-        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
-
-        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
-            A detailed description of required fields should be provided by the payment provider.
-        :type provider_data: :obj:`str`
-
-        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
-            or a photo of the invoice. People like it better when they see a photo of what they are paying for.
-        :type photo_url: :obj:`str`
-
-        :param photo_size: Photo size in bytes
-        :type photo_size: :obj:`int`
-
-        :param photo_width: Photo width
-        :type photo_width: :obj:`int`
-
-        :param photo_height: Photo height
-        :type photo_height: :obj:`int`
-
-        :param need_name: Pass True, if you require the user's full name to complete the order
-        :type need_name: :obj:`bool`
-
-        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
-        :type need_phone_number: :obj:`bool`
-
-        :param need_email: Pass True, if you require the user's email to complete the order
-        :type need_email: :obj:`bool`
-
-        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
-        :type need_shipping_address: :obj:`bool`
-
-        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
-        :type send_phone_number_to_provider: :obj:`bool`
-
-        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
-        :type send_email_to_provider: :obj:`bool`
-
-        :param is_flexible: Pass True, if the final price depends on the shipping method
-        :type is_flexible: :obj:`bool`
-
-        :return: Created invoice link as String on success.
-        :rtype: :obj:`str`
-        """
-        result = await asyncio_helper.create_invoice_link(
-            self.token, title, description, payload, provider_token,
-            currency, prices, max_tip_amount, suggested_tip_amounts, provider_data,
-            photo_url, photo_size, photo_width, photo_height, need_name, need_phone_number,
-            need_email, need_shipping_address, send_phone_number_to_provider,
-            send_email_to_provider, is_flexible)
-        return result
-
-    # noinspection PyShadowingBuiltins
-    async def send_poll(
-            self, chat_id: Union[int, str], question: str, options: List[str],
-            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
-            allows_multiple_answers: Optional[bool]=None, 
-            correct_option_id: Optional[int]=None,
-            explanation: Optional[str]=None, 
-            explanation_parse_mode: Optional[str]=None, 
-            open_period: Optional[int]=None, 
-            close_date: Optional[Union[int, datetime]]=None, 
-            is_closed: Optional[bool]=None,
-            disable_notification: Optional[bool]=False,
-            reply_to_message_id: Optional[int]=None, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
-            allow_sending_without_reply: Optional[bool]=None, 
-            timeout: Optional[int]=None,
-            explanation_entities: Optional[List[types.MessageEntity]]=None,
-            protect_content: Optional[bool]=None,
-            message_thread_id: Optional[int]=None) -> types.Message:
-        """
-        Use this method to send a native poll.
-        On success, the sent Message is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#sendpoll
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param question: Poll question, 1-300 characters
-        :type question: :obj:`str`
-
-        :param options: A JSON-serialized list of answer options, 2-10 strings 1-100 characters each
-        :type options: :obj:`list` of :obj:`str`
-
-        :param is_anonymous: True, if the poll needs to be anonymous, defaults to True
-        :type is_anonymous: :obj:`bool`
-
-        :param type: Poll type, “quiz” or “regular”, defaults to “regular”
-        :type type: :obj:`str`
-
-        :param allows_multiple_answers: True, if the poll allows multiple answers, ignored for polls in quiz mode, defaults to False
-        :type allows_multiple_answers: :obj:`bool`
-
-        :param correct_option_id: 0-based identifier of the correct answer option. Available only for polls in quiz mode,
-            defaults to None
-        :type correct_option_id: :obj:`int`
-
-        :param explanation: Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll,
-            0-200 characters with at most 2 line feeds after entities parsing
-        :type explanation: :obj:`str`
-
-        :param explanation_parse_mode: Mode for parsing entities in the explanation. See formatting options for more details.
-        :type explanation_parse_mode: :obj:`str`
-
-        :param open_period: Amount of time in seconds the poll will be active after creation, 5-600. Can't be used together with close_date.
-        :type open_period: :obj:`int`
-
-        :param close_date: Point in time (Unix timestamp) when the poll will be automatically closed.
-        :type close_date: :obj:`int` | :obj:`datetime`
-
-        :param is_closed: Pass True, if the poll needs to be immediately closed. This can be useful for poll preview.
-        :type is_closed: :obj:`bool`
-
-        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
-        :type disable_notification: :obj:`bool`
-
-        :param reply_to_message_id: If the message is a reply, ID of the original message
-        :type reply_to_message_id: :obj:`int`
-
-        :param allow_sending_without_reply: Pass True, if the poll allows multiple options to be voted simultaneously.
-        :type allow_sending_without_reply: :obj:`bool`
-
-        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard,
-            instructions to remove reply keyboard or to force a reply from the user.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
-
-        :param timeout: Timeout in seconds for waiting for a response from the user.
-        :type timeout: :obj:`int`
-
-        :param explanation_entities: A JSON-serialized list of special entities that appear in the explanation,
-            which can be specified instead of parse_mode
-        :type explanation_entities: :obj:`list` of :obj:`MessageEntity`
-
-        :param protect_content: Protects the contents of the sent message from forwarding and saving
-        :type protect_content: :obj:`bool`
-
-        :param message_thread_id: The identifier of a message thread, in which the poll will be sent
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :obj:`types.Message`
-        """
-        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
-        protect_content = self.protect_content if (protect_content is None) else protect_content
-        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
-        explanation_parse_mode = self.parse_mode if (explanation_parse_mode is None) else explanation_parse_mode
-
-        if isinstance(question, types.Poll):
-            raise RuntimeError("The send_poll signature was changed, please see send_poll function details.")
-
-        return types.Message.de_json(
-            await asyncio_helper.send_poll(
-                self.token, chat_id,
-                question, options,
-                is_anonymous, type, allows_multiple_answers, correct_option_id,
-                explanation, explanation_parse_mode, open_period, close_date, is_closed,
-                disable_notification, reply_to_message_id, allow_sending_without_reply,
-                reply_markup, timeout, explanation_entities, protect_content, message_thread_id))
-
-    async def stop_poll(
-            self, chat_id: Union[int, str], message_id: int, 
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> types.Poll:
-        """
-        Use this method to stop a poll which was sent by the bot. On success, the stopped Poll is returned.
-
-        Telegram documentation: https://core.telegram.org/bots/api#stoppoll
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param message_id: Identifier of the original message with the poll
-        :type message_id: :obj:`int`
-
-        :param reply_markup: A JSON-serialized object for a new message markup.
-        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
-
-        :return: On success, the stopped Poll is returned.
-        :rtype: :obj:`types.Poll`
-        """
-        return types.Poll.de_json(await asyncio_helper.stop_poll(self.token, chat_id, message_id, reply_markup))
-
-    async def answer_shipping_query(
-            self, shipping_query_id: str, ok: bool, 
-            shipping_options: Optional[List[types.ShippingOption]]=None, 
-            error_message: Optional[str]=None) -> bool:
-        """
-        Asks for an answer to a shipping question.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answershippingquery
-
-        :param shipping_query_id: Unique identifier for the query to be answered
-        :type shipping_query_id: :obj:`str`
-
-        :param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)
-        :type ok: :obj:`bool`
-
-        :param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.
-        :type shipping_options: :obj:`list` of :obj:`ShippingOption`
-
-        :param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order
-            (e.g. "Sorry, delivery to your desired address is unavailable'). Telegram will display this message to the user.
-        :type error_message: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.answer_shipping_query(self.token, shipping_query_id, ok, shipping_options, error_message)
-
-    async def answer_pre_checkout_query(
-            self, pre_checkout_query_id: int, ok: bool, 
-            error_message: Optional[str]=None) -> bool:
-        """
-        Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the
-        field pre_checkout_query. Use this method to respond to such pre-checkout queries.
-        On success, True is returned.
-
-        .. note::
-            The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answerprecheckoutquery
-
-        :param pre_checkout_query_id: Unique identifier for the query to be answered 
-        :type pre_checkout_query_id: :obj:`int`
-
-        :param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.
-        :type ok: :obj:`bool`
-
-        :param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout
-            (e.g. "Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different
-            color or garment!"). Telegram will display this message to the user.
-        :type error_message: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.answer_pre_checkout_query(self.token, pre_checkout_query_id, ok, error_message)
-
-    async def edit_message_caption(
-            self, caption: str, chat_id: Optional[Union[int, str]]=None, 
-            message_id: Optional[int]=None, 
-            inline_message_id: Optional[str]=None,
-            parse_mode: Optional[str]=None, 
-            caption_entities: Optional[List[types.MessageEntity]]=None,
-            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> Union[types.Message, bool]:
-        """
-        Use this method to edit captions of messages.
-
-        Telegram documentation: https://core.telegram.org/bots/api#editmessagecaption
-
-        :param caption: New caption of the message
-        :type caption: :obj:`str`
-
-        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel
-        :type chat_id: :obj:`int` | :obj:`str`
-
-        :param message_id: Required if inline_message_id is not specified.
-        :type message_id: :obj:`int`
-
-        :param inline_message_id: Required if inline_message_id is not specified. Identifier of the inline message.
-        :type inline_message_id: :obj:`str`
-
-        :param parse_mode: New caption of the message, 0-1024 characters after entities parsing
-        :type parse_mode: :obj:`str`
-
-        :param caption_entities: A JSON-serialized array of objects that describe how the caption should be parsed.
-        :type caption_entities: :obj:`list` of :obj:`types.MessageEntity`
-
-        :param reply_markup: A JSON-serialized object for an inline keyboard.
-        :type reply_markup: :obj:`InlineKeyboardMarkup`
-
-        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
-        :rtype: :obj:`types.Message` | :obj:`bool`
-        """
-        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
-
-        result = await asyncio_helper.edit_message_caption(self.token, caption, chat_id, message_id, inline_message_id,
-                                                parse_mode, caption_entities, reply_markup)
-        if type(result) == bool:
-            return result
-        return types.Message.de_json(result)
-
-    async def reply_to(self, message: types.Message, text: str, **kwargs) -> types.Message:
-        """
-        Convenience function for `send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)`
-        
-        :param message: Instance of :class:`telebot.types.Message`
-        :type message: :obj:`types.Message`
-
-        :param text: Text of the message.
-        :type text: :obj:`str`
-
-        :param kwargs: Additional keyword arguments which are passed to :meth:`telebot.TeleBot.send_message`
-
-        :return: On success, the sent Message is returned.
-        :rtype: :class:`telebot.types.Message`
-        """
-        return await self.send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)
-
-    async def answer_inline_query(
-            self, inline_query_id: str, 
-            results: List[Any], 
-            cache_time: Optional[int]=None, 
-            is_personal: Optional[bool]=None, 
-            next_offset: Optional[str]=None,
-            switch_pm_text: Optional[str]=None, 
-            switch_pm_parameter: Optional[str]=None) -> bool:
-        """
-        Use this method to send answers to an inline query. On success, True is returned.
-        No more than 50 results per query are allowed.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answerinlinequery
-
-        :param inline_query_id: Unique identifier for the answered query
-        :type inline_query_id: :obj:`str`
-
-        :param results: Array of results for the inline query
-        :type results: :obj:`list` of :obj:`types.InlineQueryResult`
-
-        :param cache_time: The maximum amount of time in seconds that the result of the inline query
-            may be cached on the server.
-        :type cache_time: :obj:`int`
-
-        :param is_personal: Pass True, if results may be cached on the server side only for
-            the user that sent the query.
-        :type is_personal: :obj:`bool`
-
-        :param next_offset: Pass the offset that a client should send in the next query with the same text
-            to receive more results.
-        :type next_offset: :obj:`str`
-
-        :param switch_pm_parameter: Deep-linking parameter for the /start message sent to the bot when user presses the switch button. 1-64 characters,
-            only A-Z, a-z, 0-9, _ and - are allowed.
-            Example: An inline bot that sends YouTube videos can ask the user to connect the bot to their YouTube account to adapt search results accordingly.
-            To do this, it displays a 'Connect your YouTube account' button above the results, or even before showing any. The user presses the button, switches to a
-            private chat with the bot and, in doing so, passes a start parameter that instructs the bot to return an OAuth link. Once done, the bot can offer a switch_inline
-            button so that the user can easily return to the chat where they wanted to use the bot's inline capabilities.
-        :type switch_pm_parameter: :obj:`str`
-
-        :param switch_pm_text: Parameter for the start message sent to the bot when user presses the switch button
-        :type switch_pm_text: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.answer_inline_query(self.token, inline_query_id, results, cache_time, is_personal, next_offset,
-                                             switch_pm_text, switch_pm_parameter)
-
-    async def answer_callback_query(
-            self, callback_query_id: int, 
-            text: Optional[str]=None, show_alert: Optional[bool]=None, 
-            url: Optional[str]=None, cache_time: Optional[int]=None) -> bool:
-        """
-        Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to
-        the user as a notification at the top of the chat screen or as an alert.
-
-        Telegram documentation: https://core.telegram.org/bots/api#answercallbackquery
-
-        :param callback_query_id: Unique identifier for the query to be answered
-        :type callback_query_id: :obj:`int`
-
-        :param text: Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters
-        :type text: :obj:`str`
-
-        :param show_alert: If True, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.
-        :type show_alert: :obj:`bool`
-
-        :param url: URL that will be opened by the user's client. If you have created a Game and accepted the conditions via @BotFather, specify the URL that opens your
-            game - note that this will only work if the query comes from a callback_game button.
-        :type url: :obj:`str`
-
-        :param cache_time: The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching
-            starting in version 3.14. Defaults to 0.
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.answer_callback_query(self.token, callback_query_id, text, show_alert, url, cache_time)
-
-    async def set_sticker_set_thumb(
-            self, name: str, user_id: int, thumb: Union[Any, str]=None):
-        """
-        Use this method to set the thumbnail of a sticker set. 
-        Animated thumbnails can be set for animated sticker sets only. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumb
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :param user_id: User identifier
-        :type user_id: :obj:`int`
-
-        :param thumb:
-        :type thumb: :obj:`filelike object`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_sticker_set_thumb(self.token, name, user_id, thumb)
-
-    async def get_sticker_set(self, name: str) -> types.StickerSet:
-        """
-        Use this method to get a sticker set. On success, a StickerSet object is returned.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#getstickerset
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :return: On success, a StickerSet object is returned.
-        :rtype: :class:`telebot.types.StickerSet`
-        """
-        result = await asyncio_helper.get_sticker_set(self.token, name)
-        return types.StickerSet.de_json(result)
-
-    async def get_custom_emoji_stickers(self, custom_emoji_ids: List[str]) -> List[types.Sticker]:
-        """
-        Use this method to get information about custom emoji stickers by their identifiers.
-        Returns an Array of Sticker objects.
-
-        :param custom_emoji_ids: List of custom emoji identifiers. At most 200 custom emoji identifiers can be specified.
-        :type custom_emoji_ids: :obj:`list` of :obj:`str`
-
-        :return: Returns an Array of Sticker objects.
-        :rtype: :obj:`list` of :class:`telebot.types.Sticker`
-        """
-        result = await asyncio_helper.get_custom_emoji_stickers(self.token, custom_emoji_ids)
-        return [types.Sticker.de_json(sticker) for sticker in result]
-
-    async def upload_sticker_file(self, user_id: int, png_sticker: Union[Any, str]) -> types.File:
-        """
-        Use this method to upload a .png file with a sticker for later use in createNewStickerSet and addStickerToSet
-        methods (can be used multiple times). Returns the uploaded File on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#uploadstickerfile
-
-        :param user_id: User identifier of sticker set owner
-        :type user_id: :obj:`int`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px,
-            and either width or height must be exactly 512px.
-        :type png_sticker: :obj:`filelike object`
-
-        :return: On success, the sent file is returned.
-        :rtype: :class:`telebot.types.File`
-        """
-        result = await asyncio_helper.upload_sticker_file(self.token, user_id, png_sticker)
-        return types.File.de_json(result)
-
-    async def create_new_sticker_set(
-            self, user_id: int, name: str, title: str, 
-            emojis: str, 
-            png_sticker: Union[Any, str]=None, 
-            tgs_sticker: Union[Any, str]=None, 
-            webm_sticker: Union[Any, str]=None,
-            contains_masks: Optional[bool]=None,
-            sticker_type: Optional[str]=None,
-            mask_position: Optional[types.MaskPosition]=None) -> bool:
-        """
-        Use this method to create new sticker set owned by a user. 
-        The bot will be able to edit the created sticker set.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createnewstickerset
-
-        :param user_id: User identifier of created sticker set owner
-        :type user_id: :obj:`int`
-
-        :param name: Short name of sticker set, to be used in t.me/addstickers/ URLs (e.g., animals). Can contain only English letters,
-            digits and underscores. Must begin with a letter, can't contain consecutive underscores and must end in "_by_<bot_username>".
-            <bot_username> is case insensitive. 1-64 characters.
-        :type name: :obj:`str`
-
-        :param title: Sticker set title, 1-64 characters
-        :type title: :obj:`str`
-
-        :param emojis: One or more emoji corresponding to the sticker
-        :type emojis: :obj:`str`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either width
-            or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers, pass an HTTP URL
-            as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type png_sticker: :obj:`str`
-
-        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
-        :type tgs_sticker: :obj:`str`
-
-        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
-        :type webm_sticker: :obj:`str`
-
-        :param contains_masks: Pass True, if a set of mask stickers should be created. Deprecated since Bot API 6.2,
-            use sticker_type instead.
-        :type contains_masks: :obj:`bool`
-
-        :param sticker_type: Optional, Type of stickers in the set, pass “regular” or “mask”. Custom emoji sticker sets can't be created
-            via the Bot API at the moment. By default, a regular sticker set is created.
-        :type sticker_type: :obj:`str`
-
-        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
-        :type mask_position: :class:`telebot.types.MaskPosition`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        if contains_masks is not None:
-            logger.warning('The parameter "contains_masks" is deprecated, use "sticker_type" instead')
-            if sticker_type is None:
-               sticker_type = 'mask' if contains_masks else 'regular'
-               
-        return await asyncio_helper.create_new_sticker_set(
-            self.token, user_id, name, title, emojis, png_sticker, tgs_sticker, 
-            mask_position, webm_sticker, sticker_type)
-
-
-    async def add_sticker_to_set(
-            self, user_id: int, name: str, emojis: str,
-            png_sticker: Optional[Union[Any, str]]=None, 
-            tgs_sticker: Optional[Union[Any, str]]=None,  
-            webm_sticker: Optional[Union[Any, str]]=None,
-            mask_position: Optional[types.MaskPosition]=None) -> bool:
-        """
-        Use this method to add a new sticker to a set created by the bot. 
-        It's required to pass `png_sticker` or `tgs_sticker`.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#addstickertoset
-
-        :param user_id: User identifier of created sticker set owner
-        :type user_id: :obj:`int`
-
-        :param name: Sticker set name
-        :type name: :obj:`str`
-
-        :param emojis: One or more emoji corresponding to the sticker
-        :type emojis: :obj:`str`
-
-        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either
-            width or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers,
-            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
-        :type png_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
-        :type tgs_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
-        :type webm_sticker: :obj:`str` or :obj:`filelike object`
-
-        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
-        :type mask_position: :class:`telebot.types.MaskPosition`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.add_sticker_to_set(
-            self.token, user_id, name, emojis, png_sticker, tgs_sticker, mask_position, webm_sticker)
-
-
-    async def set_sticker_position_in_set(self, sticker: str, position: int) -> bool:
-        """
-        Use this method to move a sticker in a set created by the bot to a specific position . Returns True on success.
-        
-        Telegram documentation: https://core.telegram.org/bots/api#setstickerpositioninset
-
-        :param sticker: File identifier of the sticker
-        :type sticker: :obj:`str`
-
-        :param position: New sticker position in the set, zero-based
-        :type position: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.set_sticker_position_in_set(self.token, sticker, position)
-
-    async def delete_sticker_from_set(self, sticker: str) -> bool:
-        """
-        Use this method to delete a sticker from a set created by the bot. Returns True on success.
-       
-        Telegram documentation: https://core.telegram.org/bots/api#deletestickerfromset
-
-        :param sticker: File identifier of the sticker
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_sticker_from_set(self.token, sticker)
-
-    async def create_forum_topic(self,
-            chat_id: int, name: str, icon_color: Optional[int]=None,
-            icon_custom_emoji_id: Optional[str]=None) -> types.ForumTopic:
-        """
-        Use this method to create a topic in a forum supergroup chat. The bot must be an administrator
-        in the chat for this to work and must have the can_manage_topics administrator rights.
-        Returns information about the created topic as a ForumTopic object.
-
-        Telegram documentation: https://core.telegram.org/bots/api#createforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param name: Name of the topic, 1-128 characters
-        :type name: :obj:`str`
-
-        :param icon_color: Color of the topic icon in RGB format. Currently, must be one of 0x6FB9F0, 0xFFD67E, 0xCB86DB, 0x8EEE98, 0xFF93B2, or 0xFB6F5F
-        :type icon_color: :obj:`int`
-
-        :param icon_custom_emoji_id: Custom emoji for the topic icon. Must be an emoji of type “tgs” and must be exactly 1 character long
-        :type icon_custom_emoji_id: :obj:`str`
-
-        :return: On success, information about the created topic is returned as a ForumTopic object.
-        :rtype: :class:`telebot.types.ForumTopic`
-        """
-        return types.ForumTopic.de_json(
-            await asyncio_helper.create_forum_topic(self.token, chat_id, name, icon_color, icon_custom_emoji_id)
-        )
-
-    async def edit_forum_topic(
-            self, chat_id: Union[int, str],
-            message_thread_id: int, name: str,
-            icon_custom_emoji_id: str,
-        ) -> bool:
-        """
-        Use this method to edit name and icon of a topic in a forum supergroup chat. The bot must be an
-        administrator in the chat for this to work and must have can_manage_topics administrator rights,
-        unless it is the creator of the topic. Returns True on success.
-
-        Telegram Documentation: https://core.telegram.org/bots/api#editforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to edit
-        :type message_thread_id: :obj:`int`
-
-        :param name: New name of the topic, 1-128 characters
-        :type name: :obj:`str`
-
-        :param icon_custom_emoji_id: New custom emoji for the topic icon. Must be an emoji of type “tgs” and must be exactly 1 character long
-        :type icon_custom_emoji_id: :obj:`str`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.edit_forum_topic(self.token, chat_id, message_thread_id, name, icon_custom_emoji_id)
-
-    async def close_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to close an open topic in a forum supergroup chat. The bot must be an administrator
-        in the chat for this to work and must have the can_manage_topics administrator rights, unless it is
-        the creator of the topic. Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#closeforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to close
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.close_forum_topic(self.token, chat_id, message_thread_id)
-
-    async def reopen_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to reopen a closed topic in a forum supergroup chat. The bot must be an administrator in the chat
-        for this to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#reopenforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to reopen
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.reopen_forum_topic(self.token, chat_id, message_thread_id)
-
-    async def delete_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to delete a topic in a forum supergroup chat. The bot must be an administrator in the chat for this
-        to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic. Returns True
-        on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#deleteforumtopic
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic to delete
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.delete_forum_topic(self.token, chat_id, message_thread_id)
-
-    async def unpin_all_forum_topic_messages(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
-        """
-        Use this method to clear the list of pinned messages in a forum topic. The bot must be an administrator in the
-        chat for this to work and must have the can_pin_messages administrator right in the supergroup.
-        Returns True on success.
-
-        Telegram documentation: https://core.telegram.org/bots/api#unpinallforumtopicmessages
-
-        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
-        :type chat_id: :obj:`int` or :obj:`str`
-
-        :param message_thread_id: Identifier of the topic
-        :type message_thread_id: :obj:`int`
-
-        :return: On success, True is returned.
-        :rtype: :obj:`bool`
-        """
-        return await asyncio_helper.unpin_all_forum_topic_messages(self.token, chat_id, message_thread_id)
-
-    async def get_forum_topic_icon_stickers(self) -> List[types.Sticker]:
-        """
-        Use this method to get custom emoji stickers, which can be used as a forum topic icon by any user.
-        Requires no parameters. Returns an Array of Sticker objects.
-
-        Telegram documentation: https://core.telegram.org/bots/api#getforumtopiciconstickers
-
-        :return: On success, a list of StickerSet objects is returned.
-        :rtype: List[:class:`telebot.types.StickerSet`]
-        """
-        return await asyncio_helper.get_forum_topic_icon_stickers(self.token)
-
-    async def set_state(self, user_id: int, state: Union[State, int, str], chat_id: Optional[int]=None):
-        """
-        Sets a new state of a user.
-
-        .. note::
-
-            You should set both user id and chat id in order to set state for a user in a chat.
-            Otherwise, if you only set user_id, chat_id will equal to user_id, this means that
-            state will be set for the user in his private chat with a bot.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param state: new state. can be string, integer, or :class:`telebot.types.State`
-        :type state: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if not chat_id:
-            chat_id = user_id
-        await self.current_states.set_state(chat_id, user_id, state)
-
-    async def reset_data(self, user_id: int, chat_id: Optional[int]=None):
-        """
-        Reset data for a user in chat.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if chat_id is None:
-            chat_id = user_id
-        await self.current_states.reset_data(chat_id, user_id)
-
-    async def delete_state(self, user_id: int, chat_id: Optional[int]=None):
-        """
-        Delete the current state of a user.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-        
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: None
-        """
-        if not chat_id:
-            chat_id = user_id
-        await self.current_states.delete_state(chat_id, user_id)
-
-    def retrieve_data(self, user_id: int, chat_id: Optional[int]=None):
-        """
-        Returns context manager with data for a user in chat.
-
-        :param user_id: User identifier
-        :type user_id: int
-
-        :param chat_id: Chat's unique identifier, defaults to user_id
-        :type chat_id: int, optional
-
-        :return: Context manager with data for a user in chat
-        :rtype: Optional[Any]
-        """
-        if not chat_id:
-            chat_id = user_id
-        return self.current_states.get_interactive_data(chat_id, user_id)
-
-    async def get_state(self, user_id, chat_id: Optional[int]=None):
-        """
-        Gets current state of a user.
-        Not recommended to use this method. But it is ok for debugging.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :return: state of a user
-        :rtype: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
-        """
-        if not chat_id:
-            chat_id = user_id
-        return await self.current_states.get_state(chat_id, user_id)
-
-    async def add_data(self, user_id: int, chat_id: Optional[int]=None, **kwargs):
-        """
-        Add data to states.
-
-        :param user_id: User's identifier
-        :type user_id: :obj:`int`
-
-        :param chat_id: Chat's identifier
-        :type chat_id: :obj:`int`
-
-        :param kwargs: Data to add
-        :return: None
-        """
-        if not chat_id:
-            chat_id = user_id
-        for key, value in kwargs.items():
-            await self.current_states.set_data(chat_id, user_id, key, value)
+# -*- coding: utf-8 -*-
+from datetime import datetime
+
+import logging
+import re
+import traceback
+from typing import Any, Awaitable, Callable, List, Optional, Union
+import sys
+
+# this imports are used to avoid circular import error
+import telebot.util
+import telebot.types
+
+
+# storages
+from telebot.asyncio_storage import StateMemoryStorage, StatePickleStorage, StateStorageBase
+from telebot.asyncio_handler_backends import BaseMiddleware, CancelUpdate, SkipHandler, State, ContinueHandling
+
+from inspect import signature
+
+from telebot import util, types, asyncio_helper
+import asyncio
+from telebot import asyncio_filters
+
+logger = logging.getLogger('TeleBot')
+
+REPLY_MARKUP_TYPES = Union[
+    types.InlineKeyboardMarkup, types.ReplyKeyboardMarkup, 
+    types.ReplyKeyboardRemove, types.ForceReply]
+
+
+import string
+import random
+import ssl
+
+
+"""
+Module : telebot
+"""
+
+
+class Handler:
+    """
+    Class for (next step|reply) handlers
+    """
+    def __init__(self, callback, *args, **kwargs):
+        self.callback = callback
+        self.args = args
+        self.kwargs = kwargs
+
+    def __getitem__(self, item):
+        return getattr(self, item)
+
+
+class ExceptionHandler:
+    """
+    Class for handling exceptions while Polling
+    """
+
+    # noinspection PyMethodMayBeStatic,PyUnusedLocal
+    def handle(self, exception):
+        return False
+
+
+class AsyncTeleBot:
+    """
+    This is the main asynchronous class for Bot.
+
+    It allows you to add handlers for different kind of updates.
+
+    Usage:
+
+    .. code-block:: python3
+        :caption: Using asynchronous implementation of TeleBot.
+
+        from telebot.async_telebot import AsyncTeleBot
+        bot = AsyncTeleBot('token') # get token from @BotFather
+        # now you can register other handlers/update listeners, 
+        # and use bot methods.
+        # Remember to use async/await keywords when necessary.
+
+    See more examples in examples/ directory:
+    https://github.com/eternnoir/pyTelegramBotAPI/tree/master/examples
+
+    .. note::
+
+        Install coloredlogs module to specify colorful_logs=True
+
+
+    :param token: Token of a bot, obtained from @BotFather
+    :type token: :obj:`str`
+
+    :param parse_mode: Default parse mode, defaults to None
+    :type parse_mode: :obj:`str`, optional
+
+    :param offset: Offset used in get_updates, defaults to None
+    :type offset: :obj:`int`, optional
+
+    :param exception_handler: Exception handler, which will handle the exception occured, defaults to None
+    :type exception_handler: Optional[ExceptionHandler], optional
+
+    :param state_storage: Storage for states, defaults to StateMemoryStorage()
+    :type state_storage: :class:`telebot.asyncio_storage.StateMemoryStorage`, optional
+
+    :param disable_web_page_preview: Default value for disable_web_page_preview, defaults to None
+    :type disable_web_page_preview: :obj:`bool`, optional
+
+    :param disable_notification: Default value for disable_notification, defaults to None
+    :type disable_notification: :obj:`bool`, optional
+
+    :param protect_content: Default value for protect_content, defaults to None
+    :type protect_content: :obj:`bool`, optional
+
+    :param allow_sending_without_reply: Default value for allow_sending_without_reply, defaults to None
+    :type allow_sending_without_reply: :obj:`bool`, optional
+    
+    :param colorful_logs: Outputs colorful logs
+    :type colorful_logs: :obj:`bool`, optional
+
+    """
+
+    def __init__(self, token: str, parse_mode: Optional[str]=None, offset: Optional[int]=None,
+                exception_handler: Optional[ExceptionHandler]=None,
+                state_storage: Optional[StateStorageBase]=StateMemoryStorage(),
+                disable_web_page_preview: Optional[bool]=None,
+                disable_notification: Optional[bool]=None,
+                protect_content: Optional[bool]=None,
+                allow_sending_without_reply: Optional[bool]=None,
+                colorful_logs: Optional[bool]=False) -> None:
+        
+        # update-related
+        self.token = token
+        self.offset = offset
+
+        # logs-related
+        if colorful_logs:
+            try:
+                import coloredlogs
+                coloredlogs.install(logger=logger, level=logger.level)
+            except ImportError:
+                raise ImportError(
+                    'Install colorredlogs module to use colorful_logs option.'
+                )
+                
+        # properties
+        self.parse_mode = parse_mode
+        self.disable_web_page_preview = disable_web_page_preview
+        self.disable_notification = disable_notification
+        self.protect_content = protect_content
+        self.allow_sending_without_reply = allow_sending_without_reply
+
+        # states
+        self.current_states = state_storage
+
+        # handlers
+        self.update_listener = []
+        self.exception_handler = exception_handler
+        self.message_handlers = []
+        self.edited_message_handlers = []
+        self.channel_post_handlers = []
+        self.edited_channel_post_handlers = []
+        self.inline_handlers = []
+        self.chosen_inline_handlers = []
+        self.callback_query_handlers = []
+        self.shipping_query_handlers = []
+        self.pre_checkout_query_handlers = []
+        self.poll_handlers = []
+        self.poll_answer_handlers = []
+        self.my_chat_member_handlers = []
+        self.chat_member_handlers = []
+        self.chat_join_request_handlers = []
+        self.custom_filters = {}
+        self.state_handlers = []
+        self.middlewares = []
+
+        self._user = None # set during polling
+
+    @property
+    def user(self):
+        return self._user
+
+    async def close_session(self):
+        """
+        Closes existing session of aiohttp.
+        Use this function if you stop polling/webhooks.
+        """
+        await asyncio_helper.session_manager.session.close()
+
+    async def get_updates(self, offset: Optional[int]=None, limit: Optional[int]=None,
+        timeout: Optional[int]=20, allowed_updates: Optional[List]=None, request_timeout: Optional[int]=None) -> List[types.Update]:
+        """
+        Use this method to receive incoming updates using long polling (wiki). An Array of Update objects is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getupdates
+
+
+        :param offset: Identifier of the first update to be returned. Must be greater by one than the highest among the identifiers of previously received updates.
+            By default, updates starting with the earliest unconfirmed update are returned. An update is considered confirmed as soon as getUpdates is called with an offset
+            higher than its update_id. The negative offset can be specified to retrieve updates starting from -offset update from the end of the updates queue.
+            All previous updates will forgotten.
+        :type offset: :obj:`int`, optional
+
+        :param limit: Limits the number of updates to be retrieved. Values between 1-100 are accepted. Defaults to 100.
+        :type limit: :obj:`int`, optional
+
+        :param timeout: Request connection timeout
+        :type timeout: :obj:`int`, optional
+
+        :param allowed_updates: Array of string. List the types of updates you want your bot to receive.
+        :type allowed_updates: :obj:`list`, optional
+
+        :param long_polling_timeout: Timeout in seconds for long polling.
+        :type long_polling_timeout: :obj:`int`, optional
+
+        :return: An Array of Update objects is returned.
+        :rtype: :obj:`list` of :class:`telebot.types.Update`
+        """       
+        json_updates = await asyncio_helper.get_updates(self.token, offset, limit, timeout, allowed_updates, request_timeout)
+        return [types.Update.de_json(ju) for ju in json_updates]
+
+    def _setup_change_detector(self, path_to_watch: str) -> None:
+        try:
+            from watchdog.observers import Observer
+            from telebot.ext.reloader import EventHandler
+        except ImportError:
+            raise ImportError(
+                'Please install watchdog and psutil before using restart_on_change option.'
+            )
+
+        self.event_handler = EventHandler()
+        path = path_to_watch if path_to_watch else None
+        if path is None:
+            # Make it possible to specify --path argument to the script
+            path = sys.argv[sys.argv.index('--path') + 1] if '--path' in sys.argv else '.'
+            
+        self.event_observer = Observer()
+        self.event_observer.schedule(self.event_handler, path, recursive=True)
+        self.event_observer.start()
+
+    async def polling(self, non_stop: bool=False, skip_pending=False, interval: int=0, timeout: int=20,
+            request_timeout: Optional[int]=None, allowed_updates: Optional[List[str]]=None,
+            none_stop: Optional[bool]=None, restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None):
+        """
+        Runs bot in long-polling mode in a main loop.
+        This allows the bot to retrieve Updates automagically and notify listeners and message handlers accordingly.
+
+        Warning: Do not call this function more than once!
+        
+        Always gets updates.
+
+        .. note::
+
+            Set non_stop=True if you want your bot to continue receiving updates
+            if there is an error.
+
+        .. note::
+
+            Install watchdog and psutil before using restart_on_change option.
+
+        :param non_stop: Do not stop polling when an ApiException occurs.
+        :type non_stop: :obj:`bool`
+        
+        :param skip_pending: skip old updates
+        :type skip_pending: :obj:`bool`
+
+        :param interval: Delay between two update retrivals
+        :type interval: :obj:`int`
+
+        :param timeout: Request connection timeout
+        :type timeout: :obj:`int`
+        
+        :param request_timeout: Timeout in seconds for get_updates(Defaults to None)
+        :type request_timeout: :obj:`int`
+
+        :param allowed_updates: A list of the update types you want your bot to receive.
+            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
+            See util.update_types for a complete list of available update types. 
+            Specify an empty list to receive all update types except chat_member (default). 
+            If not specified, the previous setting will be used.
+            
+            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
+            so unwanted updates may be received for a short period of time.
+        :type allowed_updates: :obj:`list` of :obj:`str`
+
+        :param none_stop: Deprecated, use non_stop. Old typo, kept for backward compatibility.
+        :type none_stop: :obj:`bool`
+
+        :param restart_on_change: Restart a file on file(s) change. Defaults to False.
+        :type restart_on_change: :obj:`bool`
+
+        :param path_to_watch: Path to watch for changes. Defaults to current directory
+        :type path_to_watch: :obj:`str`
+        
+        :return:
+        """
+        if none_stop is not None:
+            logger.warning("polling: none_stop parameter is deprecated. Use non_stop instead.")
+            non_stop = none_stop
+
+        if skip_pending:
+            await self.skip_updates()
+
+        if restart_on_change:
+            self._setup_change_detector(path_to_watch)
+
+        await self._process_polling(non_stop, interval, timeout, request_timeout, allowed_updates)
+
+    async def infinity_polling(self, timeout: Optional[int]=20, skip_pending: Optional[bool]=False, request_timeout: Optional[int]=None,
+            logger_level: Optional[int]=logging.ERROR, allowed_updates: Optional[List[str]]=None,
+            restart_on_change: Optional[bool]=False, path_to_watch: Optional[str]=None, *args, **kwargs):
+        """
+        Wrap polling with infinite loop and exception handling to avoid bot stops polling.
+
+        .. note::
+            Install watchdog and psutil before using restart_on_change option.
+
+        :param timeout: Timeout in seconds for get_updates(Defaults to None)
+        :type timeout: :obj:`int`
+
+        :param skip_pending: skip old updates
+        :type skip_pending: :obj:`bool`
+
+        :param request_timeout: Aiohttp's request timeout. Defaults to 5 minutes(aiohttp.ClientTimeout).
+        :type request_timeout: :obj:`int`
+
+        :param logger_level: Custom logging level for infinity_polling logging.
+            Use logger levels from logging as a value. None/NOTSET = no error logging
+        :type logger_level: :obj:`int`
+
+        :param allowed_updates: A list of the update types you want your bot to receive.
+            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. 
+            See util.update_types for a complete list of available update types. 
+            Specify an empty list to receive all update types except chat_member (default). 
+            If not specified, the previous setting will be used.
+            
+            Please note that this parameter doesn't affect updates created before the call to the get_updates, 
+            so unwanted updates may be received for a short period of time.
+        :type allowed_updates: :obj:`list` of :obj:`str`
+
+        :param restart_on_change: Restart a file on file(s) change. Defaults to False
+        :type restart_on_change: :obj:`bool`
+
+        :param path_to_watch: Path to watch for changes. Defaults to current directory
+        :type path_to_watch: :obj:`str`
+
+        :return: None
+        """
+        if skip_pending:
+            await self.skip_updates()
+        self._polling = True
+
+        if restart_on_change:
+            self._setup_change_detector(path_to_watch)
+
+        while self._polling:
+            try:
+                await self._process_polling(non_stop=True, timeout=timeout, request_timeout=request_timeout,
+                             allowed_updates=allowed_updates, *args, **kwargs)
+            except Exception as e:
+                if logger_level and logger_level >= logging.ERROR:
+                    logger.error("Infinity polling exception: %s", str(e))
+                if logger_level and logger_level >= logging.DEBUG:
+                    logger.error("Exception traceback:\n%s", traceback.format_exc())
+                await asyncio.sleep(3)
+                continue
+            if logger_level and logger_level >= logging.INFO:
+                logger.error("Infinity polling: polling exited")
+        if logger_level and logger_level >= logging.INFO:
+            logger.error("Break infinity polling")
+
+    async def _process_polling(self, non_stop: bool=False, interval: int=0, timeout: int=20,
+            request_timeout: int=None, allowed_updates: Optional[List[str]]=None):
+        """
+        Function to process polling.
+
+        :param non_stop: Do not stop polling when an ApiException occurs.
+        :param interval: Delay between two update retrivals
+        :param timeout: Request connection timeout
+        :param request_timeout: Timeout in seconds for long polling (see API docs)
+        :param allowed_updates: A list of the update types you want your bot to receive.
+            For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types.
+            See util.update_types for a complete list of available update types.
+            Specify an empty list to receive all update types except chat_member (default).
+            If not specified, the previous setting will be used.
+
+            Please note that this parameter doesn't affect updates created before the call to the get_updates,
+            so unwanted updates may be received for a short period of time.
+
+        :return:
+
+        """
+
+        if not non_stop:
+            # show warning
+            logger.warning("Setting non_stop to False will stop polling on API and system exceptions.")
+
+        self._user = await self.get_me()
+            
+        logger.info('Starting your bot with username: [@%s]', self.user.username)
+
+        self._polling = True
+
+        try:
+            while self._polling:
+                try:
+                    
+                    updates = await self.get_updates(offset=self.offset, allowed_updates=allowed_updates, timeout=timeout, request_timeout=request_timeout)
+                    if updates:
+                        self.offset = updates[-1].update_id + 1
+                        asyncio.create_task(self.process_new_updates(updates)) # Seperate task for processing updates
+                    if interval: await asyncio.sleep(interval)
+
+                except KeyboardInterrupt:
+                    return
+                except asyncio.CancelledError:
+                    return
+                except asyncio_helper.RequestTimeout as e:
+                    logger.error(str(e))
+                    if non_stop:
+                        await asyncio.sleep(2)
+                        continue
+                    else:
+                        return
+                except asyncio_helper.ApiException as e:
+                    handled = False
+                    if self.exception_handler:
+                        self.exception_handler.handle(e)
+                        handled = True
+
+                    if not handled:
+                        logger.error('Unhandled exception (full traceback for debug level): %s', str(e))
+                        logger.debug(traceback.format_exc())
+
+                    if non_stop or handled:
+                        continue
+                    else:
+                        break
+                except Exception as e:
+                    handled = False
+                    if self.exception_handler:
+                        self.exception_handler.handle(e)
+                        handled = True
+
+                    if not handled:
+                        logger.error('Unhandled exception (full traceback for debug level): %s', str(e))
+                        logger.debug(traceback.format_exc())
+
+                    if non_stop or handled:
+                        continue
+                    else:
+                        break
+        finally:
+            self._polling = False
+            await self.close_session()
+            logger.warning('Polling is stopped.')
+
+    @staticmethod
+    def _loop_create_task(coro):
+        return asyncio.create_task(coro)
+
+    async def _process_updates(self, handlers, messages, update_type):
+        """
+        Process updates.
+
+        :param handlers:
+        :param messages:
+        :return:
+        """
+        tasks = []
+        middlewares = await self._get_middlewares(update_type)
+        for message in messages:
+            tasks.append(self._run_middlewares_and_handlers(message, handlers, middlewares, update_type))
+        await asyncio.gather(*tasks)
+
+    async def _run_middlewares_and_handlers(self, message, handlers, middlewares, update_type):
+        """
+        This method is made to run handlers and middlewares in queue.
+
+        :param message: received message (update part) to process with handlers and/or middlewares
+        :param handlers: all created handlers (not filtered)
+        :param middlewares: middlewares that should be executed (already filtered)
+        :param update_type: handler/update type (Update field name)
+        :return:
+        """
+
+        handler_error = None
+        data = {}
+        skip_handlers = False
+
+        if middlewares:
+            for middleware in middlewares:
+                if middleware.update_sensitive:
+                    if hasattr(middleware, f'pre_process_{update_type}'):
+                        middleware_result = await getattr(middleware, f'pre_process_{update_type}')(message, data)
+                    else:
+                        logger.error('Middleware {} does not have pre_process_{} method. pre_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
+                        middleware_result = None
+                else:
+                    middleware_result = await middleware.pre_process(message, data)
+                if isinstance(middleware_result, CancelUpdate):
+                    return
+                elif isinstance(middleware_result, SkipHandler):
+                    await middleware.post_process(message, data, handler_error)
+                    skip_handlers = True
+
+        if handlers and not(skip_handlers):
+            try:
+                for handler in handlers:
+                    params = []
+                    process_update = await self._test_message_handler(handler, message)
+                    if not process_update: continue
+                    for i in signature(handler['function']).parameters:
+                        params.append(i)
+                    result = None
+                    if len(params) == 1:
+                        result = await handler['function'](message)
+                    elif "data" in params:
+                        if len(params) == 2:
+                            result = await handler['function'](message, data)
+                        elif len(params) == 3:
+                            result = await handler['function'](message, data=data, bot=self)
+                        else:
+                            logger.error("It is not allowed to pass data and values inside data to the handler. Check your handler: {}".format(handler['function']))
+                            return
+                    else:
+                        data_copy = data.copy()
+                        for key in list(data_copy):
+                            # remove data from data_copy if handler does not accept it
+                            if key not in params:
+                                del data_copy[key]
+                        if handler.get('pass_bot'):
+                            data_copy["bot"] = self
+                        if len(data_copy) > len(params) - 1: # remove the message parameter
+                            logger.error("You are passing more data than the handler needs. Check your handler: {}".format(handler['function']))
+                            return
+                        result = await handler["function"](message, **data_copy)
+                    if not isinstance(result, ContinueHandling):
+                        break
+            except Exception as e:
+                if self.exception_handler:
+                    self.exception_handler.handle(e)
+                else:
+                    logger.error(str(e))
+                    logger.debug("Exception traceback:\n%s", traceback.format_exc())
+
+        if middlewares:
+            for middleware in middlewares:
+                if middleware.update_sensitive:
+                    if hasattr(middleware, f'post_process_{update_type}'):
+                        await getattr(middleware, f'post_process_{update_type}')(message, data, handler_error)
+                    else:
+                        logger.error('Middleware {} does not have post_process_{} method. post_process function execution was skipped.'.format(middleware.__class__.__name__, update_type))
+                else: await middleware.post_process(message, data, handler_error)
+
+    async def process_new_updates(self, updates: List[types.Update]):
+        """
+        Process new updates.
+        Just pass list of updates - each update should be
+        instance of Update object.
+
+        :param updates: list of updates
+        :type updates: :obj:`list` of :obj:`telebot.types.Update`
+
+        :return: None
+        """
+        upd_count = len(updates)
+        logger.info('Received {0} new updates'.format(upd_count))
+        if upd_count == 0: return
+
+        new_messages = None
+        new_edited_messages = None
+        new_channel_posts = None
+        new_edited_channel_posts = None
+        new_inline_queries = None
+        new_chosen_inline_results = None
+        new_callback_queries = None
+        new_shipping_queries = None
+        new_pre_checkout_queries = None
+        new_polls = None
+        new_poll_answers = None
+        new_my_chat_members = None
+        new_chat_members = None
+        chat_join_request = None
+        for update in updates:
+            logger.debug('Processing updates: {0}'.format(update))
+            if update.message:
+                if new_messages is None: new_messages = []
+                new_messages.append(update.message)
+            if update.edited_message:
+                if new_edited_messages is None: new_edited_messages = []
+                new_edited_messages.append(update.edited_message)
+            if update.channel_post:
+                if new_channel_posts is None: new_channel_posts = []
+                new_channel_posts.append(update.channel_post)
+            if update.edited_channel_post:
+                if new_edited_channel_posts is None: new_edited_channel_posts = []
+                new_edited_channel_posts.append(update.edited_channel_post)
+            if update.inline_query:
+                if new_inline_queries is None: new_inline_queries = []
+                new_inline_queries.append(update.inline_query)
+            if update.chosen_inline_result:
+                if new_chosen_inline_results is None: new_chosen_inline_results = []
+                new_chosen_inline_results.append(update.chosen_inline_result)
+            if update.callback_query:
+                if new_callback_queries is None: new_callback_queries = []
+                new_callback_queries.append(update.callback_query)
+            if update.shipping_query:
+                if new_shipping_queries is None: new_shipping_queries = []
+                new_shipping_queries.append(update.shipping_query)
+            if update.pre_checkout_query:
+                if new_pre_checkout_queries is None: new_pre_checkout_queries = []
+                new_pre_checkout_queries.append(update.pre_checkout_query)
+            if update.poll:
+                if new_polls is None: new_polls = []
+                new_polls.append(update.poll)
+            if update.poll_answer:
+                if new_poll_answers is None: new_poll_answers = []
+                new_poll_answers.append(update.poll_answer)
+            if update.my_chat_member:
+                if new_my_chat_members is None: new_my_chat_members = []
+                new_my_chat_members.append(update.my_chat_member)
+            if update.chat_member:
+                if new_chat_members is None: new_chat_members = []
+                new_chat_members.append(update.chat_member)
+            if update.chat_join_request:
+                if chat_join_request is None: chat_join_request = []
+                chat_join_request.append(update.chat_join_request)
+
+        if new_messages:
+            await self.process_new_messages(new_messages)
+        if new_edited_messages:
+            await self.process_new_edited_messages(new_edited_messages)
+        if new_channel_posts:
+            await self.process_new_channel_posts(new_channel_posts)
+        if new_edited_channel_posts:
+            await self.process_new_edited_channel_posts(new_edited_channel_posts)
+        if new_inline_queries:
+            await self.process_new_inline_query(new_inline_queries)
+        if new_chosen_inline_results:
+            await self.process_new_chosen_inline_query(new_chosen_inline_results)
+        if new_callback_queries:
+            await self.process_new_callback_query(new_callback_queries)
+        if new_shipping_queries:
+            await self.process_new_shipping_query(new_shipping_queries)
+        if new_pre_checkout_queries:
+            await self.process_new_pre_checkout_query(new_pre_checkout_queries)
+        if new_polls:
+            await self.process_new_poll(new_polls)
+        if new_poll_answers:
+            await self.process_new_poll_answer(new_poll_answers)
+        if new_my_chat_members:
+            await self.process_new_my_chat_member(new_my_chat_members)
+        if new_chat_members:
+            await self.process_new_chat_member(new_chat_members)
+        if chat_join_request:
+            await self.process_chat_join_request(chat_join_request)
+
+    async def process_new_messages(self, new_messages):
+        """
+        :meta private:
+        """
+        await self.__notify_update(new_messages)
+        await self._process_updates(self.message_handlers, new_messages, 'message')
+
+    async def process_new_edited_messages(self, edited_message):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.edited_message_handlers, edited_message, 'edited_message')
+
+    async def process_new_channel_posts(self, channel_post):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.channel_post_handlers, channel_post , 'channel_post')
+
+    async def process_new_edited_channel_posts(self, edited_channel_post):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.edited_channel_post_handlers, edited_channel_post, 'edited_channel_post')
+
+    async def process_new_inline_query(self, new_inline_queries):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.inline_handlers, new_inline_queries, 'inline_query')
+
+    async def process_new_chosen_inline_query(self, new_chosen_inline_queries):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.chosen_inline_handlers, new_chosen_inline_queries, 'chosen_inline_query')
+
+    async def process_new_callback_query(self, new_callback_queries):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.callback_query_handlers, new_callback_queries, 'callback_query')
+
+    async def process_new_shipping_query(self, new_shipping_queries):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.shipping_query_handlers, new_shipping_queries, 'shipping_query')
+
+    async def process_new_pre_checkout_query(self, pre_checkout_queries):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.pre_checkout_query_handlers, pre_checkout_queries, 'pre_checkout_query')
+
+    async def process_new_poll(self, polls):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.poll_handlers, polls, 'poll')
+
+    async def process_new_poll_answer(self, poll_answers):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.poll_answer_handlers, poll_answers, 'poll_answer')
+    
+    async def process_new_my_chat_member(self, my_chat_members):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.my_chat_member_handlers, my_chat_members, 'my_chat_member')
+
+    async def process_new_chat_member(self, chat_members):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.chat_member_handlers, chat_members, 'chat_member')
+
+    async def process_chat_join_request(self, chat_join_request):
+        """
+        :meta private:
+        """
+        await self._process_updates(self.chat_join_request_handlers, chat_join_request, 'chat_join_request')
+
+    async def _get_middlewares(self, update_type):
+        """
+        :meta private:
+        """
+        if self.middlewares:
+            middlewares = [middleware for middleware in self.middlewares if update_type in middleware.update_types]
+            return middlewares
+        return None
+    
+    async def __notify_update(self, new_messages):
+        if len(self.update_listener) == 0:
+            return
+        for listener in self.update_listener:
+            self._loop_create_task(listener(new_messages))
+
+    async def _test_message_handler(self, message_handler, message):
+        """
+        Test message handler.
+
+        :param message_handler:
+        :param message:
+        :return:
+        """
+        for message_filter, filter_value in message_handler['filters'].items():
+            if filter_value is None:
+                continue
+
+            if not await self._test_filter(message_filter, filter_value, message):
+                return False
+
+        return True
+
+    def set_update_listener(self, func: Awaitable):
+        """
+        Update listener is a function that gets any update.
+
+        :param func: function that should get update.
+        :type func: :obj:`Awaitable`
+
+        .. code-block:: python3
+            :caption: Example on asynchronous update listeners.
+
+            async def update_listener(new_messages):
+                for message in new_messages:
+                    print(message.text) # Prints message text
+
+            bot.set_update_listener(update_listener)
+        
+        :return: None
+        """
+        self.update_listener.append(func)
+
+    def add_custom_filter(self, custom_filter: Union[asyncio_filters.SimpleCustomFilter, asyncio_filters.AdvancedCustomFilter]):
+        """
+        Create custom filter.
+
+        .. code-block:: python3
+            :caption: Example on checking the text of a message
+
+            class TextMatchFilter(AdvancedCustomFilter):
+                key = 'text'
+
+                async def check(self, message, text):
+                    return text == message.text
+
+        :param custom_filter: Class with check(message) method.
+        :type custom_filter: :class:`telebot.asyncio_filters.SimpleCustomFilter` or :class:`telebot.asyncio_filters.AdvancedCustomFilter`
+
+        :return: None
+        """
+        self.custom_filters[custom_filter.key] = custom_filter
+
+    async def _test_filter(self, message_filter, filter_value, message):
+        """
+        Test filters.
+
+        :param message_filter: Filter type passed in handler
+        :param filter_value: Filter value passed in handler
+        :param message: Message to test
+        :return: True if filter conforms
+        """
+        #     test_cases = {
+        #         'content_types': lambda msg: msg.content_type in filter_value,
+        #         'regexp': lambda msg: msg.content_type == 'text' and re.search(filter_value, msg.text, re.IGNORECASE),
+        #         'commands': lambda msg: msg.content_type == 'text' and util.extract_command(msg.text) in filter_value,
+        #         'func': lambda msg: filter_value(msg)
+        #     }
+        #     return test_cases.get(message_filter, lambda msg: False)(message)
+        if message_filter == 'content_types':
+            return message.content_type in filter_value
+        elif message_filter == 'regexp':
+            return message.content_type == 'text' and re.search(filter_value, message.text, re.IGNORECASE)
+        elif message_filter == 'commands':
+            return message.content_type == 'text' and util.extract_command(message.text) in filter_value
+        elif message_filter == 'chat_types':
+            return message.chat.type in filter_value
+        elif message_filter == 'func':
+            return filter_value(message)
+        elif self.custom_filters and message_filter in self.custom_filters:
+            return await self._check_filter(message_filter,filter_value,message)
+        else:
+            return False
+
+    async def _check_filter(self, message_filter, filter_value, message):
+        """
+        Check up the filter.
+
+        :param message_filter:
+        :param filter_value:
+        :param message:
+        :return:
+        """
+        filter_check = self.custom_filters.get(message_filter)
+        if not filter_check:
+            return False
+        elif isinstance(filter_check, asyncio_filters.SimpleCustomFilter):
+            return filter_value == await filter_check.check(message)
+        elif isinstance(filter_check, asyncio_filters.AdvancedCustomFilter):
+            return await filter_check.check(message, filter_value)
+        else:
+            logger.error("Custom filter: wrong type. Should be SimpleCustomFilter or AdvancedCustomFilter.")
+            return False
+
+    def setup_middleware(self, middleware: BaseMiddleware):
+        """
+        Setup middleware.
+
+        .. note::
+
+            Take a look at the :class:`telebot.asyncio_handler_backends.BaseMiddleware` section for more.
+
+        :param middleware: Middleware-class.
+        :type middleware: :class:`telebot.asyncio_handler_backends.BaseMiddleware`
+    
+        :return: None
+        """
+        if not hasattr(middleware, 'update_types'):
+            logger.error('Middleware has no update_types parameter. Please add list of updates to handle.')
+            return
+
+        if not hasattr(middleware, 'update_sensitive'):
+            logger.warning('Middleware has no update_sensitive parameter. Parameter was set to False.')
+            middleware.update_sensitive = False
+
+        self.middlewares.append(middleware)
+
+    def message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
+        """
+        Handles ew incoming message of any kind - text, photo, sticker, etc.
+        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
+        All message handlers are tested in the order they were added.
+
+        Example:
+
+        .. code-block:: python3
+            :caption: Usage of message_handler
+
+            bot = TeleBot('TOKEN')
+
+            # Handles all messages which text matches regexp.
+            @bot.message_handler(regexp='someregexp')
+            async def command_help(message):
+                await bot.send_message(message.chat.id, 'Did someone call for help?')
+
+            # Handles messages in private chat
+            @bot.message_handler(chat_types=['private']) # You can add more chat types
+            async def command_help(message):
+                await bot.send_message(message.chat.id, 'Private chat detected, sir!')
+
+            # Handle all sent documents of type 'text/plain'.
+            @bot.message_handler(func=lambda message: message.document.mime_type == 'text/plain',
+                content_types=['document'])
+            async def command_handle_document(message):
+                await bot.send_message(message.chat.id, 'Document received, sir!')
+
+            # Handle all other messages.
+            @bot.message_handler(func=lambda message: True, content_types=['audio', 'photo', 'voice', 'video', 'document',
+                'text', 'location', 'contact', 'sticker'])
+            async def default_command(message):
+                await bot.send_message(message.chat.id, "This is the default command handler.")
+
+        :param commands: Optional list of strings (commands to handle).
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Optional regular expression.
+        :type regexp: :obj:`str`
+
+        :param func: Optional lambda function. The lambda receives the message to test as the first parameter.
+            It must return True if the command should handle the message.
+        
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param chat_types: list of chat types
+        :type chat_types: :obj:`list` of :obj:`str`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: decorated function
+        """
+
+        if content_types is None:
+            content_types = ["text"]
+
+        if isinstance(commands, str):
+            logger.warning("message_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler,
+                                                    chat_types=chat_types,
+                                                    content_types=content_types,
+                                                    commands=commands,
+                                                    regexp=regexp,
+                                                    func=func,
+                                                    **kwargs)
+            self.add_message_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_message_handler(self, handler_dict):
+        """
+        Adds a message handler.
+        Note that you should use register_message_handler to add message_handler.
+        
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.message_handlers.append(handler_dict)
+
+    def register_message_handler(self, callback: Callable[[Any], Awaitable], content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
+            regexp: Optional[str]=None, func: Optional[Callable]=None, chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers message handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param commands: list of commands
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp:
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param chat_types: List of chat types
+        :type chat_types: :obj:`list` of :obj:`str`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        if content_types is None:
+            content_types = ["text"]
+        if isinstance(commands, str):
+            logger.warning("register_message_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("register_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        handler_dict = self._build_handler_dict(callback,
+                                                chat_types=chat_types,
+                                                content_types=content_types,
+                                                commands=commands,
+                                                regexp=regexp,
+                                                func=func,
+                                                pass_bot=pass_bot,
+                                                **kwargs)
+        self.add_message_handler(handler_dict)
+
+    def edited_message_handler(self, commands=None, regexp=None, func=None, content_types=None, chat_types=None, **kwargs):
+        """
+        Handles new version of a message that is known to the bot and was edited.
+
+        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
+
+        :param commands: Optional list of strings (commands to handle).
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Optional regular expression.
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param chat_types: list of chat types
+        :type chat_types: :obj:`list` of :obj:`str`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        if content_types is None:
+            content_types = ["text"]
+
+        if isinstance(commands, str):
+            logger.warning("edited_message_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler,
+                                                    chat_types=chat_types,
+                                                    content_types=content_types,
+                                                    commands=commands,
+                                                    regexp=regexp,
+                                                    func=func,
+                                                    **kwargs)
+            self.add_edited_message_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_edited_message_handler(self, handler_dict):
+        """
+        Adds the edit message handler.
+        Note that you should use register_edited_message_handler to add edited_message_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.edited_message_handlers.append(handler_dict)
+
+    def register_edited_message_handler(self, callback: Callable[[Any], Awaitable], content_types: Optional[List[str]]=None,
+        commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None,
+        chat_types: Optional[List[str]]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers edited message handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param commands: list of commands
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Regular expression
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param chat_types: True for private chat
+        :type chat_types: :obj:`bool`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        if isinstance(commands, str):
+            logger.warning("register_edited_message_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("register_edited_message_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        handler_dict = self._build_handler_dict(callback,
+                                                chat_types=chat_types,
+                                                content_types=content_types,
+                                                commands=commands,
+                                                regexp=regexp,
+                                                func=func,
+                                                pass_bot=pass_bot,
+                                                **kwargs)
+        self.add_edited_message_handler(handler_dict)
+
+
+    def channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
+        """
+        Handles new incoming channel post of any kind - text, photo, sticker, etc.
+        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
+
+        :param commands: Optional list of strings (commands to handle).
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Optional regular expression.
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        :return: None
+        """
+        if content_types is None:
+            content_types = ["text"]
+
+        if isinstance(commands, str):
+            logger.warning("channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler,
+                                                    content_types=content_types,
+                                                    commands=commands,
+                                                    regexp=regexp,
+                                                    func=func,
+                                                    **kwargs)
+            self.add_channel_post_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_channel_post_handler(self, handler_dict):
+        """
+        Adds channel post handler.
+        Note that you should use register_channel_post_handler to add channel_post_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.channel_post_handlers.append(handler_dict)
+    
+    def register_channel_post_handler(self, callback: Callable[[Any], Awaitable], content_types: Optional[List[str]]=None, commands: Optional[List[str]]=None,
+            regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers channel post message handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param commands: list of commands
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Regular expression
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        if isinstance(commands, str):
+            logger.warning("register_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("register_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        handler_dict = self._build_handler_dict(callback,
+                                                content_types=content_types,
+                                                commands=commands,
+                                                regexp=regexp,
+                                                func=func,
+                                                pass_bot=pass_bot,
+                                                **kwargs)
+        self.add_channel_post_handler(handler_dict)
+
+    def edited_channel_post_handler(self, commands=None, regexp=None, func=None, content_types=None, **kwargs):
+        """
+        Handles new version of a channel post that is known to the bot and was edited.
+        As a parameter to the decorator function, it passes :class:`telebot.types.Message` object.
+
+        :param commands: Optional list of strings (commands to handle).
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Optional regular expression.
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return:
+        """
+        if content_types is None:
+            content_types = ["text"]
+
+        if isinstance(commands, str):
+            logger.warning("edited_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler,
+                                                    content_types=content_types,
+                                                    commands=commands,
+                                                    regexp=regexp,
+                                                    func=func,
+                                                    **kwargs)
+            self.add_edited_channel_post_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_edited_channel_post_handler(self, handler_dict):
+        """
+        Adds the edit channel post handler.
+        Note that you should use register_edited_channel_post_handler to add edited_channel_post_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.edited_channel_post_handlers.append(handler_dict)
+
+    def register_edited_channel_post_handler(self, callback: Callable[[Any], Awaitable], content_types: Optional[List[str]]=None,
+            commands: Optional[List[str]]=None, regexp: Optional[str]=None, func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers edited channel post message handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param content_types: Supported message content types. Must be a list. Defaults to ['text'].
+        :type content_types: :obj:`list` of :obj:`str`
+
+        :param commands: list of commands
+        :type commands: :obj:`list` of :obj:`str`
+
+        :param regexp: Regular expression
+        :type regexp: :obj:`str`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: decorated function
+        """
+        if isinstance(commands, str):
+            logger.warning("register_edited_channel_post_handler: 'commands' filter should be List of strings (commands), not string.")
+            commands = [commands]
+
+        if isinstance(content_types, str):
+            logger.warning("register_edited_channel_post_handler: 'content_types' filter should be List of strings (content types), not string.")
+            content_types = [content_types]
+
+        handler_dict = self._build_handler_dict(callback,
+                                                content_types=content_types,
+                                                commands=commands,
+                                                regexp=regexp,
+                                                func=func,
+                                                pass_bot=pass_bot,
+                                                **kwargs)
+        self.add_edited_channel_post_handler(handler_dict)
+
+    def inline_handler(self, func, **kwargs):
+        """
+        Handles new incoming inline query.
+        As a parameter to the decorator function, it passes :class:`telebot.types.InlineQuery` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_inline_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_inline_handler(self, handler_dict):
+        """
+        Adds inline call handler.
+        Note that you should use register_inline_handler to add inline_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.inline_handlers.append(handler_dict)
+
+    def register_inline_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers inline handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: decorated function
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_inline_handler(handler_dict)
+
+    def chosen_inline_handler(self, func, **kwargs):
+        """
+        The result of an inline query that was chosen by a user and sent to their chat partner.
+        Please see our documentation on the feedback collecting for details on how to enable these updates for your bot.
+        As a parameter to the decorator function, it passes :class:`telebot.types.ChosenInlineResult` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+        
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_chosen_inline_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_chosen_inline_handler(self, handler_dict):
+        """
+        Description: TBD
+        Note that you should use register_chosen_inline_handler to add chosen_inline_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.chosen_inline_handlers.append(handler_dict)
+
+    def register_chosen_inline_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers chosen inline handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_chosen_inline_handler(handler_dict)
+
+    def callback_query_handler(self, func, **kwargs):
+        """
+        Handles new incoming callback query.
+        As a parameter to the decorator function, it passes :class:`telebot.types.CallbackQuery` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_callback_query_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_callback_query_handler(self, handler_dict):
+        """
+        Adds a callback request handler.
+        Note that you should use register_callback_query_handler to add callback_query_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.callback_query_handlers.append(handler_dict)
+
+    def register_callback_query_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers callback query handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_callback_query_handler(handler_dict)
+
+    def shipping_query_handler(self, func, **kwargs):
+        """
+        Handles new incoming shipping query. Only for invoices with flexible price.
+        As a parameter to the decorator function, it passes :class:`telebot.types.ShippingQuery` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_shipping_query_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_shipping_query_handler(self, handler_dict):
+        """
+        Adds a shipping request handler.
+        Note that you should use register_shipping_query_handler to add shipping_query_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.shipping_query_handlers.append(handler_dict)
+
+    def register_shipping_query_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers shipping query handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_shipping_query_handler(handler_dict)
+
+    def pre_checkout_query_handler(self, func, **kwargs):
+        """
+        New incoming pre-checkout query. Contains full information about checkout.
+        As a parameter to the decorator function, it passes :class:`telebot.types.PreCheckoutQuery` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_pre_checkout_query_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_pre_checkout_query_handler(self, handler_dict):
+        """
+        Adds a pre-checkout request handler.
+        Note that you should use register_pre_checkout_query_handler to add pre_checkout_query_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.pre_checkout_query_handlers.append(handler_dict)
+    
+    def register_pre_checkout_query_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers pre-checkout request handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: decorated function
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_pre_checkout_query_handler(handler_dict)
+
+    def poll_handler(self, func, **kwargs):
+        """
+        Handles new state of a poll. Bots receive only updates about stopped polls and polls, which are sent by the bot
+        As a parameter to the decorator function, it passes :class:`telebot.types.Poll` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_poll_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_poll_handler(self, handler_dict):
+        """
+        Adds a poll request handler.
+        Note that you should use register_poll_handler to add poll_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.poll_handlers.append(handler_dict)
+
+    def register_poll_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers poll handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_poll_handler(handler_dict)
+
+    def poll_answer_handler(self, func=None, **kwargs):
+        """
+        Handles change of user's answer in a non-anonymous poll(when user changes the vote).
+        Bots receive new votes only in polls that were sent by the bot itself.
+        As a parameter to the decorator function, it passes :class:`telebot.types.PollAnswer` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_poll_answer_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_poll_answer_handler(self, handler_dict):
+        """
+        Adds a poll_answer request handler.
+        Note that you should use register_poll_answer_handler to add poll_answer_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.poll_answer_handlers.append(handler_dict)
+
+    def register_poll_answer_handler(self, callback: Callable[[Any], Awaitable], func: Callable, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers poll answer handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_poll_answer_handler(handler_dict)
+
+    def my_chat_member_handler(self, func=None, **kwargs):
+        """
+        Handles update in a status of a bot. For private chats,
+        this update is received only when the bot is blocked or unblocked by the user.
+        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_my_chat_member_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_my_chat_member_handler(self, handler_dict):
+        """
+        Adds a my_chat_member handler.
+        Note that you should use register_my_chat_member_handler to add my_chat_member_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.my_chat_member_handlers.append(handler_dict)
+
+    def register_my_chat_member_handler(self, callback: Callable[[Any], Awaitable], func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers my chat member handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_my_chat_member_handler(handler_dict)
+
+    def chat_member_handler(self, func=None, **kwargs):
+        """
+        Handles update in a status of a user in a chat.
+        The bot must be an administrator in the chat and must explicitly specify “chat_member”
+        in the list of allowed_updates to receive these updates.
+        As a parameter to the decorator function, it passes :class:`telebot.types.ChatMemberUpdated` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_chat_member_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_chat_member_handler(self, handler_dict):
+        """
+        Adds a chat_member handler.
+        Note that you should use register_chat_member_handler to add chat_member_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.chat_member_handlers.append(handler_dict)
+
+    def register_chat_member_handler(self, callback: Callable[[Any], Awaitable], func: Optional[Callable]=None, pass_bot: Optional[bool]=False, **kwargs):
+        """
+        Registers chat member handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable``
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return:None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_chat_member_handler(handler_dict)
+
+    def chat_join_request_handler(self, func=None, **kwargs):
+        """
+        Handles a request to join the chat has been sent. The bot must have the can_invite_users
+        administrator right in the chat to receive these updates.
+        As a parameter to the decorator function, it passes :class:`telebot.types.ChatJoinRequest` object.
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+        
+        :return: None
+        """
+
+        def decorator(handler):
+            handler_dict = self._build_handler_dict(handler, func=func, **kwargs)
+            self.add_chat_join_request_handler(handler_dict)
+            return handler
+
+        return decorator
+
+    def add_chat_join_request_handler(self, handler_dict):
+        """
+        Adds a chat_join_request handler.
+        Note that you should use register_chat_join_request_handler to add chat_join_request_handler.
+
+        :meta private:
+
+        :param handler_dict:
+        :return:
+        """
+        self.chat_join_request_handlers.append(handler_dict)
+
+    def register_chat_join_request_handler(self, callback: Callable[[Any], Awaitable], func: Optional[Callable]=None, pass_bot:Optional[bool]=False, **kwargs):
+        """
+        Registers chat join request handler.
+
+        :param callback: function to be called
+        :type callback: :obj:`Awaitable`
+
+        :param func: Function executed as a filter
+        :type func: :obj:`function`
+
+        :param pass_bot: True if you need to pass TeleBot instance to handler(useful for separating handlers into different files)
+        :type pass_bot: :obj:`bool`
+
+        :param kwargs: Optional keyword arguments(custom filters)
+
+        :return: None
+        """
+        handler_dict = self._build_handler_dict(callback, func=func, pass_bot=pass_bot, **kwargs)
+        self.add_chat_join_request_handler(handler_dict)
+
+    @staticmethod
+    def _build_handler_dict(handler, pass_bot=False, **filters):
+        """
+        Builds a dictionary for a handler.
+
+        :param handler:
+        :param filters:
+        :return:
+        """
+        return {
+            'function': handler,
+            'pass_bot': pass_bot,
+            'filters': {ftype: fvalue for ftype, fvalue in filters.items() if fvalue is not None}
+            # Remove None values, they are skipped in _test_filter anyway
+            #'filters': filters
+        }
+
+    async def skip_updates(self):
+        """
+        Skip existing updates.
+        Only last update will remain on server.
+        """
+        await self.get_updates(-1)
+        return True
+
+    # all methods begin here
+    
+    async def get_me(self) -> types.User:
+        """
+        Returns basic information about the bot in form of a User object.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getme
+        """
+        result = await asyncio_helper.get_me(self.token)
+        return types.User.de_json(result)
+
+    async def get_file(self, file_id: Optional[str]) -> types.File:
+        """
+        Use this method to get basic info about a file and prepare it for downloading.
+        For the moment, bots can download files of up to 20MB in size. 
+        On success, a File object is returned. 
+        It is guaranteed that the link will be valid for at least 1 hour. 
+        When the link expires, a new one can be requested by calling get_file again.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getfile
+
+        :param file_id: File identifier
+        :type file_id: :obj:`str`
+
+        :return: :class:`telebot.types.File`
+        """
+        return types.File.de_json(await asyncio_helper.get_file(self.token, file_id))
+
+    async def get_file_url(self, file_id: Optional[str]) -> str:
+        """
+        Get a valid URL for downloading a file.
+
+        :param file_id: File identifier to get download URL for.
+        :type file_id: :obj:`str`
+
+        :return: URL for downloading the file.
+        :rtype: :obj:`str`
+        """
+        return await asyncio_helper.get_file_url(self.token, file_id)
+
+    async def download_file(self, file_path: Optional[str]) -> bytes:
+        """
+        Downloads file.
+
+        :param file_path: Path where the file should be downloaded.
+        :type file_path: str
+        
+        :return: bytes
+        :rtype: :obj:`bytes`
+        """
+        return await asyncio_helper.download_file(self.token, file_path)
+
+    async def log_out(self) -> bool:
+        """
+        Use this method to log out from the cloud Bot API server before launching the bot locally. 
+        You MUST log out the bot before running it locally, otherwise there is no guarantee
+        that the bot will receive updates.
+        After a successful call, you can immediately log in on a local server, 
+        but will not be able to log in back to the cloud Bot API server for 10 minutes. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#logout
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.log_out(self.token)
+    
+    async def close(self) -> bool:
+        """
+        Use this method to close the bot instance before moving it from one local server to another. 
+        You need to delete the webhook before calling this method to ensure that the bot isn't launched again
+        after server restart.
+        The method will return error 429 in the first 10 minutes after the bot is launched. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#close
+
+        :return: :obj:`bool`
+        """
+        return await asyncio_helper.close(self.token)
+
+    def enable_saving_states(self, filename="./.state-save/states.pkl"):
+        """
+        Enable saving states (by default saving disabled)
+
+        .. note::
+            It is recommended to pass a :class:`~telebot.asyncio_storage.StatePickleStorage` instance as state_storage
+            to TeleBot class.
+
+        :param filename: Filename of saving file, defaults to "./.state-save/states.pkl"
+        :type filename: :obj:`str`, optional
+        """
+
+        self.current_states = StatePickleStorage(file_path=filename)
+
+    async def set_webhook(self, url: Optional[str]=None, certificate: Optional[Union[str, Any]]=None, max_connections: Optional[int]=None,
+                allowed_updates: Optional[List[str]]=None, ip_address: Optional[str]=None,
+                drop_pending_updates: Optional[bool] = None, timeout: Optional[int]=None,
+                secret_token: Optional[str]=None) -> bool:
+        """
+        Use this method to specify a URL and receive incoming updates via an outgoing webhook.
+        Whenever there is an update for the bot, we will send an HTTPS POST request to the specified URL,
+        containing a JSON-serialized Update. In case of an unsuccessful request, we will give up after
+        a reasonable amount of attempts. Returns True on success.
+
+        If you'd like to make sure that the webhook was set by you, you can specify secret data in the parameter secret_token.
+        If specified, the request will contain a header “X-Telegram-Bot-Api-Secret-Token” with the secret token as content.
+
+        Telegram Documentation: https://core.telegram.org/bots/api#setwebhook
+
+        :param url: HTTPS URL to send updates to. Use an empty string to remove webhook integration, defaults to None
+        :type url: :obj:`str`, optional
+
+        :param certificate: Upload your public key certificate so that the root certificate in use can be checked, defaults to None
+        :type certificate: :class:`str`, optional
+
+        :param max_connections: The maximum allowed number of simultaneous HTTPS connections to the webhook for update delivery, 1-100.
+            Defaults to 40. Use lower values to limit the load on your bot's server, and higher values to increase your bot's throughput,
+            defaults to None
+        :type max_connections: :obj:`int`, optional
+        
+        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example,
+            specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See Update
+            for a complete list of available update types. Specify an empty list to receive all update types except chat_member (default).
+            If not specified, the previous setting will be used.
+            
+            Please note that this parameter doesn't affect updates created before the call to the setWebhook, so unwanted updates may be received
+            for a short period of time. Defaults to None
+        
+        :type allowed_updates: :obj:`list`, optional
+
+        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address
+            resolved through DNS, defaults to None
+        :type ip_address: :obj:`str`, optional
+
+        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
+        :type drop_pending_updates: :obj:`bool`, optional
+
+        :param timeout: Timeout of a request, defaults to None
+        :type timeout: :obj:`int`, optional
+
+        :param secret_token: A secret token to be sent in a header “X-Telegram-Bot-Api-Secret-Token” in every webhook request, 1-256 characters.
+            Only characters A-Z, a-z, 0-9, _ and - are allowed. The header is useful to ensure that the request comes from a webhook set by you. Defaults to None
+        :type secret_token: :obj:`str`, optional
+
+        :return: True on success.
+        :rtype: :obj:`bool` if the request was successful.
+        """
+        return await asyncio_helper.set_webhook(self.token, url, certificate, max_connections, allowed_updates, ip_address,
+                                     drop_pending_updates, timeout, secret_token)
+
+
+    async def run_webhooks(self,
+                    listen: Optional[str]="127.0.0.1",
+                    port: Optional[int]=443,
+                    url_path: Optional[str]=None,
+                    certificate: Optional[str]=None,
+                    certificate_key: Optional[str]=None,
+                    webhook_url: Optional[str]=None,
+                    max_connections: Optional[int]=None,
+                    allowed_updates: Optional[List]=None,
+                    ip_address: Optional[str]=None,
+                    drop_pending_updates: Optional[bool] = None,
+                    timeout: Optional[int]=None,
+                    secret_token: Optional[str]=None,
+                    secret_token_length: Optional[int]=20,
+                    debug: Optional[bool]=False):
+        """
+        This class sets webhooks and listens to a given url and port.
+
+        :param listen: IP address to listen to. Defaults to
+            0.0.0.0
+        :param port: A port which will be used to listen to webhooks.
+        :param url_path: Path to the webhook. Defaults to /token
+        :param certificate: Path to the certificate file.
+        :param certificate_key: Path to the certificate key file.
+        :param webhook_url: Webhook URL.
+        :param max_connections: Maximum allowed number of simultaneous HTTPS connections to the webhook for update delivery, 1-100. Defaults to 40. Use lower values to limit the load on your bot's server, and higher values to increase your bot's throughput.
+        :param allowed_updates: A JSON-serialized list of the update types you want your bot to receive. For example, specify [“message”, “edited_channel_post”, “callback_query”] to only receive updates of these types. See Update for a complete list of available update types. Specify an empty list to receive all updates regardless of type (default). If not specified, the previous setting will be used.
+        :param ip_address: The fixed IP address which will be used to send webhook requests instead of the IP address resolved through DNS
+        :param drop_pending_updates: Pass True to drop all pending updates
+        :param timeout: Integer. Request connection timeout
+        :param secret_token: Secret token to be used to verify the webhook request.
+        :return:
+        """
+
+        # generate secret token if not set
+        if not secret_token:
+            secret_token = ''.join(random.choices(string.ascii_uppercase + string.digits, k=secret_token_length))
+
+
+        if not url_path:
+            url_path = self.token + '/'
+        if url_path[-1] != '/': url_path += '/'
+        
+
+
+        protocol = "https" if certificate else "http"
+        if not webhook_url:
+            webhook_url = "{}://{}:{}/{}".format(protocol, listen, port, url_path)
+
+        if certificate and certificate_key:
+            ssl_ctx = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)
+            ssl_ctx.load_cert_chain(certificate, certificate_key)
+        else:
+            ssl_ctx = None
+
+        # open certificate if it exists
+        cert_file = open(certificate, 'rb') if certificate else None
+        await self.set_webhook(
+            url=webhook_url,
+            certificate=cert_file,
+            max_connections=max_connections,
+            allowed_updates=allowed_updates,
+            ip_address=ip_address,
+            drop_pending_updates=drop_pending_updates,
+            timeout=timeout,
+            secret_token=secret_token
+        )
+        if cert_file: cert_file.close()
+
+        ssl_context = (certificate, certificate_key) if certificate else (None, None)
+        # for webhooks
+        try:
+            from telebot.ext.aio import AsyncWebhookListener
+        except (NameError, ImportError):
+            raise ImportError("Please install uvicorn and fastapi in order to use `run_webhooks` method.")
+        self.webhook_listener = AsyncWebhookListener(bot=self, secret_token=secret_token, host=listen, port=port, ssl_context=ssl_context, url_path='/'+url_path)
+        await self.webhook_listener.run_app()
+
+
+
+    async def delete_webhook(self, drop_pending_updates: Optional[bool]=None, timeout: Optional[int]=None) -> bool:
+        """
+        Use this method to remove webhook integration if you decide to switch back to getUpdates.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#deletewebhook
+
+        :param drop_pending_updates: Pass True to drop all pending updates, defaults to None
+        :type drop_pending_updates: :obj: `bool`, optional
+
+        :param timeout: Request connection timeout, defaults to None
+        :type timeout: :obj:`int`, optional
+
+        :return: Returns True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_webhook(self.token, drop_pending_updates, timeout)
+
+    async def remove_webhook(self) -> bool:
+        """
+        Alternative for delete_webhook but uses set_webhook
+        """
+        result = await self.set_webhook()
+        return result
+
+    async def get_webhook_info(self, timeout: Optional[int]=None) -> types.WebhookInfo:
+        """
+        Use this method to get current webhook status. Requires no parameters.
+        On success, returns a WebhookInfo object. If the bot is using getUpdates, will return an object with the url field empty.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getwebhookinfo
+
+        :param timeout: Request connection timeout
+        :type timeout: :obj:`int`, optional
+
+        :return: On success, returns a WebhookInfo object.
+        :rtype: :class:`telebot.types.WebhookInfo`
+        """
+        result = await asyncio_helper.get_webhook_info(self.token, timeout)
+        return types.WebhookInfo.de_json(result)
+
+    async def get_user_profile_photos(self, user_id: int, offset: Optional[int]=None, 
+            limit: Optional[int]=None) -> types.UserProfilePhotos:
+        """
+        Use this method to get a list of profile pictures for a user.
+        Returns a :class:`telebot.types.UserProfilePhotos` object.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getuserprofilephotos
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param offset: Sequential number of the first photo to be returned. By default, all photos are returned.
+        :type offset: :obj:`int`
+
+        :param limit: Limits the number of photos to be retrieved. Values between 1-100 are accepted. Defaults to 100.
+        :type limit: :obj:`int`
+
+        :return: `UserProfilePhotos <https://core.telegram.org/bots/api#userprofilephotos>`_
+        :rtype: :class:`telebot.types.UserProfilePhotos`
+
+        """
+        result = await asyncio_helper.get_user_profile_photos(self.token, user_id, offset, limit)
+        return types.UserProfilePhotos.de_json(result)
+
+    async def get_chat(self, chat_id: Union[int, str]) -> types.Chat:
+        """
+        Use this method to get up to date information about the chat (current name of the user for one-on-one
+        conversations, current username of a user, group or channel, etc.). Returns a Chat object on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getchat
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: Chat information
+        :rtype: :class:`telebot.types.Chat`
+        """
+        result = await asyncio_helper.get_chat(self.token, chat_id)
+        return types.Chat.de_json(result)
+
+    async def leave_chat(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method for your bot to leave a group, supergroup or channel. Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#leavechat
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: :obj:`bool`
+        """
+        result = await asyncio_helper.leave_chat(self.token, chat_id)
+        return result
+
+    async def get_chat_administrators(self, chat_id: Union[int, str]) -> List[types.ChatMember]:
+        """
+        Use this method to get a list of administrators in a chat.
+        On success, returns an Array of ChatMember objects that contains
+        information about all chat administrators except other bots.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getchatadministrators    
+
+        :param chat_id: Unique identifier for the target chat or username
+            of the target supergroup or channel (in the format @channelusername)
+        :return: List made of ChatMember objects.
+        :rtype: :obj:`list` of :class:`telebot.types.ChatMember`
+        """
+        result = await asyncio_helper.get_chat_administrators(self.token, chat_id)
+        return [types.ChatMember.de_json(r) for r in result]
+
+    @util.deprecated(deprecation_text="Use get_chat_member_count instead")
+    async def get_chat_members_count(self, chat_id: Union[int, str]) -> int:
+        """
+        This function is deprecated. Use `get_chat_member_count` instead.
+
+        .. deprecated:: 4.0.0
+            This function is deprecated. Use `get_chat_member_count` instead.
+
+        Use this method to get the number of members in a chat.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: Number of members in the chat.
+        :rtype: :obj:`int`
+        """
+        result = await asyncio_helper.get_chat_member_count(self.token, chat_id)
+        return result
+    
+    async def get_chat_member_count(self, chat_id: Union[int, str]) -> int:
+        """
+        Use this method to get the number of members in a chat.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getchatmembercount
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: Number of members in the chat.
+        :rtype: :obj:`int`
+        """
+        result = await asyncio_helper.get_chat_member_count(self.token, chat_id)
+        return result
+
+    async def set_chat_sticker_set(self, chat_id: Union[int, str], sticker_set_name: str) -> types.StickerSet:
+        """
+        Use this method to set a new group sticker set for a supergroup. The bot must be an administrator in the chat
+        for this to work and must have the appropriate administrator rights. Use the field can_set_sticker_set optionally returned
+        in getChat requests to check if the bot can use this method. Returns True on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#setchatstickerset
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param sticker_set_name: Name of the sticker set to be set as the group sticker set
+        :type sticker_set_name: :obj:`str`
+
+        :return: StickerSet object
+        :rtype: :class:`telebot.types.StickerSet`
+        """
+        result = await asyncio_helper.set_chat_sticker_set(self.token, chat_id, sticker_set_name)
+        return result
+
+    async def delete_chat_sticker_set(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to delete a group sticker set from a supergroup. The bot must be an administrator in the chat
+        for this to work and must have the appropriate admin rights. Use the field can_set_sticker_set
+        optionally returned in getChat requests to check if the bot can use this method. Returns True on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#deletechatstickerset
+
+        :param chat_id:	Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: Returns True on success.
+        :rtype: :obj:`bool`
+        """
+        result = await asyncio_helper.delete_chat_sticker_set(self.token, chat_id)
+        return result
+
+    async def answer_web_app_query(self, web_app_query_id: str, result: types.InlineQueryResultBase) -> types.SentWebAppMessage:
+        """
+        Use this method to set the result of an interaction with a Web App and
+        send a corresponding message on behalf of the user to the chat from which
+        the query originated. 
+        On success, a SentWebAppMessage object is returned.
+
+        Telegram Documentation: https://core.telegram.org/bots/api#answerwebappquery
+
+        :param web_app_query_id: Unique identifier for the query to be answered
+        :type web_app_query_id: :obj:`str`
+
+        :param result: A JSON-serialized object describing the message to be sent
+        :type result: :class:`telebot.types.InlineQueryResultBase`
+
+        :return: On success, a SentWebAppMessage object is returned.
+        :rtype: :class:`telebot.types.SentWebAppMessage`
+        """
+
+        return await asyncio_helper.answer_web_app_query(self.token, web_app_query_id, result)
+
+    async def get_chat_member(self, chat_id: Union[int, str], user_id: int) -> types.ChatMember:
+        """
+        Use this method to get information about a member of a chat. Returns a ChatMember object on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#getchatmember
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :return: Returns ChatMember object on success.
+        :rtype: :class:`telebot.types.ChatMember`
+        """
+        result = await asyncio_helper.get_chat_member(self.token, chat_id, user_id)
+        return types.ChatMember.de_json(result)
+
+    async def send_message(
+            self, chat_id: Union[int, str], text: str, 
+            parse_mode: Optional[str]=None, 
+            entities: Optional[List[types.MessageEntity]]=None,
+            disable_web_page_preview: Optional[bool]=None, 
+            disable_notification: Optional[bool]=None, 
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            allow_sending_without_reply: Optional[bool]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            timeout: Optional[int]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send text messages.
+
+        Warning: Do not send more than about 4096 characters each message, otherwise you'll risk an HTTP 414 error.
+        If you must send more than 4096 characters, 
+        use the `split_string` or `smart_split` function in util.py.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendmessage
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param text: Text of the message to be sent
+        :type text: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the message text.
+        :type parse_mode: :obj:`str`
+
+        :param entities: List of special entities that appear in message text, which can be specified instead of parse_mode
+        :type entities: Array of :class:`telebot.types.MessageEntity`
+
+        :param disable_web_page_preview: Disables link previews for links in this message
+        :type disable_web_page_preview: :obj:`bool`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param protect_content: If True, the message content will be hidden for all users except for the target user
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param message_thread_id: Unique identifier for the target message thread (topic) of the forum; for forum supergroups only
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_message(
+                self.token, chat_id, text, disable_web_page_preview, reply_to_message_id,
+                reply_markup, parse_mode, disable_notification, timeout,
+                entities, allow_sending_without_reply, protect_content, message_thread_id))
+
+    async def forward_message(
+            self, chat_id: Union[int, str], from_chat_id: Union[int, str], 
+            message_id: int, disable_notification: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            timeout: Optional[int]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to forward messages of any kind.
+
+        Telegram documentation: https://core.telegram.org/bots/api#forwardmessage
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound
+        :type disable_notification: :obj:`bool`
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
+        :type from_chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Message identifier in the chat specified in from_chat_id
+        :type message_id: :obj:`int`
+
+        :param protect_content: Protects the contents of the forwarded message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param message_thread_id: Unique identifier for the target message thread (topic) of the forum; for forum supergroups only
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+
+        return types.Message.de_json(
+            await asyncio_helper.forward_message(self.token, chat_id, from_chat_id, message_id, disable_notification, timeout, protect_content,
+                                                 message_thread_id))
+
+    async def copy_message(
+            self, chat_id: Union[int, str], 
+            from_chat_id: Union[int, str], 
+            message_id: int, 
+            caption: Optional[str]=None, 
+            parse_mode: Optional[str]=None, 
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            disable_notification: Optional[bool]=None, 
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            allow_sending_without_reply: Optional[bool]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            message_thread_id: Optional[int]=None) -> types.MessageID:
+        """
+        Use this method to copy messages of any kind.
+
+        Telegram documentation: https://core.telegram.org/bots/api#copymessage
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param from_chat_id: Unique identifier for the chat where the original message was sent (or channel username in the format @channelusername)
+        :type from_chat_id: :obj:`int` or :obj:`str`
+        :param message_id: Message identifier in the chat specified in from_chat_id
+        :type message_id: :obj:`int`
+
+        :param caption: New caption for media, 0-1024 characters after entities parsing. If not specified, the original caption is kept
+        :type caption: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the new caption.
+        :type parse_mode: :obj:`str`
+
+        :param caption_entities: A JSON-serialized list of special entities that appear in the new caption, which can be specified instead of parse_mode
+        :type caption_entities: Array of :class:`telebot.types.MessageEntity`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+        
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.MessageID.de_json(
+            await asyncio_helper.copy_message(self.token, chat_id, from_chat_id, message_id, caption, parse_mode, caption_entities,
+                                   disable_notification, reply_to_message_id, allow_sending_without_reply, reply_markup,
+                                   timeout, protect_content, message_thread_id))
+
+    async def delete_message(self, chat_id: Union[int, str], message_id: int, 
+            timeout: Optional[int]=None) -> bool:
+        """
+        Use this method to delete a message, including service messages, with the following limitations:
+        - A message can only be deleted if it was sent less than 48 hours ago.
+        - A dice message in a private chat can only be deleted if it was sent more than 24 hours ago.
+        - Bots can delete outgoing messages in private chats, groups, and supergroups.
+        - Bots can delete incoming messages in private chats.
+        - Bots granted can_post_messages permissions can delete outgoing messages in channels.
+        - If the bot is an administrator of a group, it can delete any message there.
+        - If the bot has can_delete_messages permission in a supergroup or a channel, it can delete any message there.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#deletemessage
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Identifier of the message to delete
+        :type message_id: :obj:`int`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :return: Returns True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_message(self.token, chat_id, message_id, timeout)
+
+    async def send_dice(
+            self, chat_id: Union[int, str],
+            emoji: Optional[str]=None, disable_notification: Optional[bool]=None, 
+            reply_to_message_id: Optional[int]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send an animated emoji that will display a random value. On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#senddice
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param emoji: Emoji on which the dice throw animation is based. Currently, must be one of “🎲”, “🎯”, “🏀”, “⚽”, “🎳”, or “🎰”.
+            Dice can have values 1-6 for “🎲”, “🎯” and “🎳”, values 1-5 for “🏀” and “⚽”, and values 1-64 for “🎰”. Defaults to “🎲”
+        :type emoji: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
+            to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: The identifier of a message thread, unique within the chat to which the message with the thread identifier belongs
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_dice(
+                self.token, chat_id, emoji, disable_notification, reply_to_message_id,
+                reply_markup, timeout, allow_sending_without_reply, protect_content, message_thread_id)
+        )
+
+    async def send_photo(
+            self, chat_id: Union[int, str], photo: Union[Any, str], 
+            caption: Optional[str]=None, parse_mode: Optional[str]=None,
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            disable_notification: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            allow_sending_without_reply: Optional[bool]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            timeout: Optional[int]=None,
+            message_thread_id: Optional[int]=None,
+            has_spoiler: Optional[bool]=None) -> types.Message:
+        """
+        Use this method to send photos. On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendphoto
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param photo: Photo to send. Pass a file_id as String to send a photo that exists on the Telegram servers (recommended),
+            pass an HTTP URL as a String for Telegram to get a photo from the Internet, or upload a new photo using multipart/form-data.
+            The photo must be at most 10 MB in size. The photo's width and height must not exceed 10000 in total. Width and height ratio must be at most 20.
+        :type photo: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param caption: Photo caption (may also be used when resending photos by file_id), 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the photo caption.
+        :type parse_mode: :obj:`str`
+
+        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
+            to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :param has_spoiler: Pass True, if the photo should be sent as a spoiler
+        :type has_spoiler: :obj:`bool`
+        
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_photo(
+                self.token, chat_id, photo, caption, reply_to_message_id, reply_markup,
+                parse_mode, disable_notification, timeout, caption_entities,
+                allow_sending_without_reply, protect_content, message_thread_id, has_spoiler))
+
+    async def send_audio(
+            self, chat_id: Union[int, str], audio: Union[Any, str], 
+            caption: Optional[str]=None, duration: Optional[int]=None, 
+            performer: Optional[str]=None, title: Optional[str]=None,
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            parse_mode: Optional[str]=None, 
+            disable_notification: Optional[bool]=None,
+            timeout: Optional[int]=None, 
+            thumb: Optional[Union[Any, str]]=None,
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send audio files, if you want Telegram clients to display them in the music player.
+        Your audio must be in the .MP3 or .M4A format. On success, the sent Message is returned. Bots can currently send audio files of up to 50 MB in size,
+        this limit may be changed in the future.
+
+        For sending voice messages, use the send_voice method instead.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendaudio
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param audio: Audio file to send. Pass a file_id as String to send an audio file that exists on the Telegram servers (recommended),
+            pass an HTTP URL as a String for Telegram to get an audio file from the Internet, or upload a new one using multipart/form-data.
+            Audio must be in the .MP3 or .M4A format.
+        :type audio: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param caption: Audio caption, 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param duration: Duration of the audio in seconds
+        :type duration: :obj:`int`
+
+        :param performer: Performer
+        :type performer: :obj:`str`
+
+        :param title: Track name
+        :type title: :obj:`str`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup:
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param parse_mode: Mode for parsing entities in the audio caption. See formatting options for more details.
+        :type parse_mode: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
+            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
+            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
+            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
+        :type thumb: :obj:`str`
+
+        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_audio(
+                self.token, chat_id, audio, caption, duration, performer, title, reply_to_message_id,
+                reply_markup, parse_mode, disable_notification, timeout, thumb,
+                caption_entities, allow_sending_without_reply, protect_content, message_thread_id))
+
+    async def send_voice(
+            self, chat_id: Union[int, str], voice: Union[Any, str], 
+            caption: Optional[str]=None, duration: Optional[int]=None, 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            parse_mode: Optional[str]=None, 
+            disable_notification: Optional[bool]=None, 
+            timeout: Optional[int]=None,
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send audio files, if you want Telegram clients to display the file as a playable voice message.
+        For this to work, your audio must be in an .OGG file encoded with OPUS (other formats may be sent as Audio or Document).
+        On success, the sent Message is returned. Bots can currently send voice messages of up to 50 MB in size, this limit may be changed in the future.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendvoice
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param voice: Audio file to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended),
+            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
+        :type voice: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param caption: Voice message caption, 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param duration: Duration of the voice message in seconds
+        :type duration: :obj:`int`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions
+            to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param parse_mode: Mode for parsing entities in the voice message caption. See formatting options for more details.
+        :type parse_mode: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_voice(
+                self.token, chat_id, voice, caption, duration, reply_to_message_id, reply_markup,
+                parse_mode, disable_notification, timeout, caption_entities,
+                allow_sending_without_reply, protect_content, message_thread_id))
+
+    async def send_document(
+            self, chat_id: Union[int, str], document: Union[Any, str],
+            reply_to_message_id: Optional[int]=None, 
+            caption: Optional[str]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            parse_mode: Optional[str]=None, 
+            disable_notification: Optional[bool]=None, 
+            timeout: Optional[int]=None, 
+            thumb: Optional[Union[Any, str]]=None,
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            visible_file_name: Optional[str]=None,
+            disable_content_type_detection: Optional[bool]=None,
+            data: Optional[Union[Any, str]]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send general files.
+
+        Telegram documentation: https://core.telegram.org/bots/api#senddocument
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param document: (document) File to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL as a
+            String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data
+        :type document: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param caption: Document caption (may also be used when resending documents by file_id), 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param parse_mode: Mode for parsing entities in the document caption
+        :type parse_mode: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param thumb: InputFile or String : Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>
+        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param caption_entities: A JSON-serialized list of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param visible_file_name: allows to define file name that will be visible in the Telegram instead of original file name
+        :type visible_file_name: :obj:`str`
+
+        :param disable_content_type_detection: Disables automatic server-side content type detection for files uploaded using multipart/form-data
+        :type disable_content_type_detection: :obj:`bool`
+
+        :param data: function typo miss compatibility: do not use it
+        :type data: :obj:`str`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        if data and not(document):
+            # function typo miss compatibility
+            document = data
+
+        return types.Message.de_json(
+            await asyncio_helper.send_data(
+                self.token, chat_id, document, 'document',
+                reply_to_message_id = reply_to_message_id, reply_markup = reply_markup, parse_mode = parse_mode,
+                disable_notification = disable_notification, timeout = timeout, caption = caption, thumb = thumb,
+                caption_entities = caption_entities, allow_sending_without_reply = allow_sending_without_reply,
+                disable_content_type_detection = disable_content_type_detection, visible_file_name = visible_file_name, protect_content = protect_content,
+                message_thread_id = message_thread_id))
+
+    async def send_sticker(
+            self, chat_id: Union[int, str], sticker: Union[Any, str], 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            disable_notification: Optional[bool]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            data: Union[Any, str]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send static .WEBP, animated .TGS, or video .WEBM stickers.
+        On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendsticker
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param sticker: Sticker to send. Pass a file_id as String to send a file that exists on the Telegram servers (recommended), pass an HTTP URL
+            as a String for Telegram to get a .webp file from the Internet, or upload a new one using multipart/form-data.
+        :type sticker: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param disable_notification: to disable the notification
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param data: function typo miss compatibility: do not use it
+        :type data: :obj:`str`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        if data and not(sticker):
+            # function typo miss compatibility
+            logger.warning("send_sticker: data parameter is deprecated. Use sticker instead.")
+            sticker = data
+
+        return types.Message.de_json(
+            await asyncio_helper.send_data(
+                self.token, chat_id, sticker, 'sticker',
+                reply_to_message_id=reply_to_message_id, reply_markup=reply_markup,
+                disable_notification=disable_notification, timeout=timeout, 
+                allow_sending_without_reply=allow_sending_without_reply, protect_content=protect_content,
+                message_thread_id=message_thread_id))
+
+    async def send_video(
+            self, chat_id: Union[int, str], video: Union[Any, str], 
+            duration: Optional[int]=None,
+            width: Optional[int]=None,
+            height: Optional[int]=None,
+            thumb: Optional[Union[Any, str]]=None, 
+            caption: Optional[str]=None, 
+            parse_mode: Optional[str]=None, 
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            supports_streaming: Optional[bool]=None, 
+            disable_notification: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            allow_sending_without_reply: Optional[bool]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            timeout: Optional[int]=None,
+            data: Optional[Union[Any, str]]=None,
+            message_thread_id: Optional[int]=None,
+            has_spoiler: Optional[bool]=None) -> types.Message:
+        """
+        Use this method to send video files, Telegram clients support mp4 videos (other formats may be sent as Document).
+        
+        Telegram documentation: https://core.telegram.org/bots/api#sendvideo
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param video: Video to send. You can either pass a file_id as String to resend a video that is already on the Telegram servers, or upload a new video file using multipart/form-data.
+        :type video: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param duration: Duration of sent video in seconds
+        :type duration: :obj:`int`
+
+        :param width: Video width
+        :type width: :obj:`int`
+
+        :param height: Video height
+        :type height: :obj:`int`
+
+        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side. The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320. Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file, so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
+        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
+        
+        :param caption: Video caption (may also be used when resending videos by file_id), 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the video caption
+        :type parse_mode: :obj:`str`
+
+        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param supports_streaming: Pass True, if the uploaded video is suitable for streaming
+        :type supports_streaming: :obj:`bool`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param data: function typo miss compatibility: do not use it
+        :type data: :obj:`str`
+
+        :param message_thread_id: Identifier of a message thread, in which the video will be sent
+        :type message_thread_id: :obj:`int`
+
+        :param has_spoiler: Pass True, if the video should be sent as a spoiler
+        :type has_spoiler: :obj:`bool`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        if data and not(video):
+            # function typo miss compatibility
+            logger.warning("send_sticker: data parameter is deprecated. Use video instead.")
+            video = data
+
+        return types.Message.de_json(
+            await asyncio_helper.send_video(
+                self.token, chat_id, video, duration, caption, reply_to_message_id, reply_markup,
+                parse_mode, supports_streaming, disable_notification, timeout, thumb, width, height,
+                caption_entities, allow_sending_without_reply, protect_content, message_thread_id, has_spoiler))
+
+    async def send_animation(
+            self, chat_id: Union[int, str], animation: Union[Any, str], 
+            duration: Optional[int]=None,
+            width: Optional[int]=None,
+            height: Optional[int]=None,
+            thumb: Optional[Union[Any, str]]=None,
+            caption: Optional[str]=None, 
+            parse_mode: Optional[str]=None,
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            disable_notification: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            message_thread_id: Optional[int]=None,
+            has_spoiler: Optional[bool]=None) -> types.Message:
+        """
+        Use this method to send animation files (GIF or H.264/MPEG-4 AVC video without sound).
+        On success, the sent Message is returned. Bots can currently send animation files of up to 50 MB in size, this limit may be changed in the future.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#sendanimation
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param animation: Animation to send. Pass a file_id as String to send an animation that exists on the Telegram servers (recommended),
+            pass an HTTP URL as a String for Telegram to get an animation from the Internet, or upload a new animation using multipart/form-data.
+        :type animation: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param duration: Duration of sent animation in seconds
+        :type duration: :obj:`int`
+
+        :param width: Animation width
+        :type width: :obj:`int`
+
+        :param height: Animation height
+        :type height: :obj:`int`
+        
+        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
+            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
+            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
+            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>.
+        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param caption: Animation caption (may also be used when resending animation by file_id), 0-1024 characters after entities parsing
+        :type caption: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the animation caption
+        :type parse_mode: :obj:`str`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param caption_entities: List of special entities that appear in the caption, which can be specified instead of parse_mode
+        :type caption_entities: :obj:`list` of :class:`telebot.types.MessageEntity`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the video will be sent
+        :type message_thread_id: :obj:`int`
+
+        :param has_spoiler: Pass True, if the animation should be sent as a spoiler
+        :type has_spoiler: :obj:`bool`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_animation(
+                self.token, chat_id, animation, duration, caption, reply_to_message_id,
+                reply_markup, parse_mode, disable_notification, timeout, thumb,
+                caption_entities, allow_sending_without_reply, width, height, protect_content, message_thread_id, has_spoiler))
+
+    async def send_video_note(
+            self, chat_id: Union[int, str], data: Union[Any, str], 
+            duration: Optional[int]=None, 
+            length: Optional[int]=None,
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None,
+            disable_notification: Optional[bool]=None, 
+            timeout: Optional[int]=None, 
+            thumb: Optional[Union[Any, str]]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        As of v.4.0, Telegram clients support rounded square MPEG4 videos of up to 1 minute long.
+        Use this method to send video messages. On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendvideonote
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+        
+        :param data: Video note to send. Pass a file_id as String to send a video note that exists on the Telegram servers (recommended)
+            or upload a new video using multipart/form-data. Sending video notes by a URL is currently unsupported
+        :type data: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param duration: Duration of sent video in seconds
+        :type duration: :obj:`int`
+
+        :param length: Video width and height, i.e. diameter of the video message
+        :type length: :obj:`int`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param thumb: Thumbnail of the file sent; can be ignored if thumbnail generation for the file is supported server-side.
+            The thumbnail should be in JPEG format and less than 200 kB in size. A thumbnail's width and height should not exceed 320.
+            Ignored if the file is not uploaded using multipart/form-data. Thumbnails can't be reused and can be only uploaded as a new file,
+            so you can pass “attach://<file_attach_name>” if the thumbnail was uploaded using multipart/form-data under <file_attach_name>. 
+        :type thumb: :obj:`str` or :class:`telebot.types.InputFile`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the video note will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_video_note(
+                self.token, chat_id, data, duration, length, reply_to_message_id, reply_markup,
+                disable_notification, timeout, thumb, allow_sending_without_reply, protect_content, message_thread_id))
+
+    async def send_media_group(
+            self, chat_id: Union[int, str], 
+            media: List[Union[
+                types.InputMediaAudio, types.InputMediaDocument, 
+                types.InputMediaPhoto, types.InputMediaVideo]],
+            disable_notification: Optional[bool]=None, 
+            protect_content: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> List[types.Message]:
+        """
+        Use this method to send a group of photos, videos, documents or audios as an album. Documents and audio files
+        can be only grouped in an album with messages of the same type. On success, an array of Messages that were sent is returned.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#sendmediagroup
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param media: A JSON-serialized array describing messages to be sent, must include 2-10 items
+        :type media: :obj:`list` of :obj:`types.InputMedia`
+
+        :param disable_notification: Sends the messages silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the messages will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, an array of Messages that were sent is returned.
+        :rtype: List[types.Message]
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        result = await asyncio_helper.send_media_group(
+            self.token, chat_id, media, disable_notification, reply_to_message_id, timeout, 
+            allow_sending_without_reply, protect_content, message_thread_id)
+        return [types.Message.de_json(msg) for msg in result]
+
+    async def send_location(
+            self, chat_id: Union[int, str], 
+            latitude: float, longitude: float, 
+            live_period: Optional[int]=None, 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            disable_notification: Optional[bool]=None, 
+            timeout: Optional[int]=None,
+            horizontal_accuracy: Optional[float]=None, 
+            heading: Optional[int]=None, 
+            proximity_alert_radius: Optional[int]=None, 
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send point on the map. On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendlocation
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param latitude: Latitude of the location
+        :type latitude: :obj:`float`
+
+        :param longitude: Longitude of the location
+        :type longitude: :obj:`float`
+
+        :param live_period: Period in seconds for which the location will be updated (see Live Locations, should be between 60 and 86400.
+        :type live_period: :obj:`int`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard
+            or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
+        :type horizontal_accuracy: :obj:`float`
+
+        :param heading: For live locations, a direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
+        :type heading: :obj:`int`
+
+        :param proximity_alert_radius: For live locations, a maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+        :type proximity_alert_radius: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+        
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of a message thread, in which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_location(
+                self.token, chat_id, latitude, longitude, live_period, 
+                reply_to_message_id, reply_markup, disable_notification, timeout, 
+                horizontal_accuracy, heading, proximity_alert_radius, 
+                allow_sending_without_reply, protect_content, message_thread_id))
+
+    async def edit_message_live_location(
+            self, latitude: float, longitude: float, 
+            chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
+            timeout: Optional[int]=None,
+            horizontal_accuracy: Optional[float]=None, 
+            heading: Optional[int]=None, 
+            proximity_alert_radius: Optional[int]=None) -> types.Message:
+        """
+        Use this method to edit live location messages. A location can be edited until its live_period expires or editing is explicitly
+            disabled by a call to stopMessageLiveLocation. On success, if the edited message is not an inline message, the edited Message
+            is returned, otherwise True is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editmessagelivelocation
+
+        :param latitude: Latitude of new location
+        :type latitude: :obj:`float`
+
+        :param longitude: Longitude of new location
+        :type longitude: :obj:`float`
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the message to edit
+        :type message_id: :obj:`int`
+
+        :param reply_markup: A JSON-serialized object for a new inline keyboard.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :param horizontal_accuracy: The radius of uncertainty for the location, measured in meters; 0-1500
+        :type horizontal_accuracy: :obj:`float`
+
+        :param heading: Direction in which the user is moving, in degrees. Must be between 1 and 360 if specified.
+        :type heading: :obj:`int`
+
+        :param proximity_alert_radius: The maximum distance for proximity alerts about approaching another chat member, in meters. Must be between 1 and 100000 if specified.
+        :type proximity_alert_radius: :obj:`int`
+
+        :return: On success, if the edited message is not an inline message, the edited Message is returned, otherwise True is returned.
+        :rtype: :class:`telebot.types.Message` or bool
+        """
+        return types.Message.de_json(
+            await asyncio_helper.edit_message_live_location(
+                self.token, latitude, longitude, chat_id, message_id,
+                inline_message_id, reply_markup, timeout,
+                horizontal_accuracy, heading, proximity_alert_radius))
+
+    async def stop_message_live_location(
+            self, chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None,
+            timeout: Optional[int]=None) -> types.Message:
+        """
+        Use this method to stop updating a live location message before live_period expires.
+        On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#stopmessagelivelocation
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: 	Required if inline_message_id is not specified. Identifier of the message with live location to stop
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message with live location to stop
+        :type inline_message_id: :obj:`str`
+
+        :param reply_markup: A JSON-serialized object for a new inline keyboard.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :return: On success, if the message is not an inline message, the edited Message is returned, otherwise True is returned.
+        :rtype: :class:`telebot.types.Message` or bool
+        """
+        return types.Message.de_json(
+            await asyncio_helper.stop_message_live_location(
+                self.token, chat_id, message_id, inline_message_id, reply_markup, timeout))
+
+    async def send_venue(
+            self, chat_id: Union[int, str], 
+            latitude: float, longitude: float, 
+            title: str, address: str, 
+            foursquare_id: Optional[str]=None, 
+            foursquare_type: Optional[str]=None,
+            disable_notification: Optional[bool]=None, 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            google_place_id: Optional[str]=None,
+            google_place_type: Optional[str]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send information about a venue. On success, the sent Message is returned.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#sendvenue
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` or :obj:`str`
+        
+        :param latitude: Latitude of the venue
+        :type latitude: :obj:`float`
+
+        :param longitude: Longitude of the venue
+        :type longitude: :obj:`float`
+
+        :param title: Name of the venue
+        :type title: :obj:`str`
+
+        :param address: Address of the venue
+        :type address: :obj:`str`
+
+        :param foursquare_id: Foursquare identifier of the venue
+        :type foursquare_id: :obj:`str`
+
+        :param foursquare_type: Foursquare type of the venue, if known. (For example, “arts_entertainment/default”,
+            “arts_entertainment/aquarium” or “food/icecream”.)
+        :type foursquare_type: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
+            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
+            replied-to messages is not found.
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param google_place_id: Google Places identifier of the venue
+        :type google_place_id: :obj:`str`
+
+        :param google_place_type: Google Places type of the venue.
+        :type google_place_type: :obj:`str`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: The thread to which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_venue(
+                self.token, chat_id, latitude, longitude, title, address, foursquare_id, foursquare_type,
+                disable_notification, reply_to_message_id, reply_markup, timeout,
+                allow_sending_without_reply, google_place_id, google_place_type, protect_content, message_thread_id)
+        )
+
+    async def send_contact(
+            self, chat_id: Union[int, str], phone_number: str, 
+            first_name: str, last_name: Optional[str]=None, 
+            vcard: Optional[str]=None,
+            disable_notification: Optional[bool]=None, 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send phone contacts. On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendcontact
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param phone_number: Contact's phone number
+        :type phone_number: :obj:`str`
+
+        :param first_name: Contact's first name
+        :type first_name: :obj:`str`
+
+        :param last_name: Contact's last name
+        :type last_name: :obj:`str`
+
+        :param vcard: Additional data about the contact in the form of a vCard, 0-2048 bytes
+        :type vcard: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard,
+            custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :class:`telebot.types.InlineKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardMarkup` or :class:`telebot.types.ReplyKeyboardRemove`
+            or :class:`telebot.types.ForceReply`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified
+            replied-to messages is not found.
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: The thread to which the message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        return types.Message.de_json(
+            await asyncio_helper.send_contact(
+                self.token, chat_id, phone_number, first_name, last_name, vcard,
+                disable_notification, reply_to_message_id, reply_markup, timeout,
+                allow_sending_without_reply, protect_content, message_thread_id)
+        )
+
+    async def send_chat_action(
+            self, chat_id: Union[int, str], action: str, timeout: Optional[int]=None, message_thread_id: Optional[int]=None) -> bool:
+        """
+        Use this method when you need to tell the user that something is happening on the bot's side.
+        The status is set for 5 seconds or less (when a message arrives from your bot, Telegram clients clear its typing status).
+        Returns True on success.
+
+        Example: The ImageBot needs some time to process a request and upload the image. Instead of sending a text message along the lines of
+        “Retrieving image, please wait…”, the bot may use sendChatAction with action = upload_photo. The user will see a “sending photo” status for the bot.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendchataction
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` or :obj:`str`
+        
+        :param action: Type of action to broadcast. Choose one, depending on what the user is about
+            to receive: typing for text messages, upload_photo for photos, record_video or upload_video
+            for videos, record_voice or upload_voice for voice notes, upload_document for general files,
+            choose_sticker for stickers, find_location for location data, record_video_note or upload_video_note for video notes.
+        :type action: :obj:`str`
+
+        :param timeout: Timeout in seconds for the request.
+        :type timeout: :obj:`int`
+
+        :param message_thread_id: The thread to which the message will be sent(supergroups only)
+        :type message_thread_id: :obj:`int`
+
+        :return: Returns True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.send_chat_action(self.token, chat_id, action, timeout, message_thread_id)
+
+    async def kick_chat_member(
+            self, chat_id: Union[int, str], user_id: int, 
+            until_date:Optional[Union[int, datetime]]=None, 
+            revoke_messages: Optional[bool]=None) -> bool:
+        """
+        This function is deprecated. Use `ban_chat_member` instead
+        """
+        logger.info('kick_chat_member is deprecated. Use ban_chat_member instead.')
+        return await asyncio_helper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
+
+    async def ban_chat_member(
+            self, chat_id: Union[int, str], user_id: int, 
+            until_date:Optional[Union[int, datetime]]=None, 
+            revoke_messages: Optional[bool]=None) -> bool:
+        """
+        Use this method to ban a user in a group, a supergroup or a channel. 
+        In the case of supergroups and channels, the user will not be able to return to the chat on their 
+        own using invite links, etc., unless unbanned first. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#banchatmember
+
+        :param chat_id: Unique identifier for the target group or username of the target supergroup
+            or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param until_date: Date when the user will be unbanned, unix time. If user is banned for more than 366 days or
+               less than 30 seconds from the current time they are considered to be banned forever
+        :type until_date: :obj:`int` or :obj:`datetime`
+
+        :param revoke_messages: Bool: Pass True to delete all messages from the chat for the user that is being removed.
+            If False, the user will be able to see messages in the group that were sent before the user was removed. 
+            Always True for supergroups and channels.
+        :type revoke_messages: :obj:`bool`
+        
+        :return: Returns True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.ban_chat_member(self.token, chat_id, user_id, until_date, revoke_messages)
+
+    async def unban_chat_member(
+            self, chat_id: Union[int, str], user_id: int, 
+            only_if_banned: Optional[bool]=False) -> bool:
+        """
+        Use this method to unban a previously kicked user in a supergroup or channel.
+        The user will not return to the group or channel automatically, but will be able to join via link, etc.
+        The bot must be an administrator for this to work. By default, this method guarantees that after the call
+        the user is not a member of the chat, but will be able to join it. So if the user is a member of the chat
+        they will also be removed from the chat. If you don't want this, use the parameter only_if_banned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unbanchatmember
+
+        :param chat_id: Unique identifier for the target group or username of the target supergroup or channel
+            (in the format @username)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param only_if_banned: Do nothing if the user is not banned
+        :type only_if_banned: :obj:`bool`
+
+        :return: True on success
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.unban_chat_member(self.token, chat_id, user_id, only_if_banned)
+
+    async def restrict_chat_member(
+            self, chat_id: Union[int, str], user_id: int, 
+            until_date: Optional[Union[int, datetime]]=None,
+            can_send_messages: Optional[bool]=None, 
+            can_send_media_messages: Optional[bool]=None,
+            can_send_polls: Optional[bool]=None, 
+            can_send_other_messages: Optional[bool]=None,
+            can_add_web_page_previews: Optional[bool]=None, 
+            can_change_info: Optional[bool]=None,
+            can_invite_users: Optional[bool]=None, 
+            can_pin_messages: Optional[bool]=None) -> bool:
+        """
+        Use this method to restrict a user in a supergroup.
+        The bot must be an administrator in the supergroup for this to work and must have
+        the appropriate admin rights. Pass True for all boolean parameters to lift restrictions from a user.
+
+        Telegram documentation: https://core.telegram.org/bots/api#restrictchatmember
+
+        :param chat_id: Unique identifier for the target group or username of the target supergroup
+            or channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param until_date: Date when restrictions will be lifted for the user, unix time.
+            If user is restricted for more than 366 days or less than 30 seconds from the current time,
+            they are considered to be restricted forever
+        :type until_date: :obj:`int` or :obj:`datetime`
+
+        :param can_send_messages: Pass True, if the user can send text messages, contacts, locations and venues
+        :type can_send_messages: :obj:`bool`
+        
+        :param can_send_media_messages: Pass True, if the user can send audios, documents, photos, videos, video notes
+            and voice notes, implies can_send_messages
+        :type can_send_media_messages: :obj:`bool`
+        
+        :param can_send_polls: Pass True, if the user is allowed to send polls, implies can_send_messages
+        :type can_send_polls: :obj:`bool`
+
+        :param can_send_other_messages: Pass True, if the user can send animations, games, stickers and use inline bots, implies can_send_media_messages
+        :type can_send_other_messages: :obj:`bool`
+
+        :param can_add_web_page_previews: Pass True, if the user may add web page previews to their messages,
+            implies can_send_media_messages
+        :type can_add_web_page_previews: :obj:`bool`
+
+        :param can_change_info: Pass True, if the user is allowed to change the chat title, photo and other settings.
+            Ignored in public supergroups
+        :type can_change_info: :obj:`bool`
+
+        :param can_invite_users: Pass True, if the user is allowed to invite new users to the chat,
+            implies can_invite_users
+        :type can_invite_users: :obj:`bool`
+
+        :param can_pin_messages: Pass True, if the user is allowed to pin messages. Ignored in public supergroups
+        :type can_pin_messages: :obj:`bool`
+
+        :return: True on success
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.restrict_chat_member(
+            self.token, chat_id, user_id, until_date,
+            can_send_messages, can_send_media_messages,
+            can_send_polls, can_send_other_messages,
+            can_add_web_page_previews, can_change_info,
+            can_invite_users, can_pin_messages)
+
+    async def promote_chat_member(
+            self, chat_id: Union[int, str], user_id: int, 
+            can_change_info: Optional[bool]=None, 
+            can_post_messages: Optional[bool]=None,
+            can_edit_messages: Optional[bool]=None, 
+            can_delete_messages: Optional[bool]=None, 
+            can_invite_users: Optional[bool]=None,
+            can_restrict_members: Optional[bool]=None, 
+            can_pin_messages: Optional[bool]=None, 
+            can_promote_members: Optional[bool]=None,
+            is_anonymous: Optional[bool]=None, 
+            can_manage_chat: Optional[bool]=None, 
+            can_manage_video_chats: Optional[bool]=None,
+            can_manage_voice_chats: Optional[bool]=None,
+            can_manage_topics: Optional[bool]=None) -> bool:
+        """
+        Use this method to promote or demote a user in a supergroup or a channel. The bot must be an administrator
+        in the chat for this to work and must have the appropriate admin rights.
+        Pass False for all boolean parameters to demote a user.
+
+        Telegram documentation: https://core.telegram.org/bots/api#promotechatmember
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (
+            in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param can_change_info: Pass True, if the administrator can change chat title, photo and other settings
+        :type can_change_info: :obj:`bool`
+
+        :param can_post_messages: Pass True, if the administrator can create channel posts, channels only
+        :type can_post_messages: :obj:`bool`
+
+        :param can_edit_messages: Pass True, if the administrator can edit messages of other users, channels only
+        :type can_edit_messages: :obj:`bool`
+
+        :param can_delete_messages: Pass True, if the administrator can delete messages of other users
+        :type can_delete_messages: :obj:`bool`
+
+        :param can_invite_users: Pass True, if the administrator can invite new users to the chat
+        :type can_invite_users: :obj:`bool`
+
+        :param can_restrict_members: Pass True, if the administrator can restrict, ban or unban chat members
+        :type can_restrict_members: :obj:`bool`
+
+        :param can_pin_messages: Pass True, if the administrator can pin messages, supergroups only
+        :type can_pin_messages: :obj:`bool`
+
+        :param can_promote_members: Pass True, if the administrator can add new administrators with a subset
+            of his own privileges or demote administrators that he has promoted, directly or indirectly
+            (promoted by administrators that were appointed by him)
+        :type can_promote_members: :obj:`bool`
+
+        :param is_anonymous: Pass True, if the administrator's presence in the chat is hidden
+        :type is_anonymous: :obj:`bool`
+
+        :param can_manage_chat: Pass True, if the administrator can access the chat event log, chat statistics, 
+            message statistics in channels, see channel members, 
+            see anonymous administrators in supergroups and ignore slow mode. 
+            Implied by any other administrator privilege
+        :type can_manage_chat: :obj:`bool`
+
+        :param can_manage_video_chats: Pass True, if the administrator can manage voice chats
+            For now, bots can use this privilege only for passing to other administrators.
+        :type can_manage_video_chats: :obj:`bool`
+
+        :param can_manage_voice_chats: Deprecated, use can_manage_video_chats.
+        :type can_manage_voice_chats: :obj:`bool`
+
+        :param can_manage_topics: Pass True if the user is allowed to create, rename, close,
+            and reopen forum topics, supergroups only
+        :type can_manage_topics: :obj:`bool`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+
+        if can_manage_voice_chats is not None:
+            logger.warning("promote_chat_member: can_manage_voice_chats parameter is deprecated. Use can_manage_video_chats instead.")
+            if can_manage_video_chats is None:
+                can_manage_video_chats = can_manage_voice_chats
+
+        return await asyncio_helper.promote_chat_member(
+            self.token, chat_id, user_id, can_change_info, can_post_messages,
+            can_edit_messages, can_delete_messages, can_invite_users,
+            can_restrict_members, can_pin_messages, can_promote_members,
+            is_anonymous, can_manage_chat, can_manage_video_chats, can_manage_topics)
+
+    async def set_chat_administrator_custom_title(
+            self, chat_id: Union[int, str], user_id: int, custom_title: str) -> bool:
+        """
+        Use this method to set a custom title for an administrator in a supergroup promoted by the bot.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchatadministratorcustomtitle
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup
+            (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int`
+
+        :param custom_title: New custom title for the administrator;
+            0-16 characters, emoji are not allowed
+        :type custom_title: :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_administrator_custom_title(self.token, chat_id, user_id, custom_title)
+
+
+    async def ban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to ban a channel chat in a supergroup or a channel.
+        The owner of the chat will not be able to send messages and join live 
+        streams on behalf of the chat, unless it is unbanned first. 
+        The bot must be an administrator in the supergroup or channel 
+        for this to work and must have the appropriate administrator rights. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#banchatsenderchat
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param sender_chat_id: Unique identifier of the target sender chat
+        :type sender_chat_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.ban_chat_sender_chat(self.token, chat_id, sender_chat_id)
+
+    async def unban_chat_sender_chat(self, chat_id: Union[int, str], sender_chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to unban a previously banned channel chat in a supergroup or channel. 
+        The bot must be an administrator for this to work and must have the appropriate 
+        administrator rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unbanchatsenderchat
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param sender_chat_id: Unique identifier of the target sender chat.
+        :type sender_chat_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.unban_chat_sender_chat(self.token, chat_id, sender_chat_id)
+
+    async def set_chat_permissions(
+            self, chat_id: Union[int, str], permissions: types.ChatPermissions) -> bool:
+        """
+        Use this method to set default chat permissions for all members.
+        The bot must be an administrator in the group or a supergroup for this to work
+        and must have the can_restrict_members admin rights.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchatpermissions
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup
+            (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param permissions: New default chat permissions
+        :type permissions: :class:`telebot.types..ChatPermissions`
+
+        :return: True on success
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_permissions(self.token, chat_id, permissions)
+
+    async def create_chat_invite_link(
+            self, chat_id: Union[int, str],
+            name: Optional[str]=None,
+            expire_date: Optional[Union[int, datetime]]=None, 
+            member_limit: Optional[int]=None,
+            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
+        """
+        Use this method to create an additional invite link for a chat. The bot must be an administrator in the chat for this to work and
+        must have the appropriate administrator rights.
+        The link can be revoked using the method revokeChatInviteLink.
+        Returns the new invite link as ChatInviteLink object.
+
+        Telegram documentation: https://core.telegram.org/bots/api#createchatinvitelink
+
+        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param name: Invite link name; 0-32 characters
+        :type name: :obj:`str`
+
+        :param expire_date: Point in time (Unix timestamp) when the link will expire
+        :type expire_date: :obj:`int` or :obj:`datetime`
+
+        :param member_limit: Maximum number of users that can be members of the chat simultaneously
+        :type member_limit: :obj:`int`
+
+        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
+        :type creates_join_request: :obj:`bool`
+
+        :return: Returns the new invite link as ChatInviteLink object.
+        :rtype: :class:`telebot.types.ChatInviteLink`
+        """
+        return types.ChatInviteLink.de_json(
+            await asyncio_helper.create_chat_invite_link(self.token, chat_id, name, expire_date, member_limit, creates_join_request)
+        )
+
+    async def edit_chat_invite_link(
+            self, chat_id: Union[int, str],
+            invite_link: Optional[str] = None,
+            name: Optional[str]=None,
+            expire_date: Optional[Union[int, datetime]]=None,
+            member_limit: Optional[int]=None,
+            creates_join_request: Optional[bool]=None) -> types.ChatInviteLink:
+        """
+        Use this method to edit a non-primary invite link created by the bot.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editchatinvitelink
+
+        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param name: Invite link name; 0-32 characters
+        :type name: :obj:`str`
+
+        :param invite_link: The invite link to edit
+        :type invite_link: :obj:`str`
+
+        :param expire_date: Point in time (Unix timestamp) when the link will expire
+        :type expire_date: :obj:`int` or :obj:`datetime`
+
+        :param member_limit: Maximum number of users that can be members of the chat simultaneously
+        :type member_limit: :obj:`int`
+
+        :param creates_join_request: True, if users joining the chat via the link need to be approved by chat administrators. If True, member_limit can't be specified
+        :type creates_join_request: :obj:`bool`
+
+        :return: Returns the new invite link as ChatInviteLink object.
+        :rtype: :class:`telebot.types.ChatInviteLink`
+        """
+        return types.ChatInviteLink.de_json(
+            await asyncio_helper.edit_chat_invite_link(self.token, chat_id, name, invite_link, expire_date, member_limit, creates_join_request)
+        )
+
+    async def revoke_chat_invite_link(
+            self, chat_id: Union[int, str], invite_link: str) -> types.ChatInviteLink:
+        """
+        Use this method to revoke an invite link created by the bot.
+        Note: If the primary link is revoked, a new link is automatically generated The bot must be an administrator 
+        in the chat for this to work and must have the appropriate admin rights.
+
+        Telegram documentation: https://core.telegram.org/bots/api#revokechatinvitelink
+
+        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param invite_link: The invite link to revoke
+        :type invite_link: :obj:`str`
+
+        :return: Returns the new invite link as ChatInviteLink object.
+        :rtype: :class:`telebot.types.ChatInviteLink`
+        """
+        return types.ChatInviteLink.de_json(
+            await asyncio_helper.revoke_chat_invite_link(self.token, chat_id, invite_link)
+        )
+
+    async def export_chat_invite_link(self, chat_id: Union[int, str]) -> str:
+        """
+        Use this method to export an invite link to a supergroup or a channel. The bot must be an administrator
+        in the chat for this to work and must have the appropriate admin rights.
+
+        Telegram documentation: https://core.telegram.org/bots/api#exportchatinvitelink
+
+        :param chat_id: Id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: exported invite link as String on success.
+        :rtype: :obj:`str`
+        """
+        return await asyncio_helper.export_chat_invite_link(self.token, chat_id)
+
+
+    async def approve_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
+        """
+        Use this method to approve a chat join request. 
+        The bot must be an administrator in the chat for this to work and must have
+        the can_invite_users administrator right. Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#approvechatjoinrequest
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup
+            (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.approve_chat_join_request(self.token, chat_id, user_id)
+
+    async def decline_chat_join_request(self, chat_id: Union[str, int], user_id: Union[int, str]) -> bool:
+        """
+        Use this method to decline a chat join request. 
+        The bot must be an administrator in the chat for this to work and must have
+        the can_invite_users administrator right. Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#declinechatjoinrequest
+
+        :param chat_id: Unique identifier for the target chat or username of the target supergroup
+            (in the format @supergroupusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param user_id: Unique identifier of the target user
+        :type user_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.decline_chat_join_request(self.token, chat_id, user_id)
+
+    async def set_chat_photo(self, chat_id: Union[int, str], photo: Any) -> bool:
+        """
+        Use this method to set a new profile photo for the chat. Photos can't be changed for private chats.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
+        setting is off in the target group.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchatphoto
+
+        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param photo: InputFile: New chat photo, uploaded using multipart/form-data
+        :type photo: :obj:`typing.Union[file_like, str]`
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_photo(self.token, chat_id, photo)
+
+    async def delete_chat_photo(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to delete a chat photo. Photos can't be changed for private chats.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’ setting is off in the target group.
+
+        Telegram documentation: https://core.telegram.org/bots/api#deletechatphoto
+
+        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_chat_photo(self.token, chat_id)
+    
+    async def get_my_commands(self, scope: Optional[types.BotCommandScope], 
+            language_code: Optional[str]) -> List[types.BotCommand]:
+        """
+        Use this method to get the current list of the bot's commands. 
+        Returns List of BotCommand on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getmycommands
+
+        :param scope: The scope of users for which the commands are relevant. 
+            Defaults to BotCommandScopeDefault.
+        :type scope: :class:`telebot.types.BotCommandScope`
+
+        :param language_code: A two-letter ISO 639-1 language code. If empty, 
+            commands will be applied to all users from the given scope, 
+            for whose language there are no dedicated commands
+        :type language_code: :obj:`str`
+
+        :return: List of BotCommand on success.
+        :rtype: :obj:`list` of :class:`telebot.types.BotCommand`
+        """
+        result = await asyncio_helper.get_my_commands(self.token, scope, language_code)
+        return [types.BotCommand.de_json(cmd) for cmd in result]
+
+    async def set_chat_menu_button(self, chat_id: Union[int, str]=None, 
+                menu_button: types.MenuButton=None) -> bool:
+        """
+        Use this method to change the bot's menu button in a private chat, 
+        or the default menu button. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchatmenubutton
+
+        :param chat_id: Unique identifier for the target private chat. 
+            If not specified, default bot's menu button will be changed.
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param menu_button: A JSON-serialized object for the new bot's menu button. Defaults to MenuButtonDefault
+        :type menu_button: :class:`telebot.types.MenuButton`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_menu_button(self.token, chat_id, menu_button)
+
+
+    async def get_chat_menu_button(self, chat_id: Union[int, str]=None) -> types.MenuButton:
+        """
+        Use this method to get the current value of the bot's menu button
+        in a private chat, or the default menu button.
+        Returns MenuButton on success.
+
+        Telegram Documentation: https://core.telegram.org/bots/api#getchatmenubutton
+
+        :param chat_id: Unique identifier for the target private chat.
+            If not specified, default bot's menu button will be returned.
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: types.MenuButton
+        :rtype: :class:`telebot.types.MenuButton`
+        """
+        return types.MenuButton.de_json(await asyncio_helper.get_chat_menu_button(self.token, chat_id))
+
+
+    async def set_my_default_administrator_rights(self, rights: types.ChatAdministratorRights=None, 
+                                    for_channels: bool=None) -> bool:
+        """
+        Use this method to change the default administrator rights requested by the bot
+        when it's added as an administrator to groups or channels.
+        These rights will be suggested to users, but they are are free to modify
+        the list before adding the bot. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setmydefaultadministratorrights
+
+        :param rights: A JSON-serialized object describing new default administrator rights. If not specified,
+            the default administrator rights will be cleared.
+        :type rights: :class:`telebot.types.ChatAdministratorRights`
+
+        :param for_channels: Pass True to change the default administrator rights of the bot in channels.
+            Otherwise, the default administrator rights of the bot for groups and supergroups will be changed.
+        :type for_channels: :obj:`bool`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+
+        return await asyncio_helper.set_my_default_administrator_rights(self.token, rights, for_channels)
+        
+
+    async def get_my_default_administrator_rights(self, for_channels: bool=None) -> types.ChatAdministratorRights:
+        """
+        Use this method to get the current default administrator rights of the bot.
+        Returns ChatAdministratorRights on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getmydefaultadministratorrights
+
+        :param for_channels: Pass True to get the default administrator rights of the bot in channels. Otherwise, the default administrator rights of the bot for groups and supergroups will be returned.
+        :type for_channels: :obj:`bool`
+
+        :return: Returns ChatAdministratorRights on success.
+        :rtype: :class:`telebot.types.ChatAdministratorRights`
+        """
+        
+        return types.ChatAdministratorRights.de_json(await asyncio_helper.get_my_default_administrator_rights(self.token, for_channels))
+
+    async def set_my_commands(self, commands: List[types.BotCommand], 
+            scope: Optional[types.BotCommandScope]=None,
+            language_code: Optional[str]=None) -> bool:
+        """
+        Use this method to change the list of the bot's commands.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setmycommands
+
+        :param commands: List of BotCommand. At most 100 commands can be specified.
+        :type commands: :obj:`list` of :class:`telebot.types.BotCommand`
+
+        :param scope: The scope of users for which the commands are relevant. 
+            Defaults to BotCommandScopeDefault.
+        :type scope: :class:`telebot.types.BotCommandScope`
+
+        :param language_code: A two-letter ISO 639-1 language code. If empty, 
+            commands will be applied to all users from the given scope, 
+            for whose language there are no dedicated commands
+        :type language_code: :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_my_commands(self.token, commands, scope, language_code)
+    
+    async def delete_my_commands(self, scope: Optional[types.BotCommandScope]=None, 
+            language_code: Optional[int]=None) -> bool:
+        """
+        Use this method to delete the list of the bot's commands for the given scope and user language. 
+        After deletion, higher level commands will be shown to affected users. 
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#deletemycommands
+        
+        :param scope: The scope of users for which the commands are relevant. 
+            Defaults to BotCommandScopeDefault.
+        :type scope: :class:`telebot.types.BotCommandScope`
+
+        :param language_code: A two-letter ISO 639-1 language code. If empty, 
+            commands will be applied to all users from the given scope, 
+            for whose language there are no dedicated commands
+        :type language_code: :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_my_commands(self.token, scope, language_code)
+
+    async def set_chat_title(self, chat_id: Union[int, str], title: str) -> bool:
+        """
+        Use this method to change the title of a chat. Titles can't be changed for private chats.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+        Note: In regular groups (non-supergroups), this method will only work if the ‘All Members Are Admins’
+        setting is off in the target group.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchattitle
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param title: New chat title, 1-255 characters
+        :type title: :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_title(self.token, chat_id, title)
+
+    async def set_chat_description(self, chat_id: Union[int, str], description: Optional[str]=None) -> bool:
+        """
+        Use this method to change the description of a supergroup or a channel.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setchatdescription
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param description: Str: New chat description, 0-255 characters
+        :type description: :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_chat_description(self.token, chat_id, description)
+
+    async def pin_chat_message(
+            self, chat_id: Union[int, str], message_id: int, 
+            disable_notification: Optional[bool]=False) -> bool:
+        """
+        Use this method to pin a message in a supergroup.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#pinchatmessage
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Identifier of a message to pin
+        :type message_id: :obj:`int`
+
+        :param disable_notification: Pass True, if it is not necessary to send a notification
+            to all group members about the new pinned message
+        :type disable_notification: :obj:`bool`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+
+        return await asyncio_helper.pin_chat_message(self.token, chat_id, message_id, disable_notification)
+
+    async def unpin_chat_message(self, chat_id: Union[int, str], message_id: Optional[int]=None) -> bool:
+        """
+        Use this method to unpin specific pinned message in a supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unpinchatmessage
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Int: Identifier of a message to unpin
+        :type message_id: :obj:`int`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.unpin_chat_message(self.token, chat_id, message_id)
+
+    async def unpin_all_chat_messages(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to unpin a all pinned messages in a supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have the appropriate admin rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unpinallchatmessages
+
+        :param chat_id: Int or Str: Unique identifier for the target chat or username of the target channel
+            (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :return: True on success.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.unpin_all_chat_messages(self.token, chat_id)
+
+    async def edit_message_text(
+            self, text: str, 
+            chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None, 
+            inline_message_id: Optional[str]=None, 
+            parse_mode: Optional[str]=None,
+            entities: Optional[List[types.MessageEntity]]=None,
+            disable_web_page_preview: Optional[bool]=None,
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+        """
+        Use this method to edit text and game messages.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editmessagetext
+
+        :param text: New text of the message, 1-4096 characters after entities parsing
+        :type text: :obj:`str`
+
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :param parse_mode: Mode for parsing entities in the message text.
+        :type parse_mode: :obj:`str`
+
+        :param entities: List of special entities that appear in the message text, which can be specified instead of parse_mode
+        :type entities: List of :obj:`telebot.types.MessageEntity`
+
+        :param disable_web_page_preview: Disables link previews for links in this message
+        :type disable_web_page_preview: :obj:`bool`
+
+        :param reply_markup: A JSON-serialized object for an inline keyboard.
+        :type reply_markup: :obj:`InlineKeyboardMarkup`
+
+        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
+        :rtype: :obj:`types.Message` or :obj:`bool`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+        disable_web_page_preview = self.disable_web_page_preview if (disable_web_page_preview is None) else disable_web_page_preview
+
+        result = await asyncio_helper.edit_message_text(self.token, text, chat_id, message_id, inline_message_id, parse_mode,
+                                             entities, disable_web_page_preview, reply_markup)
+        if type(result) == bool:  # if edit inline message return is bool not Message.
+            return result
+        return types.Message.de_json(result)
+
+    async def edit_message_media(
+            self, media: Any, chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+        """
+        Use this method to edit animation, audio, document, photo, or video messages.
+        If a message is a part of a message album, then it can be edited only to a photo or a video.
+        Otherwise, message type can be changed arbitrarily. When inline message is edited, new file can't be uploaded.
+        Use previously uploaded file via its file_id or specify a URL.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editmessagemedia
+
+        :param media: A JSON-serialized object for a new media content of the message
+        :type media: :obj:`InputMedia`
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message 
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :param reply_markup: A JSON-serialized object for an inline keyboard.
+        :type reply_markup: :obj:`telebot.types.InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
+
+        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
+        :rtype: :obj:`types.Message` or :obj:`bool`
+        """
+        result = await asyncio_helper.edit_message_media(self.token, media, chat_id, message_id, inline_message_id, reply_markup)
+        if type(result) == bool:  # if edit inline message return is bool not Message.
+            return result
+        return types.Message.de_json(result)
+
+    async def edit_message_reply_markup(
+            self, chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None,
+            inline_message_id: Optional[str]=None, 
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+        """
+        Use this method to edit only the reply markup of messages.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editmessagereplymarkup
+
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :param reply_markup: A JSON-serialized object for an inline keyboard.
+        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
+
+        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
+        :rtype: :obj:`types.Message` or :obj:`bool`
+        """
+        result = await asyncio_helper.edit_message_reply_markup(self.token, chat_id, message_id, inline_message_id, reply_markup)
+        if type(result) == bool:
+            return result
+        return types.Message.de_json(result)
+
+    async def send_game(
+            self, chat_id: Union[int, str], game_short_name: str, 
+            disable_notification: Optional[bool]=None,
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Used to send the game.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendgame
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param game_short_name: Short name of the game, serves as the unique identifier for the game. Set up your games via @BotFather.
+        :type game_short_name: :obj:`str`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message 
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard, instructions to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :obj:`InlineKeyboardMarkup` or :obj:`ReplyKeyboardMarkup` or :obj:`ReplyKeyboardRemove` or :obj:`ForceReply`
+
+        :param timeout: Timeout in seconds for waiting for a response from the bot.
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if one of the specified replied-to messages is not found.
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param protect_content: Pass True, if content of the message needs to be protected from being viewed by the bot.
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: Identifier of the thread to which the message will be sent.
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :obj:`types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        result = await asyncio_helper.send_game(
+            self.token, chat_id, game_short_name, disable_notification,
+            reply_to_message_id, reply_markup, timeout, 
+            allow_sending_without_reply, protect_content, message_thread_id)
+        return types.Message.de_json(result)
+
+    async def set_game_score(
+            self, user_id: Union[int, str], score: int, 
+            force: Optional[bool]=None, 
+            chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None, 
+            inline_message_id: Optional[str]=None,
+            disable_edit_message: Optional[bool]=None) -> Union[types.Message, bool]:
+        """
+        Sets the value of points in the game to a specific user.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setgamescore
+
+        :param user_id: User identifier
+        :type user_id: :obj:`int` or :obj:`str`
+
+        :param score: New score, must be non-negative
+        :type score: :obj:`int`
+
+        :param force: Pass True, if the high score is allowed to decrease. This can be useful when fixing mistakes or banning cheaters
+        :type force: :obj:`bool`
+
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :param disable_edit_message: Pass True, if the game message should not be automatically edited to include the current scoreboard
+        :type disable_edit_message: :obj:`bool`
+
+        :return: On success, if the message was sent by the bot, returns the edited Message, otherwise returns True.
+        :rtype: :obj:`types.Message` or :obj:`bool`
+        """
+        result = await asyncio_helper.set_game_score(self.token, user_id, score, force, disable_edit_message, chat_id,
+                                          message_id, inline_message_id)
+        if type(result) == bool:
+            return result
+        return types.Message.de_json(result)
+
+    async def get_game_high_scores(
+            self, user_id: int, chat_id: Optional[Union[int, str]]=None,
+            message_id: Optional[int]=None, 
+            inline_message_id: Optional[str]=None) -> List[types.GameHighScore]:
+        """
+        Use this method to get data for high score tables. Will return the score of the specified user and several of
+        their neighbors in a game. On success, returns an Array of GameHighScore objects.
+
+        This method will currently return scores for the target user, plus two of their closest neighbors on each side.
+        Will also return the top three users if the user and their neighbors are not among them.
+        Please note that this behavior is subject to change.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getgamehighscores
+
+        :param user_id: User identifier
+        :type user_id: :obj:`int`
+
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified. Identifier of the sent message
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if chat_id and message_id are not specified. Identifier of the inline message
+        :type inline_message_id: :obj:`str`
+
+        :return: On success, returns an Array of GameHighScore objects.
+        :rtype: List[types.GameHighScore]
+        """
+        result = await asyncio_helper.get_game_high_scores(self.token, user_id, chat_id, message_id, inline_message_id)
+        return [types.GameHighScore.de_json(r) for r in result]
+
+    async def send_invoice(
+            self, chat_id: Union[int, str], title: str, description: str, 
+            invoice_payload: str, provider_token: str, currency: str, 
+            prices: List[types.LabeledPrice], start_parameter: Optional[str]=None, 
+            photo_url: Optional[str]=None, photo_size: Optional[int]=None, 
+            photo_width: Optional[int]=None, photo_height: Optional[int]=None,
+            need_name: Optional[bool]=None, need_phone_number: Optional[bool]=None, 
+            need_email: Optional[bool]=None, need_shipping_address: Optional[bool]=None,
+            send_phone_number_to_provider: Optional[bool]=None, 
+            send_email_to_provider: Optional[bool]=None, 
+            is_flexible: Optional[bool]=None,
+            disable_notification: Optional[bool]=None, 
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            provider_data: Optional[str]=None, 
+            timeout: Optional[int]=None,
+            allow_sending_without_reply: Optional[bool]=None,
+            max_tip_amount: Optional[int] = None,
+            suggested_tip_amounts: Optional[List[int]]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Sends invoice.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendinvoice
+
+        :param chat_id: Unique identifier for the target private chat
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param title: Product name, 1-32 characters
+        :type title: :obj:`str`
+
+        :param description: Product description, 1-255 characters
+        :type description: :obj:`str`
+
+        :param invoice_payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
+            use for your internal processes.
+        :type invoice_payload: :obj:`str`
+
+        :param provider_token: Payments provider token, obtained via @Botfather
+        :type provider_token: :obj:`str`
+
+        :param currency: Three-letter ISO 4217 currency code,
+            see https://core.telegram.org/bots/payments#supported-currencies
+        :type currency: :obj:`str`
+
+        :param prices: Price breakdown, a list of components
+            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
+        :type prices: List[:obj:`types.LabeledPrice`]
+
+        :param start_parameter: Unique deep-linking parameter that can be used to generate this invoice
+            when used as a start parameter
+        :type start_parameter: :obj:`str`
+
+        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
+            or a marketing image for a service. People like it better when they see what they are paying for.
+        :type photo_url: :obj:`str`
+
+        :param photo_size: Photo size in bytes
+        :type photo_size: :obj:`int`
+
+        :param photo_width: Photo width 
+        :type photo_width: :obj:`int`
+
+        :param photo_height: Photo height
+        :type photo_height: :obj:`int`
+
+        :param need_name: Pass True, if you require the user's full name to complete the order
+        :type need_name: :obj:`bool`
+
+        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
+        :type need_phone_number: :obj:`bool`
+
+        :param need_email: Pass True, if you require the user's email to complete the order
+        :type need_email: :obj:`bool`
+
+        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
+        :type need_shipping_address: :obj:`bool`
+
+        :param is_flexible: Pass True, if the final price depends on the shipping method
+        :type is_flexible: :obj:`bool`
+
+        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
+        :type send_phone_number_to_provider: :obj:`bool`
+
+        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
+        :type send_email_to_provider: :obj:`bool`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param reply_markup: A JSON-serialized object for an inline keyboard. If empty,
+            one 'Pay total price' button will be shown. If not empty, the first button must be a Pay button
+        :type reply_markup: :obj:`str`
+
+        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
+            A detailed description of required fields should be provided by the payment provider.
+        :type provider_data: :obj:`str`
+
+        :param timeout: Timeout of a request, defaults to None
+        :type timeout: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the message should be sent even if the specified replied-to message is not found
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
+        :type max_tip_amount: :obj:`int`
+
+        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
+            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
+            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
+        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: The identifier of a message thread, in which the invoice message will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :obj:`types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+
+        result = await asyncio_helper.send_invoice(
+            self.token, chat_id, title, description, invoice_payload, provider_token,
+            currency, prices, start_parameter, photo_url, photo_size, photo_width,
+            photo_height, need_name, need_phone_number, need_email, need_shipping_address,
+            send_phone_number_to_provider, send_email_to_provider, is_flexible, disable_notification,
+            reply_to_message_id, reply_markup, provider_data, timeout, allow_sending_without_reply,
+            max_tip_amount, suggested_tip_amounts, protect_content, message_thread_id)
+        return types.Message.de_json(result)
+
+
+    async def create_invoice_link(self,
+            title: str, description: str, payload:str, provider_token: str, 
+            currency: str, prices: List[types.LabeledPrice],
+            max_tip_amount: Optional[int] = None, 
+            suggested_tip_amounts: Optional[List[int]]=None,
+            provider_data: Optional[str]=None,
+            photo_url: Optional[str]=None,
+            photo_size: Optional[int]=None,
+            photo_width: Optional[int]=None,
+            photo_height: Optional[int]=None,
+            need_name: Optional[bool]=None,
+            need_phone_number: Optional[bool]=None,
+            need_email: Optional[bool]=None,
+            need_shipping_address: Optional[bool]=None,
+            send_phone_number_to_provider: Optional[bool]=None,
+            send_email_to_provider: Optional[bool]=None,
+            is_flexible: Optional[bool]=None) -> str:
+            
+        """
+        Use this method to create a link for an invoice. 
+        Returns the created invoice link as String on success.
+
+        Telegram documentation:
+        https://core.telegram.org/bots/api#createinvoicelink
+
+        :param title: Product name, 1-32 characters
+        :type title: :obj:`str`
+
+        :param description: Product description, 1-255 characters
+        :type description: :obj:`str`
+
+        :param payload: Bot-defined invoice payload, 1-128 bytes. This will not be displayed to the user,
+            use for your internal processes.
+        :type payload: :obj:`str`
+
+        :param provider_token: Payments provider token, obtained via @Botfather
+        :type provider_token: :obj:`str`
+
+        :param currency: Three-letter ISO 4217 currency code,
+            see https://core.telegram.org/bots/payments#supported-currencies
+        :type currency: :obj:`str`
+
+        :param prices: Price breakdown, a list of components
+            (e.g. product price, tax, discount, delivery cost, delivery tax, bonus, etc.)
+        :type prices: :obj:`list` of :obj:`types.LabeledPrice`
+
+        :param max_tip_amount: The maximum accepted amount for tips in the smallest units of the currency
+        :type max_tip_amount: :obj:`int`
+
+        :param suggested_tip_amounts: A JSON-serialized array of suggested amounts of tips in the smallest
+            units of the currency.  At most 4 suggested tip amounts can be specified. The suggested tip
+            amounts must be positive, passed in a strictly increased order and must not exceed max_tip_amount.
+        :type suggested_tip_amounts: :obj:`list` of :obj:`int`
+
+        :param provider_data: A JSON-serialized data about the invoice, which will be shared with the payment provider.
+            A detailed description of required fields should be provided by the payment provider.
+        :type provider_data: :obj:`str`
+
+        :param photo_url: URL of the product photo for the invoice. Can be a photo of the goods
+            or a photo of the invoice. People like it better when they see a photo of what they are paying for.
+        :type photo_url: :obj:`str`
+
+        :param photo_size: Photo size in bytes
+        :type photo_size: :obj:`int`
+
+        :param photo_width: Photo width
+        :type photo_width: :obj:`int`
+
+        :param photo_height: Photo height
+        :type photo_height: :obj:`int`
+
+        :param need_name: Pass True, if you require the user's full name to complete the order
+        :type need_name: :obj:`bool`
+
+        :param need_phone_number: Pass True, if you require the user's phone number to complete the order
+        :type need_phone_number: :obj:`bool`
+
+        :param need_email: Pass True, if you require the user's email to complete the order
+        :type need_email: :obj:`bool`
+
+        :param need_shipping_address: Pass True, if you require the user's shipping address to complete the order
+        :type need_shipping_address: :obj:`bool`
+
+        :param send_phone_number_to_provider: Pass True, if user's phone number should be sent to provider
+        :type send_phone_number_to_provider: :obj:`bool`
+
+        :param send_email_to_provider: Pass True, if user's email address should be sent to provider
+        :type send_email_to_provider: :obj:`bool`
+
+        :param is_flexible: Pass True, if the final price depends on the shipping method
+        :type is_flexible: :obj:`bool`
+
+        :return: Created invoice link as String on success.
+        :rtype: :obj:`str`
+        """
+        result = await asyncio_helper.create_invoice_link(
+            self.token, title, description, payload, provider_token,
+            currency, prices, max_tip_amount, suggested_tip_amounts, provider_data,
+            photo_url, photo_size, photo_width, photo_height, need_name, need_phone_number,
+            need_email, need_shipping_address, send_phone_number_to_provider,
+            send_email_to_provider, is_flexible)
+        return result
+
+    # noinspection PyShadowingBuiltins
+    async def send_poll(
+            self, chat_id: Union[int, str], question: str, options: List[str],
+            is_anonymous: Optional[bool]=None, type: Optional[str]=None, 
+            allows_multiple_answers: Optional[bool]=None, 
+            correct_option_id: Optional[int]=None,
+            explanation: Optional[str]=None, 
+            explanation_parse_mode: Optional[str]=None, 
+            open_period: Optional[int]=None, 
+            close_date: Optional[Union[int, datetime]]=None, 
+            is_closed: Optional[bool]=None,
+            disable_notification: Optional[bool]=False,
+            reply_to_message_id: Optional[int]=None, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None, 
+            allow_sending_without_reply: Optional[bool]=None, 
+            timeout: Optional[int]=None,
+            explanation_entities: Optional[List[types.MessageEntity]]=None,
+            protect_content: Optional[bool]=None,
+            message_thread_id: Optional[int]=None) -> types.Message:
+        """
+        Use this method to send a native poll.
+        On success, the sent Message is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#sendpoll
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` | :obj:`str`
+
+        :param question: Poll question, 1-300 characters
+        :type question: :obj:`str`
+
+        :param options: A JSON-serialized list of answer options, 2-10 strings 1-100 characters each
+        :type options: :obj:`list` of :obj:`str`
+
+        :param is_anonymous: True, if the poll needs to be anonymous, defaults to True
+        :type is_anonymous: :obj:`bool`
+
+        :param type: Poll type, “quiz” or “regular”, defaults to “regular”
+        :type type: :obj:`str`
+
+        :param allows_multiple_answers: True, if the poll allows multiple answers, ignored for polls in quiz mode, defaults to False
+        :type allows_multiple_answers: :obj:`bool`
+
+        :param correct_option_id: 0-based identifier of the correct answer option. Available only for polls in quiz mode,
+            defaults to None
+        :type correct_option_id: :obj:`int`
+
+        :param explanation: Text that is shown when a user chooses an incorrect answer or taps on the lamp icon in a quiz-style poll,
+            0-200 characters with at most 2 line feeds after entities parsing
+        :type explanation: :obj:`str`
+
+        :param explanation_parse_mode: Mode for parsing entities in the explanation. See formatting options for more details.
+        :type explanation_parse_mode: :obj:`str`
+
+        :param open_period: Amount of time in seconds the poll will be active after creation, 5-600. Can't be used together with close_date.
+        :type open_period: :obj:`int`
+
+        :param close_date: Point in time (Unix timestamp) when the poll will be automatically closed.
+        :type close_date: :obj:`int` | :obj:`datetime`
+
+        :param is_closed: Pass True, if the poll needs to be immediately closed. This can be useful for poll preview.
+        :type is_closed: :obj:`bool`
+
+        :param disable_notification: Sends the message silently. Users will receive a notification with no sound.
+        :type disable_notification: :obj:`bool`
+
+        :param reply_to_message_id: If the message is a reply, ID of the original message
+        :type reply_to_message_id: :obj:`int`
+
+        :param allow_sending_without_reply: Pass True, if the poll allows multiple options to be voted simultaneously.
+        :type allow_sending_without_reply: :obj:`bool`
+
+        :param reply_markup: Additional interface options. A JSON-serialized object for an inline keyboard, custom reply keyboard,
+            instructions to remove reply keyboard or to force a reply from the user.
+        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
+
+        :param timeout: Timeout in seconds for waiting for a response from the user.
+        :type timeout: :obj:`int`
+
+        :param explanation_entities: A JSON-serialized list of special entities that appear in the explanation,
+            which can be specified instead of parse_mode
+        :type explanation_entities: :obj:`list` of :obj:`MessageEntity`
+
+        :param protect_content: Protects the contents of the sent message from forwarding and saving
+        :type protect_content: :obj:`bool`
+
+        :param message_thread_id: The identifier of a message thread, in which the poll will be sent
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :obj:`types.Message`
+        """
+        disable_notification = self.disable_notification if (disable_notification is None) else disable_notification
+        protect_content = self.protect_content if (protect_content is None) else protect_content
+        allow_sending_without_reply = self.allow_sending_without_reply if (allow_sending_without_reply is None) else allow_sending_without_reply
+        explanation_parse_mode = self.parse_mode if (explanation_parse_mode is None) else explanation_parse_mode
+
+        if isinstance(question, types.Poll):
+            raise RuntimeError("The send_poll signature was changed, please see send_poll function details.")
+
+        return types.Message.de_json(
+            await asyncio_helper.send_poll(
+                self.token, chat_id,
+                question, options,
+                is_anonymous, type, allows_multiple_answers, correct_option_id,
+                explanation, explanation_parse_mode, open_period, close_date, is_closed,
+                disable_notification, reply_to_message_id, allow_sending_without_reply,
+                reply_markup, timeout, explanation_entities, protect_content, message_thread_id))
+
+    async def stop_poll(
+            self, chat_id: Union[int, str], message_id: int, 
+            reply_markup: Optional[REPLY_MARKUP_TYPES]=None) -> types.Poll:
+        """
+        Use this method to stop a poll which was sent by the bot. On success, the stopped Poll is returned.
+
+        Telegram documentation: https://core.telegram.org/bots/api#stoppoll
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` | :obj:`str`
+
+        :param message_id: Identifier of the original message with the poll
+        :type message_id: :obj:`int`
+
+        :param reply_markup: A JSON-serialized object for a new message markup.
+        :type reply_markup: :obj:`InlineKeyboardMarkup` | :obj:`ReplyKeyboardMarkup` | :obj:`ReplyKeyboardRemove` | :obj:`ForceReply`
+
+        :return: On success, the stopped Poll is returned.
+        :rtype: :obj:`types.Poll`
+        """
+        return types.Poll.de_json(await asyncio_helper.stop_poll(self.token, chat_id, message_id, reply_markup))
+
+    async def answer_shipping_query(
+            self, shipping_query_id: str, ok: bool, 
+            shipping_options: Optional[List[types.ShippingOption]]=None, 
+            error_message: Optional[str]=None) -> bool:
+        """
+        Asks for an answer to a shipping question.
+
+        Telegram documentation: https://core.telegram.org/bots/api#answershippingquery
+
+        :param shipping_query_id: Unique identifier for the query to be answered
+        :type shipping_query_id: :obj:`str`
+
+        :param ok: Specify True if delivery to the specified address is possible and False if there are any problems (for example, if delivery to the specified address is not possible)
+        :type ok: :obj:`bool`
+
+        :param shipping_options: Required if ok is True. A JSON-serialized array of available shipping options.
+        :type shipping_options: :obj:`list` of :obj:`ShippingOption`
+
+        :param error_message: Required if ok is False. Error message in human readable form that explains why it is impossible to complete the order
+            (e.g. "Sorry, delivery to your desired address is unavailable'). Telegram will display this message to the user.
+        :type error_message: :obj:`str`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.answer_shipping_query(self.token, shipping_query_id, ok, shipping_options, error_message)
+
+    async def answer_pre_checkout_query(
+            self, pre_checkout_query_id: int, ok: bool, 
+            error_message: Optional[str]=None) -> bool:
+        """
+        Once the user has confirmed their payment and shipping details, the Bot API sends the final confirmation in the form of an Update with the
+        field pre_checkout_query. Use this method to respond to such pre-checkout queries.
+        On success, True is returned.
+
+        .. note::
+            The Bot API must receive an answer within 10 seconds after the pre-checkout query was sent.
+
+        Telegram documentation: https://core.telegram.org/bots/api#answerprecheckoutquery
+
+        :param pre_checkout_query_id: Unique identifier for the query to be answered 
+        :type pre_checkout_query_id: :obj:`int`
+
+        :param ok: Specify True if everything is alright (goods are available, etc.) and the bot is ready to proceed with the order. Use False if there are any problems.
+        :type ok: :obj:`bool`
+
+        :param error_message: Required if ok is False. Error message in human readable form that explains the reason for failure to proceed with the checkout
+            (e.g. "Sorry, somebody just bought the last of our amazing black T-shirts while you were busy filling out your payment details. Please choose a different
+            color or garment!"). Telegram will display this message to the user.
+        :type error_message: :obj:`str`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.answer_pre_checkout_query(self.token, pre_checkout_query_id, ok, error_message)
+
+    async def edit_message_caption(
+            self, caption: str, chat_id: Optional[Union[int, str]]=None, 
+            message_id: Optional[int]=None, 
+            inline_message_id: Optional[str]=None,
+            parse_mode: Optional[str]=None, 
+            caption_entities: Optional[List[types.MessageEntity]]=None,
+            reply_markup: Optional[types.InlineKeyboardMarkup]=None) -> Union[types.Message, bool]:
+        """
+        Use this method to edit captions of messages.
+
+        Telegram documentation: https://core.telegram.org/bots/api#editmessagecaption
+
+        :param caption: New caption of the message
+        :type caption: :obj:`str`
+
+        :param chat_id: Required if inline_message_id is not specified. Unique identifier for the target chat or username of the target channel
+        :type chat_id: :obj:`int` | :obj:`str`
+
+        :param message_id: Required if inline_message_id is not specified.
+        :type message_id: :obj:`int`
+
+        :param inline_message_id: Required if inline_message_id is not specified. Identifier of the inline message.
+        :type inline_message_id: :obj:`str`
+
+        :param parse_mode: New caption of the message, 0-1024 characters after entities parsing
+        :type parse_mode: :obj:`str`
+
+        :param caption_entities: A JSON-serialized array of objects that describe how the caption should be parsed.
+        :type caption_entities: :obj:`list` of :obj:`types.MessageEntity`
+
+        :param reply_markup: A JSON-serialized object for an inline keyboard.
+        :type reply_markup: :obj:`InlineKeyboardMarkup`
+
+        :return: On success, if edited message is sent by the bot, the edited Message is returned, otherwise True is returned.
+        :rtype: :obj:`types.Message` | :obj:`bool`
+        """
+        parse_mode = self.parse_mode if (parse_mode is None) else parse_mode
+
+        result = await asyncio_helper.edit_message_caption(self.token, caption, chat_id, message_id, inline_message_id,
+                                                parse_mode, caption_entities, reply_markup)
+        if type(result) == bool:
+            return result
+        return types.Message.de_json(result)
+
+    async def reply_to(self, message: types.Message, text: str, **kwargs) -> types.Message:
+        """
+        Convenience function for `send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)`
+        
+        :param message: Instance of :class:`telebot.types.Message`
+        :type message: :obj:`types.Message`
+
+        :param text: Text of the message.
+        :type text: :obj:`str`
+
+        :param kwargs: Additional keyword arguments which are passed to :meth:`telebot.TeleBot.send_message`
+
+        :return: On success, the sent Message is returned.
+        :rtype: :class:`telebot.types.Message`
+        """
+        return await self.send_message(message.chat.id, text, reply_to_message_id=message.message_id, **kwargs)
+
+    async def answer_inline_query(
+            self, inline_query_id: str, 
+            results: List[Any], 
+            cache_time: Optional[int]=None, 
+            is_personal: Optional[bool]=None, 
+            next_offset: Optional[str]=None,
+            switch_pm_text: Optional[str]=None, 
+            switch_pm_parameter: Optional[str]=None) -> bool:
+        """
+        Use this method to send answers to an inline query. On success, True is returned.
+        No more than 50 results per query are allowed.
+
+        Telegram documentation: https://core.telegram.org/bots/api#answerinlinequery
+
+        :param inline_query_id: Unique identifier for the answered query
+        :type inline_query_id: :obj:`str`
+
+        :param results: Array of results for the inline query
+        :type results: :obj:`list` of :obj:`types.InlineQueryResult`
+
+        :param cache_time: The maximum amount of time in seconds that the result of the inline query
+            may be cached on the server.
+        :type cache_time: :obj:`int`
+
+        :param is_personal: Pass True, if results may be cached on the server side only for
+            the user that sent the query.
+        :type is_personal: :obj:`bool`
+
+        :param next_offset: Pass the offset that a client should send in the next query with the same text
+            to receive more results.
+        :type next_offset: :obj:`str`
+
+        :param switch_pm_parameter: Deep-linking parameter for the /start message sent to the bot when user presses the switch button. 1-64 characters,
+            only A-Z, a-z, 0-9, _ and - are allowed.
+            Example: An inline bot that sends YouTube videos can ask the user to connect the bot to their YouTube account to adapt search results accordingly.
+            To do this, it displays a 'Connect your YouTube account' button above the results, or even before showing any. The user presses the button, switches to a
+            private chat with the bot and, in doing so, passes a start parameter that instructs the bot to return an OAuth link. Once done, the bot can offer a switch_inline
+            button so that the user can easily return to the chat where they wanted to use the bot's inline capabilities.
+        :type switch_pm_parameter: :obj:`str`
+
+        :param switch_pm_text: Parameter for the start message sent to the bot when user presses the switch button
+        :type switch_pm_text: :obj:`str`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.answer_inline_query(self.token, inline_query_id, results, cache_time, is_personal, next_offset,
+                                             switch_pm_text, switch_pm_parameter)
+
+    async def answer_callback_query(
+            self, callback_query_id: int, 
+            text: Optional[str]=None, show_alert: Optional[bool]=None, 
+            url: Optional[str]=None, cache_time: Optional[int]=None) -> bool:
+        """
+        Use this method to send answers to callback queries sent from inline keyboards. The answer will be displayed to
+        the user as a notification at the top of the chat screen or as an alert.
+
+        Telegram documentation: https://core.telegram.org/bots/api#answercallbackquery
+
+        :param callback_query_id: Unique identifier for the query to be answered
+        :type callback_query_id: :obj:`int`
+
+        :param text: Text of the notification. If not specified, nothing will be shown to the user, 0-200 characters
+        :type text: :obj:`str`
+
+        :param show_alert: If True, an alert will be shown by the client instead of a notification at the top of the chat screen. Defaults to false.
+        :type show_alert: :obj:`bool`
+
+        :param url: URL that will be opened by the user's client. If you have created a Game and accepted the conditions via @BotFather, specify the URL that opens your
+            game - note that this will only work if the query comes from a callback_game button.
+        :type url: :obj:`str`
+
+        :param cache_time: The maximum amount of time in seconds that the result of the callback query may be cached client-side. Telegram apps will support caching
+            starting in version 3.14. Defaults to 0.
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.answer_callback_query(self.token, callback_query_id, text, show_alert, url, cache_time)
+
+    async def set_sticker_set_thumb(
+            self, name: str, user_id: int, thumb: Union[Any, str]=None):
+        """
+        Use this method to set the thumbnail of a sticker set. 
+        Animated thumbnails can be set for animated sticker sets only. Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#setstickersetthumb
+
+        :param name: Sticker set name
+        :type name: :obj:`str`
+
+        :param user_id: User identifier
+        :type user_id: :obj:`int`
+
+        :param thumb:
+        :type thumb: :obj:`filelike object`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_sticker_set_thumb(self.token, name, user_id, thumb)
+
+    async def get_sticker_set(self, name: str) -> types.StickerSet:
+        """
+        Use this method to get a sticker set. On success, a StickerSet object is returned.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#getstickerset
+
+        :param name: Sticker set name
+        :type name: :obj:`str`
+
+        :return: On success, a StickerSet object is returned.
+        :rtype: :class:`telebot.types.StickerSet`
+        """
+        result = await asyncio_helper.get_sticker_set(self.token, name)
+        return types.StickerSet.de_json(result)
+
+    async def get_custom_emoji_stickers(self, custom_emoji_ids: List[str]) -> List[types.Sticker]:
+        """
+        Use this method to get information about custom emoji stickers by their identifiers.
+        Returns an Array of Sticker objects.
+
+        :param custom_emoji_ids: List of custom emoji identifiers. At most 200 custom emoji identifiers can be specified.
+        :type custom_emoji_ids: :obj:`list` of :obj:`str`
+
+        :return: Returns an Array of Sticker objects.
+        :rtype: :obj:`list` of :class:`telebot.types.Sticker`
+        """
+        result = await asyncio_helper.get_custom_emoji_stickers(self.token, custom_emoji_ids)
+        return [types.Sticker.de_json(sticker) for sticker in result]
+
+    async def upload_sticker_file(self, user_id: int, png_sticker: Union[Any, str]) -> types.File:
+        """
+        Use this method to upload a .png file with a sticker for later use in createNewStickerSet and addStickerToSet
+        methods (can be used multiple times). Returns the uploaded File on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#uploadstickerfile
+
+        :param user_id: User identifier of sticker set owner
+        :type user_id: :obj:`int`
+
+        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px,
+            and either width or height must be exactly 512px.
+        :type png_sticker: :obj:`filelike object`
+
+        :return: On success, the sent file is returned.
+        :rtype: :class:`telebot.types.File`
+        """
+        result = await asyncio_helper.upload_sticker_file(self.token, user_id, png_sticker)
+        return types.File.de_json(result)
+
+    async def create_new_sticker_set(
+            self, user_id: int, name: str, title: str, 
+            emojis: str, 
+            png_sticker: Union[Any, str]=None, 
+            tgs_sticker: Union[Any, str]=None, 
+            webm_sticker: Union[Any, str]=None,
+            contains_masks: Optional[bool]=None,
+            sticker_type: Optional[str]=None,
+            mask_position: Optional[types.MaskPosition]=None) -> bool:
+        """
+        Use this method to create new sticker set owned by a user. 
+        The bot will be able to edit the created sticker set.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#createnewstickerset
+
+        :param user_id: User identifier of created sticker set owner
+        :type user_id: :obj:`int`
+
+        :param name: Short name of sticker set, to be used in t.me/addstickers/ URLs (e.g., animals). Can contain only English letters,
+            digits and underscores. Must begin with a letter, can't contain consecutive underscores and must end in "_by_<bot_username>".
+            <bot_username> is case insensitive. 1-64 characters.
+        :type name: :obj:`str`
+
+        :param title: Sticker set title, 1-64 characters
+        :type title: :obj:`str`
+
+        :param emojis: One or more emoji corresponding to the sticker
+        :type emojis: :obj:`str`
+
+        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either width
+            or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers, pass an HTTP URL
+            as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
+        :type png_sticker: :obj:`str`
+
+        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
+        :type tgs_sticker: :obj:`str`
+
+        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
+        :type webm_sticker: :obj:`str`
+
+        :param contains_masks: Pass True, if a set of mask stickers should be created. Deprecated since Bot API 6.2,
+            use sticker_type instead.
+        :type contains_masks: :obj:`bool`
+
+        :param sticker_type: Optional, Type of stickers in the set, pass “regular” or “mask”. Custom emoji sticker sets can't be created
+            via the Bot API at the moment. By default, a regular sticker set is created.
+        :type sticker_type: :obj:`str`
+
+        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
+        :type mask_position: :class:`telebot.types.MaskPosition`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        if contains_masks is not None:
+            logger.warning('The parameter "contains_masks" is deprecated, use "sticker_type" instead')
+            if sticker_type is None:
+               sticker_type = 'mask' if contains_masks else 'regular'
+               
+        return await asyncio_helper.create_new_sticker_set(
+            self.token, user_id, name, title, emojis, png_sticker, tgs_sticker, 
+            mask_position, webm_sticker, sticker_type)
+
+
+    async def add_sticker_to_set(
+            self, user_id: int, name: str, emojis: str,
+            png_sticker: Optional[Union[Any, str]]=None, 
+            tgs_sticker: Optional[Union[Any, str]]=None,  
+            webm_sticker: Optional[Union[Any, str]]=None,
+            mask_position: Optional[types.MaskPosition]=None) -> bool:
+        """
+        Use this method to add a new sticker to a set created by the bot. 
+        It's required to pass `png_sticker` or `tgs_sticker`.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#addstickertoset
+
+        :param user_id: User identifier of created sticker set owner
+        :type user_id: :obj:`int`
+
+        :param name: Sticker set name
+        :type name: :obj:`str`
+
+        :param emojis: One or more emoji corresponding to the sticker
+        :type emojis: :obj:`str`
+
+        :param png_sticker: PNG image with the sticker, must be up to 512 kilobytes in size, dimensions must not exceed 512px, and either
+            width or height must be exactly 512px. Pass a file_id as a String to send a file that already exists on the Telegram servers,
+            pass an HTTP URL as a String for Telegram to get a file from the Internet, or upload a new one using multipart/form-data.
+        :type png_sticker: :obj:`str` or :obj:`filelike object`
+
+        :param tgs_sticker: TGS animation with the sticker, uploaded using multipart/form-data.
+        :type tgs_sticker: :obj:`str` or :obj:`filelike object`
+
+        :param webm_sticker: WebM animation with the sticker, uploaded using multipart/form-data.
+        :type webm_sticker: :obj:`str` or :obj:`filelike object`
+
+        :param mask_position: A JSON-serialized object for position where the mask should be placed on faces
+        :type mask_position: :class:`telebot.types.MaskPosition`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.add_sticker_to_set(
+            self.token, user_id, name, emojis, png_sticker, tgs_sticker, mask_position, webm_sticker)
+
+
+    async def set_sticker_position_in_set(self, sticker: str, position: int) -> bool:
+        """
+        Use this method to move a sticker in a set created by the bot to a specific position . Returns True on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#setstickerpositioninset
+
+        :param sticker: File identifier of the sticker
+        :type sticker: :obj:`str`
+
+        :param position: New sticker position in the set, zero-based
+        :type position: :obj:`int`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.set_sticker_position_in_set(self.token, sticker, position)
+
+    async def delete_sticker_from_set(self, sticker: str) -> bool:
+        """
+        Use this method to delete a sticker from a set created by the bot. Returns True on success.
+       
+        Telegram documentation: https://core.telegram.org/bots/api#deletestickerfromset
+
+        :param sticker: File identifier of the sticker
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_sticker_from_set(self.token, sticker)
+
+    async def create_forum_topic(self,
+            chat_id: int, name: str, icon_color: Optional[int]=None,
+            icon_custom_emoji_id: Optional[str]=None) -> types.ForumTopic:
+        """
+        Use this method to create a topic in a forum supergroup chat. The bot must be an administrator
+        in the chat for this to work and must have the can_manage_topics administrator rights.
+        Returns information about the created topic as a ForumTopic object.
+
+        Telegram documentation: https://core.telegram.org/bots/api#createforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param name: Name of the topic, 1-128 characters
+        :type name: :obj:`str`
+
+        :param icon_color: Color of the topic icon in RGB format. Currently, must be one of 0x6FB9F0, 0xFFD67E, 0xCB86DB, 0x8EEE98, 0xFF93B2, or 0xFB6F5F
+        :type icon_color: :obj:`int`
+
+        :param icon_custom_emoji_id: Custom emoji for the topic icon. Must be an emoji of type “tgs” and must be exactly 1 character long
+        :type icon_custom_emoji_id: :obj:`str`
+
+        :return: On success, information about the created topic is returned as a ForumTopic object.
+        :rtype: :class:`telebot.types.ForumTopic`
+        """
+        return types.ForumTopic.de_json(
+            await asyncio_helper.create_forum_topic(self.token, chat_id, name, icon_color, icon_custom_emoji_id)
+        )
+
+    async def edit_forum_topic(
+            self, chat_id: Union[int, str],
+            message_thread_id: int, name: Optional[str]=None,
+            icon_custom_emoji_id: Optional[str]=None
+        ) -> bool:
+        """
+        Use this method to edit name and icon of a topic in a forum supergroup chat. The bot must be an
+        administrator in the chat for this to work and must have can_manage_topics administrator rights,
+        unless it is the creator of the topic. Returns True on success.
+
+        Telegram Documentation: https://core.telegram.org/bots/api#editforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_thread_id: Identifier of the topic to edit
+        :type message_thread_id: :obj:`int`
+
+        :param name: Optional, New name of the topic, 1-128 characters. If not specififed or empty,
+            the current name of the topic will be kept
+        :type name: :obj:`str`
+
+        :param icon_custom_emoji_id: Optional, New unique identifier of the custom emoji shown as the topic icon.
+            Use getForumTopicIconStickers to get all allowed custom emoji identifiers. Pass an empty string to remove the
+            icon. If not specified, the current icon will be kept
+        :type icon_custom_emoji_id: :obj:`str`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.edit_forum_topic(self.token, chat_id, message_thread_id, name, icon_custom_emoji_id)
+
+    async def close_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
+        """
+        Use this method to close an open topic in a forum supergroup chat. The bot must be an administrator
+        in the chat for this to work and must have the can_manage_topics administrator rights, unless it is
+        the creator of the topic. Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#closeforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_thread_id: Identifier of the topic to close
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.close_forum_topic(self.token, chat_id, message_thread_id)
+
+    async def reopen_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
+        """
+        Use this method to reopen a closed topic in a forum supergroup chat. The bot must be an administrator in the chat
+        for this to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#reopenforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_thread_id: Identifier of the topic to reopen
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.reopen_forum_topic(self.token, chat_id, message_thread_id)
+
+    async def delete_forum_topic(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
+        """
+        Use this method to delete a topic in a forum supergroup chat. The bot must be an administrator in the chat for this
+        to work and must have the can_manage_topics administrator rights, unless it is the creator of the topic. Returns True
+        on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#deleteforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_thread_id: Identifier of the topic to delete
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.delete_forum_topic(self.token, chat_id, message_thread_id)
+
+    async def unpin_all_forum_topic_messages(self, chat_id: Union[str, int], message_thread_id: int) -> bool:
+        """
+        Use this method to clear the list of pinned messages in a forum topic. The bot must be an administrator in the
+        chat for this to work and must have the can_pin_messages administrator right in the supergroup.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unpinallforumtopicmessages
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param message_thread_id: Identifier of the topic
+        :type message_thread_id: :obj:`int`
+
+        :return: On success, True is returned.
+        :rtype: :obj:`bool`
+        """
+        return await asyncio_helper.unpin_all_forum_topic_messages(self.token, chat_id, message_thread_id)
+
+    async def edit_general_forum_topic(self, chat_id: Union[int, str], name: str) -> bool:
+        """
+        Use this method to edit the name of the 'General' topic in a forum supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
+        Returns True on success.
+        
+        Telegram documentation: https://core.telegram.org/bots/api#editgeneralforumtopic
+        
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+
+        :param name: New topic name, 1-128 characters
+        :type name: :obj:`str`
+        """
+
+        return await asyncio_helper.edit_general_forum_topic(self.token, chat_id, name)
+
+    async def close_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to close the 'General' topic in a forum supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#closegeneralforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+        """
+        return await asyncio_helper.close_general_forum_topic(self.token, chat_id)
+
+    async def reopen_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to reopen the 'General' topic in a forum supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#reopengeneralforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+        """
+        return await asyncio_helper.reopen_general_forum_topic(self.token, chat_id)
+
+    async def hide_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to hide the 'General' topic in a forum supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#hidegeneralforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+        """
+        return await asyncio_helper.hide_general_forum_topic(self.token, chat_id)
+
+    async def unhide_general_forum_topic(self, chat_id: Union[int, str]) -> bool:
+        """
+        Use this method to unhide the 'General' topic in a forum supergroup chat.
+        The bot must be an administrator in the chat for this to work and must have can_manage_topics administrator rights.
+        Returns True on success.
+
+        Telegram documentation: https://core.telegram.org/bots/api#unhidegeneralforumtopic
+
+        :param chat_id: Unique identifier for the target chat or username of the target channel (in the format @channelusername)
+        :type chat_id: :obj:`int` or :obj:`str`
+        """
+        return await asyncio_helper.unhide_general_forum_topic(self.token, chat_id)
+
+    async def get_forum_topic_icon_stickers(self) -> List[types.Sticker]:
+        """
+        Use this method to get custom emoji stickers, which can be used as a forum topic icon by any user.
+        Requires no parameters. Returns an Array of Sticker objects.
+
+        Telegram documentation: https://core.telegram.org/bots/api#getforumtopiciconstickers
+
+        :return: On success, a list of StickerSet objects is returned.
+        :rtype: List[:class:`telebot.types.StickerSet`]
+        """
+        return await asyncio_helper.get_forum_topic_icon_stickers(self.token)
+
+    async def set_state(self, user_id: int, state: Union[State, int, str], chat_id: Optional[int]=None):
+        """
+        Sets a new state of a user.
+
+        .. note::
+
+            You should set both user id and chat id in order to set state for a user in a chat.
+            Otherwise, if you only set user_id, chat_id will equal to user_id, this means that
+            state will be set for the user in his private chat with a bot.
+
+        :param user_id: User's identifier
+        :type user_id: :obj:`int`
+
+        :param state: new state. can be string, integer, or :class:`telebot.types.State`
+        :type state: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
+
+        :param chat_id: Chat's identifier
+        :type chat_id: :obj:`int`
+
+        :return: None
+        """
+        if not chat_id:
+            chat_id = user_id
+        await self.current_states.set_state(chat_id, user_id, state)
+
+    async def reset_data(self, user_id: int, chat_id: Optional[int]=None):
+        """
+        Reset data for a user in chat.
+
+        :param user_id: User's identifier
+        :type user_id: :obj:`int`
+
+        :param chat_id: Chat's identifier
+        :type chat_id: :obj:`int`
+
+        :return: None
+        """
+        if chat_id is None:
+            chat_id = user_id
+        await self.current_states.reset_data(chat_id, user_id)
+
+    async def delete_state(self, user_id: int, chat_id: Optional[int]=None):
+        """
+        Delete the current state of a user.
+
+        :param user_id: User's identifier
+        :type user_id: :obj:`int`
+        
+        :param chat_id: Chat's identifier
+        :type chat_id: :obj:`int`
+
+        :return: None
+        """
+        if not chat_id:
+            chat_id = user_id
+        await self.current_states.delete_state(chat_id, user_id)
+
+    def retrieve_data(self, user_id: int, chat_id: Optional[int]=None):
+        """
+        Returns context manager with data for a user in chat.
+
+        :param user_id: User identifier
+        :type user_id: int
+
+        :param chat_id: Chat's unique identifier, defaults to user_id
+        :type chat_id: int, optional
+
+        :return: Context manager with data for a user in chat
+        :rtype: Optional[Any]
+        """
+        if not chat_id:
+            chat_id = user_id
+        return self.current_states.get_interactive_data(chat_id, user_id)
+
+    async def get_state(self, user_id, chat_id: Optional[int]=None):
+        """
+        Gets current state of a user.
+        Not recommended to use this method. But it is ok for debugging.
+
+        :param user_id: User's identifier
+        :type user_id: :obj:`int`
+
+        :param chat_id: Chat's identifier
+        :type chat_id: :obj:`int`
+
+        :return: state of a user
+        :rtype: :obj:`int` or :obj:`str` or :class:`telebot.types.State`
+        """
+        if not chat_id:
+            chat_id = user_id
+        return await self.current_states.get_state(chat_id, user_id)
+
+    async def add_data(self, user_id: int, chat_id: Optional[int]=None, **kwargs):
+        """
+        Add data to states.
+
+        :param user_id: User's identifier
+        :type user_id: :obj:`int`
+
+        :param chat_id: Chat's identifier
+        :type chat_id: :obj:`int`
+
+        :param kwargs: Data to add
+        :return: None
+        """
+        if not chat_id:
+            chat_id = user_id
+        for key, value in kwargs.items():
+            await self.current_states.set_data(chat_id, user_id, key, value)
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_filters.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_filters.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_helper.py` & `pyTelegramBotAPI-4.9.0/telebot/apihelper.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,5094 +1,5291 @@
-00000000: 696d 706f 7274 2061 7379 6e63 696f 2023  import asyncio #
-00000010: 2066 6f72 2066 7574 7572 6520 7573 6573   for future uses
-00000020: 0a69 6d70 6f72 7420 7373 6c0a 696d 706f  .import ssl.impo
-00000030: 7274 2061 696f 6874 7470 0a69 6d70 6f72  rt aiohttp.impor
-00000040: 7420 6365 7274 6966 690a 6672 6f6d 2074  t certifi.from t
-00000050: 656c 6562 6f74 2069 6d70 6f72 7420 7479  elebot import ty
-00000060: 7065 730a 0a74 7279 3a0a 2020 2020 696d  pes..try:.    im
-00000070: 706f 7274 2075 6a73 6f6e 2061 7320 6a73  port ujson as js
-00000080: 6f6e 0a65 7863 6570 7420 496d 706f 7274  on.except Import
-00000090: 4572 726f 723a 0a20 2020 2069 6d70 6f72  Error:.    impor
-000000a0: 7420 6a73 6f6e 0a69 6d70 6f72 7420 6f73  t json.import os
-000000b0: 0a41 5049 5f55 524c 203d 2027 6874 7470  .API_URL = 'http
-000000c0: 733a 2f2f 6170 692e 7465 6c65 6772 616d  s://api.telegram
-000000d0: 2e6f 7267 2f62 6f74 7b30 7d2f 7b31 7d27  .org/bot{0}/{1}'
-000000e0: 0a0a 6672 6f6d 2064 6174 6574 696d 6520  ..from datetime 
-000000f0: 696d 706f 7274 2064 6174 6574 696d 650a  import datetime.
-00000100: 0a66 726f 6d20 7465 6c65 626f 7420 696d  .from telebot im
-00000110: 706f 7274 2075 7469 6c0a 696d 706f 7274  port util.import
-00000120: 206c 6f67 6769 6e67 0a0a 6c6f 6767 6572   logging..logger
-00000130: 203d 206c 6f67 6769 6e67 2e67 6574 4c6f   = logging.getLo
-00000140: 6767 6572 2827 5465 6c65 426f 7427 290a  gger('TeleBot').
-00000150: 0a70 726f 7879 203d 204e 6f6e 650a 7365  .proxy = None.se
-00000160: 7373 696f 6e20 3d20 4e6f 6e65 0a0a 4649  ssion = None..FI
-00000170: 4c45 5f55 524c 203d 204e 6f6e 650a 0a52  LE_URL = None..R
-00000180: 4551 5545 5354 5f54 494d 454f 5554 203d  EQUEST_TIMEOUT =
-00000190: 2033 3030 0a4d 4158 5f52 4554 5249 4553   300.MAX_RETRIES
-000001a0: 203d 2033 0a0a 5245 5155 4553 545f 4c49   = 3..REQUEST_LI
-000001b0: 4d49 5420 3d20 3530 0a0a 636c 6173 7320  MIT = 50..class 
-000001c0: 5365 7373 696f 6e4d 616e 6167 6572 3a0a  SessionManager:.
-000001d0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000001e0: 2873 656c 6629 202d 3e20 4e6f 6e65 3a0a  (self) -> None:.
-000001f0: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00000200: 7369 6f6e 203d 204e 6f6e 650a 2020 2020  sion = None.    
-00000210: 2020 2020 7365 6c66 2e73 736c 5f63 6f6e      self.ssl_con
-00000220: 7465 7874 203d 2073 736c 2e63 7265 6174  text = ssl.creat
-00000230: 655f 6465 6661 756c 745f 636f 6e74 6578  e_default_contex
-00000240: 7428 6361 6669 6c65 3d63 6572 7469 6669  t(cafile=certifi
-00000250: 2e77 6865 7265 2829 290a 0a0a 2020 2020  .where())...    
-00000260: 6173 796e 6320 6465 6620 6372 6561 7465  async def create
-00000270: 5f73 6573 7369 6f6e 2873 656c 6629 3a0a  _session(self):.
-00000280: 2020 2020 2020 2020 7365 6c66 2e73 6573          self.ses
-00000290: 7369 6f6e 203d 2061 696f 6874 7470 2e43  sion = aiohttp.C
-000002a0: 6c69 656e 7453 6573 7369 6f6e 2863 6f6e  lientSession(con
-000002b0: 6e65 6374 6f72 3d61 696f 6874 7470 2e54  nector=aiohttp.T
-000002c0: 4350 436f 6e6e 6563 746f 7228 0a20 2020  CPConnector(.   
-000002d0: 2020 2020 2020 2020 206c 696d 6974 3d52           limit=R
-000002e0: 4551 5545 5354 5f4c 494d 4954 2c0a 2020  EQUEST_LIMIT,.  
-000002f0: 2020 2020 2020 2020 2020 7373 6c5f 636f            ssl_co
-00000300: 6e74 6578 743d 7365 6c66 2e73 736c 5f63  ntext=self.ssl_c
-00000310: 6f6e 7465 7874 0a20 2020 2020 2020 2029  ontext.        )
-00000320: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00000330: 2073 656c 662e 7365 7373 696f 6e0a 0a20   self.session.. 
-00000340: 2020 2061 7379 6e63 2064 6566 2067 6574     async def get
-00000350: 5f73 6573 7369 6f6e 2873 656c 6629 3a0a  _session(self):.
-00000360: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00000370: 7365 7373 696f 6e20 6973 204e 6f6e 653a  session is None:
-00000380: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00000390: 662e 7365 7373 696f 6e20 3d20 6177 6169  f.session = awai
-000003a0: 7420 7365 6c66 2e63 7265 6174 655f 7365  t self.create_se
-000003b0: 7373 696f 6e28 290a 2020 2020 2020 2020  ssion().        
-000003c0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000003d0: 7365 7373 696f 6e0a 2020 2020 2020 2020  session.        
-000003e0: 2020 2020 0a20 2020 2020 2020 2069 6620      .        if 
-000003f0: 7365 6c66 2e73 6573 7369 6f6e 2e63 6c6f  self.session.clo
-00000400: 7365 643a 0a20 2020 2020 2020 2020 2020  sed:.           
-00000410: 2073 656c 662e 7365 7373 696f 6e20 3d20   self.session = 
-00000420: 6177 6169 7420 7365 6c66 2e63 7265 6174  await self.creat
-00000430: 655f 7365 7373 696f 6e28 290a 0a20 2020  e_session()..   
-00000440: 2020 2020 2023 206e 6f69 6e73 7065 6374       # noinspect
-00000450: 696f 6e20 5079 5072 6f74 6563 7465 644d  ion PyProtectedM
-00000460: 656d 6265 720a 2020 2020 2020 2020 6966  ember.        if
-00000470: 206e 6f74 2073 656c 662e 7365 7373 696f   not self.sessio
-00000480: 6e2e 5f6c 6f6f 702e 6973 5f72 756e 6e69  n._loop.is_runni
-00000490: 6e67 2829 3a0a 2020 2020 2020 2020 2020  ng():.          
-000004a0: 2020 6177 6169 7420 7365 6c66 2e73 6573    await self.ses
-000004b0: 7369 6f6e 2e63 6c6f 7365 2829 0a20 2020  sion.close().   
-000004c0: 2020 2020 2020 2020 2073 656c 662e 7365           self.se
-000004d0: 7373 696f 6e20 3d20 6177 6169 7420 7365  ssion = await se
-000004e0: 6c66 2e63 7265 6174 655f 7365 7373 696f  lf.create_sessio
-000004f0: 6e28 290a 2020 2020 2020 2020 7265 7475  n().        retu
-00000500: 726e 2073 656c 662e 7365 7373 696f 6e0a  rn self.session.
-00000510: 0a0a 7365 7373 696f 6e5f 6d61 6e61 6765  ..session_manage
-00000520: 7220 3d20 5365 7373 696f 6e4d 616e 6167  r = SessionManag
-00000530: 6572 2829 0a0a 6173 796e 6320 6465 6620  er()..async def 
-00000540: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-00000550: 2874 6f6b 656e 2c20 7572 6c2c 206d 6574  (token, url, met
-00000560: 686f 643d 2767 6574 272c 2070 6172 616d  hod='get', param
-00000570: 733d 4e6f 6e65 2c20 6669 6c65 733d 4e6f  s=None, files=No
-00000580: 6e65 2c20 2a2a 6b77 6172 6773 293a 0a20  ne, **kwargs):. 
-00000590: 2020 2023 204c 6574 2773 2072 6573 6f6c     # Let's resol
-000005a0: 7665 2061 6c6c 2074 696d 656f 7574 2070  ve all timeout p
-000005b0: 6172 616d 6574 6572 732e 0a20 2020 2023  arameters..    #
-000005c0: 2067 6574 5570 6461 7465 7320 7061 7261   getUpdates para
-000005d0: 6d65 7465 7220 6d61 7920 636f 6e74 6169  meter may contai
-000005e0: 6e20 3220 7061 7261 6d65 7465 7273 3a20  n 2 parameters: 
-000005f0: 7265 7175 6573 745f 7469 6d65 6f75 7420  request_timeout 
-00000600: 2620 7469 6d65 6f75 742e 0a20 2020 2023  & timeout..    #
-00000610: 206f 7468 6572 206d 6574 686f 6473 206d   other methods m
-00000620: 6179 2063 6f6e 7461 696e 2074 696d 656f  ay contain timeo
-00000630: 7574 2070 6172 616d 6574 6572 2074 6861  ut parameter tha
-00000640: 7420 7368 6f75 6c64 2062 6520 6170 706c  t should be appl
-00000650: 6965 6420 746f 0a20 2020 2023 2043 6c69  ied to.    # Cli
-00000660: 656e 7454 696d 656f 7574 206f 6e6c 792e  entTimeout only.
-00000670: 0a20 2020 2023 2074 696d 656f 7574 2073  .    # timeout s
-00000680: 686f 756c 6420 6265 2061 6464 6564 2074  hould be added t
-00000690: 6f20 7061 7261 6d73 2066 6f72 2067 6574  o params for get
-000006a0: 5570 6461 7465 732e 2041 6c6c 206f 7468  Updates. All oth
-000006b0: 6572 2074 696d 656f 7574 2773 2073 686f  er timeout's sho
-000006c0: 756c 6420 6265 2075 7365 640a 2020 2020  uld be used.    
-000006d0: 2320 666f 7220 7265 7175 6573 7420 7469  # for request ti
-000006e0: 6d65 6f75 742e 0a20 2020 2023 2068 6572  meout..    # her
-000006f0: 6520 7765 2067 6f74 2072 6571 7565 7374  e we got request
-00000700: 5f74 696d 656f 7574 2c20 736f 2074 6869  _timeout, so thi
-00000710: 7320 6973 2067 6574 5570 6461 7465 7320  s is getUpdates 
-00000720: 6d65 7468 6f64 2e0a 2020 2020 6966 2027  method..    if '
-00000730: 7265 7175 6573 745f 7469 6d65 6f75 7427  request_timeout'
-00000740: 2069 6e20 6b77 6172 6773 3a0a 2020 2020   in kwargs:.    
-00000750: 2020 2020 7265 7175 6573 745f 7469 6d65      request_time
-00000760: 6f75 7420 3d20 6b77 6172 6773 2e70 6f70  out = kwargs.pop
-00000770: 2827 7265 7175 6573 745f 7469 6d65 6f75  ('request_timeou
-00000780: 7427 290a 0a20 2020 2065 6c73 653a 0a20  t')..    else:. 
-00000790: 2020 2020 2020 2023 206c 6574 2773 2063         # let's c
-000007a0: 6865 636b 2066 6f72 2074 696d 656f 7574  heck for timeout
-000007b0: 2069 6e20 7061 7261 6d73 0a20 2020 2020   in params.     
-000007c0: 2020 2072 6571 7565 7374 5f74 696d 656f     request_timeo
-000007d0: 7574 203d 2070 6172 616d 732e 706f 7028  ut = params.pop(
-000007e0: 2774 696d 656f 7574 272c 204e 6f6e 6529  'timeout', None)
-000007f0: 2069 6620 7061 7261 6d73 2065 6c73 6520   if params else 
-00000800: 4e6f 6e65 0a20 2020 2020 2020 2023 2077  None.        # w
-00000810: 6520 7769 6c6c 2061 7070 6c79 2064 6566  e will apply def
-00000820: 6175 6c74 2072 6571 7565 7374 5f74 696d  ault request_tim
-00000830: 656f 7574 2069 6620 7468 6572 6520 6973  eout if there is
-00000840: 206e 6f20 7469 6d65 6f75 7420 696e 2070   no timeout in p
-00000850: 6172 616d 730a 2020 2020 2020 2020 2320  arams.        # 
-00000860: 6f74 6865 7277 6973 652c 2077 6520 7769  otherwise, we wi
-00000870: 6c6c 2075 7365 2074 696d 656f 7574 2070  ll use timeout p
-00000880: 6172 616d 6574 6572 2061 7070 6c69 6564  arameter applied
-00000890: 2066 6f72 2070 6179 6c6f 6164 2e0a 2020   for payload..  
-000008a0: 2020 0a20 2020 2072 6571 7565 7374 5f74    .    request_t
-000008b0: 696d 656f 7574 203d 2052 4551 5545 5354  imeout = REQUEST
-000008c0: 5f54 494d 454f 5554 2069 6620 7265 7175  _TIMEOUT if requ
-000008d0: 6573 745f 7469 6d65 6f75 7420 6973 204e  est_timeout is N
-000008e0: 6f6e 6520 656c 7365 2072 6571 7565 7374  one else request
-000008f0: 5f74 696d 656f 7574 0a20 2020 200a 0a20  _timeout.    .. 
-00000900: 2020 2023 2050 7265 7061 7269 6e67 2064     # Preparing d
-00000910: 6174 6120 6279 2061 6464 696e 6720 616c  ata by adding al
-00000920: 6c20 7061 7261 6d65 7465 7273 2061 6e64  l parameters and
-00000930: 2066 696c 6573 2074 6f20 466f 726d 4461   files to FormDa
-00000940: 7461 0a20 2020 2070 6172 616d 7320 3d20  ta.    params = 
-00000950: 5f70 7265 7061 7265 5f64 6174 6128 7061  _prepare_data(pa
-00000960: 7261 6d73 2c20 6669 6c65 7329 0a0a 2020  rams, files)..  
-00000970: 2020 7469 6d65 6f75 7420 3d20 6169 6f68    timeout = aioh
-00000980: 7474 702e 436c 6965 6e74 5469 6d65 6f75  ttp.ClientTimeou
-00000990: 7428 746f 7461 6c3d 7265 7175 6573 745f  t(total=request_
-000009a0: 7469 6d65 6f75 7429 0a20 2020 2067 6f74  timeout).    got
-000009b0: 5f72 6573 756c 7420 3d20 4661 6c73 650a  _result = False.
-000009c0: 2020 2020 6375 7272 656e 745f 7472 793d      current_try=
-000009d0: 300a 2020 2020 7365 7373 696f 6e20 3d20  0.    session = 
-000009e0: 6177 6169 7420 7365 7373 696f 6e5f 6d61  await session_ma
-000009f0: 6e61 6765 722e 6765 745f 7365 7373 696f  nager.get_sessio
-00000a00: 6e28 290a 2020 2020 7768 696c 6520 6e6f  n().    while no
-00000a10: 7420 676f 745f 7265 7375 6c74 2061 6e64  t got_result and
-00000a20: 2063 7572 7265 6e74 5f74 7279 3c4d 4158   current_try<MAX
-00000a30: 5f52 4554 5249 4553 2d31 3a0a 2020 2020  _RETRIES-1:.    
-00000a40: 2020 2020 6375 7272 656e 745f 7472 7920      current_try 
-00000a50: 2b3d 310a 2020 2020 2020 2020 7472 793a  +=1.        try:
-00000a60: 0a20 2020 2020 2020 2020 2020 2061 7379  .            asy
-00000a70: 6e63 2077 6974 6820 7365 7373 696f 6e2e  nc with session.
-00000a80: 7265 7175 6573 7428 6d65 7468 6f64 3d6d  request(method=m
-00000a90: 6574 686f 642c 2075 726c 3d41 5049 5f55  ethod, url=API_U
-00000aa0: 524c 2e66 6f72 6d61 7428 746f 6b65 6e2c  RL.format(token,
-00000ab0: 2075 726c 292c 2064 6174 613d 7061 7261   url), data=para
-00000ac0: 6d73 2c20 7469 6d65 6f75 743d 7469 6d65  ms, timeout=time
-00000ad0: 6f75 742c 2070 726f 7879 3d70 726f 7879  out, proxy=proxy
-00000ae0: 2920 6173 2072 6573 703a 0a20 2020 2020  ) as resp:.     
-00000af0: 2020 2020 2020 2020 2020 2067 6f74 5f72             got_r
-00000b00: 6573 756c 7420 3d20 5472 7565 0a20 2020  esult = True.   
-00000b10: 2020 2020 2020 2020 2020 2020 206c 6f67               log
-00000b20: 6765 722e 6465 6275 6728 2252 6571 7565  ger.debug("Reque
-00000b30: 7374 3a20 6d65 7468 6f64 3d7b 307d 2075  st: method={0} u
-00000b40: 726c 3d7b 317d 2070 6172 616d 733d 7b32  rl={1} params={2
-00000b50: 7d20 6669 6c65 733d 7b33 7d20 7265 7175  } files={3} requ
-00000b60: 6573 745f 7469 6d65 6f75 743d 7b34 7d20  est_timeout={4} 
-00000b70: 6375 7272 656e 745f 7472 793d 7b35 7d22  current_try={5}"
-00000b80: 2e66 6f72 6d61 7428 6d65 7468 6f64 2c20  .format(method, 
-00000b90: 7572 6c2c 2070 6172 616d 732c 2066 696c  url, params, fil
-00000ba0: 6573 2c20 7265 7175 6573 745f 7469 6d65  es, request_time
-00000bb0: 6f75 742c 2063 7572 7265 6e74 5f74 7279  out, current_try
-00000bc0: 292e 7265 706c 6163 6528 746f 6b65 6e2c  ).replace(token,
-00000bd0: 2074 6f6b 656e 2e73 706c 6974 2827 3a27   token.split(':'
-00000be0: 295b 305d 202b 2022 3a7b 544f 4b45 4e7d  )[0] + ":{TOKEN}
-00000bf0: 2229 290a 2020 2020 2020 2020 2020 2020  ")).            
-00000c00: 2020 2020 0a20 2020 2020 2020 2020 2020      .           
-00000c10: 2020 2020 206a 736f 6e5f 7265 7375 6c74       json_result
-00000c20: 203d 2061 7761 6974 205f 6368 6563 6b5f   = await _check_
-00000c30: 7265 7375 6c74 2875 726c 2c20 7265 7370  result(url, resp
-00000c40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00000c50: 2020 6966 206a 736f 6e5f 7265 7375 6c74    if json_result
-00000c60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00000c70: 2020 2020 2020 7265 7475 726e 206a 736f        return jso
-00000c80: 6e5f 7265 7375 6c74 5b27 7265 7375 6c74  n_result['result
-00000c90: 275d 0a20 2020 2020 2020 2065 7863 6570  '].        excep
-00000ca0: 7420 2841 7069 5465 6c65 6772 616d 4578  t (ApiTelegramEx
-00000cb0: 6365 7074 696f 6e2c 4170 6949 6e76 616c  ception,ApiInval
-00000cc0: 6964 4a53 4f4e 4578 6365 7074 696f 6e2c  idJSONException,
-00000cd0: 2041 7069 4854 5450 4578 6365 7074 696f   ApiHTTPExceptio
-00000ce0: 6e29 2061 7320 653a 0a20 2020 2020 2020  n) as e:.       
-00000cf0: 2020 2020 2072 6169 7365 2065 0a20 2020       raise e.   
-00000d00: 2020 2020 2065 7863 6570 7420 6169 6f68       except aioh
-00000d10: 7474 702e 436c 6965 6e74 4572 726f 7220  ttp.ClientError 
-00000d20: 6173 2065 3a0a 2020 2020 2020 2020 2020  as e:.          
-00000d30: 2020 6c6f 6767 6572 2e65 7272 6f72 2827    logger.error('
-00000d40: 4169 6f68 7474 7020 436c 6965 6e74 4572  Aiohttp ClientEr
-00000d50: 726f 723a 207b 307d 272e 666f 726d 6174  ror: {0}'.format
-00000d60: 2865 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  (e.__class__.__n
-00000d70: 616d 655f 5f29 290a 2020 2020 2020 2020  ame__)).        
-00000d80: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00000d90: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
-00000da0: 2020 206c 6f67 6765 722e 6572 726f 7228     logger.error(
-00000db0: 6627 556e 6b6e 6f77 6e20 6572 726f 723a  f'Unknown error:
-00000dc0: 207b 652e 5f5f 636c 6173 735f 5f2e 5f5f   {e.__class__.__
-00000dd0: 6e61 6d65 5f5f 7d27 290a 2020 2020 2020  name__}').      
-00000de0: 2020 6966 206e 6f74 2067 6f74 5f72 6573    if not got_res
-00000df0: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
-00000e00: 2072 6169 7365 2052 6571 7565 7374 5469   raise RequestTi
-00000e10: 6d65 6f75 7428 2252 6571 7565 7374 2074  meout("Request t
-00000e20: 696d 656f 7574 2e20 5265 7175 6573 743a  imeout. Request:
-00000e30: 206d 6574 686f 643d 7b30 7d20 7572 6c3d   method={0} url=
-00000e40: 7b31 7d20 7061 7261 6d73 3d7b 327d 2066  {1} params={2} f
-00000e50: 696c 6573 3d7b 337d 2072 6571 7565 7374  iles={3} request
-00000e60: 5f74 696d 656f 7574 3d7b 347d 222e 666f  _timeout={4}".fo
-00000e70: 726d 6174 286d 6574 686f 642c 2075 726c  rmat(method, url
-00000e80: 2c20 7061 7261 6d73 2c20 6669 6c65 732c  , params, files,
-00000e90: 2072 6571 7565 7374 5f74 696d 656f 7574   request_timeout
-00000ea0: 2c20 6375 7272 656e 745f 7472 7929 290a  , current_try)).
-00000eb0: 2020 2020 2020 2020 0a64 6566 205f 7072          .def _pr
-00000ec0: 6570 6172 655f 6669 6c65 286f 626a 293a  epare_file(obj):
-00000ed0: 0a20 2020 2022 2222 0a20 2020 2050 7265  .    """.    Pre
-00000ee0: 7061 7265 7320 6669 6c65 2066 6f72 2075  pares file for u
-00000ef0: 706c 6f61 642e 0a20 2020 2022 2222 0a20  pload..    """. 
-00000f00: 2020 206e 616d 6520 3d20 6765 7461 7474     name = getatt
-00000f10: 7228 6f62 6a2c 2027 6e61 6d65 272c 204e  r(obj, 'name', N
-00000f20: 6f6e 6529 0a20 2020 2069 6620 6e61 6d65  one).    if name
-00000f30: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-00000f40: 6e61 6d65 2c20 7374 7229 2061 6e64 206e  name, str) and n
-00000f50: 616d 655b 305d 2021 3d20 273c 2720 616e  ame[0] != '<' an
-00000f60: 6420 6e61 6d65 5b2d 315d 2021 3d20 273e  d name[-1] != '>
-00000f70: 273a 0a20 2020 2020 2020 2072 6574 7572  ':.        retur
-00000f80: 6e20 6f73 2e70 6174 682e 6261 7365 6e61  n os.path.basena
-00000f90: 6d65 286e 616d 6529 0a0a 6465 6620 5f70  me(name)..def _p
-00000fa0: 7265 7061 7265 5f64 6174 6128 7061 7261  repare_data(para
-00000fb0: 6d73 3d4e 6f6e 652c 2066 696c 6573 3d4e  ms=None, files=N
-00000fc0: 6f6e 6529 3a0a 2020 2020 2222 220a 2020  one):.    """.  
-00000fd0: 2020 4164 6473 2074 6865 2070 6172 616d    Adds the param
-00000fe0: 6574 6572 7320 616e 6420 6669 6c65 7320  eters and files 
-00000ff0: 746f 2074 6865 2072 6571 7565 7374 2e0a  to the request..
-00001000: 0a20 2020 203a 7061 7261 6d20 7061 7261  .    :param para
-00001010: 6d73 3a0a 2020 2020 3a70 6172 616d 2066  ms:.    :param f
-00001020: 696c 6573 3a0a 2020 2020 3a72 6574 7572  iles:.    :retur
-00001030: 6e3a 0a20 2020 2022 2222 0a20 2020 2064  n:.    """.    d
-00001040: 6174 6120 3d20 6169 6f68 7474 702e 666f  ata = aiohttp.fo
-00001050: 726d 6461 7461 2e46 6f72 6d44 6174 6128  rmdata.FormData(
-00001060: 7175 6f74 655f 6669 656c 6473 3d46 616c  quote_fields=Fal
-00001070: 7365 290a 0a20 2020 2069 6620 7061 7261  se)..    if para
-00001080: 6d73 3a0a 2020 2020 2020 2020 666f 7220  ms:.        for 
-00001090: 6b65 792c 2076 616c 7565 2069 6e20 7061  key, value in pa
-000010a0: 7261 6d73 2e69 7465 6d73 2829 3a0a 2020  rams.items():.  
-000010b0: 2020 2020 2020 2020 2020 6461 7461 2e61            data.a
-000010c0: 6464 5f66 6965 6c64 286b 6579 2c20 7374  dd_field(key, st
-000010d0: 7228 7661 6c75 6529 290a 2020 2020 6966  r(value)).    if
-000010e0: 2066 696c 6573 3a0a 2020 2020 2020 2020   files:.        
-000010f0: 666f 7220 6b65 792c 2066 2069 6e20 6669  for key, f in fi
-00001100: 6c65 732e 6974 656d 7328 293a 0a20 2020  les.items():.   
-00001110: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00001120: 7374 616e 6365 2866 2c20 7475 706c 6529  stance(f, tuple)
-00001130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001140: 2020 6966 206c 656e 2866 2920 3d3d 2032    if len(f) == 2
-00001150: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001160: 2020 2020 2020 6669 6c65 5f6e 616d 652c        file_name,
-00001170: 2066 696c 6520 3d20 660a 2020 2020 2020   file = f.      
-00001180: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00001190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011a0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-000011b0: 7272 6f72 2827 5475 706c 6520 6d75 7374  rror('Tuple must
-000011c0: 2068 6176 6520 6578 6163 746c 7920 3220   have exactly 2 
-000011d0: 656c 656d 656e 7473 3a20 6669 6c65 6e61  elements: filena
-000011e0: 6d65 2c20 6669 6c65 6f62 6a27 290a 2020  me, fileobj').  
-000011f0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00001200: 7369 6e73 7461 6e63 6528 662c 2074 7970  sinstance(f, typ
-00001210: 6573 2e49 6e70 7574 4669 6c65 293a 0a20  es.InputFile):. 
-00001220: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00001230: 696c 655f 6e61 6d65 203d 2066 2e66 696c  ile_name = f.fil
-00001240: 655f 6e61 6d65 0a20 2020 2020 2020 2020  e_name.         
-00001250: 2020 2020 2020 2066 696c 6520 3d20 662e         file = f.
-00001260: 6669 6c65 0a20 2020 2020 2020 2020 2020  file.           
-00001270: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00001280: 2020 2020 2020 2066 696c 655f 6e61 6d65         file_name
-00001290: 2c20 6669 6c65 203d 205f 7072 6570 6172  , file = _prepar
-000012a0: 655f 6669 6c65 2866 2920 6f72 206b 6579  e_file(f) or key
-000012b0: 2c20 660a 0a20 2020 2020 2020 2020 2020  , f..           
-000012c0: 2064 6174 612e 6164 645f 6669 656c 6428   data.add_field(
-000012d0: 6b65 792c 2066 696c 652c 2066 696c 656e  key, file, filen
-000012e0: 616d 653d 6669 6c65 5f6e 616d 6529 0a0a  ame=file_name)..
-000012f0: 2020 2020 7265 7475 726e 2064 6174 610a      return data.
-00001300: 0a61 7379 6e63 2064 6566 205f 636f 6e76  .async def _conv
-00001310: 6572 745f 6d61 726b 7570 286d 6172 6b75  ert_markup(marku
-00001320: 7029 3a0a 2020 2020 6966 2069 7369 6e73  p):.    if isins
-00001330: 7461 6e63 6528 6d61 726b 7570 2c20 7479  tance(markup, ty
-00001340: 7065 732e 4a73 6f6e 5365 7269 616c 697a  pes.JsonSerializ
-00001350: 6162 6c65 293a 0a20 2020 2020 2020 2072  able):.        r
-00001360: 6574 7572 6e20 6d61 726b 7570 2e74 6f5f  eturn markup.to_
-00001370: 6a73 6f6e 2829 0a20 2020 2072 6574 7572  json().    retur
-00001380: 6e20 6d61 726b 7570 0a0a 0a0a 6173 796e  n markup....asyn
-00001390: 6320 6465 6620 6765 745f 6d65 2874 6f6b  c def get_me(tok
-000013a0: 656e 293a 0a20 2020 206d 6574 686f 645f  en):.    method_
-000013b0: 7572 6c20 3d20 7227 6765 744d 6527 0a20  url = r'getMe'. 
-000013c0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-000013d0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-000013e0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-000013f0: 726c 290a 0a0a 6173 796e 6320 6465 6620  rl)...async def 
-00001400: 6c6f 675f 6f75 7428 746f 6b65 6e29 3a0a  log_out(token):.
-00001410: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00001420: 2072 276c 6f67 4f75 7427 0a20 2020 2072   r'logOut'.    r
-00001430: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00001440: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00001450: 656e 2c20 6d65 7468 6f64 5f75 726c 290a  en, method_url).
-00001460: 0a0a 6173 796e 6320 6465 6620 636c 6f73  ..async def clos
-00001470: 6528 746f 6b65 6e29 3a0a 2020 2020 6d65  e(token):.    me
-00001480: 7468 6f64 5f75 726c 203d 2072 2763 6c6f  thod_url = r'clo
-00001490: 7365 270a 2020 2020 7265 7475 726e 2061  se'.    return a
-000014a0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-000014b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000014c0: 686f 645f 7572 6c29 0a0a 0a61 7379 6e63  hod_url)...async
-000014d0: 2064 6566 2067 6574 5f66 696c 6528 746f   def get_file(to
-000014e0: 6b65 6e2c 2066 696c 655f 6964 293a 0a20  ken, file_id):. 
-000014f0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00001500: 7227 6765 7446 696c 6527 0a20 2020 2072  r'getFile'.    r
-00001510: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00001520: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00001530: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00001540: 7061 7261 6d73 3d7b 2766 696c 655f 6964  params={'file_id
-00001550: 273a 2066 696c 655f 6964 7d29 0a0a 0a61  ': file_id})...a
-00001560: 7379 6e63 2064 6566 2067 6574 5f66 696c  sync def get_fil
-00001570: 655f 7572 6c28 746f 6b65 6e2c 2066 696c  e_url(token, fil
-00001580: 655f 6964 293a 0a20 2020 2069 6620 4649  e_id):.    if FI
-00001590: 4c45 5f55 524c 2069 7320 4e6f 6e65 3a0a  LE_URL is None:.
-000015a0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-000015b0: 6874 7470 733a 2f2f 6170 692e 7465 6c65  https://api.tele
-000015c0: 6772 616d 2e6f 7267 2f66 696c 652f 626f  gram.org/file/bo
-000015d0: 747b 307d 2f7b 317d 222e 666f 726d 6174  t{0}/{1}".format
-000015e0: 2874 6f6b 656e 2c20 6177 6169 7420 6765  (token, await ge
-000015f0: 745f 6669 6c65 2874 6f6b 656e 2c20 6669  t_file(token, fi
-00001600: 6c65 5f69 6429 5b27 6669 6c65 5f70 6174  le_id)['file_pat
-00001610: 6827 5d29 0a20 2020 2065 6c73 653a 0a20  h']).    else:. 
-00001620: 2020 2020 2020 2023 206e 6f69 6e73 7065         # noinspe
-00001630: 6374 696f 6e20 5079 556e 7265 736f 6c76  ction PyUnresolv
-00001640: 6564 5265 6665 7265 6e63 6573 0a20 2020  edReferences.   
-00001650: 2020 2020 2072 6574 7572 6e20 4649 4c45       return FILE
-00001660: 5f55 524c 2e66 6f72 6d61 7428 746f 6b65  _URL.format(toke
-00001670: 6e2c 2061 7761 6974 2067 6574 5f66 696c  n, await get_fil
-00001680: 6528 746f 6b65 6e2c 2066 696c 655f 6964  e(token, file_id
-00001690: 295b 2766 696c 655f 7061 7468 275d 290a  )['file_path']).
-000016a0: 0a0a 6173 796e 6320 6465 6620 646f 776e  ..async def down
-000016b0: 6c6f 6164 5f66 696c 6528 746f 6b65 6e2c  load_file(token,
-000016c0: 2066 696c 655f 7061 7468 293a 0a20 2020   file_path):.   
-000016d0: 2069 6620 4649 4c45 5f55 524c 2069 7320   if FILE_URL is 
-000016e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7572  None:.        ur
-000016f0: 6c20 3d20 2022 6874 7470 733a 2f2f 6170  l =  "https://ap
-00001700: 692e 7465 6c65 6772 616d 2e6f 7267 2f66  i.telegram.org/f
-00001710: 696c 652f 626f 747b 307d 2f7b 317d 222e  ile/bot{0}/{1}".
-00001720: 666f 726d 6174 2874 6f6b 656e 2c20 6669  format(token, fi
-00001730: 6c65 5f70 6174 6829 0a20 2020 2065 6c73  le_path).    els
-00001740: 653a 2075 726c 203d 2020 4649 4c45 5f55  e: url =  FILE_U
-00001750: 524c 2e66 6f72 6d61 7428 746f 6b65 6e2c  RL.format(token,
-00001760: 2066 696c 655f 7061 7468 290a 2020 2020   file_path).    
-00001770: 7365 7373 696f 6e20 3d20 6177 6169 7420  session = await 
-00001780: 7365 7373 696f 6e5f 6d61 6e61 6765 722e  session_manager.
-00001790: 6765 745f 7365 7373 696f 6e28 290a 2020  get_session().  
-000017a0: 2020 6173 796e 6320 7769 7468 2073 6573    async with ses
-000017b0: 7369 6f6e 2e67 6574 2875 726c 2c20 7072  sion.get(url, pr
-000017c0: 6f78 793d 7072 6f78 7929 2061 7320 7265  oxy=proxy) as re
-000017d0: 7370 6f6e 7365 3a0a 2020 2020 2020 2020  sponse:.        
-000017e0: 6966 2072 6573 706f 6e73 652e 7374 6174  if response.stat
-000017f0: 7573 2021 3d20 3230 303a 0a20 2020 2020  us != 200:.     
-00001800: 2020 2020 2020 2072 6169 7365 2041 7069         raise Api
-00001810: 4854 5450 4578 6365 7074 696f 6e28 2744  HTTPException('D
-00001820: 6f77 6e6c 6f61 6420 6669 6c65 272c 2072  ownload file', r
-00001830: 6573 756c 7429 0a20 2020 2020 2020 2072  esult).        r
-00001840: 6573 756c 7420 3d20 6177 6169 7420 7265  esult = await re
-00001850: 7370 6f6e 7365 2e72 6561 6428 290a 2020  sponse.read().  
-00001860: 2020 0a20 2020 2072 6574 7572 6e20 7265    .    return re
-00001870: 7375 6c74 0a0a 0a61 7379 6e63 2064 6566  sult...async def
-00001880: 2073 6574 5f77 6562 686f 6f6b 2874 6f6b   set_webhook(tok
-00001890: 656e 2c20 7572 6c3d 4e6f 6e65 2c20 6365  en, url=None, ce
-000018a0: 7274 6966 6963 6174 653d 4e6f 6e65 2c20  rtificate=None, 
-000018b0: 6d61 785f 636f 6e6e 6563 7469 6f6e 733d  max_connections=
-000018c0: 4e6f 6e65 2c20 616c 6c6f 7765 645f 7570  None, allowed_up
-000018d0: 6461 7465 733d 4e6f 6e65 2c20 6970 5f61  dates=None, ip_a
-000018e0: 6464 7265 7373 3d4e 6f6e 652c 0a20 2020  ddress=None,.   
-000018f0: 2020 2020 2020 2020 2020 2020 2064 726f               dro
-00001900: 705f 7065 6e64 696e 675f 7570 6461 7465  p_pending_update
-00001910: 7320 3d20 4e6f 6e65 2c20 7469 6d65 6f75  s = None, timeou
-00001920: 743d 4e6f 6e65 2c20 7365 6372 6574 5f74  t=None, secret_t
-00001930: 6f6b 656e 3d4e 6f6e 6529 3a0a 2020 2020  oken=None):.    
-00001940: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-00001950: 6574 5765 6268 6f6f 6b27 0a20 2020 2070  etWebhook'.    p
-00001960: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
-00001970: 2020 2027 7572 6c27 3a20 7572 6c20 6966     'url': url if
-00001980: 2075 726c 2065 6c73 6520 2222 2c0a 2020   url else "",.  
-00001990: 2020 7d0a 2020 2020 6669 6c65 7320 3d20    }.    files = 
-000019a0: 4e6f 6e65 0a20 2020 2069 6620 6365 7274  None.    if cert
-000019b0: 6966 6963 6174 653a 0a20 2020 2020 2020  ificate:.       
-000019c0: 2066 696c 6573 203d 207b 2763 6572 7469   files = {'certi
-000019d0: 6669 6361 7465 273a 2063 6572 7469 6669  ficate': certifi
-000019e0: 6361 7465 7d0a 2020 2020 6966 206d 6178  cate}.    if max
-000019f0: 5f63 6f6e 6e65 6374 696f 6e73 3a0a 2020  _connections:.  
-00001a00: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
-00001a10: 6178 5f63 6f6e 6e65 6374 696f 6e73 275d  ax_connections']
-00001a20: 203d 206d 6178 5f63 6f6e 6e65 6374 696f   = max_connectio
-00001a30: 6e73 0a20 2020 2069 6620 616c 6c6f 7765  ns.    if allowe
-00001a40: 645f 7570 6461 7465 7320 6973 206e 6f74  d_updates is not
-00001a50: 204e 6f6e 653a 2020 2020 2020 2023 2045   None:       # E
-00001a60: 6d70 7479 206c 6973 7473 2073 686f 756c  mpty lists shoul
-00001a70: 6420 7061 7373 0a20 2020 2020 2020 2070  d pass.        p
-00001a80: 6179 6c6f 6164 5b27 616c 6c6f 7765 645f  ayload['allowed_
-00001a90: 7570 6461 7465 7327 5d20 3d20 6a73 6f6e  updates'] = json
-00001aa0: 2e64 756d 7073 2861 6c6c 6f77 6564 5f75  .dumps(allowed_u
-00001ab0: 7064 6174 6573 290a 2020 2020 6966 2069  pdates).    if i
-00001ac0: 705f 6164 6472 6573 7320 6973 206e 6f74  p_address is not
-00001ad0: 204e 6f6e 653a 2020 2020 2020 2020 2020   None:          
-00001ae0: 2020 2320 456d 7074 7920 7374 7269 6e67    # Empty string
-00001af0: 2073 686f 756c 6420 7061 7373 0a20 2020   should pass.   
-00001b00: 2020 2020 2070 6179 6c6f 6164 5b27 6970       payload['ip
-00001b10: 5f61 6464 7265 7373 275d 203d 2069 705f  _address'] = ip_
-00001b20: 6164 6472 6573 730a 2020 2020 6966 2064  address.    if d
-00001b30: 726f 705f 7065 6e64 696e 675f 7570 6461  rop_pending_upda
-00001b40: 7465 7320 6973 206e 6f74 204e 6f6e 653a  tes is not None:
-00001b50: 2020 2320 416e 7920 626f 6f6c 2076 616c    # Any bool val
-00001b60: 7565 2073 686f 756c 6420 7061 7373 0a20  ue should pass. 
-00001b70: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00001b80: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
-00001b90: 6174 6573 275d 203d 2064 726f 705f 7065  ates'] = drop_pe
-00001ba0: 6e64 696e 675f 7570 6461 7465 730a 2020  nding_updates.  
-00001bb0: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00001bc0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00001bd0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00001be0: 7574 0a20 2020 2069 6620 7365 6372 6574  ut.    if secret
-00001bf0: 5f74 6f6b 656e 3a0a 2020 2020 2020 2020  _token:.        
-00001c00: 7061 796c 6f61 645b 2773 6563 7265 745f  payload['secret_
-00001c10: 746f 6b65 6e27 5d20 3d20 7365 6372 6574  token'] = secret
-00001c20: 5f74 6f6b 656e 0a20 2020 2072 6574 7572  _token.    retur
-00001c30: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00001c40: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00001c50: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00001c60: 6d73 3d70 6179 6c6f 6164 2c20 6669 6c65  ms=payload, file
-00001c70: 733d 6669 6c65 7329 0a0a 0a61 7379 6e63  s=files)...async
-00001c80: 2064 6566 2064 656c 6574 655f 7765 6268   def delete_webh
-00001c90: 6f6f 6b28 746f 6b65 6e2c 2064 726f 705f  ook(token, drop_
-00001ca0: 7065 6e64 696e 675f 7570 6461 7465 733d  pending_updates=
-00001cb0: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00001cc0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00001cd0: 7572 6c20 3d20 7227 6465 6c65 7465 5765  url = r'deleteWe
-00001ce0: 6268 6f6f 6b27 0a20 2020 2070 6179 6c6f  bhook'.    paylo
-00001cf0: 6164 203d 207b 7d0a 2020 2020 6966 2064  ad = {}.    if d
-00001d00: 726f 705f 7065 6e64 696e 675f 7570 6461  rop_pending_upda
-00001d10: 7465 7320 6973 206e 6f74 204e 6f6e 653a  tes is not None:
-00001d20: 2020 2320 416e 7920 626f 6f6c 2076 616c    # Any bool val
-00001d30: 7565 2073 686f 756c 6420 7061 7373 0a20  ue should pass. 
-00001d40: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00001d50: 6472 6f70 5f70 656e 6469 6e67 5f75 7064  drop_pending_upd
-00001d60: 6174 6573 275d 203d 2064 726f 705f 7065  ates'] = drop_pe
-00001d70: 6e64 696e 675f 7570 6461 7465 730a 2020  nding_updates.  
-00001d80: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00001d90: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00001da0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00001db0: 7574 0a20 2020 2072 6574 7572 6e20 6177  ut.    return aw
-00001dc0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-00001dd0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00001de0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00001df0: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
-00001e00: 6465 6620 6765 745f 7765 6268 6f6f 6b5f  def get_webhook_
-00001e10: 696e 666f 2874 6f6b 656e 2c20 7469 6d65  info(token, time
-00001e20: 6f75 743d 4e6f 6e65 293a 0a20 2020 206d  out=None):.    m
-00001e30: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
-00001e40: 7457 6562 686f 6f6b 496e 666f 270a 2020  tWebhookInfo'.  
-00001e50: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-00001e60: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-00001e70: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00001e80: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
-00001e90: 6f75 740a 2020 2020 7265 7475 726e 2061  out.    return a
-00001ea0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00001eb0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00001ec0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00001ed0: 7061 796c 6f61 6429 0a0a 0a0a 6173 796e  payload)....asyn
-00001ee0: 6320 6465 6620 6765 745f 7570 6461 7465  c def get_update
-00001ef0: 7328 746f 6b65 6e2c 206f 6666 7365 743d  s(token, offset=
-00001f00: 4e6f 6e65 2c20 6c69 6d69 743d 4e6f 6e65  None, limit=None
-00001f10: 2c0a 2020 2020 2020 2020 7469 6d65 6f75  ,.        timeou
-00001f20: 743d 4e6f 6e65 2c20 616c 6c6f 7765 645f  t=None, allowed_
-00001f30: 7570 6461 7465 733d 4e6f 6e65 2c20 7265  updates=None, re
-00001f40: 7175 6573 745f 7469 6d65 6f75 743d 4e6f  quest_timeout=No
-00001f50: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00001f60: 6e61 6d65 203d 2027 6765 7455 7064 6174  name = 'getUpdat
-00001f70: 6573 270a 2020 2020 7061 7261 6d73 203d  es'.    params =
-00001f80: 207b 7d0a 2020 2020 6966 206f 6666 7365   {}.    if offse
-00001f90: 743a 0a20 2020 2020 2020 2070 6172 616d  t:.        param
-00001fa0: 735b 276f 6666 7365 7427 5d20 3d20 6f66  s['offset'] = of
-00001fb0: 6673 6574 0a20 2020 2069 6620 6c69 6d69  fset.    if limi
-00001fc0: 743a 0a20 2020 2020 2020 2070 6172 616d  t:.        param
-00001fd0: 735b 276c 696d 6974 275d 203d 206c 696d  s['limit'] = lim
-00001fe0: 6974 0a20 2020 2069 6620 7469 6d65 6f75  it.    if timeou
-00001ff0: 743a 0a20 2020 2020 2020 2070 6172 616d  t:.        param
-00002000: 735b 2774 696d 656f 7574 275d 203d 2074  s['timeout'] = t
-00002010: 696d 656f 7574 0a20 2020 2069 6620 616c  imeout.    if al
-00002020: 6c6f 7765 645f 7570 6461 7465 733a 0a20  lowed_updates:. 
-00002030: 2020 2020 2020 2070 6172 616d 735b 2761         params['a
-00002040: 6c6c 6f77 6564 5f75 7064 6174 6573 275d  llowed_updates']
-00002050: 203d 2061 6c6c 6f77 6564 5f75 7064 6174   = allowed_updat
-00002060: 6573 0a20 2020 2072 6574 7572 6e20 6177  es.    return aw
-00002070: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-00002080: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00002090: 6f64 5f6e 616d 652c 2070 6172 616d 733d  od_name, params=
-000020a0: 7061 7261 6d73 2c20 7265 7175 6573 745f  params, request_
-000020b0: 7469 6d65 6f75 743d 7265 7175 6573 745f  timeout=request_
-000020c0: 7469 6d65 6f75 7429 0a0a 6173 796e 6320  timeout)..async 
-000020d0: 6465 6620 5f63 6865 636b 5f72 6573 756c  def _check_resul
-000020e0: 7428 6d65 7468 6f64 5f6e 616d 652c 2072  t(method_name, r
-000020f0: 6573 756c 7429 3a0a 2020 2020 2222 220a  esult):.    """.
-00002100: 2020 2020 4368 6563 6b73 2077 6865 7468      Checks wheth
-00002110: 6572 2060 7265 7375 6c74 6020 6973 2061  er `result` is a
-00002120: 2076 616c 6964 2041 5049 2072 6573 706f   valid API respo
-00002130: 6e73 652e 0a20 2020 2041 2072 6573 756c  nse..    A resul
-00002140: 7420 6973 2063 6f6e 7369 6465 7265 6420  t is considered 
-00002150: 696e 7661 6c69 6420 6966 3a0a 2020 2020  invalid if:.    
-00002160: 2020 2020 2d20 5468 6520 7365 7276 6572      - The server
-00002170: 2072 6574 7572 6e65 6420 616e 2048 5454   returned an HTT
-00002180: 5020 7265 7370 6f6e 7365 2063 6f64 6520  P response code 
-00002190: 6f74 6865 7220 7468 616e 2032 3030 0a20  other than 200. 
-000021a0: 2020 2020 2020 202d 2054 6865 2063 6f6e         - The con
-000021b0: 7465 6e74 206f 6620 7468 6520 7265 7375  tent of the resu
-000021c0: 6c74 2069 7320 696e 7661 6c69 6420 4a53  lt is invalid JS
-000021d0: 4f4e 2e0a 2020 2020 2020 2020 2d20 5468  ON..        - Th
-000021e0: 6520 6d65 7468 6f64 2063 616c 6c20 7761  e method call wa
-000021f0: 7320 756e 7375 6363 6573 7366 756c 2028  s unsuccessful (
-00002200: 5468 6520 4a53 4f4e 2027 6f6b 2720 6669  The JSON 'ok' fi
-00002210: 656c 6420 6571 7561 6c73 2046 616c 7365  eld equals False
-00002220: 290a 0a20 2020 203a 7261 6973 6573 2041  )..    :raises A
-00002230: 7069 4578 6365 7074 696f 6e3a 2069 6620  piException: if 
-00002240: 6f6e 6520 6f66 2074 6865 2061 626f 7665  one of the above
-00002250: 206c 6973 7465 6420 6361 7365 7320 6973   listed cases is
-00002260: 2061 7070 6c69 6361 626c 650a 2020 2020   applicable.    
-00002270: 3a70 6172 616d 206d 6574 686f 645f 6e61  :param method_na
-00002280: 6d65 3a20 5468 6520 6e61 6d65 206f 6620  me: The name of 
-00002290: 7468 6520 6d65 7468 6f64 2063 616c 6c65  the method calle
-000022a0: 640a 2020 2020 3a70 6172 616d 2072 6573  d.    :param res
-000022b0: 756c 743a 2054 6865 2072 6574 7572 6e65  ult: The returne
-000022c0: 6420 7265 7375 6c74 206f 6620 7468 6520  d result of the 
-000022d0: 6d65 7468 6f64 2072 6571 7565 7374 0a20  method request. 
-000022e0: 2020 203a 7265 7475 726e 3a20 5468 6520     :return: The 
-000022f0: 7265 7375 6c74 2070 6172 7365 6420 746f  result parsed to
-00002300: 2061 204a 534f 4e20 6469 6374 696f 6e61   a JSON dictiona
-00002310: 7279 2e0a 2020 2020 2222 220a 2020 2020  ry..    """.    
-00002320: 7472 793a 0a20 2020 2020 2020 2072 6573  try:.        res
-00002330: 756c 745f 6a73 6f6e 203d 2061 7761 6974  ult_json = await
-00002340: 2072 6573 756c 742e 6a73 6f6e 2865 6e63   result.json(enc
-00002350: 6f64 696e 673d 2275 7466 2d38 2229 0a20  oding="utf-8"). 
-00002360: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00002370: 2020 2069 6620 7265 7375 6c74 2e73 7461     if result.sta
-00002380: 7475 735f 636f 6465 2021 3d20 3230 303a  tus_code != 200:
-00002390: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000023a0: 7365 2041 7069 4854 5450 4578 6365 7074  se ApiHTTPExcept
-000023b0: 696f 6e28 6d65 7468 6f64 5f6e 616d 652c  ion(method_name,
-000023c0: 2072 6573 756c 7429 0a20 2020 2020 2020   result).       
-000023d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000023e0: 2020 2072 6169 7365 2041 7069 496e 7661     raise ApiInva
-000023f0: 6c69 644a 534f 4e45 7863 6570 7469 6f6e  lidJSONException
-00002400: 286d 6574 686f 645f 6e61 6d65 2c20 7265  (method_name, re
-00002410: 7375 6c74 290a 2020 2020 656c 7365 3a20  sult).    else: 
-00002420: 2020 200a 2020 2020 2020 2020 6966 206e     .        if n
-00002430: 6f74 2072 6573 756c 745f 6a73 6f6e 5b27  ot result_json['
-00002440: 6f6b 275d 3a0a 2020 2020 2020 2020 2020  ok']:.          
-00002450: 2020 7261 6973 6520 4170 6954 656c 6567    raise ApiTeleg
-00002460: 7261 6d45 7863 6570 7469 6f6e 286d 6574  ramException(met
-00002470: 686f 645f 6e61 6d65 2c20 7265 7375 6c74  hod_name, result
-00002480: 2c20 7265 7375 6c74 5f6a 736f 6e29 0a20  , result_json). 
-00002490: 2020 2020 2020 2020 2020 200a 2020 2020             .    
-000024a0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-000024b0: 745f 6a73 6f6e 0a0a 0a61 7379 6e63 2064  t_json...async d
-000024c0: 6566 2073 656e 645f 6d65 7373 6167 6528  ef send_message(
-000024d0: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
-000024e0: 6368 6174 5f69 642c 2074 6578 742c 0a20  chat_id, text,. 
-000024f0: 2020 2020 2020 2064 6973 6162 6c65 5f77         disable_w
-00002500: 6562 5f70 6167 655f 7072 6576 6965 773d  eb_page_preview=
-00002510: 4e6f 6e65 2c20 7265 706c 795f 746f 5f6d  None, reply_to_m
-00002520: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-00002530: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
-00002540: 652c 0a20 2020 2020 2020 2070 6172 7365  e,.        parse
-00002550: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
-00002560: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00002570: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
-00002580: 6f6e 652c 0a20 2020 2020 2020 2065 6e74  one,.        ent
-00002590: 6974 6965 733d 4e6f 6e65 2c20 616c 6c6f  ities=None, allo
-000025a0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-000025b0: 745f 7265 706c 793d 4e6f 6e65 2c20 7072  t_reply=None, pr
-000025c0: 6f74 6563 745f 636f 6e74 656e 743d 4e6f  otect_content=No
-000025d0: 6e65 2c0a 2020 2020 2020 2020 6d65 7373  ne,.        mess
-000025e0: 6167 655f 7468 7265 6164 5f69 643d 4e6f  age_thread_id=No
-000025f0: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-00002600: 6e61 6d65 203d 2027 7365 6e64 4d65 7373  name = 'sendMess
-00002610: 6167 6527 0a20 2020 2070 6172 616d 7320  age'.    params 
-00002620: 3d20 7b27 6368 6174 5f69 6427 3a20 7374  = {'chat_id': st
-00002630: 7228 6368 6174 5f69 6429 2c20 2774 6578  r(chat_id), 'tex
-00002640: 7427 3a20 7465 7874 7d0a 2020 2020 6966  t': text}.    if
-00002650: 2064 6973 6162 6c65 5f77 6562 5f70 6167   disable_web_pag
-00002660: 655f 7072 6576 6965 7720 6973 206e 6f74  e_preview is not
-00002670: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00002680: 6172 616d 735b 2764 6973 6162 6c65 5f77  arams['disable_w
-00002690: 6562 5f70 6167 655f 7072 6576 6965 7727  eb_page_preview'
-000026a0: 5d20 3d20 6469 7361 626c 655f 7765 625f  ] = disable_web_
-000026b0: 7061 6765 5f70 7265 7669 6577 0a20 2020  page_preview.   
-000026c0: 2069 6620 7265 706c 795f 746f 5f6d 6573   if reply_to_mes
-000026d0: 7361 6765 5f69 643a 0a20 2020 2020 2020  sage_id:.       
-000026e0: 2070 6172 616d 735b 2772 6570 6c79 5f74   params['reply_t
-000026f0: 6f5f 6d65 7373 6167 655f 6964 275d 203d  o_message_id'] =
-00002700: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00002710: 655f 6964 0a20 2020 2069 6620 7265 706c  e_id.    if repl
-00002720: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-00002730: 2020 7061 7261 6d73 5b27 7265 706c 795f    params['reply_
-00002740: 6d61 726b 7570 275d 203d 2061 7761 6974  markup'] = await
-00002750: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-00002760: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-00002770: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
-00002780: 3a0a 2020 2020 2020 2020 7061 7261 6d73  :.        params
-00002790: 5b27 7061 7273 655f 6d6f 6465 275d 203d  ['parse_mode'] =
-000027a0: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
-000027b0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-000027c0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-000027d0: 6f6e 653a 0a20 2020 2020 2020 2070 6172  one:.        par
-000027e0: 616d 735b 2764 6973 6162 6c65 5f6e 6f74  ams['disable_not
-000027f0: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-00002800: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00002810: 6f6e 0a20 2020 2069 6620 7469 6d65 6f75  on.    if timeou
-00002820: 743a 0a20 2020 2020 2020 2070 6172 616d  t:.        param
-00002830: 735b 2774 696d 656f 7574 275d 203d 2074  s['timeout'] = t
-00002840: 696d 656f 7574 0a20 2020 2069 6620 656e  imeout.    if en
-00002850: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-00002860: 7061 7261 6d73 5b27 656e 7469 7469 6573  params['entities
-00002870: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
-00002880: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-00002890: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-000028a0: 6963 7473 2865 6e74 6974 6965 7329 290a  icts(entities)).
-000028b0: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
-000028c0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-000028d0: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ly is not None:.
-000028e0: 2020 2020 2020 2020 7061 7261 6d73 5b27          params['
-000028f0: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00002900: 7468 6f75 745f 7265 706c 7927 5d20 3d20  thout_reply'] = 
-00002910: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00002920: 7468 6f75 745f 7265 706c 790a 2020 2020  thout_reply.    
-00002930: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-00002940: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0a  nt is not None:.
-00002950: 2020 2020 2020 2020 7061 7261 6d73 5b27          params['
-00002960: 7072 6f74 6563 745f 636f 6e74 656e 7427  protect_content'
-00002970: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
-00002980: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
-00002990: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
-000029a0: 2020 2020 2020 7061 7261 6d73 5b27 6d65        params['me
-000029b0: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
-000029c0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-000029d0: 6164 5f69 640a 2020 2020 0a20 2020 2072  ad_id.    .    r
-000029e0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-000029f0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00002a00: 656e 2c20 6d65 7468 6f64 5f6e 616d 652c  en, method_name,
-00002a10: 2070 6172 616d 733d 7061 7261 6d73 290a   params=params).
-00002a20: 0a23 206d 6574 686f 6473 0a0a 6173 796e  .# methods..asyn
-00002a30: 6320 6465 6620 6765 745f 7573 6572 5f70  c def get_user_p
-00002a40: 726f 6669 6c65 5f70 686f 746f 7328 746f  rofile_photos(to
-00002a50: 6b65 6e2c 2075 7365 725f 6964 2c20 6f66  ken, user_id, of
-00002a60: 6673 6574 3d4e 6f6e 652c 206c 696d 6974  fset=None, limit
-00002a70: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-00002a80: 6f64 5f75 726c 203d 2072 2767 6574 5573  od_url = r'getUs
-00002a90: 6572 5072 6f66 696c 6550 686f 746f 7327  erProfilePhotos'
-00002aa0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00002ab0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
-00002ac0: 6964 7d0a 2020 2020 6966 206f 6666 7365  id}.    if offse
-00002ad0: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00002ae0: 6164 5b27 6f66 6673 6574 275d 203d 206f  ad['offset'] = o
-00002af0: 6666 7365 740a 2020 2020 6966 206c 696d  ffset.    if lim
-00002b00: 6974 3a0a 2020 2020 2020 2020 7061 796c  it:.        payl
-00002b10: 6f61 645b 276c 696d 6974 275d 203d 206c  oad['limit'] = l
-00002b20: 696d 6974 0a20 2020 2072 6574 7572 6e20  imit.    return 
-00002b30: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00002b40: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00002b50: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00002b60: 3d70 6179 6c6f 6164 290a 0a0a 6173 796e  =payload)...asyn
-00002b70: 6320 6465 6620 6765 745f 6368 6174 2874  c def get_chat(t
-00002b80: 6f6b 656e 2c20 6368 6174 5f69 6429 3a0a  oken, chat_id):.
-00002b90: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00002ba0: 2072 2767 6574 4368 6174 270a 2020 2020   r'getChat'.    
-00002bb0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-00002bc0: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
-00002bd0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00002be0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-00002bf0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00002c00: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-00002c10: 6164 290a 0a0a 6173 796e 6320 6465 6620  ad)...async def 
-00002c20: 6c65 6176 655f 6368 6174 2874 6f6b 656e  leave_chat(token
-00002c30: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-00002c40: 6d65 7468 6f64 5f75 726c 203d 2072 276c  method_url = r'l
-00002c50: 6561 7665 4368 6174 270a 2020 2020 7061  eaveChat'.    pa
-00002c60: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00002c70: 6427 3a20 6368 6174 5f69 647d 0a20 2020  d': chat_id}.   
-00002c80: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00002c90: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00002ca0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00002cb0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00002cc0: 290a 0a0a 6173 796e 6320 6465 6620 6765  )...async def ge
-00002cd0: 745f 6368 6174 5f61 646d 696e 6973 7472  t_chat_administr
-00002ce0: 6174 6f72 7328 746f 6b65 6e2c 2063 6861  ators(token, cha
-00002cf0: 745f 6964 293a 0a20 2020 206d 6574 686f  t_id):.    metho
-00002d00: 645f 7572 6c20 3d20 7227 6765 7443 6861  d_url = r'getCha
-00002d10: 7441 646d 696e 6973 7472 6174 6f72 7327  tAdministrators'
-00002d20: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00002d30: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-00002d40: 6964 7d0a 2020 2020 7265 7475 726e 2061  id}.    return a
-00002d50: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00002d60: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00002d70: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00002d80: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-00002d90: 2064 6566 2067 6574 5f63 6861 745f 6d65   def get_chat_me
-00002da0: 6d62 6572 5f63 6f75 6e74 2874 6f6b 656e  mber_count(token
-00002db0: 2c20 6368 6174 5f69 6429 3a0a 2020 2020  , chat_id):.    
-00002dc0: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
-00002dd0: 6574 4368 6174 4d65 6d62 6572 436f 756e  etChatMemberCoun
-00002de0: 7427 0a20 2020 2070 6179 6c6f 6164 203d  t'.    payload =
-00002df0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-00002e00: 745f 6964 7d0a 2020 2020 7265 7475 726e  t_id}.    return
-00002e10: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00002e20: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00002e30: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00002e40: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
-00002e50: 6e63 2064 6566 2073 6574 5f73 7469 636b  nc def set_stick
-00002e60: 6572 5f73 6574 5f74 6875 6d62 2874 6f6b  er_set_thumb(tok
-00002e70: 656e 2c20 6e61 6d65 2c20 7573 6572 5f69  en, name, user_i
-00002e80: 642c 2074 6875 6d62 293a 0a20 2020 206d  d, thumb):.    m
-00002e90: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
-00002ea0: 7453 7469 636b 6572 5365 7454 6875 6d62  tStickerSetThumb
-00002eb0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-00002ec0: 7b27 6e61 6d65 273a 206e 616d 652c 2027  {'name': name, '
-00002ed0: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
-00002ee0: 647d 0a20 2020 2066 696c 6573 203d 207b  d}.    files = {
-00002ef0: 7d0a 2020 2020 6966 2074 6875 6d62 3a0a  }.    if thumb:.
-00002f00: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00002f10: 7369 6e73 7461 6e63 6528 7468 756d 622c  sinstance(thumb,
-00002f20: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
-00002f30: 2020 2066 696c 6573 5b27 7468 756d 6227     files['thumb'
-00002f40: 5d20 3d20 7468 756d 620a 2020 2020 2020  ] = thumb.      
-00002f50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00002f60: 2020 2020 7061 796c 6f61 645b 2774 6875      payload['thu
-00002f70: 6d62 275d 203d 2074 6875 6d62 0a20 2020  mb'] = thumb.   
-00002f80: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00002f90: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00002fa0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00002fb0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00002fc0: 2c20 6669 6c65 733d 6669 6c65 7320 6f72  , files=files or
-00002fd0: 204e 6f6e 6529 0a0a 0a61 7379 6e63 2064   None)...async d
-00002fe0: 6566 2073 6574 5f63 6861 745f 7374 6963  ef set_chat_stic
-00002ff0: 6b65 725f 7365 7428 746f 6b65 6e2c 2063  ker_set(token, c
-00003000: 6861 745f 6964 2c20 7374 6963 6b65 725f  hat_id, sticker_
-00003010: 7365 745f 6e61 6d65 293a 0a20 2020 206d  set_name):.    m
-00003020: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
-00003030: 7443 6861 7453 7469 636b 6572 5365 7427  tChatStickerSet'
-00003040: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00003050: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-00003060: 6964 2c20 2773 7469 636b 6572 5f73 6574  id, 'sticker_set
-00003070: 5f6e 616d 6527 3a20 7374 6963 6b65 725f  _name': sticker_
-00003080: 7365 745f 6e61 6d65 7d0a 2020 2020 7265  set_name}.    re
-00003090: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-000030a0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-000030b0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-000030c0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-000030d0: 0a61 7379 6e63 2064 6566 2064 656c 6574  .async def delet
-000030e0: 655f 6368 6174 5f73 7469 636b 6572 5f73  e_chat_sticker_s
-000030f0: 6574 2874 6f6b 656e 2c20 6368 6174 5f69  et(token, chat_i
-00003100: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00003110: 726c 203d 2072 2764 656c 6574 6543 6861  rl = r'deleteCha
-00003120: 7453 7469 636b 6572 5365 7427 0a20 2020  tStickerSet'.   
-00003130: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00003140: 745f 6964 273a 2063 6861 745f 6964 7d0a  t_id': chat_id}.
-00003150: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00003160: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-00003170: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00003180: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00003190: 6f61 6429 0a0a 0a61 7379 6e63 2064 6566  oad)...async def
-000031a0: 2061 6e73 7765 725f 7765 625f 6170 705f   answer_web_app_
-000031b0: 7175 6572 7928 746f 6b65 6e2c 2077 6562  query(token, web
-000031c0: 5f61 7070 5f71 7565 7279 5f69 642c 2072  _app_query_id, r
-000031d0: 6573 756c 743a 2074 7970 6573 2e49 6e6c  esult: types.Inl
-000031e0: 696e 6551 7565 7279 5265 7375 6c74 4261  ineQueryResultBa
-000031f0: 7365 293a 0a20 2020 206d 6574 686f 645f  se):.    method_
-00003200: 7572 6c20 3d20 2761 6e73 7765 7257 6562  url = 'answerWeb
-00003210: 4170 7051 7565 7279 270a 2020 2020 7061  AppQuery'.    pa
-00003220: 796c 6f61 6420 3d20 7b27 7765 625f 6170  yload = {'web_ap
-00003230: 705f 7175 6572 795f 6964 273a 2077 6562  p_query_id': web
-00003240: 5f61 7070 5f71 7565 7279 5f69 642c 2027  _app_query_id, '
-00003250: 7265 7375 6c74 273a 2072 6573 756c 742e  result': result.
-00003260: 746f 5f6a 736f 6e28 297d 0a20 2020 2072  to_json()}.    r
-00003270: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00003280: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00003290: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-000032a0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-000032b0: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-000032c0: 0a61 7379 6e63 2064 6566 2067 6574 5f63  .async def get_c
-000032d0: 6861 745f 6d65 6d62 6572 2874 6f6b 656e  hat_member(token
-000032e0: 2c20 6368 6174 5f69 642c 2075 7365 725f  , chat_id, user_
-000032f0: 6964 293a 0a20 2020 206d 6574 686f 645f  id):.    method_
-00003300: 7572 6c20 3d20 7227 6765 7443 6861 744d  url = r'getChatM
-00003310: 656d 6265 7227 0a20 2020 2070 6179 6c6f  ember'.    paylo
-00003320: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00003330: 2063 6861 745f 6964 2c20 2775 7365 725f   chat_id, 'user_
-00003340: 6964 273a 2075 7365 725f 6964 7d0a 2020  id': user_id}.  
-00003350: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00003360: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00003370: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00003380: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00003390: 6429 0a0a 0a61 7379 6e63 2064 6566 2066  d)...async def f
-000033a0: 6f72 7761 7264 5f6d 6573 7361 6765 280a  orward_message(.
-000033b0: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
-000033c0: 6861 745f 6964 2c20 6672 6f6d 5f63 6861  hat_id, from_cha
-000033d0: 745f 6964 2c20 6d65 7373 6167 655f 6964  t_id, message_id
-000033e0: 2c0a 2020 2020 2020 2020 6469 7361 626c  ,.        disabl
-000033f0: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-00003400: 6f6e 652c 2074 696d 656f 7574 3d4e 6f6e  one, timeout=Non
-00003410: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-00003420: 6e74 3d4e 6f6e 652c 0a20 2020 2020 2020  nt=None,.       
-00003430: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00003440: 6964 3d4e 6f6e 6529 3a0a 2020 2020 6d65  id=None):.    me
-00003450: 7468 6f64 5f75 726c 203d 2072 2766 6f72  thod_url = r'for
-00003460: 7761 7264 4d65 7373 6167 6527 0a20 2020  wardMessage'.   
-00003470: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-00003480: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
-00003490: 2766 726f 6d5f 6368 6174 5f69 6427 3a20  'from_chat_id': 
-000034a0: 6672 6f6d 5f63 6861 745f 6964 2c20 276d  from_chat_id, 'm
-000034b0: 6573 7361 6765 5f69 6427 3a20 6d65 7373  essage_id': mess
-000034c0: 6167 655f 6964 7d0a 2020 2020 6966 2064  age_id}.    if d
-000034d0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-000034e0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-000034f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00003500: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
-00003510: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
-00003520: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
-00003530: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00003540: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00003550: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00003560: 656f 7574 0a20 2020 2069 6620 7072 6f74  eout.    if prot
-00003570: 6563 745f 636f 6e74 656e 7420 6973 206e  ect_content is n
-00003580: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00003590: 2070 6179 6c6f 6164 5b27 7072 6f74 6563   payload['protec
-000035a0: 745f 636f 6e74 656e 7427 5d20 3d20 7072  t_content'] = pr
-000035b0: 6f74 6563 745f 636f 6e74 656e 740a 2020  otect_content.  
-000035c0: 2020 6966 206d 6573 7361 6765 5f74 6872    if message_thr
-000035d0: 6561 645f 6964 3a0a 2020 2020 2020 2020  ead_id:.        
-000035e0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-000035f0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
-00003600: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00003610: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00003620: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00003630: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00003640: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00003650: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
-00003660: 6620 636f 7079 5f6d 6573 7361 6765 2874  f copy_message(t
-00003670: 6f6b 656e 2c20 6368 6174 5f69 642c 2066  oken, chat_id, f
-00003680: 726f 6d5f 6368 6174 5f69 642c 206d 6573  rom_chat_id, mes
-00003690: 7361 6765 5f69 642c 2063 6170 7469 6f6e  sage_id, caption
-000036a0: 3d4e 6f6e 652c 2070 6172 7365 5f6d 6f64  =None, parse_mod
-000036b0: 653d 4e6f 6e65 2c20 6361 7074 696f 6e5f  e=None, caption_
-000036c0: 656e 7469 7469 6573 3d4e 6f6e 652c 0a20  entities=None,. 
-000036d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036e0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-000036f0: 7469 6f6e 3d4e 6f6e 652c 2072 6570 6c79  tion=None, reply
-00003700: 5f74 6f5f 6d65 7373 6167 655f 6964 3d4e  _to_message_id=N
-00003710: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
-00003720: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00003730: 3d4e 6f6e 652c 0a20 2020 2020 2020 2020  =None,.         
-00003740: 2020 2020 2020 2020 7265 706c 795f 6d61          reply_ma
-00003750: 726b 7570 3d4e 6f6e 652c 2074 696d 656f  rkup=None, timeo
-00003760: 7574 3d4e 6f6e 652c 2070 726f 7465 6374  ut=None, protect
-00003770: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 206d  _content=None, m
-00003780: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00003790: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-000037a0: 6f64 5f75 726c 203d 2072 2763 6f70 794d  od_url = r'copyM
-000037b0: 6573 7361 6765 270a 2020 2020 7061 796c  essage'.    payl
-000037c0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-000037d0: 3a20 6368 6174 5f69 642c 2027 6672 6f6d  : chat_id, 'from
-000037e0: 5f63 6861 745f 6964 273a 2066 726f 6d5f  _chat_id': from_
-000037f0: 6368 6174 5f69 642c 2027 6d65 7373 6167  chat_id, 'messag
-00003800: 655f 6964 273a 206d 6573 7361 6765 5f69  e_id': message_i
-00003810: 647d 0a20 2020 2069 6620 6361 7074 696f  d}.    if captio
-00003820: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00003830: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00003840: 6361 7074 696f 6e27 5d20 3d20 6361 7074  caption'] = capt
-00003850: 696f 6e0a 2020 2020 6966 2070 6172 7365  ion.    if parse
-00003860: 5f6d 6f64 653a 0a20 2020 2020 2020 2070  _mode:.        p
-00003870: 6179 6c6f 6164 5b27 7061 7273 655f 6d6f  ayload['parse_mo
-00003880: 6465 275d 203d 2070 6172 7365 5f6d 6f64  de'] = parse_mod
-00003890: 650a 2020 2020 6966 2063 6170 7469 6f6e  e.    if caption
-000038a0: 5f65 6e74 6974 6965 7320 6973 206e 6f74  _entities is not
-000038b0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-000038c0: 6179 6c6f 6164 5b27 6361 7074 696f 6e5f  ayload['caption_
-000038d0: 656e 7469 7469 6573 275d 203d 2061 7761  entities'] = awa
-000038e0: 6974 205f 636f 6e76 6572 745f 656e 7469  it _convert_enti
-000038f0: 7465 7328 6361 7074 696f 6e5f 656e 7469  tes(caption_enti
-00003900: 7469 6573 290a 2020 2020 6966 2064 6973  ties).    if dis
-00003910: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00003920: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00003930: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00003940: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00003950: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00003960: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00003970: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
-00003980: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-00003990: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-000039a0: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
-000039b0: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
-000039c0: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
-000039d0: 706c 795f 6d61 726b 7570 2069 7320 6e6f  ply_markup is no
-000039e0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000039f0: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00003a00: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-00003a10: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00003a20: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00003a30: 2020 6966 2061 6c6c 6f77 5f73 656e 6469    if allow_sendi
-00003a40: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00003a50: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00003a60: 2020 2020 2020 7061 796c 6f61 645b 2761        payload['a
-00003a70: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00003a80: 686f 7574 5f72 6570 6c79 275d 203d 2061  hout_reply'] = a
-00003a90: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00003aa0: 686f 7574 5f72 6570 6c79 0a20 2020 2069  hout_reply.    i
-00003ab0: 6620 7469 6d65 6f75 743a 0a20 2020 2020  f timeout:.     
-00003ac0: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
-00003ad0: 6f75 7427 5d20 3d20 7469 6d65 6f75 740a  out'] = timeout.
-00003ae0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
-00003af0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
-00003b00: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00003b10: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
-00003b20: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
-00003b30: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-00003b40: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00003b50: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00003b60: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
-00003b70: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
-00003b80: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
-00003b90: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-00003ba0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-00003bb0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00003bc0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00003bd0: 0a0a 0a61 7379 6e63 2064 6566 2073 656e  ...async def sen
-00003be0: 645f 6469 6365 280a 2020 2020 2020 2020  d_dice(.        
-00003bf0: 746f 6b65 6e2c 2063 6861 745f 6964 2c0a  token, chat_id,.
-00003c00: 2020 2020 2020 2020 656d 6f6a 693d 4e6f          emoji=No
-00003c10: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-00003c20: 6669 6361 7469 6f6e 3d4e 6f6e 652c 2072  fication=None, r
-00003c30: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00003c40: 6964 3d4e 6f6e 652c 0a20 2020 2020 2020  id=None,.       
-00003c50: 2072 6570 6c79 5f6d 6172 6b75 703d 4e6f   reply_markup=No
-00003c60: 6e65 2c20 7469 6d65 6f75 743d 4e6f 6e65  ne, timeout=None
-00003c70: 2c20 616c 6c6f 775f 7365 6e64 696e 675f  , allow_sending_
-00003c80: 7769 7468 6f75 745f 7265 706c 793d 4e6f  without_reply=No
-00003c90: 6e65 2c20 7072 6f74 6563 745f 636f 6e74  ne, protect_cont
-00003ca0: 656e 743d 4e6f 6e65 2c0a 2020 2020 2020  ent=None,.      
-00003cb0: 2020 6d65 7373 6167 655f 7468 7265 6164    message_thread
-00003cc0: 5f69 643d 4e6f 6e65 293a 0a20 2020 206d  _id=None):.    m
-00003cd0: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
-00003ce0: 6e64 4469 6365 270a 2020 2020 7061 796c  ndDice'.    payl
-00003cf0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-00003d00: 3a20 6368 6174 5f69 647d 0a20 2020 2069  : chat_id}.    i
-00003d10: 6620 656d 6f6a 693a 0a20 2020 2020 2020  f emoji:.       
-00003d20: 2070 6179 6c6f 6164 5b27 656d 6f6a 6927   payload['emoji'
-00003d30: 5d20 3d20 656d 6f6a 690a 2020 2020 6966  ] = emoji.    if
-00003d40: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00003d50: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00003d60: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00003d70: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
-00003d80: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
-00003d90: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00003da0: 6e0a 2020 2020 6966 2072 6570 6c79 5f74  n.    if reply_t
-00003db0: 6f5f 6d65 7373 6167 655f 6964 3a0a 2020  o_message_id:.  
-00003dc0: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
-00003dd0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00003de0: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
-00003df0: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-00003e00: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-00003e10: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00003e20: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-00003e30: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-00003e40: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00003e50: 726b 7570 290a 2020 2020 6966 2074 696d  rkup).    if tim
-00003e60: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-00003e70: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
-00003e80: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
-00003e90: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
-00003ea0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
-00003eb0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00003ec0: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-00003ed0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00003ee0: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
-00003ef0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00003f00: 745f 7265 706c 790a 2020 2020 6966 2070  t_reply.    if p
-00003f10: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-00003f20: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00003f30: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-00003f40: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
-00003f50: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00003f60: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-00003f70: 7468 7265 6164 5f69 643a 0a20 2020 2020  thread_id:.     
-00003f80: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
-00003f90: 6167 655f 7468 7265 6164 5f69 6427 5d20  age_thread_id'] 
-00003fa0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-00003fb0: 5f69 640a 2020 2020 7265 7475 726e 2061  _id.    return a
-00003fc0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00003fd0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00003fe0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00003ff0: 7061 796c 6f61 6429 0a0a 0a61 7379 6e63  payload)...async
-00004000: 2064 6566 2073 656e 645f 7068 6f74 6f28   def send_photo(
-00004010: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
-00004020: 6368 6174 5f69 642c 2070 686f 746f 2c0a  chat_id, photo,.
-00004030: 2020 2020 2020 2020 6361 7074 696f 6e3d          caption=
-00004040: 4e6f 6e65 2c20 7265 706c 795f 746f 5f6d  None, reply_to_m
-00004050: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-00004060: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
-00004070: 652c 0a20 2020 2020 2020 2070 6172 7365  e,.        parse
-00004080: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
-00004090: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-000040a0: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
-000040b0: 6f6e 652c 0a20 2020 2020 2020 2063 6170  one,.        cap
-000040c0: 7469 6f6e 5f65 6e74 6974 6965 733d 4e6f  tion_entities=No
-000040d0: 6e65 2c20 616c 6c6f 775f 7365 6e64 696e  ne, allow_sendin
-000040e0: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
-000040f0: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
-00004100: 6e74 656e 743d 4e6f 6e65 2c0a 2020 2020  ntent=None,.    
-00004110: 2020 2020 6d65 7373 6167 655f 7468 7265      message_thre
-00004120: 6164 5f69 643d 4e6f 6e65 293a 0a20 2020  ad_id=None):.   
-00004130: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
-00004140: 7365 6e64 5068 6f74 6f27 0a20 2020 2070  sendPhoto'.    p
-00004150: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-00004160: 6964 273a 2063 6861 745f 6964 7d0a 2020  id': chat_id}.  
-00004170: 2020 6669 6c65 7320 3d20 4e6f 6e65 0a20    files = None. 
-00004180: 2020 2069 6620 7574 696c 2e69 735f 7374     if util.is_st
-00004190: 7269 6e67 2870 686f 746f 293a 0a20 2020  ring(photo):.   
-000041a0: 2020 2020 2070 6179 6c6f 6164 5b27 7068       payload['ph
-000041b0: 6f74 6f27 5d20 3d20 7068 6f74 6f0a 2020  oto'] = photo.  
-000041c0: 2020 656c 6966 2075 7469 6c2e 6973 5f70    elif util.is_p
-000041d0: 696c 5f69 6d61 6765 2870 686f 746f 293a  il_image(photo):
-000041e0: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
-000041f0: 207b 2770 686f 746f 273a 2075 7469 6c2e   {'photo': util.
-00004200: 7069 6c5f 696d 6167 655f 746f 5f66 696c  pil_image_to_fil
-00004210: 6528 7068 6f74 6f29 7d0a 2020 2020 656c  e(photo)}.    el
-00004220: 7365 3a0a 2020 2020 2020 2020 6669 6c65  se:.        file
-00004230: 7320 3d20 7b27 7068 6f74 6f27 3a20 7068  s = {'photo': ph
-00004240: 6f74 6f7d 0a20 2020 2069 6620 6361 7074  oto}.    if capt
-00004250: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
-00004260: 6c6f 6164 5b27 6361 7074 696f 6e27 5d20  load['caption'] 
-00004270: 3d20 6361 7074 696f 6e0a 2020 2020 6966  = caption.    if
-00004280: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00004290: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-000042a0: 796c 6f61 645b 2772 6570 6c79 5f74 6f5f  yload['reply_to_
-000042b0: 6d65 7373 6167 655f 6964 275d 203d 2072  message_id'] = r
-000042c0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-000042d0: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-000042e0: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-000042f0: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00004300: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-00004310: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00004320: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00004330: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
-00004340: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004350: 5b27 7061 7273 655f 6d6f 6465 275d 203d  ['parse_mode'] =
-00004360: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
-00004370: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-00004380: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-00004390: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-000043a0: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
-000043b0: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
-000043c0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-000043d0: 696f 6e0a 2020 2020 6966 2074 696d 656f  ion.    if timeo
-000043e0: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-000043f0: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
-00004400: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
-00004410: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00004420: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00004430: 645b 2763 6170 7469 6f6e 5f65 6e74 6974  d['caption_entit
-00004440: 6965 7327 5d20 3d20 6a73 6f6e 2e64 756d  ies'] = json.dum
-00004450: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
-00004460: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
-00004470: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
-00004480: 656e 7469 7469 6573 2929 0a20 2020 2069  entities)).    i
-00004490: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
-000044a0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
-000044b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000044c0: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-000044d0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-000044e0: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
-000044f0: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00004500: 745f 7265 706c 790a 2020 2020 6966 2070  t_reply.    if p
-00004510: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-00004520: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00004530: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-00004540: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
-00004550: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00004560: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
-00004570: 7468 7265 6164 5f69 643a 0a20 2020 2020  thread_id:.     
-00004580: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
-00004590: 6167 655f 7468 7265 6164 5f69 6427 5d20  age_thread_id'] 
-000045a0: 3d20 6d65 7373 6167 655f 7468 7265 6164  = message_thread
-000045b0: 5f69 640a 2020 2020 7265 7475 726e 2061  _id.    return a
-000045c0: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-000045d0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-000045e0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-000045f0: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
-00004600: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
-00004610: 7374 2729 0a0a 0a61 7379 6e63 2064 6566  st')...async def
-00004620: 2073 656e 645f 6d65 6469 615f 6772 6f75   send_media_grou
-00004630: 7028 0a20 2020 2020 2020 2074 6f6b 656e  p(.        token
-00004640: 2c20 6368 6174 5f69 642c 206d 6564 6961  , chat_id, media
-00004650: 2c0a 2020 2020 2020 2020 6469 7361 626c  ,.        disabl
-00004660: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
-00004670: 6f6e 652c 2072 6570 6c79 5f74 6f5f 6d65  one, reply_to_me
-00004680: 7373 6167 655f 6964 3d4e 6f6e 652c 0a20  ssage_id=None,. 
-00004690: 2020 2020 2020 2074 696d 656f 7574 3d4e         timeout=N
-000046a0: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
-000046b0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-000046c0: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
-000046d0: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
-000046e0: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
-000046f0: 6f6e 6529 3a0a 2020 2020 6d65 7468 6f64  one):.    method
-00004700: 5f75 726c 203d 2072 2773 656e 644d 6564  _url = r'sendMed
-00004710: 6961 4772 6f75 7027 0a20 2020 206d 6564  iaGroup'.    med
-00004720: 6961 5f6a 736f 6e2c 2066 696c 6573 203d  ia_json, files =
-00004730: 2061 7761 6974 2063 6f6e 7665 7274 5f69   await convert_i
-00004740: 6e70 7574 5f6d 6564 6961 5f61 7272 6179  nput_media_array
-00004750: 286d 6564 6961 290a 2020 2020 7061 796c  (media).    payl
-00004760: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-00004770: 3a20 6368 6174 5f69 642c 2027 6d65 6469  : chat_id, 'medi
-00004780: 6127 3a20 6d65 6469 615f 6a73 6f6e 7d0a  a': media_json}.
-00004790: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
-000047a0: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
-000047b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000047c0: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
-000047d0: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
-000047e0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
-000047f0: 6963 6174 696f 6e0a 2020 2020 6966 2072  ication.    if r
-00004800: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00004810: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00004820: 6f61 645b 2772 6570 6c79 5f74 6f5f 6d65  oad['reply_to_me
-00004830: 7373 6167 655f 6964 275d 203d 2072 6570  ssage_id'] = rep
-00004840: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00004850: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-00004860: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00004870: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00004880: 6d65 6f75 740a 2020 2020 6966 2061 6c6c  meout.    if all
-00004890: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
-000048a0: 7574 5f72 6570 6c79 2069 7320 6e6f 7420  ut_reply is not 
-000048b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-000048c0: 796c 6f61 645b 2761 6c6c 6f77 5f73 656e  yload['allow_sen
-000048d0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-000048e0: 6c79 275d 203d 2061 6c6c 6f77 5f73 656e  ly'] = allow_sen
-000048f0: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00004900: 6c79 0a20 2020 2069 6620 7072 6f74 6563  ly.    if protec
-00004910: 745f 636f 6e74 656e 7420 6973 206e 6f74  t_content is not
-00004920: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00004930: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
-00004940: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
-00004950: 6563 745f 636f 6e74 656e 740a 2020 2020  ect_content.    
-00004960: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
-00004970: 645f 6964 3a0a 2020 2020 2020 2020 7061  d_id:.        pa
-00004980: 796c 6f61 645b 276d 6573 7361 6765 5f74  yload['message_t
-00004990: 6872 6561 645f 6964 275d 203d 206d 6573  hread_id'] = mes
-000049a0: 7361 6765 5f74 6872 6561 645f 6964 0a20  sage_thread_id. 
-000049b0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-000049c0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-000049d0: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-000049e0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-000049f0: 616d 733d 7061 796c 6f61 642c 0a20 2020  ams=payload,.   
-00004a00: 2020 2020 206d 6574 686f 643d 2770 6f73       method='pos
-00004a10: 7427 2069 6620 6669 6c65 7320 656c 7365  t' if files else
-00004a20: 2027 6765 7427 2c0a 2020 2020 2020 2020   'get',.        
-00004a30: 6669 6c65 733d 6669 6c65 7320 6966 2066  files=files if f
-00004a40: 696c 6573 2065 6c73 6520 4e6f 6e65 290a  iles else None).
-00004a50: 0a0a 6173 796e 6320 6465 6620 7365 6e64  ..async def send
-00004a60: 5f6c 6f63 6174 696f 6e28 0a20 2020 2020  _location(.     
-00004a70: 2020 2074 6f6b 656e 2c20 6368 6174 5f69     token, chat_i
-00004a80: 642c 206c 6174 6974 7564 652c 206c 6f6e  d, latitude, lon
-00004a90: 6769 7475 6465 2c0a 2020 2020 2020 2020  gitude,.        
-00004aa0: 6c69 7665 5f70 6572 696f 643d 4e6f 6e65  live_period=None
-00004ab0: 2c20 7265 706c 795f 746f 5f6d 6573 7361  , reply_to_messa
-00004ac0: 6765 5f69 643d 4e6f 6e65 2c20 0a20 2020  ge_id=None, .   
-00004ad0: 2020 2020 2072 6570 6c79 5f6d 6172 6b75       reply_marku
-00004ae0: 703d 4e6f 6e65 2c20 6469 7361 626c 655f  p=None, disable_
-00004af0: 6e6f 7469 6669 6361 7469 6f6e 3d4e 6f6e  notification=Non
-00004b00: 652c 200a 2020 2020 2020 2020 7469 6d65  e, .        time
-00004b10: 6f75 743d 4e6f 6e65 2c20 686f 7269 7a6f  out=None, horizo
-00004b20: 6e74 616c 5f61 6363 7572 6163 793d 4e6f  ntal_accuracy=No
-00004b30: 6e65 2c20 6865 6164 696e 673d 4e6f 6e65  ne, heading=None
-00004b40: 2c0a 2020 2020 2020 2020 7072 6f78 696d  ,.        proxim
-00004b50: 6974 795f 616c 6572 745f 7261 6469 7573  ity_alert_radius
-00004b60: 3d4e 6f6e 652c 2061 6c6c 6f77 5f73 656e  =None, allow_sen
-00004b70: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00004b80: 6c79 3d4e 6f6e 652c 2070 726f 7465 6374  ly=None, protect
-00004b90: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 206d  _content=None, m
-00004ba0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00004bb0: 3d4e 6f6e 6529 3a0a 2020 2020 6d65 7468  =None):.    meth
-00004bc0: 6f64 5f75 726c 203d 2072 2773 656e 644c  od_url = r'sendL
-00004bd0: 6f63 6174 696f 6e27 0a20 2020 2070 6179  ocation'.    pay
-00004be0: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00004bf0: 273a 2063 6861 745f 6964 2c20 276c 6174  ': chat_id, 'lat
-00004c00: 6974 7564 6527 3a20 6c61 7469 7475 6465  itude': latitude
-00004c10: 2c20 276c 6f6e 6769 7475 6465 273a 206c  , 'longitude': l
-00004c20: 6f6e 6769 7475 6465 7d0a 2020 2020 6966  ongitude}.    if
-00004c30: 206c 6976 655f 7065 7269 6f64 3a0a 2020   live_period:.  
-00004c40: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
-00004c50: 6976 655f 7065 7269 6f64 275d 203d 206c  ive_period'] = l
-00004c60: 6976 655f 7065 7269 6f64 0a20 2020 2069  ive_period.    i
-00004c70: 6620 686f 7269 7a6f 6e74 616c 5f61 6363  f horizontal_acc
-00004c80: 7572 6163 793a 0a20 2020 2020 2020 2070  uracy:.        p
-00004c90: 6179 6c6f 6164 5b27 686f 7269 7a6f 6e74  ayload['horizont
-00004ca0: 616c 5f61 6363 7572 6163 7927 5d20 3d20  al_accuracy'] = 
-00004cb0: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
-00004cc0: 6163 790a 2020 2020 6966 2068 6561 6469  acy.    if headi
-00004cd0: 6e67 3a0a 2020 2020 2020 2020 7061 796c  ng:.        payl
-00004ce0: 6f61 645b 2768 6561 6469 6e67 275d 203d  oad['heading'] =
-00004cf0: 2068 6561 6469 6e67 0a20 2020 2069 6620   heading.    if 
-00004d00: 7072 6f78 696d 6974 795f 616c 6572 745f  proximity_alert_
-00004d10: 7261 6469 7573 3a0a 2020 2020 2020 2020  radius:.        
-00004d20: 7061 796c 6f61 645b 2770 726f 7869 6d69  payload['proximi
-00004d30: 7479 5f61 6c65 7274 5f72 6164 6975 7327  ty_alert_radius'
-00004d40: 5d20 3d20 7072 6f78 696d 6974 795f 616c  ] = proximity_al
-00004d50: 6572 745f 7261 6469 7573 0a20 2020 2069  ert_radius.    i
-00004d60: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
-00004d70: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-00004d80: 6179 6c6f 6164 5b27 7265 706c 795f 746f  ayload['reply_to
-00004d90: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
-00004da0: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00004db0: 5f69 640a 2020 2020 6966 2061 6c6c 6f77  _id.    if allow
-00004dc0: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00004dd0: 5f72 6570 6c79 2069 7320 6e6f 7420 4e6f  _reply is not No
-00004de0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00004df0: 6f61 645b 2761 6c6c 6f77 5f73 656e 6469  oad['allow_sendi
-00004e00: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00004e10: 275d 203d 2061 6c6c 6f77 5f73 656e 6469  '] = allow_sendi
-00004e20: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00004e30: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-00004e40: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-00004e50: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-00004e60: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
-00004e70: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-00004e80: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-00004e90: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
-00004ea0: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
-00004eb0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00004ec0: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
-00004ed0: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
-00004ee0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00004ef0: 696f 6e0a 2020 2020 6966 2074 696d 656f  ion.    if timeo
-00004f00: 7574 3a0a 2020 2020 2020 2020 7061 796c  ut:.        payl
-00004f10: 6f61 645b 2774 696d 656f 7574 275d 203d  oad['timeout'] =
-00004f20: 2074 696d 656f 7574 0a20 2020 2069 6620   timeout.    if 
-00004f30: 7072 6f74 6563 745f 636f 6e74 656e 7420  protect_content 
-00004f40: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004f50: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
-00004f60: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
-00004f70: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
-00004f80: 740a 2020 2020 6966 206d 6573 7361 6765  t.    if message
-00004f90: 5f74 6872 6561 645f 6964 3a0a 2020 2020  _thread_id:.    
-00004fa0: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
-00004fb0: 7361 6765 5f74 6872 6561 645f 6964 275d  sage_thread_id']
-00004fc0: 203d 206d 6573 7361 6765 5f74 6872 6561   = message_threa
-00004fd0: 645f 6964 0a20 2020 2072 6574 7572 6e20  d_id.    return 
-00004fe0: 6177 6169 7420 5f70 726f 6365 7373 5f72  await _process_r
-00004ff0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
-00005000: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
-00005010: 3d70 6179 6c6f 6164 290a 0a0a 6173 796e  =payload)...asyn
-00005020: 6320 6465 6620 6564 6974 5f6d 6573 7361  c def edit_messa
-00005030: 6765 5f6c 6976 655f 6c6f 6361 7469 6f6e  ge_live_location
-00005040: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-00005050: 206c 6174 6974 7564 652c 206c 6f6e 6769   latitude, longi
-00005060: 7475 6465 2c20 6368 6174 5f69 643d 4e6f  tude, chat_id=No
-00005070: 6e65 2c20 6d65 7373 6167 655f 6964 3d4e  ne, message_id=N
-00005080: 6f6e 652c 0a20 2020 2020 2020 2069 6e6c  one,.        inl
-00005090: 696e 655f 6d65 7373 6167 655f 6964 3d4e  ine_message_id=N
-000050a0: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
-000050b0: 703d 4e6f 6e65 2c20 7469 6d65 6f75 743d  p=None, timeout=
-000050c0: 4e6f 6e65 2c0a 2020 2020 2020 2020 686f  None,.        ho
-000050d0: 7269 7a6f 6e74 616c 5f61 6363 7572 6163  rizontal_accurac
-000050e0: 793d 4e6f 6e65 2c20 6865 6164 696e 673d  y=None, heading=
-000050f0: 4e6f 6e65 2c20 7072 6f78 696d 6974 795f  None, proximity_
-00005100: 616c 6572 745f 7261 6469 7573 3d4e 6f6e  alert_radius=Non
-00005110: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00005120: 726c 203d 2072 2765 6469 744d 6573 7361  rl = r'editMessa
-00005130: 6765 4c69 7665 4c6f 6361 7469 6f6e 270a  geLiveLocation'.
-00005140: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-00005150: 6c61 7469 7475 6465 273a 206c 6174 6974  latitude': latit
-00005160: 7564 652c 2027 6c6f 6e67 6974 7564 6527  ude, 'longitude'
-00005170: 3a20 6c6f 6e67 6974 7564 657d 0a20 2020  : longitude}.   
-00005180: 2069 6620 6368 6174 5f69 643a 0a20 2020   if chat_id:.   
-00005190: 2020 2020 2070 6179 6c6f 6164 5b27 6368       payload['ch
-000051a0: 6174 5f69 6427 5d20 3d20 6368 6174 5f69  at_id'] = chat_i
-000051b0: 640a 2020 2020 6966 206d 6573 7361 6765  d.    if message
-000051c0: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-000051d0: 6c6f 6164 5b27 6d65 7373 6167 655f 6964  load['message_id
-000051e0: 275d 203d 206d 6573 7361 6765 5f69 640a  '] = message_id.
-000051f0: 2020 2020 6966 2068 6f72 697a 6f6e 7461      if horizonta
-00005200: 6c5f 6163 6375 7261 6379 3a0a 2020 2020  l_accuracy:.    
-00005210: 2020 2020 7061 796c 6f61 645b 2768 6f72      payload['hor
-00005220: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
-00005230: 275d 203d 2068 6f72 697a 6f6e 7461 6c5f  '] = horizontal_
-00005240: 6163 6375 7261 6379 0a20 2020 2069 6620  accuracy.    if 
-00005250: 6865 6164 696e 673a 0a20 2020 2020 2020  heading:.       
-00005260: 2070 6179 6c6f 6164 5b27 6865 6164 696e   payload['headin
-00005270: 6727 5d20 3d20 6865 6164 696e 670a 2020  g'] = heading.  
-00005280: 2020 6966 2070 726f 7869 6d69 7479 5f61    if proximity_a
-00005290: 6c65 7274 5f72 6164 6975 733a 0a20 2020  lert_radius:.   
-000052a0: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
-000052b0: 6f78 696d 6974 795f 616c 6572 745f 7261  oximity_alert_ra
-000052c0: 6469 7573 275d 203d 2070 726f 7869 6d69  dius'] = proximi
-000052d0: 7479 5f61 6c65 7274 5f72 6164 6975 730a  ty_alert_radius.
-000052e0: 2020 2020 6966 2069 6e6c 696e 655f 6d65      if inline_me
-000052f0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-00005300: 2020 7061 796c 6f61 645b 2769 6e6c 696e    payload['inlin
-00005310: 655f 6d65 7373 6167 655f 6964 275d 203d  e_message_id'] =
-00005320: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-00005330: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-00005340: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-00005350: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00005360: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-00005370: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00005380: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00005390: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-000053a0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-000053b0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-000053c0: 7574 0a20 2020 2072 6574 7572 6e20 6177  ut.    return aw
-000053d0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-000053e0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-000053f0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00005400: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
-00005410: 6465 6620 7374 6f70 5f6d 6573 7361 6765  def stop_message
-00005420: 5f6c 6976 655f 6c6f 6361 7469 6f6e 280a  _live_location(.
-00005430: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
-00005440: 6861 745f 6964 3d4e 6f6e 652c 206d 6573  hat_id=None, mes
-00005450: 7361 6765 5f69 643d 4e6f 6e65 2c0a 2020  sage_id=None,.  
-00005460: 2020 2020 2020 696e 6c69 6e65 5f6d 6573        inline_mes
-00005470: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
-00005480: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-00005490: 2074 696d 656f 7574 3d4e 6f6e 6529 3a0a   timeout=None):.
-000054a0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000054b0: 2072 2773 746f 704d 6573 7361 6765 4c69   r'stopMessageLi
-000054c0: 7665 4c6f 6361 7469 6f6e 270a 2020 2020  veLocation'.    
-000054d0: 7061 796c 6f61 6420 3d20 7b7d 0a20 2020  payload = {}.   
-000054e0: 2069 6620 6368 6174 5f69 643a 0a20 2020   if chat_id:.   
-000054f0: 2020 2020 2070 6179 6c6f 6164 5b27 6368       payload['ch
-00005500: 6174 5f69 6427 5d20 3d20 6368 6174 5f69  at_id'] = chat_i
-00005510: 640a 2020 2020 6966 206d 6573 7361 6765  d.    if message
-00005520: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-00005530: 6c6f 6164 5b27 6d65 7373 6167 655f 6964  load['message_id
-00005540: 275d 203d 206d 6573 7361 6765 5f69 640a  '] = message_id.
-00005550: 2020 2020 6966 2069 6e6c 696e 655f 6d65      if inline_me
-00005560: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-00005570: 2020 7061 796c 6f61 645b 2769 6e6c 696e    payload['inlin
-00005580: 655f 6d65 7373 6167 655f 6964 275d 203d  e_message_id'] =
-00005590: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
-000055a0: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-000055b0: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-000055c0: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-000055d0: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-000055e0: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-000055f0: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00005600: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00005610: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00005620: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00005630: 7574 0a20 2020 2072 6574 7572 6e20 6177  ut.    return aw
-00005640: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-00005650: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00005660: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00005670: 6179 6c6f 6164 290a 0a0a 6173 796e 6320  ayload)...async 
-00005680: 6465 6620 7365 6e64 5f76 656e 7565 280a  def send_venue(.
-00005690: 2020 2020 2020 2020 746f 6b65 6e2c 2063          token, c
-000056a0: 6861 745f 6964 2c20 6c61 7469 7475 6465  hat_id, latitude
-000056b0: 2c20 6c6f 6e67 6974 7564 652c 2074 6974  , longitude, tit
-000056c0: 6c65 2c20 6164 6472 6573 732c 0a20 2020  le, address,.   
-000056d0: 2020 2020 2066 6f75 7273 7175 6172 655f       foursquare_
-000056e0: 6964 3d4e 6f6e 652c 2066 6f75 7273 7175  id=None, foursqu
-000056f0: 6172 655f 7479 7065 3d4e 6f6e 652c 2064  are_type=None, d
-00005700: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00005710: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 2020  ion=None,.      
-00005720: 2020 7265 706c 795f 746f 5f6d 6573 7361    reply_to_messa
-00005730: 6765 5f69 643d 4e6f 6e65 2c20 7265 706c  ge_id=None, repl
-00005740: 795f 6d61 726b 7570 3d4e 6f6e 652c 2074  y_markup=None, t
-00005750: 696d 656f 7574 3d4e 6f6e 652c 0a20 2020  imeout=None,.   
-00005760: 2020 2020 2061 6c6c 6f77 5f73 656e 6469       allow_sendi
-00005770: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00005780: 3d4e 6f6e 652c 2067 6f6f 676c 655f 706c  =None, google_pl
-00005790: 6163 655f 6964 3d4e 6f6e 652c 0a20 2020  ace_id=None,.   
-000057a0: 2020 2020 2067 6f6f 676c 655f 706c 6163       google_plac
-000057b0: 655f 7479 7065 3d4e 6f6e 652c 2070 726f  e_type=None, pro
-000057c0: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-000057d0: 652c 206d 6573 7361 6765 5f74 6872 6561  e, message_threa
-000057e0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-000057f0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-00005800: 656e 6456 656e 7565 270a 2020 2020 7061  endVenue'.    pa
-00005810: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00005820: 6427 3a20 6368 6174 5f69 642c 2027 6c61  d': chat_id, 'la
-00005830: 7469 7475 6465 273a 206c 6174 6974 7564  titude': latitud
-00005840: 652c 2027 6c6f 6e67 6974 7564 6527 3a20  e, 'longitude': 
-00005850: 6c6f 6e67 6974 7564 652c 2027 7469 746c  longitude, 'titl
-00005860: 6527 3a20 7469 746c 652c 2027 6164 6472  e': title, 'addr
-00005870: 6573 7327 3a20 6164 6472 6573 737d 0a20  ess': address}. 
-00005880: 2020 2069 6620 666f 7572 7371 7561 7265     if foursquare
-00005890: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-000058a0: 6c6f 6164 5b27 666f 7572 7371 7561 7265  load['foursquare
-000058b0: 5f69 6427 5d20 3d20 666f 7572 7371 7561  _id'] = foursqua
-000058c0: 7265 5f69 640a 2020 2020 6966 2066 6f75  re_id.    if fou
-000058d0: 7273 7175 6172 655f 7479 7065 3a0a 2020  rsquare_type:.  
-000058e0: 2020 2020 2020 7061 796c 6f61 645b 2766        payload['f
-000058f0: 6f75 7273 7175 6172 655f 7479 7065 275d  oursquare_type']
-00005900: 203d 2066 6f75 7273 7175 6172 655f 7479   = foursquare_ty
-00005910: 7065 0a20 2020 2069 6620 6469 7361 626c  pe.    if disabl
-00005920: 655f 6e6f 7469 6669 6361 7469 6f6e 2069  e_notification i
-00005930: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00005940: 2020 2020 7061 796c 6f61 645b 2764 6973      payload['dis
-00005950: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00005960: 6e27 5d20 3d20 6469 7361 626c 655f 6e6f  n'] = disable_no
-00005970: 7469 6669 6361 7469 6f6e 0a20 2020 2069  tification.    i
-00005980: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
-00005990: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-000059a0: 6179 6c6f 6164 5b27 7265 706c 795f 746f  ayload['reply_to
-000059b0: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
-000059c0: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-000059d0: 5f69 640a 2020 2020 6966 2072 6570 6c79  _id.    if reply
-000059e0: 5f6d 6172 6b75 703a 0a20 2020 2020 2020  _markup:.       
-000059f0: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
-00005a00: 6d61 726b 7570 275d 203d 2061 7761 6974  markup'] = await
-00005a10: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
-00005a20: 2872 6570 6c79 5f6d 6172 6b75 7029 0a20  (reply_markup). 
-00005a30: 2020 2069 6620 7469 6d65 6f75 743a 0a20     if timeout:. 
-00005a40: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005a50: 7469 6d65 6f75 7427 5d20 3d20 7469 6d65  timeout'] = time
-00005a60: 6f75 740a 2020 2020 6966 2061 6c6c 6f77  out.    if allow
-00005a70: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00005a80: 5f72 6570 6c79 2069 7320 6e6f 7420 4e6f  _reply is not No
-00005a90: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00005aa0: 6f61 645b 2761 6c6c 6f77 5f73 656e 6469  oad['allow_sendi
-00005ab0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00005ac0: 275d 203d 2061 6c6c 6f77 5f73 656e 6469  '] = allow_sendi
-00005ad0: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
-00005ae0: 0a20 2020 2069 6620 676f 6f67 6c65 5f70  .    if google_p
-00005af0: 6c61 6365 5f69 643a 0a20 2020 2020 2020  lace_id:.       
-00005b00: 2070 6179 6c6f 6164 5b27 676f 6f67 6c65   payload['google
-00005b10: 5f70 6c61 6365 5f69 6427 5d20 3d20 676f  _place_id'] = go
-00005b20: 6f67 6c65 5f70 6c61 6365 5f69 640a 2020  ogle_place_id.  
-00005b30: 2020 6966 2067 6f6f 676c 655f 706c 6163    if google_plac
-00005b40: 655f 7479 7065 3a0a 2020 2020 2020 2020  e_type:.        
-00005b50: 7061 796c 6f61 645b 2767 6f6f 676c 655f  payload['google_
-00005b60: 706c 6163 655f 7479 7065 275d 203d 2067  place_type'] = g
-00005b70: 6f6f 676c 655f 706c 6163 655f 7479 7065  oogle_place_type
-00005b80: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
-00005b90: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
-00005ba0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00005bb0: 6c6f 6164 5b27 7072 6f74 6563 745f 636f  load['protect_co
-00005bc0: 6e74 656e 7427 5d20 3d20 7072 6f74 6563  ntent'] = protec
-00005bd0: 745f 636f 6e74 656e 740a 2020 2020 6966  t_content.    if
-00005be0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-00005bf0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00005c00: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
-00005c10: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
-00005c20: 6765 5f74 6872 6561 645f 6964 0a20 2020  ge_thread_id.   
-00005c30: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00005c40: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00005c50: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00005c60: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00005c70: 290a 0a0a 6173 796e 6320 6465 6620 7365  )...async def se
-00005c80: 6e64 5f63 6f6e 7461 6374 280a 2020 2020  nd_contact(.    
-00005c90: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
-00005ca0: 6964 2c20 7068 6f6e 655f 6e75 6d62 6572  id, phone_number
-00005cb0: 2c20 6669 7273 745f 6e61 6d65 2c20 6c61  , first_name, la
-00005cc0: 7374 5f6e 616d 653d 4e6f 6e65 2c20 7663  st_name=None, vc
-00005cd0: 6172 643d 4e6f 6e65 2c0a 2020 2020 2020  ard=None,.      
-00005ce0: 2020 6469 7361 626c 655f 6e6f 7469 6669    disable_notifi
-00005cf0: 6361 7469 6f6e 3d4e 6f6e 652c 2072 6570  cation=None, rep
-00005d00: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00005d10: 3d4e 6f6e 652c 2072 6570 6c79 5f6d 6172  =None, reply_mar
-00005d20: 6b75 703d 4e6f 6e65 2c20 7469 6d65 6f75  kup=None, timeou
-00005d30: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00005d40: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00005d50: 7468 6f75 745f 7265 706c 793d 4e6f 6e65  thout_reply=None
-00005d60: 2c20 7072 6f74 6563 745f 636f 6e74 656e  , protect_conten
-00005d70: 743d 4e6f 6e65 2c20 6d65 7373 6167 655f  t=None, message_
-00005d80: 7468 7265 6164 5f69 643d 4e6f 6e65 293a  thread_id=None):
-00005d90: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00005da0: 3d20 7227 7365 6e64 436f 6e74 6163 7427  = r'sendContact'
-00005db0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00005dc0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-00005dd0: 6964 2c20 2770 686f 6e65 5f6e 756d 6265  id, 'phone_numbe
-00005de0: 7227 3a20 7068 6f6e 655f 6e75 6d62 6572  r': phone_number
-00005df0: 2c20 2766 6972 7374 5f6e 616d 6527 3a20  , 'first_name': 
-00005e00: 6669 7273 745f 6e61 6d65 7d0a 2020 2020  first_name}.    
-00005e10: 6966 206c 6173 745f 6e61 6d65 3a0a 2020  if last_name:.  
-00005e20: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
-00005e30: 6173 745f 6e61 6d65 275d 203d 206c 6173  ast_name'] = las
-00005e40: 745f 6e61 6d65 0a20 2020 2069 6620 7663  t_name.    if vc
-00005e50: 6172 643a 0a20 2020 2020 2020 2070 6179  ard:.        pay
-00005e60: 6c6f 6164 5b27 7663 6172 6427 5d20 3d20  load['vcard'] = 
-00005e70: 7663 6172 640a 2020 2020 6966 2064 6973  vcard.    if dis
-00005e80: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00005e90: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00005ea0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00005eb0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00005ec0: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00005ed0: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00005ee0: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
-00005ef0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-00005f00: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-00005f10: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
-00005f20: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
-00005f30: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
-00005f40: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-00005f50: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-00005f60: 6c79 5f6d 6172 6b75 7027 5d20 3d20 6177  ly_markup'] = aw
-00005f70: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
-00005f80: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-00005f90: 290a 2020 2020 6966 2074 696d 656f 7574  ).    if timeout
-00005fa0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00005fb0: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00005fc0: 696d 656f 7574 0a20 2020 2069 6620 616c  imeout.    if al
-00005fd0: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
-00005fe0: 6f75 745f 7265 706c 7920 6973 206e 6f74  out_reply is not
-00005ff0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00006000: 6179 6c6f 6164 5b27 616c 6c6f 775f 7365  ayload['allow_se
-00006010: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-00006020: 706c 7927 5d20 3d20 616c 6c6f 775f 7365  ply'] = allow_se
-00006030: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-00006040: 706c 790a 2020 2020 6966 2070 726f 7465  ply.    if prote
-00006050: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-00006060: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00006070: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-00006080: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-00006090: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-000060a0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-000060b0: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-000060c0: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-000060d0: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-000060e0: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-000060f0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-00006100: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-00006110: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-00006120: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-00006130: 6f61 6429 0a0a 0a61 7379 6e63 2064 6566  oad)...async def
-00006140: 2073 656e 645f 6368 6174 5f61 6374 696f   send_chat_actio
-00006150: 6e28 746f 6b65 6e2c 2063 6861 745f 6964  n(token, chat_id
-00006160: 2c20 6163 7469 6f6e 2c20 7469 6d65 6f75  , action, timeou
-00006170: 743d 4e6f 6e65 293a 0a20 2020 206d 6574  t=None):.    met
-00006180: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
-00006190: 4368 6174 4163 7469 6f6e 270a 2020 2020  ChatAction'.    
-000061a0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-000061b0: 5f69 6427 3a20 6368 6174 5f69 642c 2027  _id': chat_id, '
-000061c0: 6163 7469 6f6e 273a 2061 6374 696f 6e7d  action': action}
-000061d0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
-000061e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000061f0: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
-00006200: 6d65 6f75 740a 2020 2020 7265 7475 726e  meout.    return
-00006210: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00006220: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00006230: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00006240: 733d 7061 796c 6f61 6429 0a0a 0a61 7379  s=payload)...asy
-00006250: 6e63 2064 6566 2073 656e 645f 7669 6465  nc def send_vide
-00006260: 6f28 746f 6b65 6e2c 2063 6861 745f 6964  o(token, chat_id
-00006270: 2c20 6461 7461 2c20 6475 7261 7469 6f6e  , data, duration
-00006280: 3d4e 6f6e 652c 2063 6170 7469 6f6e 3d4e  =None, caption=N
-00006290: 6f6e 652c 2072 6570 6c79 5f74 6f5f 6d65  one, reply_to_me
-000062a0: 7373 6167 655f 6964 3d4e 6f6e 652c 2072  ssage_id=None, r
-000062b0: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
-000062c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000062d0: 2070 6172 7365 5f6d 6f64 653d 4e6f 6e65   parse_mode=None
-000062e0: 2c20 7375 7070 6f72 7473 5f73 7472 6561  , supports_strea
-000062f0: 6d69 6e67 3d4e 6f6e 652c 2064 6973 6162  ming=None, disab
-00006300: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00006310: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00006320: 6e65 2c20 0a20 2020 2020 2020 2020 2020  ne, .           
-00006330: 2020 2020 7468 756d 623d 4e6f 6e65 2c20      thumb=None, 
-00006340: 7769 6474 683d 4e6f 6e65 2c20 6865 6967  width=None, heig
-00006350: 6874 3d4e 6f6e 652c 2063 6170 7469 6f6e  ht=None, caption
-00006360: 5f65 6e74 6974 6965 733d 4e6f 6e65 2c20  _entities=None, 
-00006370: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-00006380: 7468 6f75 745f 7265 706c 793d 4e6f 6e65  thout_reply=None
-00006390: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000063a0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-000063b0: 3d4e 6f6e 652c 206d 6573 7361 6765 5f74  =None, message_t
-000063c0: 6872 6561 645f 6964 3d4e 6f6e 6529 3a0a  hread_id=None):.
-000063d0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-000063e0: 2072 2773 656e 6456 6964 656f 270a 2020   r'sendVideo'.  
-000063f0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00006400: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
-00006410: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
-00006420: 650a 2020 2020 6966 206e 6f74 2075 7469  e.    if not uti
-00006430: 6c2e 6973 5f73 7472 696e 6728 6461 7461  l.is_string(data
-00006440: 293a 0a20 2020 2020 2020 2066 696c 6573  ):.        files
-00006450: 203d 207b 2776 6964 656f 273a 2064 6174   = {'video': dat
-00006460: 617d 0a20 2020 2065 6c73 653a 0a20 2020  a}.    else:.   
-00006470: 2020 2020 2070 6179 6c6f 6164 5b27 7669       payload['vi
-00006480: 6465 6f27 5d20 3d20 6461 7461 0a20 2020  deo'] = data.   
-00006490: 2069 6620 6475 7261 7469 6f6e 3a0a 2020   if duration:.  
-000064a0: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
-000064b0: 7572 6174 696f 6e27 5d20 3d20 6475 7261  uration'] = dura
-000064c0: 7469 6f6e 0a20 2020 2069 6620 6361 7074  tion.    if capt
-000064d0: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
-000064e0: 6c6f 6164 5b27 6361 7074 696f 6e27 5d20  load['caption'] 
-000064f0: 3d20 6361 7074 696f 6e0a 2020 2020 6966  = caption.    if
-00006500: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00006510: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-00006520: 796c 6f61 645b 2772 6570 6c79 5f74 6f5f  yload['reply_to_
-00006530: 6d65 7373 6167 655f 6964 275d 203d 2072  message_id'] = r
-00006540: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00006550: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-00006560: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-00006570: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00006580: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-00006590: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-000065a0: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-000065b0: 2020 6966 2070 6172 7365 5f6d 6f64 653a    if parse_mode:
-000065c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000065d0: 5b27 7061 7273 655f 6d6f 6465 275d 203d  ['parse_mode'] =
-000065e0: 2070 6172 7365 5f6d 6f64 650a 2020 2020   parse_mode.    
-000065f0: 6966 2073 7570 706f 7274 735f 7374 7265  if supports_stre
-00006600: 616d 696e 6720 6973 206e 6f74 204e 6f6e  aming is not Non
-00006610: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00006620: 6164 5b27 7375 7070 6f72 7473 5f73 7472  ad['supports_str
-00006630: 6561 6d69 6e67 275d 203d 2073 7570 706f  eaming'] = suppo
-00006640: 7274 735f 7374 7265 616d 696e 670a 2020  rts_streaming.  
-00006650: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
-00006660: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
-00006670: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-00006680: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
-00006690: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
-000066a0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-000066b0: 6174 696f 6e0a 2020 2020 6966 2074 696d  ation.    if tim
-000066c0: 656f 7574 3a0a 2020 2020 2020 2020 7061  eout:.        pa
-000066d0: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
-000066e0: 203d 2074 696d 656f 7574 0a20 2020 2069   = timeout.    i
-000066f0: 6620 7468 756d 623a 0a20 2020 2020 2020  f thumb:.       
-00006700: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
-00006710: 7374 7269 6e67 2874 6875 6d62 293a 0a20  string(thumb):. 
-00006720: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-00006730: 6c65 733a 0a20 2020 2020 2020 2020 2020  les:.           
-00006740: 2020 2020 2066 696c 6573 5b27 7468 756d       files['thum
-00006750: 6227 5d20 3d20 7468 756d 620a 2020 2020  b'] = thumb.    
-00006760: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00006770: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00006780: 6c65 7320 3d20 7b27 7468 756d 6227 3a20  les = {'thumb': 
-00006790: 7468 756d 627d 0a20 2020 2020 2020 2065  thumb}.        e
-000067a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000067b0: 2070 6179 6c6f 6164 5b27 7468 756d 6227   payload['thumb'
-000067c0: 5d20 3d20 7468 756d 620a 2020 2020 6966  ] = thumb.    if
-000067d0: 2077 6964 7468 3a0a 2020 2020 2020 2020   width:.        
-000067e0: 7061 796c 6f61 645b 2777 6964 7468 275d  payload['width']
-000067f0: 203d 2077 6964 7468 0a20 2020 2069 6620   = width.    if 
-00006800: 6865 6967 6874 3a0a 2020 2020 2020 2020  height:.        
-00006810: 7061 796c 6f61 645b 2768 6569 6768 7427  payload['height'
-00006820: 5d20 3d20 6865 6967 6874 0a20 2020 2069  ] = height.    i
-00006830: 6620 6361 7074 696f 6e5f 656e 7469 7469  f caption_entiti
-00006840: 6573 3a0a 2020 2020 2020 2020 7061 796c  es:.        payl
-00006850: 6f61 645b 2763 6170 7469 6f6e 5f65 6e74  oad['caption_ent
-00006860: 6974 6965 7327 5d20 3d20 6a73 6f6e 2e64  ities'] = json.d
-00006870: 756d 7073 2874 7970 6573 2e4d 6573 7361  umps(types.Messa
-00006880: 6765 456e 7469 7479 2e74 6f5f 6c69 7374  geEntity.to_list
-00006890: 5f6f 665f 6469 6374 7328 6361 7074 696f  _of_dicts(captio
-000068a0: 6e5f 656e 7469 7469 6573 2929 0a20 2020  n_entities)).   
-000068b0: 2069 6620 616c 6c6f 775f 7365 6e64 696e   if allow_sendin
-000068c0: 675f 7769 7468 6f75 745f 7265 706c 7920  g_without_reply 
-000068d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000068e0: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
-000068f0: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
-00006900: 6f75 745f 7265 706c 7927 5d20 3d20 616c  out_reply'] = al
-00006910: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
-00006920: 6f75 745f 7265 706c 790a 2020 2020 6966  out_reply.    if
-00006930: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00006940: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00006950: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
-00006960: 726f 7465 6374 5f63 6f6e 7465 6e74 275d  rotect_content']
-00006970: 203d 2070 726f 7465 6374 5f63 6f6e 7465   = protect_conte
-00006980: 6e74 0a20 2020 2069 6620 6d65 7373 6167  nt.    if messag
-00006990: 655f 7468 7265 6164 5f69 643a 0a20 2020  e_thread_id:.   
-000069a0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-000069b0: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
-000069c0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
-000069d0: 6164 5f69 640a 2020 2020 7265 7475 726e  ad_id.    return
-000069e0: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-000069f0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00006a00: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00006a10: 733d 7061 796c 6f61 642c 2066 696c 6573  s=payload, files
-00006a20: 3d66 696c 6573 2c20 6d65 7468 6f64 3d27  =files, method='
-00006a30: 706f 7374 2729 0a0a 0a61 7379 6e63 2064  post')...async d
-00006a40: 6566 2073 656e 645f 616e 696d 6174 696f  ef send_animatio
-00006a50: 6e28 0a20 2020 2020 2020 2074 6f6b 656e  n(.        token
-00006a60: 2c20 6368 6174 5f69 642c 2064 6174 612c  , chat_id, data,
-00006a70: 2064 7572 6174 696f 6e3d 4e6f 6e65 2c20   duration=None, 
-00006a80: 6361 7074 696f 6e3d 4e6f 6e65 2c20 7265  caption=None, re
-00006a90: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-00006aa0: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-00006ab0: 726b 7570 3d4e 6f6e 652c 0a20 2020 2020  rkup=None,.     
-00006ac0: 2020 2070 6172 7365 5f6d 6f64 653d 4e6f     parse_mode=No
-00006ad0: 6e65 2c20 6469 7361 626c 655f 6e6f 7469  ne, disable_noti
-00006ae0: 6669 6361 7469 6f6e 3d4e 6f6e 652c 2074  fication=None, t
-00006af0: 696d 656f 7574 3d4e 6f6e 652c 2074 6875  imeout=None, thu
-00006b00: 6d62 3d4e 6f6e 652c 2063 6170 7469 6f6e  mb=None, caption
-00006b10: 5f65 6e74 6974 6965 733d 4e6f 6e65 2c0a  _entities=None,.
-00006b20: 2020 2020 2020 2020 616c 6c6f 775f 7365          allow_se
-00006b30: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-00006b40: 706c 793d 4e6f 6e65 2c20 7769 6474 683d  ply=None, width=
-00006b50: 4e6f 6e65 2c20 6865 6967 6874 3d4e 6f6e  None, height=Non
-00006b60: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-00006b70: 6e74 3d4e 6f6e 652c 206d 6573 7361 6765  nt=None, message
-00006b80: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
-00006b90: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-00006ba0: 203d 2072 2773 656e 6441 6e69 6d61 7469   = r'sendAnimati
-00006bb0: 6f6e 270a 2020 2020 7061 796c 6f61 6420  on'.    payload 
-00006bc0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-00006bd0: 6174 5f69 647d 0a20 2020 2066 696c 6573  at_id}.    files
-00006be0: 203d 204e 6f6e 650a 2020 2020 6966 206e   = None.    if n
-00006bf0: 6f74 2075 7469 6c2e 6973 5f73 7472 696e  ot util.is_strin
-00006c00: 6728 6461 7461 293a 0a20 2020 2020 2020  g(data):.       
-00006c10: 2066 696c 6573 203d 207b 2761 6e69 6d61   files = {'anima
-00006c20: 7469 6f6e 273a 2064 6174 617d 0a20 2020  tion': data}.   
-00006c30: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
-00006c40: 6179 6c6f 6164 5b27 616e 696d 6174 696f  ayload['animatio
-00006c50: 6e27 5d20 3d20 6461 7461 0a20 2020 2069  n'] = data.    i
-00006c60: 6620 6475 7261 7469 6f6e 3a0a 2020 2020  f duration:.    
-00006c70: 2020 2020 7061 796c 6f61 645b 2764 7572      payload['dur
-00006c80: 6174 696f 6e27 5d20 3d20 6475 7261 7469  ation'] = durati
-00006c90: 6f6e 0a20 2020 2069 6620 6361 7074 696f  on.    if captio
-00006ca0: 6e3a 0a20 2020 2020 2020 2070 6179 6c6f  n:.        paylo
-00006cb0: 6164 5b27 6361 7074 696f 6e27 5d20 3d20  ad['caption'] = 
-00006cc0: 6361 7074 696f 6e0a 2020 2020 6966 2072  caption.    if r
-00006cd0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00006ce0: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00006cf0: 6f61 645b 2772 6570 6c79 5f74 6f5f 6d65  oad['reply_to_me
-00006d00: 7373 6167 655f 6964 275d 203d 2072 6570  ssage_id'] = rep
-00006d10: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00006d20: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-00006d30: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-00006d40: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-00006d50: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
-00006d60: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-00006d70: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-00006d80: 6966 2070 6172 7365 5f6d 6f64 653a 0a20  if parse_mode:. 
-00006d90: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006da0: 7061 7273 655f 6d6f 6465 275d 203d 2070  parse_mode'] = p
-00006db0: 6172 7365 5f6d 6f64 650a 2020 2020 6966  arse_mode.    if
-00006dc0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00006dd0: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00006de0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00006df0: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
-00006e00: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
-00006e10: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00006e20: 6e0a 2020 2020 6966 2074 696d 656f 7574  n.    if timeout
-00006e30: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00006e40: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00006e50: 696d 656f 7574 0a20 2020 2069 6620 7468  imeout.    if th
-00006e60: 756d 623a 0a20 2020 2020 2020 2069 6620  umb:.        if 
-00006e70: 6e6f 7420 7574 696c 2e69 735f 7374 7269  not util.is_stri
-00006e80: 6e67 2874 6875 6d62 293a 0a20 2020 2020  ng(thumb):.     
-00006e90: 2020 2020 2020 2069 6620 6669 6c65 733a         if files:
-00006ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006eb0: 2066 696c 6573 5b27 7468 756d 6227 5d20   files['thumb'] 
-00006ec0: 3d20 7468 756d 620a 2020 2020 2020 2020  = thumb.        
-00006ed0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00006ee0: 2020 2020 2020 2020 2020 6669 6c65 7320            files 
-00006ef0: 3d20 7b27 7468 756d 6227 3a20 7468 756d  = {'thumb': thum
-00006f00: 627d 0a20 2020 2020 2020 2065 6c73 653a  b}.        else:
-00006f10: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
-00006f20: 6c6f 6164 5b27 7468 756d 6227 5d20 3d20  load['thumb'] = 
-00006f30: 7468 756d 620a 2020 2020 6966 2063 6170  thumb.    if cap
-00006f40: 7469 6f6e 5f65 6e74 6974 6965 733a 0a20  tion_entities:. 
-00006f50: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00006f60: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00006f70: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
-00006f80: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-00006f90: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-00006fa0: 6963 7473 2863 6170 7469 6f6e 5f65 6e74  icts(caption_ent
-00006fb0: 6974 6965 7329 290a 2020 2020 6966 2061  ities)).    if a
-00006fc0: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00006fd0: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
-00006fe0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00006ff0: 7061 796c 6f61 645b 2761 6c6c 6f77 5f73  payload['allow_s
-00007000: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-00007010: 6570 6c79 275d 203d 2061 6c6c 6f77 5f73  eply'] = allow_s
-00007020: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-00007030: 6570 6c79 0a20 2020 2069 6620 7769 6474  eply.    if widt
-00007040: 683a 0a20 2020 2020 2020 2070 6179 6c6f  h:.        paylo
-00007050: 6164 5b27 7769 6474 6827 5d20 3d20 7769  ad['width'] = wi
-00007060: 6474 680a 2020 2020 6966 2068 6569 6768  dth.    if heigh
-00007070: 743a 0a20 2020 2020 2020 2070 6179 6c6f  t:.        paylo
-00007080: 6164 5b27 6865 6967 6874 275d 203d 2068  ad['height'] = h
-00007090: 6569 6768 740a 2020 2020 6966 2070 726f  eight.    if pro
-000070a0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-000070b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000070c0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-000070d0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-000070e0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000070f0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-00007100: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-00007110: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
-00007120: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
-00007130: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00007140: 640a 2020 2020 7265 7475 726e 2061 7761  d.    return awa
-00007150: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-00007160: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00007170: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00007180: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00007190: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
-000071a0: 2729 0a0a 0a61 7379 6e63 2064 6566 2073  ')...async def s
-000071b0: 656e 645f 766f 6963 6528 746f 6b65 6e2c  end_voice(token,
-000071c0: 2063 6861 745f 6964 2c20 766f 6963 652c   chat_id, voice,
-000071d0: 2063 6170 7469 6f6e 3d4e 6f6e 652c 2064   caption=None, d
-000071e0: 7572 6174 696f 6e3d 4e6f 6e65 2c20 7265  uration=None, re
-000071f0: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-00007200: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-00007210: 726b 7570 3d4e 6f6e 652c 0a20 2020 2020  rkup=None,.     
-00007220: 2020 2020 2020 2020 2020 7061 7273 655f            parse_
-00007230: 6d6f 6465 3d4e 6f6e 652c 2064 6973 6162  mode=None, disab
-00007240: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
-00007250: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
-00007260: 6e65 2c20 6361 7074 696f 6e5f 656e 7469  ne, caption_enti
-00007270: 7469 6573 3d4e 6f6e 652c 0a20 2020 2020  ties=None,.     
-00007280: 2020 2020 2020 2020 2020 616c 6c6f 775f            allow_
-00007290: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-000072a0: 7265 706c 793d 4e6f 6e65 2c20 7072 6f74  reply=None, prot
-000072b0: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
-000072c0: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
-000072d0: 5f69 643d 4e6f 6e65 293a 0a20 2020 206d  _id=None):.    m
-000072e0: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
-000072f0: 6e64 566f 6963 6527 0a20 2020 2070 6179  ndVoice'.    pay
-00007300: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00007310: 273a 2063 6861 745f 6964 7d0a 2020 2020  ': chat_id}.    
-00007320: 6669 6c65 7320 3d20 4e6f 6e65 0a20 2020  files = None.   
-00007330: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
-00007340: 7374 7269 6e67 2876 6f69 6365 293a 0a20  string(voice):. 
-00007350: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
-00007360: 2776 6f69 6365 273a 2076 6f69 6365 7d0a  'voice': voice}.
-00007370: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00007380: 2020 7061 796c 6f61 645b 2776 6f69 6365    payload['voice
-00007390: 275d 203d 2076 6f69 6365 0a20 2020 2069  '] = voice.    i
-000073a0: 6620 6361 7074 696f 6e3a 0a20 2020 2020  f caption:.     
-000073b0: 2020 2070 6179 6c6f 6164 5b27 6361 7074     payload['capt
-000073c0: 696f 6e27 5d20 3d20 6361 7074 696f 6e0a  ion'] = caption.
-000073d0: 2020 2020 6966 2064 7572 6174 696f 6e3a      if duration:
+00000000: 2320 2d2a 2d20 636f 6469 6e67 3a20 7574  # -*- coding: ut
+00000010: 662d 3820 2d2a 2d0d 0a69 6d70 6f72 7420  f-8 -*-..import 
+00000020: 7469 6d65 0d0a 6672 6f6d 2064 6174 6574  time..from datet
+00000030: 696d 6520 696d 706f 7274 2064 6174 6574  ime import datet
+00000040: 696d 650d 0a0d 0a74 7279 3a0d 0a20 2020  ime....try:..   
+00000050: 2069 6d70 6f72 7420 756a 736f 6e20 6173   import ujson as
+00000060: 206a 736f 6e0d 0a65 7863 6570 7420 496d   json..except Im
+00000070: 706f 7274 4572 726f 723a 0d0a 2020 2020  portError:..    
+00000080: 696d 706f 7274 206a 736f 6e0d 0a0d 0a69  import json....i
+00000090: 6d70 6f72 7420 7265 7175 6573 7473 0d0a  mport requests..
+000000a0: 6672 6f6d 2072 6571 7565 7374 732e 6578  from requests.ex
+000000b0: 6365 7074 696f 6e73 2069 6d70 6f72 7420  ceptions import 
+000000c0: 4854 5450 4572 726f 722c 2043 6f6e 6e65  HTTPError, Conne
+000000d0: 6374 696f 6e45 7272 6f72 2c20 5469 6d65  ctionError, Time
+000000e0: 6f75 740d 0a66 726f 6d20 7265 7175 6573  out..from reques
+000000f0: 7473 2e61 6461 7074 6572 7320 696d 706f  ts.adapters impo
+00000100: 7274 2048 5454 5041 6461 7074 6572 0d0a  rt HTTPAdapter..
+00000110: 0d0a 7472 793a 0d0a 2020 2020 2320 6e6f  ..try:..    # no
+00000120: 696e 7370 6563 7469 6f6e 2050 7955 6e72  inspection PyUnr
+00000130: 6573 6f6c 7665 6452 6566 6572 656e 6365  esolvedReference
+00000140: 730d 0a20 2020 2066 726f 6d20 7265 7175  s..    from requ
+00000150: 6573 7473 2e70 6163 6b61 6765 732e 7572  ests.packages.ur
+00000160: 6c6c 6962 3320 696d 706f 7274 2066 6965  llib3 import fie
+00000170: 6c64 730d 0a20 2020 2066 6f72 6d61 745f  lds..    format_
+00000180: 6865 6164 6572 5f70 6172 616d 203d 2066  header_param = f
+00000190: 6965 6c64 732e 666f 726d 6174 5f68 6561  ields.format_hea
+000001a0: 6465 725f 7061 7261 6d0d 0a65 7863 6570  der_param..excep
+000001b0: 7420 496d 706f 7274 4572 726f 723a 0d0a  t ImportError:..
+000001c0: 2020 2020 666f 726d 6174 5f68 6561 6465      format_heade
+000001d0: 725f 7061 7261 6d20 3d20 4e6f 6e65 0d0a  r_param = None..
+000001e0: 696d 706f 7274 2074 656c 6562 6f74 0d0a  import telebot..
+000001f0: 6672 6f6d 2074 656c 6562 6f74 2069 6d70  from telebot imp
+00000200: 6f72 7420 7479 7065 730d 0a66 726f 6d20  ort types..from 
+00000210: 7465 6c65 626f 7420 696d 706f 7274 2075  telebot import u
+00000220: 7469 6c0d 0a0d 0a6c 6f67 6765 7220 3d20  til....logger = 
+00000230: 7465 6c65 626f 742e 6c6f 6767 6572 0d0a  telebot.logger..
+00000240: 0d0a 7072 6f78 7920 3d20 4e6f 6e65 0d0a  ..proxy = None..
+00000250: 7365 7373 696f 6e20 3d20 4e6f 6e65 0d0a  session = None..
+00000260: 0d0a 4150 495f 5552 4c20 3d20 4e6f 6e65  ..API_URL = None
+00000270: 0d0a 4649 4c45 5f55 524c 203d 204e 6f6e  ..FILE_URL = Non
+00000280: 650d 0a0d 0a43 4f4e 4e45 4354 5f54 494d  e....CONNECT_TIM
+00000290: 454f 5554 203d 2031 350d 0a52 4541 445f  EOUT = 15..READ_
+000002a0: 5449 4d45 4f55 5420 3d20 3330 0d0a 0d0a  TIMEOUT = 30....
+000002b0: 4c4f 4e47 5f50 4f4c 4c49 4e47 5f54 494d  LONG_POLLING_TIM
+000002c0: 454f 5554 203d 2031 3020 2320 5368 6f75  EOUT = 10 # Shou
+000002d0: 6c64 2062 6520 706f 7369 7469 7665 2c20  ld be positive, 
+000002e0: 7368 6f72 7420 706f 6c6c 696e 6720 7368  short polling sh
+000002f0: 6f75 6c64 2062 6520 7573 6564 2066 6f72  ould be used for
+00000300: 2074 6573 7469 6e67 2070 7572 706f 7365   testing purpose
+00000310: 7320 6f6e 6c79 2028 6874 7470 733a 2f2f  s only (https://
+00000320: 636f 7265 2e74 656c 6567 7261 6d2e 6f72  core.telegram.or
+00000330: 672f 626f 7473 2f61 7069 2367 6574 7570  g/bots/api#getup
+00000340: 6461 7465 7329 0d0a 0d0a 5345 5353 494f  dates)....SESSIO
+00000350: 4e5f 5449 4d45 5f54 4f5f 4c49 5645 203d  N_TIME_TO_LIVE =
+00000360: 2036 3030 2020 2320 496e 2073 6563 6f6e   600  # In secon
+00000370: 6473 2e20 4e6f 6e65 202d 206c 6976 6520  ds. None - live 
+00000380: 666f 7265 7665 722c 2030 202d 206f 6e65  forever, 0 - one
+00000390: 2d74 696d 650d 0a0d 0a52 4554 5259 5f4f  -time....RETRY_O
+000003a0: 4e5f 4552 524f 5220 3d20 4661 6c73 650d  N_ERROR = False.
+000003b0: 0a52 4554 5259 5f54 494d 454f 5554 203d  .RETRY_TIMEOUT =
+000003c0: 2032 0d0a 4d41 585f 5245 5452 4945 5320   2..MAX_RETRIES 
+000003d0: 3d20 3135 0d0a 5245 5452 595f 454e 4749  = 15..RETRY_ENGI
+000003e0: 4e45 203d 2031 0d0a 0d0a 4355 5354 4f4d  NE = 1....CUSTOM
+000003f0: 5f53 4552 4941 4c49 5a45 5220 3d20 4e6f  _SERIALIZER = No
+00000400: 6e65 0d0a 4355 5354 4f4d 5f52 4551 5545  ne..CUSTOM_REQUE
+00000410: 5354 5f53 454e 4445 5220 3d20 4e6f 6e65  ST_SENDER = None
+00000420: 0d0a 0d0a 454e 4142 4c45 5f4d 4944 444c  ....ENABLE_MIDDL
+00000430: 4557 4152 4520 3d20 4661 6c73 650d 0a0d  EWARE = False...
+00000440: 0a0d 0a64 6566 205f 6765 745f 7265 715f  ...def _get_req_
+00000450: 7365 7373 696f 6e28 7265 7365 743d 4661  session(reset=Fa
+00000460: 6c73 6529 3a0d 0a20 2020 2069 6620 5345  lse):..    if SE
+00000470: 5353 494f 4e5f 5449 4d45 5f54 4f5f 4c49  SSION_TIME_TO_LI
+00000480: 5645 3a0d 0a20 2020 2020 2020 2023 2049  VE:..        # I
+00000490: 6620 7365 7373 696f 6e20 5454 4c20 6973  f session TTL is
+000004a0: 2073 6574 202d 2063 6865 636b 2074 696d   set - check tim
+000004b0: 6520 7061 7373 6564 0d0a 2020 2020 2020  e passed..      
+000004c0: 2020 6372 6561 7469 6f6e 5f64 6174 6520    creation_date 
+000004d0: 3d20 7574 696c 2e70 6572 5f74 6872 6561  = util.per_threa
+000004e0: 6428 2772 6571 5f73 6573 7369 6f6e 5f74  d('req_session_t
+000004f0: 696d 6527 2c20 6c61 6d62 6461 3a20 6461  ime', lambda: da
+00000500: 7465 7469 6d65 2e6e 6f77 2829 2c20 7265  tetime.now(), re
+00000510: 7365 7429 0d0a 2020 2020 2020 2020 2320  set)..        # 
+00000520: 6e6f 696e 7370 6563 7469 6f6e 2050 7954  noinspection PyT
+00000530: 7970 6543 6865 636b 6572 0d0a 2020 2020  ypeChecker..    
+00000540: 2020 2020 6966 2028 6461 7465 7469 6d65      if (datetime
+00000550: 2e6e 6f77 2829 202d 2063 7265 6174 696f  .now() - creatio
+00000560: 6e5f 6461 7465 292e 746f 7461 6c5f 7365  n_date).total_se
+00000570: 636f 6e64 7328 2920 3e20 5345 5353 494f  conds() > SESSIO
+00000580: 4e5f 5449 4d45 5f54 4f5f 4c49 5645 3a0d  N_TIME_TO_LIVE:.
+00000590: 0a20 2020 2020 2020 2020 2020 2023 2046  .            # F
+000005a0: 6f72 6365 2073 6573 7369 6f6e 2072 6573  orce session res
+000005b0: 6574 0d0a 2020 2020 2020 2020 2020 2020  et..            
+000005c0: 7265 7365 7420 3d20 5472 7565 0d0a 2020  reset = True..  
+000005d0: 2020 2020 2020 2020 2020 2320 5361 7665            # Save
+000005e0: 2072 6573 6574 2074 696d 650d 0a20 2020   reset time..   
+000005f0: 2020 2020 2020 2020 2075 7469 6c2e 7065           util.pe
+00000600: 725f 7468 7265 6164 2827 7265 715f 7365  r_thread('req_se
+00000610: 7373 696f 6e5f 7469 6d65 272c 206c 616d  ssion_time', lam
+00000620: 6264 613a 2064 6174 6574 696d 652e 6e6f  bda: datetime.no
+00000630: 7728 292c 2054 7275 6529 0d0a 0d0a 2020  w(), True)....  
+00000640: 2020 6966 2053 4553 5349 4f4e 5f54 494d    if SESSION_TIM
+00000650: 455f 544f 5f4c 4956 4520 3d3d 2030 3a0d  E_TO_LIVE == 0:.
+00000660: 0a20 2020 2020 2020 2023 2053 6573 7369  .        # Sessi
+00000670: 6f6e 2069 7320 6f6e 652d 7469 6d65 2075  on is one-time u
+00000680: 7365 0d0a 2020 2020 2020 2020 7265 7475  se..        retu
+00000690: 726e 2072 6571 7565 7374 732e 7365 7373  rn requests.sess
+000006a0: 696f 6e73 2e53 6573 7369 6f6e 2829 0d0a  ions.Session()..
+000006b0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000006c0: 2020 2023 2053 6573 7369 6f6e 206c 6976     # Session liv
+000006d0: 6573 2073 6f6d 6520 7469 6d65 206f 7220  es some time or 
+000006e0: 666f 7265 7665 7220 6f6e 6365 2063 7265  forever once cre
+000006f0: 6174 6564 2e20 4465 6661 756c 740d 0a20  ated. Default.. 
+00000700: 2020 2020 2020 2072 6574 7572 6e20 7574         return ut
+00000710: 696c 2e70 6572 5f74 6872 6561 6428 2772  il.per_thread('r
+00000720: 6571 5f73 6573 7369 6f6e 272c 206c 616d  eq_session', lam
+00000730: 6264 613a 2073 6573 7369 6f6e 2069 6620  bda: session if 
+00000740: 7365 7373 696f 6e20 656c 7365 2072 6571  session else req
+00000750: 7565 7374 732e 7365 7373 696f 6e73 2e53  uests.sessions.S
+00000760: 6573 7369 6f6e 2829 2c20 7265 7365 7429  ession(), reset)
+00000770: 0d0a 0d0a 0d0a 6465 6620 5f6d 616b 655f  ......def _make_
+00000780: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00000790: 6574 686f 645f 6e61 6d65 2c20 6d65 7468  ethod_name, meth
+000007a0: 6f64 3d27 6765 7427 2c20 7061 7261 6d73  od='get', params
+000007b0: 3d4e 6f6e 652c 2066 696c 6573 3d4e 6f6e  =None, files=Non
+000007c0: 6529 3a0d 0a20 2020 2022 2222 0d0a 2020  e):..    """..  
+000007d0: 2020 4d61 6b65 7320 6120 7265 7175 6573    Makes a reques
+000007e0: 7420 746f 2074 6865 2054 656c 6567 7261  t to the Telegra
+000007f0: 6d20 4150 492e 0d0a 2020 2020 3a70 6172  m API...    :par
+00000800: 616d 2074 6f6b 656e 3a20 5468 6520 626f  am token: The bo
+00000810: 7427 7320 4150 4920 746f 6b65 6e2e 2028  t's API token. (
+00000820: 4372 6561 7465 6420 7769 7468 2040 426f  Created with @Bo
+00000830: 7446 6174 6865 7229 0d0a 2020 2020 3a70  tFather)..    :p
+00000840: 6172 616d 206d 6574 686f 645f 6e61 6d65  aram method_name
+00000850: 3a20 4e61 6d65 206f 6620 7468 6520 4150  : Name of the AP
+00000860: 4920 6d65 7468 6f64 2074 6f20 6265 2063  I method to be c
+00000870: 616c 6c65 642e 2028 452e 672e 2027 6765  alled. (E.g. 'ge
+00000880: 7455 7064 6174 6573 2729 0d0a 2020 2020  tUpdates')..    
+00000890: 3a70 6172 616d 206d 6574 686f 643a 2048  :param method: H
+000008a0: 5454 5020 6d65 7468 6f64 2074 6f20 6265  TTP method to be
+000008b0: 2075 7365 642e 2044 6566 6175 6c74 7320   used. Defaults 
+000008c0: 746f 2027 6765 7427 2e0d 0a20 2020 203a  to 'get'...    :
+000008d0: 7061 7261 6d20 7061 7261 6d73 3a20 4f70  param params: Op
+000008e0: 7469 6f6e 616c 2070 6172 616d 6574 6572  tional parameter
+000008f0: 732e 2053 686f 756c 6420 6265 2061 2064  s. Should be a d
+00000900: 6963 7469 6f6e 6172 7920 7769 7468 206b  ictionary with k
+00000910: 6579 2d76 616c 7565 2070 6169 7273 2e0d  ey-value pairs..
+00000920: 0a20 2020 203a 7061 7261 6d20 6669 6c65  .    :param file
+00000930: 733a 204f 7074 696f 6e61 6c20 6669 6c65  s: Optional file
+00000940: 732e 0d0a 2020 2020 3a72 6574 7572 6e3a  s...    :return:
+00000950: 2054 6865 2072 6573 756c 7420 7061 7273   The result pars
+00000960: 6564 2074 6f20 6120 4a53 4f4e 2064 6963  ed to a JSON dic
+00000970: 7469 6f6e 6172 792e 0d0a 2020 2020 2222  tionary...    ""
+00000980: 220d 0a20 2020 2069 6620 6e6f 7420 746f  "..    if not to
+00000990: 6b65 6e3a 0d0a 2020 2020 2020 2020 7261  ken:..        ra
+000009a0: 6973 6520 4578 6365 7074 696f 6e28 2742  ise Exception('B
+000009b0: 6f74 2074 6f6b 656e 2069 7320 6e6f 7420  ot token is not 
+000009c0: 6465 6669 6e65 6427 290d 0a20 2020 2069  defined')..    i
+000009d0: 6620 4150 495f 5552 4c3a 0d0a 2020 2020  f API_URL:..    
+000009e0: 2020 2020 2320 6e6f 696e 7370 6563 7469      # noinspecti
+000009f0: 6f6e 2050 7955 6e72 6573 6f6c 7665 6452  on PyUnresolvedR
+00000a00: 6566 6572 656e 6365 730d 0a20 2020 2020  eferences..     
+00000a10: 2020 2072 6571 7565 7374 5f75 726c 203d     request_url =
+00000a20: 2041 5049 5f55 524c 2e66 6f72 6d61 7428   API_URL.format(
+00000a30: 746f 6b65 6e2c 206d 6574 686f 645f 6e61  token, method_na
+00000a40: 6d65 290d 0a20 2020 2065 6c73 653a 0d0a  me)..    else:..
+00000a50: 2020 2020 2020 2020 7265 7175 6573 745f          request_
+00000a60: 7572 6c20 3d20 2268 7474 7073 3a2f 2f61  url = "https://a
+00000a70: 7069 2e74 656c 6567 7261 6d2e 6f72 672f  pi.telegram.org/
+00000a80: 626f 747b 307d 2f7b 317d 222e 666f 726d  bot{0}/{1}".form
+00000a90: 6174 2874 6f6b 656e 2c20 6d65 7468 6f64  at(token, method
+00000aa0: 5f6e 616d 6529 0d0a 0d0a 2020 2020 6c6f  _name)....    lo
+00000ab0: 6767 6572 2e64 6562 7567 2822 5265 7175  gger.debug("Requ
+00000ac0: 6573 743a 206d 6574 686f 643d 7b30 7d20  est: method={0} 
+00000ad0: 7572 6c3d 7b31 7d20 7061 7261 6d73 3d7b  url={1} params={
+00000ae0: 327d 2066 696c 6573 3d7b 337d 222e 666f  2} files={3}".fo
+00000af0: 726d 6174 286d 6574 686f 642c 2072 6571  rmat(method, req
+00000b00: 7565 7374 5f75 726c 2c20 7061 7261 6d73  uest_url, params
+00000b10: 2c20 6669 6c65 7329 2e72 6570 6c61 6365  , files).replace
+00000b20: 2874 6f6b 656e 2c20 746f 6b65 6e2e 7370  (token, token.sp
+00000b30: 6c69 7428 273a 2729 5b30 5d20 2b20 223a  lit(':')[0] + ":
+00000b40: 7b54 4f4b 454e 7d22 2929 0d0a 2020 2020  {TOKEN}"))..    
+00000b50: 7265 6164 5f74 696d 656f 7574 203d 2052  read_timeout = R
+00000b60: 4541 445f 5449 4d45 4f55 540d 0a20 2020  EAD_TIMEOUT..   
+00000b70: 2063 6f6e 6e65 6374 5f74 696d 656f 7574   connect_timeout
+00000b80: 203d 2043 4f4e 4e45 4354 5f54 494d 454f   = CONNECT_TIMEO
+00000b90: 5554 0d0a 0d0a 2020 2020 6966 2066 696c  UT....    if fil
+00000ba0: 6573 3a0d 0a20 2020 2020 2020 2066 696c  es:..        fil
+00000bb0: 6573 5f63 6f70 7920 3d20 6469 6374 2866  es_copy = dict(f
+00000bc0: 696c 6573 290d 0a20 2020 2020 2020 2023  iles)..        #
+00000bd0: 2070 726f 6365 7373 2074 7970 6573 2e49   process types.I
+00000be0: 6e70 7574 4669 6c65 0d0a 2020 2020 2020  nputFile..      
+00000bf0: 2020 666f 7220 6b65 792c 2076 616c 7565    for key, value
+00000c00: 2069 6e20 6669 6c65 735f 636f 7079 2e69   in files_copy.i
+00000c10: 7465 6d73 2829 3a0d 0a20 2020 2020 2020  tems():..       
+00000c20: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00000c30: 6365 2876 616c 7565 2c20 7479 7065 732e  ce(value, types.
+00000c40: 496e 7075 7446 696c 6529 3a0d 0a20 2020  InputFile):..   
+00000c50: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00000c60: 6573 5b6b 6579 5d20 3d20 7661 6c75 652e  es[key] = value.
+00000c70: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
+00000c80: 2020 2020 2020 0d0a 2020 2020 0d0a 2020        ..    ..  
+00000c90: 2020 6966 2066 696c 6573 2061 6e64 2066    if files and f
+00000ca0: 6f72 6d61 745f 6865 6164 6572 5f70 6172  ormat_header_par
+00000cb0: 616d 3a0d 0a20 2020 2020 2020 2066 6965  am:..        fie
+00000cc0: 6c64 732e 666f 726d 6174 5f68 6561 6465  lds.format_heade
+00000cd0: 725f 7061 7261 6d20 3d20 5f6e 6f5f 656e  r_param = _no_en
+00000ce0: 636f 6465 2866 6f72 6d61 745f 6865 6164  code(format_head
+00000cf0: 6572 5f70 6172 616d 290d 0a20 2020 2069  er_param)..    i
+00000d00: 6620 7061 7261 6d73 3a0d 0a20 2020 2020  f params:..     
+00000d10: 2020 2069 6620 2774 696d 656f 7574 2720     if 'timeout' 
+00000d20: 696e 2070 6172 616d 733a 0d0a 2020 2020  in params:..    
+00000d30: 2020 2020 2020 2020 7265 6164 5f74 696d          read_tim
+00000d40: 656f 7574 203d 2070 6172 616d 732e 706f  eout = params.po
+00000d50: 7028 2774 696d 656f 7574 2729 0d0a 2020  p('timeout')..  
+00000d60: 2020 2020 2020 2020 2020 636f 6e6e 6563            connec
+00000d70: 745f 7469 6d65 6f75 7420 3d20 7265 6164  t_timeout = read
+00000d80: 5f74 696d 656f 7574 0d0a 2020 2020 2020  _timeout..      
+00000d90: 2020 6966 2027 6c6f 6e67 5f70 6f6c 6c69    if 'long_polli
+00000da0: 6e67 5f74 696d 656f 7574 2720 696e 2070  ng_timeout' in p
+00000db0: 6172 616d 733a 0d0a 2020 2020 2020 2020  arams:..        
+00000dc0: 2020 2020 2320 466f 7220 6765 7455 7064      # For getUpd
+00000dd0: 6174 6573 2e20 4974 2773 2074 6865 206f  ates. It's the o
+00000de0: 6e6c 7920 6675 6e63 7469 6f6e 2077 6974  nly function wit
+00000df0: 6820 7469 6d65 6f75 7420 7061 7261 6d65  h timeout parame
+00000e00: 7465 7220 6f6e 2074 6865 2042 4f54 2041  ter on the BOT A
+00000e10: 5049 2073 6964 650d 0a20 2020 2020 2020  PI side..       
+00000e20: 2020 2020 206c 6f6e 675f 706f 6c6c 696e       long_pollin
+00000e30: 675f 7469 6d65 6f75 7420 3d20 7061 7261  g_timeout = para
+00000e40: 6d73 2e70 6f70 2827 6c6f 6e67 5f70 6f6c  ms.pop('long_pol
+00000e50: 6c69 6e67 5f74 696d 656f 7574 2729 0d0a  ling_timeout')..
+00000e60: 2020 2020 2020 2020 2020 2020 7061 7261              para
+00000e70: 6d73 5b27 7469 6d65 6f75 7427 5d20 3d20  ms['timeout'] = 
+00000e80: 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74 696d  long_polling_tim
+00000e90: 656f 7574 0d0a 2020 2020 2020 2020 2020  eout..          
+00000ea0: 2020 2320 4c6f 6e67 2070 6f6c 6c69 6e67    # Long polling
+00000eb0: 2068 616e 6773 2066 6f72 2061 2067 6976   hangs for a giv
+00000ec0: 656e 2074 696d 652e 2052 6561 6420 7469  en time. Read ti
+00000ed0: 6d65 6f75 7420 7368 6f75 6c64 2062 6520  meout should be 
+00000ee0: 6772 6561 7465 7220 7468 6174 206c 6f6e  greater that lon
+00000ef0: 675f 706f 6c6c 696e 675f 7469 6d65 6f75  g_polling_timeou
+00000f00: 740d 0a20 2020 2020 2020 2020 2020 2072  t..            r
+00000f10: 6561 645f 7469 6d65 6f75 7420 3d20 6d61  ead_timeout = ma
+00000f20: 7828 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74  x(long_polling_t
+00000f30: 696d 656f 7574 202b 2035 2c20 7265 6164  imeout + 5, read
+00000f40: 5f74 696d 656f 7574 290d 0a0d 0a20 2020  _timeout)....   
+00000f50: 2070 6172 616d 7320 3d20 7061 7261 6d73   params = params
+00000f60: 206f 7220 4e6f 6e65 2023 2053 6574 2070   or None # Set p
+00000f70: 6172 616d 7320 746f 204e 6f6e 6520 6966  arams to None if
+00000f80: 2065 6d70 7479 0d0a 2020 2020 7265 7375   empty..    resu
+00000f90: 6c74 203d 204e 6f6e 650d 0a0d 0a20 2020  lt = None....   
+00000fa0: 2069 6620 4355 5354 4f4d 5f52 4551 5545   if CUSTOM_REQUE
+00000fb0: 5354 5f53 454e 4445 523a 0d0a 2020 2020  ST_SENDER:..    
+00000fc0: 2020 2020 2320 6e6f 696e 7370 6563 7469      # noinspecti
+00000fd0: 6f6e 2050 7943 616c 6c69 6e67 4e6f 6e43  on PyCallingNonC
+00000fe0: 616c 6c61 626c 650d 0a20 2020 2020 2020  allable..       
+00000ff0: 2072 6573 756c 7420 3d20 4355 5354 4f4d   result = CUSTOM
+00001000: 5f52 4551 5545 5354 5f53 454e 4445 5228  _REQUEST_SENDER(
+00001010: 0d0a 2020 2020 2020 2020 2020 2020 6d65  ..            me
+00001020: 7468 6f64 2c20 7265 7175 6573 745f 7572  thod, request_ur
+00001030: 6c2c 2070 6172 616d 733d 7061 7261 6d73  l, params=params
+00001040: 2c20 6669 6c65 733d 6669 6c65 732c 0d0a  , files=files,..
+00001050: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00001060: 6f75 743d 2863 6f6e 6e65 6374 5f74 696d  out=(connect_tim
+00001070: 656f 7574 2c20 7265 6164 5f74 696d 656f  eout, read_timeo
+00001080: 7574 292c 2070 726f 7869 6573 3d70 726f  ut), proxies=pro
+00001090: 7879 290d 0a20 2020 2065 6c69 6620 5245  xy)..    elif RE
+000010a0: 5452 595f 4f4e 5f45 5252 4f52 2061 6e64  TRY_ON_ERROR and
+000010b0: 2052 4554 5259 5f45 4e47 494e 4520 3d3d   RETRY_ENGINE ==
+000010c0: 2031 3a0d 0a20 2020 2020 2020 2067 6f74   1:..        got
+000010d0: 5f72 6573 756c 7420 3d20 4661 6c73 650d  _result = False.
+000010e0: 0a20 2020 2020 2020 2063 7572 7265 6e74  .        current
+000010f0: 5f74 7279 203d 2030 0d0a 2020 2020 2020  _try = 0..      
+00001100: 2020 7768 696c 6520 6e6f 7420 676f 745f    while not got_
+00001110: 7265 7375 6c74 2061 6e64 2063 7572 7265  result and curre
+00001120: 6e74 5f74 7279 3c4d 4158 5f52 4554 5249  nt_try<MAX_RETRI
+00001130: 4553 2d31 3a0d 0a20 2020 2020 2020 2020  ES-1:..         
+00001140: 2020 2063 7572 7265 6e74 5f74 7279 2b3d     current_try+=
+00001150: 310d 0a20 2020 2020 2020 2020 2020 2074  1..            t
+00001160: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00001170: 2020 2020 2072 6573 756c 7420 3d20 5f67       result = _g
+00001180: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
+00001190: 2e72 6571 7565 7374 280d 0a20 2020 2020  .request(..     
+000011a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000011b0: 6574 686f 642c 2072 6571 7565 7374 5f75  ethod, request_u
+000011c0: 726c 2c20 7061 7261 6d73 3d70 6172 616d  rl, params=param
+000011d0: 732c 2066 696c 6573 3d66 696c 6573 2c0d  s, files=files,.
+000011e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000011f0: 2020 2020 2074 696d 656f 7574 3d28 636f       timeout=(co
+00001200: 6e6e 6563 745f 7469 6d65 6f75 742c 2072  nnect_timeout, r
+00001210: 6561 645f 7469 6d65 6f75 7429 2c20 7072  ead_timeout), pr
+00001220: 6f78 6965 733d 7072 6f78 7929 0d0a 2020  oxies=proxy)..  
+00001230: 2020 2020 2020 2020 2020 2020 2020 676f                go
+00001240: 745f 7265 7375 6c74 203d 2054 7275 650d  t_result = True.
+00001250: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00001260: 6570 7420 4854 5450 4572 726f 723a 0d0a  ept HTTPError:..
+00001270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001280: 6c6f 6767 6572 2e64 6562 7567 2822 4854  logger.debug("HT
+00001290: 5450 2045 7272 6f72 206f 6e20 7b30 7d20  TP Error on {0} 
+000012a0: 6d65 7468 6f64 2028 5472 7920 237b 317d  method (Try #{1}
+000012b0: 2922 2e66 6f72 6d61 7428 6d65 7468 6f64  )".format(method
+000012c0: 5f6e 616d 652c 2063 7572 7265 6e74 5f74  _name, current_t
+000012d0: 7279 2929 0d0a 2020 2020 2020 2020 2020  ry))..          
+000012e0: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+000012f0: 2852 4554 5259 5f54 494d 454f 5554 290d  (RETRY_TIMEOUT).
+00001300: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00001310: 6570 7420 436f 6e6e 6563 7469 6f6e 4572  ept ConnectionEr
+00001320: 726f 723a 0d0a 2020 2020 2020 2020 2020  ror:..          
+00001330: 2020 2020 2020 6c6f 6767 6572 2e64 6562        logger.deb
+00001340: 7567 2822 436f 6e6e 6563 7469 6f6e 2045  ug("Connection E
+00001350: 7272 6f72 206f 6e20 7b30 7d20 6d65 7468  rror on {0} meth
+00001360: 6f64 2028 5472 7920 237b 317d 2922 2e66  od (Try #{1})".f
+00001370: 6f72 6d61 7428 6d65 7468 6f64 5f6e 616d  ormat(method_nam
+00001380: 652c 2063 7572 7265 6e74 5f74 7279 2929  e, current_try))
+00001390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000013a0: 2020 7469 6d65 2e73 6c65 6570 2852 4554    time.sleep(RET
+000013b0: 5259 5f54 494d 454f 5554 290d 0a20 2020  RY_TIMEOUT)..   
+000013c0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+000013d0: 5469 6d65 6f75 743a 0d0a 2020 2020 2020  Timeout:..      
+000013e0: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
+000013f0: 2e64 6562 7567 2822 5469 6d65 6f75 7420  .debug("Timeout 
+00001400: 4572 726f 7220 6f6e 207b 307d 206d 6574  Error on {0} met
+00001410: 686f 6420 2854 7279 2023 7b31 7d29 222e  hod (Try #{1})".
+00001420: 666f 726d 6174 286d 6574 686f 645f 6e61  format(method_na
+00001430: 6d65 2c20 6375 7272 656e 745f 7472 7929  me, current_try)
+00001440: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00001450: 2020 2074 696d 652e 736c 6565 7028 5245     time.sleep(RE
+00001460: 5452 595f 5449 4d45 4f55 5429 0d0a 2020  TRY_TIMEOUT)..  
+00001470: 2020 2020 2020 6966 206e 6f74 2067 6f74        if not got
+00001480: 5f72 6573 756c 743a 0d0a 2020 2020 2020  _result:..      
+00001490: 2020 2020 2020 7265 7375 6c74 203d 205f        result = _
+000014a0: 6765 745f 7265 715f 7365 7373 696f 6e28  get_req_session(
+000014b0: 292e 7265 7175 6573 7428 0d0a 2020 2020  ).request(..    
+000014c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014d0: 6d65 7468 6f64 2c20 7265 7175 6573 745f  method, request_
+000014e0: 7572 6c2c 2070 6172 616d 733d 7061 7261  url, params=para
+000014f0: 6d73 2c20 6669 6c65 733d 6669 6c65 732c  ms, files=files,
+00001500: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001510: 2020 2020 2020 7469 6d65 6f75 743d 2863        timeout=(c
+00001520: 6f6e 6e65 6374 5f74 696d 656f 7574 2c20  onnect_timeout, 
+00001530: 7265 6164 5f74 696d 656f 7574 292c 2070  read_timeout), p
+00001540: 726f 7869 6573 3d70 726f 7879 290d 0a20  roxies=proxy).. 
+00001550: 2020 2065 6c69 6620 5245 5452 595f 4f4e     elif RETRY_ON
+00001560: 5f45 5252 4f52 2061 6e64 2052 4554 5259  _ERROR and RETRY
+00001570: 5f45 4e47 494e 4520 3d3d 2032 3a0d 0a20  _ENGINE == 2:.. 
+00001580: 2020 2020 2020 2068 7474 7020 3d20 5f67         http = _g
+00001590: 6574 5f72 6571 5f73 6573 7369 6f6e 2829  et_req_session()
+000015a0: 0d0a 2020 2020 2020 2020 2320 6e6f 696e  ..        # noin
+000015b0: 7370 6563 7469 6f6e 2050 7955 6e72 6573  spection PyUnres
+000015c0: 6f6c 7665 6452 6566 6572 656e 6365 730d  olvedReferences.
+000015d0: 0a20 2020 2020 2020 2072 6574 7279 5f73  .        retry_s
+000015e0: 7472 6174 6567 7920 3d20 7265 7175 6573  trategy = reques
+000015f0: 7473 2e70 6163 6b61 6765 732e 7572 6c6c  ts.packages.urll
+00001600: 6962 332e 7574 696c 2e72 6574 7279 2e52  ib3.util.retry.R
+00001610: 6574 7279 280d 0a20 2020 2020 2020 2020  etry(..         
+00001620: 2020 2074 6f74 616c 3d4d 4158 5f52 4554     total=MAX_RET
+00001630: 5249 4553 2c0d 0a20 2020 2020 2020 2029  RIES,..        )
+00001640: 0d0a 2020 2020 2020 2020 6164 6170 7465  ..        adapte
+00001650: 7220 3d20 4854 5450 4164 6170 7465 7228  r = HTTPAdapter(
+00001660: 6d61 785f 7265 7472 6965 733d 7265 7472  max_retries=retr
+00001670: 795f 7374 7261 7465 6779 290d 0a20 2020  y_strategy)..   
+00001680: 2020 2020 2066 6f72 2070 7265 6669 7820       for prefix 
+00001690: 696e 2028 2768 7474 703a 2f2f 272c 2027  in ('http://', '
+000016a0: 6874 7470 733a 2f2f 2729 3a0d 0a20 2020  https://'):..   
+000016b0: 2020 2020 2020 2020 2068 7474 702e 6d6f           http.mo
+000016c0: 756e 7428 7072 6566 6978 2c20 6164 6170  unt(prefix, adap
+000016d0: 7465 7229 0d0a 2020 2020 2020 2020 7265  ter)..        re
+000016e0: 7375 6c74 203d 2068 7474 702e 7265 7175  sult = http.requ
+000016f0: 6573 7428 0d0a 2020 2020 2020 2020 2020  est(..          
+00001700: 2020 6d65 7468 6f64 2c20 7265 7175 6573    method, reques
+00001710: 745f 7572 6c2c 2070 6172 616d 733d 7061  t_url, params=pa
+00001720: 7261 6d73 2c20 6669 6c65 733d 6669 6c65  rams, files=file
+00001730: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+00001740: 7469 6d65 6f75 743d 2863 6f6e 6e65 6374  timeout=(connect
+00001750: 5f74 696d 656f 7574 2c20 7265 6164 5f74  _timeout, read_t
+00001760: 696d 656f 7574 292c 2070 726f 7869 6573  imeout), proxies
+00001770: 3d70 726f 7879 290d 0a20 2020 2065 6c73  =proxy)..    els
+00001780: 653a 0d0a 2020 2020 2020 2020 7265 7375  e:..        resu
+00001790: 6c74 203d 205f 6765 745f 7265 715f 7365  lt = _get_req_se
+000017a0: 7373 696f 6e28 292e 7265 7175 6573 7428  ssion().request(
+000017b0: 0d0a 2020 2020 2020 2020 2020 2020 6d65  ..            me
+000017c0: 7468 6f64 2c20 7265 7175 6573 745f 7572  thod, request_ur
+000017d0: 6c2c 2070 6172 616d 733d 7061 7261 6d73  l, params=params
+000017e0: 2c20 6669 6c65 733d 6669 6c65 732c 0d0a  , files=files,..
+000017f0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00001800: 6f75 743d 2863 6f6e 6e65 6374 5f74 696d  out=(connect_tim
+00001810: 656f 7574 2c20 7265 6164 5f74 696d 656f  eout, read_timeo
+00001820: 7574 292c 2070 726f 7869 6573 3d70 726f  ut), proxies=pro
+00001830: 7879 290d 0a20 2020 200d 0a20 2020 206c  xy)..    ..    l
+00001840: 6f67 6765 722e 6465 6275 6728 2254 6865  ogger.debug("The
+00001850: 2073 6572 7665 7220 7265 7475 726e 6564   server returned
+00001860: 3a20 277b 307d 2722 2e66 6f72 6d61 7428  : '{0}'".format(
+00001870: 7265 7375 6c74 2e74 6578 742e 656e 636f  result.text.enco
+00001880: 6465 2827 7574 6638 2729 2929 0d0a 2020  de('utf8')))..  
+00001890: 2020 0d0a 2020 2020 6a73 6f6e 5f72 6573    ..    json_res
+000018a0: 756c 7420 3d20 5f63 6865 636b 5f72 6573  ult = _check_res
+000018b0: 756c 7428 6d65 7468 6f64 5f6e 616d 652c  ult(method_name,
+000018c0: 2072 6573 756c 7429 0d0a 2020 2020 6966   result)..    if
+000018d0: 206a 736f 6e5f 7265 7375 6c74 3a0d 0a20   json_result:.. 
+000018e0: 2020 2020 2020 2072 6574 7572 6e20 6a73         return js
+000018f0: 6f6e 5f72 6573 756c 745b 2772 6573 756c  on_result['resul
+00001900: 7427 5d0d 0a0d 0a0d 0a64 6566 205f 6368  t']......def _ch
+00001910: 6563 6b5f 7265 7375 6c74 286d 6574 686f  eck_result(metho
+00001920: 645f 6e61 6d65 2c20 7265 7375 6c74 293a  d_name, result):
+00001930: 0d0a 2020 2020 2222 220d 0a20 2020 2043  ..    """..    C
+00001940: 6865 636b 7320 7768 6574 6865 7220 6072  hecks whether `r
+00001950: 6573 756c 7460 2069 7320 6120 7661 6c69  esult` is a vali
+00001960: 6420 4150 4920 7265 7370 6f6e 7365 2e0d  d API response..
+00001970: 0a20 2020 2041 2072 6573 756c 7420 6973  .    A result is
+00001980: 2063 6f6e 7369 6465 7265 6420 696e 7661   considered inva
+00001990: 6c69 6420 6966 3a0d 0a20 2020 2020 2020  lid if:..       
+000019a0: 202d 2054 6865 2073 6572 7665 7220 7265   - The server re
+000019b0: 7475 726e 6564 2061 6e20 4854 5450 2072  turned an HTTP r
+000019c0: 6573 706f 6e73 6520 636f 6465 206f 7468  esponse code oth
+000019d0: 6572 2074 6861 6e20 3230 300d 0a20 2020  er than 200..   
+000019e0: 2020 2020 202d 2054 6865 2063 6f6e 7465       - The conte
+000019f0: 6e74 206f 6620 7468 6520 7265 7375 6c74  nt of the result
+00001a00: 2069 7320 696e 7661 6c69 6420 4a53 4f4e   is invalid JSON
+00001a10: 2e0d 0a20 2020 2020 2020 202d 2054 6865  ...        - The
+00001a20: 206d 6574 686f 6420 6361 6c6c 2077 6173   method call was
+00001a30: 2075 6e73 7563 6365 7373 6675 6c20 2854   unsuccessful (T
+00001a40: 6865 204a 534f 4e20 276f 6b27 2066 6965  he JSON 'ok' fie
+00001a50: 6c64 2065 7175 616c 7320 4661 6c73 6529  ld equals False)
+00001a60: 0d0a 0d0a 2020 2020 3a72 6169 7365 7320  ....    :raises 
+00001a70: 4170 6945 7863 6570 7469 6f6e 3a20 6966  ApiException: if
+00001a80: 206f 6e65 206f 6620 7468 6520 6162 6f76   one of the abov
+00001a90: 6520 6c69 7374 6564 2063 6173 6573 2069  e listed cases i
+00001aa0: 7320 6170 706c 6963 6162 6c65 0d0a 2020  s applicable..  
+00001ab0: 2020 3a70 6172 616d 206d 6574 686f 645f    :param method_
+00001ac0: 6e61 6d65 3a20 5468 6520 6e61 6d65 206f  name: The name o
+00001ad0: 6620 7468 6520 6d65 7468 6f64 2063 616c  f the method cal
+00001ae0: 6c65 640d 0a20 2020 203a 7061 7261 6d20  led..    :param 
+00001af0: 7265 7375 6c74 3a20 5468 6520 7265 7475  result: The retu
+00001b00: 726e 6564 2072 6573 756c 7420 6f66 2074  rned result of t
+00001b10: 6865 206d 6574 686f 6420 7265 7175 6573  he method reques
+00001b20: 740d 0a20 2020 203a 7265 7475 726e 3a20  t..    :return: 
+00001b30: 5468 6520 7265 7375 6c74 2070 6172 7365  The result parse
+00001b40: 6420 746f 2061 204a 534f 4e20 6469 6374  d to a JSON dict
+00001b50: 696f 6e61 7279 2e0d 0a20 2020 2022 2222  ionary...    """
+00001b60: 0d0a 2020 2020 7472 793a 0d0a 2020 2020  ..    try:..    
+00001b70: 2020 2020 7265 7375 6c74 5f6a 736f 6e20      result_json 
+00001b80: 3d20 7265 7375 6c74 2e6a 736f 6e28 290d  = result.json().
+00001b90: 0a20 2020 2065 7863 6570 743a 0d0a 2020  .    except:..  
+00001ba0: 2020 2020 2020 6966 2072 6573 756c 742e        if result.
+00001bb0: 7374 6174 7573 5f63 6f64 6520 213d 2032  status_code != 2
+00001bc0: 3030 3a0d 0a20 2020 2020 2020 2020 2020  00:..           
+00001bd0: 2072 6169 7365 2041 7069 4854 5450 4578   raise ApiHTTPEx
+00001be0: 6365 7074 696f 6e28 6d65 7468 6f64 5f6e  ception(method_n
+00001bf0: 616d 652c 2072 6573 756c 7429 0d0a 2020  ame, result)..  
+00001c00: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00001c10: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
+00001c20: 7069 496e 7661 6c69 644a 534f 4e45 7863  piInvalidJSONExc
+00001c30: 6570 7469 6f6e 286d 6574 686f 645f 6e61  eption(method_na
+00001c40: 6d65 2c20 7265 7375 6c74 290d 0a20 2020  me, result)..   
+00001c50: 2065 6c73 653a 2020 2020 0d0a 2020 2020   else:    ..    
+00001c60: 2020 2020 6966 206e 6f74 2072 6573 756c      if not resul
+00001c70: 745f 6a73 6f6e 5b27 6f6b 275d 3a0d 0a20  t_json['ok']:.. 
+00001c80: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00001c90: 2041 7069 5465 6c65 6772 616d 4578 6365   ApiTelegramExce
+00001ca0: 7074 696f 6e28 6d65 7468 6f64 5f6e 616d  ption(method_nam
+00001cb0: 652c 2072 6573 756c 742c 2072 6573 756c  e, result, resul
+00001cc0: 745f 6a73 6f6e 290d 0a20 2020 2020 2020  t_json)..       
+00001cd0: 2020 2020 200d 0a20 2020 2020 2020 2072       ..        r
+00001ce0: 6574 7572 6e20 7265 7375 6c74 5f6a 736f  eturn result_jso
+00001cf0: 6e0d 0a0d 0a0d 0a64 6566 2067 6574 5f6d  n......def get_m
+00001d00: 6528 746f 6b65 6e29 3a0d 0a20 2020 206d  e(token):..    m
+00001d10: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
+00001d20: 744d 6527 0d0a 2020 2020 7265 7475 726e  tMe'..    return
+00001d30: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00001d40: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00001d50: 290d 0a0d 0a0d 0a64 6566 206c 6f67 5f6f  )......def log_o
+00001d60: 7574 2874 6f6b 656e 293a 0d0a 2020 2020  ut(token):..    
+00001d70: 6d65 7468 6f64 5f75 726c 203d 2072 276c  method_url = r'l
+00001d80: 6f67 4f75 7427 0d0a 2020 2020 7265 7475  ogOut'..    retu
+00001d90: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00001da0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00001db0: 726c 290d 0a0d 0a0d 0a64 6566 2063 6c6f  rl)......def clo
+00001dc0: 7365 2874 6f6b 656e 293a 0d0a 2020 2020  se(token):..    
+00001dd0: 6d65 7468 6f64 5f75 726c 203d 2072 2763  method_url = r'c
+00001de0: 6c6f 7365 270d 0a20 2020 2072 6574 7572  lose'..    retur
+00001df0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00001e00: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00001e10: 6c29 0d0a 0d0a 0d0a 6465 6620 6765 745f  l)......def get_
+00001e20: 6669 6c65 2874 6f6b 656e 2c20 6669 6c65  file(token, file
+00001e30: 5f69 6429 3a0d 0a20 2020 206d 6574 686f  _id):..    metho
+00001e40: 645f 7572 6c20 3d20 7227 6765 7446 696c  d_url = r'getFil
+00001e50: 6527 0d0a 2020 2020 7265 7475 726e 205f  e'..    return _
+00001e60: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00001e70: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00001e80: 7061 7261 6d73 3d7b 2766 696c 655f 6964  params={'file_id
+00001e90: 273a 2066 696c 655f 6964 7d29 0d0a 0d0a  ': file_id})....
+00001ea0: 0d0a 6465 6620 6765 745f 6669 6c65 5f75  ..def get_file_u
+00001eb0: 726c 2874 6f6b 656e 2c20 6669 6c65 5f69  rl(token, file_i
+00001ec0: 6429 3a0d 0a20 2020 2069 6620 4649 4c45  d):..    if FILE
+00001ed0: 5f55 524c 2069 7320 4e6f 6e65 3a0d 0a20  _URL is None:.. 
+00001ee0: 2020 2020 2020 2072 6574 7572 6e20 2268         return "h
+00001ef0: 7474 7073 3a2f 2f61 7069 2e74 656c 6567  ttps://api.teleg
+00001f00: 7261 6d2e 6f72 672f 6669 6c65 2f62 6f74  ram.org/file/bot
+00001f10: 7b30 7d2f 7b31 7d22 2e66 6f72 6d61 7428  {0}/{1}".format(
+00001f20: 746f 6b65 6e2c 2067 6574 5f66 696c 6528  token, get_file(
+00001f30: 746f 6b65 6e2c 2066 696c 655f 6964 295b  token, file_id)[
+00001f40: 2766 696c 655f 7061 7468 275d 290d 0a20  'file_path']).. 
+00001f50: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00001f60: 2020 2320 6e6f 696e 7370 6563 7469 6f6e    # noinspection
+00001f70: 2050 7955 6e72 6573 6f6c 7665 6452 6566   PyUnresolvedRef
+00001f80: 6572 656e 6365 730d 0a20 2020 2020 2020  erences..       
+00001f90: 2072 6574 7572 6e20 4649 4c45 5f55 524c   return FILE_URL
+00001fa0: 2e66 6f72 6d61 7428 746f 6b65 6e2c 2067  .format(token, g
+00001fb0: 6574 5f66 696c 6528 746f 6b65 6e2c 2066  et_file(token, f
+00001fc0: 696c 655f 6964 295b 2766 696c 655f 7061  ile_id)['file_pa
+00001fd0: 7468 275d 290d 0a0d 0a0d 0a64 6566 2064  th'])......def d
+00001fe0: 6f77 6e6c 6f61 645f 6669 6c65 2874 6f6b  ownload_file(tok
+00001ff0: 656e 2c20 6669 6c65 5f70 6174 6829 3a0d  en, file_path):.
+00002000: 0a20 2020 2069 6620 4649 4c45 5f55 524c  .    if FILE_URL
+00002010: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00002020: 2020 2075 726c 203d 2020 2268 7474 7073     url =  "https
+00002030: 3a2f 2f61 7069 2e74 656c 6567 7261 6d2e  ://api.telegram.
+00002040: 6f72 672f 6669 6c65 2f62 6f74 7b30 7d2f  org/file/bot{0}/
+00002050: 7b31 7d22 2e66 6f72 6d61 7428 746f 6b65  {1}".format(toke
+00002060: 6e2c 2066 696c 655f 7061 7468 290d 0a20  n, file_path).. 
+00002070: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00002080: 2020 2320 6e6f 696e 7370 6563 7469 6f6e    # noinspection
+00002090: 2050 7955 6e72 6573 6f6c 7665 6452 6566   PyUnresolvedRef
+000020a0: 6572 656e 6365 730d 0a20 2020 2020 2020  erences..       
+000020b0: 2075 726c 203d 2020 4649 4c45 5f55 524c   url =  FILE_URL
+000020c0: 2e66 6f72 6d61 7428 746f 6b65 6e2c 2066  .format(token, f
+000020d0: 696c 655f 7061 7468 290d 0a20 2020 2020  ile_path)..     
+000020e0: 2020 200d 0a20 2020 2072 6573 756c 7420     ..    result 
+000020f0: 3d20 5f67 6574 5f72 6571 5f73 6573 7369  = _get_req_sessi
+00002100: 6f6e 2829 2e67 6574 2875 726c 2c20 7072  on().get(url, pr
+00002110: 6f78 6965 733d 7072 6f78 7929 0d0a 2020  oxies=proxy)..  
+00002120: 2020 6966 2072 6573 756c 742e 7374 6174    if result.stat
+00002130: 7573 5f63 6f64 6520 213d 2032 3030 3a0d  us_code != 200:.
+00002140: 0a20 2020 2020 2020 2072 6169 7365 2041  .        raise A
+00002150: 7069 4854 5450 4578 6365 7074 696f 6e28  piHTTPException(
+00002160: 2744 6f77 6e6c 6f61 6420 6669 6c65 272c  'Download file',
+00002170: 2072 6573 756c 7429 0d0a 2020 2020 2020   result)..      
+00002180: 2020 0d0a 2020 2020 7265 7475 726e 2072    ..    return r
+00002190: 6573 756c 742e 636f 6e74 656e 740d 0a0d  esult.content...
+000021a0: 0a0d 0a64 6566 2073 656e 645f 6d65 7373  ...def send_mess
+000021b0: 6167 6528 0d0a 2020 2020 2020 2020 746f  age(..        to
+000021c0: 6b65 6e2c 2063 6861 745f 6964 2c20 7465  ken, chat_id, te
+000021d0: 7874 2c0d 0a20 2020 2020 2020 2064 6973  xt,..        dis
+000021e0: 6162 6c65 5f77 6562 5f70 6167 655f 7072  able_web_page_pr
+000021f0: 6576 6965 773d 4e6f 6e65 2c20 7265 706c  eview=None, repl
+00002200: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
+00002210: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
+00002220: 7570 3d4e 6f6e 652c 0d0a 2020 2020 2020  up=None,..      
+00002230: 2020 7061 7273 655f 6d6f 6465 3d4e 6f6e    parse_mode=Non
+00002240: 652c 2064 6973 6162 6c65 5f6e 6f74 6966  e, disable_notif
+00002250: 6963 6174 696f 6e3d 4e6f 6e65 2c20 7469  ication=None, ti
+00002260: 6d65 6f75 743d 4e6f 6e65 2c0d 0a20 2020  meout=None,..   
+00002270: 2020 2020 2065 6e74 6974 6965 733d 4e6f       entities=No
+00002280: 6e65 2c20 616c 6c6f 775f 7365 6e64 696e  ne, allow_sendin
+00002290: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
+000022a0: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
+000022b0: 6e74 656e 743d 4e6f 6e65 2c0d 0a20 2020  ntent=None,..   
+000022c0: 2020 2020 206d 6573 7361 6765 5f74 6872       message_thr
+000022d0: 6561 645f 6964 3d4e 6f6e 6529 3a0d 0a20  ead_id=None):.. 
+000022e0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+000022f0: 7227 7365 6e64 4d65 7373 6167 6527 0d0a  r'sendMessage'..
+00002300: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+00002310: 6368 6174 5f69 6427 3a20 7374 7228 6368  chat_id': str(ch
+00002320: 6174 5f69 6429 2c20 2774 6578 7427 3a20  at_id), 'text': 
+00002330: 7465 7874 7d0d 0a20 2020 2069 6620 6469  text}..    if di
+00002340: 7361 626c 655f 7765 625f 7061 6765 5f70  sable_web_page_p
+00002350: 7265 7669 6577 2069 7320 6e6f 7420 4e6f  review is not No
+00002360: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00002370: 6c6f 6164 5b27 6469 7361 626c 655f 7765  load['disable_we
+00002380: 625f 7061 6765 5f70 7265 7669 6577 275d  b_page_preview']
+00002390: 203d 2064 6973 6162 6c65 5f77 6562 5f70   = disable_web_p
+000023a0: 6167 655f 7072 6576 6965 770d 0a20 2020  age_preview..   
+000023b0: 2069 6620 7265 706c 795f 746f 5f6d 6573   if reply_to_mes
+000023c0: 7361 6765 5f69 643a 0d0a 2020 2020 2020  sage_id:..      
+000023d0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
+000023e0: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
+000023f0: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
+00002400: 6167 655f 6964 0d0a 2020 2020 6966 2072  age_id..    if r
+00002410: 6570 6c79 5f6d 6172 6b75 703a 0d0a 2020  eply_markup:..  
+00002420: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
+00002430: 6570 6c79 5f6d 6172 6b75 7027 5d20 3d20  eply_markup'] = 
+00002440: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
+00002450: 7265 706c 795f 6d61 726b 7570 290d 0a20  reply_markup).. 
+00002460: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
+00002470: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00002480: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
+00002490: 203d 2070 6172 7365 5f6d 6f64 650d 0a20   = parse_mode.. 
+000024a0: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
+000024b0: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
+000024c0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+000024d0: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+000024e0: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+000024f0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00002500: 6963 6174 696f 6e0d 0a20 2020 2069 6620  ication..    if 
+00002510: 7469 6d65 6f75 743a 0d0a 2020 2020 2020  timeout:..      
+00002520: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
+00002530: 7574 275d 203d 2074 696d 656f 7574 0d0a  ut'] = timeout..
+00002540: 2020 2020 6966 2065 6e74 6974 6965 733a      if entities:
+00002550: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00002560: 645b 2765 6e74 6974 6965 7327 5d20 3d20  d['entities'] = 
+00002570: 6a73 6f6e 2e64 756d 7073 2874 7970 6573  json.dumps(types
+00002580: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
+00002590: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
+000025a0: 656e 7469 7469 6573 2929 0d0a 2020 2020  entities))..    
+000025b0: 6966 2061 6c6c 6f77 5f73 656e 6469 6e67  if allow_sending
+000025c0: 5f77 6974 686f 7574 5f72 6570 6c79 2069  _without_reply i
+000025d0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000025e0: 2020 2020 2070 6179 6c6f 6164 5b27 616c       payload['al
+000025f0: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00002600: 6f75 745f 7265 706c 7927 5d20 3d20 616c  out_reply'] = al
+00002610: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00002620: 6f75 745f 7265 706c 790d 0a20 2020 2069  out_reply..    i
+00002630: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
+00002640: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+00002650: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00002660: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
+00002670: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
+00002680: 7465 6e74 0d0a 2020 2020 6966 206d 6573  tent..    if mes
+00002690: 7361 6765 5f74 6872 6561 645f 6964 3a0d  sage_thread_id:.
+000026a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+000026b0: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
+000026c0: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
+000026d0: 7468 7265 6164 5f69 640d 0a20 2020 2072  thread_id..    r
+000026e0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+000026f0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00002700: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00002710: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+00002720: 6f73 7427 290d 0a0d 0a0d 0a64 6566 2073  ost')......def s
+00002730: 6574 5f77 6562 686f 6f6b 2874 6f6b 656e  et_webhook(token
+00002740: 2c20 7572 6c3d 4e6f 6e65 2c20 6365 7274  , url=None, cert
+00002750: 6966 6963 6174 653d 4e6f 6e65 2c20 6d61  ificate=None, ma
+00002760: 785f 636f 6e6e 6563 7469 6f6e 733d 4e6f  x_connections=No
+00002770: 6e65 2c20 616c 6c6f 7765 645f 7570 6461  ne, allowed_upda
+00002780: 7465 733d 4e6f 6e65 2c20 6970 5f61 6464  tes=None, ip_add
+00002790: 7265 7373 3d4e 6f6e 652c 0d0a 2020 2020  ress=None,..    
+000027a0: 2020 2020 2020 2020 2020 2020 6472 6f70              drop
+000027b0: 5f70 656e 6469 6e67 5f75 7064 6174 6573  _pending_updates
+000027c0: 203d 204e 6f6e 652c 2074 696d 656f 7574   = None, timeout
+000027d0: 3d4e 6f6e 652c 2073 6563 7265 745f 746f  =None, secret_to
+000027e0: 6b65 6e3d 4e6f 6e65 293a 0d0a 2020 2020  ken=None):..    
+000027f0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+00002800: 6574 5765 6268 6f6f 6b27 0d0a 2020 2020  etWebhook'..    
+00002810: 7061 796c 6f61 6420 3d20 7b0d 0a20 2020  payload = {..   
+00002820: 2020 2020 2027 7572 6c27 3a20 7572 6c20       'url': url 
+00002830: 6966 2075 726c 2065 6c73 6520 2222 2c0d  if url else "",.
+00002840: 0a20 2020 207d 0d0a 2020 2020 6669 6c65  .    }..    file
+00002850: 7320 3d20 4e6f 6e65 0d0a 2020 2020 6966  s = None..    if
+00002860: 2063 6572 7469 6669 6361 7465 3a0d 0a20   certificate:.. 
+00002870: 2020 2020 2020 2066 696c 6573 203d 207b         files = {
+00002880: 2763 6572 7469 6669 6361 7465 273a 2063  'certificate': c
+00002890: 6572 7469 6669 6361 7465 7d0d 0a20 2020  ertificate}..   
+000028a0: 2069 6620 6d61 785f 636f 6e6e 6563 7469   if max_connecti
+000028b0: 6f6e 733a 0d0a 2020 2020 2020 2020 7061  ons:..        pa
+000028c0: 796c 6f61 645b 276d 6178 5f63 6f6e 6e65  yload['max_conne
+000028d0: 6374 696f 6e73 275d 203d 206d 6178 5f63  ctions'] = max_c
+000028e0: 6f6e 6e65 6374 696f 6e73 0d0a 2020 2020  onnections..    
+000028f0: 6966 2061 6c6c 6f77 6564 5f75 7064 6174  if allowed_updat
+00002900: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a20  es is not None: 
+00002910: 2020 2020 2020 2320 456d 7074 7920 6c69        # Empty li
+00002920: 7374 7320 7368 6f75 6c64 2070 6173 730d  sts should pass.
+00002930: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00002940: 5b27 616c 6c6f 7765 645f 7570 6461 7465  ['allowed_update
+00002950: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
+00002960: 2861 6c6c 6f77 6564 5f75 7064 6174 6573  (allowed_updates
+00002970: 290d 0a20 2020 2069 6620 6970 5f61 6464  )..    if ip_add
+00002980: 7265 7373 2069 7320 6e6f 7420 4e6f 6e65  ress is not None
+00002990: 3a20 2020 2020 2020 2020 2020 2023 2045  :            # E
+000029a0: 6d70 7479 2073 7472 696e 6720 7368 6f75  mpty string shou
+000029b0: 6c64 2070 6173 730d 0a20 2020 2020 2020  ld pass..       
+000029c0: 2070 6179 6c6f 6164 5b27 6970 5f61 6464   payload['ip_add
+000029d0: 7265 7373 275d 203d 2069 705f 6164 6472  ress'] = ip_addr
+000029e0: 6573 730d 0a20 2020 2069 6620 6472 6f70  ess..    if drop
+000029f0: 5f70 656e 6469 6e67 5f75 7064 6174 6573  _pending_updates
+00002a00: 2069 7320 6e6f 7420 4e6f 6e65 3a20 2023   is not None:  #
+00002a10: 2041 6e79 2062 6f6f 6c20 7661 6c75 6520   Any bool value 
+00002a20: 7368 6f75 6c64 2070 6173 730d 0a20 2020  should pass..   
+00002a30: 2020 2020 2070 6179 6c6f 6164 5b27 6472       payload['dr
+00002a40: 6f70 5f70 656e 6469 6e67 5f75 7064 6174  op_pending_updat
+00002a50: 6573 275d 203d 2064 726f 705f 7065 6e64  es'] = drop_pend
+00002a60: 696e 675f 7570 6461 7465 730d 0a20 2020  ing_updates..   
+00002a70: 2069 6620 7469 6d65 6f75 743a 0d0a 2020   if timeout:..  
+00002a80: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
+00002a90: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
+00002aa0: 7574 0d0a 2020 2020 6966 2073 6563 7265  ut..    if secre
+00002ab0: 745f 746f 6b65 6e3a 0d0a 2020 2020 2020  t_token:..      
+00002ac0: 2020 7061 796c 6f61 645b 2773 6563 7265    payload['secre
+00002ad0: 745f 746f 6b65 6e27 5d20 3d20 7365 6372  t_token'] = secr
+00002ae0: 6574 5f74 6f6b 656e 0d0a 2020 2020 7265  et_token..    re
+00002af0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00002b00: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00002b10: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00002b20: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+00002b30: 7329 0d0a 0d0a 0d0a 6465 6620 6465 6c65  s)......def dele
+00002b40: 7465 5f77 6562 686f 6f6b 2874 6f6b 656e  te_webhook(token
+00002b50: 2c20 6472 6f70 5f70 656e 6469 6e67 5f75  , drop_pending_u
+00002b60: 7064 6174 6573 3d4e 6f6e 652c 2074 696d  pdates=None, tim
+00002b70: 656f 7574 3d4e 6f6e 6529 3a0d 0a20 2020  eout=None):..   
+00002b80: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+00002b90: 6465 6c65 7465 5765 6268 6f6f 6b27 0d0a  deleteWebhook'..
+00002ba0: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
+00002bb0: 0d0a 2020 2020 6966 2064 726f 705f 7065  ..    if drop_pe
+00002bc0: 6e64 696e 675f 7570 6461 7465 7320 6973  nding_updates is
+00002bd0: 206e 6f74 204e 6f6e 653a 2020 2320 416e   not None:  # An
+00002be0: 7920 626f 6f6c 2076 616c 7565 2073 686f  y bool value sho
+00002bf0: 756c 6420 7061 7373 0d0a 2020 2020 2020  uld pass..      
+00002c00: 2020 7061 796c 6f61 645b 2764 726f 705f    payload['drop_
+00002c10: 7065 6e64 696e 675f 7570 6461 7465 7327  pending_updates'
+00002c20: 5d20 3d20 6472 6f70 5f70 656e 6469 6e67  ] = drop_pending
+00002c30: 5f75 7064 6174 6573 0d0a 2020 2020 6966  _updates..    if
+00002c40: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+00002c50: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+00002c60: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+00002c70: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00002c80: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00002c90: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00002ca0: 616d 733d 7061 796c 6f61 6429 0d0a 0d0a  ams=payload)....
+00002cb0: 0d0a 6465 6620 6765 745f 7765 6268 6f6f  ..def get_webhoo
+00002cc0: 6b5f 696e 666f 2874 6f6b 656e 2c20 7469  k_info(token, ti
+00002cd0: 6d65 6f75 743d 4e6f 6e65 293a 0d0a 2020  meout=None):..  
+00002ce0: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+00002cf0: 2767 6574 5765 6268 6f6f 6b49 6e66 6f27  'getWebhookInfo'
+00002d00: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+00002d10: 7b7d 0d0a 2020 2020 6966 2074 696d 656f  {}..    if timeo
+00002d20: 7574 3a0d 0a20 2020 2020 2020 2070 6179  ut:..        pay
+00002d30: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+00002d40: 3d20 7469 6d65 6f75 740d 0a20 2020 2072  = timeout..    r
+00002d50: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00002d60: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00002d70: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00002d80: 796c 6f61 6429 0d0a 0d0a 0d0a 6465 6620  yload)......def 
+00002d90: 6765 745f 7570 6461 7465 7328 746f 6b65  get_updates(toke
+00002da0: 6e2c 206f 6666 7365 743d 4e6f 6e65 2c20  n, offset=None, 
+00002db0: 6c69 6d69 743d 4e6f 6e65 2c20 7469 6d65  limit=None, time
+00002dc0: 6f75 743d 4e6f 6e65 2c20 616c 6c6f 7765  out=None, allowe
+00002dd0: 645f 7570 6461 7465 733d 4e6f 6e65 2c20  d_updates=None, 
+00002de0: 6c6f 6e67 5f70 6f6c 6c69 6e67 5f74 696d  long_polling_tim
+00002df0: 656f 7574 203d 204e 6f6e 6529 3a0d 0a20  eout = None):.. 
+00002e00: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00002e10: 7227 6765 7455 7064 6174 6573 270d 0a20  r'getUpdates'.. 
+00002e20: 2020 2070 6179 6c6f 6164 203d 207b 7d0d     payload = {}.
+00002e30: 0a20 2020 2069 6620 6f66 6673 6574 3a0d  .    if offset:.
+00002e40: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00002e50: 5b27 6f66 6673 6574 275d 203d 206f 6666  ['offset'] = off
+00002e60: 7365 740d 0a20 2020 2069 6620 6c69 6d69  set..    if limi
+00002e70: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+00002e80: 6f61 645b 276c 696d 6974 275d 203d 206c  oad['limit'] = l
+00002e90: 696d 6974 0d0a 2020 2020 6966 2074 696d  imit..    if tim
+00002ea0: 656f 7574 3a0d 0a20 2020 2020 2020 2070  eout:..        p
+00002eb0: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
+00002ec0: 5d20 3d20 7469 6d65 6f75 740d 0a20 2020  ] = timeout..   
+00002ed0: 2070 6179 6c6f 6164 5b27 6c6f 6e67 5f70   payload['long_p
+00002ee0: 6f6c 6c69 6e67 5f74 696d 656f 7574 275d  olling_timeout']
+00002ef0: 203d 206c 6f6e 675f 706f 6c6c 696e 675f   = long_polling_
+00002f00: 7469 6d65 6f75 7420 6966 206c 6f6e 675f  timeout if long_
+00002f10: 706f 6c6c 696e 675f 7469 6d65 6f75 7420  polling_timeout 
+00002f20: 656c 7365 204c 4f4e 475f 504f 4c4c 494e  else LONG_POLLIN
+00002f30: 475f 5449 4d45 4f55 540d 0a20 2020 2069  G_TIMEOUT..    i
+00002f40: 6620 616c 6c6f 7765 645f 7570 6461 7465  f allowed_update
+00002f50: 7320 6973 206e 6f74 204e 6f6e 653a 2020  s is not None:  
+00002f60: 2320 456d 7074 7920 6c69 7374 7320 7368  # Empty lists sh
+00002f70: 6f75 6c64 2070 6173 730d 0a20 2020 2020  ould pass..     
+00002f80: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
+00002f90: 7765 645f 7570 6461 7465 7327 5d20 3d20  wed_updates'] = 
+00002fa0: 6a73 6f6e 2e64 756d 7073 2861 6c6c 6f77  json.dumps(allow
+00002fb0: 6564 5f75 7064 6174 6573 290d 0a20 2020  ed_updates)..   
+00002fc0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00002fd0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00002fe0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00002ff0: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6465  payload)......de
+00003000: 6620 6765 745f 7573 6572 5f70 726f 6669  f get_user_profi
+00003010: 6c65 5f70 686f 746f 7328 746f 6b65 6e2c  le_photos(token,
+00003020: 2075 7365 725f 6964 2c20 6f66 6673 6574   user_id, offset
+00003030: 3d4e 6f6e 652c 206c 696d 6974 3d4e 6f6e  =None, limit=Non
+00003040: 6529 3a0d 0a20 2020 206d 6574 686f 645f  e):..    method_
+00003050: 7572 6c20 3d20 7227 6765 7455 7365 7250  url = r'getUserP
+00003060: 726f 6669 6c65 5068 6f74 6f73 270d 0a20  rofilePhotos'.. 
+00003070: 2020 2070 6179 6c6f 6164 203d 207b 2775     payload = {'u
+00003080: 7365 725f 6964 273a 2075 7365 725f 6964  ser_id': user_id
+00003090: 7d0d 0a20 2020 2069 6620 6f66 6673 6574  }..    if offset
+000030a0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000030b0: 6164 5b27 6f66 6673 6574 275d 203d 206f  ad['offset'] = o
+000030c0: 6666 7365 740d 0a20 2020 2069 6620 6c69  ffset..    if li
+000030d0: 6d69 743a 0d0a 2020 2020 2020 2020 7061  mit:..        pa
+000030e0: 796c 6f61 645b 276c 696d 6974 275d 203d  yload['limit'] =
+000030f0: 206c 696d 6974 0d0a 2020 2020 7265 7475   limit..    retu
+00003100: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00003110: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00003120: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00003130: 6164 290d 0a0d 0a0d 0a64 6566 2067 6574  ad)......def get
+00003140: 5f63 6861 7428 746f 6b65 6e2c 2063 6861  _chat(token, cha
+00003150: 745f 6964 293a 0d0a 2020 2020 6d65 7468  t_id):..    meth
+00003160: 6f64 5f75 726c 203d 2072 2767 6574 4368  od_url = r'getCh
+00003170: 6174 270d 0a20 2020 2070 6179 6c6f 6164  at'..    payload
+00003180: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00003190: 6861 745f 6964 7d0d 0a20 2020 2072 6574  hat_id}..    ret
+000031a0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+000031b0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000031c0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+000031d0: 6f61 6429 0d0a 0d0a 0d0a 6465 6620 6c65  oad)......def le
+000031e0: 6176 655f 6368 6174 2874 6f6b 656e 2c20  ave_chat(token, 
+000031f0: 6368 6174 5f69 6429 3a0d 0a20 2020 206d  chat_id):..    m
+00003200: 6574 686f 645f 7572 6c20 3d20 7227 6c65  ethod_url = r'le
+00003210: 6176 6543 6861 7427 0d0a 2020 2020 7061  aveChat'..    pa
+00003220: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00003230: 6427 3a20 6368 6174 5f69 647d 0d0a 2020  d': chat_id}..  
+00003240: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00003250: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00003260: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00003270: 3d70 6179 6c6f 6164 290d 0a0d 0a0d 0a64  =payload)......d
+00003280: 6566 2067 6574 5f63 6861 745f 6164 6d69  ef get_chat_admi
+00003290: 6e69 7374 7261 746f 7273 2874 6f6b 656e  nistrators(token
+000032a0: 2c20 6368 6174 5f69 6429 3a0d 0a20 2020  , chat_id):..   
+000032b0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+000032c0: 6765 7443 6861 7441 646d 696e 6973 7472  getChatAdministr
+000032d0: 6174 6f72 7327 0d0a 2020 2020 7061 796c  ators'..    payl
+000032e0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
+000032f0: 3a20 6368 6174 5f69 647d 0d0a 2020 2020  : chat_id}..    
+00003300: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00003310: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00003320: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00003330: 6179 6c6f 6164 290d 0a0d 0a0d 0a64 6566  ayload)......def
+00003340: 2067 6574 5f63 6861 745f 6d65 6d62 6572   get_chat_member
+00003350: 5f63 6f75 6e74 2874 6f6b 656e 2c20 6368  _count(token, ch
+00003360: 6174 5f69 6429 3a0d 0a20 2020 206d 6574  at_id):..    met
+00003370: 686f 645f 7572 6c20 3d20 7227 6765 7443  hod_url = r'getC
+00003380: 6861 744d 656d 6265 7243 6f75 6e74 270d  hatMemberCount'.
+00003390: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000033a0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+000033b0: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+000033c0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+000033d0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+000033e0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+000033f0: 0d0a 0d0a 0d0a 6465 6620 7365 745f 7374  ......def set_st
+00003400: 6963 6b65 725f 7365 745f 7468 756d 6228  icker_set_thumb(
+00003410: 746f 6b65 6e2c 206e 616d 652c 2075 7365  token, name, use
+00003420: 725f 6964 2c20 7468 756d 6229 3a0d 0a20  r_id, thumb):.. 
+00003430: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00003440: 7227 7365 7453 7469 636b 6572 5365 7454  r'setStickerSetT
+00003450: 6875 6d62 270d 0a20 2020 2070 6179 6c6f  humb'..    paylo
+00003460: 6164 203d 207b 276e 616d 6527 3a20 6e61  ad = {'name': na
+00003470: 6d65 2c20 2775 7365 725f 6964 273a 2075  me, 'user_id': u
+00003480: 7365 725f 6964 7d0d 0a20 2020 2066 696c  ser_id}..    fil
+00003490: 6573 203d 207b 7d0d 0a20 2020 2069 6620  es = {}..    if 
+000034a0: 7468 756d 623a 0d0a 2020 2020 2020 2020  thumb:..        
+000034b0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+000034c0: 6528 7468 756d 622c 2073 7472 293a 0d0a  e(thumb, str):..
+000034d0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+000034e0: 735b 2774 6875 6d62 275d 203d 2074 6875  s['thumb'] = thu
+000034f0: 6d62 0d0a 2020 2020 2020 2020 656c 7365  mb..        else
+00003500: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00003510: 6179 6c6f 6164 5b27 7468 756d 6227 5d20  ayload['thumb'] 
+00003520: 3d20 7468 756d 620d 0a20 2020 2072 6574  = thumb..    ret
+00003530: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00003540: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00003550: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00003560: 6f61 642c 2066 696c 6573 3d66 696c 6573  oad, files=files
+00003570: 206f 7220 4e6f 6e65 290d 0a0d 0a0d 0a64   or None)......d
+00003580: 6566 2073 6574 5f63 6861 745f 7374 6963  ef set_chat_stic
+00003590: 6b65 725f 7365 7428 746f 6b65 6e2c 2063  ker_set(token, c
+000035a0: 6861 745f 6964 2c20 7374 6963 6b65 725f  hat_id, sticker_
+000035b0: 7365 745f 6e61 6d65 293a 0d0a 2020 2020  set_name):..    
+000035c0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+000035d0: 6574 4368 6174 5374 6963 6b65 7253 6574  etChatStickerSet
+000035e0: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+000035f0: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+00003600: 745f 6964 2c20 2773 7469 636b 6572 5f73  t_id, 'sticker_s
+00003610: 6574 5f6e 616d 6527 3a20 7374 6963 6b65  et_name': sticke
+00003620: 725f 7365 745f 6e61 6d65 7d0d 0a20 2020  r_set_name}..   
+00003630: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00003640: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00003650: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00003660: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6465  payload)......de
+00003670: 6620 6465 6c65 7465 5f63 6861 745f 7374  f delete_chat_st
+00003680: 6963 6b65 725f 7365 7428 746f 6b65 6e2c  icker_set(token,
+00003690: 2063 6861 745f 6964 293a 0d0a 2020 2020   chat_id):..    
+000036a0: 6d65 7468 6f64 5f75 726c 203d 2072 2764  method_url = r'd
+000036b0: 656c 6574 6543 6861 7453 7469 636b 6572  eleteChatSticker
+000036c0: 5365 7427 0d0a 2020 2020 7061 796c 6f61  Set'..    payloa
+000036d0: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+000036e0: 6368 6174 5f69 647d 0d0a 2020 2020 7265  chat_id}..    re
+000036f0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00003700: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00003710: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00003720: 6c6f 6164 290d 0a0d 0a0d 0a64 6566 2067  load)......def g
+00003730: 6574 5f63 6861 745f 6d65 6d62 6572 2874  et_chat_member(t
+00003740: 6f6b 656e 2c20 6368 6174 5f69 642c 2075  oken, chat_id, u
+00003750: 7365 725f 6964 293a 0d0a 2020 2020 6d65  ser_id):..    me
+00003760: 7468 6f64 5f75 726c 203d 2072 2767 6574  thod_url = r'get
+00003770: 4368 6174 4d65 6d62 6572 270d 0a20 2020  ChatMember'..   
+00003780: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00003790: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
+000037a0: 2775 7365 725f 6964 273a 2075 7365 725f  'user_id': user_
+000037b0: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+000037c0: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+000037d0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+000037e0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+000037f0: 0d0a 0d0a 0d0a 6465 6620 666f 7277 6172  ......def forwar
+00003800: 645f 6d65 7373 6167 6528 0d0a 2020 2020  d_message(..    
+00003810: 2020 2020 746f 6b65 6e2c 2063 6861 745f      token, chat_
+00003820: 6964 2c20 6672 6f6d 5f63 6861 745f 6964  id, from_chat_id
+00003830: 2c20 6d65 7373 6167 655f 6964 2c0d 0a20  , message_id,.. 
+00003840: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
+00003850: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00003860: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c20  , timeout=None, 
+00003870: 7072 6f74 6563 745f 636f 6e74 656e 743d  protect_content=
+00003880: 4e6f 6e65 2c20 6d65 7373 6167 655f 7468  None, message_th
+00003890: 7265 6164 5f69 643d 4e6f 6e65 293a 0d0a  read_id=None):..
+000038a0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000038b0: 2072 2766 6f72 7761 7264 4d65 7373 6167   r'forwardMessag
+000038c0: 6527 0d0a 2020 2020 7061 796c 6f61 6420  e'..    payload 
+000038d0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+000038e0: 6174 5f69 642c 2027 6672 6f6d 5f63 6861  at_id, 'from_cha
+000038f0: 745f 6964 273a 2066 726f 6d5f 6368 6174  t_id': from_chat
+00003900: 5f69 642c 2027 6d65 7373 6167 655f 6964  _id, 'message_id
+00003910: 273a 206d 6573 7361 6765 5f69 647d 0d0a  ': message_id}..
+00003920: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+00003930: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00003940: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00003950: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+00003960: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+00003970: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00003980: 6669 6361 7469 6f6e 0d0a 2020 2020 6966  fication..    if
+00003990: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+000039a0: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+000039b0: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+000039c0: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
+000039d0: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
+000039e0: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+000039f0: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
+00003a00: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
+00003a10: 6374 5f63 6f6e 7465 6e74 0d0a 2020 2020  ct_content..    
+00003a20: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+00003a30: 645f 6964 3a0d 0a20 2020 2020 2020 2070  d_id:..        p
+00003a40: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
+00003a50: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
+00003a60: 7373 6167 655f 7468 7265 6164 5f69 640d  ssage_thread_id.
+00003a70: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00003a80: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00003a90: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00003aa0: 616d 733d 7061 796c 6f61 6429 0d0a 0d0a  ams=payload)....
+00003ab0: 0d0a 6465 6620 636f 7079 5f6d 6573 7361  ..def copy_messa
+00003ac0: 6765 2874 6f6b 656e 2c20 6368 6174 5f69  ge(token, chat_i
+00003ad0: 642c 2066 726f 6d5f 6368 6174 5f69 642c  d, from_chat_id,
+00003ae0: 206d 6573 7361 6765 5f69 642c 2063 6170   message_id, cap
+00003af0: 7469 6f6e 3d4e 6f6e 652c 2070 6172 7365  tion=None, parse
+00003b00: 5f6d 6f64 653d 4e6f 6e65 2c20 6361 7074  _mode=None, capt
+00003b10: 696f 6e5f 656e 7469 7469 6573 3d4e 6f6e  ion_entities=Non
+00003b20: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00003b30: 2020 2020 2064 6973 6162 6c65 5f6e 6f74       disable_not
+00003b40: 6966 6963 6174 696f 6e3d 4e6f 6e65 2c20  ification=None, 
+00003b50: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00003b60: 5f69 643d 4e6f 6e65 2c20 616c 6c6f 775f  _id=None, allow_
+00003b70: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00003b80: 7265 706c 793d 4e6f 6e65 2c0d 0a20 2020  reply=None,..   
+00003b90: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00003ba0: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00003bb0: 2074 696d 656f 7574 3d4e 6f6e 652c 2070   timeout=None, p
+00003bc0: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00003bd0: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00003be0: 6561 645f 6964 3d4e 6f6e 6529 3a0d 0a20  ead_id=None):.. 
+00003bf0: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00003c00: 7227 636f 7079 4d65 7373 6167 6527 0d0a  r'copyMessage'..
+00003c10: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+00003c20: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+00003c30: 642c 2027 6672 6f6d 5f63 6861 745f 6964  d, 'from_chat_id
+00003c40: 273a 2066 726f 6d5f 6368 6174 5f69 642c  ': from_chat_id,
+00003c50: 2027 6d65 7373 6167 655f 6964 273a 206d   'message_id': m
+00003c60: 6573 7361 6765 5f69 647d 0d0a 2020 2020  essage_id}..    
+00003c70: 6966 2063 6170 7469 6f6e 2069 7320 6e6f  if caption is no
+00003c80: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00003c90: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
+00003ca0: 6e27 5d20 3d20 6361 7074 696f 6e0d 0a20  n'] = caption.. 
+00003cb0: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
+00003cc0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00003cd0: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
+00003ce0: 203d 2070 6172 7365 5f6d 6f64 650d 0a20   = parse_mode.. 
+00003cf0: 2020 2069 6620 6361 7074 696f 6e5f 656e     if caption_en
+00003d00: 7469 7469 6573 2069 7320 6e6f 7420 4e6f  tities is not No
+00003d10: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00003d20: 6c6f 6164 5b27 6361 7074 696f 6e5f 656e  load['caption_en
+00003d30: 7469 7469 6573 275d 203d 205f 636f 6e76  tities'] = _conv
+00003d40: 6572 745f 656e 7469 7465 7328 6361 7074  ert_entites(capt
+00003d50: 696f 6e5f 656e 7469 7469 6573 290d 0a20  ion_entities).. 
+00003d60: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
+00003d70: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
+00003d80: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00003d90: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+00003da0: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+00003db0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00003dc0: 6963 6174 696f 6e0d 0a20 2020 2069 6620  ication..    if 
+00003dd0: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00003de0: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+00003df0: 796c 6f61 645b 2772 6570 6c79 5f74 6f5f  yload['reply_to_
+00003e00: 6d65 7373 6167 655f 6964 275d 203d 2072  message_id'] = r
+00003e10: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00003e20: 6964 0d0a 2020 2020 6966 2072 6570 6c79  id..    if reply
+00003e30: 5f6d 6172 6b75 7020 6973 206e 6f74 204e  _markup is not N
+00003e40: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00003e50: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+00003e60: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+00003e70: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+00003e80: 726b 7570 290d 0a20 2020 2069 6620 616c  rkup)..    if al
+00003e90: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
+00003ea0: 6f75 745f 7265 706c 7920 6973 206e 6f74  out_reply is not
+00003eb0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00003ec0: 7061 796c 6f61 645b 2761 6c6c 6f77 5f73  payload['allow_s
+00003ed0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
+00003ee0: 6570 6c79 275d 203d 2061 6c6c 6f77 5f73  eply'] = allow_s
+00003ef0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
+00003f00: 6570 6c79 0d0a 2020 2020 6966 2074 696d  eply..    if tim
+00003f10: 656f 7574 3a0d 0a20 2020 2020 2020 2070  eout:..        p
+00003f20: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
+00003f30: 5d20 3d20 7469 6d65 6f75 740d 0a20 2020  ] = timeout..   
+00003f40: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00003f50: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00003f60: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00003f70: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
+00003f80: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
+00003f90: 6f6e 7465 6e74 0d0a 2020 2020 6966 206d  ontent..    if m
+00003fa0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00003fb0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00003fc0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00003fd0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00003fe0: 6427 5d20 3d20 6d65 7373 6167 655f 7468  d'] = message_th
+00003ff0: 7265 6164 5f69 640d 0a20 2020 2072 6574  read_id..    ret
+00004000: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+00004010: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+00004020: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00004030: 6f61 6429 0d0a 0d0a 0d0a 6465 6620 7365  oad)......def se
+00004040: 6e64 5f64 6963 6528 0d0a 2020 2020 2020  nd_dice(..      
+00004050: 2020 746f 6b65 6e2c 2063 6861 745f 6964    token, chat_id
+00004060: 2c0d 0a20 2020 2020 2020 2065 6d6f 6a69  ,..        emoji
+00004070: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f6e  =None, disable_n
+00004080: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00004090: 2c20 7265 706c 795f 746f 5f6d 6573 7361  , reply_to_messa
+000040a0: 6765 5f69 643d 4e6f 6e65 2c0d 0a20 2020  ge_id=None,..   
+000040b0: 2020 2020 2072 6570 6c79 5f6d 6172 6b75       reply_marku
+000040c0: 703d 4e6f 6e65 2c20 7469 6d65 6f75 743d  p=None, timeout=
+000040d0: 4e6f 6e65 2c20 616c 6c6f 775f 7365 6e64  None, allow_send
+000040e0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+000040f0: 793d 4e6f 6e65 2c20 7072 6f74 6563 745f  y=None, protect_
+00004100: 636f 6e74 656e 743d 4e6f 6e65 2c20 6d65  content=None, me
+00004110: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+00004120: 4e6f 6e65 293a 0d0a 2020 2020 6d65 7468  None):..    meth
+00004130: 6f64 5f75 726c 203d 2072 2773 656e 6444  od_url = r'sendD
+00004140: 6963 6527 0d0a 2020 2020 7061 796c 6f61  ice'..    payloa
+00004150: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+00004160: 6368 6174 5f69 647d 0d0a 2020 2020 6966  chat_id}..    if
+00004170: 2065 6d6f 6a69 3a0d 0a20 2020 2020 2020   emoji:..       
+00004180: 2070 6179 6c6f 6164 5b27 656d 6f6a 6927   payload['emoji'
+00004190: 5d20 3d20 656d 6f6a 690d 0a20 2020 2069  ] = emoji..    i
+000041a0: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
+000041b0: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
+000041c0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+000041d0: 6c6f 6164 5b27 6469 7361 626c 655f 6e6f  load['disable_no
+000041e0: 7469 6669 6361 7469 6f6e 275d 203d 2064  tification'] = d
+000041f0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00004200: 696f 6e0d 0a20 2020 2069 6620 7265 706c  ion..    if repl
+00004210: 795f 746f 5f6d 6573 7361 6765 5f69 643a  y_to_message_id:
+00004220: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00004230: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
+00004240: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
+00004250: 5f74 6f5f 6d65 7373 6167 655f 6964 0d0a  _to_message_id..
+00004260: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+00004270: 6b75 703a 0d0a 2020 2020 2020 2020 7061  kup:..        pa
+00004280: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+00004290: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+000042a0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+000042b0: 726b 7570 290d 0a20 2020 2069 6620 7469  rkup)..    if ti
+000042c0: 6d65 6f75 743a 0d0a 2020 2020 2020 2020  meout:..        
+000042d0: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+000042e0: 275d 203d 2074 696d 656f 7574 0d0a 2020  '] = timeout..  
+000042f0: 2020 6966 2061 6c6c 6f77 5f73 656e 6469    if allow_sendi
+00004300: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00004310: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00004320: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00004330: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
+00004340: 7468 6f75 745f 7265 706c 7927 5d20 3d20  thout_reply'] = 
+00004350: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
+00004360: 7468 6f75 745f 7265 706c 790d 0a20 2020  thout_reply..   
+00004370: 2069 6620 7072 6f74 6563 745f 636f 6e74   if protect_cont
+00004380: 656e 7420 6973 206e 6f74 204e 6f6e 653a  ent is not None:
+00004390: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000043a0: 645b 2770 726f 7465 6374 5f63 6f6e 7465  d['protect_conte
+000043b0: 6e74 275d 203d 2070 726f 7465 6374 5f63  nt'] = protect_c
+000043c0: 6f6e 7465 6e74 0d0a 2020 2020 6966 206d  ontent..    if m
+000043d0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000043e0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000043f0: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+00004400: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+00004410: 655f 7468 7265 6164 5f69 640d 0a20 2020  e_thread_id..   
+00004420: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00004430: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00004440: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00004450: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6465  payload)......de
+00004460: 6620 7365 6e64 5f70 686f 746f 280d 0a20  f send_photo(.. 
+00004470: 2020 2020 2020 2074 6f6b 656e 2c20 6368         token, ch
+00004480: 6174 5f69 642c 2070 686f 746f 2c0d 0a20  at_id, photo,.. 
+00004490: 2020 2020 2020 2063 6170 7469 6f6e 3d4e         caption=N
+000044a0: 6f6e 652c 2072 6570 6c79 5f74 6f5f 6d65  one, reply_to_me
+000044b0: 7373 6167 655f 6964 3d4e 6f6e 652c 2072  ssage_id=None, r
+000044c0: 6570 6c79 5f6d 6172 6b75 703d 4e6f 6e65  eply_markup=None
+000044d0: 2c0d 0a20 2020 2020 2020 2070 6172 7365  ,..        parse
+000044e0: 5f6d 6f64 653d 4e6f 6e65 2c20 6469 7361  _mode=None, disa
+000044f0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+00004500: 3d4e 6f6e 652c 2074 696d 656f 7574 3d4e  =None, timeout=N
+00004510: 6f6e 652c 0d0a 2020 2020 2020 2020 6361  one,..        ca
+00004520: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
+00004530: 6f6e 652c 2061 6c6c 6f77 5f73 656e 6469  one, allow_sendi
+00004540: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00004550: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
+00004560: 6f6e 7465 6e74 3d4e 6f6e 652c 0d0a 2020  ontent=None,..  
+00004570: 2020 2020 2020 6d65 7373 6167 655f 7468        message_th
+00004580: 7265 6164 5f69 643d 4e6f 6e65 2c20 6861  read_id=None, ha
+00004590: 735f 7370 6f69 6c65 723d 4e6f 6e65 293a  s_spoiler=None):
+000045a0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+000045b0: 203d 2072 2773 656e 6450 686f 746f 270d   = r'sendPhoto'.
+000045c0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000045d0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+000045e0: 6964 7d0d 0a20 2020 2066 696c 6573 203d  id}..    files =
+000045f0: 204e 6f6e 650d 0a20 2020 2069 6620 7574   None..    if ut
+00004600: 696c 2e69 735f 7374 7269 6e67 2870 686f  il.is_string(pho
+00004610: 746f 293a 0d0a 2020 2020 2020 2020 7061  to):..        pa
+00004620: 796c 6f61 645b 2770 686f 746f 275d 203d  yload['photo'] =
+00004630: 2070 686f 746f 0d0a 2020 2020 656c 6966   photo..    elif
+00004640: 2075 7469 6c2e 6973 5f70 696c 5f69 6d61   util.is_pil_ima
+00004650: 6765 2870 686f 746f 293a 0d0a 2020 2020  ge(photo):..    
+00004660: 2020 2020 6669 6c65 7320 3d20 7b27 7068      files = {'ph
+00004670: 6f74 6f27 3a20 7574 696c 2e70 696c 5f69  oto': util.pil_i
+00004680: 6d61 6765 5f74 6f5f 6669 6c65 2870 686f  mage_to_file(pho
+00004690: 746f 297d 0d0a 2020 2020 656c 7365 3a0d  to)}..    else:.
+000046a0: 0a20 2020 2020 2020 2066 696c 6573 203d  .        files =
+000046b0: 207b 2770 686f 746f 273a 2070 686f 746f   {'photo': photo
+000046c0: 7d0d 0a20 2020 2069 6620 6361 7074 696f  }..    if captio
+000046d0: 6e3a 0d0a 2020 2020 2020 2020 7061 796c  n:..        payl
+000046e0: 6f61 645b 2763 6170 7469 6f6e 275d 203d  oad['caption'] =
+000046f0: 2063 6170 7469 6f6e 0d0a 2020 2020 6966   caption..    if
+00004700: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
+00004710: 655f 6964 3a0d 0a20 2020 2020 2020 2070  e_id:..        p
+00004720: 6179 6c6f 6164 5b27 7265 706c 795f 746f  ayload['reply_to
+00004730: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
+00004740: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00004750: 5f69 640d 0a20 2020 2069 6620 7265 706c  _id..    if repl
+00004760: 795f 6d61 726b 7570 3a0d 0a20 2020 2020  y_markup:..     
+00004770: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00004780: 795f 6d61 726b 7570 275d 203d 205f 636f  y_markup'] = _co
+00004790: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
+000047a0: 6c79 5f6d 6172 6b75 7029 0d0a 2020 2020  ly_markup)..    
+000047b0: 6966 2070 6172 7365 5f6d 6f64 653a 0d0a  if parse_mode:..
+000047c0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000047d0: 2770 6172 7365 5f6d 6f64 6527 5d20 3d20  'parse_mode'] = 
+000047e0: 7061 7273 655f 6d6f 6465 0d0a 2020 2020  parse_mode..    
+000047f0: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00004800: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+00004810: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00004820: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+00004830: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+00004840: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00004850: 7469 6f6e 0d0a 2020 2020 6966 2074 696d  tion..    if tim
+00004860: 656f 7574 3a0d 0a20 2020 2020 2020 2070  eout:..        p
+00004870: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
+00004880: 5d20 3d20 7469 6d65 6f75 740d 0a20 2020  ] = timeout..   
+00004890: 2069 6620 6361 7074 696f 6e5f 656e 7469   if caption_enti
+000048a0: 7469 6573 3a0d 0a20 2020 2020 2020 2070  ties:..        p
+000048b0: 6179 6c6f 6164 5b27 6361 7074 696f 6e5f  ayload['caption_
+000048c0: 656e 7469 7469 6573 275d 203d 206a 736f  entities'] = jso
+000048d0: 6e2e 6475 6d70 7328 7479 7065 732e 4d65  n.dumps(types.Me
+000048e0: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
+000048f0: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
+00004900: 7469 6f6e 5f65 6e74 6974 6965 7329 290d  tion_entities)).
+00004910: 0a20 2020 2069 6620 616c 6c6f 775f 7365  .    if allow_se
+00004920: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
+00004930: 706c 7920 6973 206e 6f74 204e 6f6e 653a  ply is not None:
+00004940: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00004950: 645b 2761 6c6c 6f77 5f73 656e 6469 6e67  d['allow_sending
+00004960: 5f77 6974 686f 7574 5f72 6570 6c79 275d  _without_reply']
+00004970: 203d 2061 6c6c 6f77 5f73 656e 6469 6e67   = allow_sending
+00004980: 5f77 6974 686f 7574 5f72 6570 6c79 0d0a  _without_reply..
+00004990: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+000049a0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+000049b0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+000049c0: 6c6f 6164 5b27 7072 6f74 6563 745f 636f  load['protect_co
+000049d0: 6e74 656e 7427 5d20 3d20 7072 6f74 6563  ntent'] = protec
+000049e0: 745f 636f 6e74 656e 740d 0a20 2020 2069  t_content..    i
+000049f0: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
+00004a00: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
+00004a10: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00004a20: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+00004a30: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+00004a40: 5f74 6872 6561 645f 6964 0d0a 2020 2020  _thread_id..    
+00004a50: 6966 2068 6173 5f73 706f 696c 6572 2069  if has_spoiler i
+00004a60: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00004a70: 2020 2020 2070 6179 6c6f 6164 5b27 6861       payload['ha
+00004a80: 735f 7370 6f69 6c65 7227 5d20 3d20 6861  s_spoiler'] = ha
+00004a90: 735f 7370 6f69 6c65 720d 0a20 2020 2072  s_spoiler..    r
+00004aa0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00004ab0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00004ac0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00004ad0: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00004ae0: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+00004af0: 2729 0d0a 0d0a 0d0a 6465 6620 7365 6e64  ')......def send
+00004b00: 5f6d 6564 6961 5f67 726f 7570 280d 0a20  _media_group(.. 
+00004b10: 2020 2020 2020 2074 6f6b 656e 2c20 6368         token, ch
+00004b20: 6174 5f69 642c 206d 6564 6961 2c0d 0a20  at_id, media,.. 
+00004b30: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
+00004b40: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+00004b50: 2c20 7265 706c 795f 746f 5f6d 6573 7361  , reply_to_messa
+00004b60: 6765 5f69 643d 4e6f 6e65 2c0d 0a20 2020  ge_id=None,..   
+00004b70: 2020 2020 2074 696d 656f 7574 3d4e 6f6e       timeout=Non
+00004b80: 652c 2061 6c6c 6f77 5f73 656e 6469 6e67  e, allow_sending
+00004b90: 5f77 6974 686f 7574 5f72 6570 6c79 3d4e  _without_reply=N
+00004ba0: 6f6e 652c 2070 726f 7465 6374 5f63 6f6e  one, protect_con
+00004bb0: 7465 6e74 3d4e 6f6e 652c 206d 6573 7361  tent=None, messa
+00004bc0: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
+00004bd0: 6529 3a0d 0a20 2020 206d 6574 686f 645f  e):..    method_
+00004be0: 7572 6c20 3d20 7227 7365 6e64 4d65 6469  url = r'sendMedi
+00004bf0: 6147 726f 7570 270d 0a20 2020 206d 6564  aGroup'..    med
+00004c00: 6961 5f6a 736f 6e2c 2066 696c 6573 203d  ia_json, files =
+00004c10: 2063 6f6e 7665 7274 5f69 6e70 7574 5f6d   convert_input_m
+00004c20: 6564 6961 5f61 7272 6179 286d 6564 6961  edia_array(media
+00004c30: 290d 0a20 2020 2070 6179 6c6f 6164 203d  )..    payload =
+00004c40: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+00004c50: 745f 6964 2c20 276d 6564 6961 273a 206d  t_id, 'media': m
+00004c60: 6564 6961 5f6a 736f 6e7d 0d0a 2020 2020  edia_json}..    
+00004c70: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00004c80: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+00004c90: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00004ca0: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+00004cb0: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+00004cc0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00004cd0: 7469 6f6e 0d0a 2020 2020 6966 2072 6570  tion..    if rep
+00004ce0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00004cf0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00004d00: 6164 5b27 7265 706c 795f 746f 5f6d 6573  ad['reply_to_mes
+00004d10: 7361 6765 5f69 6427 5d20 3d20 7265 706c  sage_id'] = repl
+00004d20: 795f 746f 5f6d 6573 7361 6765 5f69 640d  y_to_message_id.
+00004d30: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00004d40: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00004d50: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
+00004d60: 696d 656f 7574 0d0a 2020 2020 6966 2061  imeout..    if a
+00004d70: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00004d80: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
+00004d90: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00004da0: 2070 6179 6c6f 6164 5b27 616c 6c6f 775f   payload['allow_
+00004db0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00004dc0: 7265 706c 7927 5d20 3d20 616c 6c6f 775f  reply'] = allow_
+00004dd0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00004de0: 7265 706c 790d 0a20 2020 2069 6620 7072  reply..    if pr
+00004df0: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
+00004e00: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00004e10: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
+00004e20: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
+00004e30: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00004e40: 0d0a 2020 2020 6966 206d 6573 7361 6765  ..    if message
+00004e50: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
+00004e60: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00004e70: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+00004e80: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
+00004e90: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00004ea0: 640d 0a20 2020 2072 6574 7572 6e20 5f6d  d..    return _m
+00004eb0: 616b 655f 7265 7175 6573 7428 0d0a 2020  ake_request(..  
+00004ec0: 2020 2020 2020 746f 6b65 6e2c 206d 6574        token, met
+00004ed0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00004ee0: 7061 796c 6f61 642c 0d0a 2020 2020 2020  payload,..      
+00004ef0: 2020 6d65 7468 6f64 3d27 706f 7374 2720    method='post' 
+00004f00: 6966 2066 696c 6573 2065 6c73 6520 2767  if files else 'g
+00004f10: 6574 272c 0d0a 2020 2020 2020 2020 6669  et',..        fi
+00004f20: 6c65 733d 6669 6c65 7320 6966 2066 696c  les=files if fil
+00004f30: 6573 2065 6c73 6520 4e6f 6e65 290d 0a0d  es else None)...
+00004f40: 0a0d 0a64 6566 2073 656e 645f 6c6f 6361  ...def send_loca
+00004f50: 7469 6f6e 280d 0a20 2020 2020 2020 2074  tion(..        t
+00004f60: 6f6b 656e 2c20 6368 6174 5f69 642c 206c  oken, chat_id, l
+00004f70: 6174 6974 7564 652c 206c 6f6e 6769 7475  atitude, longitu
+00004f80: 6465 2c0d 0a20 2020 2020 2020 206c 6976  de,..        liv
+00004f90: 655f 7065 7269 6f64 3d4e 6f6e 652c 2072  e_period=None, r
+00004fa0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+00004fb0: 6964 3d4e 6f6e 652c 200d 0a20 2020 2020  id=None, ..     
+00004fc0: 2020 2072 6570 6c79 5f6d 6172 6b75 703d     reply_markup=
+00004fd0: 4e6f 6e65 2c20 6469 7361 626c 655f 6e6f  None, disable_no
+00004fe0: 7469 6669 6361 7469 6f6e 3d4e 6f6e 652c  tification=None,
+00004ff0: 200d 0a20 2020 2020 2020 2074 696d 656f   ..        timeo
+00005000: 7574 3d4e 6f6e 652c 2068 6f72 697a 6f6e  ut=None, horizon
+00005010: 7461 6c5f 6163 6375 7261 6379 3d4e 6f6e  tal_accuracy=Non
+00005020: 652c 2068 6561 6469 6e67 3d4e 6f6e 652c  e, heading=None,
+00005030: 0d0a 2020 2020 2020 2020 7072 6f78 696d  ..        proxim
+00005040: 6974 795f 616c 6572 745f 7261 6469 7573  ity_alert_radius
+00005050: 3d4e 6f6e 652c 2061 6c6c 6f77 5f73 656e  =None, allow_sen
+00005060: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+00005070: 6c79 3d4e 6f6e 652c 2070 726f 7465 6374  ly=None, protect
+00005080: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0d0a  _content=None,..
+00005090: 2020 2020 2020 2020 6d65 7373 6167 655f          message_
+000050a0: 7468 7265 6164 5f69 643d 4e6f 6e65 293a  thread_id=None):
+000050b0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+000050c0: 203d 2072 2773 656e 644c 6f63 6174 696f   = r'sendLocatio
+000050d0: 6e27 0d0a 2020 2020 7061 796c 6f61 6420  n'..    payload 
+000050e0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+000050f0: 6174 5f69 642c 2027 6c61 7469 7475 6465  at_id, 'latitude
+00005100: 273a 206c 6174 6974 7564 652c 2027 6c6f  ': latitude, 'lo
+00005110: 6e67 6974 7564 6527 3a20 6c6f 6e67 6974  ngitude': longit
+00005120: 7564 657d 0d0a 2020 2020 6966 206c 6976  ude}..    if liv
+00005130: 655f 7065 7269 6f64 3a0d 0a20 2020 2020  e_period:..     
+00005140: 2020 2070 6179 6c6f 6164 5b27 6c69 7665     payload['live
+00005150: 5f70 6572 696f 6427 5d20 3d20 6c69 7665  _period'] = live
+00005160: 5f70 6572 696f 640d 0a20 2020 2069 6620  _period..    if 
+00005170: 686f 7269 7a6f 6e74 616c 5f61 6363 7572  horizontal_accur
+00005180: 6163 793a 0d0a 2020 2020 2020 2020 7061  acy:..        pa
+00005190: 796c 6f61 645b 2768 6f72 697a 6f6e 7461  yload['horizonta
+000051a0: 6c5f 6163 6375 7261 6379 275d 203d 2068  l_accuracy'] = h
+000051b0: 6f72 697a 6f6e 7461 6c5f 6163 6375 7261  orizontal_accura
+000051c0: 6379 0d0a 2020 2020 6966 2068 6561 6469  cy..    if headi
+000051d0: 6e67 3a0d 0a20 2020 2020 2020 2070 6179  ng:..        pay
+000051e0: 6c6f 6164 5b27 6865 6164 696e 6727 5d20  load['heading'] 
+000051f0: 3d20 6865 6164 696e 670d 0a20 2020 2069  = heading..    i
+00005200: 6620 7072 6f78 696d 6974 795f 616c 6572  f proximity_aler
+00005210: 745f 7261 6469 7573 3a0d 0a20 2020 2020  t_radius:..     
+00005220: 2020 2070 6179 6c6f 6164 5b27 7072 6f78     payload['prox
+00005230: 696d 6974 795f 616c 6572 745f 7261 6469  imity_alert_radi
+00005240: 7573 275d 203d 2070 726f 7869 6d69 7479  us'] = proximity
+00005250: 5f61 6c65 7274 5f72 6164 6975 730d 0a20  _alert_radius.. 
+00005260: 2020 2069 6620 7265 706c 795f 746f 5f6d     if reply_to_m
+00005270: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+00005280: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
+00005290: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+000052a0: 275d 203d 2072 6570 6c79 5f74 6f5f 6d65  '] = reply_to_me
+000052b0: 7373 6167 655f 6964 0d0a 2020 2020 6966  ssage_id..    if
+000052c0: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+000052d0: 6974 686f 7574 5f72 6570 6c79 2069 7320  ithout_reply is 
+000052e0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+000052f0: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
+00005300: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00005310: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
+00005320: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
+00005330: 745f 7265 706c 790d 0a20 2020 2069 6620  t_reply..    if 
+00005340: 7265 706c 795f 6d61 726b 7570 3a0d 0a20  reply_markup:.. 
+00005350: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00005360: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+00005370: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+00005380: 2872 6570 6c79 5f6d 6172 6b75 7029 0d0a  (reply_markup)..
+00005390: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+000053a0: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+000053b0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000053c0: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+000053d0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+000053e0: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+000053f0: 6669 6361 7469 6f6e 0d0a 2020 2020 6966  fication..    if
+00005400: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+00005410: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+00005420: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+00005430: 0a20 2020 2069 6620 7072 6f74 6563 745f  .    if protect_
+00005440: 636f 6e74 656e 7420 6973 206e 6f74 204e  content is not N
+00005450: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00005460: 796c 6f61 645b 2770 726f 7465 6374 5f63  yload['protect_c
+00005470: 6f6e 7465 6e74 275d 203d 2070 726f 7465  ontent'] = prote
+00005480: 6374 5f63 6f6e 7465 6e74 0d0a 2020 2020  ct_content..    
+00005490: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+000054a0: 645f 6964 2069 7320 6e6f 7420 4e6f 6e65  d_id is not None
+000054b0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000054c0: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+000054d0: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+000054e0: 655f 7468 7265 6164 5f69 640d 0a20 2020  e_thread_id..   
+000054f0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00005500: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00005510: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00005520: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6465  payload)......de
+00005530: 6620 6564 6974 5f6d 6573 7361 6765 5f6c  f edit_message_l
+00005540: 6976 655f 6c6f 6361 7469 6f6e 280d 0a20  ive_location(.. 
+00005550: 2020 2020 2020 2074 6f6b 656e 2c20 6c61         token, la
+00005560: 7469 7475 6465 2c20 6c6f 6e67 6974 7564  titude, longitud
+00005570: 652c 2063 6861 745f 6964 3d4e 6f6e 652c  e, chat_id=None,
+00005580: 206d 6573 7361 6765 5f69 643d 4e6f 6e65   message_id=None
+00005590: 2c0d 0a20 2020 2020 2020 2069 6e6c 696e  ,..        inlin
+000055a0: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+000055b0: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
+000055c0: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+000055d0: 6e65 2c0d 0a20 2020 2020 2020 2068 6f72  ne,..        hor
+000055e0: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
+000055f0: 3d4e 6f6e 652c 2068 6561 6469 6e67 3d4e  =None, heading=N
+00005600: 6f6e 652c 2070 726f 7869 6d69 7479 5f61  one, proximity_a
+00005610: 6c65 7274 5f72 6164 6975 733d 4e6f 6e65  lert_radius=None
+00005620: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00005630: 726c 203d 2072 2765 6469 744d 6573 7361  rl = r'editMessa
+00005640: 6765 4c69 7665 4c6f 6361 7469 6f6e 270d  geLiveLocation'.
+00005650: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+00005660: 276c 6174 6974 7564 6527 3a20 6c61 7469  'latitude': lati
+00005670: 7475 6465 2c20 276c 6f6e 6769 7475 6465  tude, 'longitude
+00005680: 273a 206c 6f6e 6769 7475 6465 7d0d 0a20  ': longitude}.. 
+00005690: 2020 2069 6620 6368 6174 5f69 643a 0d0a     if chat_id:..
+000056a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000056b0: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
+000056c0: 745f 6964 0d0a 2020 2020 6966 206d 6573  t_id..    if mes
+000056d0: 7361 6765 5f69 643a 0d0a 2020 2020 2020  sage_id:..      
+000056e0: 2020 7061 796c 6f61 645b 276d 6573 7361    payload['messa
+000056f0: 6765 5f69 6427 5d20 3d20 6d65 7373 6167  ge_id'] = messag
+00005700: 655f 6964 0d0a 2020 2020 6966 2068 6f72  e_id..    if hor
+00005710: 697a 6f6e 7461 6c5f 6163 6375 7261 6379  izontal_accuracy
+00005720: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005730: 6164 5b27 686f 7269 7a6f 6e74 616c 5f61  ad['horizontal_a
+00005740: 6363 7572 6163 7927 5d20 3d20 686f 7269  ccuracy'] = hori
+00005750: 7a6f 6e74 616c 5f61 6363 7572 6163 790d  zontal_accuracy.
+00005760: 0a20 2020 2069 6620 6865 6164 696e 673a  .    if heading:
+00005770: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00005780: 645b 2768 6561 6469 6e67 275d 203d 2068  d['heading'] = h
+00005790: 6561 6469 6e67 0d0a 2020 2020 6966 2070  eading..    if p
+000057a0: 726f 7869 6d69 7479 5f61 6c65 7274 5f72  roximity_alert_r
+000057b0: 6164 6975 733a 0d0a 2020 2020 2020 2020  adius:..        
+000057c0: 7061 796c 6f61 645b 2770 726f 7869 6d69  payload['proximi
+000057d0: 7479 5f61 6c65 7274 5f72 6164 6975 7327  ty_alert_radius'
+000057e0: 5d20 3d20 7072 6f78 696d 6974 795f 616c  ] = proximity_al
+000057f0: 6572 745f 7261 6469 7573 0d0a 2020 2020  ert_radius..    
+00005800: 6966 2069 6e6c 696e 655f 6d65 7373 6167  if inline_messag
+00005810: 655f 6964 3a0d 0a20 2020 2020 2020 2070  e_id:..        p
+00005820: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
+00005830: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
+00005840: 6c69 6e65 5f6d 6573 7361 6765 5f69 640d  line_message_id.
+00005850: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00005860: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+00005870: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+00005880: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
+00005890: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+000058a0: 6172 6b75 7029 0d0a 2020 2020 6966 2074  arkup)..    if t
+000058b0: 696d 656f 7574 3a0d 0a20 2020 2020 2020  imeout:..       
+000058c0: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+000058d0: 7427 5d20 3d20 7469 6d65 6f75 740d 0a20  t'] = timeout.. 
+000058e0: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+000058f0: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00005900: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+00005910: 733d 7061 796c 6f61 6429 0d0a 0d0a 0d0a  s=payload)......
+00005920: 6465 6620 7374 6f70 5f6d 6573 7361 6765  def stop_message
+00005930: 5f6c 6976 655f 6c6f 6361 7469 6f6e 280d  _live_location(.
+00005940: 0a20 2020 2020 2020 2074 6f6b 656e 2c20  .        token, 
+00005950: 6368 6174 5f69 643d 4e6f 6e65 2c20 6d65  chat_id=None, me
+00005960: 7373 6167 655f 6964 3d4e 6f6e 652c 0d0a  ssage_id=None,..
+00005970: 2020 2020 2020 2020 696e 6c69 6e65 5f6d          inline_m
+00005980: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
+00005990: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
+000059a0: 652c 2074 696d 656f 7574 3d4e 6f6e 6529  e, timeout=None)
+000059b0: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+000059c0: 6c20 3d20 7227 7374 6f70 4d65 7373 6167  l = r'stopMessag
+000059d0: 654c 6976 654c 6f63 6174 696f 6e27 0d0a  eLiveLocation'..
+000059e0: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
+000059f0: 0d0a 2020 2020 6966 2063 6861 745f 6964  ..    if chat_id
+00005a00: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005a10: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
+00005a20: 6368 6174 5f69 640d 0a20 2020 2069 6620  chat_id..    if 
+00005a30: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+00005a40: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00005a50: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
+00005a60: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+00005a70: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+00005a80: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+00005a90: 6f61 645b 2769 6e6c 696e 655f 6d65 7373  oad['inline_mess
+00005aa0: 6167 655f 6964 275d 203d 2069 6e6c 696e  age_id'] = inlin
+00005ab0: 655f 6d65 7373 6167 655f 6964 0d0a 2020  e_message_id..  
+00005ac0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00005ad0: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+00005ae0: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+00005af0: 7027 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p'] = _convert_m
+00005b00: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
+00005b10: 7570 290d 0a20 2020 2069 6620 7469 6d65  up)..    if time
+00005b20: 6f75 743a 0d0a 2020 2020 2020 2020 7061  out:..        pa
+00005b30: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+00005b40: 203d 2074 696d 656f 7574 0d0a 2020 2020   = timeout..    
+00005b50: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00005b60: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00005b70: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00005b80: 6179 6c6f 6164 290d 0a0d 0a0d 0a64 6566  ayload)......def
+00005b90: 2073 656e 645f 7665 6e75 6528 0d0a 2020   send_venue(..  
+00005ba0: 2020 2020 2020 746f 6b65 6e2c 2063 6861        token, cha
+00005bb0: 745f 6964 2c20 6c61 7469 7475 6465 2c20  t_id, latitude, 
+00005bc0: 6c6f 6e67 6974 7564 652c 2074 6974 6c65  longitude, title
+00005bd0: 2c20 6164 6472 6573 732c 0d0a 2020 2020  , address,..    
+00005be0: 2020 2020 666f 7572 7371 7561 7265 5f69      foursquare_i
+00005bf0: 643d 4e6f 6e65 2c20 666f 7572 7371 7561  d=None, foursqua
+00005c00: 7265 5f74 7970 653d 4e6f 6e65 2c20 6469  re_type=None, di
+00005c10: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00005c20: 6f6e 3d4e 6f6e 652c 0d0a 2020 2020 2020  on=None,..      
+00005c30: 2020 7265 706c 795f 746f 5f6d 6573 7361    reply_to_messa
+00005c40: 6765 5f69 643d 4e6f 6e65 2c20 7265 706c  ge_id=None, repl
+00005c50: 795f 6d61 726b 7570 3d4e 6f6e 652c 2074  y_markup=None, t
+00005c60: 696d 656f 7574 3d4e 6f6e 652c 0d0a 2020  imeout=None,..  
+00005c70: 2020 2020 2020 616c 6c6f 775f 7365 6e64        allow_send
+00005c80: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+00005c90: 793d 4e6f 6e65 2c20 676f 6f67 6c65 5f70  y=None, google_p
+00005ca0: 6c61 6365 5f69 643d 4e6f 6e65 2c0d 0a20  lace_id=None,.. 
+00005cb0: 2020 2020 2020 2067 6f6f 676c 655f 706c         google_pl
+00005cc0: 6163 655f 7479 7065 3d4e 6f6e 652c 2070  ace_type=None, p
+00005cd0: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00005ce0: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00005cf0: 6561 645f 6964 3d4e 6f6e 6529 3a0d 0a20  ead_id=None):.. 
+00005d00: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00005d10: 7227 7365 6e64 5665 6e75 6527 0d0a 2020  r'sendVenue'..  
+00005d20: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00005d30: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+00005d40: 2027 6c61 7469 7475 6465 273a 206c 6174   'latitude': lat
+00005d50: 6974 7564 652c 2027 6c6f 6e67 6974 7564  itude, 'longitud
+00005d60: 6527 3a20 6c6f 6e67 6974 7564 652c 2027  e': longitude, '
+00005d70: 7469 746c 6527 3a20 7469 746c 652c 2027  title': title, '
+00005d80: 6164 6472 6573 7327 3a20 6164 6472 6573  address': addres
+00005d90: 737d 0d0a 2020 2020 6966 2066 6f75 7273  s}..    if fours
+00005da0: 7175 6172 655f 6964 3a0d 0a20 2020 2020  quare_id:..     
+00005db0: 2020 2070 6179 6c6f 6164 5b27 666f 7572     payload['four
+00005dc0: 7371 7561 7265 5f69 6427 5d20 3d20 666f  square_id'] = fo
+00005dd0: 7572 7371 7561 7265 5f69 640d 0a20 2020  ursquare_id..   
+00005de0: 2069 6620 666f 7572 7371 7561 7265 5f74   if foursquare_t
+00005df0: 7970 653a 0d0a 2020 2020 2020 2020 7061  ype:..        pa
+00005e00: 796c 6f61 645b 2766 6f75 7273 7175 6172  yload['foursquar
+00005e10: 655f 7479 7065 275d 203d 2066 6f75 7273  e_type'] = fours
+00005e20: 7175 6172 655f 7479 7065 0d0a 2020 2020  quare_type..    
+00005e30: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00005e40: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+00005e50: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00005e60: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+00005e70: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+00005e80: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00005e90: 7469 6f6e 0d0a 2020 2020 6966 2072 6570  tion..    if rep
+00005ea0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00005eb0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00005ec0: 6164 5b27 7265 706c 795f 746f 5f6d 6573  ad['reply_to_mes
+00005ed0: 7361 6765 5f69 6427 5d20 3d20 7265 706c  sage_id'] = repl
+00005ee0: 795f 746f 5f6d 6573 7361 6765 5f69 640d  y_to_message_id.
+00005ef0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00005f00: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+00005f10: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+00005f20: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
+00005f30: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00005f40: 6172 6b75 7029 0d0a 2020 2020 6966 2074  arkup)..    if t
+00005f50: 696d 656f 7574 3a0d 0a20 2020 2020 2020  imeout:..       
+00005f60: 2070 6179 6c6f 6164 5b27 7469 6d65 6f75   payload['timeou
+00005f70: 7427 5d20 3d20 7469 6d65 6f75 740d 0a20  t'] = timeout.. 
+00005f80: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
+00005f90: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+00005fa0: 7920 6973 206e 6f74 204e 6f6e 653a 0d0a  y is not None:..
+00005fb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00005fc0: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
+00005fd0: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
+00005fe0: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00005ff0: 6974 686f 7574 5f72 6570 6c79 0d0a 2020  ithout_reply..  
+00006000: 2020 6966 2067 6f6f 676c 655f 706c 6163    if google_plac
+00006010: 655f 6964 3a0d 0a20 2020 2020 2020 2070  e_id:..        p
+00006020: 6179 6c6f 6164 5b27 676f 6f67 6c65 5f70  ayload['google_p
+00006030: 6c61 6365 5f69 6427 5d20 3d20 676f 6f67  lace_id'] = goog
+00006040: 6c65 5f70 6c61 6365 5f69 640d 0a20 2020  le_place_id..   
+00006050: 2069 6620 676f 6f67 6c65 5f70 6c61 6365   if google_place
+00006060: 5f74 7970 653a 0d0a 2020 2020 2020 2020  _type:..        
+00006070: 7061 796c 6f61 645b 2767 6f6f 676c 655f  payload['google_
+00006080: 706c 6163 655f 7479 7065 275d 203d 2067  place_type'] = g
+00006090: 6f6f 676c 655f 706c 6163 655f 7479 7065  oogle_place_type
+000060a0: 0d0a 2020 2020 6966 2070 726f 7465 6374  ..    if protect
+000060b0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+000060c0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+000060d0: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
+000060e0: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
+000060f0: 6563 745f 636f 6e74 656e 740d 0a20 2020  ect_content..   
+00006100: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+00006110: 6164 5f69 6420 6973 206e 6f74 204e 6f6e  ad_id is not Non
+00006120: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00006130: 6f61 645b 276d 6573 7361 6765 5f74 6872  oad['message_thr
+00006140: 6561 645f 6964 275d 203d 206d 6573 7361  ead_id'] = messa
+00006150: 6765 5f74 6872 6561 645f 6964 0d0a 2020  ge_thread_id..  
+00006160: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+00006170: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00006180: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00006190: 3d70 6179 6c6f 6164 290d 0a0d 0a0d 0a64  =payload)......d
+000061a0: 6566 2073 656e 645f 636f 6e74 6163 7428  ef send_contact(
+000061b0: 0d0a 2020 2020 2020 2020 746f 6b65 6e2c  ..        token,
+000061c0: 2063 6861 745f 6964 2c20 7068 6f6e 655f   chat_id, phone_
+000061d0: 6e75 6d62 6572 2c20 6669 7273 745f 6e61  number, first_na
+000061e0: 6d65 2c20 6c61 7374 5f6e 616d 653d 4e6f  me, last_name=No
+000061f0: 6e65 2c20 7663 6172 643d 4e6f 6e65 2c0d  ne, vcard=None,.
+00006200: 0a20 2020 2020 2020 2064 6973 6162 6c65  .        disable
+00006210: 5f6e 6f74 6966 6963 6174 696f 6e3d 4e6f  _notification=No
+00006220: 6e65 2c20 7265 706c 795f 746f 5f6d 6573  ne, reply_to_mes
+00006230: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
+00006240: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
+00006250: 2074 696d 656f 7574 3d4e 6f6e 652c 0d0a   timeout=None,..
+00006260: 2020 2020 2020 2020 616c 6c6f 775f 7365          allow_se
+00006270: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
+00006280: 706c 793d 4e6f 6e65 2c20 7072 6f74 6563  ply=None, protec
+00006290: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
+000062a0: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+000062b0: 643d 4e6f 6e65 293a 0d0a 2020 2020 6d65  d=None):..    me
+000062c0: 7468 6f64 5f75 726c 203d 2072 2773 656e  thod_url = r'sen
+000062d0: 6443 6f6e 7461 6374 270d 0a20 2020 2070  dContact'..    p
+000062e0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+000062f0: 6964 273a 2063 6861 745f 6964 2c20 2770  id': chat_id, 'p
+00006300: 686f 6e65 5f6e 756d 6265 7227 3a20 7068  hone_number': ph
+00006310: 6f6e 655f 6e75 6d62 6572 2c20 2766 6972  one_number, 'fir
+00006320: 7374 5f6e 616d 6527 3a20 6669 7273 745f  st_name': first_
+00006330: 6e61 6d65 7d0d 0a20 2020 2069 6620 6c61  name}..    if la
+00006340: 7374 5f6e 616d 653a 0d0a 2020 2020 2020  st_name:..      
+00006350: 2020 7061 796c 6f61 645b 276c 6173 745f    payload['last_
+00006360: 6e61 6d65 275d 203d 206c 6173 745f 6e61  name'] = last_na
+00006370: 6d65 0d0a 2020 2020 6966 2076 6361 7264  me..    if vcard
+00006380: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006390: 6164 5b27 7663 6172 6427 5d20 3d20 7663  ad['vcard'] = vc
+000063a0: 6172 640d 0a20 2020 2069 6620 6469 7361  ard..    if disa
+000063b0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
+000063c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+000063d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000063e0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000063f0: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
+00006400: 5f6e 6f74 6966 6963 6174 696f 6e0d 0a20  _notification.. 
+00006410: 2020 2069 6620 7265 706c 795f 746f 5f6d     if reply_to_m
+00006420: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+00006430: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
+00006440: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00006450: 275d 203d 2072 6570 6c79 5f74 6f5f 6d65  '] = reply_to_me
+00006460: 7373 6167 655f 6964 0d0a 2020 2020 6966  ssage_id..    if
+00006470: 2072 6570 6c79 5f6d 6172 6b75 703a 0d0a   reply_markup:..
+00006480: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006490: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
+000064a0: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+000064b0: 7028 7265 706c 795f 6d61 726b 7570 290d  p(reply_markup).
+000064c0: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+000064d0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000064e0: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
+000064f0: 696d 656f 7574 0d0a 2020 2020 6966 2061  imeout..    if a
+00006500: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00006510: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
+00006520: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00006530: 2070 6179 6c6f 6164 5b27 616c 6c6f 775f   payload['allow_
+00006540: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00006550: 7265 706c 7927 5d20 3d20 616c 6c6f 775f  reply'] = allow_
+00006560: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00006570: 7265 706c 790d 0a20 2020 2069 6620 7072  reply..    if pr
+00006580: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
+00006590: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+000065a0: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
+000065b0: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
+000065c0: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+000065d0: 0d0a 2020 2020 6966 206d 6573 7361 6765  ..    if message
+000065e0: 5f74 6872 6561 645f 6964 2069 7320 6e6f  _thread_id is no
+000065f0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00006600: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
+00006610: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
+00006620: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
+00006630: 640d 0a0d 0a20 2020 2072 6574 7572 6e20  d....    return 
+00006640: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00006650: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00006660: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00006670: 0d0a 0d0a 0d0a 6465 6620 7365 6e64 5f63  ......def send_c
+00006680: 6861 745f 6163 7469 6f6e 2874 6f6b 656e  hat_action(token
+00006690: 2c20 6368 6174 5f69 642c 2061 6374 696f  , chat_id, actio
+000066a0: 6e2c 2074 696d 656f 7574 3d4e 6f6e 652c  n, timeout=None,
+000066b0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+000066c0: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+000066d0: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
+000066e0: 6e64 4368 6174 4163 7469 6f6e 270d 0a20  ndChatAction'.. 
+000066f0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+00006700: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+00006710: 2c20 2761 6374 696f 6e27 3a20 6163 7469  , 'action': acti
+00006720: 6f6e 7d0d 0a20 2020 2069 6620 7469 6d65  on}..    if time
+00006730: 6f75 743a 0d0a 2020 2020 2020 2020 7061  out:..        pa
+00006740: 796c 6f61 645b 2774 696d 656f 7574 275d  yload['timeout']
+00006750: 203d 2074 696d 656f 7574 0d0a 2020 2020   = timeout..    
+00006760: 6966 206d 6573 7361 6765 5f74 6872 6561  if message_threa
+00006770: 645f 6964 2069 7320 6e6f 7420 4e6f 6e65  d_id is not None
+00006780: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006790: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+000067a0: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+000067b0: 655f 7468 7265 6164 5f69 640d 0a20 2020  e_thread_id..   
+000067c0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+000067d0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+000067e0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+000067f0: 7061 796c 6f61 6429 0d0a 0d0a 0d0a 6465  payload)......de
+00006800: 6620 7365 6e64 5f76 6964 656f 2874 6f6b  f send_video(tok
+00006810: 656e 2c20 6368 6174 5f69 642c 2064 6174  en, chat_id, dat
+00006820: 612c 2064 7572 6174 696f 6e3d 4e6f 6e65  a, duration=None
+00006830: 2c20 6361 7074 696f 6e3d 4e6f 6e65 2c20  , caption=None, 
+00006840: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00006850: 5f69 643d 4e6f 6e65 2c20 7265 706c 795f  _id=None, reply_
+00006860: 6d61 726b 7570 3d4e 6f6e 652c 0d0a 2020  markup=None,..  
+00006870: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00006880: 7365 5f6d 6f64 653d 4e6f 6e65 2c20 7375  se_mode=None, su
+00006890: 7070 6f72 7473 5f73 7472 6561 6d69 6e67  pports_streaming
+000068a0: 3d4e 6f6e 652c 2064 6973 6162 6c65 5f6e  =None, disable_n
+000068b0: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+000068c0: 2c20 7469 6d65 6f75 743d 4e6f 6e65 2c20  , timeout=None, 
+000068d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000068e0: 2074 6875 6d62 3d4e 6f6e 652c 2077 6964   thumb=None, wid
+000068f0: 7468 3d4e 6f6e 652c 2068 6569 6768 743d  th=None, height=
+00006900: 4e6f 6e65 2c20 6361 7074 696f 6e5f 656e  None, caption_en
+00006910: 7469 7469 6573 3d4e 6f6e 652c 2061 6c6c  tities=None, all
+00006920: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00006930: 7574 5f72 6570 6c79 3d4e 6f6e 652c 2070  ut_reply=None, p
+00006940: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00006950: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
+00006960: 2020 2020 206d 6573 7361 6765 5f74 6872       message_thr
+00006970: 6561 645f 6964 3d4e 6f6e 652c 2068 6173  ead_id=None, has
+00006980: 5f73 706f 696c 6572 3d4e 6f6e 6529 3a0d  _spoiler=None):.
+00006990: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+000069a0: 3d20 7227 7365 6e64 5669 6465 6f27 0d0a  = r'sendVideo'..
+000069b0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+000069c0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+000069d0: 647d 0d0a 2020 2020 6669 6c65 7320 3d20  d}..    files = 
+000069e0: 4e6f 6e65 0d0a 2020 2020 6966 206e 6f74  None..    if not
+000069f0: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
+00006a00: 6461 7461 293a 0d0a 2020 2020 2020 2020  data):..        
+00006a10: 6669 6c65 7320 3d20 7b27 7669 6465 6f27  files = {'video'
+00006a20: 3a20 6461 7461 7d0d 0a20 2020 2065 6c73  : data}..    els
+00006a30: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00006a40: 6f61 645b 2776 6964 656f 275d 203d 2064  oad['video'] = d
+00006a50: 6174 610d 0a20 2020 2069 6620 6475 7261  ata..    if dura
+00006a60: 7469 6f6e 3a0d 0a20 2020 2020 2020 2070  tion:..        p
+00006a70: 6179 6c6f 6164 5b27 6475 7261 7469 6f6e  ayload['duration
+00006a80: 275d 203d 2064 7572 6174 696f 6e0d 0a20  '] = duration.. 
+00006a90: 2020 2069 6620 6361 7074 696f 6e3a 0d0a     if caption:..
+00006aa0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006ab0: 2763 6170 7469 6f6e 275d 203d 2063 6170  'caption'] = cap
+00006ac0: 7469 6f6e 0d0a 2020 2020 6966 2072 6570  tion..    if rep
+00006ad0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00006ae0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006af0: 6164 5b27 7265 706c 795f 746f 5f6d 6573  ad['reply_to_mes
+00006b00: 7361 6765 5f69 6427 5d20 3d20 7265 706c  sage_id'] = repl
+00006b10: 795f 746f 5f6d 6573 7361 6765 5f69 640d  y_to_message_id.
+00006b20: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+00006b30: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+00006b40: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+00006b50: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
+00006b60: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+00006b70: 6172 6b75 7029 0d0a 2020 2020 6966 2070  arkup)..    if p
+00006b80: 6172 7365 5f6d 6f64 653a 0d0a 2020 2020  arse_mode:..    
+00006b90: 2020 2020 7061 796c 6f61 645b 2770 6172      payload['par
+00006ba0: 7365 5f6d 6f64 6527 5d20 3d20 7061 7273  se_mode'] = pars
+00006bb0: 655f 6d6f 6465 0d0a 2020 2020 6966 2073  e_mode..    if s
+00006bc0: 7570 706f 7274 735f 7374 7265 616d 696e  upports_streamin
+00006bd0: 6720 6973 206e 6f74 204e 6f6e 653a 0d0a  g is not None:..
+00006be0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00006bf0: 2773 7570 706f 7274 735f 7374 7265 616d  'supports_stream
+00006c00: 696e 6727 5d20 3d20 7375 7070 6f72 7473  ing'] = supports
+00006c10: 5f73 7472 6561 6d69 6e67 0d0a 2020 2020  _streaming..    
+00006c20: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00006c30: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+00006c40: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+00006c50: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+00006c60: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+00006c70: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+00006c80: 7469 6f6e 0d0a 2020 2020 6966 2074 696d  tion..    if tim
+00006c90: 656f 7574 3a0d 0a20 2020 2020 2020 2070  eout:..        p
+00006ca0: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
+00006cb0: 5d20 3d20 7469 6d65 6f75 740d 0a20 2020  ] = timeout..   
+00006cc0: 2069 6620 7468 756d 623a 0d0a 2020 2020   if thumb:..    
+00006cd0: 2020 2020 6966 206e 6f74 2075 7469 6c2e      if not util.
+00006ce0: 6973 5f73 7472 696e 6728 7468 756d 6229  is_string(thumb)
+00006cf0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00006d00: 6620 6669 6c65 733a 0d0a 2020 2020 2020  f files:..      
+00006d10: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
+00006d20: 2774 6875 6d62 275d 203d 2074 6875 6d62  'thumb'] = thumb
+00006d30: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00006d40: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00006d50: 2020 2020 2066 696c 6573 203d 207b 2774       files = {'t
+00006d60: 6875 6d62 273a 2074 6875 6d62 7d0d 0a20  humb': thumb}.. 
+00006d70: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00006d80: 2020 2020 2020 2020 2020 7061 796c 6f61            payloa
+00006d90: 645b 2774 6875 6d62 275d 203d 2074 6875  d['thumb'] = thu
+00006da0: 6d62 0d0a 2020 2020 6966 2077 6964 7468  mb..    if width
+00006db0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006dc0: 6164 5b27 7769 6474 6827 5d20 3d20 7769  ad['width'] = wi
+00006dd0: 6474 680d 0a20 2020 2069 6620 6865 6967  dth..    if heig
+00006de0: 6874 3a0d 0a20 2020 2020 2020 2070 6179  ht:..        pay
+00006df0: 6c6f 6164 5b27 6865 6967 6874 275d 203d  load['height'] =
+00006e00: 2068 6569 6768 740d 0a20 2020 2069 6620   height..    if 
+00006e10: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+00006e20: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00006e30: 6164 5b27 6361 7074 696f 6e5f 656e 7469  ad['caption_enti
+00006e40: 7469 6573 275d 203d 206a 736f 6e2e 6475  ties'] = json.du
+00006e50: 6d70 7328 7479 7065 732e 4d65 7373 6167  mps(types.Messag
+00006e60: 6545 6e74 6974 792e 746f 5f6c 6973 745f  eEntity.to_list_
+00006e70: 6f66 5f64 6963 7473 2863 6170 7469 6f6e  of_dicts(caption
+00006e80: 5f65 6e74 6974 6965 7329 290d 0a20 2020  _entities))..   
+00006e90: 2069 6620 616c 6c6f 775f 7365 6e64 696e   if allow_sendin
+00006ea0: 675f 7769 7468 6f75 745f 7265 706c 7920  g_without_reply 
+00006eb0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00006ec0: 2020 2020 2020 7061 796c 6f61 645b 2761        payload['a
+00006ed0: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00006ee0: 686f 7574 5f72 6570 6c79 275d 203d 2061  hout_reply'] = a
+00006ef0: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+00006f00: 686f 7574 5f72 6570 6c79 0d0a 2020 2020  hout_reply..    
+00006f10: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
+00006f20: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0d  nt is not None:.
+00006f30: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00006f40: 5b27 7072 6f74 6563 745f 636f 6e74 656e  ['protect_conten
+00006f50: 7427 5d20 3d20 7072 6f74 6563 745f 636f  t'] = protect_co
+00006f60: 6e74 656e 740d 0a20 2020 2069 6620 6d65  ntent..    if me
+00006f70: 7373 6167 655f 7468 7265 6164 5f69 643a  ssage_thread_id:
+00006f80: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00006f90: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
+00006fa0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
+00006fb0: 5f74 6872 6561 645f 6964 0d0a 2020 2020  _thread_id..    
+00006fc0: 6966 2068 6173 5f73 706f 696c 6572 2069  if has_spoiler i
+00006fd0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00006fe0: 2020 2020 2070 6179 6c6f 6164 5b27 6861       payload['ha
+00006ff0: 735f 7370 6f69 6c65 7227 5d20 3d20 6861  s_spoiler'] = ha
+00007000: 735f 7370 6f69 6c65 720d 0a20 2020 2072  s_spoiler..    r
+00007010: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00007020: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00007030: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00007040: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+00007050: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+00007060: 2729 0d0a 0d0a 0d0a 6465 6620 7365 6e64  ')......def send
+00007070: 5f61 6e69 6d61 7469 6f6e 280d 0a20 2020  _animation(..   
+00007080: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
+00007090: 5f69 642c 2064 6174 612c 2064 7572 6174  _id, data, durat
+000070a0: 696f 6e3d 4e6f 6e65 2c20 6361 7074 696f  ion=None, captio
+000070b0: 6e3d 4e6f 6e65 2c20 7265 706c 795f 746f  n=None, reply_to
+000070c0: 5f6d 6573 7361 6765 5f69 643d 4e6f 6e65  _message_id=None
+000070d0: 2c20 7265 706c 795f 6d61 726b 7570 3d4e  , reply_markup=N
+000070e0: 6f6e 652c 0d0a 2020 2020 2020 2020 7061  one,..        pa
+000070f0: 7273 655f 6d6f 6465 3d4e 6f6e 652c 2064  rse_mode=None, d
+00007100: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00007110: 696f 6e3d 4e6f 6e65 2c20 7469 6d65 6f75  ion=None, timeou
+00007120: 743d 4e6f 6e65 2c20 7468 756d 623d 4e6f  t=None, thumb=No
+00007130: 6e65 2c20 6361 7074 696f 6e5f 656e 7469  ne, caption_enti
+00007140: 7469 6573 3d4e 6f6e 652c 0d0a 2020 2020  ties=None,..    
+00007150: 2020 2020 616c 6c6f 775f 7365 6e64 696e      allow_sendin
+00007160: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
+00007170: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
+00007180: 6e74 656e 743d 4e6f 6e65 2c20 7769 6474  ntent=None, widt
+00007190: 683d 4e6f 6e65 2c20 6865 6967 6874 3d4e  h=None, height=N
+000071a0: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+000071b0: 6561 645f 6964 3d4e 6f6e 652c 0d0a 2020  ead_id=None,..  
+000071c0: 2020 2020 2020 6861 735f 7370 6f69 6c65        has_spoile
+000071d0: 723d 4e6f 6e65 293a 0d0a 2020 2020 6d65  r=None):..    me
+000071e0: 7468 6f64 5f75 726c 203d 2072 2773 656e  thod_url = r'sen
+000071f0: 6441 6e69 6d61 7469 6f6e 270d 0a20 2020  dAnimation'..   
+00007200: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00007210: 745f 6964 273a 2063 6861 745f 6964 7d0d  t_id': chat_id}.
+00007220: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
+00007230: 650d 0a20 2020 2069 6620 6e6f 7420 7574  e..    if not ut
+00007240: 696c 2e69 735f 7374 7269 6e67 2864 6174  il.is_string(dat
+00007250: 6129 3a0d 0a20 2020 2020 2020 2066 696c  a):..        fil
+00007260: 6573 203d 207b 2761 6e69 6d61 7469 6f6e  es = {'animation
+00007270: 273a 2064 6174 617d 0d0a 2020 2020 656c  ': data}..    el
+00007280: 7365 3a0d 0a20 2020 2020 2020 2070 6179  se:..        pay
+00007290: 6c6f 6164 5b27 616e 696d 6174 696f 6e27  load['animation'
+000072a0: 5d20 3d20 6461 7461 0d0a 2020 2020 6966  ] = data..    if
+000072b0: 2064 7572 6174 696f 6e3a 0d0a 2020 2020   duration:..    
+000072c0: 2020 2020 7061 796c 6f61 645b 2764 7572      payload['dur
+000072d0: 6174 696f 6e27 5d20 3d20 6475 7261 7469  ation'] = durati
+000072e0: 6f6e 0d0a 2020 2020 6966 2063 6170 7469  on..    if capti
+000072f0: 6f6e 3a0d 0a20 2020 2020 2020 2070 6179  on:..        pay
+00007300: 6c6f 6164 5b27 6361 7074 696f 6e27 5d20  load['caption'] 
+00007310: 3d20 6361 7074 696f 6e0d 0a20 2020 2069  = caption..    i
+00007320: 6620 7265 706c 795f 746f 5f6d 6573 7361  f reply_to_messa
+00007330: 6765 5f69 643a 0d0a 2020 2020 2020 2020  ge_id:..        
+00007340: 7061 796c 6f61 645b 2772 6570 6c79 5f74  payload['reply_t
+00007350: 6f5f 6d65 7373 6167 655f 6964 275d 203d  o_message_id'] =
+00007360: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
+00007370: 655f 6964 0d0a 2020 2020 6966 2072 6570  e_id..    if rep
+00007380: 6c79 5f6d 6172 6b75 703a 0d0a 2020 2020  ly_markup:..    
+00007390: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
+000073a0: 6c79 5f6d 6172 6b75 7027 5d20 3d20 5f63  ly_markup'] = _c
+000073b0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
+000073c0: 706c 795f 6d61 726b 7570 290d 0a20 2020  ply_markup)..   
+000073d0: 2069 6620 7061 7273 655f 6d6f 6465 3a0d   if parse_mode:.
 000073e0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000073f0: 5b27 6475 7261 7469 6f6e 275d 203d 2064  ['duration'] = d
-00007400: 7572 6174 696f 6e0a 2020 2020 6966 2072  uration.    if r
-00007410: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00007420: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00007430: 6f61 645b 2772 6570 6c79 5f74 6f5f 6d65  oad['reply_to_me
-00007440: 7373 6167 655f 6964 275d 203d 2072 6570  ssage_id'] = rep
-00007450: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
-00007460: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
-00007470: 726b 7570 3a0a 2020 2020 2020 2020 7061  rkup:.        pa
-00007480: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-00007490: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
-000074a0: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-000074b0: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-000074c0: 6966 2070 6172 7365 5f6d 6f64 653a 0a20  if parse_mode:. 
-000074d0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-000074e0: 7061 7273 655f 6d6f 6465 275d 203d 2070  parse_mode'] = p
-000074f0: 6172 7365 5f6d 6f64 650a 2020 2020 6966  arse_mode.    if
-00007500: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
-00007510: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-00007520: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00007530: 6164 5b27 6469 7361 626c 655f 6e6f 7469  ad['disable_noti
-00007540: 6669 6361 7469 6f6e 275d 203d 2064 6973  fication'] = dis
-00007550: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00007560: 6e0a 2020 2020 6966 2074 696d 656f 7574  n.    if timeout
-00007570: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007580: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-00007590: 696d 656f 7574 0a20 2020 2069 6620 6361  imeout.    if ca
-000075a0: 7074 696f 6e5f 656e 7469 7469 6573 3a0a  ption_entities:.
-000075b0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000075c0: 2763 6170 7469 6f6e 5f65 6e74 6974 6965  'caption_entitie
-000075d0: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
-000075e0: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
-000075f0: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
-00007600: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
-00007610: 7469 7469 6573 2929 0a20 2020 2069 6620  tities)).    if 
+000073f0: 5b27 7061 7273 655f 6d6f 6465 275d 203d  ['parse_mode'] =
+00007400: 2070 6172 7365 5f6d 6f64 650d 0a20 2020   parse_mode..   
+00007410: 2069 6620 6469 7361 626c 655f 6e6f 7469   if disable_noti
+00007420: 6669 6361 7469 6f6e 2069 7320 6e6f 7420  fication is not 
+00007430: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00007440: 6179 6c6f 6164 5b27 6469 7361 626c 655f  ayload['disable_
+00007450: 6e6f 7469 6669 6361 7469 6f6e 275d 203d  notification'] =
+00007460: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+00007470: 6174 696f 6e0d 0a20 2020 2069 6620 7469  ation..    if ti
+00007480: 6d65 6f75 743a 0d0a 2020 2020 2020 2020  meout:..        
+00007490: 7061 796c 6f61 645b 2774 696d 656f 7574  payload['timeout
+000074a0: 275d 203d 2074 696d 656f 7574 0d0a 2020  '] = timeout..  
+000074b0: 2020 6966 2074 6875 6d62 3a0d 0a20 2020    if thumb:..   
+000074c0: 2020 2020 2069 6620 6e6f 7420 7574 696c       if not util
+000074d0: 2e69 735f 7374 7269 6e67 2874 6875 6d62  .is_string(thumb
+000074e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000074f0: 6966 2066 696c 6573 3a0d 0a20 2020 2020  if files:..     
+00007500: 2020 2020 2020 2020 2020 2066 696c 6573             files
+00007510: 5b27 7468 756d 6227 5d20 3d20 7468 756d  ['thumb'] = thum
+00007520: 620d 0a20 2020 2020 2020 2020 2020 2065  b..            e
+00007530: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00007540: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
+00007550: 7468 756d 6227 3a20 7468 756d 627d 0d0a  thumb': thumb}..
+00007560: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00007570: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+00007580: 6164 5b27 7468 756d 6227 5d20 3d20 7468  ad['thumb'] = th
+00007590: 756d 620d 0a20 2020 2069 6620 6361 7074  umb..    if capt
+000075a0: 696f 6e5f 656e 7469 7469 6573 3a0d 0a20  ion_entities:.. 
+000075b0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000075c0: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
+000075d0: 275d 203d 206a 736f 6e2e 6475 6d70 7328  '] = json.dumps(
+000075e0: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
+000075f0: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
+00007600: 6963 7473 2863 6170 7469 6f6e 5f65 6e74  icts(caption_ent
+00007610: 6974 6965 7329 290d 0a20 2020 2069 6620  ities))..    if 
 00007620: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
 00007630: 7468 6f75 745f 7265 706c 7920 6973 206e  thout_reply is n
-00007640: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00007650: 2070 6179 6c6f 6164 5b27 616c 6c6f 775f   payload['allow_
-00007660: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-00007670: 7265 706c 7927 5d20 3d20 616c 6c6f 775f  reply'] = allow_
-00007680: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-00007690: 7265 706c 790a 2020 2020 6966 2070 726f  reply.    if pro
-000076a0: 7465 6374 5f63 6f6e 7465 6e74 2069 7320  tect_content is 
-000076b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000076c0: 2020 7061 796c 6f61 645b 2770 726f 7465    payload['prote
-000076d0: 6374 5f63 6f6e 7465 6e74 275d 203d 2070  ct_content'] = p
-000076e0: 726f 7465 6374 5f63 6f6e 7465 6e74 0a20  rotect_content. 
-000076f0: 2020 2069 6620 6d65 7373 6167 655f 7468     if message_th
-00007700: 7265 6164 5f69 643a 0a20 2020 2020 2020  read_id:.       
-00007710: 2070 6179 6c6f 6164 5b27 6d65 7373 6167   payload['messag
-00007720: 655f 7468 7265 6164 5f69 6427 5d20 3d20  e_thread_id'] = 
-00007730: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00007740: 640a 2020 2020 7265 7475 726e 2061 7761  d.    return awa
-00007750: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-00007760: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00007770: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-00007780: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
-00007790: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
-000077a0: 2729 0a0a 0a61 7379 6e63 2064 6566 2073  ')...async def s
-000077b0: 656e 645f 7669 6465 6f5f 6e6f 7465 2874  end_video_note(t
-000077c0: 6f6b 656e 2c20 6368 6174 5f69 642c 2064  oken, chat_id, d
-000077d0: 6174 612c 2064 7572 6174 696f 6e3d 4e6f  ata, duration=No
-000077e0: 6e65 2c20 6c65 6e67 7468 3d4e 6f6e 652c  ne, length=None,
-000077f0: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00007800: 655f 6964 3d4e 6f6e 652c 2072 6570 6c79  e_id=None, reply
-00007810: 5f6d 6172 6b75 703d 4e6f 6e65 2c0a 2020  _markup=None,.  
-00007820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007830: 2020 6469 7361 626c 655f 6e6f 7469 6669    disable_notifi
-00007840: 6361 7469 6f6e 3d4e 6f6e 652c 2074 696d  cation=None, tim
-00007850: 656f 7574 3d4e 6f6e 652c 2074 6875 6d62  eout=None, thumb
-00007860: 3d4e 6f6e 652c 2061 6c6c 6f77 5f73 656e  =None, allow_sen
-00007870: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
-00007880: 6c79 3d4e 6f6e 652c 2070 726f 7465 6374  ly=None, protect
-00007890: 5f63 6f6e 7465 6e74 3d4e 6f6e 652c 0a20  _content=None,. 
-000078a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078b0: 2020 206d 6573 7361 6765 5f74 6872 6561     message_threa
-000078c0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-000078d0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-000078e0: 656e 6456 6964 656f 4e6f 7465 270a 2020  endVideoNote'.  
-000078f0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-00007900: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
-00007910: 0a20 2020 2066 696c 6573 203d 204e 6f6e  .    files = Non
-00007920: 650a 2020 2020 6966 206e 6f74 2075 7469  e.    if not uti
-00007930: 6c2e 6973 5f73 7472 696e 6728 6461 7461  l.is_string(data
-00007940: 293a 0a20 2020 2020 2020 2066 696c 6573  ):.        files
-00007950: 203d 207b 2776 6964 656f 5f6e 6f74 6527   = {'video_note'
-00007960: 3a20 6461 7461 7d0a 2020 2020 656c 7365  : data}.    else
-00007970: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007980: 645b 2776 6964 656f 5f6e 6f74 6527 5d20  d['video_note'] 
-00007990: 3d20 6461 7461 0a20 2020 2069 6620 6475  = data.    if du
-000079a0: 7261 7469 6f6e 3a0a 2020 2020 2020 2020  ration:.        
-000079b0: 7061 796c 6f61 645b 2764 7572 6174 696f  payload['duratio
-000079c0: 6e27 5d20 3d20 6475 7261 7469 6f6e 0a20  n'] = duration. 
-000079d0: 2020 2069 6620 6c65 6e67 7468 2061 6e64     if length and
-000079e0: 2028 7374 7228 6c65 6e67 7468 292e 6973   (str(length).is
-000079f0: 6469 6769 7428 2920 616e 6420 696e 7428  digit() and int(
-00007a00: 6c65 6e67 7468 2920 3c3d 2036 3339 293a  length) <= 639):
-00007a10: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00007a20: 5b27 6c65 6e67 7468 275d 203d 206c 656e  ['length'] = len
-00007a30: 6774 680a 2020 2020 656c 7365 3a0a 2020  gth.    else:.  
-00007a40: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
-00007a50: 656e 6774 6827 5d20 3d20 3633 3920 2023  ength'] = 639  #
-00007a60: 2073 6565 6d73 206c 696b 6520 6974 2069   seems like it i
-00007a70: 7320 4d41 5820 6c65 6e67 7468 2073 697a  s MAX length siz
-00007a80: 650a 2020 2020 6966 2072 6570 6c79 5f74  e.    if reply_t
-00007a90: 6f5f 6d65 7373 6167 655f 6964 3a0a 2020  o_message_id:.  
-00007aa0: 2020 2020 2020 7061 796c 6f61 645b 2772        payload['r
-00007ab0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-00007ac0: 6964 275d 203d 2072 6570 6c79 5f74 6f5f  id'] = reply_to_
-00007ad0: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-00007ae0: 6620 7265 706c 795f 6d61 726b 7570 3a0a  f reply_markup:.
-00007af0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00007b00: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
-00007b10: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-00007b20: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
-00007b30: 726b 7570 290a 2020 2020 6966 2064 6973  rkup).    if dis
-00007b40: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-00007b50: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-00007b60: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00007b70: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00007b80: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00007b90: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-00007ba0: 2020 6966 2074 696d 656f 7574 3a0a 2020    if timeout:.  
-00007bb0: 2020 2020 2020 7061 796c 6f61 645b 2774        payload['t
-00007bc0: 696d 656f 7574 275d 203d 2074 696d 656f  imeout'] = timeo
-00007bd0: 7574 0a20 2020 2069 6620 7468 756d 623a  ut.    if thumb:
-00007be0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00007bf0: 7574 696c 2e69 735f 7374 7269 6e67 2874  util.is_string(t
-00007c00: 6875 6d62 293a 0a20 2020 2020 2020 2020  humb):.         
-00007c10: 2020 2069 6620 6669 6c65 733a 0a20 2020     if files:.   
-00007c20: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00007c30: 6573 5b27 7468 756d 6227 5d20 3d20 7468  es['thumb'] = th
-00007c40: 756d 620a 2020 2020 2020 2020 2020 2020  umb.            
-00007c50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00007c60: 2020 2020 2020 6669 6c65 7320 3d20 7b27        files = {'
-00007c70: 7468 756d 6227 3a20 7468 756d 627d 0a20  thumb': thumb}. 
-00007c80: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00007c90: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
-00007ca0: 5b27 7468 756d 6227 5d20 3d20 7468 756d  ['thumb'] = thum
-00007cb0: 620a 2020 2020 6966 2061 6c6c 6f77 5f73  b.    if allow_s
-00007cc0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-00007cd0: 6570 6c79 2069 7320 6e6f 7420 4e6f 6e65  eply is not None
-00007ce0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007cf0: 645b 2761 6c6c 6f77 5f73 656e 6469 6e67  d['allow_sending
-00007d00: 5f77 6974 686f 7574 5f72 6570 6c79 275d  _without_reply']
-00007d10: 203d 2061 6c6c 6f77 5f73 656e 6469 6e67   = allow_sending
-00007d20: 5f77 6974 686f 7574 5f72 6570 6c79 0a20  _without_reply. 
-00007d30: 2020 2069 6620 7072 6f74 6563 745f 636f     if protect_co
-00007d40: 6e74 656e 7420 6973 206e 6f74 204e 6f6e  ntent is not Non
-00007d50: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00007d60: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
-00007d70: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
-00007d80: 636f 6e74 656e 740a 2020 2020 6966 206d  content.    if m
-00007d90: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00007da0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00007db0: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-00007dc0: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-00007dd0: 5f74 6872 6561 645f 6964 0a20 2020 2072  _thread_id.    r
-00007de0: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00007df0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00007e00: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00007e10: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00007e20: 6669 6c65 733d 6669 6c65 732c 206d 6574  files=files, met
-00007e30: 686f 643d 2770 6f73 7427 290a 0a0a 6173  hod='post')...as
-00007e40: 796e 6320 6465 6620 7365 6e64 5f61 7564  ync def send_aud
-00007e50: 696f 2874 6f6b 656e 2c20 6368 6174 5f69  io(token, chat_i
-00007e60: 642c 2061 7564 696f 2c20 6361 7074 696f  d, audio, captio
-00007e70: 6e3d 4e6f 6e65 2c20 6475 7261 7469 6f6e  n=None, duration
-00007e80: 3d4e 6f6e 652c 2070 6572 666f 726d 6572  =None, performer
-00007e90: 3d4e 6f6e 652c 2074 6974 6c65 3d4e 6f6e  =None, title=Non
-00007ea0: 652c 2072 6570 6c79 5f74 6f5f 6d65 7373  e, reply_to_mess
-00007eb0: 6167 655f 6964 3d4e 6f6e 652c 0a20 2020  age_id=None,.   
-00007ec0: 2020 2020 2020 2020 2020 2020 7265 706c              repl
-00007ed0: 795f 6d61 726b 7570 3d4e 6f6e 652c 2070  y_markup=None, p
-00007ee0: 6172 7365 5f6d 6f64 653d 4e6f 6e65 2c20  arse_mode=None, 
-00007ef0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00007f00: 7469 6f6e 3d4e 6f6e 652c 2074 696d 656f  tion=None, timeo
-00007f10: 7574 3d4e 6f6e 652c 2074 6875 6d62 3d4e  ut=None, thumb=N
-00007f20: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-00007f30: 2020 2020 6361 7074 696f 6e5f 656e 7469      caption_enti
-00007f40: 7469 6573 3d4e 6f6e 652c 2061 6c6c 6f77  ties=None, allow
-00007f50: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
-00007f60: 5f72 6570 6c79 3d4e 6f6e 652c 2070 726f  _reply=None, pro
-00007f70: 7465 6374 5f63 6f6e 7465 6e74 3d4e 6f6e  tect_content=Non
-00007f80: 652c 206d 6573 7361 6765 5f74 6872 6561  e, message_threa
-00007f90: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-00007fa0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-00007fb0: 656e 6441 7564 696f 270a 2020 2020 7061  endAudio'.    pa
-00007fc0: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-00007fd0: 6427 3a20 6368 6174 5f69 647d 0a20 2020  d': chat_id}.   
-00007fe0: 2066 696c 6573 203d 204e 6f6e 650a 2020   files = None.  
-00007ff0: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
-00008000: 5f73 7472 696e 6728 6175 6469 6f29 3a0a  _string(audio):.
-00008010: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
-00008020: 7b27 6175 6469 6f27 3a20 6175 6469 6f7d  {'audio': audio}
-00008030: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00008040: 2020 2070 6179 6c6f 6164 5b27 6175 6469     payload['audi
-00008050: 6f27 5d20 3d20 6175 6469 6f0a 2020 2020  o'] = audio.    
-00008060: 6966 2063 6170 7469 6f6e 3a0a 2020 2020  if caption:.    
-00008070: 2020 2020 7061 796c 6f61 645b 2763 6170      payload['cap
-00008080: 7469 6f6e 275d 203d 2063 6170 7469 6f6e  tion'] = caption
-00008090: 0a20 2020 2069 6620 6475 7261 7469 6f6e  .    if duration
-000080a0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000080b0: 645b 2764 7572 6174 696f 6e27 5d20 3d20  d['duration'] = 
-000080c0: 6475 7261 7469 6f6e 0a20 2020 2069 6620  duration.    if 
-000080d0: 7065 7266 6f72 6d65 723a 0a20 2020 2020  performer:.     
-000080e0: 2020 2070 6179 6c6f 6164 5b27 7065 7266     payload['perf
-000080f0: 6f72 6d65 7227 5d20 3d20 7065 7266 6f72  ormer'] = perfor
-00008100: 6d65 720a 2020 2020 6966 2074 6974 6c65  mer.    if title
-00008110: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008120: 645b 2774 6974 6c65 275d 203d 2074 6974  d['title'] = tit
-00008130: 6c65 0a20 2020 2069 6620 7265 706c 795f  le.    if reply_
-00008140: 746f 5f6d 6573 7361 6765 5f69 643a 0a20  to_message_id:. 
-00008150: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00008160: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
-00008170: 5f69 6427 5d20 3d20 7265 706c 795f 746f  _id'] = reply_to
-00008180: 5f6d 6573 7361 6765 5f69 640a 2020 2020  _message_id.    
-00008190: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
-000081a0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000081b0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
-000081c0: 203d 2061 7761 6974 205f 636f 6e76 6572   = await _conver
-000081d0: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
-000081e0: 6172 6b75 7029 0a20 2020 2069 6620 7061  arkup).    if pa
-000081f0: 7273 655f 6d6f 6465 3a0a 2020 2020 2020  rse_mode:.      
-00008200: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
-00008210: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
-00008220: 6d6f 6465 0a20 2020 2069 6620 6469 7361  mode.    if disa
-00008230: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-00008240: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00008250: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
-00008260: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-00008270: 696f 6e27 5d20 3d20 6469 7361 626c 655f  ion'] = disable_
-00008280: 6e6f 7469 6669 6361 7469 6f6e 0a20 2020  notification.   
-00008290: 2069 6620 7469 6d65 6f75 743a 0a20 2020   if timeout:.   
-000082a0: 2020 2020 2070 6179 6c6f 6164 5b27 7469       payload['ti
-000082b0: 6d65 6f75 7427 5d20 3d20 7469 6d65 6f75  meout'] = timeou
-000082c0: 740a 2020 2020 6966 2074 6875 6d62 3a0a  t.    if thumb:.
-000082d0: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
-000082e0: 7469 6c2e 6973 5f73 7472 696e 6728 7468  til.is_string(th
-000082f0: 756d 6229 3a0a 2020 2020 2020 2020 2020  umb):.          
-00008300: 2020 6966 2066 696c 6573 3a0a 2020 2020    if files:.    
-00008310: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00008320: 735b 2774 6875 6d62 275d 203d 2074 6875  s['thumb'] = thu
-00008330: 6d62 0a20 2020 2020 2020 2020 2020 2065  mb.            e
-00008340: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00008350: 2020 2020 2066 696c 6573 203d 207b 2774       files = {'t
-00008360: 6875 6d62 273a 2074 6875 6d62 7d0a 2020  humb': thumb}.  
-00008370: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00008380: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008390: 2774 6875 6d62 275d 203d 2074 6875 6d62  'thumb'] = thumb
-000083a0: 0a20 2020 2069 6620 6361 7074 696f 6e5f  .    if caption_
-000083b0: 656e 7469 7469 6573 3a0a 2020 2020 2020  entities:.      
-000083c0: 2020 7061 796c 6f61 645b 2763 6170 7469    payload['capti
-000083d0: 6f6e 5f65 6e74 6974 6965 7327 5d20 3d20  on_entities'] = 
-000083e0: 6a73 6f6e 2e64 756d 7073 2874 7970 6573  json.dumps(types
-000083f0: 2e4d 6573 7361 6765 456e 7469 7479 2e74  .MessageEntity.t
-00008400: 6f5f 6c69 7374 5f6f 665f 6469 6374 7328  o_list_of_dicts(
-00008410: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00008420: 2929 0a20 2020 2069 6620 616c 6c6f 775f  )).    if allow_
-00008430: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-00008440: 7265 706c 7920 6973 206e 6f74 204e 6f6e  reply is not Non
-00008450: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00008460: 6164 5b27 616c 6c6f 775f 7365 6e64 696e  ad['allow_sendin
-00008470: 675f 7769 7468 6f75 745f 7265 706c 7927  g_without_reply'
-00008480: 5d20 3d20 616c 6c6f 775f 7365 6e64 696e  ] = allow_sendin
-00008490: 675f 7769 7468 6f75 745f 7265 706c 790a  g_without_reply.
-000084a0: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
-000084b0: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
-000084c0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-000084d0: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
-000084e0: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
-000084f0: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-00008500: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00008510: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00008520: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
-00008530: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
-00008540: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
-00008550: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-00008560: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-00008570: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-00008580: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-00008590: 2066 696c 6573 3d66 696c 6573 2c20 6d65   files=files, me
-000085a0: 7468 6f64 3d27 706f 7374 2729 0a0a 0a61  thod='post')...a
-000085b0: 7379 6e63 2064 6566 2073 656e 645f 6461  sync def send_da
-000085c0: 7461 2874 6f6b 656e 2c20 6368 6174 5f69  ta(token, chat_i
-000085d0: 642c 2064 6174 612c 2064 6174 615f 7479  d, data, data_ty
-000085e0: 7065 2c20 7265 706c 795f 746f 5f6d 6573  pe, reply_to_mes
-000085f0: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
-00008600: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-00008610: 2070 6172 7365 5f6d 6f64 653d 4e6f 6e65   parse_mode=None
-00008620: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00008630: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-00008640: 7469 6f6e 3d4e 6f6e 652c 2074 696d 656f  tion=None, timeo
-00008650: 7574 3d4e 6f6e 652c 2063 6170 7469 6f6e  ut=None, caption
-00008660: 3d4e 6f6e 652c 2074 6875 6d62 3d4e 6f6e  =None, thumb=Non
-00008670: 652c 2063 6170 7469 6f6e 5f65 6e74 6974  e, caption_entit
-00008680: 6965 733d 4e6f 6e65 2c0a 2020 2020 2020  ies=None,.      
-00008690: 2020 2020 2020 2020 616c 6c6f 775f 7365          allow_se
-000086a0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-000086b0: 706c 793d 4e6f 6e65 2c20 6469 7361 626c  ply=None, disabl
-000086c0: 655f 636f 6e74 656e 745f 7479 7065 5f64  e_content_type_d
-000086d0: 6574 6563 7469 6f6e 3d4e 6f6e 652c 2076  etection=None, v
-000086e0: 6973 6962 6c65 5f66 696c 655f 6e61 6d65  isible_file_name
-000086f0: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
-00008700: 6f6e 7465 6e74 3d4e 6f6e 652c 0a20 2020  ontent=None,.   
-00008710: 2020 2020 2020 2020 2020 206d 6573 7361             messa
-00008720: 6765 5f74 6872 6561 645f 6964 3d4e 6f6e  ge_thread_id=Non
-00008730: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-00008740: 726c 203d 2061 7761 6974 2067 6574 5f6d  rl = await get_m
-00008750: 6574 686f 645f 6279 5f74 7970 6528 6461  ethod_by_type(da
-00008760: 7461 5f74 7970 6529 0a20 2020 2070 6179  ta_type).    pay
-00008770: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00008780: 273a 2063 6861 745f 6964 7d0a 2020 2020  ': chat_id}.    
-00008790: 6669 6c65 7320 3d20 4e6f 6e65 0a20 2020  files = None.   
-000087a0: 2069 6620 6e6f 7420 7574 696c 2e69 735f   if not util.is_
-000087b0: 7374 7269 6e67 2864 6174 6129 3a0a 2020  string(data):.  
-000087c0: 2020 2020 2020 6669 6c65 5f64 6174 6120        file_data 
-000087d0: 3d20 6461 7461 0a20 2020 2020 2020 2069  = data.        i
-000087e0: 6620 7669 7369 626c 655f 6669 6c65 5f6e  f visible_file_n
-000087f0: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
-00008800: 2066 696c 655f 6461 7461 203d 2028 7669   file_data = (vi
-00008810: 7369 626c 655f 6669 6c65 5f6e 616d 652c  sible_file_name,
-00008820: 2064 6174 6129 0a20 2020 2020 2020 2066   data).        f
-00008830: 696c 6573 203d 207b 6461 7461 5f74 7970  iles = {data_typ
-00008840: 653a 2066 696c 655f 6461 7461 7d0a 2020  e: file_data}.  
-00008850: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00008860: 7061 796c 6f61 645b 6461 7461 5f74 7970  payload[data_typ
-00008870: 655d 203d 2064 6174 610a 2020 2020 6966  e] = data.    if
-00008880: 2072 6570 6c79 5f74 6f5f 6d65 7373 6167   reply_to_messag
-00008890: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-000088a0: 796c 6f61 645b 2772 6570 6c79 5f74 6f5f  yload['reply_to_
-000088b0: 6d65 7373 6167 655f 6964 275d 203d 2072  message_id'] = r
-000088c0: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
-000088d0: 6964 0a20 2020 2069 6620 7265 706c 795f  id.    if reply_
-000088e0: 6d61 726b 7570 3a0a 2020 2020 2020 2020  markup:.        
-000088f0: 7061 796c 6f61 645b 2772 6570 6c79 5f6d  payload['reply_m
-00008900: 6172 6b75 7027 5d20 3d20 6177 6169 7420  arkup'] = await 
-00008910: 5f63 6f6e 7665 7274 5f6d 6172 6b75 7028  _convert_markup(
-00008920: 7265 706c 795f 6d61 726b 7570 290a 2020  reply_markup).  
-00008930: 2020 6966 2070 6172 7365 5f6d 6f64 6520    if parse_mode 
-00008940: 616e 6420 6461 7461 5f74 7970 6520 3d3d  and data_type ==
-00008950: 2027 646f 6375 6d65 6e74 273a 0a20 2020   'document':.   
-00008960: 2020 2020 2070 6179 6c6f 6164 5b27 7061       payload['pa
-00008970: 7273 655f 6d6f 6465 275d 203d 2070 6172  rse_mode'] = par
-00008980: 7365 5f6d 6f64 650a 2020 2020 6966 2064  se_mode.    if d
-00008990: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
-000089a0: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
-000089b0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-000089c0: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
-000089d0: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
-000089e0: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0a  le_notification.
-000089f0: 2020 2020 6966 2074 696d 656f 7574 3a0a      if timeout:.
-00008a00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00008a10: 2774 696d 656f 7574 275d 203d 2074 696d  'timeout'] = tim
-00008a20: 656f 7574 0a20 2020 2069 6620 6361 7074  eout.    if capt
-00008a30: 696f 6e3a 0a20 2020 2020 2020 2070 6179  ion:.        pay
-00008a40: 6c6f 6164 5b27 6361 7074 696f 6e27 5d20  load['caption'] 
-00008a50: 3d20 6361 7074 696f 6e0a 2020 2020 6966  = caption.    if
-00008a60: 2074 6875 6d62 3a0a 2020 2020 2020 2020   thumb:.        
-00008a70: 6966 206e 6f74 2075 7469 6c2e 6973 5f73  if not util.is_s
-00008a80: 7472 696e 6728 7468 756d 6229 3a0a 2020  tring(thumb):.  
-00008a90: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
-00008aa0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00008ab0: 2020 2020 6669 6c65 735b 2774 6875 6d62      files['thumb
-00008ac0: 275d 203d 2074 6875 6d62 0a20 2020 2020  '] = thumb.     
-00008ad0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00008ae0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00008af0: 6573 203d 207b 2774 6875 6d62 273a 2074  es = {'thumb': t
-00008b00: 6875 6d62 7d0a 2020 2020 2020 2020 656c  humb}.        el
-00008b10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00008b20: 7061 796c 6f61 645b 2774 6875 6d62 275d  payload['thumb']
-00008b30: 203d 2074 6875 6d62 0a20 2020 2069 6620   = thumb.    if 
-00008b40: 6361 7074 696f 6e5f 656e 7469 7469 6573  caption_entities
-00008b50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008b60: 645b 2763 6170 7469 6f6e 5f65 6e74 6974  d['caption_entit
-00008b70: 6965 7327 5d20 3d20 6a73 6f6e 2e64 756d  ies'] = json.dum
-00008b80: 7073 2874 7970 6573 2e4d 6573 7361 6765  ps(types.Message
-00008b90: 456e 7469 7479 2e74 6f5f 6c69 7374 5f6f  Entity.to_list_o
-00008ba0: 665f 6469 6374 7328 6361 7074 696f 6e5f  f_dicts(caption_
-00008bb0: 656e 7469 7469 6573 2929 0a20 2020 2069  entities)).    i
-00008bc0: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
-00008bd0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
-00008be0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00008bf0: 2020 2070 6179 6c6f 6164 5b27 616c 6c6f     payload['allo
-00008c00: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00008c10: 745f 7265 706c 7927 5d20 3d20 616c 6c6f  t_reply'] = allo
-00008c20: 775f 7365 6e64 696e 675f 7769 7468 6f75  w_sending_withou
-00008c30: 745f 7265 706c 790a 2020 2020 6966 2070  t_reply.    if p
-00008c40: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
-00008c50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00008c60: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
-00008c70: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
-00008c80: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
-00008c90: 0a20 2020 2069 6620 6d65 7468 6f64 5f75  .    if method_u
-00008ca0: 726c 203d 3d20 2773 656e 6444 6f63 756d  rl == 'sendDocum
-00008cb0: 656e 7427 2061 6e64 2064 6973 6162 6c65  ent' and disable
-00008cc0: 5f63 6f6e 7465 6e74 5f74 7970 655f 6465  _content_type_de
-00008cd0: 7465 6374 696f 6e20 6973 206e 6f74 204e  tection is not N
-00008ce0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00008cf0: 6c6f 6164 5b27 6469 7361 626c 655f 636f  load['disable_co
-00008d00: 6e74 656e 745f 7479 7065 5f64 6574 6563  ntent_type_detec
-00008d10: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-00008d20: 5f63 6f6e 7465 6e74 5f74 7970 655f 6465  _content_type_de
-00008d30: 7465 6374 696f 6e0a 2020 2020 6966 206d  tection.    if m
-00008d40: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00008d50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008d60: 645b 276d 6573 7361 6765 5f74 6872 6561  d['message_threa
-00008d70: 645f 6964 275d 203d 206d 6573 7361 6765  d_id'] = message
-00008d80: 5f74 6872 6561 645f 6964 0a20 2020 2072  _thread_id.    r
-00008d90: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-00008da0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-00008db0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-00008dc0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-00008dd0: 6669 6c65 733d 6669 6c65 732c 206d 6574  files=files, met
-00008de0: 686f 643d 2770 6f73 7427 290a 0a0a 6173  hod='post')...as
-00008df0: 796e 6320 6465 6620 6765 745f 6d65 7468  ync def get_meth
-00008e00: 6f64 5f62 795f 7479 7065 2864 6174 615f  od_by_type(data_
-00008e10: 7479 7065 293a 0a20 2020 2069 6620 6461  type):.    if da
-00008e20: 7461 5f74 7970 6520 3d3d 2027 646f 6375  ta_type == 'docu
-00008e30: 6d65 6e74 273a 0a20 2020 2020 2020 2072  ment':.        r
-00008e40: 6574 7572 6e20 7227 7365 6e64 446f 6375  eturn r'sendDocu
-00008e50: 6d65 6e74 270a 2020 2020 6966 2064 6174  ment'.    if dat
-00008e60: 615f 7479 7065 203d 3d20 2773 7469 636b  a_type == 'stick
-00008e70: 6572 273a 0a20 2020 2020 2020 2072 6574  er':.        ret
-00008e80: 7572 6e20 7227 7365 6e64 5374 6963 6b65  urn r'sendSticke
-00008e90: 7227 0a0a 0a61 7379 6e63 2064 6566 2062  r'...async def b
-00008ea0: 616e 5f63 6861 745f 6d65 6d62 6572 2874  an_chat_member(t
-00008eb0: 6f6b 656e 2c20 6368 6174 5f69 642c 2075  oken, chat_id, u
-00008ec0: 7365 725f 6964 2c20 756e 7469 6c5f 6461  ser_id, until_da
-00008ed0: 7465 3d4e 6f6e 652c 2072 6576 6f6b 655f  te=None, revoke_
-00008ee0: 6d65 7373 6167 6573 3d4e 6f6e 6529 3a0a  messages=None):.
-00008ef0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00008f00: 2027 6261 6e43 6861 744d 656d 6265 7227   'banChatMember'
-00008f10: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-00008f20: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-00008f30: 6964 2c20 2775 7365 725f 6964 273a 2075  id, 'user_id': u
-00008f40: 7365 725f 6964 7d0a 2020 2020 6966 2069  ser_id}.    if i
-00008f50: 7369 6e73 7461 6e63 6528 756e 7469 6c5f  sinstance(until_
-00008f60: 6461 7465 2c20 6461 7465 7469 6d65 293a  date, datetime):
-00008f70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00008f80: 5b27 756e 7469 6c5f 6461 7465 275d 203d  ['until_date'] =
-00008f90: 2075 6e74 696c 5f64 6174 652e 7469 6d65   until_date.time
-00008fa0: 7374 616d 7028 290a 2020 2020 656c 7365  stamp().    else
-00008fb0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00008fc0: 645b 2775 6e74 696c 5f64 6174 6527 5d20  d['until_date'] 
-00008fd0: 3d20 756e 7469 6c5f 6461 7465 0a20 2020  = until_date.   
-00008fe0: 2069 6620 7265 766f 6b65 5f6d 6573 7361   if revoke_messa
-00008ff0: 6765 7320 6973 206e 6f74 204e 6f6e 653a  ges is not None:
-00009000: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009010: 5b27 7265 766f 6b65 5f6d 6573 7361 6765  ['revoke_message
-00009020: 7327 5d20 3d20 7265 766f 6b65 5f6d 6573  s'] = revoke_mes
-00009030: 7361 6765 730a 2020 2020 7265 7475 726e  sages.    return
-00009040: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00009050: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-00009060: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-00009070: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-00009080: 643d 2770 6f73 7427 290a 0a0a 6173 796e  d='post')...asyn
-00009090: 6320 6465 6620 756e 6261 6e5f 6368 6174  c def unban_chat
-000090a0: 5f6d 656d 6265 7228 746f 6b65 6e2c 2063  _member(token, c
-000090b0: 6861 745f 6964 2c20 7573 6572 5f69 642c  hat_id, user_id,
-000090c0: 206f 6e6c 795f 6966 5f62 616e 6e65 6429   only_if_banned)
-000090d0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-000090e0: 203d 2027 756e 6261 6e43 6861 744d 656d   = 'unbanChatMem
-000090f0: 6265 7227 0a20 2020 2070 6179 6c6f 6164  ber'.    payload
-00009100: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
-00009110: 6861 745f 6964 2c20 2775 7365 725f 6964  hat_id, 'user_id
-00009120: 273a 2075 7365 725f 6964 7d0a 2020 2020  ': user_id}.    
-00009130: 6966 206f 6e6c 795f 6966 5f62 616e 6e65  if only_if_banne
-00009140: 6420 6973 206e 6f74 204e 6f6e 653a 2020  d is not None:  
-00009150: 2320 4e6f 6e65 202f 2054 7275 6520 2f20  # None / True / 
-00009160: 4661 6c73 650a 2020 2020 2020 2020 7061  False.        pa
-00009170: 796c 6f61 645b 276f 6e6c 795f 6966 5f62  yload['only_if_b
-00009180: 616e 6e65 6427 5d20 3d20 6f6e 6c79 5f69  anned'] = only_i
-00009190: 665f 6261 6e6e 6564 0a20 2020 2072 6574  f_banned.    ret
-000091a0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-000091b0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-000091c0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-000091d0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-000091e0: 7468 6f64 3d27 706f 7374 2729 0a0a 0a61  thod='post')...a
-000091f0: 7379 6e63 2064 6566 2072 6573 7472 6963  sync def restric
-00009200: 745f 6368 6174 5f6d 656d 6265 7228 0a20  t_chat_member(. 
-00009210: 2020 2020 2020 2074 6f6b 656e 2c20 6368         token, ch
-00009220: 6174 5f69 642c 2075 7365 725f 6964 2c20  at_id, user_id, 
-00009230: 756e 7469 6c5f 6461 7465 3d4e 6f6e 652c  until_date=None,
-00009240: 0a20 2020 2020 2020 2063 616e 5f73 656e  .        can_sen
-00009250: 645f 6d65 7373 6167 6573 3d4e 6f6e 652c  d_messages=None,
-00009260: 2063 616e 5f73 656e 645f 6d65 6469 615f   can_send_media_
-00009270: 6d65 7373 6167 6573 3d4e 6f6e 652c 0a20  messages=None,. 
-00009280: 2020 2020 2020 2063 616e 5f73 656e 645f         can_send_
-00009290: 706f 6c6c 733d 4e6f 6e65 2c20 6361 6e5f  polls=None, can_
-000092a0: 7365 6e64 5f6f 7468 6572 5f6d 6573 7361  send_other_messa
-000092b0: 6765 733d 4e6f 6e65 2c0a 2020 2020 2020  ges=None,.      
-000092c0: 2020 6361 6e5f 6164 645f 7765 625f 7061    can_add_web_pa
-000092d0: 6765 5f70 7265 7669 6577 733d 4e6f 6e65  ge_previews=None
-000092e0: 2c20 6361 6e5f 6368 616e 6765 5f69 6e66  , can_change_inf
-000092f0: 6f3d 4e6f 6e65 2c0a 2020 2020 2020 2020  o=None,.        
-00009300: 6361 6e5f 696e 7669 7465 5f75 7365 7273  can_invite_users
-00009310: 3d4e 6f6e 652c 2063 616e 5f70 696e 5f6d  =None, can_pin_m
-00009320: 6573 7361 6765 733d 4e6f 6e65 293a 0a20  essages=None):. 
-00009330: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-00009340: 2772 6573 7472 6963 7443 6861 744d 656d  'restrictChatMem
-00009350: 6265 7227 0a20 2020 2070 6572 6d69 7373  ber'.    permiss
-00009360: 696f 6e73 203d 207b 7d0a 2020 2020 6966  ions = {}.    if
-00009370: 2063 616e 5f73 656e 645f 6d65 7373 6167   can_send_messag
-00009380: 6573 2069 7320 6e6f 7420 4e6f 6e65 3a0a  es is not None:.
-00009390: 2020 2020 2020 2020 7065 726d 6973 7369          permissi
-000093a0: 6f6e 735b 2763 616e 5f73 656e 645f 6d65  ons['can_send_me
-000093b0: 7373 6167 6573 275d 203d 2063 616e 5f73  ssages'] = can_s
-000093c0: 656e 645f 6d65 7373 6167 6573 0a20 2020  end_messages.   
-000093d0: 2069 6620 6361 6e5f 7365 6e64 5f6d 6564   if can_send_med
-000093e0: 6961 5f6d 6573 7361 6765 7320 6973 206e  ia_messages is n
-000093f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00009400: 2070 6572 6d69 7373 696f 6e73 5b27 6361   permissions['ca
-00009410: 6e5f 7365 6e64 5f6d 6564 6961 5f6d 6573  n_send_media_mes
-00009420: 7361 6765 7327 5d20 3d20 6361 6e5f 7365  sages'] = can_se
-00009430: 6e64 5f6d 6564 6961 5f6d 6573 7361 6765  nd_media_message
-00009440: 730a 2020 2020 6966 2063 616e 5f73 656e  s.    if can_sen
-00009450: 645f 706f 6c6c 7320 6973 206e 6f74 204e  d_polls is not N
-00009460: 6f6e 653a 0a20 2020 2020 2020 2070 6572  one:.        per
-00009470: 6d69 7373 696f 6e73 5b27 6361 6e5f 7365  missions['can_se
-00009480: 6e64 5f70 6f6c 6c73 275d 203d 2063 616e  nd_polls'] = can
-00009490: 5f73 656e 645f 706f 6c6c 730a 2020 2020  _send_polls.    
-000094a0: 6966 2063 616e 5f73 656e 645f 6f74 6865  if can_send_othe
-000094b0: 725f 6d65 7373 6167 6573 2069 7320 6e6f  r_messages is no
-000094c0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000094d0: 7065 726d 6973 7369 6f6e 735b 2763 616e  permissions['can
-000094e0: 5f73 656e 645f 6f74 6865 725f 6d65 7373  _send_other_mess
-000094f0: 6167 6573 275d 203d 2063 616e 5f73 656e  ages'] = can_sen
-00009500: 645f 6f74 6865 725f 6d65 7373 6167 6573  d_other_messages
-00009510: 0a20 2020 2069 6620 6361 6e5f 6164 645f  .    if can_add_
-00009520: 7765 625f 7061 6765 5f70 7265 7669 6577  web_page_preview
-00009530: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00009540: 2020 2020 2020 2070 6572 6d69 7373 696f         permissio
-00009550: 6e73 5b27 6361 6e5f 6164 645f 7765 625f  ns['can_add_web_
-00009560: 7061 6765 5f70 7265 7669 6577 7327 5d20  page_previews'] 
-00009570: 3d20 6361 6e5f 6164 645f 7765 625f 7061  = can_add_web_pa
-00009580: 6765 5f70 7265 7669 6577 730a 2020 2020  ge_previews.    
-00009590: 6966 2063 616e 5f63 6861 6e67 655f 696e  if can_change_in
-000095a0: 666f 2069 7320 6e6f 7420 4e6f 6e65 3a0a  fo is not None:.
-000095b0: 2020 2020 2020 2020 7065 726d 6973 7369          permissi
-000095c0: 6f6e 735b 2763 616e 5f63 6861 6e67 655f  ons['can_change_
-000095d0: 696e 666f 275d 203d 2063 616e 5f63 6861  info'] = can_cha
-000095e0: 6e67 655f 696e 666f 0a20 2020 2069 6620  nge_info.    if 
-000095f0: 6361 6e5f 696e 7669 7465 5f75 7365 7273  can_invite_users
-00009600: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00009610: 2020 2020 2020 7065 726d 6973 7369 6f6e        permission
-00009620: 735b 2763 616e 5f69 6e76 6974 655f 7573  s['can_invite_us
-00009630: 6572 7327 5d20 3d20 6361 6e5f 696e 7669  ers'] = can_invi
-00009640: 7465 5f75 7365 7273 0a20 2020 2069 6620  te_users.    if 
-00009650: 6361 6e5f 7069 6e5f 6d65 7373 6167 6573  can_pin_messages
-00009660: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00009670: 2020 2020 2020 7065 726d 6973 7369 6f6e        permission
-00009680: 735b 2763 616e 5f70 696e 5f6d 6573 7361  s['can_pin_messa
-00009690: 6765 7327 5d20 3d20 6361 6e5f 7069 6e5f  ges'] = can_pin_
-000096a0: 6d65 7373 6167 6573 0a20 2020 2070 6572  messages.    per
-000096b0: 6d69 7373 696f 6e73 5f6a 736f 6e20 3d20  missions_json = 
-000096c0: 6a73 6f6e 2e64 756d 7073 2870 6572 6d69  json.dumps(permi
-000096d0: 7373 696f 6e73 290a 2020 2020 7061 796c  ssions).    payl
-000096e0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-000096f0: 3a20 6368 6174 5f69 642c 2027 7573 6572  : chat_id, 'user
-00009700: 5f69 6427 3a20 7573 6572 5f69 642c 2027  _id': user_id, '
-00009710: 7065 726d 6973 7369 6f6e 7327 3a20 7065  permissions': pe
-00009720: 726d 6973 7369 6f6e 735f 6a73 6f6e 7d0a  rmissions_json}.
-00009730: 2020 2020 6966 2075 6e74 696c 5f64 6174      if until_dat
-00009740: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00009750: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00009760: 616e 6365 2875 6e74 696c 5f64 6174 652c  ance(until_date,
-00009770: 2064 6174 6574 696d 6529 3a0a 2020 2020   datetime):.    
-00009780: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-00009790: 2775 6e74 696c 5f64 6174 6527 5d20 3d20  'until_date'] = 
-000097a0: 756e 7469 6c5f 6461 7465 2e74 696d 6573  until_date.times
-000097b0: 7461 6d70 2829 0a20 2020 2020 2020 2065  tamp().        e
-000097c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000097d0: 2070 6179 6c6f 6164 5b27 756e 7469 6c5f   payload['until_
-000097e0: 6461 7465 275d 203d 2075 6e74 696c 5f64  date'] = until_d
-000097f0: 6174 650a 2020 2020 7265 7475 726e 2061  ate.    return a
-00009800: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-00009810: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-00009820: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-00009830: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-00009840: 2770 6f73 7427 290a 0a0a 6173 796e 6320  'post')...async 
-00009850: 6465 6620 7072 6f6d 6f74 655f 6368 6174  def promote_chat
-00009860: 5f6d 656d 6265 7228 0a20 2020 2020 2020  _member(.       
-00009870: 2074 6f6b 656e 2c20 6368 6174 5f69 642c   token, chat_id,
-00009880: 2075 7365 725f 6964 2c20 6361 6e5f 6368   user_id, can_ch
-00009890: 616e 6765 5f69 6e66 6f3d 4e6f 6e65 2c20  ange_info=None, 
-000098a0: 6361 6e5f 706f 7374 5f6d 6573 7361 6765  can_post_message
-000098b0: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-000098c0: 6361 6e5f 6564 6974 5f6d 6573 7361 6765  can_edit_message
-000098d0: 733d 4e6f 6e65 2c20 6361 6e5f 6465 6c65  s=None, can_dele
-000098e0: 7465 5f6d 6573 7361 6765 733d 4e6f 6e65  te_messages=None
-000098f0: 2c20 6361 6e5f 696e 7669 7465 5f75 7365  , can_invite_use
-00009900: 7273 3d4e 6f6e 652c 0a20 2020 2020 2020  rs=None,.       
-00009910: 2063 616e 5f72 6573 7472 6963 745f 6d65   can_restrict_me
-00009920: 6d62 6572 733d 4e6f 6e65 2c20 6361 6e5f  mbers=None, can_
-00009930: 7069 6e5f 6d65 7373 6167 6573 3d4e 6f6e  pin_messages=Non
-00009940: 652c 2063 616e 5f70 726f 6d6f 7465 5f6d  e, can_promote_m
-00009950: 656d 6265 7273 3d4e 6f6e 652c 0a20 2020  embers=None,.   
-00009960: 2020 2020 2069 735f 616e 6f6e 796d 6f75       is_anonymou
-00009970: 733d 4e6f 6e65 2c20 6361 6e5f 6d61 6e61  s=None, can_mana
-00009980: 6765 5f63 6861 743d 4e6f 6e65 2c20 6361  ge_chat=None, ca
-00009990: 6e5f 6d61 6e61 6765 5f76 6964 656f 5f63  n_manage_video_c
-000099a0: 6861 7473 3d4e 6f6e 652c 2063 616e 5f6d  hats=None, can_m
-000099b0: 616e 6167 655f 746f 7069 6373 3d4e 6f6e  anage_topics=Non
-000099c0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-000099d0: 726c 203d 2027 7072 6f6d 6f74 6543 6861  rl = 'promoteCha
-000099e0: 744d 656d 6265 7227 0a20 2020 2070 6179  tMember'.    pay
-000099f0: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-00009a00: 273a 2063 6861 745f 6964 2c20 2775 7365  ': chat_id, 'use
-00009a10: 725f 6964 273a 2075 7365 725f 6964 7d0a  r_id': user_id}.
-00009a20: 2020 2020 6966 2063 616e 5f63 6861 6e67      if can_chang
-00009a30: 655f 696e 666f 2069 7320 6e6f 7420 4e6f  e_info is not No
-00009a40: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00009a50: 6f61 645b 2763 616e 5f63 6861 6e67 655f  oad['can_change_
-00009a60: 696e 666f 275d 203d 2063 616e 5f63 6861  info'] = can_cha
-00009a70: 6e67 655f 696e 666f 0a20 2020 2069 6620  nge_info.    if 
-00009a80: 6361 6e5f 706f 7374 5f6d 6573 7361 6765  can_post_message
-00009a90: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00009aa0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00009ab0: 6361 6e5f 706f 7374 5f6d 6573 7361 6765  can_post_message
-00009ac0: 7327 5d20 3d20 6361 6e5f 706f 7374 5f6d  s'] = can_post_m
-00009ad0: 6573 7361 6765 730a 2020 2020 6966 2063  essages.    if c
-00009ae0: 616e 5f65 6469 745f 6d65 7373 6167 6573  an_edit_messages
-00009af0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00009b00: 2020 2020 2020 7061 796c 6f61 645b 2763        payload['c
-00009b10: 616e 5f65 6469 745f 6d65 7373 6167 6573  an_edit_messages
-00009b20: 275d 203d 2063 616e 5f65 6469 745f 6d65  '] = can_edit_me
-00009b30: 7373 6167 6573 0a20 2020 2069 6620 6361  ssages.    if ca
-00009b40: 6e5f 6465 6c65 7465 5f6d 6573 7361 6765  n_delete_message
-00009b50: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00009b60: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00009b70: 6361 6e5f 6465 6c65 7465 5f6d 6573 7361  can_delete_messa
-00009b80: 6765 7327 5d20 3d20 6361 6e5f 6465 6c65  ges'] = can_dele
-00009b90: 7465 5f6d 6573 7361 6765 730a 2020 2020  te_messages.    
-00009ba0: 6966 2063 616e 5f69 6e76 6974 655f 7573  if can_invite_us
-00009bb0: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
-00009bc0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009bd0: 5b27 6361 6e5f 696e 7669 7465 5f75 7365  ['can_invite_use
-00009be0: 7273 275d 203d 2063 616e 5f69 6e76 6974  rs'] = can_invit
-00009bf0: 655f 7573 6572 730a 2020 2020 6966 2063  e_users.    if c
-00009c00: 616e 5f72 6573 7472 6963 745f 6d65 6d62  an_restrict_memb
-00009c10: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
-00009c20: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00009c30: 5b27 6361 6e5f 7265 7374 7269 6374 5f6d  ['can_restrict_m
-00009c40: 656d 6265 7273 275d 203d 2063 616e 5f72  embers'] = can_r
-00009c50: 6573 7472 6963 745f 6d65 6d62 6572 730a  estrict_members.
-00009c60: 2020 2020 6966 2063 616e 5f70 696e 5f6d      if can_pin_m
-00009c70: 6573 7361 6765 7320 6973 206e 6f74 204e  essages is not N
-00009c80: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00009c90: 6c6f 6164 5b27 6361 6e5f 7069 6e5f 6d65  load['can_pin_me
-00009ca0: 7373 6167 6573 275d 203d 2063 616e 5f70  ssages'] = can_p
-00009cb0: 696e 5f6d 6573 7361 6765 730a 2020 2020  in_messages.    
-00009cc0: 6966 2063 616e 5f70 726f 6d6f 7465 5f6d  if can_promote_m
-00009cd0: 656d 6265 7273 2069 7320 6e6f 7420 4e6f  embers is not No
-00009ce0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00009cf0: 6f61 645b 2763 616e 5f70 726f 6d6f 7465  oad['can_promote
-00009d00: 5f6d 656d 6265 7273 275d 203d 2063 616e  _members'] = can
-00009d10: 5f70 726f 6d6f 7465 5f6d 656d 6265 7273  _promote_members
-00009d20: 0a20 2020 2069 6620 6973 5f61 6e6f 6e79  .    if is_anony
-00009d30: 6d6f 7573 2069 7320 6e6f 7420 4e6f 6e65  mous is not None
-00009d40: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00009d50: 645b 2769 735f 616e 6f6e 796d 6f75 7327  d['is_anonymous'
-00009d60: 5d20 3d20 6973 5f61 6e6f 6e79 6d6f 7573  ] = is_anonymous
-00009d70: 0a20 2020 2069 6620 6361 6e5f 6d61 6e61  .    if can_mana
-00009d80: 6765 5f63 6861 7420 6973 206e 6f74 204e  ge_chat is not N
-00009d90: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00009da0: 6c6f 6164 5b27 6361 6e5f 6d61 6e61 6765  load['can_manage
-00009db0: 5f63 6861 7427 5d20 3d20 6361 6e5f 6d61  _chat'] = can_ma
-00009dc0: 6e61 6765 5f63 6861 740a 2020 2020 6966  nage_chat.    if
-00009dd0: 2063 616e 5f6d 616e 6167 655f 7669 6465   can_manage_vide
-00009de0: 6f5f 6368 6174 7320 6973 206e 6f74 204e  o_chats is not N
-00009df0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-00009e00: 6c6f 6164 5b27 6361 6e5f 6d61 6e61 6765  load['can_manage
-00009e10: 5f76 6964 656f 5f63 6861 7473 275d 203d  _video_chats'] =
-00009e20: 2063 616e 5f6d 616e 6167 655f 7669 6465   can_manage_vide
-00009e30: 6f5f 6368 6174 730a 2020 2020 6966 2063  o_chats.    if c
-00009e40: 616e 5f6d 616e 6167 655f 746f 7069 6373  an_manage_topics
-00009e50: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00009e60: 2020 2020 2020 7061 796c 6f61 645b 2763        payload['c
-00009e70: 616e 5f6d 616e 6167 655f 746f 7069 6373  an_manage_topics
-00009e80: 275d 203d 2063 616e 5f6d 616e 6167 655f  '] = can_manage_
-00009e90: 746f 7069 6373 0a20 2020 2072 6574 7572  topics.    retur
-00009ea0: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-00009eb0: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-00009ec0: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-00009ed0: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
-00009ee0: 6f64 3d27 706f 7374 2729 0a0a 0a61 7379  od='post')...asy
-00009ef0: 6e63 2064 6566 2073 6574 5f63 6861 745f  nc def set_chat_
-00009f00: 6164 6d69 6e69 7374 7261 746f 725f 6375  administrator_cu
-00009f10: 7374 6f6d 5f74 6974 6c65 2874 6f6b 656e  stom_title(token
-00009f20: 2c20 6368 6174 5f69 642c 2075 7365 725f  , chat_id, user_
-00009f30: 6964 2c20 6375 7374 6f6d 5f74 6974 6c65  id, custom_title
-00009f40: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00009f50: 6c20 3d20 2773 6574 4368 6174 4164 6d69  l = 'setChatAdmi
-00009f60: 6e69 7374 7261 746f 7243 7573 746f 6d54  nistratorCustomT
-00009f70: 6974 6c65 270a 2020 2020 7061 796c 6f61  itle'.    payloa
-00009f80: 6420 3d20 7b0a 2020 2020 2020 2020 2763  d = {.        'c
-00009f90: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-00009fa0: 2c20 2775 7365 725f 6964 273a 2075 7365  , 'user_id': use
-00009fb0: 725f 6964 2c20 2763 7573 746f 6d5f 7469  r_id, 'custom_ti
-00009fc0: 746c 6527 3a20 6375 7374 6f6d 5f74 6974  tle': custom_tit
-00009fd0: 6c65 0a20 2020 207d 0a20 2020 2072 6574  le.    }.    ret
-00009fe0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-00009ff0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000a000: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000a010: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a020: 7468 6f64 3d27 706f 7374 2729 0a0a 0a61  thod='post')...a
-0000a030: 7379 6e63 2064 6566 2062 616e 5f63 6861  sync def ban_cha
-0000a040: 745f 7365 6e64 6572 5f63 6861 7428 746f  t_sender_chat(to
-0000a050: 6b65 6e2c 2063 6861 745f 6964 2c20 7365  ken, chat_id, se
-0000a060: 6e64 6572 5f63 6861 745f 6964 293a 0a20  nder_chat_id):. 
-0000a070: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000a080: 2762 616e 4368 6174 5365 6e64 6572 4368  'banChatSenderCh
-0000a090: 6174 270a 2020 2020 7061 796c 6f61 6420  at'.    payload 
-0000a0a0: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
-0000a0b0: 6174 5f69 642c 2027 7365 6e64 6572 5f63  at_id, 'sender_c
-0000a0c0: 6861 745f 6964 273a 2073 656e 6465 725f  hat_id': sender_
-0000a0d0: 6368 6174 5f69 647d 0a20 2020 2072 6574  chat_id}.    ret
-0000a0e0: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000a0f0: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000a100: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000a110: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000a120: 7468 6f64 3d27 706f 7374 2729 0a0a 0a61  thod='post')...a
-0000a130: 7379 6e63 2064 6566 2075 6e62 616e 5f63  sync def unban_c
-0000a140: 6861 745f 7365 6e64 6572 5f63 6861 7428  hat_sender_chat(
-0000a150: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000a160: 7365 6e64 6572 5f63 6861 745f 6964 293a  sender_chat_id):
-0000a170: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000a180: 3d20 2775 6e62 616e 4368 6174 5365 6e64  = 'unbanChatSend
-0000a190: 6572 4368 6174 270a 2020 2020 7061 796c  erChat'.    payl
-0000a1a0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-0000a1b0: 3a20 6368 6174 5f69 642c 2027 7365 6e64  : chat_id, 'send
-0000a1c0: 6572 5f63 6861 745f 6964 273a 2073 656e  er_chat_id': sen
-0000a1d0: 6465 725f 6368 6174 5f69 647d 0a20 2020  der_chat_id}.   
-0000a1e0: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-0000a1f0: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-0000a200: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-0000a210: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-0000a220: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
-0000a230: 0a0a 6173 796e 6320 6465 6620 7365 745f  ..async def set_
-0000a240: 6368 6174 5f70 6572 6d69 7373 696f 6e73  chat_permissions
-0000a250: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
-0000a260: 2070 6572 6d69 7373 696f 6e73 293a 0a20   permissions):. 
-0000a270: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000a280: 2773 6574 4368 6174 5065 726d 6973 7369  'setChatPermissi
-0000a290: 6f6e 7327 0a20 2020 2070 6179 6c6f 6164  ons'.    payload
-0000a2a0: 203d 207b 0a20 2020 2020 2020 2027 6368   = {.        'ch
-0000a2b0: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-0000a2c0: 0a20 2020 2020 2020 2027 7065 726d 6973  .        'permis
-0000a2d0: 7369 6f6e 7327 3a20 7065 726d 6973 7369  sions': permissi
-0000a2e0: 6f6e 732e 746f 5f6a 736f 6e28 290a 2020  ons.to_json().  
-0000a2f0: 2020 7d0a 2020 2020 7265 7475 726e 2061    }.    return a
-0000a300: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000a310: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000a320: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000a330: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000a340: 2770 6f73 7427 290a 0a0a 6173 796e 6320  'post')...async 
-0000a350: 6465 6620 6372 6561 7465 5f63 6861 745f  def create_chat_
-0000a360: 696e 7669 7465 5f6c 696e 6b28 746f 6b65  invite_link(toke
-0000a370: 6e2c 2063 6861 745f 6964 2c20 6e61 6d65  n, chat_id, name
-0000a380: 2c20 6578 7069 7265 5f64 6174 652c 206d  , expire_date, m
-0000a390: 656d 6265 725f 6c69 6d69 742c 2063 7265  ember_limit, cre
-0000a3a0: 6174 6573 5f6a 6f69 6e5f 7265 7175 6573  ates_join_reques
-0000a3b0: 7429 3a0a 2020 2020 6d65 7468 6f64 5f75  t):.    method_u
-0000a3c0: 726c 203d 2027 6372 6561 7465 4368 6174  rl = 'createChat
-0000a3d0: 496e 7669 7465 4c69 6e6b 270a 2020 2020  InviteLink'.    
-0000a3e0: 7061 796c 6f61 6420 3d20 7b0a 2020 2020  payload = {.    
-0000a3f0: 2020 2020 2763 6861 745f 6964 273a 2063      'chat_id': c
-0000a400: 6861 745f 6964 0a20 2020 207d 0a0a 2020  hat_id.    }..  
-0000a410: 2020 6966 2065 7870 6972 655f 6461 7465    if expire_date
-0000a420: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000a430: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000a440: 6e63 6528 6578 7069 7265 5f64 6174 652c  nce(expire_date,
-0000a450: 2064 6174 6574 696d 6529 3a0a 2020 2020   datetime):.    
-0000a460: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000a470: 2765 7870 6972 655f 6461 7465 275d 203d  'expire_date'] =
-0000a480: 2065 7870 6972 655f 6461 7465 2e74 696d   expire_date.tim
-0000a490: 6573 7461 6d70 2829 0a20 2020 2020 2020  estamp().       
-0000a4a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000a4b0: 2020 2070 6179 6c6f 6164 5b27 6578 7069     payload['expi
-0000a4c0: 7265 5f64 6174 6527 5d20 3d20 6578 7069  re_date'] = expi
-0000a4d0: 7265 5f64 6174 650a 2020 2020 6966 206d  re_date.    if m
-0000a4e0: 656d 6265 725f 6c69 6d69 743a 0a20 2020  ember_limit:.   
-0000a4f0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-0000a500: 6d62 6572 5f6c 696d 6974 275d 203d 206d  mber_limit'] = m
-0000a510: 656d 6265 725f 6c69 6d69 740a 2020 2020  ember_limit.    
-0000a520: 6966 2063 7265 6174 6573 5f6a 6f69 6e5f  if creates_join_
-0000a530: 7265 7175 6573 7420 6973 206e 6f74 204e  request is not N
-0000a540: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000a550: 6c6f 6164 5b27 6372 6561 7465 735f 6a6f  load['creates_jo
-0000a560: 696e 5f72 6571 7565 7374 275d 203d 2063  in_request'] = c
-0000a570: 7265 6174 6573 5f6a 6f69 6e5f 7265 7175  reates_join_requ
-0000a580: 6573 740a 2020 2020 6966 206e 616d 653a  est.    if name:
-0000a590: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000a5a0: 5b27 6e61 6d65 275d 203d 206e 616d 650a  ['name'] = name.
-0000a5b0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000a5c0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000a5d0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000a5e0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000a5f0: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000a600: 7374 2729 0a0a 0a61 7379 6e63 2064 6566  st')...async def
-0000a610: 2065 6469 745f 6368 6174 5f69 6e76 6974   edit_chat_invit
-0000a620: 655f 6c69 6e6b 2874 6f6b 656e 2c20 6368  e_link(token, ch
-0000a630: 6174 5f69 642c 2069 6e76 6974 655f 6c69  at_id, invite_li
-0000a640: 6e6b 2c20 6e61 6d65 2c20 6578 7069 7265  nk, name, expire
-0000a650: 5f64 6174 652c 206d 656d 6265 725f 6c69  _date, member_li
-0000a660: 6d69 742c 2063 7265 6174 6573 5f6a 6f69  mit, creates_joi
-0000a670: 6e5f 7265 7175 6573 7429 3a0a 2020 2020  n_request):.    
-0000a680: 6d65 7468 6f64 5f75 726c 203d 2027 6564  method_url = 'ed
-0000a690: 6974 4368 6174 496e 7669 7465 4c69 6e6b  itChatInviteLink
-0000a6a0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000a6b0: 7b0a 2020 2020 2020 2020 2763 6861 745f  {.        'chat_
-0000a6c0: 6964 273a 2063 6861 745f 6964 2c0a 2020  id': chat_id,.  
-0000a6d0: 2020 2020 2020 2769 6e76 6974 655f 6c69        'invite_li
-0000a6e0: 6e6b 273a 2069 6e76 6974 655f 6c69 6e6b  nk': invite_link
-0000a6f0: 0a20 2020 207d 0a0a 2020 2020 6966 2065  .    }..    if e
-0000a700: 7870 6972 655f 6461 7465 2069 7320 6e6f  xpire_date is no
-0000a710: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a720: 6966 2069 7369 6e73 7461 6e63 6528 6578  if isinstance(ex
-0000a730: 7069 7265 5f64 6174 652c 2064 6174 6574  pire_date, datet
-0000a740: 696d 6529 3a0a 2020 2020 2020 2020 2020  ime):.          
-0000a750: 2020 7061 796c 6f61 645b 2765 7870 6972    payload['expir
-0000a760: 655f 6461 7465 275d 203d 2065 7870 6972  e_date'] = expir
-0000a770: 655f 6461 7465 2e74 696d 6573 7461 6d70  e_date.timestamp
-0000a780: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
-0000a790: 0a20 2020 2020 2020 2020 2020 2070 6179  .            pay
-0000a7a0: 6c6f 6164 5b27 6578 7069 7265 5f64 6174  load['expire_dat
-0000a7b0: 6527 5d20 3d20 6578 7069 7265 5f64 6174  e'] = expire_dat
-0000a7c0: 650a 0a20 2020 2069 6620 6d65 6d62 6572  e..    if member
-0000a7d0: 5f6c 696d 6974 2069 7320 6e6f 7420 4e6f  _limit is not No
-0000a7e0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000a7f0: 6f61 645b 276d 656d 6265 725f 6c69 6d69  oad['member_limi
-0000a800: 7427 5d20 3d20 6d65 6d62 6572 5f6c 696d  t'] = member_lim
-0000a810: 6974 0a20 2020 2069 6620 6e61 6d65 3a0a  it.    if name:.
-0000a820: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000a830: 276e 616d 6527 5d20 3d20 6e61 6d65 0a20  'name'] = name. 
-0000a840: 2020 2069 6620 6372 6561 7465 735f 6a6f     if creates_jo
-0000a850: 696e 5f72 6571 7565 7374 2069 7320 6e6f  in_request is no
-0000a860: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000a870: 7061 796c 6f61 645b 2763 7265 6174 6573  payload['creates
-0000a880: 5f6a 6f69 6e5f 7265 7175 6573 7427 5d20  _join_request'] 
-0000a890: 3d20 6372 6561 7465 735f 6a6f 696e 5f72  = creates_join_r
-0000a8a0: 6571 7565 7374 0a0a 2020 2020 7265 7475  equest..    retu
-0000a8b0: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000a8c0: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000a8d0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000a8e0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000a8f0: 686f 643d 2770 6f73 7427 290a 0a61 7379  hod='post')..asy
-0000a900: 6e63 2064 6566 2072 6576 6f6b 655f 6368  nc def revoke_ch
-0000a910: 6174 5f69 6e76 6974 655f 6c69 6e6b 2874  at_invite_link(t
-0000a920: 6f6b 656e 2c20 6368 6174 5f69 642c 2069  oken, chat_id, i
-0000a930: 6e76 6974 655f 6c69 6e6b 293a 0a20 2020  nvite_link):.   
-0000a940: 206d 6574 686f 645f 7572 6c20 3d20 2772   method_url = 'r
-0000a950: 6576 6f6b 6543 6861 7449 6e76 6974 654c  evokeChatInviteL
-0000a960: 696e 6b27 0a20 2020 2070 6179 6c6f 6164  ink'.    payload
-0000a970: 203d 207b 0a20 2020 2020 2020 2027 6368   = {.        'ch
-0000a980: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-0000a990: 0a20 2020 2020 2020 2027 696e 7669 7465  .        'invite
-0000a9a0: 5f6c 696e 6b27 3a20 696e 7669 7465 5f6c  _link': invite_l
-0000a9b0: 696e 6b0a 2020 2020 7d0a 2020 2020 7265  ink.    }.    re
-0000a9c0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000a9d0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000a9e0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000a9f0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000aa00: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000aa10: 6173 796e 6320 6465 6620 6578 706f 7274  async def export
-0000aa20: 5f63 6861 745f 696e 7669 7465 5f6c 696e  _chat_invite_lin
-0000aa30: 6b28 746f 6b65 6e2c 2063 6861 745f 6964  k(token, chat_id
-0000aa40: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000aa50: 6c20 3d20 2765 7870 6f72 7443 6861 7449  l = 'exportChatI
-0000aa60: 6e76 6974 654c 696e 6b27 0a20 2020 2070  nviteLink'.    p
-0000aa70: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-0000aa80: 6964 273a 2063 6861 745f 6964 7d0a 2020  id': chat_id}.  
-0000aa90: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-0000aaa0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-0000aab0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-0000aac0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-0000aad0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-0000aae0: 290a 0a61 7379 6e63 2064 6566 2061 7070  )..async def app
-0000aaf0: 726f 7665 5f63 6861 745f 6a6f 696e 5f72  rove_chat_join_r
-0000ab00: 6571 7565 7374 2874 6f6b 656e 2c20 6368  equest(token, ch
-0000ab10: 6174 5f69 642c 2075 7365 725f 6964 293a  at_id, user_id):
-0000ab20: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000ab30: 3d20 2761 7070 726f 7665 4368 6174 4a6f  = 'approveChatJo
-0000ab40: 696e 5265 7175 6573 7427 0a20 2020 2070  inRequest'.    p
-0000ab50: 6179 6c6f 6164 203d 207b 0a20 2020 2020  ayload = {.     
-0000ab60: 2020 2027 6368 6174 5f69 6427 3a20 6368     'chat_id': ch
-0000ab70: 6174 5f69 642c 0a20 2020 2020 2020 2027  at_id,.        '
-0000ab80: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
-0000ab90: 640a 2020 2020 7d0a 2020 2020 7265 7475  d.    }.    retu
-0000aba0: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000abb0: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000abc0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000abd0: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000abe0: 686f 643d 2770 6f73 7427 290a 0a0a 6173  hod='post')...as
-0000abf0: 796e 6320 6465 6620 6465 636c 696e 655f  ync def decline_
-0000ac00: 6368 6174 5f6a 6f69 6e5f 7265 7175 6573  chat_join_reques
-0000ac10: 7428 746f 6b65 6e2c 2063 6861 745f 6964  t(token, chat_id
-0000ac20: 2c20 7573 6572 5f69 6429 3a0a 2020 2020  , user_id):.    
-0000ac30: 6d65 7468 6f64 5f75 726c 203d 2027 6465  method_url = 'de
-0000ac40: 636c 696e 6543 6861 744a 6f69 6e52 6571  clineChatJoinReq
-0000ac50: 7565 7374 270a 2020 2020 7061 796c 6f61  uest'.    payloa
-0000ac60: 6420 3d20 7b0a 2020 2020 2020 2020 2763  d = {.        'c
-0000ac70: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-0000ac80: 2c0a 2020 2020 2020 2020 2775 7365 725f  ,.        'user_
-0000ac90: 6964 273a 2075 7365 725f 6964 0a20 2020  id': user_id.   
-0000aca0: 207d 0a20 2020 2072 6574 7572 6e20 6177   }.    return aw
-0000acb0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000acc0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000acd0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000ace0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-0000acf0: 706f 7374 2729 0a0a 0a61 7379 6e63 2064  post')...async d
-0000ad00: 6566 2073 6574 5f63 6861 745f 7068 6f74  ef set_chat_phot
-0000ad10: 6f28 746f 6b65 6e2c 2063 6861 745f 6964  o(token, chat_id
-0000ad20: 2c20 7068 6f74 6f29 3a0a 2020 2020 6d65  , photo):.    me
-0000ad30: 7468 6f64 5f75 726c 203d 2027 7365 7443  thod_url = 'setC
-0000ad40: 6861 7450 686f 746f 270a 2020 2020 7061  hatPhoto'.    pa
-0000ad50: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
-0000ad60: 6427 3a20 6368 6174 5f69 647d 0a20 2020  d': chat_id}.   
-0000ad70: 2066 696c 6573 203d 204e 6f6e 650a 2020   files = None.  
-0000ad80: 2020 6966 2075 7469 6c2e 6973 5f73 7472    if util.is_str
-0000ad90: 696e 6728 7068 6f74 6f29 3a0a 2020 2020  ing(photo):.    
-0000ada0: 2020 2020 7061 796c 6f61 645b 2770 686f      payload['pho
-0000adb0: 746f 275d 203d 2070 686f 746f 0a20 2020  to'] = photo.   
-0000adc0: 2065 6c69 6620 7574 696c 2e69 735f 7069   elif util.is_pi
-0000add0: 6c5f 696d 6167 6528 7068 6f74 6f29 3a0a  l_image(photo):.
-0000ade0: 2020 2020 2020 2020 6669 6c65 7320 3d20          files = 
-0000adf0: 7b27 7068 6f74 6f27 3a20 7574 696c 2e70  {'photo': util.p
-0000ae00: 696c 5f69 6d61 6765 5f74 6f5f 6669 6c65  il_image_to_file
-0000ae10: 2870 686f 746f 297d 0a20 2020 2065 6c73  (photo)}.    els
-0000ae20: 653a 0a20 2020 2020 2020 2066 696c 6573  e:.        files
-0000ae30: 203d 207b 2770 686f 746f 273a 2070 686f   = {'photo': pho
-0000ae40: 746f 7d0a 2020 2020 7265 7475 726e 2061  to}.    return a
-0000ae50: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000ae60: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000ae70: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000ae80: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
-0000ae90: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
-0000aea0: 7374 2729 0a0a 0a61 7379 6e63 2064 6566  st')...async def
-0000aeb0: 2064 656c 6574 655f 6368 6174 5f70 686f   delete_chat_pho
-0000aec0: 746f 2874 6f6b 656e 2c20 6368 6174 5f69  to(token, chat_i
-0000aed0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-0000aee0: 726c 203d 2027 6465 6c65 7465 4368 6174  rl = 'deleteChat
-0000aef0: 5068 6f74 6f27 0a20 2020 2070 6179 6c6f  Photo'.    paylo
-0000af00: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-0000af10: 2063 6861 745f 6964 7d0a 2020 2020 7265   chat_id}.    re
-0000af20: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-0000af30: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-0000af40: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-0000af50: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-0000af60: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-0000af70: 6173 796e 6320 6465 6620 7365 745f 6368  async def set_ch
-0000af80: 6174 5f74 6974 6c65 2874 6f6b 656e 2c20  at_title(token, 
-0000af90: 6368 6174 5f69 642c 2074 6974 6c65 293a  chat_id, title):
-0000afa0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000afb0: 3d20 2773 6574 4368 6174 5469 746c 6527  = 'setChatTitle'
-0000afc0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
-0000afd0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
-0000afe0: 6964 2c20 2774 6974 6c65 273a 2074 6974  id, 'title': tit
-0000aff0: 6c65 7d0a 2020 2020 7265 7475 726e 2061  le}.    return a
-0000b000: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000b010: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b020: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b030: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b040: 2770 6f73 7427 290a 0a0a 6173 796e 6320  'post')...async 
-0000b050: 6465 6620 6765 745f 6d79 5f63 6f6d 6d61  def get_my_comma
-0000b060: 6e64 7328 746f 6b65 6e2c 2073 636f 7065  nds(token, scope
-0000b070: 3d4e 6f6e 652c 206c 616e 6775 6167 655f  =None, language_
-0000b080: 636f 6465 3d4e 6f6e 6529 3a0a 2020 2020  code=None):.    
-0000b090: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
-0000b0a0: 6574 4d79 436f 6d6d 616e 6473 270a 2020  etMyCommands'.  
-0000b0b0: 2020 7061 796c 6f61 6420 3d20 7b7d 0a20    payload = {}. 
-0000b0c0: 2020 2069 6620 7363 6f70 653a 0a20 2020     if scope:.   
-0000b0d0: 2020 2020 2070 6179 6c6f 6164 5b27 7363       payload['sc
-0000b0e0: 6f70 6527 5d20 3d20 7363 6f70 652e 746f  ope'] = scope.to
-0000b0f0: 5f6a 736f 6e28 290a 2020 2020 6966 206c  _json().    if l
-0000b100: 616e 6775 6167 655f 636f 6465 3a0a 2020  anguage_code:.  
-0000b110: 2020 2020 2020 7061 796c 6f61 645b 276c        payload['l
-0000b120: 616e 6775 6167 655f 636f 6465 275d 203d  anguage_code'] =
-0000b130: 206c 616e 6775 6167 655f 636f 6465 0a20   language_code. 
-0000b140: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-0000b150: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-0000b160: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000b170: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000b180: 6164 290a 0a61 7379 6e63 2064 6566 2073  ad)..async def s
-0000b190: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
-0000b1a0: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
-0000b1b0: 6964 3d4e 6f6e 652c 206d 656e 755f 6275  id=None, menu_bu
-0000b1c0: 7474 6f6e 3d4e 6f6e 6529 3a0a 2020 2020  tton=None):.    
-0000b1d0: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
-0000b1e0: 6574 4368 6174 4d65 6e75 4275 7474 6f6e  etChatMenuButton
-0000b1f0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000b200: 7b7d 0a20 2020 2069 6620 6368 6174 5f69  {}.    if chat_i
-0000b210: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000b220: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
-0000b230: 6368 6174 5f69 640a 2020 2020 6966 206d  chat_id.    if m
-0000b240: 656e 755f 6275 7474 6f6e 3a0a 2020 2020  enu_button:.    
-0000b250: 2020 2020 7061 796c 6f61 645b 276d 656e      payload['men
-0000b260: 755f 6275 7474 6f6e 275d 203d 206d 656e  u_button'] = men
-0000b270: 755f 6275 7474 6f6e 2e74 6f5f 6a73 6f6e  u_button.to_json
-0000b280: 2829 0a0a 2020 2020 7265 7475 726e 2061  ()..    return a
-0000b290: 7761 6974 205f 7072 6f63 6573 735f 7265  wait _process_re
-0000b2a0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
-0000b2b0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
-0000b2c0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
-0000b2d0: 2770 6f73 7427 290a 0a61 7379 6e63 2064  'post')..async d
-0000b2e0: 6566 2067 6574 5f63 6861 745f 6d65 6e75  ef get_chat_menu
-0000b2f0: 5f62 7574 746f 6e28 746f 6b65 6e2c 2063  _button(token, c
-0000b300: 6861 745f 6964 3d4e 6f6e 6529 3a0a 2020  hat_id=None):.  
-0000b310: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
-0000b320: 2767 6574 4368 6174 4d65 6e75 4275 7474  'getChatMenuButt
-0000b330: 6f6e 270a 2020 2020 7061 796c 6f61 6420  on'.    payload 
-0000b340: 3d20 7b7d 0a20 2020 2069 6620 6368 6174  = {}.    if chat
-0000b350: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000b360: 6c6f 6164 5b27 6368 6174 5f69 6427 5d20  load['chat_id'] 
-0000b370: 3d20 6368 6174 5f69 640a 0a20 2020 2072  = chat_id..    r
-0000b380: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-0000b390: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-0000b3a0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000b3b0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000b3c0: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000b3d0: 0a61 7379 6e63 2064 6566 2073 6574 5f6d  .async def set_m
-0000b3e0: 795f 6465 6661 756c 745f 6164 6d69 6e69  y_default_admini
-0000b3f0: 7374 7261 746f 725f 7269 6768 7473 2874  strator_rights(t
-0000b400: 6f6b 656e 2c20 7269 6768 7473 3d4e 6f6e  oken, rights=Non
-0000b410: 652c 2066 6f72 5f63 6861 6e6e 656c 733d  e, for_channels=
-0000b420: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-0000b430: 645f 7572 6c20 3d20 7227 7365 744d 7944  d_url = r'setMyD
-0000b440: 6566 6175 6c74 4164 6d69 6e69 7374 7261  efaultAdministra
-0000b450: 746f 7252 6967 6874 7327 0a20 2020 2070  torRights'.    p
-0000b460: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
-0000b470: 6966 2072 6967 6874 733a 0a20 2020 2020  if rights:.     
-0000b480: 2020 2070 6179 6c6f 6164 5b27 7269 6768     payload['righ
-0000b490: 7473 275d 203d 2072 6967 6874 732e 746f  ts'] = rights.to
-0000b4a0: 5f6a 736f 6e28 290a 2020 2020 6966 2066  _json().    if f
-0000b4b0: 6f72 5f63 6861 6e6e 656c 7320 6973 206e  or_channels is n
-0000b4c0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000b4d0: 2070 6179 6c6f 6164 5b27 666f 725f 6368   payload['for_ch
-0000b4e0: 616e 6e65 6c73 275d 203d 2066 6f72 5f63  annels'] = for_c
-0000b4f0: 6861 6e6e 656c 730a 0a20 2020 2072 6574  hannels..    ret
-0000b500: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000b510: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000b520: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000b530: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
-0000b540: 7468 6f64 3d27 706f 7374 2729 0a0a 6173  thod='post')..as
-0000b550: 796e 6320 6465 6620 6765 745f 6d79 5f64  ync def get_my_d
-0000b560: 6566 6175 6c74 5f61 646d 696e 6973 7472  efault_administr
-0000b570: 6174 6f72 5f72 6967 6874 7328 746f 6b65  ator_rights(toke
-0000b580: 6e2c 2066 6f72 5f63 6861 6e6e 656c 733d  n, for_channels=
-0000b590: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-0000b5a0: 645f 7572 6c20 3d20 7227 6765 744d 7944  d_url = r'getMyD
-0000b5b0: 6566 6175 6c74 4164 6d69 6e69 7374 7261  efaultAdministra
-0000b5c0: 746f 7252 6967 6874 7327 0a20 2020 2070  torRights'.    p
-0000b5d0: 6179 6c6f 6164 203d 207b 7d0a 2020 2020  ayload = {}.    
-0000b5e0: 6966 2066 6f72 5f63 6861 6e6e 656c 733a  if for_channels:
-0000b5f0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000b600: 5b27 666f 725f 6368 616e 6e65 6c73 275d  ['for_channels']
-0000b610: 203d 2066 6f72 5f63 6861 6e6e 656c 730a   = for_channels.
-0000b620: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000b630: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000b640: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000b650: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000b660: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000b670: 7374 2729 0a0a 6173 796e 6320 6465 6620  st')..async def 
-0000b680: 7365 745f 6d79 5f63 6f6d 6d61 6e64 7328  set_my_commands(
-0000b690: 746f 6b65 6e2c 2063 6f6d 6d61 6e64 732c  token, commands,
-0000b6a0: 2073 636f 7065 3d4e 6f6e 652c 206c 616e   scope=None, lan
-0000b6b0: 6775 6167 655f 636f 6465 3d4e 6f6e 6529  guage_code=None)
-0000b6c0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000b6d0: 203d 2072 2773 6574 4d79 436f 6d6d 616e   = r'setMyComman
-0000b6e0: 6473 270a 2020 2020 7061 796c 6f61 6420  ds'.    payload 
-0000b6f0: 3d20 7b27 636f 6d6d 616e 6473 273a 2061  = {'commands': a
-0000b700: 7761 6974 205f 636f 6e76 6572 745f 6c69  wait _convert_li
-0000b710: 7374 5f6a 736f 6e5f 7365 7269 616c 697a  st_json_serializ
-0000b720: 6162 6c65 2863 6f6d 6d61 6e64 7329 7d0a  able(commands)}.
-0000b730: 2020 2020 6966 2073 636f 7065 3a0a 2020      if scope:.  
-0000b740: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
-0000b750: 636f 7065 275d 203d 2073 636f 7065 2e74  cope'] = scope.t
-0000b760: 6f5f 6a73 6f6e 2829 0a20 2020 2069 6620  o_json().    if 
-0000b770: 6c61 6e67 7561 6765 5f63 6f64 653a 0a20  language_code:. 
-0000b780: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000b790: 6c61 6e67 7561 6765 5f63 6f64 6527 5d20  language_code'] 
-0000b7a0: 3d20 6c61 6e67 7561 6765 5f63 6f64 650a  = language_code.
-0000b7b0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0000b7c0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-0000b7d0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000b7e0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000b7f0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000b800: 7427 290a 0a0a 6173 796e 6320 6465 6620  t')...async def 
-0000b810: 6465 6c65 7465 5f6d 795f 636f 6d6d 616e  delete_my_comman
-0000b820: 6473 2874 6f6b 656e 2c20 7363 6f70 653d  ds(token, scope=
-0000b830: 4e6f 6e65 2c20 6c61 6e67 7561 6765 5f63  None, language_c
-0000b840: 6f64 653d 4e6f 6e65 293a 0a20 2020 206d  ode=None):.    m
-0000b850: 6574 686f 645f 7572 6c20 3d20 7227 6465  ethod_url = r'de
-0000b860: 6c65 7465 4d79 436f 6d6d 616e 6473 270a  leteMyCommands'.
-0000b870: 2020 2020 7061 796c 6f61 6420 3d20 7b7d      payload = {}
-0000b880: 0a20 2020 2069 6620 7363 6f70 653a 200a  .    if scope: .
-0000b890: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000b8a0: 2773 636f 7065 275d 203d 2073 636f 7065  'scope'] = scope
-0000b8b0: 2e74 6f5f 6a73 6f6e 2829 0a20 2020 2069  .to_json().    i
-0000b8c0: 6620 6c61 6e67 7561 6765 5f63 6f64 653a  f language_code:
-0000b8d0: 200a 2020 2020 2020 2020 7061 796c 6f61   .        payloa
-0000b8e0: 645b 276c 616e 6775 6167 655f 636f 6465  d['language_code
-0000b8f0: 275d 203d 206c 616e 6775 6167 655f 636f  '] = language_co
-0000b900: 6465 0a20 2020 2072 6574 7572 6e20 6177  de.    return aw
-0000b910: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000b920: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000b930: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000b940: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-0000b950: 706f 7374 2729 0a0a 0a61 7379 6e63 2064  post')...async d
-0000b960: 6566 2073 6574 5f63 6861 745f 6465 7363  ef set_chat_desc
-0000b970: 7269 7074 696f 6e28 746f 6b65 6e2c 2063  ription(token, c
-0000b980: 6861 745f 6964 2c20 6465 7363 7269 7074  hat_id, descript
-0000b990: 696f 6e29 3a0a 2020 2020 6d65 7468 6f64  ion):.    method
-0000b9a0: 5f75 726c 203d 2027 7365 7443 6861 7444  _url = 'setChatD
-0000b9b0: 6573 6372 6970 7469 6f6e 270a 2020 2020  escription'.    
-0000b9c0: 7061 796c 6f61 6420 3d20 7b27 6368 6174  payload = {'chat
-0000b9d0: 5f69 6427 3a20 6368 6174 5f69 647d 0a20  _id': chat_id}. 
-0000b9e0: 2020 2069 6620 6465 7363 7269 7074 696f     if descriptio
-0000b9f0: 6e20 6973 206e 6f74 204e 6f6e 653a 2020  n is not None:  
-0000ba00: 2320 416c 6c6f 7720 656d 7074 7920 7374  # Allow empty st
-0000ba10: 7269 6e67 730a 2020 2020 2020 2020 7061  rings.        pa
-0000ba20: 796c 6f61 645b 2764 6573 6372 6970 7469  yload['descripti
-0000ba30: 6f6e 275d 203d 2064 6573 6372 6970 7469  on'] = descripti
-0000ba40: 6f6e 0a20 2020 2072 6574 7572 6e20 6177  on.    return aw
-0000ba50: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000ba60: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000ba70: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000ba80: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-0000ba90: 706f 7374 2729 0a0a 0a61 7379 6e63 2064  post')...async d
-0000baa0: 6566 2070 696e 5f63 6861 745f 6d65 7373  ef pin_chat_mess
-0000bab0: 6167 6528 746f 6b65 6e2c 2063 6861 745f  age(token, chat_
-0000bac0: 6964 2c20 6d65 7373 6167 655f 6964 2c20  id, message_id, 
-0000bad0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000bae0: 7469 6f6e 3d4e 6f6e 6529 3a0a 2020 2020  tion=None):.    
-0000baf0: 6d65 7468 6f64 5f75 726c 203d 2027 7069  method_url = 'pi
-0000bb00: 6e43 6861 744d 6573 7361 6765 270a 2020  nChatMessage'.  
-0000bb10: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
-0000bb20: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
-0000bb30: 2027 6d65 7373 6167 655f 6964 273a 206d   'message_id': m
-0000bb40: 6573 7361 6765 5f69 647d 0a20 2020 2069  essage_id}.    i
-0000bb50: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
-0000bb60: 6361 7469 6f6e 2069 7320 6e6f 7420 4e6f  cation is not No
-0000bb70: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-0000bb80: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
-0000bb90: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-0000bba0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-0000bbb0: 6f6e 0a20 2020 2072 6574 7572 6e20 6177  on.    return aw
-0000bbc0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-0000bbd0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-0000bbe0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-0000bbf0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
-0000bc00: 706f 7374 2729 0a0a 0a61 7379 6e63 2064  post')...async d
-0000bc10: 6566 2075 6e70 696e 5f63 6861 745f 6d65  ef unpin_chat_me
-0000bc20: 7373 6167 6528 746f 6b65 6e2c 2063 6861  ssage(token, cha
-0000bc30: 745f 6964 2c20 6d65 7373 6167 655f 6964  t_id, message_id
-0000bc40: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-0000bc50: 6c20 3d20 2775 6e70 696e 4368 6174 4d65  l = 'unpinChatMe
-0000bc60: 7373 6167 6527 0a20 2020 2070 6179 6c6f  ssage'.    paylo
-0000bc70: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-0000bc80: 2063 6861 745f 6964 7d0a 2020 2020 6966   chat_id}.    if
-0000bc90: 206d 6573 7361 6765 5f69 643a 0a20 2020   message_id:.   
-0000bca0: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
-0000bcb0: 7373 6167 655f 6964 275d 203d 206d 6573  ssage_id'] = mes
-0000bcc0: 7361 6765 5f69 640a 2020 2020 7265 7475  sage_id.    retu
-0000bcd0: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000bce0: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000bcf0: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000bd00: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
-0000bd10: 686f 643d 2770 6f73 7427 290a 0a0a 6173  hod='post')...as
-0000bd20: 796e 6320 6465 6620 756e 7069 6e5f 616c  ync def unpin_al
-0000bd30: 6c5f 6368 6174 5f6d 6573 7361 6765 7328  l_chat_messages(
-0000bd40: 746f 6b65 6e2c 2063 6861 745f 6964 293a  token, chat_id):
-0000bd50: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-0000bd60: 3d20 2775 6e70 696e 416c 6c43 6861 744d  = 'unpinAllChatM
-0000bd70: 6573 7361 6765 7327 0a20 2020 2070 6179  essages'.    pay
-0000bd80: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
-0000bd90: 273a 2063 6861 745f 6964 7d0a 2020 2020  ': chat_id}.    
-0000bda0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000bdb0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000bdc0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000bdd0: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
-0000bde0: 206d 6574 686f 643d 2770 6f73 7427 290a   method='post').
-0000bdf0: 0a0a 2320 5570 6461 7469 6e67 206d 6573  ..# Updating mes
-0000be00: 7361 6765 730a 0a61 7379 6e63 2064 6566  sages..async def
-0000be10: 2065 6469 745f 6d65 7373 6167 655f 7465   edit_message_te
-0000be20: 7874 2874 6f6b 656e 2c20 7465 7874 2c20  xt(token, text, 
-0000be30: 6368 6174 5f69 643d 4e6f 6e65 2c20 6d65  chat_id=None, me
-0000be40: 7373 6167 655f 6964 3d4e 6f6e 652c 2069  ssage_id=None, i
-0000be50: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
-0000be60: 3d4e 6f6e 652c 2070 6172 7365 5f6d 6f64  =None, parse_mod
-0000be70: 653d 4e6f 6e65 2c0a 2020 2020 2020 2020  e=None,.        
-0000be80: 2020 2020 2020 2020 2020 2020 2020 656e                en
-0000be90: 7469 7469 6573 203d 204e 6f6e 652c 2064  tities = None, d
-0000bea0: 6973 6162 6c65 5f77 6562 5f70 6167 655f  isable_web_page_
-0000beb0: 7072 6576 6965 773d 4e6f 6e65 2c20 7265  preview=None, re
-0000bec0: 706c 795f 6d61 726b 7570 3d4e 6f6e 6529  ply_markup=None)
-0000bed0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000bee0: 203d 2072 2765 6469 744d 6573 7361 6765   = r'editMessage
-0000bef0: 5465 7874 270a 2020 2020 7061 796c 6f61  Text'.    payloa
-0000bf00: 6420 3d20 7b27 7465 7874 273a 2074 6578  d = {'text': tex
-0000bf10: 747d 0a20 2020 2069 6620 6368 6174 5f69  t}.    if chat_i
-0000bf20: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000bf30: 6164 5b27 6368 6174 5f69 6427 5d20 3d20  ad['chat_id'] = 
-0000bf40: 6368 6174 5f69 640a 2020 2020 6966 206d  chat_id.    if m
-0000bf50: 6573 7361 6765 5f69 643a 0a20 2020 2020  essage_id:.     
-0000bf60: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
-0000bf70: 6167 655f 6964 275d 203d 206d 6573 7361  age_id'] = messa
-0000bf80: 6765 5f69 640a 2020 2020 6966 2069 6e6c  ge_id.    if inl
-0000bf90: 696e 655f 6d65 7373 6167 655f 6964 3a0a  ine_message_id:.
-0000bfa0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000bfb0: 2769 6e6c 696e 655f 6d65 7373 6167 655f  'inline_message_
-0000bfc0: 6964 275d 203d 2069 6e6c 696e 655f 6d65  id'] = inline_me
-0000bfd0: 7373 6167 655f 6964 0a20 2020 2069 6620  ssage_id.    if 
-0000bfe0: 7061 7273 655f 6d6f 6465 3a0a 2020 2020  parse_mode:.    
-0000bff0: 2020 2020 7061 796c 6f61 645b 2770 6172      payload['par
-0000c000: 7365 5f6d 6f64 6527 5d20 3d20 7061 7273  se_mode'] = pars
-0000c010: 655f 6d6f 6465 0a20 2020 2069 6620 656e  e_mode.    if en
-0000c020: 7469 7469 6573 3a0a 2020 2020 2020 2020  tities:.        
-0000c030: 7061 796c 6f61 645b 2765 6e74 6974 6965  payload['entitie
-0000c040: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
-0000c050: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
-0000c060: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
-0000c070: 6469 6374 7328 656e 7469 7469 6573 2929  dicts(entities))
-0000c080: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
-0000c090: 7765 625f 7061 6765 5f70 7265 7669 6577  web_page_preview
-0000c0a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000c0b0: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
-0000c0c0: 6973 6162 6c65 5f77 6562 5f70 6167 655f  isable_web_page_
-0000c0d0: 7072 6576 6965 7727 5d20 3d20 6469 7361  preview'] = disa
-0000c0e0: 626c 655f 7765 625f 7061 6765 5f70 7265  ble_web_page_pre
-0000c0f0: 7669 6577 0a20 2020 2069 6620 7265 706c  view.    if repl
-0000c100: 795f 6d61 726b 7570 3a0a 2020 2020 2020  y_markup:.      
-0000c110: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-0000c120: 5f6d 6172 6b75 7027 5d20 3d20 6177 6169  _markup'] = awai
-0000c130: 7420 5f63 6f6e 7665 7274 5f6d 6172 6b75  t _convert_marku
-0000c140: 7028 7265 706c 795f 6d61 726b 7570 290a  p(reply_markup).
-0000c150: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0000c160: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-0000c170: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000c180: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000c190: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
-0000c1a0: 7427 290a 0a0a 6173 796e 6320 6465 6620  t')...async def 
-0000c1b0: 6564 6974 5f6d 6573 7361 6765 5f63 6170  edit_message_cap
-0000c1c0: 7469 6f6e 2874 6f6b 656e 2c20 6361 7074  tion(token, capt
-0000c1d0: 696f 6e2c 2063 6861 745f 6964 3d4e 6f6e  ion, chat_id=Non
-0000c1e0: 652c 206d 6573 7361 6765 5f69 643d 4e6f  e, message_id=No
-0000c1f0: 6e65 2c20 696e 6c69 6e65 5f6d 6573 7361  ne, inline_messa
-0000c200: 6765 5f69 643d 4e6f 6e65 2c0a 2020 2020  ge_id=None,.    
-0000c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c220: 2020 2020 2070 6172 7365 5f6d 6f64 653d       parse_mode=
-0000c230: 4e6f 6e65 2c20 6361 7074 696f 6e5f 656e  None, caption_en
-0000c240: 7469 7469 6573 3d4e 6f6e 652c 7265 706c  tities=None,repl
-0000c250: 795f 6d61 726b 7570 3d4e 6f6e 6529 3a0a  y_markup=None):.
-0000c260: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-0000c270: 2072 2765 6469 744d 6573 7361 6765 4361   r'editMessageCa
-0000c280: 7074 696f 6e27 0a20 2020 2070 6179 6c6f  ption'.    paylo
-0000c290: 6164 203d 207b 2763 6170 7469 6f6e 273a  ad = {'caption':
-0000c2a0: 2063 6170 7469 6f6e 7d0a 2020 2020 6966   caption}.    if
-0000c2b0: 2063 6861 745f 6964 3a0a 2020 2020 2020   chat_id:.      
-0000c2c0: 2020 7061 796c 6f61 645b 2763 6861 745f    payload['chat_
-0000c2d0: 6964 275d 203d 2063 6861 745f 6964 0a20  id'] = chat_id. 
-0000c2e0: 2020 2069 6620 6d65 7373 6167 655f 6964     if message_id
-0000c2f0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000c300: 645b 276d 6573 7361 6765 5f69 6427 5d20  d['message_id'] 
-0000c310: 3d20 6d65 7373 6167 655f 6964 0a20 2020  = message_id.   
-0000c320: 2069 6620 696e 6c69 6e65 5f6d 6573 7361   if inline_messa
-0000c330: 6765 5f69 643a 0a20 2020 2020 2020 2070  ge_id:.        p
-0000c340: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
-0000c350: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
-0000c360: 6c69 6e65 5f6d 6573 7361 6765 5f69 640a  line_message_id.
-0000c370: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
-0000c380: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-0000c390: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
-0000c3a0: 203d 2070 6172 7365 5f6d 6f64 650a 2020   = parse_mode.  
-0000c3b0: 2020 6966 2063 6170 7469 6f6e 5f65 6e74    if caption_ent
-0000c3c0: 6974 6965 733a 0a20 2020 2020 2020 2070  ities:.        p
-0000c3d0: 6179 6c6f 6164 5b27 6361 7074 696f 6e5f  ayload['caption_
-0000c3e0: 656e 7469 7469 6573 275d 203d 206a 736f  entities'] = jso
-0000c3f0: 6e2e 6475 6d70 7328 7479 7065 732e 4d65  n.dumps(types.Me
-0000c400: 7373 6167 6545 6e74 6974 792e 746f 5f6c  ssageEntity.to_l
-0000c410: 6973 745f 6f66 5f64 6963 7473 2863 6170  ist_of_dicts(cap
-0000c420: 7469 6f6e 5f65 6e74 6974 6965 7329 290a  tion_entities)).
-0000c430: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
-0000c440: 6b75 703a 0a20 2020 2020 2020 2070 6179  kup:.        pay
-0000c450: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
-0000c460: 7570 275d 203d 2061 7761 6974 205f 636f  up'] = await _co
-0000c470: 6e76 6572 745f 6d61 726b 7570 2872 6570  nvert_markup(rep
-0000c480: 6c79 5f6d 6172 6b75 7029 0a20 2020 2072  ly_markup).    r
-0000c490: 6574 7572 6e20 6177 6169 7420 5f70 726f  eturn await _pro
-0000c4a0: 6365 7373 5f72 6571 7565 7374 2874 6f6b  cess_request(tok
-0000c4b0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
-0000c4c0: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
-0000c4d0: 6d65 7468 6f64 3d27 706f 7374 2729 0a0a  method='post')..
-0000c4e0: 0a61 7379 6e63 2064 6566 2065 6469 745f  .async def edit_
-0000c4f0: 6d65 7373 6167 655f 6d65 6469 6128 746f  message_media(to
-0000c500: 6b65 6e2c 206d 6564 6961 2c20 6368 6174  ken, media, chat
-0000c510: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
-0000c520: 655f 6964 3d4e 6f6e 652c 2069 6e6c 696e  e_id=None, inlin
-0000c530: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
-0000c540: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
-0000c550: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-0000c560: 645f 7572 6c20 3d20 7227 6564 6974 4d65  d_url = r'editMe
-0000c570: 7373 6167 654d 6564 6961 270a 2020 2020  ssageMedia'.    
-0000c580: 6d65 6469 615f 6a73 6f6e 2c20 6669 6c65  media_json, file
-0000c590: 203d 2061 7761 6974 2063 6f6e 7665 7274   = await convert
-0000c5a0: 5f69 6e70 7574 5f6d 6564 6961 286d 6564  _input_media(med
-0000c5b0: 6961 290a 2020 2020 7061 796c 6f61 6420  ia).    payload 
-0000c5c0: 3d20 7b27 6d65 6469 6127 3a20 6d65 6469  = {'media': medi
-0000c5d0: 615f 6a73 6f6e 7d0a 2020 2020 6966 2063  a_json}.    if c
-0000c5e0: 6861 745f 6964 3a0a 2020 2020 2020 2020  hat_id:.        
-0000c5f0: 7061 796c 6f61 645b 2763 6861 745f 6964  payload['chat_id
-0000c600: 275d 203d 2063 6861 745f 6964 0a20 2020  '] = chat_id.   
-0000c610: 2069 6620 6d65 7373 6167 655f 6964 3a0a   if message_id:.
-0000c620: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000c630: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
-0000c640: 6d65 7373 6167 655f 6964 0a20 2020 2069  message_id.    i
-0000c650: 6620 696e 6c69 6e65 5f6d 6573 7361 6765  f inline_message
-0000c660: 5f69 643a 0a20 2020 2020 2020 2070 6179  _id:.        pay
-0000c670: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
-0000c680: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
-0000c690: 6e65 5f6d 6573 7361 6765 5f69 640a 2020  ne_message_id.  
-0000c6a0: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
-0000c6b0: 703a 0a20 2020 2020 2020 2070 6179 6c6f  p:.        paylo
-0000c6c0: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
-0000c6d0: 275d 203d 2061 7761 6974 205f 636f 6e76  '] = await _conv
-0000c6e0: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
-0000c6f0: 5f6d 6172 6b75 7029 0a20 2020 2072 6574  _markup).    ret
-0000c700: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-0000c710: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-0000c720: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-0000c730: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
-0000c740: 6c65 733d 6669 6c65 2c20 6d65 7468 6f64  les=file, method
-0000c750: 3d27 706f 7374 2720 6966 2066 696c 6520  ='post' if file 
-0000c760: 656c 7365 2027 6765 7427 290a 0a0a 6173  else 'get')...as
-0000c770: 796e 6320 6465 6620 6564 6974 5f6d 6573  ync def edit_mes
-0000c780: 7361 6765 5f72 6570 6c79 5f6d 6172 6b75  sage_reply_marku
-0000c790: 7028 746f 6b65 6e2c 2063 6861 745f 6964  p(token, chat_id
-0000c7a0: 3d4e 6f6e 652c 206d 6573 7361 6765 5f69  =None, message_i
-0000c7b0: 643d 4e6f 6e65 2c20 696e 6c69 6e65 5f6d  d=None, inline_m
-0000c7c0: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
-0000c7d0: 7265 706c 795f 6d61 726b 7570 3d4e 6f6e  reply_markup=Non
-0000c7e0: 6529 3a0a 2020 2020 6d65 7468 6f64 5f75  e):.    method_u
-0000c7f0: 726c 203d 2072 2765 6469 744d 6573 7361  rl = r'editMessa
-0000c800: 6765 5265 706c 794d 6172 6b75 7027 0a20  geReplyMarkup'. 
-0000c810: 2020 2070 6179 6c6f 6164 203d 207b 7d0a     payload = {}.
-0000c820: 2020 2020 6966 2063 6861 745f 6964 3a0a      if chat_id:.
-0000c830: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000c840: 2763 6861 745f 6964 275d 203d 2063 6861  'chat_id'] = cha
-0000c850: 745f 6964 0a20 2020 2069 6620 6d65 7373  t_id.    if mess
-0000c860: 6167 655f 6964 3a0a 2020 2020 2020 2020  age_id:.        
-0000c870: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
-0000c880: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
-0000c890: 6964 0a20 2020 2069 6620 696e 6c69 6e65  id.    if inline
-0000c8a0: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000c8b0: 2020 2020 2070 6179 6c6f 6164 5b27 696e       payload['in
-0000c8c0: 6c69 6e65 5f6d 6573 7361 6765 5f69 6427  line_message_id'
-0000c8d0: 5d20 3d20 696e 6c69 6e65 5f6d 6573 7361  ] = inline_messa
-0000c8e0: 6765 5f69 640a 2020 2020 6966 2072 6570  ge_id.    if rep
-0000c8f0: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-0000c900: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-0000c910: 795f 6d61 726b 7570 275d 203d 2061 7761  y_markup'] = awa
-0000c920: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
-0000c930: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-0000c940: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000c950: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000c960: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000c970: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000c980: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
-0000c990: 7374 2729 0a0a 0a61 7379 6e63 2064 6566  st')...async def
-0000c9a0: 2064 656c 6574 655f 6d65 7373 6167 6528   delete_message(
-0000c9b0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-0000c9c0: 6d65 7373 6167 655f 6964 2c20 7469 6d65  message_id, time
-0000c9d0: 6f75 743d 4e6f 6e65 293a 0a20 2020 206d  out=None):.    m
-0000c9e0: 6574 686f 645f 7572 6c20 3d20 7227 6465  ethod_url = r'de
-0000c9f0: 6c65 7465 4d65 7373 6167 6527 0a20 2020  leteMessage'.   
-0000ca00: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
-0000ca10: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
-0000ca20: 276d 6573 7361 6765 5f69 6427 3a20 6d65  'message_id': me
-0000ca30: 7373 6167 655f 6964 7d0a 2020 2020 6966  ssage_id}.    if
-0000ca40: 2074 696d 656f 7574 3a0a 2020 2020 2020   timeout:.      
-0000ca50: 2020 7061 796c 6f61 645b 2774 696d 656f    payload['timeo
-0000ca60: 7574 275d 203d 2074 696d 656f 7574 0a20  ut'] = timeout. 
-0000ca70: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-0000ca80: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-0000ca90: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-0000caa0: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
-0000cab0: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
-0000cac0: 2729 0a0a 0a23 2047 616d 650a 0a61 7379  ')...# Game..asy
-0000cad0: 6e63 2064 6566 2073 656e 645f 6761 6d65  nc def send_game
-0000cae0: 280a 2020 2020 2020 2020 746f 6b65 6e2c  (.        token,
-0000caf0: 2063 6861 745f 6964 2c20 6761 6d65 5f73   chat_id, game_s
-0000cb00: 686f 7274 5f6e 616d 652c 0a20 2020 2020  hort_name,.     
-0000cb10: 2020 2064 6973 6162 6c65 5f6e 6f74 6966     disable_notif
-0000cb20: 6963 6174 696f 6e3d 4e6f 6e65 2c20 7265  ication=None, re
-0000cb30: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-0000cb40: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
-0000cb50: 726b 7570 3d4e 6f6e 652c 2074 696d 656f  rkup=None, timeo
-0000cb60: 7574 3d4e 6f6e 652c 0a20 2020 2020 2020  ut=None,.       
-0000cb70: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
-0000cb80: 6974 686f 7574 5f72 6570 6c79 3d4e 6f6e  ithout_reply=Non
-0000cb90: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-0000cba0: 6e74 3d4e 6f6e 652c 206d 6573 7361 6765  nt=None, message
-0000cbb0: 5f74 6872 6561 645f 6964 3d4e 6f6e 6529  _thread_id=None)
-0000cbc0: 3a0a 2020 2020 6d65 7468 6f64 5f75 726c  :.    method_url
-0000cbd0: 203d 2072 2773 656e 6447 616d 6527 0a20   = r'sendGame'. 
-0000cbe0: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-0000cbf0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-0000cc00: 2c20 2767 616d 655f 7368 6f72 745f 6e61  , 'game_short_na
-0000cc10: 6d65 273a 2067 616d 655f 7368 6f72 745f  me': game_short_
-0000cc20: 6e61 6d65 7d0a 2020 2020 6966 2064 6973  name}.    if dis
-0000cc30: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
-0000cc40: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-0000cc50: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000cc60: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000cc70: 7469 6f6e 275d 203d 2064 6973 6162 6c65  tion'] = disable
-0000cc80: 5f6e 6f74 6966 6963 6174 696f 6e0a 2020  _notification.  
-0000cc90: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
-0000cca0: 7373 6167 655f 6964 3a0a 2020 2020 2020  ssage_id:.      
-0000ccb0: 2020 7061 796c 6f61 645b 2772 6570 6c79    payload['reply
-0000ccc0: 5f74 6f5f 6d65 7373 6167 655f 6964 275d  _to_message_id']
-0000ccd0: 203d 2072 6570 6c79 5f74 6f5f 6d65 7373   = reply_to_mess
-0000cce0: 6167 655f 6964 0a20 2020 2069 6620 7265  age_id.    if re
-0000ccf0: 706c 795f 6d61 726b 7570 3a0a 2020 2020  ply_markup:.    
-0000cd00: 2020 2020 7061 796c 6f61 645b 2772 6570      payload['rep
-0000cd10: 6c79 5f6d 6172 6b75 7027 5d20 3d20 6177  ly_markup'] = aw
-0000cd20: 6169 7420 5f63 6f6e 7665 7274 5f6d 6172  ait _convert_mar
-0000cd30: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
-0000cd40: 290a 2020 2020 6966 2074 696d 656f 7574  ).    if timeout
-0000cd50: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000cd60: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
-0000cd70: 696d 656f 7574 0a20 2020 2069 6620 616c  imeout.    if al
-0000cd80: 6c6f 775f 7365 6e64 696e 675f 7769 7468  low_sending_with
-0000cd90: 6f75 745f 7265 706c 7920 6973 206e 6f74  out_reply is not
-0000cda0: 204e 6f6e 653a 0a20 2020 2020 2020 2070   None:.        p
-0000cdb0: 6179 6c6f 6164 5b27 616c 6c6f 775f 7365  ayload['allow_se
-0000cdc0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-0000cdd0: 706c 7927 5d20 3d20 616c 6c6f 775f 7365  ply'] = allow_se
-0000cde0: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-0000cdf0: 706c 790a 2020 2020 6966 2070 726f 7465  ply.    if prote
-0000ce00: 6374 5f63 6f6e 7465 6e74 2069 7320 6e6f  ct_content is no
-0000ce10: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000ce20: 7061 796c 6f61 645b 2770 726f 7465 6374  payload['protect
-0000ce30: 5f63 6f6e 7465 6e74 275d 203d 2070 726f  _content'] = pro
-0000ce40: 7465 6374 5f63 6f6e 7465 6e74 0a20 2020  tect_content.   
-0000ce50: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
-0000ce60: 6164 5f69 643a 0a20 2020 2020 2020 2070  ad_id:.        p
-0000ce70: 6179 6c6f 6164 5b27 6d65 7373 6167 655f  ayload['message_
-0000ce80: 7468 7265 6164 5f69 6427 5d20 3d20 6d65  thread_id'] = me
-0000ce90: 7373 6167 655f 7468 7265 6164 5f69 640a  ssage_thread_id.
-0000cea0: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0000ceb0: 205f 7072 6f63 6573 735f 7265 7175 6573   _process_reques
-0000cec0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
-0000ced0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
-0000cee0: 6f61 6429 0a0a 0a23 2068 7474 7073 3a2f  oad)...# https:/
-0000cef0: 2f63 6f72 652e 7465 6c65 6772 616d 2e6f  /core.telegram.o
-0000cf00: 7267 2f62 6f74 732f 6170 6923 7365 7467  rg/bots/api#setg
-0000cf10: 616d 6573 636f 7265 0a61 7379 6e63 2064  amescore.async d
-0000cf20: 6566 2073 6574 5f67 616d 655f 7363 6f72  ef set_game_scor
-0000cf30: 6528 746f 6b65 6e2c 2075 7365 725f 6964  e(token, user_id
-0000cf40: 2c20 7363 6f72 652c 2066 6f72 6365 3d4e  , score, force=N
-0000cf50: 6f6e 652c 2064 6973 6162 6c65 5f65 6469  one, disable_edi
-0000cf60: 745f 6d65 7373 6167 653d 4e6f 6e65 2c20  t_message=None, 
-0000cf70: 6368 6174 5f69 643d 4e6f 6e65 2c20 6d65  chat_id=None, me
-0000cf80: 7373 6167 655f 6964 3d4e 6f6e 652c 0a20  ssage_id=None,. 
-0000cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfa0: 2020 696e 6c69 6e65 5f6d 6573 7361 6765    inline_message
-0000cfb0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2022  _id=None):.    "
-0000cfc0: 2222 0a20 2020 2055 7365 2074 6869 7320  "".    Use this 
-0000cfd0: 6d65 7468 6f64 2074 6f20 7365 7420 7468  method to set th
-0000cfe0: 6520 7363 6f72 6520 6f66 2074 6865 2073  e score of the s
-0000cff0: 7065 6369 6669 6564 2075 7365 7220 696e  pecified user in
-0000d000: 2061 2067 616d 652e 204f 6e20 7375 6363   a game. On succ
-0000d010: 6573 732c 2069 6620 7468 6520 6d65 7373  ess, if the mess
-0000d020: 6167 6520 7761 7320 7365 6e74 2062 7920  age was sent by 
-0000d030: 7468 6520 626f 742c 2072 6574 7572 6e73  the bot, returns
-0000d040: 2074 6865 2065 6469 7465 6420 4d65 7373   the edited Mess
-0000d050: 6167 652c 206f 7468 6572 7769 7365 2072  age, otherwise r
-0000d060: 6574 7572 6e73 2054 7275 652e 2052 6574  eturns True. Ret
-0000d070: 7572 6e73 2061 6e20 6572 726f 722c 2069  urns an error, i
-0000d080: 6620 7468 6520 6e65 7720 7363 6f72 6520  f the new score 
-0000d090: 6973 206e 6f74 2067 7265 6174 6572 2074  is not greater t
-0000d0a0: 6861 6e20 7468 6520 7573 6572 2773 2063  han the user's c
-0000d0b0: 7572 7265 6e74 2073 636f 7265 2069 6e20  urrent score in 
-0000d0c0: 7468 6520 6368 6174 2e0a 2020 2020 3a70  the chat..    :p
-0000d0d0: 6172 616d 2074 6f6b 656e 3a20 426f 7427  aram token: Bot'
-0000d0e0: 7320 746f 6b65 6e20 2879 6f75 2064 6f6e  s token (you don
-0000d0f0: 2774 206e 6565 6420 746f 2066 696c 6c20  't need to fill 
-0000d100: 7468 6973 290a 2020 2020 3a70 6172 616d  this).    :param
-0000d110: 2075 7365 725f 6964 3a20 5573 6572 2069   user_id: User i
-0000d120: 6465 6e74 6966 6965 720a 2020 2020 3a70  dentifier.    :p
-0000d130: 6172 616d 2073 636f 7265 3a20 4e65 7720  aram score: New 
-0000d140: 7363 6f72 652c 206d 7573 7420 6265 206e  score, must be n
-0000d150: 6f6e 2d6e 6567 6174 6976 650a 2020 2020  on-negative.    
-0000d160: 3a70 6172 616d 2066 6f72 6365 3a20 284f  :param force: (O
-0000d170: 7074 696f 6e61 6c29 2050 6173 7320 5472  ptional) Pass Tr
-0000d180: 7565 2c20 6966 2074 6865 2068 6967 6820  ue, if the high 
-0000d190: 7363 6f72 6520 6973 2061 6c6c 6f77 6564  score is allowed
-0000d1a0: 2074 6f20 6465 6372 6561 7365 2e20 5468   to decrease. Th
-0000d1b0: 6973 2063 616e 2062 6520 7573 6566 756c  is can be useful
-0000d1c0: 2077 6865 6e20 6669 7869 6e67 206d 6973   when fixing mis
-0000d1d0: 7461 6b65 7320 6f72 2062 616e 6e69 6e67  takes or banning
-0000d1e0: 2063 6865 6174 6572 730a 2020 2020 3a70   cheaters.    :p
-0000d1f0: 6172 616d 2064 6973 6162 6c65 5f65 6469  aram disable_edi
-0000d200: 745f 6d65 7373 6167 653a 2028 4f70 7469  t_message: (Opti
-0000d210: 6f6e 616c 2920 5061 7373 2054 7275 652c  onal) Pass True,
-0000d220: 2069 6620 7468 6520 6761 6d65 206d 6573   if the game mes
-0000d230: 7361 6765 2073 686f 756c 6420 6e6f 7420  sage should not 
-0000d240: 6265 2061 7574 6f6d 6174 6963 616c 6c79  be automatically
-0000d250: 2065 6469 7465 6420 746f 2069 6e63 6c75   edited to inclu
-0000d260: 6465 2074 6865 2063 7572 7265 6e74 2073  de the current s
-0000d270: 636f 7265 626f 6172 640a 2020 2020 3a70  coreboard.    :p
-0000d280: 6172 616d 2063 6861 745f 6964 3a20 284f  aram chat_id: (O
-0000d290: 7074 696f 6e61 6c2c 2072 6571 7569 7265  ptional, require
-0000d2a0: 6420 6966 2069 6e6c 696e 655f 6d65 7373  d if inline_mess
-0000d2b0: 6167 655f 6964 2069 7320 6e6f 7420 7370  age_id is not sp
-0000d2c0: 6563 6966 6965 6429 2055 6e69 7175 6520  ecified) Unique 
-0000d2d0: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
-0000d2e0: 6865 2074 6172 6765 7420 6368 6174 2028  he target chat (
-0000d2f0: 6f72 2075 7365 726e 616d 6520 6f66 2074  or username of t
-0000d300: 6865 2074 6172 6765 7420 6368 616e 6e65  he target channe
-0000d310: 6c20 696e 2074 6865 2066 6f72 6d61 7420  l in the format 
-0000d320: 4063 6861 6e6e 656c 7573 6572 6e61 6d65  @channelusername
-0000d330: 290a 2020 2020 3a70 6172 616d 206d 6573  ).    :param mes
-0000d340: 7361 6765 5f69 643a 2028 4f70 7469 6f6e  sage_id: (Option
-0000d350: 616c 2c20 7265 7175 6972 6564 2069 6620  al, required if 
-0000d360: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000d370: 6420 6973 206e 6f74 2073 7065 6369 6669  d is not specifi
-0000d380: 6564 2920 556e 6971 7565 2069 6465 6e74  ed) Unique ident
-0000d390: 6966 6965 7220 6f66 2074 6865 2073 656e  ifier of the sen
-0000d3a0: 7420 6d65 7373 6167 650a 2020 2020 3a70  t message.    :p
-0000d3b0: 6172 616d 2069 6e6c 696e 655f 6d65 7373  aram inline_mess
-0000d3c0: 6167 655f 6964 3a20 284f 7074 696f 6e61  age_id: (Optiona
-0000d3d0: 6c2c 2072 6571 7569 7265 6420 6966 2063  l, required if c
-0000d3e0: 6861 745f 6964 2061 6e64 206d 6573 7361  hat_id and messa
-0000d3f0: 6765 5f69 6420 6172 6520 6e6f 7420 7370  ge_id are not sp
-0000d400: 6563 6966 6965 6429 2049 6465 6e74 6966  ecified) Identif
-0000d410: 6965 7220 6f66 2074 6865 2069 6e6c 696e  ier of the inlin
-0000d420: 6520 6d65 7373 6167 650a 2020 2020 3a72  e message.    :r
-0000d430: 6574 7572 6e3a 0a20 2020 2022 2222 0a20  eturn:.    """. 
-0000d440: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
-0000d450: 7227 7365 7447 616d 6553 636f 7265 270a  r'setGameScore'.
-0000d460: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
-0000d470: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
-0000d480: 642c 2027 7363 6f72 6527 3a20 7363 6f72  d, 'score': scor
-0000d490: 657d 0a20 2020 2069 6620 666f 7263 6520  e}.    if force 
-0000d4a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000d4b0: 2020 2020 2070 6179 6c6f 6164 5b27 666f       payload['fo
-0000d4c0: 7263 6527 5d20 3d20 666f 7263 650a 2020  rce'] = force.  
-0000d4d0: 2020 6966 2063 6861 745f 6964 3a0a 2020    if chat_id:.  
-0000d4e0: 2020 2020 2020 7061 796c 6f61 645b 2763        payload['c
-0000d4f0: 6861 745f 6964 275d 203d 2063 6861 745f  hat_id'] = chat_
-0000d500: 6964 0a20 2020 2069 6620 6d65 7373 6167  id.    if messag
-0000d510: 655f 6964 3a0a 2020 2020 2020 2020 7061  e_id:.        pa
-0000d520: 796c 6f61 645b 276d 6573 7361 6765 5f69  yload['message_i
-0000d530: 6427 5d20 3d20 6d65 7373 6167 655f 6964  d'] = message_id
-0000d540: 0a20 2020 2069 6620 696e 6c69 6e65 5f6d  .    if inline_m
-0000d550: 6573 7361 6765 5f69 643a 0a20 2020 2020  essage_id:.     
-0000d560: 2020 2070 6179 6c6f 6164 5b27 696e 6c69     payload['inli
-0000d570: 6e65 5f6d 6573 7361 6765 5f69 6427 5d20  ne_message_id'] 
-0000d580: 3d20 696e 6c69 6e65 5f6d 6573 7361 6765  = inline_message
-0000d590: 5f69 640a 2020 2020 6966 2064 6973 6162  _id.    if disab
-0000d5a0: 6c65 5f65 6469 745f 6d65 7373 6167 6520  le_edit_message 
-0000d5b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000d5c0: 2020 2020 2070 6179 6c6f 6164 5b27 6469       payload['di
-0000d5d0: 7361 626c 655f 6564 6974 5f6d 6573 7361  sable_edit_messa
-0000d5e0: 6765 275d 203d 2064 6973 6162 6c65 5f65  ge'] = disable_e
-0000d5f0: 6469 745f 6d65 7373 6167 650a 2020 2020  dit_message.    
-0000d600: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000d610: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000d620: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000d630: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-0000d640: 0a0a 0a23 2068 7474 7073 3a2f 2f63 6f72  ...# https://cor
-0000d650: 652e 7465 6c65 6772 616d 2e6f 7267 2f62  e.telegram.org/b
-0000d660: 6f74 732f 6170 6923 6765 7467 616d 6568  ots/api#getgameh
-0000d670: 6967 6873 636f 7265 730a 6173 796e 6320  ighscores.async 
-0000d680: 6465 6620 6765 745f 6761 6d65 5f68 6967  def get_game_hig
-0000d690: 685f 7363 6f72 6573 2874 6f6b 656e 2c20  h_scores(token, 
-0000d6a0: 7573 6572 5f69 642c 2063 6861 745f 6964  user_id, chat_id
-0000d6b0: 3d4e 6f6e 652c 206d 6573 7361 6765 5f69  =None, message_i
-0000d6c0: 643d 4e6f 6e65 2c20 696e 6c69 6e65 5f6d  d=None, inline_m
-0000d6d0: 6573 7361 6765 5f69 643d 4e6f 6e65 293a  essage_id=None):
-0000d6e0: 0a20 2020 2022 2222 0a20 2020 2055 7365  .    """.    Use
-0000d6f0: 2074 6869 7320 6d65 7468 6f64 2074 6f20   this method to 
-0000d700: 6765 7420 6461 7461 2066 6f72 2068 6967  get data for hig
-0000d710: 6820 7363 6f72 6520 7461 626c 6573 2e20  h score tables. 
-0000d720: 5769 6c6c 2072 6574 7572 6e20 7468 6520  Will return the 
-0000d730: 7363 6f72 6520 6f66 2074 6865 2073 7065  score of the spe
-0000d740: 6369 6669 6564 2075 7365 7220 616e 6420  cified user and 
-0000d750: 7365 7665 7261 6c20 6f66 2068 6973 206e  several of his n
-0000d760: 6569 6768 626f 7273 2069 6e20 6120 6761  eighbors in a ga
-0000d770: 6d65 2e20 4f6e 2073 7563 6365 7373 2c20  me. On success, 
-0000d780: 7265 7475 726e 7320 616e 2041 7272 6179  returns an Array
-0000d790: 206f 6620 4761 6d65 4869 6768 5363 6f72   of GameHighScor
-0000d7a0: 6520 6f62 6a65 6374 732e 0a20 2020 2054  e objects..    T
-0000d7b0: 6869 7320 6d65 7468 6f64 2077 696c 6c20  his method will 
-0000d7c0: 6375 7272 656e 746c 7920 7265 7475 726e  currently return
-0000d7d0: 2073 636f 7265 7320 666f 7220 7468 6520   scores for the 
-0000d7e0: 7461 7267 6574 2075 7365 722c 2070 6c75  target user, plu
-0000d7f0: 7320 7477 6f20 6f66 2068 6973 2063 6c6f  s two of his clo
-0000d800: 7365 7374 206e 6569 6768 626f 7273 206f  sest neighbors o
-0000d810: 6e20 6561 6368 2073 6964 652e 2057 696c  n each side. Wil
-0000d820: 6c20 616c 736f 2072 6574 7572 6e20 7468  l also return th
-0000d830: 6520 746f 7020 7468 7265 6520 7573 6572  e top three user
-0000d840: 7320 6966 2074 6865 2075 7365 7220 616e  s if the user an
-0000d850: 6420 6869 7320 6e65 6967 6862 6f72 7320  d his neighbors 
-0000d860: 6172 6520 6e6f 7420 616d 6f6e 6720 7468  are not among th
-0000d870: 656d 2e20 506c 6561 7365 206e 6f74 6520  em. Please note 
-0000d880: 7468 6174 2074 6869 7320 6265 6861 7669  that this behavi
-0000d890: 6f72 2069 7320 7375 626a 6563 7420 746f  or is subject to
-0000d8a0: 2063 6861 6e67 652e 0a20 2020 203a 7061   change..    :pa
-0000d8b0: 7261 6d20 746f 6b65 6e3a 2042 6f74 2773  ram token: Bot's
-0000d8c0: 2074 6f6b 656e 2028 796f 7520 646f 6e27   token (you don'
-0000d8d0: 7420 6e65 6564 2074 6f20 6669 6c6c 2074  t need to fill t
-0000d8e0: 6869 7329 0a20 2020 203a 7061 7261 6d20  his).    :param 
-0000d8f0: 7573 6572 5f69 643a 2054 6172 6765 7420  user_id: Target 
-0000d900: 7573 6572 2069 640a 2020 2020 3a70 6172  user id.    :par
+00007640: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00007650: 2020 7061 796c 6f61 645b 2761 6c6c 6f77    payload['allow
+00007660: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+00007670: 5f72 6570 6c79 275d 203d 2061 6c6c 6f77  _reply'] = allow
+00007680: 5f73 656e 6469 6e67 5f77 6974 686f 7574  _sending_without
+00007690: 5f72 6570 6c79 0d0a 2020 2020 6966 2070  _reply..    if p
+000076a0: 726f 7465 6374 5f63 6f6e 7465 6e74 2069  rotect_content i
+000076b0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000076c0: 2020 2020 2070 6179 6c6f 6164 5b27 7072       payload['pr
+000076d0: 6f74 6563 745f 636f 6e74 656e 7427 5d20  otect_content'] 
+000076e0: 3d20 7072 6f74 6563 745f 636f 6e74 656e  = protect_conten
+000076f0: 740d 0a20 2020 2069 6620 7769 6474 683a  t..    if width:
+00007700: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00007710: 645b 2777 6964 7468 275d 203d 2077 6964  d['width'] = wid
+00007720: 7468 0d0a 2020 2020 6966 2068 6569 6768  th..    if heigh
+00007730: 743a 0d0a 2020 2020 2020 2020 7061 796c  t:..        payl
+00007740: 6f61 645b 2768 6569 6768 7427 5d20 3d20  oad['height'] = 
+00007750: 6865 6967 6874 0d0a 2020 2020 6966 206d  height..    if m
+00007760: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00007770: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00007780: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
+00007790: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
+000077a0: 655f 7468 7265 6164 5f69 640d 0a20 2020  e_thread_id..   
+000077b0: 2069 6620 6861 735f 7370 6f69 6c65 7220   if has_spoiler 
+000077c0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000077d0: 2020 2020 2020 7061 796c 6f61 645b 2768        payload['h
+000077e0: 6173 5f73 706f 696c 6572 275d 203d 2068  as_spoiler'] = h
+000077f0: 6173 5f73 706f 696c 6572 0d0a 2020 2020  as_spoiler..    
+00007800: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00007810: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00007820: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00007830: 6179 6c6f 6164 2c20 6669 6c65 733d 6669  ayload, files=fi
+00007840: 6c65 732c 206d 6574 686f 643d 2770 6f73  les, method='pos
+00007850: 7427 290d 0a0d 0a0d 0a64 6566 2073 656e  t')......def sen
+00007860: 645f 766f 6963 6528 746f 6b65 6e2c 2063  d_voice(token, c
+00007870: 6861 745f 6964 2c20 766f 6963 652c 2063  hat_id, voice, c
+00007880: 6170 7469 6f6e 3d4e 6f6e 652c 2064 7572  aption=None, dur
+00007890: 6174 696f 6e3d 4e6f 6e65 2c20 7265 706c  ation=None, repl
+000078a0: 795f 746f 5f6d 6573 7361 6765 5f69 643d  y_to_message_id=
+000078b0: 4e6f 6e65 2c20 7265 706c 795f 6d61 726b  None, reply_mark
+000078c0: 7570 3d4e 6f6e 652c 0d0a 2020 2020 2020  up=None,..      
+000078d0: 2020 2020 2020 2020 2070 6172 7365 5f6d           parse_m
+000078e0: 6f64 653d 4e6f 6e65 2c20 6469 7361 626c  ode=None, disabl
+000078f0: 655f 6e6f 7469 6669 6361 7469 6f6e 3d4e  e_notification=N
+00007900: 6f6e 652c 2074 696d 656f 7574 3d4e 6f6e  one, timeout=Non
+00007910: 652c 2063 6170 7469 6f6e 5f65 6e74 6974  e, caption_entit
+00007920: 6965 733d 4e6f 6e65 2c0d 0a20 2020 2020  ies=None,..     
+00007930: 2020 2020 2020 2020 2020 616c 6c6f 775f            allow_
+00007940: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00007950: 7265 706c 793d 4e6f 6e65 2c20 7072 6f74  reply=None, prot
+00007960: 6563 745f 636f 6e74 656e 743d 4e6f 6e65  ect_content=None
+00007970: 2c20 6d65 7373 6167 655f 7468 7265 6164  , message_thread
+00007980: 5f69 643d 4e6f 6e65 293a 0d0a 2020 2020  _id=None):..    
+00007990: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+000079a0: 656e 6456 6f69 6365 270d 0a20 2020 2070  endVoice'..    p
+000079b0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+000079c0: 6964 273a 2063 6861 745f 6964 7d0d 0a20  id': chat_id}.. 
+000079d0: 2020 2066 696c 6573 203d 204e 6f6e 650d     files = None.
+000079e0: 0a20 2020 2069 6620 6e6f 7420 7574 696c  .    if not util
+000079f0: 2e69 735f 7374 7269 6e67 2876 6f69 6365  .is_string(voice
+00007a00: 293a 0d0a 2020 2020 2020 2020 6669 6c65  ):..        file
+00007a10: 7320 3d20 7b27 766f 6963 6527 3a20 766f  s = {'voice': vo
+00007a20: 6963 657d 0d0a 2020 2020 656c 7365 3a0d  ice}..    else:.
+00007a30: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007a40: 5b27 766f 6963 6527 5d20 3d20 766f 6963  ['voice'] = voic
+00007a50: 650d 0a20 2020 2069 6620 6361 7074 696f  e..    if captio
+00007a60: 6e3a 0d0a 2020 2020 2020 2020 7061 796c  n:..        payl
+00007a70: 6f61 645b 2763 6170 7469 6f6e 275d 203d  oad['caption'] =
+00007a80: 2063 6170 7469 6f6e 0d0a 2020 2020 6966   caption..    if
+00007a90: 2064 7572 6174 696f 6e3a 0d0a 2020 2020   duration:..    
+00007aa0: 2020 2020 7061 796c 6f61 645b 2764 7572      payload['dur
+00007ab0: 6174 696f 6e27 5d20 3d20 6475 7261 7469  ation'] = durati
+00007ac0: 6f6e 0d0a 2020 2020 6966 2072 6570 6c79  on..    if reply
+00007ad0: 5f74 6f5f 6d65 7373 6167 655f 6964 3a0d  _to_message_id:.
+00007ae0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007af0: 5b27 7265 706c 795f 746f 5f6d 6573 7361  ['reply_to_messa
+00007b00: 6765 5f69 6427 5d20 3d20 7265 706c 795f  ge_id'] = reply_
+00007b10: 746f 5f6d 6573 7361 6765 5f69 640d 0a20  to_message_id.. 
+00007b20: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
+00007b30: 7570 3a0d 0a20 2020 2020 2020 2070 6179  up:..        pay
+00007b40: 6c6f 6164 5b27 7265 706c 795f 6d61 726b  load['reply_mark
+00007b50: 7570 275d 203d 205f 636f 6e76 6572 745f  up'] = _convert_
+00007b60: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
+00007b70: 6b75 7029 0d0a 2020 2020 6966 2070 6172  kup)..    if par
+00007b80: 7365 5f6d 6f64 653a 0d0a 2020 2020 2020  se_mode:..      
+00007b90: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
+00007ba0: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
+00007bb0: 6d6f 6465 0d0a 2020 2020 6966 2064 6973  mode..    if dis
+00007bc0: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+00007bd0: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
+00007be0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007bf0: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
+00007c00: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
+00007c10: 655f 6e6f 7469 6669 6361 7469 6f6e 0d0a  e_notification..
+00007c20: 2020 2020 6966 2074 696d 656f 7574 3a0d      if timeout:.
+00007c30: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007c40: 5b27 7469 6d65 6f75 7427 5d20 3d20 7469  ['timeout'] = ti
+00007c50: 6d65 6f75 740d 0a20 2020 2069 6620 6361  meout..    if ca
+00007c60: 7074 696f 6e5f 656e 7469 7469 6573 3a0d  ption_entities:.
+00007c70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00007c80: 5b27 6361 7074 696f 6e5f 656e 7469 7469  ['caption_entiti
+00007c90: 6573 275d 203d 206a 736f 6e2e 6475 6d70  es'] = json.dump
+00007ca0: 7328 7479 7065 732e 4d65 7373 6167 6545  s(types.MessageE
+00007cb0: 6e74 6974 792e 746f 5f6c 6973 745f 6f66  ntity.to_list_of
+00007cc0: 5f64 6963 7473 2863 6170 7469 6f6e 5f65  _dicts(caption_e
+00007cd0: 6e74 6974 6965 7329 290d 0a20 2020 2069  ntities))..    i
+00007ce0: 6620 616c 6c6f 775f 7365 6e64 696e 675f  f allow_sending_
+00007cf0: 7769 7468 6f75 745f 7265 706c 7920 6973  without_reply is
+00007d00: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00007d10: 2020 2020 7061 796c 6f61 645b 2761 6c6c      payload['all
+00007d20: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00007d30: 7574 5f72 6570 6c79 275d 203d 2061 6c6c  ut_reply'] = all
+00007d40: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00007d50: 7574 5f72 6570 6c79 0d0a 2020 2020 6966  ut_reply..    if
+00007d60: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00007d70: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00007d80: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00007d90: 7072 6f74 6563 745f 636f 6e74 656e 7427  protect_content'
+00007da0: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
+00007db0: 656e 740d 0a20 2020 2069 6620 6d65 7373  ent..    if mess
+00007dc0: 6167 655f 7468 7265 6164 5f69 643a 0d0a  age_thread_id:..
+00007dd0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00007de0: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+00007df0: 6964 275d 203d 206d 6573 7361 6765 5f74  id'] = message_t
+00007e00: 6872 6561 645f 6964 0d0a 2020 2020 7265  hread_id..    re
+00007e10: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00007e20: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00007e30: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00007e40: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+00007e50: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
+00007e60: 290d 0a0d 0a0d 0a64 6566 2073 656e 645f  )......def send_
+00007e70: 7669 6465 6f5f 6e6f 7465 2874 6f6b 656e  video_note(token
+00007e80: 2c20 6368 6174 5f69 642c 2064 6174 612c  , chat_id, data,
+00007e90: 2064 7572 6174 696f 6e3d 4e6f 6e65 2c20   duration=None, 
+00007ea0: 6c65 6e67 7468 3d4e 6f6e 652c 2072 6570  length=None, rep
+00007eb0: 6c79 5f74 6f5f 6d65 7373 6167 655f 6964  ly_to_message_id
+00007ec0: 3d4e 6f6e 652c 2072 6570 6c79 5f6d 6172  =None, reply_mar
+00007ed0: 6b75 703d 4e6f 6e65 2c0d 0a20 2020 2020  kup=None,..     
+00007ee0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00007ef0: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+00007f00: 696f 6e3d 4e6f 6e65 2c20 7469 6d65 6f75  ion=None, timeou
+00007f10: 743d 4e6f 6e65 2c20 7468 756d 623d 4e6f  t=None, thumb=No
+00007f20: 6e65 2c20 616c 6c6f 775f 7365 6e64 696e  ne, allow_sendin
+00007f30: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
+00007f40: 4e6f 6e65 2c20 7072 6f74 6563 745f 636f  None, protect_co
+00007f50: 6e74 656e 743d 4e6f 6e65 2c0d 0a20 2020  ntent=None,..   
+00007f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f70: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
+00007f80: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+00007f90: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
+00007fa0: 6e64 5669 6465 6f4e 6f74 6527 0d0a 2020  ndVideoNote'..  
+00007fb0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00007fc0: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+00007fd0: 0d0a 2020 2020 6669 6c65 7320 3d20 4e6f  ..    files = No
+00007fe0: 6e65 0d0a 2020 2020 6966 206e 6f74 2075  ne..    if not u
+00007ff0: 7469 6c2e 6973 5f73 7472 696e 6728 6461  til.is_string(da
+00008000: 7461 293a 0d0a 2020 2020 2020 2020 6669  ta):..        fi
+00008010: 6c65 7320 3d20 7b27 7669 6465 6f5f 6e6f  les = {'video_no
+00008020: 7465 273a 2064 6174 617d 0d0a 2020 2020  te': data}..    
+00008030: 656c 7365 3a0d 0a20 2020 2020 2020 2070  else:..        p
+00008040: 6179 6c6f 6164 5b27 7669 6465 6f5f 6e6f  ayload['video_no
+00008050: 7465 275d 203d 2064 6174 610d 0a20 2020  te'] = data..   
+00008060: 2069 6620 6475 7261 7469 6f6e 3a0d 0a20   if duration:.. 
+00008070: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008080: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
+00008090: 6174 696f 6e0d 0a20 2020 2069 6620 6c65  ation..    if le
+000080a0: 6e67 7468 2061 6e64 2028 7374 7228 6c65  ngth and (str(le
+000080b0: 6e67 7468 292e 6973 6469 6769 7428 2920  ngth).isdigit() 
+000080c0: 616e 6420 696e 7428 6c65 6e67 7468 2920  and int(length) 
+000080d0: 3c3d 2036 3339 293a 0d0a 2020 2020 2020  <= 639):..      
+000080e0: 2020 7061 796c 6f61 645b 276c 656e 6774    payload['lengt
+000080f0: 6827 5d20 3d20 6c65 6e67 7468 0d0a 2020  h'] = length..  
+00008100: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00008110: 2070 6179 6c6f 6164 5b27 6c65 6e67 7468   payload['length
+00008120: 275d 203d 2036 3339 2020 2320 7365 656d  '] = 639  # seem
+00008130: 7320 6c69 6b65 2069 7420 6973 204d 4158  s like it is MAX
+00008140: 206c 656e 6774 6820 7369 7a65 0d0a 2020   length size..  
+00008150: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
+00008160: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+00008170: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00008180: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
+00008190: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
+000081a0: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+000081b0: 7265 706c 795f 6d61 726b 7570 3a0d 0a20  reply_markup:.. 
+000081c0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+000081d0: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+000081e0: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+000081f0: 2872 6570 6c79 5f6d 6172 6b75 7029 0d0a  (reply_markup)..
+00008200: 2020 2020 6966 2064 6973 6162 6c65 5f6e      if disable_n
+00008210: 6f74 6966 6963 6174 696f 6e20 6973 206e  otification is n
+00008220: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00008230: 2020 7061 796c 6f61 645b 2764 6973 6162    payload['disab
+00008240: 6c65 5f6e 6f74 6966 6963 6174 696f 6e27  le_notification'
+00008250: 5d20 3d20 6469 7361 626c 655f 6e6f 7469  ] = disable_noti
+00008260: 6669 6361 7469 6f6e 0d0a 2020 2020 6966  fication..    if
+00008270: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+00008280: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+00008290: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+000082a0: 0a20 2020 2069 6620 7468 756d 623a 0d0a  .    if thumb:..
+000082b0: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+000082c0: 7469 6c2e 6973 5f73 7472 696e 6728 7468  til.is_string(th
+000082d0: 756d 6229 3a0d 0a20 2020 2020 2020 2020  umb):..         
+000082e0: 2020 2069 6620 6669 6c65 733a 0d0a 2020     if files:..  
+000082f0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00008300: 6c65 735b 2774 6875 6d62 275d 203d 2074  les['thumb'] = t
+00008310: 6875 6d62 0d0a 2020 2020 2020 2020 2020  humb..          
+00008320: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00008330: 2020 2020 2020 2020 2066 696c 6573 203d           files =
+00008340: 207b 2774 6875 6d62 273a 2074 6875 6d62   {'thumb': thumb
+00008350: 7d0d 0a20 2020 2020 2020 2065 6c73 653a  }..        else:
+00008360: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00008370: 796c 6f61 645b 2774 6875 6d62 275d 203d  yload['thumb'] =
+00008380: 2074 6875 6d62 0d0a 2020 2020 6966 2061   thumb..    if a
+00008390: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
+000083a0: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
+000083b0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+000083c0: 2070 6179 6c6f 6164 5b27 616c 6c6f 775f   payload['allow_
+000083d0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+000083e0: 7265 706c 7927 5d20 3d20 616c 6c6f 775f  reply'] = allow_
+000083f0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00008400: 7265 706c 790d 0a20 2020 2069 6620 7072  reply..    if pr
+00008410: 6f74 6563 745f 636f 6e74 656e 7420 6973  otect_content is
+00008420: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00008430: 2020 2020 7061 796c 6f61 645b 2770 726f      payload['pro
+00008440: 7465 6374 5f63 6f6e 7465 6e74 275d 203d  tect_content'] =
+00008450: 2070 726f 7465 6374 5f63 6f6e 7465 6e74   protect_content
+00008460: 0d0a 2020 2020 6966 206d 6573 7361 6765  ..    if message
+00008470: 5f74 6872 6561 645f 6964 3a0d 0a20 2020  _thread_id:..   
+00008480: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00008490: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+000084a0: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+000084b0: 6164 5f69 640d 0a20 2020 2072 6574 7572  ad_id..    retur
+000084c0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+000084d0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+000084e0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+000084f0: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
+00008500: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+00008510: 0d0a 0d0a 6465 6620 7365 6e64 5f61 7564  ....def send_aud
+00008520: 696f 2874 6f6b 656e 2c20 6368 6174 5f69  io(token, chat_i
+00008530: 642c 2061 7564 696f 2c20 6361 7074 696f  d, audio, captio
+00008540: 6e3d 4e6f 6e65 2c20 6475 7261 7469 6f6e  n=None, duration
+00008550: 3d4e 6f6e 652c 2070 6572 666f 726d 6572  =None, performer
+00008560: 3d4e 6f6e 652c 2074 6974 6c65 3d4e 6f6e  =None, title=Non
+00008570: 652c 2072 6570 6c79 5f74 6f5f 6d65 7373  e, reply_to_mess
+00008580: 6167 655f 6964 3d4e 6f6e 652c 0d0a 2020  age_id=None,..  
+00008590: 2020 2020 2020 2020 2020 2020 2072 6570               rep
+000085a0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 2c20  ly_markup=None, 
+000085b0: 7061 7273 655f 6d6f 6465 3d4e 6f6e 652c  parse_mode=None,
+000085c0: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+000085d0: 6174 696f 6e3d 4e6f 6e65 2c20 7469 6d65  ation=None, time
+000085e0: 6f75 743d 4e6f 6e65 2c20 7468 756d 623d  out=None, thumb=
+000085f0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
+00008600: 2020 2020 2020 6361 7074 696f 6e5f 656e        caption_en
+00008610: 7469 7469 6573 3d4e 6f6e 652c 2061 6c6c  tities=None, all
+00008620: 6f77 5f73 656e 6469 6e67 5f77 6974 686f  ow_sending_witho
+00008630: 7574 5f72 6570 6c79 3d4e 6f6e 652c 2070  ut_reply=None, p
+00008640: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+00008650: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+00008660: 6561 645f 6964 3d4e 6f6e 6529 3a0d 0a20  ead_id=None):.. 
+00008670: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00008680: 7227 7365 6e64 4175 6469 6f27 0d0a 2020  r'sendAudio'..  
+00008690: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+000086a0: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+000086b0: 0d0a 2020 2020 6669 6c65 7320 3d20 4e6f  ..    files = No
+000086c0: 6e65 0d0a 2020 2020 6966 206e 6f74 2075  ne..    if not u
+000086d0: 7469 6c2e 6973 5f73 7472 696e 6728 6175  til.is_string(au
+000086e0: 6469 6f29 3a0d 0a20 2020 2020 2020 2066  dio):..        f
+000086f0: 696c 6573 203d 207b 2761 7564 696f 273a  iles = {'audio':
+00008700: 2061 7564 696f 7d0d 0a20 2020 2065 6c73   audio}..    els
+00008710: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00008720: 6f61 645b 2761 7564 696f 275d 203d 2061  oad['audio'] = a
+00008730: 7564 696f 0d0a 2020 2020 6966 2063 6170  udio..    if cap
+00008740: 7469 6f6e 3a0d 0a20 2020 2020 2020 2070  tion:..        p
+00008750: 6179 6c6f 6164 5b27 6361 7074 696f 6e27  ayload['caption'
+00008760: 5d20 3d20 6361 7074 696f 6e0d 0a20 2020  ] = caption..   
+00008770: 2069 6620 6475 7261 7469 6f6e 3a0d 0a20   if duration:.. 
+00008780: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008790: 6475 7261 7469 6f6e 275d 203d 2064 7572  duration'] = dur
+000087a0: 6174 696f 6e0d 0a20 2020 2069 6620 7065  ation..    if pe
+000087b0: 7266 6f72 6d65 723a 0d0a 2020 2020 2020  rformer:..      
+000087c0: 2020 7061 796c 6f61 645b 2770 6572 666f    payload['perfo
+000087d0: 726d 6572 275d 203d 2070 6572 666f 726d  rmer'] = perform
+000087e0: 6572 0d0a 2020 2020 6966 2074 6974 6c65  er..    if title
+000087f0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00008800: 6164 5b27 7469 746c 6527 5d20 3d20 7469  ad['title'] = ti
+00008810: 746c 650d 0a20 2020 2069 6620 7265 706c  tle..    if repl
+00008820: 795f 746f 5f6d 6573 7361 6765 5f69 643a  y_to_message_id:
+00008830: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00008840: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
+00008850: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
+00008860: 5f74 6f5f 6d65 7373 6167 655f 6964 0d0a  _to_message_id..
+00008870: 2020 2020 6966 2072 6570 6c79 5f6d 6172      if reply_mar
+00008880: 6b75 703a 0d0a 2020 2020 2020 2020 7061  kup:..        pa
+00008890: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
+000088a0: 6b75 7027 5d20 3d20 5f63 6f6e 7665 7274  kup'] = _convert
+000088b0: 5f6d 6172 6b75 7028 7265 706c 795f 6d61  _markup(reply_ma
+000088c0: 726b 7570 290d 0a20 2020 2069 6620 7061  rkup)..    if pa
+000088d0: 7273 655f 6d6f 6465 3a0d 0a20 2020 2020  rse_mode:..     
+000088e0: 2020 2070 6179 6c6f 6164 5b27 7061 7273     payload['pars
+000088f0: 655f 6d6f 6465 275d 203d 2070 6172 7365  e_mode'] = parse
+00008900: 5f6d 6f64 650d 0a20 2020 2069 6620 6469  _mode..    if di
+00008910: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
+00008920: 6f6e 2069 7320 6e6f 7420 4e6f 6e65 3a0d  on is not None:.
+00008930: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00008940: 5b27 6469 7361 626c 655f 6e6f 7469 6669  ['disable_notifi
+00008950: 6361 7469 6f6e 275d 203d 2064 6973 6162  cation'] = disab
+00008960: 6c65 5f6e 6f74 6966 6963 6174 696f 6e0d  le_notification.
+00008970: 0a20 2020 2069 6620 7469 6d65 6f75 743a  .    if timeout:
+00008980: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00008990: 645b 2774 696d 656f 7574 275d 203d 2074  d['timeout'] = t
+000089a0: 696d 656f 7574 0d0a 2020 2020 6966 2074  imeout..    if t
+000089b0: 6875 6d62 3a0d 0a20 2020 2020 2020 2069  humb:..        i
+000089c0: 6620 6e6f 7420 7574 696c 2e69 735f 7374  f not util.is_st
+000089d0: 7269 6e67 2874 6875 6d62 293a 0d0a 2020  ring(thumb):..  
+000089e0: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
+000089f0: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+00008a00: 2020 2020 2066 696c 6573 5b27 7468 756d       files['thum
+00008a10: 6227 5d20 3d20 7468 756d 620d 0a20 2020  b'] = thumb..   
+00008a20: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00008a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a40: 6669 6c65 7320 3d20 7b27 7468 756d 6227  files = {'thumb'
+00008a50: 3a20 7468 756d 627d 0d0a 2020 2020 2020  : thumb}..      
+00008a60: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00008a70: 2020 2020 2070 6179 6c6f 6164 5b27 7468       payload['th
+00008a80: 756d 6227 5d20 3d20 7468 756d 620d 0a20  umb'] = thumb.. 
+00008a90: 2020 2069 6620 6361 7074 696f 6e5f 656e     if caption_en
+00008aa0: 7469 7469 6573 3a0d 0a20 2020 2020 2020  tities:..       
+00008ab0: 2070 6179 6c6f 6164 5b27 6361 7074 696f   payload['captio
+00008ac0: 6e5f 656e 7469 7469 6573 275d 203d 206a  n_entities'] = j
+00008ad0: 736f 6e2e 6475 6d70 7328 7479 7065 732e  son.dumps(types.
+00008ae0: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
+00008af0: 5f6c 6973 745f 6f66 5f64 6963 7473 2863  _list_of_dicts(c
+00008b00: 6170 7469 6f6e 5f65 6e74 6974 6965 7329  aption_entities)
+00008b10: 290d 0a20 2020 2069 6620 616c 6c6f 775f  )..    if allow_
+00008b20: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+00008b30: 7265 706c 7920 6973 206e 6f74 204e 6f6e  reply is not Non
+00008b40: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00008b50: 6f61 645b 2761 6c6c 6f77 5f73 656e 6469  oad['allow_sendi
+00008b60: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00008b70: 275d 203d 2061 6c6c 6f77 5f73 656e 6469  '] = allow_sendi
+00008b80: 6e67 5f77 6974 686f 7574 5f72 6570 6c79  ng_without_reply
+00008b90: 0d0a 2020 2020 6966 2070 726f 7465 6374  ..    if protect
+00008ba0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+00008bb0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00008bc0: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
+00008bd0: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
+00008be0: 6563 745f 636f 6e74 656e 740d 0a20 2020  ect_content..   
+00008bf0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+00008c00: 6164 5f69 643a 0d0a 2020 2020 2020 2020  ad_id:..        
+00008c10: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+00008c20: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
+00008c30: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00008c40: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+00008c50: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00008c60: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00008c70: 7261 6d73 3d70 6179 6c6f 6164 2c20 6669  rams=payload, fi
+00008c80: 6c65 733d 6669 6c65 732c 206d 6574 686f  les=files, metho
+00008c90: 643d 2770 6f73 7427 290d 0a0d 0a0d 0a64  d='post')......d
+00008ca0: 6566 2073 656e 645f 6461 7461 2874 6f6b  ef send_data(tok
+00008cb0: 656e 2c20 6368 6174 5f69 642c 2064 6174  en, chat_id, dat
+00008cc0: 612c 2064 6174 615f 7479 7065 2c20 7265  a, data_type, re
+00008cd0: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+00008ce0: 643d 4e6f 6e65 2c20 7265 706c 795f 6d61  d=None, reply_ma
+00008cf0: 726b 7570 3d4e 6f6e 652c 2070 6172 7365  rkup=None, parse
+00008d00: 5f6d 6f64 653d 4e6f 6e65 2c0d 0a20 2020  _mode=None,..   
+00008d10: 2020 2020 2020 2020 2020 2064 6973 6162             disab
+00008d20: 6c65 5f6e 6f74 6966 6963 6174 696f 6e3d  le_notification=
+00008d30: 4e6f 6e65 2c20 7469 6d65 6f75 743d 4e6f  None, timeout=No
+00008d40: 6e65 2c20 6361 7074 696f 6e3d 4e6f 6e65  ne, caption=None
+00008d50: 2c20 7468 756d 623d 4e6f 6e65 2c20 6361  , thumb=None, ca
+00008d60: 7074 696f 6e5f 656e 7469 7469 6573 3d4e  ption_entities=N
+00008d70: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
+00008d80: 2020 2020 616c 6c6f 775f 7365 6e64 696e      allow_sendin
+00008d90: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
+00008da0: 4e6f 6e65 2c20 6469 7361 626c 655f 636f  None, disable_co
+00008db0: 6e74 656e 745f 7479 7065 5f64 6574 6563  ntent_type_detec
+00008dc0: 7469 6f6e 3d4e 6f6e 652c 2076 6973 6962  tion=None, visib
+00008dd0: 6c65 5f66 696c 655f 6e61 6d65 3d4e 6f6e  le_file_name=Non
+00008de0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00008df0: 2020 7072 6f74 6563 745f 636f 6e74 656e    protect_conten
+00008e00: 7420 3d20 4e6f 6e65 2c20 6d65 7373 6167  t = None, messag
+00008e10: 655f 7468 7265 6164 5f69 643d 4e6f 6e65  e_thread_id=None
+00008e20: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00008e30: 726c 203d 2067 6574 5f6d 6574 686f 645f  rl = get_method_
+00008e40: 6279 5f74 7970 6528 6461 7461 5f74 7970  by_type(data_typ
+00008e50: 6529 0d0a 2020 2020 7061 796c 6f61 6420  e)..    payload 
+00008e60: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00008e70: 6174 5f69 647d 0d0a 2020 2020 6669 6c65  at_id}..    file
+00008e80: 7320 3d20 4e6f 6e65 0d0a 2020 2020 6966  s = None..    if
+00008e90: 206e 6f74 2075 7469 6c2e 6973 5f73 7472   not util.is_str
+00008ea0: 696e 6728 6461 7461 293a 0d0a 2020 2020  ing(data):..    
+00008eb0: 2020 2020 6669 6c65 5f64 6174 6120 3d20      file_data = 
+00008ec0: 6461 7461 0d0a 2020 2020 2020 2020 6966  data..        if
+00008ed0: 2076 6973 6962 6c65 5f66 696c 655f 6e61   visible_file_na
+00008ee0: 6d65 3a0d 0a20 2020 2020 2020 2020 2020  me:..           
+00008ef0: 2066 696c 655f 6461 7461 203d 2028 7669   file_data = (vi
+00008f00: 7369 626c 655f 6669 6c65 5f6e 616d 652c  sible_file_name,
+00008f10: 2064 6174 6129 0d0a 2020 2020 2020 2020   data)..        
+00008f20: 6669 6c65 7320 3d20 7b64 6174 615f 7479  files = {data_ty
+00008f30: 7065 3a20 6669 6c65 5f64 6174 617d 0d0a  pe: file_data}..
+00008f40: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00008f50: 2020 2070 6179 6c6f 6164 5b64 6174 615f     payload[data_
+00008f60: 7479 7065 5d20 3d20 6461 7461 0d0a 2020  type] = data..  
+00008f70: 2020 6966 2072 6570 6c79 5f74 6f5f 6d65    if reply_to_me
+00008f80: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+00008f90: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
+00008fa0: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
+00008fb0: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
+00008fc0: 7361 6765 5f69 640d 0a20 2020 2069 6620  sage_id..    if 
+00008fd0: 7265 706c 795f 6d61 726b 7570 3a0d 0a20  reply_markup:.. 
+00008fe0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00008ff0: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
+00009000: 205f 636f 6e76 6572 745f 6d61 726b 7570   _convert_markup
+00009010: 2872 6570 6c79 5f6d 6172 6b75 7029 0d0a  (reply_markup)..
+00009020: 2020 2020 6966 2070 6172 7365 5f6d 6f64      if parse_mod
+00009030: 6520 616e 6420 6461 7461 5f74 7970 6520  e and data_type 
+00009040: 3d3d 2027 646f 6375 6d65 6e74 273a 0d0a  == 'document':..
+00009050: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009060: 2770 6172 7365 5f6d 6f64 6527 5d20 3d20  'parse_mode'] = 
+00009070: 7061 7273 655f 6d6f 6465 0d0a 2020 2020  parse_mode..    
+00009080: 6966 2064 6973 6162 6c65 5f6e 6f74 6966  if disable_notif
+00009090: 6963 6174 696f 6e20 6973 206e 6f74 204e  ication is not N
+000090a0: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+000090b0: 796c 6f61 645b 2764 6973 6162 6c65 5f6e  yload['disable_n
+000090c0: 6f74 6966 6963 6174 696f 6e27 5d20 3d20  otification'] = 
+000090d0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+000090e0: 7469 6f6e 0d0a 2020 2020 6966 2074 696d  tion..    if tim
+000090f0: 656f 7574 3a0d 0a20 2020 2020 2020 2070  eout:..        p
+00009100: 6179 6c6f 6164 5b27 7469 6d65 6f75 7427  ayload['timeout'
+00009110: 5d20 3d20 7469 6d65 6f75 740d 0a20 2020  ] = timeout..   
+00009120: 2069 6620 6361 7074 696f 6e3a 0d0a 2020   if caption:..  
+00009130: 2020 2020 2020 7061 796c 6f61 645b 2763        payload['c
+00009140: 6170 7469 6f6e 275d 203d 2063 6170 7469  aption'] = capti
+00009150: 6f6e 0d0a 2020 2020 6966 2074 6875 6d62  on..    if thumb
+00009160: 3a0d 0a20 2020 2020 2020 2069 6620 6e6f  :..        if no
+00009170: 7420 7574 696c 2e69 735f 7374 7269 6e67  t util.is_string
+00009180: 2874 6875 6d62 293a 0d0a 2020 2020 2020  (thumb):..      
+00009190: 2020 2020 2020 6966 2066 696c 6573 3a0d        if files:.
+000091a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000091b0: 2066 696c 6573 5b27 7468 756d 6227 5d20   files['thumb'] 
+000091c0: 3d20 7468 756d 620d 0a20 2020 2020 2020  = thumb..       
+000091d0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+000091e0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+000091f0: 7320 3d20 7b27 7468 756d 6227 3a20 7468  s = {'thumb': th
+00009200: 756d 627d 0d0a 2020 2020 2020 2020 656c  umb}..        el
+00009210: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00009220: 2070 6179 6c6f 6164 5b27 7468 756d 6227   payload['thumb'
+00009230: 5d20 3d20 7468 756d 620d 0a20 2020 2069  ] = thumb..    i
+00009240: 6620 6361 7074 696f 6e5f 656e 7469 7469  f caption_entiti
+00009250: 6573 3a0d 0a20 2020 2020 2020 2070 6179  es:..        pay
+00009260: 6c6f 6164 5b27 6361 7074 696f 6e5f 656e  load['caption_en
+00009270: 7469 7469 6573 275d 203d 206a 736f 6e2e  tities'] = json.
+00009280: 6475 6d70 7328 7479 7065 732e 4d65 7373  dumps(types.Mess
+00009290: 6167 6545 6e74 6974 792e 746f 5f6c 6973  ageEntity.to_lis
+000092a0: 745f 6f66 5f64 6963 7473 2863 6170 7469  t_of_dicts(capti
+000092b0: 6f6e 5f65 6e74 6974 6965 7329 290d 0a20  on_entities)).. 
+000092c0: 2020 2069 6620 616c 6c6f 775f 7365 6e64     if allow_send
+000092d0: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+000092e0: 7920 6973 206e 6f74 204e 6f6e 653a 0d0a  y is not None:..
+000092f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00009300: 2761 6c6c 6f77 5f73 656e 6469 6e67 5f77  'allow_sending_w
+00009310: 6974 686f 7574 5f72 6570 6c79 275d 203d  ithout_reply'] =
+00009320: 2061 6c6c 6f77 5f73 656e 6469 6e67 5f77   allow_sending_w
+00009330: 6974 686f 7574 5f72 6570 6c79 0d0a 2020  ithout_reply..  
+00009340: 2020 6966 2070 726f 7465 6374 5f63 6f6e    if protect_con
+00009350: 7465 6e74 2069 7320 6e6f 7420 4e6f 6e65  tent is not None
+00009360: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00009370: 6164 5b27 7072 6f74 6563 745f 636f 6e74  ad['protect_cont
+00009380: 656e 7427 5d20 3d20 7072 6f74 6563 745f  ent'] = protect_
+00009390: 636f 6e74 656e 740d 0a20 2020 2069 6620  content..    if 
+000093a0: 6d65 7468 6f64 5f75 726c 203d 3d20 2773  method_url == 's
+000093b0: 656e 6444 6f63 756d 656e 7427 2061 6e64  endDocument' and
+000093c0: 2064 6973 6162 6c65 5f63 6f6e 7465 6e74   disable_content
+000093d0: 5f74 7970 655f 6465 7465 6374 696f 6e20  _type_detection 
+000093e0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000093f0: 2020 2020 2020 7061 796c 6f61 645b 2764        payload['d
+00009400: 6973 6162 6c65 5f63 6f6e 7465 6e74 5f74  isable_content_t
+00009410: 7970 655f 6465 7465 6374 696f 6e27 5d20  ype_detection'] 
+00009420: 3d20 6469 7361 626c 655f 636f 6e74 656e  = disable_conten
+00009430: 745f 7479 7065 5f64 6574 6563 7469 6f6e  t_type_detection
+00009440: 0d0a 2020 2020 6966 206d 6573 7361 6765  ..    if message
+00009450: 5f74 6872 6561 645f 6964 3a0d 0a20 2020  _thread_id:..   
+00009460: 2020 2020 2070 6179 6c6f 6164 5b27 6d65       payload['me
+00009470: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00009480: 5d20 3d20 6d65 7373 6167 655f 7468 7265  ] = message_thre
+00009490: 6164 5f69 640d 0a20 2020 2072 6574 7572  ad_id..    retur
+000094a0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+000094b0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+000094c0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+000094d0: 642c 2066 696c 6573 3d66 696c 6573 2c20  d, files=files, 
+000094e0: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+000094f0: 0d0a 0d0a 6465 6620 6765 745f 6d65 7468  ....def get_meth
+00009500: 6f64 5f62 795f 7479 7065 2864 6174 615f  od_by_type(data_
+00009510: 7479 7065 293a 0d0a 2020 2020 6966 2064  type):..    if d
+00009520: 6174 615f 7479 7065 203d 3d20 2764 6f63  ata_type == 'doc
+00009530: 756d 656e 7427 3a0d 0a20 2020 2020 2020  ument':..       
+00009540: 2072 6574 7572 6e20 7227 7365 6e64 446f   return r'sendDo
+00009550: 6375 6d65 6e74 270d 0a20 2020 2069 6620  cument'..    if 
+00009560: 6461 7461 5f74 7970 6520 3d3d 2027 7374  data_type == 'st
+00009570: 6963 6b65 7227 3a0d 0a20 2020 2020 2020  icker':..       
+00009580: 2072 6574 7572 6e20 7227 7365 6e64 5374   return r'sendSt
+00009590: 6963 6b65 7227 0d0a 0d0a 0d0a 6465 6620  icker'......def 
+000095a0: 6261 6e5f 6368 6174 5f6d 656d 6265 7228  ban_chat_member(
+000095b0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+000095c0: 7573 6572 5f69 642c 2075 6e74 696c 5f64  user_id, until_d
+000095d0: 6174 653d 4e6f 6e65 2c20 7265 766f 6b65  ate=None, revoke
+000095e0: 5f6d 6573 7361 6765 733d 4e6f 6e65 293a  _messages=None):
+000095f0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+00009600: 203d 2027 6261 6e43 6861 744d 656d 6265   = 'banChatMembe
+00009610: 7227 0d0a 2020 2020 7061 796c 6f61 6420  r'..    payload 
+00009620: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00009630: 6174 5f69 642c 2027 7573 6572 5f69 6427  at_id, 'user_id'
+00009640: 3a20 7573 6572 5f69 647d 0d0a 2020 2020  : user_id}..    
+00009650: 6966 2069 7369 6e73 7461 6e63 6528 756e  if isinstance(un
+00009660: 7469 6c5f 6461 7465 2c20 6461 7465 7469  til_date, dateti
+00009670: 6d65 293a 0d0a 2020 2020 2020 2020 7061  me):..        pa
+00009680: 796c 6f61 645b 2775 6e74 696c 5f64 6174  yload['until_dat
+00009690: 6527 5d20 3d20 756e 7469 6c5f 6461 7465  e'] = until_date
+000096a0: 2e74 696d 6573 7461 6d70 2829 0d0a 2020  .timestamp()..  
+000096b0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000096c0: 2070 6179 6c6f 6164 5b27 756e 7469 6c5f   payload['until_
+000096d0: 6461 7465 275d 203d 2075 6e74 696c 5f64  date'] = until_d
+000096e0: 6174 650d 0a20 2020 2069 6620 7265 766f  ate..    if revo
+000096f0: 6b65 5f6d 6573 7361 6765 7320 6973 206e  ke_messages is n
+00009700: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009710: 2020 7061 796c 6f61 645b 2772 6576 6f6b    payload['revok
+00009720: 655f 6d65 7373 6167 6573 275d 203d 2072  e_messages'] = r
+00009730: 6576 6f6b 655f 6d65 7373 6167 6573 0d0a  evoke_messages..
+00009740: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+00009750: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+00009760: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+00009770: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+00009780: 6f64 3d27 706f 7374 2729 0d0a 0d0a 0d0a  od='post')......
+00009790: 6465 6620 756e 6261 6e5f 6368 6174 5f6d  def unban_chat_m
+000097a0: 656d 6265 7228 746f 6b65 6e2c 2063 6861  ember(token, cha
+000097b0: 745f 6964 2c20 7573 6572 5f69 642c 206f  t_id, user_id, o
+000097c0: 6e6c 795f 6966 5f62 616e 6e65 6429 3a0d  nly_if_banned):.
+000097d0: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+000097e0: 3d20 2775 6e62 616e 4368 6174 4d65 6d62  = 'unbanChatMemb
+000097f0: 6572 270d 0a20 2020 2070 6179 6c6f 6164  er'..    payload
+00009800: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+00009810: 6861 745f 6964 2c20 2775 7365 725f 6964  hat_id, 'user_id
+00009820: 273a 2075 7365 725f 6964 7d0d 0a20 2020  ': user_id}..   
+00009830: 2069 6620 6f6e 6c79 5f69 665f 6261 6e6e   if only_if_bann
+00009840: 6564 2069 7320 6e6f 7420 4e6f 6e65 3a20  ed is not None: 
+00009850: 2023 204e 6f6e 6520 2f20 5472 7565 202f   # None / True /
+00009860: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
+00009870: 7061 796c 6f61 645b 276f 6e6c 795f 6966  payload['only_if
+00009880: 5f62 616e 6e65 6427 5d20 3d20 6f6e 6c79  _banned'] = only
+00009890: 5f69 665f 6261 6e6e 6564 0d0a 2020 2020  _if_banned..    
+000098a0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+000098b0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+000098c0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+000098d0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+000098e0: 706f 7374 2729 0d0a 0d0a 0d0a 6465 6620  post')......def 
+000098f0: 7265 7374 7269 6374 5f63 6861 745f 6d65  restrict_chat_me
+00009900: 6d62 6572 280d 0a20 2020 2020 2020 2074  mber(..        t
+00009910: 6f6b 656e 2c20 6368 6174 5f69 642c 2075  oken, chat_id, u
+00009920: 7365 725f 6964 2c20 756e 7469 6c5f 6461  ser_id, until_da
+00009930: 7465 3d4e 6f6e 652c 0d0a 2020 2020 2020  te=None,..      
+00009940: 2020 6361 6e5f 7365 6e64 5f6d 6573 7361    can_send_messa
+00009950: 6765 733d 4e6f 6e65 2c20 6361 6e5f 7365  ges=None, can_se
+00009960: 6e64 5f6d 6564 6961 5f6d 6573 7361 6765  nd_media_message
+00009970: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
+00009980: 2063 616e 5f73 656e 645f 706f 6c6c 733d   can_send_polls=
+00009990: 4e6f 6e65 2c20 6361 6e5f 7365 6e64 5f6f  None, can_send_o
+000099a0: 7468 6572 5f6d 6573 7361 6765 733d 4e6f  ther_messages=No
+000099b0: 6e65 2c0d 0a20 2020 2020 2020 2063 616e  ne,..        can
+000099c0: 5f61 6464 5f77 6562 5f70 6167 655f 7072  _add_web_page_pr
+000099d0: 6576 6965 7773 3d4e 6f6e 652c 2063 616e  eviews=None, can
+000099e0: 5f63 6861 6e67 655f 696e 666f 3d4e 6f6e  _change_info=Non
+000099f0: 652c 0d0a 2020 2020 2020 2020 6361 6e5f  e,..        can_
+00009a00: 696e 7669 7465 5f75 7365 7273 3d4e 6f6e  invite_users=Non
+00009a10: 652c 2063 616e 5f70 696e 5f6d 6573 7361  e, can_pin_messa
+00009a20: 6765 733d 4e6f 6e65 293a 0d0a 2020 2020  ges=None):..    
+00009a30: 6d65 7468 6f64 5f75 726c 203d 2027 7265  method_url = 're
+00009a40: 7374 7269 6374 4368 6174 4d65 6d62 6572  strictChatMember
+00009a50: 270d 0a20 2020 2070 6572 6d69 7373 696f  '..    permissio
+00009a60: 6e73 203d 207b 7d0d 0a20 2020 2069 6620  ns = {}..    if 
+00009a70: 6361 6e5f 7365 6e64 5f6d 6573 7361 6765  can_send_message
+00009a80: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+00009a90: 2020 2020 2020 2020 7065 726d 6973 7369          permissi
+00009aa0: 6f6e 735b 2763 616e 5f73 656e 645f 6d65  ons['can_send_me
+00009ab0: 7373 6167 6573 275d 203d 2063 616e 5f73  ssages'] = can_s
+00009ac0: 656e 645f 6d65 7373 6167 6573 0d0a 2020  end_messages..  
+00009ad0: 2020 6966 2063 616e 5f73 656e 645f 6d65    if can_send_me
+00009ae0: 6469 615f 6d65 7373 6167 6573 2069 7320  dia_messages is 
+00009af0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00009b00: 2020 2070 6572 6d69 7373 696f 6e73 5b27     permissions['
+00009b10: 6361 6e5f 7365 6e64 5f6d 6564 6961 5f6d  can_send_media_m
+00009b20: 6573 7361 6765 7327 5d20 3d20 6361 6e5f  essages'] = can_
+00009b30: 7365 6e64 5f6d 6564 6961 5f6d 6573 7361  send_media_messa
+00009b40: 6765 730d 0a20 2020 2069 6620 6361 6e5f  ges..    if can_
+00009b50: 7365 6e64 5f70 6f6c 6c73 2069 7320 6e6f  send_polls is no
+00009b60: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00009b70: 2070 6572 6d69 7373 696f 6e73 5b27 6361   permissions['ca
+00009b80: 6e5f 7365 6e64 5f70 6f6c 6c73 275d 203d  n_send_polls'] =
+00009b90: 2063 616e 5f73 656e 645f 706f 6c6c 730d   can_send_polls.
+00009ba0: 0a20 2020 2069 6620 6361 6e5f 7365 6e64  .    if can_send
+00009bb0: 5f6f 7468 6572 5f6d 6573 7361 6765 7320  _other_messages 
+00009bc0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00009bd0: 2020 2020 2020 7065 726d 6973 7369 6f6e        permission
+00009be0: 735b 2763 616e 5f73 656e 645f 6f74 6865  s['can_send_othe
+00009bf0: 725f 6d65 7373 6167 6573 275d 203d 2063  r_messages'] = c
+00009c00: 616e 5f73 656e 645f 6f74 6865 725f 6d65  an_send_other_me
+00009c10: 7373 6167 6573 0d0a 2020 2020 6966 2063  ssages..    if c
+00009c20: 616e 5f61 6464 5f77 6562 5f70 6167 655f  an_add_web_page_
+00009c30: 7072 6576 6965 7773 2069 7320 6e6f 7420  previews is not 
+00009c40: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+00009c50: 6572 6d69 7373 696f 6e73 5b27 6361 6e5f  ermissions['can_
+00009c60: 6164 645f 7765 625f 7061 6765 5f70 7265  add_web_page_pre
+00009c70: 7669 6577 7327 5d20 3d20 6361 6e5f 6164  views'] = can_ad
+00009c80: 645f 7765 625f 7061 6765 5f70 7265 7669  d_web_page_previ
+00009c90: 6577 730d 0a20 2020 2069 6620 6361 6e5f  ews..    if can_
+00009ca0: 6368 616e 6765 5f69 6e66 6f20 6973 206e  change_info is n
+00009cb0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009cc0: 2020 7065 726d 6973 7369 6f6e 735b 2763    permissions['c
+00009cd0: 616e 5f63 6861 6e67 655f 696e 666f 275d  an_change_info']
+00009ce0: 203d 2063 616e 5f63 6861 6e67 655f 696e   = can_change_in
+00009cf0: 666f 0d0a 2020 2020 6966 2063 616e 5f69  fo..    if can_i
+00009d00: 6e76 6974 655f 7573 6572 7320 6973 206e  nvite_users is n
+00009d10: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009d20: 2020 7065 726d 6973 7369 6f6e 735b 2763    permissions['c
+00009d30: 616e 5f69 6e76 6974 655f 7573 6572 7327  an_invite_users'
+00009d40: 5d20 3d20 6361 6e5f 696e 7669 7465 5f75  ] = can_invite_u
+00009d50: 7365 7273 0d0a 2020 2020 6966 2063 616e  sers..    if can
+00009d60: 5f70 696e 5f6d 6573 7361 6765 7320 6973  _pin_messages is
+00009d70: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00009d80: 2020 2020 7065 726d 6973 7369 6f6e 735b      permissions[
+00009d90: 2763 616e 5f70 696e 5f6d 6573 7361 6765  'can_pin_message
+00009da0: 7327 5d20 3d20 6361 6e5f 7069 6e5f 6d65  s'] = can_pin_me
+00009db0: 7373 6167 6573 0d0a 2020 2020 7065 726d  ssages..    perm
+00009dc0: 6973 7369 6f6e 735f 6a73 6f6e 203d 206a  issions_json = j
+00009dd0: 736f 6e2e 6475 6d70 7328 7065 726d 6973  son.dumps(permis
+00009de0: 7369 6f6e 7329 0d0a 2020 2020 7061 796c  sions)..    payl
+00009df0: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
+00009e00: 3a20 6368 6174 5f69 642c 2027 7573 6572  : chat_id, 'user
+00009e10: 5f69 6427 3a20 7573 6572 5f69 642c 2027  _id': user_id, '
+00009e20: 7065 726d 6973 7369 6f6e 7327 3a20 7065  permissions': pe
+00009e30: 726d 6973 7369 6f6e 735f 6a73 6f6e 7d0d  rmissions_json}.
+00009e40: 0a20 2020 2069 6620 756e 7469 6c5f 6461  .    if until_da
+00009e50: 7465 2069 7320 6e6f 7420 4e6f 6e65 3a0d  te is not None:.
+00009e60: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00009e70: 7374 616e 6365 2875 6e74 696c 5f64 6174  stance(until_dat
+00009e80: 652c 2064 6174 6574 696d 6529 3a0d 0a20  e, datetime):.. 
+00009e90: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+00009ea0: 6164 5b27 756e 7469 6c5f 6461 7465 275d  ad['until_date']
+00009eb0: 203d 2075 6e74 696c 5f64 6174 652e 7469   = until_date.ti
+00009ec0: 6d65 7374 616d 7028 290d 0a20 2020 2020  mestamp()..     
+00009ed0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00009ee0: 2020 2020 2020 7061 796c 6f61 645b 2775        payload['u
+00009ef0: 6e74 696c 5f64 6174 6527 5d20 3d20 756e  ntil_date'] = un
+00009f00: 7469 6c5f 6461 7465 0d0a 2020 2020 7265  til_date..    re
+00009f10: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+00009f20: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+00009f30: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+00009f40: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+00009f50: 7374 2729 0d0a 0d0a 0d0a 6465 6620 7072  st')......def pr
+00009f60: 6f6d 6f74 655f 6368 6174 5f6d 656d 6265  omote_chat_membe
+00009f70: 7228 0d0a 2020 2020 2020 2020 746f 6b65  r(..        toke
+00009f80: 6e2c 2063 6861 745f 6964 2c20 7573 6572  n, chat_id, user
+00009f90: 5f69 642c 2063 616e 5f63 6861 6e67 655f  _id, can_change_
+00009fa0: 696e 666f 3d4e 6f6e 652c 2063 616e 5f70  info=None, can_p
+00009fb0: 6f73 745f 6d65 7373 6167 6573 3d4e 6f6e  ost_messages=Non
+00009fc0: 652c 0d0a 2020 2020 2020 2020 6361 6e5f  e,..        can_
+00009fd0: 6564 6974 5f6d 6573 7361 6765 733d 4e6f  edit_messages=No
+00009fe0: 6e65 2c20 6361 6e5f 6465 6c65 7465 5f6d  ne, can_delete_m
+00009ff0: 6573 7361 6765 733d 4e6f 6e65 2c20 6361  essages=None, ca
+0000a000: 6e5f 696e 7669 7465 5f75 7365 7273 3d4e  n_invite_users=N
+0000a010: 6f6e 652c 0d0a 2020 2020 2020 2020 6361  one,..        ca
+0000a020: 6e5f 7265 7374 7269 6374 5f6d 656d 6265  n_restrict_membe
+0000a030: 7273 3d4e 6f6e 652c 2063 616e 5f70 696e  rs=None, can_pin
+0000a040: 5f6d 6573 7361 6765 733d 4e6f 6e65 2c20  _messages=None, 
+0000a050: 6361 6e5f 7072 6f6d 6f74 655f 6d65 6d62  can_promote_memb
+0000a060: 6572 733d 4e6f 6e65 2c0d 0a20 2020 2020  ers=None,..     
+0000a070: 2020 2069 735f 616e 6f6e 796d 6f75 733d     is_anonymous=
+0000a080: 4e6f 6e65 2c20 6361 6e5f 6d61 6e61 6765  None, can_manage
+0000a090: 5f63 6861 743d 4e6f 6e65 2c20 6361 6e5f  _chat=None, can_
+0000a0a0: 6d61 6e61 6765 5f76 6964 656f 5f63 6861  manage_video_cha
+0000a0b0: 7473 3d4e 6f6e 652c 0d0a 2020 2020 2020  ts=None,..      
+0000a0c0: 2020 6361 6e5f 6d61 6e61 6765 5f74 6f70    can_manage_top
+0000a0d0: 6963 733d 4e6f 6e65 293a 0d0a 2020 2020  ics=None):..    
+0000a0e0: 6d65 7468 6f64 5f75 726c 203d 2027 7072  method_url = 'pr
+0000a0f0: 6f6d 6f74 6543 6861 744d 656d 6265 7227  omoteChatMember'
+0000a100: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000a110: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+0000a120: 5f69 642c 2027 7573 6572 5f69 6427 3a20  _id, 'user_id': 
+0000a130: 7573 6572 5f69 647d 0d0a 2020 2020 6966  user_id}..    if
+0000a140: 2063 616e 5f63 6861 6e67 655f 696e 666f   can_change_info
+0000a150: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000a160: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000a170: 6361 6e5f 6368 616e 6765 5f69 6e66 6f27  can_change_info'
+0000a180: 5d20 3d20 6361 6e5f 6368 616e 6765 5f69  ] = can_change_i
+0000a190: 6e66 6f0d 0a20 2020 2069 6620 6361 6e5f  nfo..    if can_
+0000a1a0: 706f 7374 5f6d 6573 7361 6765 7320 6973  post_messages is
+0000a1b0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0000a1c0: 2020 2020 7061 796c 6f61 645b 2763 616e      payload['can
+0000a1d0: 5f70 6f73 745f 6d65 7373 6167 6573 275d  _post_messages']
+0000a1e0: 203d 2063 616e 5f70 6f73 745f 6d65 7373   = can_post_mess
+0000a1f0: 6167 6573 0d0a 2020 2020 6966 2063 616e  ages..    if can
+0000a200: 5f65 6469 745f 6d65 7373 6167 6573 2069  _edit_messages i
+0000a210: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0000a220: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+0000a230: 6e5f 6564 6974 5f6d 6573 7361 6765 7327  n_edit_messages'
+0000a240: 5d20 3d20 6361 6e5f 6564 6974 5f6d 6573  ] = can_edit_mes
+0000a250: 7361 6765 730d 0a20 2020 2069 6620 6361  sages..    if ca
+0000a260: 6e5f 6465 6c65 7465 5f6d 6573 7361 6765  n_delete_message
+0000a270: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+0000a280: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000a290: 2763 616e 5f64 656c 6574 655f 6d65 7373  'can_delete_mess
+0000a2a0: 6167 6573 275d 203d 2063 616e 5f64 656c  ages'] = can_del
+0000a2b0: 6574 655f 6d65 7373 6167 6573 0d0a 2020  ete_messages..  
+0000a2c0: 2020 6966 2063 616e 5f69 6e76 6974 655f    if can_invite_
+0000a2d0: 7573 6572 7320 6973 206e 6f74 204e 6f6e  users is not Non
+0000a2e0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000a2f0: 6f61 645b 2763 616e 5f69 6e76 6974 655f  oad['can_invite_
+0000a300: 7573 6572 7327 5d20 3d20 6361 6e5f 696e  users'] = can_in
+0000a310: 7669 7465 5f75 7365 7273 0d0a 2020 2020  vite_users..    
+0000a320: 6966 2063 616e 5f72 6573 7472 6963 745f  if can_restrict_
+0000a330: 6d65 6d62 6572 7320 6973 206e 6f74 204e  members is not N
+0000a340: 6f6e 653a 0d0a 2020 2020 2020 2020 7061  one:..        pa
+0000a350: 796c 6f61 645b 2763 616e 5f72 6573 7472  yload['can_restr
+0000a360: 6963 745f 6d65 6d62 6572 7327 5d20 3d20  ict_members'] = 
+0000a370: 6361 6e5f 7265 7374 7269 6374 5f6d 656d  can_restrict_mem
+0000a380: 6265 7273 0d0a 2020 2020 6966 2063 616e  bers..    if can
+0000a390: 5f70 696e 5f6d 6573 7361 6765 7320 6973  _pin_messages is
+0000a3a0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0000a3b0: 2020 2020 7061 796c 6f61 645b 2763 616e      payload['can
+0000a3c0: 5f70 696e 5f6d 6573 7361 6765 7327 5d20  _pin_messages'] 
+0000a3d0: 3d20 6361 6e5f 7069 6e5f 6d65 7373 6167  = can_pin_messag
+0000a3e0: 6573 0d0a 2020 2020 6966 2063 616e 5f70  es..    if can_p
+0000a3f0: 726f 6d6f 7465 5f6d 656d 6265 7273 2069  romote_members i
+0000a400: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0000a410: 2020 2020 2070 6179 6c6f 6164 5b27 6361       payload['ca
+0000a420: 6e5f 7072 6f6d 6f74 655f 6d65 6d62 6572  n_promote_member
+0000a430: 7327 5d20 3d20 6361 6e5f 7072 6f6d 6f74  s'] = can_promot
+0000a440: 655f 6d65 6d62 6572 730d 0a20 2020 2069  e_members..    i
+0000a450: 6620 6973 5f61 6e6f 6e79 6d6f 7573 2069  f is_anonymous i
+0000a460: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0000a470: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
+0000a480: 5f61 6e6f 6e79 6d6f 7573 275d 203d 2069  _anonymous'] = i
+0000a490: 735f 616e 6f6e 796d 6f75 730d 0a20 2020  s_anonymous..   
+0000a4a0: 2069 6620 6361 6e5f 6d61 6e61 6765 5f63   if can_manage_c
+0000a4b0: 6861 7420 6973 206e 6f74 204e 6f6e 653a  hat is not None:
+0000a4c0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000a4d0: 645b 2763 616e 5f6d 616e 6167 655f 6368  d['can_manage_ch
+0000a4e0: 6174 275d 203d 2063 616e 5f6d 616e 6167  at'] = can_manag
+0000a4f0: 655f 6368 6174 0d0a 2020 2020 6966 2063  e_chat..    if c
+0000a500: 616e 5f6d 616e 6167 655f 7669 6465 6f5f  an_manage_video_
+0000a510: 6368 6174 7320 6973 206e 6f74 204e 6f6e  chats is not Non
+0000a520: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000a530: 6f61 645b 2763 616e 5f6d 616e 6167 655f  oad['can_manage_
+0000a540: 7669 6465 6f5f 6368 6174 7327 5d20 3d20  video_chats'] = 
+0000a550: 6361 6e5f 6d61 6e61 6765 5f76 6964 656f  can_manage_video
+0000a560: 5f63 6861 7473 0d0a 2020 2020 6966 2063  _chats..    if c
+0000a570: 616e 5f6d 616e 6167 655f 746f 7069 6373  an_manage_topics
+0000a580: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000a590: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000a5a0: 6361 6e5f 6d61 6e61 6765 5f74 6f70 6963  can_manage_topic
+0000a5b0: 7327 5d20 3d20 6361 6e5f 6d61 6e61 6765  s'] = can_manage
+0000a5c0: 5f74 6f70 6963 730d 0a20 2020 2072 6574  _topics..    ret
+0000a5d0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000a5e0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000a5f0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000a600: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000a610: 7427 290d 0a0d 0a0d 0a64 6566 2073 6574  t')......def set
+0000a620: 5f63 6861 745f 6164 6d69 6e69 7374 7261  _chat_administra
+0000a630: 746f 725f 6375 7374 6f6d 5f74 6974 6c65  tor_custom_title
+0000a640: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+0000a650: 2075 7365 725f 6964 2c20 6375 7374 6f6d   user_id, custom
+0000a660: 5f74 6974 6c65 293a 0d0a 2020 2020 6d65  _title):..    me
+0000a670: 7468 6f64 5f75 726c 203d 2027 7365 7443  thod_url = 'setC
+0000a680: 6861 7441 646d 696e 6973 7472 6174 6f72  hatAdministrator
+0000a690: 4375 7374 6f6d 5469 746c 6527 0d0a 2020  CustomTitle'..  
+0000a6a0: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
+0000a6b0: 2020 2020 2020 2027 6368 6174 5f69 6427         'chat_id'
+0000a6c0: 3a20 6368 6174 5f69 642c 2027 7573 6572  : chat_id, 'user
+0000a6d0: 5f69 6427 3a20 7573 6572 5f69 642c 2027  _id': user_id, '
+0000a6e0: 6375 7374 6f6d 5f74 6974 6c65 273a 2063  custom_title': c
+0000a6f0: 7573 746f 6d5f 7469 746c 650d 0a20 2020  ustom_title..   
+0000a700: 207d 0d0a 2020 2020 7265 7475 726e 205f   }..    return _
+0000a710: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000a720: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000a730: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000a740: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000a750: 0d0a 0d0a 6465 6620 6261 6e5f 6368 6174  ....def ban_chat
+0000a760: 5f73 656e 6465 725f 6368 6174 2874 6f6b  _sender_chat(tok
+0000a770: 656e 2c20 6368 6174 5f69 642c 2073 656e  en, chat_id, sen
+0000a780: 6465 725f 6368 6174 5f69 6429 3a0d 0a20  der_chat_id):.. 
+0000a790: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000a7a0: 2762 616e 4368 6174 5365 6e64 6572 4368  'banChatSenderCh
+0000a7b0: 6174 270d 0a20 2020 2070 6179 6c6f 6164  at'..    payload
+0000a7c0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+0000a7d0: 6861 745f 6964 2c20 2773 656e 6465 725f  hat_id, 'sender_
+0000a7e0: 6368 6174 5f69 6427 3a20 7365 6e64 6572  chat_id': sender
+0000a7f0: 5f63 6861 745f 6964 7d0d 0a20 2020 2072  _chat_id}..    r
+0000a800: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000a810: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000a820: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000a830: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+0000a840: 6f73 7427 290d 0a0d 0a0d 0a64 6566 2075  ost')......def u
+0000a850: 6e62 616e 5f63 6861 745f 7365 6e64 6572  nban_chat_sender
+0000a860: 5f63 6861 7428 746f 6b65 6e2c 2063 6861  _chat(token, cha
+0000a870: 745f 6964 2c20 7365 6e64 6572 5f63 6861  t_id, sender_cha
+0000a880: 745f 6964 293a 0d0a 2020 2020 6d65 7468  t_id):..    meth
+0000a890: 6f64 5f75 726c 203d 2027 756e 6261 6e43  od_url = 'unbanC
+0000a8a0: 6861 7453 656e 6465 7243 6861 7427 0d0a  hatSenderChat'..
+0000a8b0: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+0000a8c0: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+0000a8d0: 642c 2027 7365 6e64 6572 5f63 6861 745f  d, 'sender_chat_
+0000a8e0: 6964 273a 2073 656e 6465 725f 6368 6174  id': sender_chat
+0000a8f0: 5f69 647d 0d0a 2020 2020 7265 7475 726e  _id}..    return
+0000a900: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+0000a910: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+0000a920: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+0000a930: 2c20 6d65 7468 6f64 3d27 706f 7374 2729  , method='post')
+0000a940: 0d0a 0d0a 0d0a 6465 6620 7365 745f 6368  ......def set_ch
+0000a950: 6174 5f70 6572 6d69 7373 696f 6e73 2874  at_permissions(t
+0000a960: 6f6b 656e 2c20 6368 6174 5f69 642c 2070  oken, chat_id, p
+0000a970: 6572 6d69 7373 696f 6e73 293a 0d0a 2020  ermissions):..  
+0000a980: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000a990: 7365 7443 6861 7450 6572 6d69 7373 696f  setChatPermissio
+0000a9a0: 6e73 270d 0a20 2020 2070 6179 6c6f 6164  ns'..    payload
+0000a9b0: 203d 207b 0d0a 2020 2020 2020 2020 2763   = {..        'c
+0000a9c0: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+0000a9d0: 2c0d 0a20 2020 2020 2020 2027 7065 726d  ,..        'perm
+0000a9e0: 6973 7369 6f6e 7327 3a20 7065 726d 6973  issions': permis
+0000a9f0: 7369 6f6e 732e 746f 5f6a 736f 6e28 290d  sions.to_json().
+0000aa00: 0a20 2020 207d 0d0a 2020 2020 7265 7475  .    }..    retu
+0000aa10: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+0000aa20: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000aa30: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000aa40: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+0000aa50: 2729 0d0a 0d0a 0d0a 6465 6620 6372 6561  ')......def crea
+0000aa60: 7465 5f63 6861 745f 696e 7669 7465 5f6c  te_chat_invite_l
+0000aa70: 696e 6b28 746f 6b65 6e2c 2063 6861 745f  ink(token, chat_
+0000aa80: 6964 2c20 6e61 6d65 2c20 6578 7069 7265  id, name, expire
+0000aa90: 5f64 6174 652c 206d 656d 6265 725f 6c69  _date, member_li
+0000aaa0: 6d69 742c 2063 7265 6174 6573 5f6a 6f69  mit, creates_joi
+0000aab0: 6e5f 7265 7175 6573 7429 3a0d 0a20 2020  n_request):..   
+0000aac0: 206d 6574 686f 645f 7572 6c20 3d20 2763   method_url = 'c
+0000aad0: 7265 6174 6543 6861 7449 6e76 6974 654c  reateChatInviteL
+0000aae0: 696e 6b27 0d0a 2020 2020 7061 796c 6f61  ink'..    payloa
+0000aaf0: 6420 3d20 7b0d 0a20 2020 2020 2020 2027  d = {..        '
+0000ab00: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+0000ab10: 640d 0a20 2020 207d 0d0a 0d0a 2020 2020  d..    }....    
+0000ab20: 6966 2065 7870 6972 655f 6461 7465 2069  if expire_date i
+0000ab30: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0000ab40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000ab50: 6365 2865 7870 6972 655f 6461 7465 2c20  ce(expire_date, 
+0000ab60: 6461 7465 7469 6d65 293a 0d0a 2020 2020  datetime):..    
+0000ab70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000ab80: 2765 7870 6972 655f 6461 7465 275d 203d  'expire_date'] =
+0000ab90: 2065 7870 6972 655f 6461 7465 2e74 696d   expire_date.tim
+0000aba0: 6573 7461 6d70 2829 0d0a 2020 2020 2020  estamp()..      
+0000abb0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000abc0: 2020 2020 2070 6179 6c6f 6164 5b27 6578       payload['ex
+0000abd0: 7069 7265 5f64 6174 6527 5d20 3d20 6578  pire_date'] = ex
+0000abe0: 7069 7265 5f64 6174 650d 0a20 2020 2069  pire_date..    i
+0000abf0: 6620 6d65 6d62 6572 5f6c 696d 6974 3a0d  f member_limit:.
+0000ac00: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000ac10: 5b27 6d65 6d62 6572 5f6c 696d 6974 275d  ['member_limit']
+0000ac20: 203d 206d 656d 6265 725f 6c69 6d69 740d   = member_limit.
+0000ac30: 0a20 2020 2069 6620 6372 6561 7465 735f  .    if creates_
+0000ac40: 6a6f 696e 5f72 6571 7565 7374 2069 7320  join_request is 
+0000ac50: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000ac60: 2020 2070 6179 6c6f 6164 5b27 6372 6561     payload['crea
+0000ac70: 7465 735f 6a6f 696e 5f72 6571 7565 7374  tes_join_request
+0000ac80: 275d 203d 2063 7265 6174 6573 5f6a 6f69  '] = creates_joi
+0000ac90: 6e5f 7265 7175 6573 740d 0a20 2020 2069  n_request..    i
+0000aca0: 6620 6e61 6d65 3a0d 0a20 2020 2020 2020  f name:..       
+0000acb0: 2070 6179 6c6f 6164 5b27 6e61 6d65 275d   payload['name']
+0000acc0: 203d 206e 616d 650d 0a0d 0a20 2020 2072   = name....    r
+0000acd0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000ace0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000acf0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000ad00: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+0000ad10: 6f73 7427 290d 0a0d 0a0d 0a64 6566 2065  ost')......def e
+0000ad20: 6469 745f 6368 6174 5f69 6e76 6974 655f  dit_chat_invite_
+0000ad30: 6c69 6e6b 2874 6f6b 656e 2c20 6368 6174  link(token, chat
+0000ad40: 5f69 642c 2069 6e76 6974 655f 6c69 6e6b  _id, invite_link
+0000ad50: 2c20 6e61 6d65 2c20 6578 7069 7265 5f64  , name, expire_d
+0000ad60: 6174 652c 206d 656d 6265 725f 6c69 6d69  ate, member_limi
+0000ad70: 742c 2063 7265 6174 6573 5f6a 6f69 6e5f  t, creates_join_
+0000ad80: 7265 7175 6573 7429 3a0d 0a20 2020 206d  request):..    m
+0000ad90: 6574 686f 645f 7572 6c20 3d20 2765 6469  ethod_url = 'edi
+0000ada0: 7443 6861 7449 6e76 6974 654c 696e 6b27  tChatInviteLink'
+0000adb0: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000adc0: 7b0d 0a20 2020 2020 2020 2027 6368 6174  {..        'chat
+0000add0: 5f69 6427 3a20 6368 6174 5f69 642c 0d0a  _id': chat_id,..
+0000ade0: 2020 2020 2020 2020 2769 6e76 6974 655f          'invite_
+0000adf0: 6c69 6e6b 273a 2069 6e76 6974 655f 6c69  link': invite_li
+0000ae00: 6e6b 0d0a 2020 2020 7d0d 0a0d 0a20 2020  nk..    }....   
+0000ae10: 2069 6620 6578 7069 7265 5f64 6174 6520   if expire_date 
+0000ae20: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0000ae30: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000ae40: 6e63 6528 6578 7069 7265 5f64 6174 652c  nce(expire_date,
+0000ae50: 2064 6174 6574 696d 6529 3a0d 0a20 2020   datetime):..   
+0000ae60: 2020 2020 2020 2020 2070 6179 6c6f 6164           payload
+0000ae70: 5b27 6578 7069 7265 5f64 6174 6527 5d20  ['expire_date'] 
+0000ae80: 3d20 6578 7069 7265 5f64 6174 652e 7469  = expire_date.ti
+0000ae90: 6d65 7374 616d 7028 290d 0a20 2020 2020  mestamp()..     
+0000aea0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000aeb0: 2020 2020 2020 7061 796c 6f61 645b 2765        payload['e
+0000aec0: 7870 6972 655f 6461 7465 275d 203d 2065  xpire_date'] = e
+0000aed0: 7870 6972 655f 6461 7465 0d0a 0d0a 2020  xpire_date....  
+0000aee0: 2020 6966 206d 656d 6265 725f 6c69 6d69    if member_limi
+0000aef0: 7420 6973 206e 6f74 204e 6f6e 653a 0d0a  t is not None:..
+0000af00: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000af10: 276d 656d 6265 725f 6c69 6d69 7427 5d20  'member_limit'] 
+0000af20: 3d20 6d65 6d62 6572 5f6c 696d 6974 0d0a  = member_limit..
+0000af30: 2020 2020 6966 206e 616d 653a 0d0a 2020      if name:..  
+0000af40: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
+0000af50: 616d 6527 5d20 3d20 6e61 6d65 0d0a 2020  ame'] = name..  
+0000af60: 2020 6966 2063 7265 6174 6573 5f6a 6f69    if creates_joi
+0000af70: 6e5f 7265 7175 6573 7420 6973 206e 6f74  n_request is not
+0000af80: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000af90: 7061 796c 6f61 645b 2763 7265 6174 6573  payload['creates
+0000afa0: 5f6a 6f69 6e5f 7265 7175 6573 7427 5d20  _join_request'] 
+0000afb0: 3d20 6372 6561 7465 735f 6a6f 696e 5f72  = creates_join_r
+0000afc0: 6571 7565 7374 0d0a 0d0a 2020 2020 7265  equest....    re
+0000afd0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000afe0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000aff0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000b000: 6c6f 6164 2c20 6d65 7468 6f64 3d27 706f  load, method='po
+0000b010: 7374 2729 0d0a 0d0a 0d0a 6465 6620 7265  st')......def re
+0000b020: 766f 6b65 5f63 6861 745f 696e 7669 7465  voke_chat_invite
+0000b030: 5f6c 696e 6b28 746f 6b65 6e2c 2063 6861  _link(token, cha
+0000b040: 745f 6964 2c20 696e 7669 7465 5f6c 696e  t_id, invite_lin
+0000b050: 6b29 3a0d 0a20 2020 206d 6574 686f 645f  k):..    method_
+0000b060: 7572 6c20 3d20 2772 6576 6f6b 6543 6861  url = 'revokeCha
+0000b070: 7449 6e76 6974 654c 696e 6b27 0d0a 2020  tInviteLink'..  
+0000b080: 2020 7061 796c 6f61 6420 3d20 7b0d 0a20    payload = {.. 
+0000b090: 2020 2020 2020 2027 6368 6174 5f69 6427         'chat_id'
+0000b0a0: 3a20 6368 6174 5f69 642c 0d0a 2020 2020  : chat_id,..    
+0000b0b0: 2020 2020 2769 6e76 6974 655f 6c69 6e6b      'invite_link
+0000b0c0: 273a 2069 6e76 6974 655f 6c69 6e6b 0d0a  ': invite_link..
+0000b0d0: 2020 2020 7d0d 0a20 2020 2072 6574 7572      }..    retur
+0000b0e0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000b0f0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000b100: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000b110: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000b120: 290d 0a0d 0a0d 0a64 6566 2065 7870 6f72  )......def expor
+0000b130: 745f 6368 6174 5f69 6e76 6974 655f 6c69  t_chat_invite_li
+0000b140: 6e6b 2874 6f6b 656e 2c20 6368 6174 5f69  nk(token, chat_i
+0000b150: 6429 3a0d 0a20 2020 206d 6574 686f 645f  d):..    method_
+0000b160: 7572 6c20 3d20 2765 7870 6f72 7443 6861  url = 'exportCha
+0000b170: 7449 6e76 6974 654c 696e 6b27 0d0a 2020  tInviteLink'..  
+0000b180: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+0000b190: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+0000b1a0: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+0000b1b0: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000b1c0: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000b1d0: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000b1e0: 7468 6f64 3d27 706f 7374 2729 0d0a 0d0a  thod='post')....
+0000b1f0: 0d0a 6465 6620 6170 7072 6f76 655f 6368  ..def approve_ch
+0000b200: 6174 5f6a 6f69 6e5f 7265 7175 6573 7428  at_join_request(
+0000b210: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000b220: 7573 6572 5f69 6429 3a0d 0a20 2020 206d  user_id):..    m
+0000b230: 6574 686f 645f 7572 6c20 3d20 2761 7070  ethod_url = 'app
+0000b240: 726f 7665 4368 6174 4a6f 696e 5265 7175  roveChatJoinRequ
+0000b250: 6573 7427 0d0a 2020 2020 7061 796c 6f61  est'..    payloa
+0000b260: 6420 3d20 7b0d 0a20 2020 2020 2020 2027  d = {..        '
+0000b270: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+0000b280: 642c 0d0a 2020 2020 2020 2020 2775 7365  d,..        'use
+0000b290: 725f 6964 273a 2075 7365 725f 6964 0d0a  r_id': user_id..
+0000b2a0: 2020 2020 7d0d 0a20 2020 2072 6574 7572      }..    retur
+0000b2b0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000b2c0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000b2d0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000b2e0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000b2f0: 290d 0a0d 0a0d 0a64 6566 2064 6563 6c69  )......def decli
+0000b300: 6e65 5f63 6861 745f 6a6f 696e 5f72 6571  ne_chat_join_req
+0000b310: 7565 7374 2874 6f6b 656e 2c20 6368 6174  uest(token, chat
+0000b320: 5f69 642c 2075 7365 725f 6964 293a 0d0a  _id, user_id):..
+0000b330: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000b340: 2027 6465 636c 696e 6543 6861 744a 6f69   'declineChatJoi
+0000b350: 6e52 6571 7565 7374 270d 0a20 2020 2070  nRequest'..    p
+0000b360: 6179 6c6f 6164 203d 207b 0d0a 2020 2020  ayload = {..    
+0000b370: 2020 2020 2763 6861 745f 6964 273a 2063      'chat_id': c
+0000b380: 6861 745f 6964 2c0d 0a20 2020 2020 2020  hat_id,..       
+0000b390: 2027 7573 6572 5f69 6427 3a20 7573 6572   'user_id': user
+0000b3a0: 5f69 640d 0a20 2020 207d 0d0a 2020 2020  _id..    }..    
+0000b3b0: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+0000b3c0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+0000b3d0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+0000b3e0: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+0000b3f0: 706f 7374 2729 0d0a 0d0a 0d0a 6465 6620  post')......def 
+0000b400: 7365 745f 6368 6174 5f70 686f 746f 2874  set_chat_photo(t
+0000b410: 6f6b 656e 2c20 6368 6174 5f69 642c 2070  oken, chat_id, p
+0000b420: 686f 746f 293a 0d0a 2020 2020 6d65 7468  hoto):..    meth
+0000b430: 6f64 5f75 726c 203d 2027 7365 7443 6861  od_url = 'setCha
+0000b440: 7450 686f 746f 270d 0a20 2020 2070 6179  tPhoto'..    pay
+0000b450: 6c6f 6164 203d 207b 2763 6861 745f 6964  load = {'chat_id
+0000b460: 273a 2063 6861 745f 6964 7d0d 0a20 2020  ': chat_id}..   
+0000b470: 2066 696c 6573 203d 204e 6f6e 650d 0a20   files = None.. 
+0000b480: 2020 2069 6620 7574 696c 2e69 735f 7374     if util.is_st
+0000b490: 7269 6e67 2870 686f 746f 293a 0d0a 2020  ring(photo):..  
+0000b4a0: 2020 2020 2020 7061 796c 6f61 645b 2770        payload['p
+0000b4b0: 686f 746f 275d 203d 2070 686f 746f 0d0a  hoto'] = photo..
+0000b4c0: 2020 2020 656c 6966 2075 7469 6c2e 6973      elif util.is
+0000b4d0: 5f70 696c 5f69 6d61 6765 2870 686f 746f  _pil_image(photo
+0000b4e0: 293a 0d0a 2020 2020 2020 2020 6669 6c65  ):..        file
+0000b4f0: 7320 3d20 7b27 7068 6f74 6f27 3a20 7574  s = {'photo': ut
+0000b500: 696c 2e70 696c 5f69 6d61 6765 5f74 6f5f  il.pil_image_to_
+0000b510: 6669 6c65 2870 686f 746f 297d 0d0a 2020  file(photo)}..  
+0000b520: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000b530: 2066 696c 6573 203d 207b 2770 686f 746f   files = {'photo
+0000b540: 273a 2070 686f 746f 7d0d 0a20 2020 2072  ': photo}..    r
+0000b550: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000b560: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000b570: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000b580: 796c 6f61 642c 2066 696c 6573 3d66 696c  yload, files=fil
+0000b590: 6573 2c20 6d65 7468 6f64 3d27 706f 7374  es, method='post
+0000b5a0: 2729 0d0a 0d0a 0d0a 6465 6620 6465 6c65  ')......def dele
+0000b5b0: 7465 5f63 6861 745f 7068 6f74 6f28 746f  te_chat_photo(to
+0000b5c0: 6b65 6e2c 2063 6861 745f 6964 293a 0d0a  ken, chat_id):..
+0000b5d0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000b5e0: 2027 6465 6c65 7465 4368 6174 5068 6f74   'deleteChatPhot
+0000b5f0: 6f27 0d0a 2020 2020 7061 796c 6f61 6420  o'..    payload 
+0000b600: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+0000b610: 6174 5f69 647d 0d0a 2020 2020 7265 7475  at_id}..    retu
+0000b620: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+0000b630: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000b640: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000b650: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+0000b660: 2729 0d0a 0d0a 0d0a 6465 6620 7365 745f  ')......def set_
+0000b670: 6368 6174 5f74 6974 6c65 2874 6f6b 656e  chat_title(token
+0000b680: 2c20 6368 6174 5f69 642c 2074 6974 6c65  , chat_id, title
+0000b690: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+0000b6a0: 726c 203d 2027 7365 7443 6861 7454 6974  rl = 'setChatTit
+0000b6b0: 6c65 270d 0a20 2020 2070 6179 6c6f 6164  le'..    payload
+0000b6c0: 203d 207b 2763 6861 745f 6964 273a 2063   = {'chat_id': c
+0000b6d0: 6861 745f 6964 2c20 2774 6974 6c65 273a  hat_id, 'title':
+0000b6e0: 2074 6974 6c65 7d0d 0a20 2020 2072 6574   title}..    ret
+0000b6f0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000b700: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000b710: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000b720: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000b730: 7427 290d 0a0d 0a0d 0a64 6566 2067 6574  t')......def get
+0000b740: 5f6d 795f 636f 6d6d 616e 6473 2874 6f6b  _my_commands(tok
+0000b750: 656e 2c20 7363 6f70 653d 4e6f 6e65 2c20  en, scope=None, 
+0000b760: 6c61 6e67 7561 6765 5f63 6f64 653d 4e6f  language_code=No
+0000b770: 6e65 293a 0d0a 2020 2020 6d65 7468 6f64  ne):..    method
+0000b780: 5f75 726c 203d 2072 2767 6574 4d79 436f  _url = r'getMyCo
+0000b790: 6d6d 616e 6473 270d 0a20 2020 2070 6179  mmands'..    pay
+0000b7a0: 6c6f 6164 203d 207b 7d0d 0a20 2020 2069  load = {}..    i
+0000b7b0: 6620 7363 6f70 653a 0d0a 2020 2020 2020  f scope:..      
+0000b7c0: 2020 7061 796c 6f61 645b 2773 636f 7065    payload['scope
+0000b7d0: 275d 203d 2073 636f 7065 2e74 6f5f 6a73  '] = scope.to_js
+0000b7e0: 6f6e 2829 0d0a 2020 2020 6966 206c 616e  on()..    if lan
+0000b7f0: 6775 6167 655f 636f 6465 3a0d 0a20 2020  guage_code:..   
+0000b800: 2020 2020 2070 6179 6c6f 6164 5b27 6c61       payload['la
+0000b810: 6e67 7561 6765 5f63 6f64 6527 5d20 3d20  nguage_code'] = 
+0000b820: 6c61 6e67 7561 6765 5f63 6f64 650d 0a20  language_code.. 
+0000b830: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+0000b840: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+0000b850: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
+0000b860: 733d 7061 796c 6f61 6429 0d0a 0d0a 6465  s=payload)....de
+0000b870: 6620 7365 745f 6368 6174 5f6d 656e 755f  f set_chat_menu_
+0000b880: 6275 7474 6f6e 2874 6f6b 656e 2c20 6368  button(token, ch
+0000b890: 6174 5f69 643d 4e6f 6e65 2c20 6d65 6e75  at_id=None, menu
+0000b8a0: 5f62 7574 746f 6e3d 4e6f 6e65 293a 0d0a  _button=None):..
+0000b8b0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000b8c0: 2072 2773 6574 4368 6174 4d65 6e75 4275   r'setChatMenuBu
+0000b8d0: 7474 6f6e 270d 0a20 2020 2070 6179 6c6f  tton'..    paylo
+0000b8e0: 6164 203d 207b 7d0d 0a20 2020 2069 6620  ad = {}..    if 
+0000b8f0: 6368 6174 5f69 643a 0d0a 2020 2020 2020  chat_id:..      
+0000b900: 2020 7061 796c 6f61 645b 2763 6861 745f    payload['chat_
+0000b910: 6964 275d 203d 2063 6861 745f 6964 0d0a  id'] = chat_id..
+0000b920: 2020 2020 6966 206d 656e 755f 6275 7474      if menu_butt
+0000b930: 6f6e 3a0d 0a20 2020 2020 2020 2070 6179  on:..        pay
+0000b940: 6c6f 6164 5b27 6d65 6e75 5f62 7574 746f  load['menu_butto
+0000b950: 6e27 5d20 3d20 6d65 6e75 5f62 7574 746f  n'] = menu_butto
+0000b960: 6e2e 746f 5f6a 736f 6e28 290d 0a20 2020  n.to_json()..   
+0000b970: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+0000b980: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+0000b990: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+0000b9a0: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+0000b9b0: 2770 6f73 7427 290d 0a0d 0a64 6566 2067  'post')....def g
+0000b9c0: 6574 5f63 6861 745f 6d65 6e75 5f62 7574  et_chat_menu_but
+0000b9d0: 746f 6e28 746f 6b65 6e2c 2063 6861 745f  ton(token, chat_
+0000b9e0: 6964 3d4e 6f6e 6529 3a0d 0a20 2020 206d  id=None):..    m
+0000b9f0: 6574 686f 645f 7572 6c20 3d20 7227 6765  ethod_url = r'ge
+0000ba00: 7443 6861 744d 656e 7542 7574 746f 6e27  tChatMenuButton'
+0000ba10: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+0000ba20: 7b7d 0d0a 2020 2020 6966 2063 6861 745f  {}..    if chat_
+0000ba30: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000ba40: 6c6f 6164 5b27 6368 6174 5f69 6427 5d20  load['chat_id'] 
+0000ba50: 3d20 6368 6174 5f69 640d 0a20 2020 2072  = chat_id..    r
+0000ba60: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000ba70: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000ba80: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000ba90: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+0000baa0: 6f73 7427 290d 0a0d 0a0d 0a64 6566 2073  ost')......def s
+0000bab0: 6574 5f6d 795f 6465 6661 756c 745f 6164  et_my_default_ad
+0000bac0: 6d69 6e69 7374 7261 746f 725f 7269 6768  ministrator_righ
+0000bad0: 7473 2874 6f6b 656e 2c20 7269 6768 7473  ts(token, rights
+0000bae0: 3d4e 6f6e 652c 2066 6f72 5f63 6861 6e6e  =None, for_chann
+0000baf0: 656c 733d 4e6f 6e65 293a 0d0a 2020 2020  els=None):..    
+0000bb00: 6d65 7468 6f64 5f75 726c 203d 2072 2773  method_url = r's
+0000bb10: 6574 4d79 4465 6661 756c 7441 646d 696e  etMyDefaultAdmin
+0000bb20: 6973 7472 6174 6f72 5269 6768 7473 270d  istratorRights'.
+0000bb30: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000bb40: 7d0d 0a20 2020 2069 6620 7269 6768 7473  }..    if rights
+0000bb50: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000bb60: 6164 5b27 7269 6768 7473 275d 203d 2072  ad['rights'] = r
+0000bb70: 6967 6874 732e 746f 5f6a 736f 6e28 290d  ights.to_json().
+0000bb80: 0a20 2020 2069 6620 666f 725f 6368 616e  .    if for_chan
+0000bb90: 6e65 6c73 2069 7320 6e6f 7420 4e6f 6e65  nels is not None
+0000bba0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000bbb0: 6164 5b27 666f 725f 6368 616e 6e65 6c73  ad['for_channels
+0000bbc0: 275d 203d 2066 6f72 5f63 6861 6e6e 656c  '] = for_channel
+0000bbd0: 730d 0a20 2020 2072 6574 7572 6e20 5f6d  s..    return _m
+0000bbe0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000bbf0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000bc00: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
+0000bc10: 6574 686f 643d 2770 6f73 7427 290d 0a0d  ethod='post')...
+0000bc20: 0a0d 0a64 6566 2067 6574 5f6d 795f 6465  ...def get_my_de
+0000bc30: 6661 756c 745f 6164 6d69 6e69 7374 7261  fault_administra
+0000bc40: 746f 725f 7269 6768 7473 2874 6f6b 656e  tor_rights(token
+0000bc50: 2c20 666f 725f 6368 616e 6e65 6c73 3d4e  , for_channels=N
+0000bc60: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+0000bc70: 645f 7572 6c20 3d20 7227 6765 744d 7944  d_url = r'getMyD
+0000bc80: 6566 6175 6c74 4164 6d69 6e69 7374 7261  efaultAdministra
+0000bc90: 746f 7252 6967 6874 7327 0d0a 2020 2020  torRights'..    
+0000bca0: 7061 796c 6f61 6420 3d20 7b7d 0d0a 2020  payload = {}..  
+0000bcb0: 2020 6966 2066 6f72 5f63 6861 6e6e 656c    if for_channel
+0000bcc0: 733a 0d0a 2020 2020 2020 2020 7061 796c  s:..        payl
+0000bcd0: 6f61 645b 2766 6f72 5f63 6861 6e6e 656c  oad['for_channel
+0000bce0: 7327 5d20 3d20 666f 725f 6368 616e 6e65  s'] = for_channe
+0000bcf0: 6c73 0d0a 2020 2020 7265 7475 726e 205f  ls..    return _
+0000bd00: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000bd10: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000bd20: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000bd30: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000bd40: 0d0a 0d0a 6465 6620 7365 745f 6d79 5f63  ....def set_my_c
+0000bd50: 6f6d 6d61 6e64 7328 746f 6b65 6e2c 2063  ommands(token, c
+0000bd60: 6f6d 6d61 6e64 732c 2073 636f 7065 3d4e  ommands, scope=N
+0000bd70: 6f6e 652c 206c 616e 6775 6167 655f 636f  one, language_co
+0000bd80: 6465 3d4e 6f6e 6529 3a0d 0a20 2020 206d  de=None):..    m
+0000bd90: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
+0000bda0: 744d 7943 6f6d 6d61 6e64 7327 0d0a 2020  tMyCommands'..  
+0000bdb0: 2020 7061 796c 6f61 6420 3d20 7b27 636f    payload = {'co
+0000bdc0: 6d6d 616e 6473 273a 205f 636f 6e76 6572  mmands': _conver
+0000bdd0: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+0000bde0: 616c 697a 6162 6c65 2863 6f6d 6d61 6e64  alizable(command
+0000bdf0: 7329 7d0d 0a20 2020 2069 6620 7363 6f70  s)}..    if scop
+0000be00: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000be10: 6f61 645b 2773 636f 7065 275d 203d 2073  oad['scope'] = s
+0000be20: 636f 7065 2e74 6f5f 6a73 6f6e 2829 0d0a  cope.to_json()..
+0000be30: 2020 2020 6966 206c 616e 6775 6167 655f      if language_
+0000be40: 636f 6465 3a0d 0a20 2020 2020 2020 2070  code:..        p
+0000be50: 6179 6c6f 6164 5b27 6c61 6e67 7561 6765  ayload['language
+0000be60: 5f63 6f64 6527 5d20 3d20 6c61 6e67 7561  _code'] = langua
+0000be70: 6765 5f63 6f64 650d 0a20 2020 2072 6574  ge_code..    ret
+0000be80: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000be90: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000bea0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000beb0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000bec0: 7427 290d 0a0d 0a0d 0a64 6566 2064 656c  t')......def del
+0000bed0: 6574 655f 6d79 5f63 6f6d 6d61 6e64 7328  ete_my_commands(
+0000bee0: 746f 6b65 6e2c 2073 636f 7065 3d4e 6f6e  token, scope=Non
+0000bef0: 652c 206c 616e 6775 6167 655f 636f 6465  e, language_code
+0000bf00: 3d4e 6f6e 6529 3a0d 0a20 2020 206d 6574  =None):..    met
+0000bf10: 686f 645f 7572 6c20 3d20 7227 6465 6c65  hod_url = r'dele
+0000bf20: 7465 4d79 436f 6d6d 616e 6473 270d 0a20  teMyCommands'.. 
+0000bf30: 2020 2070 6179 6c6f 6164 203d 207b 7d0d     payload = {}.
+0000bf40: 0a20 2020 2069 6620 7363 6f70 653a 200d  .    if scope: .
+0000bf50: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000bf60: 5b27 7363 6f70 6527 5d20 3d20 7363 6f70  ['scope'] = scop
+0000bf70: 652e 746f 5f6a 736f 6e28 290d 0a20 2020  e.to_json()..   
+0000bf80: 2069 6620 6c61 6e67 7561 6765 5f63 6f64   if language_cod
+0000bf90: 653a 200d 0a20 2020 2020 2020 2070 6179  e: ..        pay
+0000bfa0: 6c6f 6164 5b27 6c61 6e67 7561 6765 5f63  load['language_c
+0000bfb0: 6f64 6527 5d20 3d20 6c61 6e67 7561 6765  ode'] = language
+0000bfc0: 5f63 6f64 650d 0a20 2020 2072 6574 7572  _code..    retur
+0000bfd0: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000bfe0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000bff0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000c000: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000c010: 290d 0a0d 0a0d 0a64 6566 2073 6574 5f63  )......def set_c
+0000c020: 6861 745f 6465 7363 7269 7074 696f 6e28  hat_description(
+0000c030: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000c040: 6465 7363 7269 7074 696f 6e29 3a0d 0a20  description):.. 
+0000c050: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+0000c060: 2773 6574 4368 6174 4465 7363 7269 7074  'setChatDescript
+0000c070: 696f 6e27 0d0a 2020 2020 7061 796c 6f61  ion'..    payloa
+0000c080: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000c090: 6368 6174 5f69 647d 0d0a 2020 2020 6966  chat_id}..    if
+0000c0a0: 2064 6573 6372 6970 7469 6f6e 2069 7320   description is 
+0000c0b0: 6e6f 7420 4e6f 6e65 3a20 2023 2041 6c6c  not None:  # All
+0000c0c0: 6f77 2065 6d70 7479 2073 7472 696e 6773  ow empty strings
+0000c0d0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000c0e0: 645b 2764 6573 6372 6970 7469 6f6e 275d  d['description']
+0000c0f0: 203d 2064 6573 6372 6970 7469 6f6e 0d0a   = description..
+0000c100: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000c110: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000c120: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000c130: 6d73 3d70 6179 6c6f 6164 2c20 6d65 7468  ms=payload, meth
+0000c140: 6f64 3d27 706f 7374 2729 0d0a 0d0a 0d0a  od='post')......
+0000c150: 6465 6620 7069 6e5f 6368 6174 5f6d 6573  def pin_chat_mes
+0000c160: 7361 6765 2874 6f6b 656e 2c20 6368 6174  sage(token, chat
+0000c170: 5f69 642c 206d 6573 7361 6765 5f69 642c  _id, message_id,
+0000c180: 2064 6973 6162 6c65 5f6e 6f74 6966 6963   disable_notific
+0000c190: 6174 696f 6e3d 4e6f 6e65 293a 0d0a 2020  ation=None):..  
+0000c1a0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000c1b0: 7069 6e43 6861 744d 6573 7361 6765 270d  pinChatMessage'.
+0000c1c0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+0000c1d0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+0000c1e0: 6964 2c20 276d 6573 7361 6765 5f69 6427  id, 'message_id'
+0000c1f0: 3a20 6d65 7373 6167 655f 6964 7d0d 0a20  : message_id}.. 
+0000c200: 2020 2069 6620 6469 7361 626c 655f 6e6f     if disable_no
+0000c210: 7469 6669 6361 7469 6f6e 2069 7320 6e6f  tification is no
+0000c220: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0000c230: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+0000c240: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+0000c250: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+0000c260: 6963 6174 696f 6e0d 0a20 2020 2072 6574  ication..    ret
+0000c270: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+0000c280: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+0000c290: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+0000c2a0: 6f61 642c 206d 6574 686f 643d 2770 6f73  oad, method='pos
+0000c2b0: 7427 290d 0a0d 0a0d 0a64 6566 2075 6e70  t')......def unp
+0000c2c0: 696e 5f63 6861 745f 6d65 7373 6167 6528  in_chat_message(
+0000c2d0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
+0000c2e0: 6d65 7373 6167 655f 6964 293a 0d0a 2020  message_id):..  
+0000c2f0: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
+0000c300: 756e 7069 6e43 6861 744d 6573 7361 6765  unpinChatMessage
+0000c310: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000c320: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+0000c330: 745f 6964 7d0d 0a20 2020 2069 6620 6d65  t_id}..    if me
+0000c340: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+0000c350: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
+0000c360: 6167 655f 6964 275d 203d 206d 6573 7361  age_id'] = messa
+0000c370: 6765 5f69 640d 0a20 2020 2072 6574 7572  ge_id..    retur
+0000c380: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+0000c390: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+0000c3a0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+0000c3b0: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+0000c3c0: 290d 0a0d 0a0d 0a64 6566 2075 6e70 696e  )......def unpin
+0000c3d0: 5f61 6c6c 5f63 6861 745f 6d65 7373 6167  _all_chat_messag
+0000c3e0: 6573 2874 6f6b 656e 2c20 6368 6174 5f69  es(token, chat_i
+0000c3f0: 6429 3a0d 0a20 2020 206d 6574 686f 645f  d):..    method_
+0000c400: 7572 6c20 3d20 2775 6e70 696e 416c 6c43  url = 'unpinAllC
+0000c410: 6861 744d 6573 7361 6765 7327 0d0a 2020  hatMessages'..  
+0000c420: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+0000c430: 6174 5f69 6427 3a20 6368 6174 5f69 647d  at_id': chat_id}
+0000c440: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+0000c450: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000c460: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000c470: 7261 6d73 3d70 6179 6c6f 6164 2c20 6d65  rams=payload, me
+0000c480: 7468 6f64 3d27 706f 7374 2729 0d0a 0d0a  thod='post')....
+0000c490: 0d0a 2320 5570 6461 7469 6e67 206d 6573  ..# Updating mes
+0000c4a0: 7361 6765 730d 0a0d 0a64 6566 2065 6469  sages....def edi
+0000c4b0: 745f 6d65 7373 6167 655f 7465 7874 2874  t_message_text(t
+0000c4c0: 6f6b 656e 2c20 7465 7874 2c20 6368 6174  oken, text, chat
+0000c4d0: 5f69 643d 4e6f 6e65 2c20 6d65 7373 6167  _id=None, messag
+0000c4e0: 655f 6964 3d4e 6f6e 652c 2069 6e6c 696e  e_id=None, inlin
+0000c4f0: 655f 6d65 7373 6167 655f 6964 3d4e 6f6e  e_message_id=Non
+0000c500: 652c 2070 6172 7365 5f6d 6f64 653d 4e6f  e, parse_mode=No
+0000c510: 6e65 2c0d 0a20 2020 2020 2020 2020 2020  ne,..           
+0000c520: 2020 2020 2020 2020 2020 2065 6e74 6974             entit
+0000c530: 6965 7320 3d20 4e6f 6e65 2c20 6469 7361  ies = None, disa
+0000c540: 626c 655f 7765 625f 7061 6765 5f70 7265  ble_web_page_pre
+0000c550: 7669 6577 3d4e 6f6e 652c 2072 6570 6c79  view=None, reply
+0000c560: 5f6d 6172 6b75 703d 4e6f 6e65 293a 0d0a  _markup=None):..
+0000c570: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+0000c580: 2072 2765 6469 744d 6573 7361 6765 5465   r'editMessageTe
+0000c590: 7874 270d 0a20 2020 2070 6179 6c6f 6164  xt'..    payload
+0000c5a0: 203d 207b 2774 6578 7427 3a20 7465 7874   = {'text': text
+0000c5b0: 7d0d 0a20 2020 2069 6620 6368 6174 5f69  }..    if chat_i
+0000c5c0: 643a 0d0a 2020 2020 2020 2020 7061 796c  d:..        payl
+0000c5d0: 6f61 645b 2763 6861 745f 6964 275d 203d  oad['chat_id'] =
+0000c5e0: 2063 6861 745f 6964 0d0a 2020 2020 6966   chat_id..    if
+0000c5f0: 206d 6573 7361 6765 5f69 643a 0d0a 2020   message_id:..  
+0000c600: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
+0000c610: 6573 7361 6765 5f69 6427 5d20 3d20 6d65  essage_id'] = me
+0000c620: 7373 6167 655f 6964 0d0a 2020 2020 6966  ssage_id..    if
+0000c630: 2069 6e6c 696e 655f 6d65 7373 6167 655f   inline_message_
+0000c640: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000c650: 6c6f 6164 5b27 696e 6c69 6e65 5f6d 6573  load['inline_mes
+0000c660: 7361 6765 5f69 6427 5d20 3d20 696e 6c69  sage_id'] = inli
+0000c670: 6e65 5f6d 6573 7361 6765 5f69 640d 0a20  ne_message_id.. 
+0000c680: 2020 2069 6620 7061 7273 655f 6d6f 6465     if parse_mode
+0000c690: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000c6a0: 6164 5b27 7061 7273 655f 6d6f 6465 275d  ad['parse_mode']
+0000c6b0: 203d 2070 6172 7365 5f6d 6f64 650d 0a20   = parse_mode.. 
+0000c6c0: 2020 2069 6620 656e 7469 7469 6573 3a0d     if entities:.
+0000c6d0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000c6e0: 5b27 656e 7469 7469 6573 275d 203d 206a  ['entities'] = j
+0000c6f0: 736f 6e2e 6475 6d70 7328 7479 7065 732e  son.dumps(types.
+0000c700: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
+0000c710: 5f6c 6973 745f 6f66 5f64 6963 7473 2865  _list_of_dicts(e
+0000c720: 6e74 6974 6965 7329 290d 0a20 2020 2069  ntities))..    i
+0000c730: 6620 6469 7361 626c 655f 7765 625f 7061  f disable_web_pa
+0000c740: 6765 5f70 7265 7669 6577 2069 7320 6e6f  ge_preview is no
+0000c750: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0000c760: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+0000c770: 655f 7765 625f 7061 6765 5f70 7265 7669  e_web_page_previ
+0000c780: 6577 275d 203d 2064 6973 6162 6c65 5f77  ew'] = disable_w
+0000c790: 6562 5f70 6167 655f 7072 6576 6965 770d  eb_page_preview.
+0000c7a0: 0a20 2020 2069 6620 7265 706c 795f 6d61  .    if reply_ma
+0000c7b0: 726b 7570 3a0d 0a20 2020 2020 2020 2070  rkup:..        p
+0000c7c0: 6179 6c6f 6164 5b27 7265 706c 795f 6d61  ayload['reply_ma
+0000c7d0: 726b 7570 275d 203d 205f 636f 6e76 6572  rkup'] = _conver
+0000c7e0: 745f 6d61 726b 7570 2872 6570 6c79 5f6d  t_markup(reply_m
+0000c7f0: 6172 6b75 7029 0d0a 2020 2020 7265 7475  arkup)..    retu
+0000c800: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+0000c810: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+0000c820: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+0000c830: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+0000c840: 2729 0d0a 0d0a 0d0a 6465 6620 6564 6974  ')......def edit
+0000c850: 5f6d 6573 7361 6765 5f63 6170 7469 6f6e  _message_caption
+0000c860: 2874 6f6b 656e 2c20 6361 7074 696f 6e2c  (token, caption,
+0000c870: 2063 6861 745f 6964 3d4e 6f6e 652c 206d   chat_id=None, m
+0000c880: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
+0000c890: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000c8a0: 643d 4e6f 6e65 2c0d 0a20 2020 2020 2020  d=None,..       
+0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8c0: 2020 7061 7273 655f 6d6f 6465 3d4e 6f6e    parse_mode=Non
+0000c8d0: 652c 2063 6170 7469 6f6e 5f65 6e74 6974  e, caption_entit
+0000c8e0: 6965 733d 4e6f 6e65 2c72 6570 6c79 5f6d  ies=None,reply_m
+0000c8f0: 6172 6b75 703d 4e6f 6e65 293a 0d0a 2020  arkup=None):..  
+0000c900: 2020 6d65 7468 6f64 5f75 726c 203d 2072    method_url = r
+0000c910: 2765 6469 744d 6573 7361 6765 4361 7074  'editMessageCapt
+0000c920: 696f 6e27 0d0a 2020 2020 7061 796c 6f61  ion'..    payloa
+0000c930: 6420 3d20 7b27 6361 7074 696f 6e27 3a20  d = {'caption': 
+0000c940: 6361 7074 696f 6e7d 0d0a 2020 2020 6966  caption}..    if
+0000c950: 2063 6861 745f 6964 3a0d 0a20 2020 2020   chat_id:..     
+0000c960: 2020 2070 6179 6c6f 6164 5b27 6368 6174     payload['chat
+0000c970: 5f69 6427 5d20 3d20 6368 6174 5f69 640d  _id'] = chat_id.
+0000c980: 0a20 2020 2069 6620 6d65 7373 6167 655f  .    if message_
+0000c990: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000c9a0: 6c6f 6164 5b27 6d65 7373 6167 655f 6964  load['message_id
+0000c9b0: 275d 203d 206d 6573 7361 6765 5f69 640d  '] = message_id.
+0000c9c0: 0a20 2020 2069 6620 696e 6c69 6e65 5f6d  .    if inline_m
+0000c9d0: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+0000c9e0: 2020 2020 7061 796c 6f61 645b 2769 6e6c      payload['inl
+0000c9f0: 696e 655f 6d65 7373 6167 655f 6964 275d  ine_message_id']
+0000ca00: 203d 2069 6e6c 696e 655f 6d65 7373 6167   = inline_messag
+0000ca10: 655f 6964 0d0a 2020 2020 6966 2070 6172  e_id..    if par
+0000ca20: 7365 5f6d 6f64 653a 0d0a 2020 2020 2020  se_mode:..      
+0000ca30: 2020 7061 796c 6f61 645b 2770 6172 7365    payload['parse
+0000ca40: 5f6d 6f64 6527 5d20 3d20 7061 7273 655f  _mode'] = parse_
+0000ca50: 6d6f 6465 0d0a 2020 2020 6966 2063 6170  mode..    if cap
+0000ca60: 7469 6f6e 5f65 6e74 6974 6965 733a 0d0a  tion_entities:..
+0000ca70: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000ca80: 2763 6170 7469 6f6e 5f65 6e74 6974 6965  'caption_entitie
+0000ca90: 7327 5d20 3d20 6a73 6f6e 2e64 756d 7073  s'] = json.dumps
+0000caa0: 2874 7970 6573 2e4d 6573 7361 6765 456e  (types.MessageEn
+0000cab0: 7469 7479 2e74 6f5f 6c69 7374 5f6f 665f  tity.to_list_of_
+0000cac0: 6469 6374 7328 6361 7074 696f 6e5f 656e  dicts(caption_en
+0000cad0: 7469 7469 6573 2929 0d0a 2020 2020 6966  tities))..    if
+0000cae0: 2072 6570 6c79 5f6d 6172 6b75 703a 0d0a   reply_markup:..
+0000caf0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000cb00: 2772 6570 6c79 5f6d 6172 6b75 7027 5d20  'reply_markup'] 
+0000cb10: 3d20 5f63 6f6e 7665 7274 5f6d 6172 6b75  = _convert_marku
+0000cb20: 7028 7265 706c 795f 6d61 726b 7570 290d  p(reply_markup).
+0000cb30: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+0000cb40: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+0000cb50: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+0000cb60: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+0000cb70: 686f 643d 2770 6f73 7427 290d 0a0d 0a0d  hod='post').....
+0000cb80: 0a64 6566 2065 6469 745f 6d65 7373 6167  .def edit_messag
+0000cb90: 655f 6d65 6469 6128 746f 6b65 6e2c 206d  e_media(token, m
+0000cba0: 6564 6961 2c20 6368 6174 5f69 643d 4e6f  edia, chat_id=No
+0000cbb0: 6e65 2c20 6d65 7373 6167 655f 6964 3d4e  ne, message_id=N
+0000cbc0: 6f6e 652c 2069 6e6c 696e 655f 6d65 7373  one, inline_mess
+0000cbd0: 6167 655f 6964 3d4e 6f6e 652c 2072 6570  age_id=None, rep
+0000cbe0: 6c79 5f6d 6172 6b75 703d 4e6f 6e65 293a  ly_markup=None):
+0000cbf0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000cc00: 203d 2072 2765 6469 744d 6573 7361 6765   = r'editMessage
+0000cc10: 4d65 6469 6127 0d0a 2020 2020 6d65 6469  Media'..    medi
+0000cc20: 615f 6a73 6f6e 2c20 6669 6c65 203d 2063  a_json, file = c
+0000cc30: 6f6e 7665 7274 5f69 6e70 7574 5f6d 6564  onvert_input_med
+0000cc40: 6961 286d 6564 6961 290d 0a20 2020 2070  ia(media)..    p
+0000cc50: 6179 6c6f 6164 203d 207b 276d 6564 6961  ayload = {'media
+0000cc60: 273a 206d 6564 6961 5f6a 736f 6e7d 0d0a  ': media_json}..
+0000cc70: 2020 2020 6966 2063 6861 745f 6964 3a0d      if chat_id:.
+0000cc80: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000cc90: 5b27 6368 6174 5f69 6427 5d20 3d20 6368  ['chat_id'] = ch
+0000cca0: 6174 5f69 640d 0a20 2020 2069 6620 6d65  at_id..    if me
+0000ccb0: 7373 6167 655f 6964 3a0d 0a20 2020 2020  ssage_id:..     
+0000ccc0: 2020 2070 6179 6c6f 6164 5b27 6d65 7373     payload['mess
+0000ccd0: 6167 655f 6964 275d 203d 206d 6573 7361  age_id'] = messa
+0000cce0: 6765 5f69 640d 0a20 2020 2069 6620 696e  ge_id..    if in
+0000ccf0: 6c69 6e65 5f6d 6573 7361 6765 5f69 643a  line_message_id:
+0000cd00: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000cd10: 645b 2769 6e6c 696e 655f 6d65 7373 6167  d['inline_messag
+0000cd20: 655f 6964 275d 203d 2069 6e6c 696e 655f  e_id'] = inline_
+0000cd30: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+0000cd40: 6966 2072 6570 6c79 5f6d 6172 6b75 703a  if reply_markup:
+0000cd50: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000cd60: 645b 2772 6570 6c79 5f6d 6172 6b75 7027  d['reply_markup'
+0000cd70: 5d20 3d20 5f63 6f6e 7665 7274 5f6d 6172  ] = _convert_mar
+0000cd80: 6b75 7028 7265 706c 795f 6d61 726b 7570  kup(reply_markup
+0000cd90: 290d 0a20 2020 2072 6574 7572 6e20 5f6d  )..    return _m
+0000cda0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000cdb0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000cdc0: 6172 616d 733d 7061 796c 6f61 642c 2066  arams=payload, f
+0000cdd0: 696c 6573 3d66 696c 652c 206d 6574 686f  iles=file, metho
+0000cde0: 643d 2770 6f73 7427 2069 6620 6669 6c65  d='post' if file
+0000cdf0: 2065 6c73 6520 2767 6574 2729 0d0a 0d0a   else 'get')....
+0000ce00: 0d0a 6465 6620 6564 6974 5f6d 6573 7361  ..def edit_messa
+0000ce10: 6765 5f72 6570 6c79 5f6d 6172 6b75 7028  ge_reply_markup(
+0000ce20: 746f 6b65 6e2c 2063 6861 745f 6964 3d4e  token, chat_id=N
+0000ce30: 6f6e 652c 206d 6573 7361 6765 5f69 643d  one, message_id=
+0000ce40: 4e6f 6e65 2c20 696e 6c69 6e65 5f6d 6573  None, inline_mes
+0000ce50: 7361 6765 5f69 643d 4e6f 6e65 2c20 7265  sage_id=None, re
+0000ce60: 706c 795f 6d61 726b 7570 3d4e 6f6e 6529  ply_markup=None)
+0000ce70: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+0000ce80: 6c20 3d20 7227 6564 6974 4d65 7373 6167  l = r'editMessag
+0000ce90: 6552 6570 6c79 4d61 726b 7570 270d 0a20  eReplyMarkup'.. 
+0000cea0: 2020 2070 6179 6c6f 6164 203d 207b 7d0d     payload = {}.
+0000ceb0: 0a20 2020 2069 6620 6368 6174 5f69 643a  .    if chat_id:
+0000cec0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000ced0: 645b 2763 6861 745f 6964 275d 203d 2063  d['chat_id'] = c
+0000cee0: 6861 745f 6964 0d0a 2020 2020 6966 206d  hat_id..    if m
+0000cef0: 6573 7361 6765 5f69 643a 0d0a 2020 2020  essage_id:..    
+0000cf00: 2020 2020 7061 796c 6f61 645b 276d 6573      payload['mes
+0000cf10: 7361 6765 5f69 6427 5d20 3d20 6d65 7373  sage_id'] = mess
+0000cf20: 6167 655f 6964 0d0a 2020 2020 6966 2069  age_id..    if i
+0000cf30: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000cf40: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000cf50: 6164 5b27 696e 6c69 6e65 5f6d 6573 7361  ad['inline_messa
+0000cf60: 6765 5f69 6427 5d20 3d20 696e 6c69 6e65  ge_id'] = inline
+0000cf70: 5f6d 6573 7361 6765 5f69 640d 0a20 2020  _message_id..   
+0000cf80: 2069 6620 7265 706c 795f 6d61 726b 7570   if reply_markup
+0000cf90: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000cfa0: 6164 5b27 7265 706c 795f 6d61 726b 7570  ad['reply_markup
+0000cfb0: 275d 203d 205f 636f 6e76 6572 745f 6d61  '] = _convert_ma
+0000cfc0: 726b 7570 2872 6570 6c79 5f6d 6172 6b75  rkup(reply_marku
+0000cfd0: 7029 0d0a 2020 2020 7265 7475 726e 205f  p)..    return _
+0000cfe0: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+0000cff0: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+0000d000: 7061 7261 6d73 3d70 6179 6c6f 6164 2c20  params=payload, 
+0000d010: 6d65 7468 6f64 3d27 706f 7374 2729 0d0a  method='post')..
+0000d020: 0d0a 0d0a 6465 6620 6465 6c65 7465 5f6d  ....def delete_m
+0000d030: 6573 7361 6765 2874 6f6b 656e 2c20 6368  essage(token, ch
+0000d040: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
+0000d050: 642c 2074 696d 656f 7574 3d4e 6f6e 6529  d, timeout=None)
+0000d060: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+0000d070: 6c20 3d20 7227 6465 6c65 7465 4d65 7373  l = r'deleteMess
+0000d080: 6167 6527 0d0a 2020 2020 7061 796c 6f61  age'..    payloa
+0000d090: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000d0a0: 6368 6174 5f69 642c 2027 6d65 7373 6167  chat_id, 'messag
+0000d0b0: 655f 6964 273a 206d 6573 7361 6765 5f69  e_id': message_i
+0000d0c0: 647d 0d0a 2020 2020 6966 2074 696d 656f  d}..    if timeo
+0000d0d0: 7574 3a0d 0a20 2020 2020 2020 2070 6179  ut:..        pay
+0000d0e0: 6c6f 6164 5b27 7469 6d65 6f75 7427 5d20  load['timeout'] 
+0000d0f0: 3d20 7469 6d65 6f75 740d 0a20 2020 2072  = timeout..    r
+0000d100: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000d110: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000d120: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000d130: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
+0000d140: 6f73 7427 290d 0a0d 0a0d 0a23 2047 616d  ost')......# Gam
+0000d150: 650d 0a0d 0a64 6566 2073 656e 645f 6761  e....def send_ga
+0000d160: 6d65 280d 0a20 2020 2020 2020 2074 6f6b  me(..        tok
+0000d170: 656e 2c20 6368 6174 5f69 642c 2067 616d  en, chat_id, gam
+0000d180: 655f 7368 6f72 745f 6e61 6d65 2c0d 0a20  e_short_name,.. 
+0000d190: 2020 2020 2020 2064 6973 6162 6c65 5f6e         disable_n
+0000d1a0: 6f74 6966 6963 6174 696f 6e3d 4e6f 6e65  otification=None
+0000d1b0: 2c20 7265 706c 795f 746f 5f6d 6573 7361  , reply_to_messa
+0000d1c0: 6765 5f69 643d 4e6f 6e65 2c20 7265 706c  ge_id=None, repl
+0000d1d0: 795f 6d61 726b 7570 3d4e 6f6e 652c 2074  y_markup=None, t
+0000d1e0: 696d 656f 7574 3d4e 6f6e 652c 0d0a 2020  imeout=None,..  
+0000d1f0: 2020 2020 2020 616c 6c6f 775f 7365 6e64        allow_send
+0000d200: 696e 675f 7769 7468 6f75 745f 7265 706c  ing_without_repl
+0000d210: 793d 4e6f 6e65 2c20 7072 6f74 6563 745f  y=None, protect_
+0000d220: 636f 6e74 656e 743d 4e6f 6e65 2c20 6d65  content=None, me
+0000d230: 7373 6167 655f 7468 7265 6164 5f69 643d  ssage_thread_id=
+0000d240: 4e6f 6e65 293a 0d0a 2020 2020 6d65 7468  None):..    meth
+0000d250: 6f64 5f75 726c 203d 2072 2773 656e 6447  od_url = r'sendG
+0000d260: 616d 6527 0d0a 2020 2020 7061 796c 6f61  ame'..    payloa
+0000d270: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
+0000d280: 6368 6174 5f69 642c 2027 6761 6d65 5f73  chat_id, 'game_s
+0000d290: 686f 7274 5f6e 616d 6527 3a20 6761 6d65  hort_name': game
+0000d2a0: 5f73 686f 7274 5f6e 616d 657d 0d0a 2020  _short_name}..  
+0000d2b0: 2020 6966 2064 6973 6162 6c65 5f6e 6f74    if disable_not
+0000d2c0: 6966 6963 6174 696f 6e20 6973 206e 6f74  ification is not
+0000d2d0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000d2e0: 7061 796c 6f61 645b 2764 6973 6162 6c65  payload['disable
+0000d2f0: 5f6e 6f74 6966 6963 6174 696f 6e27 5d20  _notification'] 
+0000d300: 3d20 6469 7361 626c 655f 6e6f 7469 6669  = disable_notifi
+0000d310: 6361 7469 6f6e 0d0a 2020 2020 6966 2072  cation..    if r
+0000d320: 6570 6c79 5f74 6f5f 6d65 7373 6167 655f  eply_to_message_
+0000d330: 6964 3a0d 0a20 2020 2020 2020 2070 6179  id:..        pay
+0000d340: 6c6f 6164 5b27 7265 706c 795f 746f 5f6d  load['reply_to_m
+0000d350: 6573 7361 6765 5f69 6427 5d20 3d20 7265  essage_id'] = re
+0000d360: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+0000d370: 640d 0a20 2020 2069 6620 7265 706c 795f  d..    if reply_
+0000d380: 6d61 726b 7570 3a0d 0a20 2020 2020 2020  markup:..       
+0000d390: 2070 6179 6c6f 6164 5b27 7265 706c 795f   payload['reply_
+0000d3a0: 6d61 726b 7570 275d 203d 205f 636f 6e76  markup'] = _conv
+0000d3b0: 6572 745f 6d61 726b 7570 2872 6570 6c79  ert_markup(reply
+0000d3c0: 5f6d 6172 6b75 7029 0d0a 2020 2020 6966  _markup)..    if
+0000d3d0: 2074 696d 656f 7574 3a0d 0a20 2020 2020   timeout:..     
+0000d3e0: 2020 2070 6179 6c6f 6164 5b27 7469 6d65     payload['time
+0000d3f0: 6f75 7427 5d20 3d20 7469 6d65 6f75 740d  out'] = timeout.
+0000d400: 0a20 2020 2069 6620 616c 6c6f 775f 7365  .    if allow_se
+0000d410: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
+0000d420: 706c 7920 6973 206e 6f74 204e 6f6e 653a  ply is not None:
+0000d430: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000d440: 645b 2761 6c6c 6f77 5f73 656e 6469 6e67  d['allow_sending
+0000d450: 5f77 6974 686f 7574 5f72 6570 6c79 275d  _without_reply']
+0000d460: 203d 2061 6c6c 6f77 5f73 656e 6469 6e67   = allow_sending
+0000d470: 5f77 6974 686f 7574 5f72 6570 6c79 0d0a  _without_reply..
+0000d480: 2020 2020 6966 2070 726f 7465 6374 5f63      if protect_c
+0000d490: 6f6e 7465 6e74 2069 7320 6e6f 7420 4e6f  ontent is not No
+0000d4a0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+0000d4b0: 6c6f 6164 5b27 7072 6f74 6563 745f 636f  load['protect_co
+0000d4c0: 6e74 656e 7427 5d20 3d20 7072 6f74 6563  ntent'] = protec
+0000d4d0: 745f 636f 6e74 656e 740d 0a20 2020 2069  t_content..    i
+0000d4e0: 6620 6d65 7373 6167 655f 7468 7265 6164  f message_thread
+0000d4f0: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+0000d500: 796c 6f61 645b 276d 6573 7361 6765 5f74  yload['message_t
+0000d510: 6872 6561 645f 6964 275d 203d 206d 6573  hread_id'] = mes
+0000d520: 7361 6765 5f74 6872 6561 645f 6964 0d0a  sage_thread_id..
+0000d530: 2020 2020 7265 7475 726e 205f 6d61 6b65      return _make
+0000d540: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
+0000d550: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
+0000d560: 6d73 3d70 6179 6c6f 6164 290d 0a0d 0a0d  ms=payload).....
+0000d570: 0a23 2068 7474 7073 3a2f 2f63 6f72 652e  .# https://core.
+0000d580: 7465 6c65 6772 616d 2e6f 7267 2f62 6f74  telegram.org/bot
+0000d590: 732f 6170 6923 7365 7467 616d 6573 636f  s/api#setgamesco
+0000d5a0: 7265 0d0a 6465 6620 7365 745f 6761 6d65  re..def set_game
+0000d5b0: 5f73 636f 7265 2874 6f6b 656e 2c20 7573  _score(token, us
+0000d5c0: 6572 5f69 642c 2073 636f 7265 2c20 666f  er_id, score, fo
+0000d5d0: 7263 653d 4e6f 6e65 2c20 6469 7361 626c  rce=None, disabl
+0000d5e0: 655f 6564 6974 5f6d 6573 7361 6765 3d4e  e_edit_message=N
+0000d5f0: 6f6e 652c 2063 6861 745f 6964 3d4e 6f6e  one, chat_id=Non
+0000d600: 652c 206d 6573 7361 6765 5f69 643d 4e6f  e, message_id=No
+0000d610: 6e65 2c0d 0a20 2020 2020 2020 2020 2020  ne,..           
+0000d620: 2020 2020 2020 2020 696e 6c69 6e65 5f6d          inline_m
+0000d630: 6573 7361 6765 5f69 643d 4e6f 6e65 293a  essage_id=None):
+0000d640: 0d0a 2020 2020 2222 220d 0a20 2020 2055  ..    """..    U
+0000d650: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
+0000d660: 6f20 7365 7420 7468 6520 7363 6f72 6520  o set the score 
+0000d670: 6f66 2074 6865 2073 7065 6369 6669 6564  of the specified
+0000d680: 2075 7365 7220 696e 2061 2067 616d 652e   user in a game.
+0000d690: 204f 6e20 7375 6363 6573 732c 2069 6620   On success, if 
+0000d6a0: 7468 6520 6d65 7373 6167 6520 7761 7320  the message was 
+0000d6b0: 7365 6e74 2062 7920 7468 6520 626f 742c  sent by the bot,
+0000d6c0: 2072 6574 7572 6e73 2074 6865 2065 6469   returns the edi
+0000d6d0: 7465 6420 4d65 7373 6167 652c 206f 7468  ted Message, oth
+0000d6e0: 6572 7769 7365 2072 6574 7572 6e73 2054  erwise returns T
+0000d6f0: 7275 652e 2052 6574 7572 6e73 2061 6e20  rue. Returns an 
+0000d700: 6572 726f 722c 2069 6620 7468 6520 6e65  error, if the ne
+0000d710: 7720 7363 6f72 6520 6973 206e 6f74 2067  w score is not g
+0000d720: 7265 6174 6572 2074 6861 6e20 7468 6520  reater than the 
+0000d730: 7573 6572 2773 2063 7572 7265 6e74 2073  user's current s
+0000d740: 636f 7265 2069 6e20 7468 6520 6368 6174  core in the chat
+0000d750: 2e0d 0a20 2020 203a 7061 7261 6d20 746f  ...    :param to
+0000d760: 6b65 6e3a 2042 6f74 2773 2074 6f6b 656e  ken: Bot's token
+0000d770: 2028 796f 7520 646f 6e27 7420 6e65 6564   (you don't need
+0000d780: 2074 6f20 6669 6c6c 2074 6869 7329 0d0a   to fill this)..
+0000d790: 2020 2020 3a70 6172 616d 2075 7365 725f      :param user_
+0000d7a0: 6964 3a20 5573 6572 2069 6465 6e74 6966  id: User identif
+0000d7b0: 6965 720d 0a20 2020 203a 7061 7261 6d20  ier..    :param 
+0000d7c0: 7363 6f72 653a 204e 6577 2073 636f 7265  score: New score
+0000d7d0: 2c20 6d75 7374 2062 6520 6e6f 6e2d 6e65  , must be non-ne
+0000d7e0: 6761 7469 7665 0d0a 2020 2020 3a70 6172  gative..    :par
+0000d7f0: 616d 2066 6f72 6365 3a20 284f 7074 696f  am force: (Optio
+0000d800: 6e61 6c29 2050 6173 7320 5472 7565 2c20  nal) Pass True, 
+0000d810: 6966 2074 6865 2068 6967 6820 7363 6f72  if the high scor
+0000d820: 6520 6973 2061 6c6c 6f77 6564 2074 6f20  e is allowed to 
+0000d830: 6465 6372 6561 7365 2e20 5468 6973 2063  decrease. This c
+0000d840: 616e 2062 6520 7573 6566 756c 2077 6865  an be useful whe
+0000d850: 6e20 6669 7869 6e67 206d 6973 7461 6b65  n fixing mistake
+0000d860: 7320 6f72 2062 616e 6e69 6e67 2063 6865  s or banning che
+0000d870: 6174 6572 730d 0a20 2020 203a 7061 7261  aters..    :para
+0000d880: 6d20 6469 7361 626c 655f 6564 6974 5f6d  m disable_edit_m
+0000d890: 6573 7361 6765 3a20 284f 7074 696f 6e61  essage: (Optiona
+0000d8a0: 6c29 2050 6173 7320 5472 7565 2c20 6966  l) Pass True, if
+0000d8b0: 2074 6865 2067 616d 6520 6d65 7373 6167   the game messag
+0000d8c0: 6520 7368 6f75 6c64 206e 6f74 2062 6520  e should not be 
+0000d8d0: 6175 746f 6d61 7469 6361 6c6c 7920 6564  automatically ed
+0000d8e0: 6974 6564 2074 6f20 696e 636c 7564 6520  ited to include 
+0000d8f0: 7468 6520 6375 7272 656e 7420 7363 6f72  the current scor
+0000d900: 6562 6f61 7264 0d0a 2020 2020 3a70 6172  eboard..    :par
 0000d910: 616d 2063 6861 745f 6964 3a20 284f 7074  am chat_id: (Opt
 0000d920: 696f 6e61 6c2c 2072 6571 7569 7265 6420  ional, required 
 0000d930: 6966 2069 6e6c 696e 655f 6d65 7373 6167  if inline_messag
 0000d940: 655f 6964 2069 7320 6e6f 7420 7370 6563  e_id is not spec
 0000d950: 6966 6965 6429 2055 6e69 7175 6520 6964  ified) Unique id
 0000d960: 656e 7469 6669 6572 2066 6f72 2074 6865  entifier for the
 0000d970: 2074 6172 6765 7420 6368 6174 2028 6f72   target chat (or
 0000d980: 2075 7365 726e 616d 6520 6f66 2074 6865   username of the
 0000d990: 2074 6172 6765 7420 6368 616e 6e65 6c20   target channel 
 0000d9a0: 696e 2074 6865 2066 6f72 6d61 7420 4063  in the format @c
-0000d9b0: 6861 6e6e 656c 7573 6572 6e61 6d65 290a  hannelusername).
-0000d9c0: 2020 2020 3a70 6172 616d 206d 6573 7361      :param messa
-0000d9d0: 6765 5f69 643a 2028 4f70 7469 6f6e 616c  ge_id: (Optional
-0000d9e0: 2c20 7265 7175 6972 6564 2069 6620 696e  , required if in
-0000d9f0: 6c69 6e65 5f6d 6573 7361 6765 5f69 6420  line_message_id 
-0000da00: 6973 206e 6f74 2073 7065 6369 6669 6564  is not specified
-0000da10: 2920 556e 6971 7565 2069 6465 6e74 6966  ) Unique identif
-0000da20: 6965 7220 6f66 2074 6865 2073 656e 7420  ier of the sent 
-0000da30: 6d65 7373 6167 650a 2020 2020 3a70 6172  message.    :par
-0000da40: 616d 2069 6e6c 696e 655f 6d65 7373 6167  am inline_messag
-0000da50: 655f 6964 3a20 284f 7074 696f 6e61 6c2c  e_id: (Optional,
-0000da60: 2072 6571 7569 7265 6420 6966 2063 6861   required if cha
-0000da70: 745f 6964 2061 6e64 206d 6573 7361 6765  t_id and message
-0000da80: 5f69 6420 6172 6520 6e6f 7420 7370 6563  _id are not spec
-0000da90: 6966 6965 6429 2049 6465 6e74 6966 6965  ified) Identifie
-0000daa0: 7220 6f66 2074 6865 2069 6e6c 696e 6520  r of the inline 
-0000dab0: 6d65 7373 6167 650a 2020 2020 3a72 6574  message.    :ret
-0000dac0: 7572 6e3a 0a20 2020 2022 2222 0a20 2020  urn:.    """.   
-0000dad0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
-0000dae0: 6765 7447 616d 6548 6967 6853 636f 7265  getGameHighScore
-0000daf0: 7327 0a20 2020 2070 6179 6c6f 6164 203d  s'.    payload =
-0000db00: 207b 2775 7365 725f 6964 273a 2075 7365   {'user_id': use
-0000db10: 725f 6964 7d0a 2020 2020 6966 2063 6861  r_id}.    if cha
-0000db20: 745f 6964 3a0a 2020 2020 2020 2020 7061  t_id:.        pa
-0000db30: 796c 6f61 645b 2763 6861 745f 6964 275d  yload['chat_id']
-0000db40: 203d 2063 6861 745f 6964 0a20 2020 2069   = chat_id.    i
-0000db50: 6620 6d65 7373 6167 655f 6964 3a0a 2020  f message_id:.  
-0000db60: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
-0000db70: 6573 7361 6765 5f69 6427 5d20 3d20 6d65  essage_id'] = me
-0000db80: 7373 6167 655f 6964 0a20 2020 2069 6620  ssage_id.    if 
-0000db90: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
-0000dba0: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-0000dbb0: 6164 5b27 696e 6c69 6e65 5f6d 6573 7361  ad['inline_messa
-0000dbc0: 6765 5f69 6427 5d20 3d20 696e 6c69 6e65  ge_id'] = inline
-0000dbd0: 5f6d 6573 7361 6765 5f69 640a 2020 2020  _message_id.    
-0000dbe0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-0000dbf0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-0000dc00: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-0000dc10: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-0000dc20: 0a0a 0a23 2050 6179 6d65 6e74 7320 2868  ...# Payments (h
-0000dc30: 7474 7073 3a2f 2f63 6f72 652e 7465 6c65  ttps://core.tele
-0000dc40: 6772 616d 2e6f 7267 2f62 6f74 732f 6170  gram.org/bots/ap
-0000dc50: 6923 7061 796d 656e 7473 290a 0a61 7379  i#payments)..asy
-0000dc60: 6e63 2064 6566 2073 656e 645f 696e 766f  nc def send_invo
-0000dc70: 6963 6528 0a20 2020 2020 2020 2074 6f6b  ice(.        tok
-0000dc80: 656e 2c20 6368 6174 5f69 642c 2074 6974  en, chat_id, tit
-0000dc90: 6c65 2c20 6465 7363 7269 7074 696f 6e2c  le, description,
-0000dca0: 2069 6e76 6f69 6365 5f70 6179 6c6f 6164   invoice_payload
-0000dcb0: 2c20 7072 6f76 6964 6572 5f74 6f6b 656e  , provider_token
-0000dcc0: 2c20 6375 7272 656e 6379 2c20 7072 6963  , currency, pric
-0000dcd0: 6573 2c0a 2020 2020 2020 2020 7374 6172  es,.        star
-0000dce0: 745f 7061 7261 6d65 7465 7220 3d20 4e6f  t_parameter = No
-0000dcf0: 6e65 2c20 7068 6f74 6f5f 7572 6c3d 4e6f  ne, photo_url=No
-0000dd00: 6e65 2c20 7068 6f74 6f5f 7369 7a65 3d4e  ne, photo_size=N
-0000dd10: 6f6e 652c 2070 686f 746f 5f77 6964 7468  one, photo_width
-0000dd20: 3d4e 6f6e 652c 2070 686f 746f 5f68 6569  =None, photo_hei
-0000dd30: 6768 743d 4e6f 6e65 2c0a 2020 2020 2020  ght=None,.      
-0000dd40: 2020 6e65 6564 5f6e 616d 653d 4e6f 6e65    need_name=None
-0000dd50: 2c20 6e65 6564 5f70 686f 6e65 5f6e 756d  , need_phone_num
-0000dd60: 6265 723d 4e6f 6e65 2c20 6e65 6564 5f65  ber=None, need_e
-0000dd70: 6d61 696c 3d4e 6f6e 652c 206e 6565 645f  mail=None, need_
-0000dd80: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
-0000dd90: 3d4e 6f6e 652c 0a20 2020 2020 2020 2073  =None,.        s
-0000dda0: 656e 645f 7068 6f6e 655f 6e75 6d62 6572  end_phone_number
-0000ddb0: 5f74 6f5f 7072 6f76 6964 6572 203d 204e  _to_provider = N
-0000ddc0: 6f6e 652c 2073 656e 645f 656d 6169 6c5f  one, send_email_
-0000ddd0: 746f 5f70 726f 7669 6465 7220 3d20 4e6f  to_provider = No
-0000dde0: 6e65 2c20 6973 5f66 6c65 7869 626c 653d  ne, is_flexible=
-0000ddf0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6469  None,.        di
-0000de00: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-0000de10: 6f6e 3d4e 6f6e 652c 2072 6570 6c79 5f74  on=None, reply_t
-0000de20: 6f5f 6d65 7373 6167 655f 6964 3d4e 6f6e  o_message_id=Non
-0000de30: 652c 2072 6570 6c79 5f6d 6172 6b75 703d  e, reply_markup=
-0000de40: 4e6f 6e65 2c20 7072 6f76 6964 6572 5f64  None, provider_d
-0000de50: 6174 613d 4e6f 6e65 2c0a 2020 2020 2020  ata=None,.      
-0000de60: 2020 7469 6d65 6f75 743d 4e6f 6e65 2c20    timeout=None, 
-0000de70: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
-0000de80: 7468 6f75 745f 7265 706c 793d 4e6f 6e65  thout_reply=None
-0000de90: 2c20 6d61 785f 7469 705f 616d 6f75 6e74  , max_tip_amount
-0000dea0: 3d4e 6f6e 652c 2073 7567 6765 7374 6564  =None, suggested
-0000deb0: 5f74 6970 5f61 6d6f 756e 7473 3d4e 6f6e  _tip_amounts=Non
-0000dec0: 652c 2070 726f 7465 6374 5f63 6f6e 7465  e, protect_conte
-0000ded0: 6e74 3d4e 6f6e 652c 0a20 2020 2020 2020  nt=None,.       
-0000dee0: 206d 6573 7361 6765 5f74 6872 6561 645f   message_thread_
-0000def0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2222  id=None):.    ""
-0000df00: 220a 2020 2020 5573 6520 7468 6973 206d  ".    Use this m
-0000df10: 6574 686f 6420 746f 2073 656e 6420 696e  ethod to send in
-0000df20: 766f 6963 6573 2e20 4f6e 2073 7563 6365  voices. On succe
-0000df30: 7373 2c20 7468 6520 7365 6e74 204d 6573  ss, the sent Mes
-0000df40: 7361 6765 2069 7320 7265 7475 726e 6564  sage is returned
-0000df50: 2e0a 2020 2020 3a70 6172 616d 2074 6f6b  ..    :param tok
-0000df60: 656e 3a20 426f 7427 7320 746f 6b65 6e20  en: Bot's token 
-0000df70: 2879 6f75 2064 6f6e 2774 206e 6565 6420  (you don't need 
-0000df80: 746f 2066 696c 6c20 7468 6973 290a 2020  to fill this).  
-0000df90: 2020 3a70 6172 616d 2063 6861 745f 6964    :param chat_id
-0000dfa0: 3a20 556e 6971 7565 2069 6465 6e74 6966  : Unique identif
-0000dfb0: 6965 7220 666f 7220 7468 6520 7461 7267  ier for the targ
-0000dfc0: 6574 2070 7269 7661 7465 2063 6861 740a  et private chat.
-0000dfd0: 2020 2020 3a70 6172 616d 2074 6974 6c65      :param title
-0000dfe0: 3a20 5072 6f64 7563 7420 6e61 6d65 0a20  : Product name. 
-0000dff0: 2020 203a 7061 7261 6d20 6465 7363 7269     :param descri
-0000e000: 7074 696f 6e3a 2050 726f 6475 6374 2064  ption: Product d
-0000e010: 6573 6372 6970 7469 6f6e 0a20 2020 203a  escription.    :
-0000e020: 7061 7261 6d20 696e 766f 6963 655f 7061  param invoice_pa
-0000e030: 796c 6f61 643a 2042 6f74 2d64 6566 696e  yload: Bot-defin
-0000e040: 6564 2069 6e76 6f69 6365 2070 6179 6c6f  ed invoice paylo
-0000e050: 6164 2c20 312d 3132 3820 6279 7465 732e  ad, 1-128 bytes.
-0000e060: 2054 6869 7320 7769 6c6c 206e 6f74 2062   This will not b
-0000e070: 6520 6469 7370 6c61 7965 6420 746f 2074  e displayed to t
-0000e080: 6865 2075 7365 722c 2075 7365 2066 6f72  he user, use for
-0000e090: 2079 6f75 7220 696e 7465 726e 616c 2070   your internal p
-0000e0a0: 726f 6365 7373 6573 2e0a 2020 2020 3a70  rocesses..    :p
-0000e0b0: 6172 616d 2070 726f 7669 6465 725f 746f  aram provider_to
-0000e0c0: 6b65 6e3a 2050 6179 6d65 6e74 7320 7072  ken: Payments pr
-0000e0d0: 6f76 6964 6572 2074 6f6b 656e 2c20 6f62  ovider token, ob
-0000e0e0: 7461 696e 6564 2076 6961 2040 426f 7466  tained via @Botf
-0000e0f0: 6174 6865 720a 2020 2020 3a70 6172 616d  ather.    :param
-0000e100: 2063 7572 7265 6e63 793a 2054 6872 6565   currency: Three
-0000e110: 2d6c 6574 7465 7220 4953 4f20 3432 3137  -letter ISO 4217
-0000e120: 2063 7572 7265 6e63 7920 636f 6465 2c20   currency code, 
-0000e130: 7365 6520 6874 7470 733a 2f2f 636f 7265  see https://core
-0000e140: 2e74 656c 6567 7261 6d2e 6f72 672f 626f  .telegram.org/bo
-0000e150: 7473 2f70 6179 6d65 6e74 7323 7375 7070  ts/payments#supp
-0000e160: 6f72 7465 642d 6375 7272 656e 6369 6573  orted-currencies
-0000e170: 0a20 2020 203a 7061 7261 6d20 7072 6963  .    :param pric
-0000e180: 6573 3a20 5072 6963 6520 6272 6561 6b64  es: Price breakd
-0000e190: 6f77 6e2c 2061 206c 6973 7420 6f66 2063  own, a list of c
-0000e1a0: 6f6d 706f 6e65 6e74 7320 2865 2e67 2e20  omponents (e.g. 
-0000e1b0: 7072 6f64 7563 7420 7072 6963 652c 2074  product price, t
-0000e1c0: 6178 2c20 6469 7363 6f75 6e74 2c20 6465  ax, discount, de
-0000e1d0: 6c69 7665 7279 2063 6f73 742c 2064 656c  livery cost, del
-0000e1e0: 6976 6572 7920 7461 782c 2062 6f6e 7573  ivery tax, bonus
-0000e1f0: 2c20 6574 632e 290a 2020 2020 3a70 6172  , etc.).    :par
-0000e200: 616d 2073 7461 7274 5f70 6172 616d 6574  am start_paramet
-0000e210: 6572 3a20 556e 6971 7565 2064 6565 702d  er: Unique deep-
-0000e220: 6c69 6e6b 696e 6720 7061 7261 6d65 7465  linking paramete
-0000e230: 7220 7468 6174 2063 616e 2062 6520 7573  r that can be us
-0000e240: 6564 2074 6f20 6765 6e65 7261 7465 2074  ed to generate t
-0000e250: 6869 7320 696e 766f 6963 6520 7768 656e  his invoice when
-0000e260: 2075 7365 6420 6173 2061 2073 7461 7274   used as a start
-0000e270: 2070 6172 616d 6574 6572 0a20 2020 203a   parameter.    :
-0000e280: 7061 7261 6d20 7068 6f74 6f5f 7572 6c3a  param photo_url:
-0000e290: 2055 524c 206f 6620 7468 6520 7072 6f64   URL of the prod
-0000e2a0: 7563 7420 7068 6f74 6f20 666f 7220 7468  uct photo for th
-0000e2b0: 6520 696e 766f 6963 652e 2043 616e 2062  e invoice. Can b
-0000e2c0: 6520 6120 7068 6f74 6f20 6f66 2074 6865  e a photo of the
-0000e2d0: 2067 6f6f 6473 206f 7220 6120 6d61 726b   goods or a mark
-0000e2e0: 6574 696e 6720 696d 6167 6520 666f 7220  eting image for 
-0000e2f0: 6120 7365 7276 6963 652e 2050 656f 706c  a service. Peopl
-0000e300: 6520 6c69 6b65 2069 7420 6265 7474 6572  e like it better
-0000e310: 2077 6865 6e20 7468 6579 2073 6565 2077   when they see w
-0000e320: 6861 7420 7468 6579 2061 7265 2070 6179  hat they are pay
-0000e330: 696e 6720 666f 722e 0a20 2020 203a 7061  ing for..    :pa
-0000e340: 7261 6d20 7068 6f74 6f5f 7369 7a65 3a20  ram photo_size: 
-0000e350: 5068 6f74 6f20 7369 7a65 0a20 2020 203a  Photo size.    :
-0000e360: 7061 7261 6d20 7068 6f74 6f5f 7769 6474  param photo_widt
-0000e370: 683a 2050 686f 746f 2077 6964 7468 0a20  h: Photo width. 
-0000e380: 2020 203a 7061 7261 6d20 7068 6f74 6f5f     :param photo_
-0000e390: 6865 6967 6874 3a20 5068 6f74 6f20 6865  height: Photo he
-0000e3a0: 6967 6874 0a20 2020 203a 7061 7261 6d20  ight.    :param 
-0000e3b0: 6e65 6564 5f6e 616d 653a 2050 6173 7320  need_name: Pass 
-0000e3c0: 5472 7565 2c20 6966 2079 6f75 2072 6571  True, if you req
-0000e3d0: 7569 7265 2074 6865 2075 7365 7227 7320  uire the user's 
-0000e3e0: 6675 6c6c 206e 616d 6520 746f 2063 6f6d  full name to com
-0000e3f0: 706c 6574 6520 7468 6520 6f72 6465 720a  plete the order.
-0000e400: 2020 2020 3a70 6172 616d 206e 6565 645f      :param need_
-0000e410: 7068 6f6e 655f 6e75 6d62 6572 3a20 5061  phone_number: Pa
-0000e420: 7373 2054 7275 652c 2069 6620 796f 7520  ss True, if you 
-0000e430: 7265 7175 6972 6520 7468 6520 7573 6572  require the user
-0000e440: 2773 2070 686f 6e65 206e 756d 6265 7220  's phone number 
-0000e450: 746f 2063 6f6d 706c 6574 6520 7468 6520  to complete the 
-0000e460: 6f72 6465 720a 2020 2020 3a70 6172 616d  order.    :param
-0000e470: 206e 6565 645f 656d 6169 6c3a 2050 6173   need_email: Pas
-0000e480: 7320 5472 7565 2c20 6966 2079 6f75 2072  s True, if you r
-0000e490: 6571 7569 7265 2074 6865 2075 7365 7227  equire the user'
-0000e4a0: 7320 656d 6169 6c20 746f 2063 6f6d 706c  s email to compl
-0000e4b0: 6574 6520 7468 6520 6f72 6465 720a 2020  ete the order.  
-0000e4c0: 2020 3a70 6172 616d 206e 6565 645f 7368    :param need_sh
-0000e4d0: 6970 7069 6e67 5f61 6464 7265 7373 3a20  ipping_address: 
-0000e4e0: 5061 7373 2054 7275 652c 2069 6620 796f  Pass True, if yo
-0000e4f0: 7520 7265 7175 6972 6520 7468 6520 7573  u require the us
-0000e500: 6572 2773 2073 6869 7070 696e 6720 6164  er's shipping ad
-0000e510: 6472 6573 7320 746f 2063 6f6d 706c 6574  dress to complet
-0000e520: 6520 7468 6520 6f72 6465 720a 2020 2020  e the order.    
-0000e530: 3a70 6172 616d 2069 735f 666c 6578 6962  :param is_flexib
-0000e540: 6c65 3a20 5061 7373 2054 7275 652c 2069  le: Pass True, i
-0000e550: 6620 7468 6520 6669 6e61 6c20 7072 6963  f the final pric
-0000e560: 6520 6465 7065 6e64 7320 6f6e 2074 6865  e depends on the
-0000e570: 2073 6869 7070 696e 6720 6d65 7468 6f64   shipping method
-0000e580: 0a20 2020 203a 7061 7261 6d20 7365 6e64  .    :param send
-0000e590: 5f70 686f 6e65 5f6e 756d 6265 725f 746f  _phone_number_to
-0000e5a0: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
-0000e5b0: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
-0000e5c0: 7068 6f6e 6520 6e75 6d62 6572 2073 686f  phone number sho
-0000e5d0: 756c 6420 6265 2073 656e 7420 746f 2070  uld be sent to p
-0000e5e0: 726f 7669 6465 720a 2020 2020 3a70 6172  rovider.    :par
-0000e5f0: 616d 2073 656e 645f 656d 6169 6c5f 746f  am send_email_to
-0000e600: 5f70 726f 7669 6465 723a 2050 6173 7320  _provider: Pass 
-0000e610: 5472 7565 2c20 6966 2075 7365 7227 7320  True, if user's 
-0000e620: 656d 6169 6c20 6164 6472 6573 7320 7368  email address sh
-0000e630: 6f75 6c64 2062 6520 7365 6e74 2074 6f20  ould be sent to 
-0000e640: 7072 6f76 6964 6572 0a20 2020 203a 7061  provider.    :pa
-0000e650: 7261 6d20 6469 7361 626c 655f 6e6f 7469  ram disable_noti
-0000e660: 6669 6361 7469 6f6e 3a20 5365 6e64 7320  fication: Sends 
-0000e670: 7468 6520 6d65 7373 6167 6520 7369 6c65  the message sile
-0000e680: 6e74 6c79 2e20 5573 6572 7320 7769 6c6c  ntly. Users will
-0000e690: 2072 6563 6569 7665 2061 206e 6f74 6966   receive a notif
-0000e6a0: 6963 6174 696f 6e20 7769 7468 206e 6f20  ication with no 
-0000e6b0: 736f 756e 642e 0a20 2020 203a 7061 7261  sound..    :para
-0000e6c0: 6d20 7265 706c 795f 746f 5f6d 6573 7361  m reply_to_messa
-0000e6d0: 6765 5f69 643a 2049 6620 7468 6520 6d65  ge_id: If the me
-0000e6e0: 7373 6167 6520 6973 2061 2072 6570 6c79  ssage is a reply
-0000e6f0: 2c20 4944 206f 6620 7468 6520 6f72 6967  , ID of the orig
-0000e700: 696e 616c 206d 6573 7361 6765 0a20 2020  inal message.   
-0000e710: 203a 7061 7261 6d20 7265 706c 795f 6d61   :param reply_ma
-0000e720: 726b 7570 3a20 4120 4a53 4f4e 2d73 6572  rkup: A JSON-ser
-0000e730: 6961 6c69 7a65 6420 6f62 6a65 6374 2066  ialized object f
-0000e740: 6f72 2061 6e20 696e 6c69 6e65 206b 6579  or an inline key
-0000e750: 626f 6172 642e 2049 6620 656d 7074 792c  board. If empty,
-0000e760: 206f 6e65 2027 5061 7920 746f 7461 6c20   one 'Pay total 
-0000e770: 7072 6963 6527 2062 7574 746f 6e20 7769  price' button wi
-0000e780: 6c6c 2062 6520 7368 6f77 6e2e 2049 6620  ll be shown. If 
-0000e790: 6e6f 7420 656d 7074 792c 2074 6865 2066  not empty, the f
-0000e7a0: 6972 7374 2062 7574 746f 6e20 6d75 7374  irst button must
-0000e7b0: 2062 6520 6120 5061 7920 6275 7474 6f6e   be a Pay button
-0000e7c0: 0a20 2020 203a 7061 7261 6d20 7072 6f76  .    :param prov
-0000e7d0: 6964 6572 5f64 6174 613a 2041 204a 534f  ider_data: A JSO
-0000e7e0: 4e2d 7365 7269 616c 697a 6564 2064 6174  N-serialized dat
-0000e7f0: 6120 6162 6f75 7420 7468 6520 696e 766f  a about the invo
-0000e800: 6963 652c 2077 6869 6368 2077 696c 6c20  ice, which will 
-0000e810: 6265 2073 6861 7265 6420 7769 7468 2074  be shared with t
-0000e820: 6865 2070 6179 6d65 6e74 2070 726f 7669  he payment provi
-0000e830: 6465 722e 2041 2064 6574 6169 6c65 6420  der. A detailed 
-0000e840: 6465 7363 7269 7074 696f 6e20 6f66 2072  description of r
-0000e850: 6571 7569 7265 6420 6669 656c 6473 2073  equired fields s
-0000e860: 686f 756c 6420 6265 2070 726f 7669 6465  hould be provide
-0000e870: 6420 6279 2074 6865 2070 6179 6d65 6e74  d by the payment
-0000e880: 2070 726f 7669 6465 722e 0a20 2020 203a   provider..    :
-0000e890: 7061 7261 6d20 7469 6d65 6f75 743a 0a20  param timeout:. 
-0000e8a0: 2020 203a 7061 7261 6d20 616c 6c6f 775f     :param allow_
-0000e8b0: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
-0000e8c0: 7265 706c 793a 0a20 2020 203a 7061 7261  reply:.    :para
-0000e8d0: 6d20 6d61 785f 7469 705f 616d 6f75 6e74  m max_tip_amount
-0000e8e0: 3a20 5468 6520 6d61 7869 6d75 6d20 6163  : The maximum ac
-0000e8f0: 6365 7074 6564 2061 6d6f 756e 7420 666f  cepted amount fo
-0000e900: 7220 7469 7073 2069 6e20 7468 6520 736d  r tips in the sm
-0000e910: 616c 6c65 7374 2075 6e69 7473 206f 6620  allest units of 
-0000e920: 7468 6520 6375 7272 656e 6379 0a20 2020  the currency.   
-0000e930: 203a 7061 7261 6d20 7375 6767 6573 7465   :param suggeste
-0000e940: 645f 7469 705f 616d 6f75 6e74 733a 2041  d_tip_amounts: A
-0000e950: 204a 534f 4e2d 7365 7269 616c 697a 6564   JSON-serialized
-0000e960: 2061 7272 6179 206f 6620 7375 6767 6573   array of sugges
-0000e970: 7465 6420 616d 6f75 6e74 7320 6f66 2074  ted amounts of t
-0000e980: 6970 7320 696e 2074 6865 2073 6d61 6c6c  ips in the small
-0000e990: 6573 7420 756e 6974 7320 6f66 2074 6865  est units of the
-0000e9a0: 2063 7572 7265 6e63 792e 0a20 2020 2020   currency..     
-0000e9b0: 2020 2041 7420 6d6f 7374 2034 2073 7567     At most 4 sug
-0000e9c0: 6765 7374 6564 2074 6970 2061 6d6f 756e  gested tip amoun
-0000e9d0: 7473 2063 616e 2062 6520 7370 6563 6966  ts can be specif
-0000e9e0: 6965 642e 2054 6865 2073 7567 6765 7374  ied. The suggest
-0000e9f0: 6564 2074 6970 2061 6d6f 756e 7473 206d  ed tip amounts m
-0000ea00: 7573 7420 6265 2070 6f73 6974 6976 652c  ust be positive,
-0000ea10: 2070 6173 7365 6420 696e 2061 2073 7472   passed in a str
-0000ea20: 6963 746c 7920 696e 6372 6561 7365 6420  ictly increased 
-0000ea30: 6f72 6465 7220 616e 6420 6d75 7374 206e  order and must n
-0000ea40: 6f74 2065 7863 6565 6420 6d61 785f 7469  ot exceed max_ti
-0000ea50: 705f 616d 6f75 6e74 2e0a 2020 2020 3a70  p_amount..    :p
-0000ea60: 6172 616d 2070 726f 7465 6374 5f63 6f6e  aram protect_con
-0000ea70: 7465 6e74 3a0a 2020 2020 3a72 6574 7572  tent:.    :retur
-0000ea80: 6e3a 0a20 2020 2022 2222 0a20 2020 206d  n:.    """.    m
-0000ea90: 6574 686f 645f 7572 6c20 3d20 7227 7365  ethod_url = r'se
-0000eaa0: 6e64 496e 766f 6963 6527 0a20 2020 2070  ndInvoice'.    p
-0000eab0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
-0000eac0: 6964 273a 2063 6861 745f 6964 2c20 2774  id': chat_id, 't
-0000ead0: 6974 6c65 273a 2074 6974 6c65 2c20 2764  itle': title, 'd
-0000eae0: 6573 6372 6970 7469 6f6e 273a 2064 6573  escription': des
-0000eaf0: 6372 6970 7469 6f6e 2c20 2770 6179 6c6f  cription, 'paylo
-0000eb00: 6164 273a 2069 6e76 6f69 6365 5f70 6179  ad': invoice_pay
-0000eb10: 6c6f 6164 2c0a 2020 2020 2020 2020 2020  load,.          
-0000eb20: 2020 2020 2027 7072 6f76 6964 6572 5f74       'provider_t
-0000eb30: 6f6b 656e 273a 2070 726f 7669 6465 725f  oken': provider_
-0000eb40: 746f 6b65 6e2c 2027 6375 7272 656e 6379  token, 'currency
-0000eb50: 273a 2063 7572 7265 6e63 792c 0a20 2020  ': currency,.   
-0000eb60: 2020 2020 2020 2020 2020 2020 2770 7269              'pri
-0000eb70: 6365 7327 3a20 6177 6169 7420 5f63 6f6e  ces': await _con
-0000eb80: 7665 7274 5f6c 6973 745f 6a73 6f6e 5f73  vert_list_json_s
-0000eb90: 6572 6961 6c69 7a61 626c 6528 7072 6963  erializable(pric
-0000eba0: 6573 297d 0a20 2020 2069 6620 7374 6172  es)}.    if star
-0000ebb0: 745f 7061 7261 6d65 7465 723a 0a20 2020  t_parameter:.   
-0000ebc0: 2020 2020 2070 6179 6c6f 6164 5b27 7374       payload['st
-0000ebd0: 6172 745f 7061 7261 6d65 7465 7227 5d20  art_parameter'] 
-0000ebe0: 3d20 7374 6172 745f 7061 7261 6d65 7465  = start_paramete
-0000ebf0: 720a 2020 2020 6966 2070 686f 746f 5f75  r.    if photo_u
-0000ec00: 726c 3a0a 2020 2020 2020 2020 7061 796c  rl:.        payl
-0000ec10: 6f61 645b 2770 686f 746f 5f75 726c 275d  oad['photo_url']
-0000ec20: 203d 2070 686f 746f 5f75 726c 0a20 2020   = photo_url.   
-0000ec30: 2069 6620 7068 6f74 6f5f 7369 7a65 3a0a   if photo_size:.
-0000ec40: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000ec50: 2770 686f 746f 5f73 697a 6527 5d20 3d20  'photo_size'] = 
-0000ec60: 7068 6f74 6f5f 7369 7a65 0a20 2020 2069  photo_size.    i
-0000ec70: 6620 7068 6f74 6f5f 7769 6474 683a 0a20  f photo_width:. 
-0000ec80: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000ec90: 7068 6f74 6f5f 7769 6474 6827 5d20 3d20  photo_width'] = 
-0000eca0: 7068 6f74 6f5f 7769 6474 680a 2020 2020  photo_width.    
-0000ecb0: 6966 2070 686f 746f 5f68 6569 6768 743a  if photo_height:
-0000ecc0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000ecd0: 5b27 7068 6f74 6f5f 6865 6967 6874 275d  ['photo_height']
-0000ece0: 203d 2070 686f 746f 5f68 6569 6768 740a   = photo_height.
-0000ecf0: 2020 2020 6966 206e 6565 645f 6e61 6d65      if need_name
-0000ed00: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000ed10: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
-0000ed20: 6565 645f 6e61 6d65 275d 203d 206e 6565  eed_name'] = nee
-0000ed30: 645f 6e61 6d65 0a20 2020 2069 6620 6e65  d_name.    if ne
-0000ed40: 6564 5f70 686f 6e65 5f6e 756d 6265 7220  ed_phone_number 
-0000ed50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000ed60: 2020 2020 2070 6179 6c6f 6164 5b27 6e65       payload['ne
-0000ed70: 6564 5f70 686f 6e65 5f6e 756d 6265 7227  ed_phone_number'
-0000ed80: 5d20 3d20 6e65 6564 5f70 686f 6e65 5f6e  ] = need_phone_n
-0000ed90: 756d 6265 720a 2020 2020 6966 206e 6565  umber.    if nee
-0000eda0: 645f 656d 6169 6c20 6973 206e 6f74 204e  d_email is not N
-0000edb0: 6f6e 653a 0a20 2020 2020 2020 2070 6179  one:.        pay
-0000edc0: 6c6f 6164 5b27 6e65 6564 5f65 6d61 696c  load['need_email
-0000edd0: 275d 203d 206e 6565 645f 656d 6169 6c0a  '] = need_email.
-0000ede0: 2020 2020 6966 206e 6565 645f 7368 6970      if need_ship
-0000edf0: 7069 6e67 5f61 6464 7265 7373 2069 7320  ping_address is 
-0000ee00: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000ee10: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
-0000ee20: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
-0000ee30: 275d 203d 206e 6565 645f 7368 6970 7069  '] = need_shippi
-0000ee40: 6e67 5f61 6464 7265 7373 0a20 2020 2069  ng_address.    i
-0000ee50: 6620 7365 6e64 5f70 686f 6e65 5f6e 756d  f send_phone_num
-0000ee60: 6265 725f 746f 5f70 726f 7669 6465 7220  ber_to_provider 
-0000ee70: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000ee80: 2020 2020 2070 6179 6c6f 6164 5b27 7365       payload['se
-0000ee90: 6e64 5f70 686f 6e65 5f6e 756d 6265 725f  nd_phone_number_
-0000eea0: 746f 5f70 726f 7669 6465 7227 5d20 3d20  to_provider'] = 
-0000eeb0: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
-0000eec0: 725f 746f 5f70 726f 7669 6465 720a 2020  r_to_provider.  
-0000eed0: 2020 6966 2073 656e 645f 656d 6169 6c5f    if send_email_
-0000eee0: 746f 5f70 726f 7669 6465 7220 6973 206e  to_provider is n
-0000eef0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000ef00: 2070 6179 6c6f 6164 5b27 7365 6e64 5f65   payload['send_e
-0000ef10: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
-0000ef20: 275d 203d 2073 656e 645f 656d 6169 6c5f  '] = send_email_
-0000ef30: 746f 5f70 726f 7669 6465 720a 2020 2020  to_provider.    
-0000ef40: 6966 2069 735f 666c 6578 6962 6c65 2069  if is_flexible i
-0000ef50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000ef60: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
-0000ef70: 666c 6578 6962 6c65 275d 203d 2069 735f  flexible'] = is_
-0000ef80: 666c 6578 6962 6c65 0a20 2020 2069 6620  flexible.    if 
-0000ef90: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
-0000efa0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-0000efb0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-0000efc0: 645b 2764 6973 6162 6c65 5f6e 6f74 6966  d['disable_notif
-0000efd0: 6963 6174 696f 6e27 5d20 3d20 6469 7361  ication'] = disa
-0000efe0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-0000eff0: 0a20 2020 2069 6620 7265 706c 795f 746f  .    if reply_to
-0000f000: 5f6d 6573 7361 6765 5f69 643a 0a20 2020  _message_id:.   
-0000f010: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
-0000f020: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
-0000f030: 6427 5d20 3d20 7265 706c 795f 746f 5f6d  d'] = reply_to_m
-0000f040: 6573 7361 6765 5f69 640a 2020 2020 6966  essage_id.    if
-0000f050: 2072 6570 6c79 5f6d 6172 6b75 703a 0a20   reply_markup:. 
-0000f060: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000f070: 7265 706c 795f 6d61 726b 7570 275d 203d  reply_markup'] =
-0000f080: 2061 7761 6974 205f 636f 6e76 6572 745f   await _convert_
-0000f090: 6d61 726b 7570 2872 6570 6c79 5f6d 6172  markup(reply_mar
-0000f0a0: 6b75 7029 0a20 2020 2069 6620 7072 6f76  kup).    if prov
-0000f0b0: 6964 6572 5f64 6174 613a 0a20 2020 2020  ider_data:.     
-0000f0c0: 2020 2070 6179 6c6f 6164 5b27 7072 6f76     payload['prov
-0000f0d0: 6964 6572 5f64 6174 6127 5d20 3d20 7072  ider_data'] = pr
-0000f0e0: 6f76 6964 6572 5f64 6174 610a 2020 2020  ovider_data.    
-0000f0f0: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
-0000f100: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
-0000f110: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
-0000f120: 0a20 2020 2069 6620 616c 6c6f 775f 7365  .    if allow_se
-0000f130: 6e64 696e 675f 7769 7468 6f75 745f 7265  nding_without_re
-0000f140: 706c 7920 6973 206e 6f74 204e 6f6e 653a  ply is not None:
-0000f150: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000f160: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
-0000f170: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
-0000f180: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
-0000f190: 7769 7468 6f75 745f 7265 706c 790a 2020  without_reply.  
-0000f1a0: 2020 6966 206d 6178 5f74 6970 5f61 6d6f    if max_tip_amo
-0000f1b0: 756e 7420 6973 206e 6f74 204e 6f6e 653a  unt is not None:
-0000f1c0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-0000f1d0: 5b27 6d61 785f 7469 705f 616d 6f75 6e74  ['max_tip_amount
-0000f1e0: 275d 203d 206d 6178 5f74 6970 5f61 6d6f  '] = max_tip_amo
-0000f1f0: 756e 740a 2020 2020 6966 2073 7567 6765  unt.    if sugge
-0000f200: 7374 6564 5f74 6970 5f61 6d6f 756e 7473  sted_tip_amounts
-0000f210: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000f220: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
-0000f230: 7567 6765 7374 6564 5f74 6970 5f61 6d6f  uggested_tip_amo
-0000f240: 756e 7473 275d 203d 206a 736f 6e2e 6475  unts'] = json.du
-0000f250: 6d70 7328 7375 6767 6573 7465 645f 7469  mps(suggested_ti
-0000f260: 705f 616d 6f75 6e74 7329 0a20 2020 2069  p_amounts).    i
-0000f270: 6620 7072 6f74 6563 745f 636f 6e74 656e  f protect_conten
-0000f280: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0000f290: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-0000f2a0: 7072 6f74 6563 745f 636f 6e74 656e 7427  protect_content'
-0000f2b0: 5d20 3d20 7072 6f74 6563 745f 636f 6e74  ] = protect_cont
-0000f2c0: 656e 740a 2020 2020 6966 206d 6573 7361  ent.    if messa
-0000f2d0: 6765 5f74 6872 6561 645f 6964 3a0a 2020  ge_thread_id:.  
-0000f2e0: 2020 2020 2020 7061 796c 6f61 645b 276d        payload['m
-0000f2f0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-0000f300: 275d 203d 206d 6573 7361 6765 5f74 6872  '] = message_thr
-0000f310: 6561 645f 6964 0a20 2020 2072 6574 7572  ead_id.    retur
-0000f320: 6e20 6177 6169 7420 5f70 726f 6365 7373  n await _process
-0000f330: 5f72 6571 7565 7374 2874 6f6b 656e 2c20  _request(token, 
-0000f340: 6d65 7468 6f64 5f75 726c 2c20 7061 7261  method_url, para
-0000f350: 6d73 3d70 6179 6c6f 6164 290a 0a0a 6173  ms=payload)...as
-0000f360: 796e 6320 6465 6620 616e 7377 6572 5f73  ync def answer_s
-0000f370: 6869 7070 696e 675f 7175 6572 7928 746f  hipping_query(to
-0000f380: 6b65 6e2c 2073 6869 7070 696e 675f 7175  ken, shipping_qu
-0000f390: 6572 795f 6964 2c20 6f6b 2c20 7368 6970  ery_id, ok, ship
-0000f3a0: 7069 6e67 5f6f 7074 696f 6e73 3d4e 6f6e  ping_options=Non
-0000f3b0: 652c 2065 7272 6f72 5f6d 6573 7361 6765  e, error_message
-0000f3c0: 3d4e 6f6e 6529 3a0a 2020 2020 2222 220a  =None):.    """.
-0000f3d0: 2020 2020 4966 2079 6f75 2073 656e 7420      If you sent 
-0000f3e0: 616e 2069 6e76 6f69 6365 2072 6571 7565  an invoice reque
-0000f3f0: 7374 696e 6720 6120 7368 6970 7069 6e67  sting a shipping
-0000f400: 2061 6464 7265 7373 2061 6e64 2074 6865   address and the
-0000f410: 2070 6172 616d 6574 6572 2069 735f 666c   parameter is_fl
-0000f420: 6578 6962 6c65 2077 6173 2073 7065 6369  exible was speci
-0000f430: 6669 6564 2c20 7468 6520 426f 7420 4150  fied, the Bot AP
-0000f440: 4920 7769 6c6c 2073 656e 6420 616e 2055  I will send an U
-0000f450: 7064 6174 6520 7769 7468 2061 2073 6869  pdate with a shi
-0000f460: 7070 696e 675f 7175 6572 7920 6669 656c  pping_query fiel
-0000f470: 6420 746f 2074 6865 2062 6f74 2e20 5573  d to the bot. Us
-0000f480: 6520 7468 6973 206d 6574 686f 6420 746f  e this method to
-0000f490: 2072 6570 6c79 2074 6f20 7368 6970 7069   reply to shippi
-0000f4a0: 6e67 2071 7565 7269 6573 2e20 4f6e 2073  ng queries. On s
-0000f4b0: 7563 6365 7373 2c20 5472 7565 2069 7320  uccess, True is 
-0000f4c0: 7265 7475 726e 6564 2e0a 2020 2020 3a70  returned..    :p
-0000f4d0: 6172 616d 2074 6f6b 656e 3a20 426f 7427  aram token: Bot'
-0000f4e0: 7320 746f 6b65 6e20 2879 6f75 2064 6f6e  s token (you don
-0000f4f0: 2774 206e 6565 6420 746f 2066 696c 6c20  't need to fill 
-0000f500: 7468 6973 290a 2020 2020 3a70 6172 616d  this).    :param
-0000f510: 2073 6869 7070 696e 675f 7175 6572 795f   shipping_query_
-0000f520: 6964 3a20 556e 6971 7565 2069 6465 6e74  id: Unique ident
-0000f530: 6966 6965 7220 666f 7220 7468 6520 7175  ifier for the qu
-0000f540: 6572 7920 746f 2062 6520 616e 7377 6572  ery to be answer
-0000f550: 6564 0a20 2020 203a 7061 7261 6d20 6f6b  ed.    :param ok
-0000f560: 3a20 5370 6563 6966 7920 5472 7565 2069  : Specify True i
-0000f570: 6620 6465 6c69 7665 7279 2074 6f20 7468  f delivery to th
-0000f580: 6520 7370 6563 6966 6965 6420 6164 6472  e specified addr
-0000f590: 6573 7320 6973 2070 6f73 7369 626c 6520  ess is possible 
-0000f5a0: 616e 6420 4661 6c73 6520 6966 2074 6865  and False if the
-0000f5b0: 7265 2061 7265 2061 6e79 2070 726f 626c  re are any probl
-0000f5c0: 656d 7320 2866 6f72 2065 7861 6d70 6c65  ems (for example
-0000f5d0: 2c20 6966 2064 656c 6976 6572 7920 746f  , if delivery to
-0000f5e0: 2074 6865 2073 7065 6369 6669 6564 2061   the specified a
-0000f5f0: 6464 7265 7373 2069 7320 6e6f 7420 706f  ddress is not po
-0000f600: 7373 6962 6c65 290a 2020 2020 3a70 6172  ssible).    :par
-0000f610: 616d 2073 6869 7070 696e 675f 6f70 7469  am shipping_opti
-0000f620: 6f6e 733a 2052 6571 7569 7265 6420 6966  ons: Required if
-0000f630: 206f 6b20 6973 2054 7275 652e 2041 204a   ok is True. A J
-0000f640: 534f 4e2d 7365 7269 616c 697a 6564 2061  SON-serialized a
-0000f650: 7272 6179 206f 6620 6176 6169 6c61 626c  rray of availabl
-0000f660: 6520 7368 6970 7069 6e67 206f 7074 696f  e shipping optio
-0000f670: 6e73 2e0a 2020 2020 3a70 6172 616d 2065  ns..    :param e
-0000f680: 7272 6f72 5f6d 6573 7361 6765 3a20 5265  rror_message: Re
-0000f690: 7175 6972 6564 2069 6620 6f6b 2069 7320  quired if ok is 
-0000f6a0: 4661 6c73 652e 2045 7272 6f72 206d 6573  False. Error mes
-0000f6b0: 7361 6765 2069 6e20 6875 6d61 6e20 7265  sage in human re
-0000f6c0: 6164 6162 6c65 2066 6f72 6d20 7468 6174  adable form that
-0000f6d0: 2065 7870 6c61 696e 7320 7768 7920 6974   explains why it
-0000f6e0: 2069 7320 696d 706f 7373 6962 6c65 2074   is impossible t
-0000f6f0: 6f20 636f 6d70 6c65 7465 2074 6865 206f  o complete the o
-0000f700: 7264 6572 2028 652e 672e 2022 536f 7272  rder (e.g. "Sorr
-0000f710: 792c 2064 656c 6976 6572 7920 746f 2079  y, delivery to y
-0000f720: 6f75 7220 6465 7369 7265 6420 6164 6472  our desired addr
-0000f730: 6573 7320 6973 2075 6e61 7661 696c 6162  ess is unavailab
-0000f740: 6c65 2729 2e20 5465 6c65 6772 616d 2077  le'). Telegram w
-0000f750: 696c 6c20 6469 7370 6c61 7920 7468 6973  ill display this
-0000f760: 206d 6573 7361 6765 2074 6f20 7468 6520   message to the 
-0000f770: 7573 6572 2e0a 2020 2020 3a72 6574 7572  user..    :retur
-0000f780: 6e3a 0a20 2020 2022 2222 0a20 2020 206d  n:.    """.    m
-0000f790: 6574 686f 645f 7572 6c20 3d20 2761 6e73  ethod_url = 'ans
-0000f7a0: 7765 7253 6869 7070 696e 6751 7565 7279  werShippingQuery
-0000f7b0: 270a 2020 2020 7061 796c 6f61 6420 3d20  '.    payload = 
-0000f7c0: 7b27 7368 6970 7069 6e67 5f71 7565 7279  {'shipping_query
-0000f7d0: 5f69 6427 3a20 7368 6970 7069 6e67 5f71  _id': shipping_q
-0000f7e0: 7565 7279 5f69 642c 2027 6f6b 273a 206f  uery_id, 'ok': o
-0000f7f0: 6b7d 0a20 2020 2069 6620 7368 6970 7069  k}.    if shippi
-0000f800: 6e67 5f6f 7074 696f 6e73 3a0a 2020 2020  ng_options:.    
-0000f810: 2020 2020 7061 796c 6f61 645b 2773 6869      payload['shi
-0000f820: 7070 696e 675f 6f70 7469 6f6e 7327 5d20  pping_options'] 
-0000f830: 3d20 6177 6169 7420 5f63 6f6e 7665 7274  = await _convert
-0000f840: 5f6c 6973 745f 6a73 6f6e 5f73 6572 6961  _list_json_seria
-0000f850: 6c69 7a61 626c 6528 7368 6970 7069 6e67  lizable(shipping
-0000f860: 5f6f 7074 696f 6e73 290a 2020 2020 6966  _options).    if
-0000f870: 2065 7272 6f72 5f6d 6573 7361 6765 3a0a   error_message:.
-0000f880: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-0000f890: 2765 7272 6f72 5f6d 6573 7361 6765 275d  'error_message']
-0000f8a0: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
-0000f8b0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-0000f8c0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-0000f8d0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-0000f8e0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-0000f8f0: 6c6f 6164 290a 0a0a 6173 796e 6320 6465  load)...async de
-0000f900: 6620 616e 7377 6572 5f70 7265 5f63 6865  f answer_pre_che
-0000f910: 636b 6f75 745f 7175 6572 7928 746f 6b65  ckout_query(toke
-0000f920: 6e2c 2070 7265 5f63 6865 636b 6f75 745f  n, pre_checkout_
-0000f930: 7175 6572 795f 6964 2c20 6f6b 2c20 6572  query_id, ok, er
-0000f940: 726f 725f 6d65 7373 6167 653d 4e6f 6e65  ror_message=None
-0000f950: 293a 0a20 2020 2022 2222 0a20 2020 204f  ):.    """.    O
-0000f960: 6e63 6520 7468 6520 7573 6572 2068 6173  nce the user has
-0000f970: 2063 6f6e 6669 726d 6564 2074 6865 6972   confirmed their
-0000f980: 2070 6179 6d65 6e74 2061 6e64 2073 6869   payment and shi
-0000f990: 7070 696e 6720 6465 7461 696c 732c 2074  pping details, t
-0000f9a0: 6865 2042 6f74 2041 5049 2073 656e 6473  he Bot API sends
-0000f9b0: 2074 6865 2066 696e 616c 2063 6f6e 6669   the final confi
-0000f9c0: 726d 6174 696f 6e20 696e 2074 6865 2066  rmation in the f
-0000f9d0: 6f72 6d20 6f66 2061 6e20 5570 6461 7465  orm of an Update
-0000f9e0: 2077 6974 6820 7468 6520 6669 656c 6420   with the field 
-0000f9f0: 7072 655f 6368 6563 6b6f 7574 5f71 7565  pre_checkout_que
-0000fa00: 7279 2e20 5573 6520 7468 6973 206d 6574  ry. Use this met
-0000fa10: 686f 6420 746f 2072 6573 706f 6e64 2074  hod to respond t
-0000fa20: 6f20 7375 6368 2070 7265 2d63 6865 636b  o such pre-check
-0000fa30: 6f75 7420 7175 6572 6965 732e 204f 6e20  out queries. On 
-0000fa40: 7375 6363 6573 732c 2054 7275 6520 6973  success, True is
-0000fa50: 2072 6574 7572 6e65 642e 204e 6f74 653a   returned. Note:
-0000fa60: 2054 6865 2042 6f74 2041 5049 206d 7573   The Bot API mus
-0000fa70: 7420 7265 6365 6976 6520 616e 2061 6e73  t receive an ans
-0000fa80: 7765 7220 7769 7468 696e 2031 3020 7365  wer within 10 se
-0000fa90: 636f 6e64 7320 6166 7465 7220 7468 6520  conds after the 
-0000faa0: 7072 652d 6368 6563 6b6f 7574 2071 7565  pre-checkout que
-0000fab0: 7279 2077 6173 2073 656e 742e 0a20 2020  ry was sent..   
-0000fac0: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
-0000fad0: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
-0000fae0: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
-0000faf0: 6c6c 2074 6869 7329 0a20 2020 203a 7061  ll this).    :pa
-0000fb00: 7261 6d20 7072 655f 6368 6563 6b6f 7574  ram pre_checkout
-0000fb10: 5f71 7565 7279 5f69 643a 2055 6e69 7175  _query_id: Uniqu
-0000fb20: 6520 6964 656e 7469 6669 6572 2066 6f72  e identifier for
-0000fb30: 2074 6865 2071 7565 7279 2074 6f20 6265   the query to be
-0000fb40: 2061 6e73 7765 7265 640a 2020 2020 3a70   answered.    :p
-0000fb50: 6172 616d 206f 6b3a 2053 7065 6369 6679  aram ok: Specify
-0000fb60: 2054 7275 6520 6966 2065 7665 7279 7468   True if everyth
-0000fb70: 696e 6720 6973 2061 6c72 6967 6874 2028  ing is alright (
-0000fb80: 676f 6f64 7320 6172 6520 6176 6169 6c61  goods are availa
-0000fb90: 626c 652c 2065 7463 2e29 2061 6e64 2074  ble, etc.) and t
-0000fba0: 6865 2062 6f74 2069 7320 7265 6164 7920  he bot is ready 
-0000fbb0: 746f 2070 726f 6365 6564 2077 6974 6820  to proceed with 
-0000fbc0: 7468 6520 6f72 6465 722e 2055 7365 2046  the order. Use F
-0000fbd0: 616c 7365 2069 6620 7468 6572 6520 6172  alse if there ar
-0000fbe0: 6520 616e 7920 7072 6f62 6c65 6d73 2e0a  e any problems..
-0000fbf0: 2020 2020 3a70 6172 616d 2065 7272 6f72      :param error
-0000fc00: 5f6d 6573 7361 6765 3a20 5265 7175 6972  _message: Requir
-0000fc10: 6564 2069 6620 6f6b 2069 7320 4661 6c73  ed if ok is Fals
-0000fc20: 652e 2045 7272 6f72 206d 6573 7361 6765  e. Error message
-0000fc30: 2069 6e20 6875 6d61 6e20 7265 6164 6162   in human readab
-0000fc40: 6c65 2066 6f72 6d20 7468 6174 2065 7870  le form that exp
-0000fc50: 6c61 696e 7320 7468 6520 7265 6173 6f6e  lains the reason
-0000fc60: 2066 6f72 2066 6169 6c75 7265 2074 6f20   for failure to 
-0000fc70: 7072 6f63 6565 6420 7769 7468 2074 6865  proceed with the
-0000fc80: 2063 6865 636b 6f75 7420 2865 2e67 2e20   checkout (e.g. 
-0000fc90: 2253 6f72 7279 2c20 736f 6d65 626f 6479  "Sorry, somebody
-0000fca0: 206a 7573 7420 626f 7567 6874 2074 6865   just bought the
-0000fcb0: 206c 6173 7420 6f66 206f 7572 2061 6d61   last of our ama
-0000fcc0: 7a69 6e67 2062 6c61 636b 2054 2d73 6869  zing black T-shi
-0000fcd0: 7274 7320 7768 696c 6520 796f 7520 7765  rts while you we
-0000fce0: 7265 2062 7573 7920 6669 6c6c 696e 6720  re busy filling 
-0000fcf0: 6f75 7420 796f 7572 2070 6179 6d65 6e74  out your payment
-0000fd00: 2064 6574 6169 6c73 2e20 506c 6561 7365   details. Please
-0000fd10: 2063 686f 6f73 6520 6120 6469 6666 6572   choose a differ
-0000fd20: 656e 7420 636f 6c6f 7220 6f72 2067 6172  ent color or gar
-0000fd30: 6d65 6e74 2122 292e 2054 656c 6567 7261  ment!"). Telegra
-0000fd40: 6d20 7769 6c6c 2064 6973 706c 6179 2074  m will display t
-0000fd50: 6869 7320 6d65 7373 6167 6520 746f 2074  his message to t
-0000fd60: 6865 2075 7365 722e 0a20 2020 203a 7265  he user..    :re
-0000fd70: 7475 726e 3a0a 2020 2020 2222 220a 2020  turn:.    """.  
-0000fd80: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
-0000fd90: 616e 7377 6572 5072 6543 6865 636b 6f75  answerPreCheckou
-0000fda0: 7451 7565 7279 270a 2020 2020 7061 796c  tQuery'.    payl
-0000fdb0: 6f61 6420 3d20 7b27 7072 655f 6368 6563  oad = {'pre_chec
-0000fdc0: 6b6f 7574 5f71 7565 7279 5f69 6427 3a20  kout_query_id': 
-0000fdd0: 7072 655f 6368 6563 6b6f 7574 5f71 7565  pre_checkout_que
-0000fde0: 7279 5f69 642c 2027 6f6b 273a 206f 6b7d  ry_id, 'ok': ok}
-0000fdf0: 0a20 2020 2069 6620 6572 726f 725f 6d65  .    if error_me
-0000fe00: 7373 6167 653a 0a20 2020 2020 2020 2070  ssage:.        p
-0000fe10: 6179 6c6f 6164 5b27 6572 726f 725f 6d65  ayload['error_me
-0000fe20: 7373 6167 6527 5d20 3d20 6572 726f 725f  ssage'] = error_
-0000fe30: 6d65 7373 6167 650a 2020 2020 7265 7475  message.    retu
-0000fe40: 726e 2061 7761 6974 205f 7072 6f63 6573  rn await _proces
-0000fe50: 735f 7265 7175 6573 7428 746f 6b65 6e2c  s_request(token,
-0000fe60: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
-0000fe70: 616d 733d 7061 796c 6f61 6429 0a0a 0a23  ams=payload)...#
-0000fe80: 2049 6e6c 696e 6551 7565 7279 0a0a 6173   InlineQuery..as
-0000fe90: 796e 6320 6465 6620 616e 7377 6572 5f63  ync def answer_c
-0000fea0: 616c 6c62 6163 6b5f 7175 6572 7928 746f  allback_query(to
-0000feb0: 6b65 6e2c 2063 616c 6c62 6163 6b5f 7175  ken, callback_qu
-0000fec0: 6572 795f 6964 2c20 7465 7874 3d4e 6f6e  ery_id, text=Non
-0000fed0: 652c 2073 686f 775f 616c 6572 743d 4e6f  e, show_alert=No
-0000fee0: 6e65 2c20 7572 6c3d 4e6f 6e65 2c20 6361  ne, url=None, ca
-0000fef0: 6368 655f 7469 6d65 3d4e 6f6e 6529 3a0a  che_time=None):.
-0000ff00: 2020 2020 2222 220a 2020 2020 5573 6520      """.    Use 
-0000ff10: 7468 6973 206d 6574 686f 6420 746f 2073  this method to s
-0000ff20: 656e 6420 616e 7377 6572 7320 746f 2063  end answers to c
-0000ff30: 616c 6c62 6163 6b20 7175 6572 6965 7320  allback queries 
-0000ff40: 7365 6e74 2066 726f 6d20 696e 6c69 6e65  sent from inline
-0000ff50: 206b 6579 626f 6172 6473 2e20 5468 6520   keyboards. The 
-0000ff60: 616e 7377 6572 2077 696c 6c20 6265 2064  answer will be d
-0000ff70: 6973 706c 6179 6564 2074 6f20 7468 6520  isplayed to the 
-0000ff80: 7573 6572 2061 7320 6120 6e6f 7469 6669  user as a notifi
-0000ff90: 6361 7469 6f6e 2061 7420 7468 6520 746f  cation at the to
-0000ffa0: 7020 6f66 2074 6865 2063 6861 7420 7363  p of the chat sc
-0000ffb0: 7265 656e 206f 7220 6173 2061 6e20 616c  reen or as an al
-0000ffc0: 6572 742e 204f 6e20 7375 6363 6573 732c  ert. On success,
-0000ffd0: 2054 7275 6520 6973 2072 6574 7572 6e65   True is returne
-0000ffe0: 642e 0a20 2020 2041 6c74 6572 6e61 7469  d..    Alternati
-0000fff0: 7665 6c79 2c20 7468 6520 7573 6572 2063  vely, the user c
-00010000: 616e 2062 6520 7265 6469 7265 6374 6564  an be redirected
-00010010: 2074 6f20 7468 6520 7370 6563 6966 6965   to the specifie
-00010020: 6420 4761 6d65 2055 524c 2e20 466f 7220  d Game URL. For 
-00010030: 7468 6973 206f 7074 696f 6e20 746f 2077  this option to w
-00010040: 6f72 6b2c 2079 6f75 206d 7573 7420 6669  ork, you must fi
-00010050: 7273 7420 6372 6561 7465 2061 2067 616d  rst create a gam
-00010060: 6520 666f 7220 796f 7572 2062 6f74 2076  e for your bot v
-00010070: 6961 2042 6f74 4661 7468 6572 2061 6e64  ia BotFather and
-00010080: 2061 6363 6570 7420 7468 6520 7465 726d   accept the term
-00010090: 732e 204f 7468 6572 7769 7365 2c20 796f  s. Otherwise, yo
-000100a0: 7520 6d61 7920 7573 6520 6c69 6e6b 7320  u may use links 
-000100b0: 6c69 6b65 2074 656c 6567 7261 6d2e 6d65  like telegram.me
-000100c0: 2f79 6f75 725f 626f 743f 7374 6172 743d  /your_bot?start=
-000100d0: 5858 5858 2074 6861 7420 6f70 656e 2079  XXXX that open y
-000100e0: 6f75 7220 626f 7420 7769 7468 2061 2070  our bot with a p
-000100f0: 6172 616d 6574 6572 2e0a 2020 2020 3a70  arameter..    :p
-00010100: 6172 616d 2074 6f6b 656e 3a20 426f 7427  aram token: Bot'
-00010110: 7320 746f 6b65 6e20 2879 6f75 2064 6f6e  s token (you don
-00010120: 2774 206e 6565 6420 746f 2066 696c 6c20  't need to fill 
-00010130: 7468 6973 290a 2020 2020 3a70 6172 616d  this).    :param
-00010140: 2063 616c 6c62 6163 6b5f 7175 6572 795f   callback_query_
-00010150: 6964 3a20 556e 6971 7565 2069 6465 6e74  id: Unique ident
-00010160: 6966 6965 7220 666f 7220 7468 6520 7175  ifier for the qu
-00010170: 6572 7920 746f 2062 6520 616e 7377 6572  ery to be answer
-00010180: 6564 0a20 2020 203a 7061 7261 6d20 7465  ed.    :param te
-00010190: 7874 3a20 284f 7074 696f 6e61 6c29 2054  xt: (Optional) T
-000101a0: 6578 7420 6f66 2074 6865 206e 6f74 6966  ext of the notif
-000101b0: 6963 6174 696f 6e2e 2049 6620 6e6f 7420  ication. If not 
-000101c0: 7370 6563 6966 6965 642c 206e 6f74 6869  specified, nothi
-000101d0: 6e67 2077 696c 6c20 6265 2073 686f 776e  ng will be shown
-000101e0: 2074 6f20 7468 6520 7573 6572 2c20 302d   to the user, 0-
-000101f0: 3230 3020 6368 6172 6163 7465 7273 0a20  200 characters. 
-00010200: 2020 203a 7061 7261 6d20 7368 6f77 5f61     :param show_a
-00010210: 6c65 7274 3a20 284f 7074 696f 6e61 6c29  lert: (Optional)
-00010220: 2049 6620 7472 7565 2c20 616e 2061 6c65   If true, an ale
-00010230: 7274 2077 696c 6c20 6265 2073 686f 776e  rt will be shown
-00010240: 2062 7920 7468 6520 636c 6965 6e74 2069   by the client i
-00010250: 6e73 7465 6164 206f 6620 6120 6e6f 7469  nstead of a noti
-00010260: 6669 6361 7469 6f6e 2061 7420 7468 6520  fication at the 
-00010270: 746f 7020 6f66 2074 6865 2063 6861 7420  top of the chat 
-00010280: 7363 7265 656e 2e20 4465 6661 756c 7473  screen. Defaults
-00010290: 2074 6f20 6661 6c73 652e 0a20 2020 203a   to false..    :
-000102a0: 7061 7261 6d20 7572 6c3a 2028 4f70 7469  param url: (Opti
-000102b0: 6f6e 616c 2920 5552 4c20 7468 6174 2077  onal) URL that w
-000102c0: 696c 6c20 6265 206f 7065 6e65 6420 6279  ill be opened by
-000102d0: 2074 6865 2075 7365 7227 7320 636c 6965   the user's clie
-000102e0: 6e74 2e20 4966 2079 6f75 2068 6176 6520  nt. If you have 
-000102f0: 6372 6561 7465 6420 6120 4761 6d65 2061  created a Game a
-00010300: 6e64 2061 6363 6570 7465 6420 7468 6520  nd accepted the 
-00010310: 636f 6e64 6974 696f 6e73 2076 6961 2040  conditions via @
-00010320: 426f 7466 6174 6865 722c 2073 7065 6369  Botfather, speci
-00010330: 6679 2074 6865 2055 524c 2074 6861 7420  fy the URL that 
-00010340: 6f70 656e 7320 796f 7572 2067 616d 6520  opens your game 
-00010350: e280 9320 6e6f 7465 2074 6861 7420 7468  ... note that th
-00010360: 6973 2077 696c 6c20 6f6e 6c79 2077 6f72  is will only wor
-00010370: 6b20 6966 2074 6865 2071 7565 7279 2063  k if the query c
-00010380: 6f6d 6573 2066 726f 6d20 6120 6361 6c6c  omes from a call
-00010390: 6261 636b 5f67 616d 6520 6275 7474 6f6e  back_game button
-000103a0: 2e0a 2020 2020 4f74 6865 7277 6973 652c  ..    Otherwise,
-000103b0: 2079 6f75 206d 6179 2075 7365 206c 696e   you may use lin
-000103c0: 6b73 206c 696b 6520 7465 6c65 6772 616d  ks like telegram
-000103d0: 2e6d 652f 796f 7572 5f62 6f74 3f73 7461  .me/your_bot?sta
-000103e0: 7274 3d58 5858 5820 7468 6174 206f 7065  rt=XXXX that ope
-000103f0: 6e20 796f 7572 2062 6f74 2077 6974 6820  n your bot with 
-00010400: 6120 7061 7261 6d65 7465 722e 0a20 2020  a parameter..   
-00010410: 203a 7061 7261 6d20 6361 6368 655f 7469   :param cache_ti
-00010420: 6d65 3a20 284f 7074 696f 6e61 6c29 2054  me: (Optional) T
-00010430: 6865 206d 6178 696d 756d 2061 6d6f 756e  he maximum amoun
-00010440: 7420 6f66 2074 696d 6520 696e 2073 6563  t of time in sec
-00010450: 6f6e 6473 2074 6861 7420 7468 6520 7265  onds that the re
-00010460: 7375 6c74 206f 6620 7468 6520 6361 6c6c  sult of the call
-00010470: 6261 636b 2071 7565 7279 206d 6179 2062  back query may b
-00010480: 6520 6361 6368 6564 2063 6c69 656e 742d  e cached client-
-00010490: 7369 6465 2e20 5465 6c65 6772 616d 2061  side. Telegram a
-000104a0: 7070 7320 7769 6c6c 2073 7570 706f 7274  pps will support
-000104b0: 2063 6163 6869 6e67 2073 7461 7274 696e   caching startin
-000104c0: 6720 696e 2076 6572 7369 6f6e 2033 2e31  g in version 3.1
-000104d0: 342e 2044 6566 6175 6c74 7320 746f 2030  4. Defaults to 0
-000104e0: 2e0a 2020 2020 3a72 6574 7572 6e3a 0a20  ..    :return:. 
-000104f0: 2020 2022 2222 0a20 2020 206d 6574 686f     """.    metho
-00010500: 645f 7572 6c20 3d20 2761 6e73 7765 7243  d_url = 'answerC
-00010510: 616c 6c62 6163 6b51 7565 7279 270a 2020  allbackQuery'.  
-00010520: 2020 7061 796c 6f61 6420 3d20 7b27 6361    payload = {'ca
-00010530: 6c6c 6261 636b 5f71 7565 7279 5f69 6427  llback_query_id'
-00010540: 3a20 6361 6c6c 6261 636b 5f71 7565 7279  : callback_query
-00010550: 5f69 647d 0a20 2020 2069 6620 7465 7874  _id}.    if text
-00010560: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00010570: 645b 2774 6578 7427 5d20 3d20 7465 7874  d['text'] = text
-00010580: 0a20 2020 2069 6620 7368 6f77 5f61 6c65  .    if show_ale
-00010590: 7274 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rt is not None:.
-000105a0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
-000105b0: 2773 686f 775f 616c 6572 7427 5d20 3d20  'show_alert'] = 
-000105c0: 7368 6f77 5f61 6c65 7274 0a20 2020 2069  show_alert.    i
-000105d0: 6620 7572 6c3a 0a20 2020 2020 2020 2070  f url:.        p
-000105e0: 6179 6c6f 6164 5b27 7572 6c27 5d20 3d20  ayload['url'] = 
-000105f0: 7572 6c0a 2020 2020 6966 2063 6163 6865  url.    if cache
-00010600: 5f74 696d 6520 6973 206e 6f74 204e 6f6e  _time is not Non
-00010610: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00010620: 6164 5b27 6361 6368 655f 7469 6d65 275d  ad['cache_time']
-00010630: 203d 2063 6163 6865 5f74 696d 650a 2020   = cache_time.  
-00010640: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00010650: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00010660: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00010670: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00010680: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-00010690: 290a 0a0a 6173 796e 6320 6465 6620 616e  )...async def an
-000106a0: 7377 6572 5f69 6e6c 696e 655f 7175 6572  swer_inline_quer
-000106b0: 7928 746f 6b65 6e2c 2069 6e6c 696e 655f  y(token, inline_
-000106c0: 7175 6572 795f 6964 2c20 7265 7375 6c74  query_id, result
-000106d0: 732c 2063 6163 6865 5f74 696d 653d 4e6f  s, cache_time=No
-000106e0: 6e65 2c20 6973 5f70 6572 736f 6e61 6c3d  ne, is_personal=
-000106f0: 4e6f 6e65 2c20 6e65 7874 5f6f 6666 7365  None, next_offse
-00010700: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00010710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010720: 7377 6974 6368 5f70 6d5f 7465 7874 3d4e  switch_pm_text=N
-00010730: 6f6e 652c 2073 7769 7463 685f 706d 5f70  one, switch_pm_p
-00010740: 6172 616d 6574 6572 3d4e 6f6e 6529 3a0a  arameter=None):.
-00010750: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00010760: 2027 616e 7377 6572 496e 6c69 6e65 5175   'answerInlineQu
-00010770: 6572 7927 0a20 2020 2070 6179 6c6f 6164  ery'.    payload
-00010780: 203d 207b 2769 6e6c 696e 655f 7175 6572   = {'inline_quer
-00010790: 795f 6964 273a 2069 6e6c 696e 655f 7175  y_id': inline_qu
-000107a0: 6572 795f 6964 2c20 2772 6573 756c 7473  ery_id, 'results
-000107b0: 273a 2061 7761 6974 205f 636f 6e76 6572  ': await _conver
-000107c0: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
-000107d0: 616c 697a 6162 6c65 2872 6573 756c 7473  alizable(results
-000107e0: 297d 0a20 2020 2069 6620 6361 6368 655f  )}.    if cache_
-000107f0: 7469 6d65 2069 7320 6e6f 7420 4e6f 6e65  time is not None
-00010800: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00010810: 645b 2763 6163 6865 5f74 696d 6527 5d20  d['cache_time'] 
-00010820: 3d20 6361 6368 655f 7469 6d65 0a20 2020  = cache_time.   
-00010830: 2069 6620 6973 5f70 6572 736f 6e61 6c20   if is_personal 
-00010840: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00010850: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
-00010860: 5f70 6572 736f 6e61 6c27 5d20 3d20 6973  _personal'] = is
-00010870: 5f70 6572 736f 6e61 6c0a 2020 2020 6966  _personal.    if
-00010880: 206e 6578 745f 6f66 6673 6574 2069 7320   next_offset is 
-00010890: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000108a0: 2020 7061 796c 6f61 645b 276e 6578 745f    payload['next_
-000108b0: 6f66 6673 6574 275d 203d 206e 6578 745f  offset'] = next_
-000108c0: 6f66 6673 6574 0a20 2020 2069 6620 7377  offset.    if sw
-000108d0: 6974 6368 5f70 6d5f 7465 7874 3a0a 2020  itch_pm_text:.  
-000108e0: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
-000108f0: 7769 7463 685f 706d 5f74 6578 7427 5d20  witch_pm_text'] 
-00010900: 3d20 7377 6974 6368 5f70 6d5f 7465 7874  = switch_pm_text
-00010910: 0a20 2020 2069 6620 7377 6974 6368 5f70  .    if switch_p
-00010920: 6d5f 7061 7261 6d65 7465 723a 0a20 2020  m_parameter:.   
-00010930: 2020 2020 2070 6179 6c6f 6164 5b27 7377       payload['sw
-00010940: 6974 6368 5f70 6d5f 7061 7261 6d65 7465  itch_pm_paramete
-00010950: 7227 5d20 3d20 7377 6974 6368 5f70 6d5f  r'] = switch_pm_
-00010960: 7061 7261 6d65 7465 720a 2020 2020 7265  parameter.    re
-00010970: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00010980: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00010990: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-000109a0: 6172 616d 733d 7061 796c 6f61 642c 206d  arams=payload, m
-000109b0: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-000109c0: 6173 796e 6320 6465 6620 6765 745f 7374  async def get_st
-000109d0: 6963 6b65 725f 7365 7428 746f 6b65 6e2c  icker_set(token,
-000109e0: 206e 616d 6529 3a0a 2020 2020 6d65 7468   name):.    meth
-000109f0: 6f64 5f75 726c 203d 2027 6765 7453 7469  od_url = 'getSti
-00010a00: 636b 6572 5365 7427 0a20 2020 2072 6574  ckerSet'.    ret
-00010a10: 7572 6e20 6177 6169 7420 5f70 726f 6365  urn await _proce
-00010a20: 7373 5f72 6571 7565 7374 2874 6f6b 656e  ss_request(token
-00010a30: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
-00010a40: 7261 6d73 3d7b 276e 616d 6527 3a20 6e61  rams={'name': na
-00010a50: 6d65 7d29 0a0a 6173 796e 6320 6465 6620  me})..async def 
-00010a60: 6765 745f 6375 7374 6f6d 5f65 6d6f 6a69  get_custom_emoji
-00010a70: 5f73 7469 636b 6572 7328 746f 6b65 6e2c  _stickers(token,
-00010a80: 2063 7573 746f 6d5f 656d 6f6a 695f 6964   custom_emoji_id
-00010a90: 7329 3a0a 2020 2020 6d65 7468 6f64 5f75  s):.    method_u
-00010aa0: 726c 203d 2072 2767 6574 4375 7374 6f6d  rl = r'getCustom
-00010ab0: 456d 6f6a 6953 7469 636b 6572 7327 0a20  EmojiStickers'. 
-00010ac0: 2020 2072 6574 7572 6e20 6177 6169 7420     return await 
-00010ad0: 5f70 726f 6365 7373 5f72 6571 7565 7374  _process_request
-00010ae0: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
-00010af0: 726c 2c20 7061 7261 6d73 3d7b 2763 7573  rl, params={'cus
-00010b00: 746f 6d5f 656d 6f6a 695f 6964 7327 3a20  tom_emoji_ids': 
-00010b10: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 6473  custom_emoji_ids
-00010b20: 7d29 0a0a 6173 796e 6320 6465 6620 7570  })..async def up
-00010b30: 6c6f 6164 5f73 7469 636b 6572 5f66 696c  load_sticker_fil
-00010b40: 6528 746f 6b65 6e2c 2075 7365 725f 6964  e(token, user_id
-00010b50: 2c20 706e 675f 7374 6963 6b65 7229 3a0a  , png_sticker):.
-00010b60: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00010b70: 2027 7570 6c6f 6164 5374 6963 6b65 7246   'uploadStickerF
-00010b80: 696c 6527 0a20 2020 2070 6179 6c6f 6164  ile'.    payload
-00010b90: 203d 207b 2775 7365 725f 6964 273a 2075   = {'user_id': u
-00010ba0: 7365 725f 6964 7d0a 2020 2020 6669 6c65  ser_id}.    file
-00010bb0: 7320 3d20 7b27 706e 675f 7374 6963 6b65  s = {'png_sticke
-00010bc0: 7227 3a20 706e 675f 7374 6963 6b65 727d  r': png_sticker}
-00010bd0: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00010be0: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00010bf0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00010c00: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00010c10: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
-00010c20: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
-00010c30: 290a 0a0a 6173 796e 6320 6465 6620 6372  )...async def cr
-00010c40: 6561 7465 5f6e 6577 5f73 7469 636b 6572  eate_new_sticker
-00010c50: 5f73 6574 280a 2020 2020 2020 2020 746f  _set(.        to
-00010c60: 6b65 6e2c 2075 7365 725f 6964 2c20 6e61  ken, user_id, na
-00010c70: 6d65 2c20 7469 746c 652c 2065 6d6f 6a69  me, title, emoji
-00010c80: 732c 2070 6e67 5f73 7469 636b 6572 2c20  s, png_sticker, 
-00010c90: 7467 735f 7374 6963 6b65 722c 0a20 2020  tgs_sticker,.   
-00010ca0: 2020 2020 206d 6173 6b5f 706f 7369 7469       mask_positi
-00010cb0: 6f6e 3d4e 6f6e 652c 2077 6562 6d5f 7374  on=None, webm_st
-00010cc0: 6963 6b65 723d 4e6f 6e65 2c20 7374 6963  icker=None, stic
-00010cd0: 6b65 725f 7479 7065 3d4e 6f6e 6529 3a0a  ker_type=None):.
-00010ce0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
-00010cf0: 2027 6372 6561 7465 4e65 7753 7469 636b   'createNewStick
-00010d00: 6572 5365 7427 0a20 2020 2070 6179 6c6f  erSet'.    paylo
-00010d10: 6164 203d 207b 2775 7365 725f 6964 273a  ad = {'user_id':
-00010d20: 2075 7365 725f 6964 2c20 276e 616d 6527   user_id, 'name'
-00010d30: 3a20 6e61 6d65 2c20 2774 6974 6c65 273a  : name, 'title':
-00010d40: 2074 6974 6c65 2c20 2765 6d6f 6a69 7327   title, 'emojis'
-00010d50: 3a20 656d 6f6a 6973 7d0a 2020 2020 6966  : emojis}.    if
-00010d60: 2070 6e67 5f73 7469 636b 6572 3a0a 2020   png_sticker:.  
-00010d70: 2020 2020 2020 7374 7970 6520 3d20 2770        stype = 'p
-00010d80: 6e67 5f73 7469 636b 6572 270a 2020 2020  ng_sticker'.    
-00010d90: 656c 6966 2077 6562 6d5f 7374 6963 6b65  elif webm_sticke
-00010da0: 723a 0a20 2020 2020 2020 2073 7479 7065  r:.        stype
-00010db0: 203d 2027 7765 626d 5f73 7469 636b 6572   = 'webm_sticker
-00010dc0: 270a 2020 2020 656c 7365 3a0a 2020 2020  '.    else:.    
-00010dd0: 2020 2020 7374 7970 6520 3d20 2774 6773      stype = 'tgs
-00010de0: 5f73 7469 636b 6572 270a 2020 2020 7374  _sticker'.    st
-00010df0: 6963 6b65 7220 3d20 706e 675f 7374 6963  icker = png_stic
-00010e00: 6b65 7220 6f72 2074 6773 5f73 7469 636b  ker or tgs_stick
-00010e10: 6572 206f 7220 7765 626d 5f73 7469 636b  er or webm_stick
-00010e20: 6572 0a20 2020 2066 696c 6573 203d 204e  er.    files = N
-00010e30: 6f6e 650a 2020 2020 6966 206e 6f74 2075  one.    if not u
-00010e40: 7469 6c2e 6973 5f73 7472 696e 6728 7374  til.is_string(st
-00010e50: 6963 6b65 7229 3a0a 2020 2020 2020 2020  icker):.        
-00010e60: 6669 6c65 7320 3d20 7b73 7479 7065 3a20  files = {stype: 
-00010e70: 7374 6963 6b65 727d 0a20 2020 2065 6c73  sticker}.    els
-00010e80: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-00010e90: 6164 5b73 7479 7065 5d20 3d20 7374 6963  ad[stype] = stic
-00010ea0: 6b65 720a 2020 2020 6966 206d 6173 6b5f  ker.    if mask_
-00010eb0: 706f 7369 7469 6f6e 3a0a 2020 2020 2020  position:.      
-00010ec0: 2020 7061 796c 6f61 645b 276d 6173 6b5f    payload['mask_
-00010ed0: 706f 7369 7469 6f6e 275d 203d 206d 6173  position'] = mas
-00010ee0: 6b5f 706f 7369 7469 6f6e 2e74 6f5f 6a73  k_position.to_js
-00010ef0: 6f6e 2829 0a20 2020 2069 6620 7765 626d  on().    if webm
-00010f00: 5f73 7469 636b 6572 3a0a 2020 2020 2020  _sticker:.      
-00010f10: 2020 7061 796c 6f61 645b 2777 6562 6d5f    payload['webm_
-00010f20: 7374 6963 6b65 7227 5d20 3d20 7765 626d  sticker'] = webm
-00010f30: 5f73 7469 636b 6572 0a20 2020 2069 6620  _sticker.    if 
-00010f40: 7374 6963 6b65 725f 7479 7065 3a0a 2020  sticker_type:.  
-00010f50: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
-00010f60: 7469 636b 6572 5f74 7970 6527 5d20 3d20  ticker_type'] = 
-00010f70: 7374 6963 6b65 725f 7479 7065 0a20 2020  sticker_type.   
-00010f80: 2072 6574 7572 6e20 6177 6169 7420 5f70   return await _p
-00010f90: 726f 6365 7373 5f72 6571 7565 7374 2874  rocess_request(t
-00010fa0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
-00010fb0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
-00010fc0: 2c20 6669 6c65 733d 6669 6c65 732c 206d  , files=files, m
-00010fd0: 6574 686f 643d 2770 6f73 7427 290a 0a0a  ethod='post')...
-00010fe0: 6173 796e 6320 6465 6620 6164 645f 7374  async def add_st
-00010ff0: 6963 6b65 725f 746f 5f73 6574 2874 6f6b  icker_to_set(tok
-00011000: 656e 2c20 7573 6572 5f69 642c 206e 616d  en, user_id, nam
-00011010: 652c 2065 6d6f 6a69 732c 2070 6e67 5f73  e, emojis, png_s
-00011020: 7469 636b 6572 2c20 7467 735f 7374 6963  ticker, tgs_stic
-00011030: 6b65 722c 206d 6173 6b5f 706f 7369 7469  ker, mask_positi
-00011040: 6f6e 2c20 7765 626d 5f73 7469 636b 6572  on, webm_sticker
-00011050: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00011060: 6c20 3d20 2761 6464 5374 6963 6b65 7254  l = 'addStickerT
-00011070: 6f53 6574 270a 2020 2020 7061 796c 6f61  oSet'.    payloa
-00011080: 6420 3d20 7b27 7573 6572 5f69 6427 3a20  d = {'user_id': 
-00011090: 7573 6572 5f69 642c 2027 6e61 6d65 273a  user_id, 'name':
-000110a0: 206e 616d 652c 2027 656d 6f6a 6973 273a   name, 'emojis':
-000110b0: 2065 6d6f 6a69 737d 0a20 2020 2069 6620   emojis}.    if 
-000110c0: 706e 675f 7374 6963 6b65 723a 0a20 2020  png_sticker:.   
-000110d0: 2020 2020 2073 7479 7065 203d 2027 706e       stype = 'pn
-000110e0: 675f 7374 6963 6b65 7227 0a20 2020 2065  g_sticker'.    e
-000110f0: 6c69 6620 7765 626d 5f73 7469 636b 6572  lif webm_sticker
-00011100: 3a0a 2020 2020 2020 2020 7374 7970 6520  :.        stype 
-00011110: 3d20 2777 6562 6d5f 7374 6963 6b65 7227  = 'webm_sticker'
-00011120: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00011130: 2020 2073 7479 7065 203d 2027 7467 735f     stype = 'tgs_
-00011140: 7374 6963 6b65 7227 0a20 2020 2066 696c  sticker'.    fil
-00011150: 6573 203d 204e 6f6e 650a 2020 2020 7374  es = None.    st
-00011160: 6963 6b65 7220 3d20 706e 675f 7374 6963  icker = png_stic
-00011170: 6b65 7220 6f72 2074 6773 5f73 7469 636b  ker or tgs_stick
-00011180: 6572 206f 7220 7765 626d 5f73 7469 636b  er or webm_stick
-00011190: 6572 0a0a 2020 2020 6966 206e 6f74 2075  er..    if not u
-000111a0: 7469 6c2e 6973 5f73 7472 696e 6728 7374  til.is_string(st
-000111b0: 6963 6b65 7229 3a0a 2020 2020 2020 2020  icker):.        
-000111c0: 6669 6c65 7320 3d20 7b73 7479 7065 3a20  files = {stype: 
-000111d0: 7374 6963 6b65 727d 0a20 2020 2065 6c73  sticker}.    els
-000111e0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000111f0: 6164 5b73 7479 7065 5d20 3d20 7374 6963  ad[stype] = stic
-00011200: 6b65 720a 2020 2020 6966 206d 6173 6b5f  ker.    if mask_
-00011210: 706f 7369 7469 6f6e 3a0a 2020 2020 2020  position:.      
-00011220: 2020 7061 796c 6f61 645b 276d 6173 6b5f    payload['mask_
-00011230: 706f 7369 7469 6f6e 275d 203d 206d 6173  position'] = mas
-00011240: 6b5f 706f 7369 7469 6f6e 2e74 6f5f 6a73  k_position.to_js
-00011250: 6f6e 2829 0a0a 2020 2020 6966 2077 6562  on()..    if web
-00011260: 6d5f 7374 6963 6b65 723a 0a20 2020 2020  m_sticker:.     
-00011270: 2020 2070 6179 6c6f 6164 5b27 7765 626d     payload['webm
-00011280: 5f73 7469 636b 6572 275d 203d 2077 6562  _sticker'] = web
-00011290: 6d5f 7374 6963 6b65 720a 2020 2020 7265  m_sticker.    re
-000112a0: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-000112b0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-000112c0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-000112d0: 6172 616d 733d 7061 796c 6f61 642c 2066  arams=payload, f
-000112e0: 696c 6573 3d66 696c 6573 2c20 6d65 7468  iles=files, meth
-000112f0: 6f64 3d27 706f 7374 2729 0a0a 0a61 7379  od='post')...asy
-00011300: 6e63 2064 6566 2073 6574 5f73 7469 636b  nc def set_stick
-00011310: 6572 5f70 6f73 6974 696f 6e5f 696e 5f73  er_position_in_s
-00011320: 6574 2874 6f6b 656e 2c20 7374 6963 6b65  et(token, sticke
-00011330: 722c 2070 6f73 6974 696f 6e29 3a0a 2020  r, position):.  
-00011340: 2020 6d65 7468 6f64 5f75 726c 203d 2027    method_url = '
-00011350: 7365 7453 7469 636b 6572 506f 7369 7469  setStickerPositi
-00011360: 6f6e 496e 5365 7427 0a20 2020 2070 6179  onInSet'.    pay
-00011370: 6c6f 6164 203d 207b 2773 7469 636b 6572  load = {'sticker
-00011380: 273a 2073 7469 636b 6572 2c20 2770 6f73  ': sticker, 'pos
-00011390: 6974 696f 6e27 3a20 706f 7369 7469 6f6e  ition': position
-000113a0: 7d0a 2020 2020 7265 7475 726e 2061 7761  }.    return awa
-000113b0: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-000113c0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-000113d0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
-000113e0: 796c 6f61 642c 206d 6574 686f 643d 2770  yload, method='p
-000113f0: 6f73 7427 290a 0a0a 6173 796e 6320 6465  ost')...async de
-00011400: 6620 6465 6c65 7465 5f73 7469 636b 6572  f delete_sticker
-00011410: 5f66 726f 6d5f 7365 7428 746f 6b65 6e2c  _from_set(token,
-00011420: 2073 7469 636b 6572 293a 0a20 2020 206d   sticker):.    m
-00011430: 6574 686f 645f 7572 6c20 3d20 2764 656c  ethod_url = 'del
-00011440: 6574 6553 7469 636b 6572 4672 6f6d 5365  eteStickerFromSe
-00011450: 7427 0a20 2020 2070 6179 6c6f 6164 203d  t'.    payload =
-00011460: 207b 2773 7469 636b 6572 273a 2073 7469   {'sticker': sti
-00011470: 636b 6572 7d0a 2020 2020 7265 7475 726e  cker}.    return
-00011480: 2061 7761 6974 205f 7072 6f63 6573 735f   await _process_
-00011490: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
-000114a0: 6574 686f 645f 7572 6c2c 2070 6172 616d  ethod_url, param
-000114b0: 733d 7061 796c 6f61 642c 206d 6574 686f  s=payload, metho
-000114c0: 643d 2770 6f73 7427 290a 0a0a 0a61 7379  d='post')....asy
-000114d0: 6e63 2064 6566 2063 7265 6174 655f 696e  nc def create_in
-000114e0: 766f 6963 655f 6c69 6e6b 2874 6f6b 656e  voice_link(token
-000114f0: 2c20 7469 746c 652c 2064 6573 6372 6970  , title, descrip
-00011500: 7469 6f6e 2c20 7061 796c 6f61 642c 2070  tion, payload, p
-00011510: 726f 7669 6465 725f 746f 6b65 6e2c 0a20  rovider_token,. 
-00011520: 2020 2020 2020 2020 2020 2063 7572 7265             curre
-00011530: 6e63 792c 2070 7269 6365 732c 206d 6178  ncy, prices, max
-00011540: 5f74 6970 5f61 6d6f 756e 743d 4e6f 6e65  _tip_amount=None
-00011550: 2c20 7375 6767 6573 7465 645f 7469 705f  , suggested_tip_
-00011560: 616d 6f75 6e74 733d 4e6f 6e65 2c20 7072  amounts=None, pr
-00011570: 6f76 6964 6572 5f64 6174 613d 4e6f 6e65  ovider_data=None
-00011580: 2c0a 2020 2020 2020 2020 2020 2020 7068  ,.            ph
-00011590: 6f74 6f5f 7572 6c3d 4e6f 6e65 2c20 7068  oto_url=None, ph
-000115a0: 6f74 6f5f 7369 7a65 3d4e 6f6e 652c 2070  oto_size=None, p
-000115b0: 686f 746f 5f77 6964 7468 3d4e 6f6e 652c  hoto_width=None,
-000115c0: 2070 686f 746f 5f68 6569 6768 743d 4e6f   photo_height=No
-000115d0: 6e65 2c20 6e65 6564 5f6e 616d 653d 4e6f  ne, need_name=No
-000115e0: 6e65 2c20 6e65 6564 5f70 686f 6e65 5f6e  ne, need_phone_n
-000115f0: 756d 6265 723d 4e6f 6e65 2c0a 2020 2020  umber=None,.    
-00011600: 2020 2020 2020 2020 6e65 6564 5f65 6d61          need_ema
-00011610: 696c 3d4e 6f6e 652c 206e 6565 645f 7368  il=None, need_sh
-00011620: 6970 7069 6e67 5f61 6464 7265 7373 3d4e  ipping_address=N
-00011630: 6f6e 652c 2073 656e 645f 7068 6f6e 655f  one, send_phone_
-00011640: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
-00011650: 6572 3d4e 6f6e 652c 0a20 2020 2020 2020  er=None,.       
-00011660: 2020 2020 2073 656e 645f 656d 6169 6c5f       send_email_
-00011670: 746f 5f70 726f 7669 6465 723d 4e6f 6e65  to_provider=None
-00011680: 2c20 6973 5f66 6c65 7869 626c 653d 4e6f  , is_flexible=No
-00011690: 6e65 293a 0a20 2020 206d 6574 686f 645f  ne):.    method_
-000116a0: 7572 6c20 3d20 7227 6372 6561 7465 496e  url = r'createIn
-000116b0: 766f 6963 654c 696e 6b27 0a20 2020 2070  voiceLink'.    p
-000116c0: 6179 6c6f 6164 203d 207b 2774 6974 6c65  ayload = {'title
-000116d0: 273a 2074 6974 6c65 2c20 2764 6573 6372  ': title, 'descr
-000116e0: 6970 7469 6f6e 273a 2064 6573 6372 6970  iption': descrip
-000116f0: 7469 6f6e 2c20 2770 6179 6c6f 6164 273a  tion, 'payload':
-00011700: 2070 6179 6c6f 6164 2c20 2770 726f 7669   payload, 'provi
-00011710: 6465 725f 746f 6b65 6e27 3a20 7072 6f76  der_token': prov
-00011720: 6964 6572 5f74 6f6b 656e 2c0a 2020 2020  ider_token,.    
-00011730: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
-00011740: 7265 6e63 7927 3a20 6375 7272 656e 6379  rency': currency
-00011750: 2c20 2770 7269 6365 7327 3a20 6177 6169  , 'prices': awai
-00011760: 7420 5f63 6f6e 7665 7274 5f6c 6973 745f  t _convert_list_
-00011770: 6a73 6f6e 5f73 6572 6961 6c69 7a61 626c  json_serializabl
-00011780: 6528 7072 6963 6573 297d 0a20 2020 2069  e(prices)}.    i
-00011790: 6620 6d61 785f 7469 705f 616d 6f75 6e74  f max_tip_amount
-000117a0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-000117b0: 645b 276d 6178 5f74 6970 5f61 6d6f 756e  d['max_tip_amoun
-000117c0: 7427 5d20 3d20 6d61 785f 7469 705f 616d  t'] = max_tip_am
-000117d0: 6f75 6e74 0a20 2020 2069 6620 7375 6767  ount.    if sugg
-000117e0: 6573 7465 645f 7469 705f 616d 6f75 6e74  ested_tip_amount
-000117f0: 733a 0a20 2020 2020 2020 2070 6179 6c6f  s:.        paylo
-00011800: 6164 5b27 7375 6767 6573 7465 645f 7469  ad['suggested_ti
-00011810: 705f 616d 6f75 6e74 7327 5d20 3d20 6a73  p_amounts'] = js
-00011820: 6f6e 2e64 756d 7073 2873 7567 6765 7374  on.dumps(suggest
-00011830: 6564 5f74 6970 5f61 6d6f 756e 7473 290a  ed_tip_amounts).
-00011840: 2020 2020 6966 2070 726f 7669 6465 725f      if provider_
-00011850: 6461 7461 3a0a 2020 2020 2020 2020 7061  data:.        pa
-00011860: 796c 6f61 645b 2770 726f 7669 6465 725f  yload['provider_
-00011870: 6461 7461 275d 203d 2070 726f 7669 6465  data'] = provide
-00011880: 725f 6461 7461 0a20 2020 2069 6620 7068  r_data.    if ph
-00011890: 6f74 6f5f 7572 6c3a 0a20 2020 2020 2020  oto_url:.       
-000118a0: 2070 6179 6c6f 6164 5b27 7068 6f74 6f5f   payload['photo_
-000118b0: 7572 6c27 5d20 3d20 7068 6f74 6f5f 7572  url'] = photo_ur
-000118c0: 6c0a 2020 2020 6966 2070 686f 746f 5f73  l.    if photo_s
-000118d0: 697a 653a 0a20 2020 2020 2020 2070 6179  ize:.        pay
-000118e0: 6c6f 6164 5b27 7068 6f74 6f5f 7369 7a65  load['photo_size
-000118f0: 275d 203d 2070 686f 746f 5f73 697a 650a  '] = photo_size.
-00011900: 2020 2020 6966 2070 686f 746f 5f77 6964      if photo_wid
-00011910: 7468 3a0a 2020 2020 2020 2020 7061 796c  th:.        payl
-00011920: 6f61 645b 2770 686f 746f 5f77 6964 7468  oad['photo_width
-00011930: 275d 203d 2070 686f 746f 5f77 6964 7468  '] = photo_width
-00011940: 0a20 2020 2069 6620 7068 6f74 6f5f 6865  .    if photo_he
-00011950: 6967 6874 3a0a 2020 2020 2020 2020 7061  ight:.        pa
-00011960: 796c 6f61 645b 2770 686f 746f 5f68 6569  yload['photo_hei
-00011970: 6768 7427 5d20 3d20 7068 6f74 6f5f 6865  ght'] = photo_he
-00011980: 6967 6874 0a20 2020 2069 6620 6e65 6564  ight.    if need
-00011990: 5f6e 616d 6520 6973 206e 6f74 204e 6f6e  _name is not Non
-000119a0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000119b0: 6164 5b27 6e65 6564 5f6e 616d 6527 5d20  ad['need_name'] 
-000119c0: 3d20 6e65 6564 5f6e 616d 650a 2020 2020  = need_name.    
-000119d0: 6966 206e 6565 645f 7068 6f6e 655f 6e75  if need_phone_nu
-000119e0: 6d62 6572 2069 7320 6e6f 7420 4e6f 6e65  mber is not None
-000119f0: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00011a00: 645b 276e 6565 645f 7068 6f6e 655f 6e75  d['need_phone_nu
-00011a10: 6d62 6572 275d 203d 206e 6565 645f 7068  mber'] = need_ph
-00011a20: 6f6e 655f 6e75 6d62 6572 0a20 2020 2069  one_number.    i
-00011a30: 6620 6e65 6564 5f65 6d61 696c 2069 7320  f need_email is 
-00011a40: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00011a50: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
-00011a60: 656d 6169 6c27 5d20 3d20 6e65 6564 5f65  email'] = need_e
-00011a70: 6d61 696c 0a20 2020 2069 6620 6e65 6564  mail.    if need
-00011a80: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
-00011a90: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00011aa0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00011ab0: 6e65 6564 5f73 6869 7070 696e 675f 6164  need_shipping_ad
-00011ac0: 6472 6573 7327 5d20 3d20 6e65 6564 5f73  dress'] = need_s
-00011ad0: 6869 7070 696e 675f 6164 6472 6573 730a  hipping_address.
-00011ae0: 2020 2020 6966 2073 656e 645f 7068 6f6e      if send_phon
-00011af0: 655f 6e75 6d62 6572 5f74 6f5f 7072 6f76  e_number_to_prov
-00011b00: 6964 6572 2069 7320 6e6f 7420 4e6f 6e65  ider is not None
-00011b10: 3a0a 2020 2020 2020 2020 7061 796c 6f61  :.        payloa
-00011b20: 645b 2773 656e 645f 7068 6f6e 655f 6e75  d['send_phone_nu
-00011b30: 6d62 6572 5f74 6f5f 7072 6f76 6964 6572  mber_to_provider
-00011b40: 275d 203d 2073 656e 645f 7068 6f6e 655f  '] = send_phone_
-00011b50: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
-00011b60: 6572 0a20 2020 2069 6620 7365 6e64 5f65  er.    if send_e
-00011b70: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
-00011b80: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00011b90: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
-00011ba0: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
-00011bb0: 7669 6465 7227 5d20 3d20 7365 6e64 5f65  vider'] = send_e
-00011bc0: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
-00011bd0: 0a20 2020 2069 6620 6973 5f66 6c65 7869  .    if is_flexi
-00011be0: 626c 6520 6973 206e 6f74 204e 6f6e 653a  ble is not None:
-00011bf0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
-00011c00: 5b27 6973 5f66 6c65 7869 626c 6527 5d20  ['is_flexible'] 
-00011c10: 3d20 6973 5f66 6c65 7869 626c 650a 2020  = is_flexible.  
-00011c20: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00011c30: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00011c40: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00011c50: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00011c60: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
-00011c70: 290a 0a0a 0a23 206e 6f69 6e73 7065 6374  )....# noinspect
-00011c80: 696f 6e20 5079 5368 6164 6f77 696e 6742  ion PyShadowingB
-00011c90: 7569 6c74 696e 730a 6173 796e 6320 6465  uiltins.async de
-00011ca0: 6620 7365 6e64 5f70 6f6c 6c28 0a20 2020  f send_poll(.   
-00011cb0: 2020 2020 2074 6f6b 656e 2c20 6368 6174       token, chat
-00011cc0: 5f69 642c 0a20 2020 2020 2020 2071 7565  _id,.        que
-00011cd0: 7374 696f 6e2c 206f 7074 696f 6e73 2c0a  stion, options,.
-00011ce0: 2020 2020 2020 2020 6973 5f61 6e6f 6e79          is_anony
-00011cf0: 6d6f 7573 203d 204e 6f6e 652c 2074 7970  mous = None, typ
-00011d00: 6520 3d20 4e6f 6e65 2c20 616c 6c6f 7773  e = None, allows
-00011d10: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
-00011d20: 7320 3d20 4e6f 6e65 2c20 636f 7272 6563  s = None, correc
-00011d30: 745f 6f70 7469 6f6e 5f69 6420 3d20 4e6f  t_option_id = No
-00011d40: 6e65 2c0a 2020 2020 2020 2020 6578 706c  ne,.        expl
-00011d50: 616e 6174 696f 6e20 3d20 4e6f 6e65 2c20  anation = None, 
-00011d60: 6578 706c 616e 6174 696f 6e5f 7061 7273  explanation_pars
-00011d70: 655f 6d6f 6465 3d4e 6f6e 652c 206f 7065  e_mode=None, ope
-00011d80: 6e5f 7065 7269 6f64 203d 204e 6f6e 652c  n_period = None,
-00011d90: 2063 6c6f 7365 5f64 6174 6520 3d20 4e6f   close_date = No
-00011da0: 6e65 2c20 6973 5f63 6c6f 7365 6420 3d20  ne, is_closed = 
-00011db0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6469  None,.        di
-00011dc0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00011dd0: 6f6e 3d46 616c 7365 2c20 7265 706c 795f  on=False, reply_
-00011de0: 746f 5f6d 6573 7361 6765 5f69 643d 4e6f  to_message_id=No
-00011df0: 6e65 2c20 616c 6c6f 775f 7365 6e64 696e  ne, allow_sendin
-00011e00: 675f 7769 7468 6f75 745f 7265 706c 793d  g_without_reply=
-00011e10: 4e6f 6e65 2c0a 2020 2020 2020 2020 7265  None,.        re
-00011e20: 706c 795f 6d61 726b 7570 3d4e 6f6e 652c  ply_markup=None,
-00011e30: 2074 696d 656f 7574 3d4e 6f6e 652c 2065   timeout=None, e
-00011e40: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
-00011e50: 6965 733d 4e6f 6e65 2c20 7072 6f74 6563  ies=None, protec
-00011e60: 745f 636f 6e74 656e 743d 4e6f 6e65 2c20  t_content=None, 
-00011e70: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00011e80: 643d 4e6f 6e65 293a 0a20 2020 206d 6574  d=None):.    met
-00011e90: 686f 645f 7572 6c20 3d20 7227 7365 6e64  hod_url = r'send
-00011ea0: 506f 6c6c 270a 2020 2020 7061 796c 6f61  Poll'.    payloa
-00011eb0: 6420 3d20 7b0a 2020 2020 2020 2020 2763  d = {.        'c
-00011ec0: 6861 745f 6964 273a 2073 7472 2863 6861  hat_id': str(cha
-00011ed0: 745f 6964 292c 0a20 2020 2020 2020 2027  t_id),.        '
-00011ee0: 7175 6573 7469 6f6e 273a 2071 7565 7374  question': quest
-00011ef0: 696f 6e2c 0a20 2020 2020 2020 2027 6f70  ion,.        'op
-00011f00: 7469 6f6e 7327 3a20 6a73 6f6e 2e64 756d  tions': json.dum
-00011f10: 7073 2861 7761 6974 205f 636f 6e76 6572  ps(await _conver
-00011f20: 745f 706f 6c6c 5f6f 7074 696f 6e73 286f  t_poll_options(o
-00011f30: 7074 696f 6e73 2929 7d0a 0a20 2020 2069  ptions))}..    i
-00011f40: 6620 6973 5f61 6e6f 6e79 6d6f 7573 2069  f is_anonymous i
-00011f50: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00011f60: 2020 2020 7061 796c 6f61 645b 2769 735f      payload['is_
-00011f70: 616e 6f6e 796d 6f75 7327 5d20 3d20 6973  anonymous'] = is
-00011f80: 5f61 6e6f 6e79 6d6f 7573 0a20 2020 2069  _anonymous.    i
-00011f90: 6620 7479 7065 2069 7320 6e6f 7420 4e6f  f type is not No
-00011fa0: 6e65 3a0a 2020 2020 2020 2020 7061 796c  ne:.        payl
-00011fb0: 6f61 645b 2774 7970 6527 5d20 3d20 7479  oad['type'] = ty
-00011fc0: 7065 0a20 2020 2069 6620 616c 6c6f 7773  pe.    if allows
-00011fd0: 5f6d 756c 7469 706c 655f 616e 7377 6572  _multiple_answer
-00011fe0: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
-00011ff0: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
-00012000: 616c 6c6f 7773 5f6d 756c 7469 706c 655f  allows_multiple_
-00012010: 616e 7377 6572 7327 5d20 3d20 616c 6c6f  answers'] = allo
-00012020: 7773 5f6d 756c 7469 706c 655f 616e 7377  ws_multiple_answ
-00012030: 6572 730a 2020 2020 6966 2063 6f72 7265  ers.    if corre
-00012040: 6374 5f6f 7074 696f 6e5f 6964 2069 7320  ct_option_id is 
-00012050: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00012060: 2020 7061 796c 6f61 645b 2763 6f72 7265    payload['corre
-00012070: 6374 5f6f 7074 696f 6e5f 6964 275d 203d  ct_option_id'] =
-00012080: 2063 6f72 7265 6374 5f6f 7074 696f 6e5f   correct_option_
-00012090: 6964 0a20 2020 2069 6620 6578 706c 616e  id.    if explan
-000120a0: 6174 696f 6e20 6973 206e 6f74 204e 6f6e  ation is not Non
-000120b0: 653a 0a20 2020 2020 2020 2070 6179 6c6f  e:.        paylo
-000120c0: 6164 5b27 6578 706c 616e 6174 696f 6e27  ad['explanation'
-000120d0: 5d20 3d20 6578 706c 616e 6174 696f 6e0a  ] = explanation.
-000120e0: 2020 2020 6966 2065 7870 6c61 6e61 7469      if explanati
-000120f0: 6f6e 5f70 6172 7365 5f6d 6f64 6520 6973  on_parse_mode is
-00012100: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012110: 2020 2070 6179 6c6f 6164 5b27 6578 706c     payload['expl
-00012120: 616e 6174 696f 6e5f 7061 7273 655f 6d6f  anation_parse_mo
-00012130: 6465 275d 203d 2065 7870 6c61 6e61 7469  de'] = explanati
-00012140: 6f6e 5f70 6172 7365 5f6d 6f64 650a 2020  on_parse_mode.  
-00012150: 2020 6966 206f 7065 6e5f 7065 7269 6f64    if open_period
-00012160: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00012170: 2020 2020 2020 7061 796c 6f61 645b 276f        payload['o
-00012180: 7065 6e5f 7065 7269 6f64 275d 203d 206f  pen_period'] = o
-00012190: 7065 6e5f 7065 7269 6f64 0a20 2020 2069  pen_period.    i
-000121a0: 6620 636c 6f73 655f 6461 7465 2069 7320  f close_date is 
-000121b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000121c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000121d0: 636c 6f73 655f 6461 7465 2c20 6461 7465  close_date, date
-000121e0: 7469 6d65 293a 0a20 2020 2020 2020 2020  time):.         
-000121f0: 2020 2070 6179 6c6f 6164 5b27 636c 6f73     payload['clos
-00012200: 655f 6461 7465 275d 203d 2063 6c6f 7365  e_date'] = close
-00012210: 5f64 6174 652e 7469 6d65 7374 616d 7028  _date.timestamp(
-00012220: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00012230: 2020 2020 2020 2020 2020 2020 7061 796c              payl
-00012240: 6f61 645b 2763 6c6f 7365 5f64 6174 6527  oad['close_date'
-00012250: 5d20 3d20 636c 6f73 655f 6461 7465 0a20  ] = close_date. 
-00012260: 2020 2069 6620 6973 5f63 6c6f 7365 6420     if is_closed 
-00012270: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00012280: 2020 2020 2070 6179 6c6f 6164 5b27 6973       payload['is
-00012290: 5f63 6c6f 7365 6427 5d20 3d20 6973 5f63  _closed'] = is_c
-000122a0: 6c6f 7365 640a 0a20 2020 2069 6620 6469  losed..    if di
-000122b0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-000122c0: 6f6e 3a0a 2020 2020 2020 2020 7061 796c  on:.        payl
-000122d0: 6f61 645b 2764 6973 6162 6c65 5f6e 6f74  oad['disable_not
-000122e0: 6966 6963 6174 696f 6e27 5d20 3d20 6469  ification'] = di
-000122f0: 7361 626c 655f 6e6f 7469 6669 6361 7469  sable_notificati
-00012300: 6f6e 0a20 2020 2069 6620 7265 706c 795f  on.    if reply_
-00012310: 746f 5f6d 6573 7361 6765 5f69 6420 6973  to_message_id is
-00012320: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00012330: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-00012340: 795f 746f 5f6d 6573 7361 6765 5f69 6427  y_to_message_id'
-00012350: 5d20 3d20 7265 706c 795f 746f 5f6d 6573  ] = reply_to_mes
-00012360: 7361 6765 5f69 640a 2020 2020 6966 2061  sage_id.    if a
-00012370: 6c6c 6f77 5f73 656e 6469 6e67 5f77 6974  llow_sending_wit
-00012380: 686f 7574 5f72 6570 6c79 2069 7320 6e6f  hout_reply is no
-00012390: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000123a0: 7061 796c 6f61 645b 2761 6c6c 6f77 5f73  payload['allow_s
-000123b0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-000123c0: 6570 6c79 275d 203d 2061 6c6c 6f77 5f73  eply'] = allow_s
-000123d0: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
-000123e0: 6570 6c79 0a20 2020 2069 6620 7265 706c  eply.    if repl
-000123f0: 795f 6d61 726b 7570 2069 7320 6e6f 7420  y_markup is not 
-00012400: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
-00012410: 796c 6f61 645b 2772 6570 6c79 5f6d 6172  yload['reply_mar
-00012420: 6b75 7027 5d20 3d20 6177 6169 7420 5f63  kup'] = await _c
-00012430: 6f6e 7665 7274 5f6d 6172 6b75 7028 7265  onvert_markup(re
-00012440: 706c 795f 6d61 726b 7570 290a 2020 2020  ply_markup).    
-00012450: 6966 2074 696d 656f 7574 3a0a 2020 2020  if timeout:.    
-00012460: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
-00012470: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
-00012480: 0a20 2020 2069 6620 6578 706c 616e 6174  .    if explanat
-00012490: 696f 6e5f 656e 7469 7469 6573 3a0a 2020  ion_entities:.  
-000124a0: 2020 2020 2020 7061 796c 6f61 645b 2765        payload['e
-000124b0: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
-000124c0: 6965 7327 5d20 3d20 6a73 6f6e 2e64 756d  ies'] = json.dum
-000124d0: 7073 280a 2020 2020 2020 2020 2020 2020  ps(.            
-000124e0: 7479 7065 732e 4d65 7373 6167 6545 6e74  types.MessageEnt
-000124f0: 6974 792e 746f 5f6c 6973 745f 6f66 5f64  ity.to_list_of_d
-00012500: 6963 7473 2865 7870 6c61 6e61 7469 6f6e  icts(explanation
-00012510: 5f65 6e74 6974 6965 7329 290a 2020 2020  _entities)).    
-00012520: 6966 2070 726f 7465 6374 5f63 6f6e 7465  if protect_conte
-00012530: 6e74 3a0a 2020 2020 2020 2020 7061 796c  nt:.        payl
-00012540: 6f61 645b 2770 726f 7465 6374 5f63 6f6e  oad['protect_con
-00012550: 7465 6e74 275d 203d 2070 726f 7465 6374  tent'] = protect
-00012560: 5f63 6f6e 7465 6e74 0a20 2020 2069 6620  _content.    if 
-00012570: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00012580: 643a 0a20 2020 2020 2020 2070 6179 6c6f  d:.        paylo
-00012590: 6164 5b27 6d65 7373 6167 655f 7468 7265  ad['message_thre
-000125a0: 6164 5f69 6427 5d20 3d20 6d65 7373 6167  ad_id'] = messag
-000125b0: 655f 7468 7265 6164 5f69 640a 2020 2020  e_thread_id.    
-000125c0: 7265 7475 726e 2061 7761 6974 205f 7072  return await _pr
-000125d0: 6f63 6573 735f 7265 7175 6573 7428 746f  ocess_request(to
-000125e0: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
-000125f0: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
-00012600: 0a0a 0a61 7379 6e63 2064 6566 2063 7265  ...async def cre
-00012610: 6174 655f 666f 7275 6d5f 746f 7069 6328  ate_forum_topic(
-00012620: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00012630: 6e61 6d65 2c20 6963 6f6e 5f63 6f6c 6f72  name, icon_color
-00012640: 3d4e 6f6e 652c 2069 636f 6e5f 6375 7374  =None, icon_cust
-00012650: 6f6d 5f65 6d6f 6a69 5f69 643d 4e6f 6e65  om_emoji_id=None
-00012660: 293a 0a20 2020 206d 6574 686f 645f 7572  ):.    method_ur
-00012670: 6c20 3d20 7227 6372 6561 7465 466f 7275  l = r'createForu
-00012680: 6d54 6f70 6963 270a 2020 2020 7061 796c  mTopic'.    payl
-00012690: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-000126a0: 3a20 6368 6174 5f69 642c 2027 6e61 6d65  : chat_id, 'name
-000126b0: 273a 206e 616d 657d 0a20 2020 2069 6620  ': name}.    if 
-000126c0: 6963 6f6e 5f63 6f6c 6f72 3a0a 2020 2020  icon_color:.    
-000126d0: 2020 2020 7061 796c 6f61 645b 2769 636f      payload['ico
-000126e0: 6e5f 636f 6c6f 7227 5d20 3d20 6963 6f6e  n_color'] = icon
-000126f0: 5f63 6f6c 6f72 0a20 2020 2069 6620 6963  _color.    if ic
-00012700: 6f6e 5f63 7573 746f 6d5f 656d 6f6a 695f  on_custom_emoji_
-00012710: 6964 3a0a 2020 2020 2020 2020 7061 796c  id:.        payl
-00012720: 6f61 645b 2769 636f 6e5f 6375 7374 6f6d  oad['icon_custom
-00012730: 5f65 6d6f 6a69 5f69 6427 5d20 3d20 6963  _emoji_id'] = ic
-00012740: 6f6e 5f63 7573 746f 6d5f 656d 6f6a 695f  on_custom_emoji_
-00012750: 6964 0a20 2020 2072 6574 7572 6e20 6177  id.    return aw
-00012760: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-00012770: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-00012780: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-00012790: 6179 6c6f 6164 290a 0a61 7379 6e63 2064  ayload)..async d
-000127a0: 6566 2065 6469 745f 666f 7275 6d5f 746f  ef edit_forum_to
-000127b0: 7069 6328 746f 6b65 6e2c 2063 6861 745f  pic(token, chat_
-000127c0: 6964 2c20 6d65 7373 6167 655f 7468 7265  id, message_thre
-000127d0: 6164 5f69 642c 206e 616d 652c 2069 636f  ad_id, name, ico
-000127e0: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
-000127f0: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00012800: 726c 203d 2072 2765 6469 7446 6f72 756d  rl = r'editForum
-00012810: 546f 7069 6327 0a20 2020 2070 6179 6c6f  Topic'.    paylo
-00012820: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
-00012830: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
-00012840: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
-00012850: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
-00012860: 2c20 276e 616d 6527 3a20 6e61 6d65 2c20  , 'name': name, 
-00012870: 2769 636f 6e5f 6375 7374 6f6d 5f65 6d6f  'icon_custom_emo
-00012880: 6a69 5f69 6427 3a20 6963 6f6e 5f63 7573  ji_id': icon_cus
-00012890: 746f 6d5f 656d 6f6a 695f 6964 7d0a 2020  tom_emoji_id}.  
-000128a0: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-000128b0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-000128c0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-000128d0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-000128e0: 6429 0a0a 6173 796e 6320 6465 6620 636c  d)..async def cl
-000128f0: 6f73 655f 666f 7275 6d5f 746f 7069 6328  ose_forum_topic(
-00012900: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00012910: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00012920: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00012930: 726c 203d 2072 2763 6c6f 7365 466f 7275  rl = r'closeForu
-00012940: 6d54 6f70 6963 270a 2020 2020 7061 796c  mTopic'.    payl
-00012950: 6f61 6420 3d20 7b27 6368 6174 5f69 6427  oad = {'chat_id'
-00012960: 3a20 6368 6174 5f69 642c 2027 6d65 7373  : chat_id, 'mess
-00012970: 6167 655f 7468 7265 6164 5f69 6427 3a20  age_thread_id': 
-00012980: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00012990: 647d 0a20 2020 2072 6574 7572 6e20 6177  d}.    return aw
-000129a0: 6169 7420 5f70 726f 6365 7373 5f72 6571  ait _process_req
-000129b0: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
-000129c0: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
-000129d0: 6179 6c6f 6164 290a 0a61 7379 6e63 2064  ayload)..async d
-000129e0: 6566 2072 656f 7065 6e5f 666f 7275 6d5f  ef reopen_forum_
-000129f0: 746f 7069 6328 746f 6b65 6e2c 2063 6861  topic(token, cha
-00012a00: 745f 6964 2c20 6d65 7373 6167 655f 7468  t_id, message_th
-00012a10: 7265 6164 5f69 6429 3a0a 2020 2020 6d65  read_id):.    me
-00012a20: 7468 6f64 5f75 726c 203d 2072 2772 656f  thod_url = r'reo
-00012a30: 7065 6e46 6f72 756d 546f 7069 6327 0a20  penForumTopic'. 
-00012a40: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
-00012a50: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
-00012a60: 2c20 276d 6573 7361 6765 5f74 6872 6561  , 'message_threa
-00012a70: 645f 6964 273a 206d 6573 7361 6765 5f74  d_id': message_t
-00012a80: 6872 6561 645f 6964 7d0a 2020 2020 7265  hread_id}.    re
-00012a90: 7475 726e 2061 7761 6974 205f 7072 6f63  turn await _proc
-00012aa0: 6573 735f 7265 7175 6573 7428 746f 6b65  ess_request(toke
-00012ab0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
-00012ac0: 6172 616d 733d 7061 796c 6f61 6429 0a0a  arams=payload)..
-00012ad0: 6173 796e 6320 6465 6620 6465 6c65 7465  async def delete
-00012ae0: 5f66 6f72 756d 5f74 6f70 6963 2874 6f6b  _forum_topic(tok
-00012af0: 656e 2c20 6368 6174 5f69 642c 206d 6573  en, chat_id, mes
-00012b00: 7361 6765 5f74 6872 6561 645f 6964 293a  sage_thread_id):
-00012b10: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
-00012b20: 3d20 7227 6465 6c65 7465 466f 7275 6d54  = r'deleteForumT
-00012b30: 6f70 6963 270a 2020 2020 7061 796c 6f61  opic'.    payloa
-00012b40: 6420 3d20 7b27 6368 6174 5f69 6427 3a20  d = {'chat_id': 
-00012b50: 6368 6174 5f69 642c 2027 6d65 7373 6167  chat_id, 'messag
-00012b60: 655f 7468 7265 6164 5f69 6427 3a20 6d65  e_thread_id': me
-00012b70: 7373 6167 655f 7468 7265 6164 5f69 647d  ssage_thread_id}
-00012b80: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00012b90: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00012ba0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-00012bb0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-00012bc0: 6c6f 6164 290a 0a61 7379 6e63 2064 6566  load)..async def
-00012bd0: 2075 6e70 696e 5f61 6c6c 5f66 6f72 756d   unpin_all_forum
-00012be0: 5f74 6f70 6963 5f6d 6573 7361 6765 7328  _topic_messages(
-00012bf0: 746f 6b65 6e2c 2063 6861 745f 6964 2c20  token, chat_id, 
-00012c00: 6d65 7373 6167 655f 7468 7265 6164 5f69  message_thread_i
-00012c10: 6429 3a0a 2020 2020 6d65 7468 6f64 5f75  d):.    method_u
-00012c20: 726c 203d 2072 2775 6e70 696e 416c 6c46  rl = r'unpinAllF
-00012c30: 6f72 756d 546f 7069 634d 6573 7361 6765  orumTopicMessage
-00012c40: 7327 0a20 2020 2070 6179 6c6f 6164 203d  s'.    payload =
-00012c50: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
-00012c60: 745f 6964 2c20 276d 6573 7361 6765 5f74  t_id, 'message_t
-00012c70: 6872 6561 645f 6964 273a 206d 6573 7361  hread_id': messa
-00012c80: 6765 5f74 6872 6561 645f 6964 7d0a 2020  ge_thread_id}.  
-00012c90: 2020 7265 7475 726e 2061 7761 6974 205f    return await _
-00012ca0: 7072 6f63 6573 735f 7265 7175 6573 7428  process_request(
-00012cb0: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
-00012cc0: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
-00012cd0: 6429 0a0a 6173 796e 6320 6465 6620 6765  d)..async def ge
-00012ce0: 745f 666f 7275 6d5f 746f 7069 635f 6963  t_forum_topic_ic
-00012cf0: 6f6e 5f73 7469 636b 6572 7328 746f 6b65  on_stickers(toke
-00012d00: 6e29 3a0a 2020 2020 6d65 7468 6f64 5f75  n):.    method_u
-00012d10: 726c 203d 2072 2767 6574 466f 7275 6d54  rl = r'getForumT
-00012d20: 6f70 6963 4963 6f6e 5374 6963 6b65 7273  opicIconStickers
-00012d30: 270a 2020 2020 7265 7475 726e 2061 7761  '.    return awa
-00012d40: 6974 205f 7072 6f63 6573 735f 7265 7175  it _process_requ
-00012d50: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
-00012d60: 645f 7572 6c29 0a0a 6173 796e 6320 6465  d_url)..async de
-00012d70: 6620 5f63 6f6e 7665 7274 5f6c 6973 745f  f _convert_list_
-00012d80: 6a73 6f6e 5f73 6572 6961 6c69 7a61 626c  json_serializabl
-00012d90: 6528 7265 7375 6c74 7329 3a0a 2020 2020  e(results):.    
-00012da0: 7265 7420 3d20 2727 0a20 2020 2066 6f72  ret = ''.    for
-00012db0: 2072 2069 6e20 7265 7375 6c74 733a 0a20   r in results:. 
-00012dc0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00012dd0: 616e 6365 2872 2c20 7479 7065 732e 4a73  ance(r, types.Js
-00012de0: 6f6e 5365 7269 616c 697a 6162 6c65 293a  onSerializable):
-00012df0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00012e00: 203d 2072 6574 202b 2072 2e74 6f5f 6a73   = ret + r.to_js
-00012e10: 6f6e 2829 202b 2027 2c27 0a20 2020 2069  on() + ','.    i
-00012e20: 6620 6c65 6e28 7265 7429 203e 2030 3a0a  f len(ret) > 0:.
-00012e30: 2020 2020 2020 2020 7265 7420 3d20 7265          ret = re
-00012e40: 745b 3a2d 315d 0a20 2020 2072 6574 7572  t[:-1].    retur
-00012e50: 6e20 275b 2720 2b20 7265 7420 2b20 275d  n '[' + ret + ']
-00012e60: 270a 0a0a 0a61 7379 6e63 2064 6566 205f  '....async def _
-00012e70: 636f 6e76 6572 745f 656e 7469 7465 7328  convert_entites(
-00012e80: 656e 7469 7465 7329 3a0a 2020 2020 6966  entites):.    if
-00012e90: 2065 6e74 6974 6573 2069 7320 4e6f 6e65   entites is None
-00012ea0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00012eb0: 204e 6f6e 650a 2020 2020 656c 6966 206c   None.    elif l
-00012ec0: 656e 2865 6e74 6974 6573 2920 3d3d 2030  en(entites) == 0
-00012ed0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00012ee0: 205b 5d0a 2020 2020 656c 6966 2069 7369   [].    elif isi
-00012ef0: 6e73 7461 6e63 6528 656e 7469 7465 735b  nstance(entites[
-00012f00: 305d 2c20 7479 7065 732e 4a73 6f6e 5365  0], types.JsonSe
-00012f10: 7269 616c 697a 6162 6c65 293a 0a20 2020  rializable):.   
-00012f20: 2020 2020 2072 6574 7572 6e20 5b65 6e74       return [ent
-00012f30: 6974 792e 746f 5f6a 736f 6e28 2920 666f  ity.to_json() fo
-00012f40: 7220 656e 7469 7479 2069 6e20 656e 7469  r entity in enti
-00012f50: 7465 735d 0a20 2020 2065 6c73 653a 0a20  tes].    else:. 
-00012f60: 2020 2020 2020 2072 6574 7572 6e20 656e         return en
-00012f70: 7469 7465 730a 0a0a 6173 796e 6320 6465  tites...async de
-00012f80: 6620 5f63 6f6e 7665 7274 5f70 6f6c 6c5f  f _convert_poll_
-00012f90: 6f70 7469 6f6e 7328 706f 6c6c 5f6f 7074  options(poll_opt
-00012fa0: 696f 6e73 293a 0a20 2020 2069 6620 706f  ions):.    if po
-00012fb0: 6c6c 5f6f 7074 696f 6e73 2069 7320 4e6f  ll_options is No
-00012fc0: 6e65 3a0a 2020 2020 2020 2020 7265 7475  ne:.        retu
-00012fd0: 726e 204e 6f6e 650a 2020 2020 656c 6966  rn None.    elif
-00012fe0: 206c 656e 2870 6f6c 6c5f 6f70 7469 6f6e   len(poll_option
-00012ff0: 7329 203d 3d20 303a 0a20 2020 2020 2020  s) == 0:.       
-00013000: 2072 6574 7572 6e20 5b5d 0a20 2020 2065   return [].    e
-00013010: 6c69 6620 6973 696e 7374 616e 6365 2870  lif isinstance(p
-00013020: 6f6c 6c5f 6f70 7469 6f6e 735b 305d 2c20  oll_options[0], 
-00013030: 7374 7229 3a0a 2020 2020 2020 2020 2320  str):.        # 
-00013040: 436f 6d70 6174 6962 696c 6974 7920 6d6f  Compatibility mo
-00013050: 6465 2077 6974 6820 7072 6576 696f 7573  de with previous
-00013060: 2062 7567 2077 6865 6e20 6f6e 6c79 206c   bug when only l
-00013070: 6973 7420 6f66 2073 7472 696e 6720 7761  ist of string wa
-00013080: 7320 6163 6365 7074 6564 2061 7320 706f  s accepted as po
-00013090: 6c6c 5f6f 7074 696f 6e73 0a20 2020 2020  ll_options.     
-000130a0: 2020 2072 6574 7572 6e20 706f 6c6c 5f6f     return poll_o
-000130b0: 7074 696f 6e73 0a20 2020 2065 6c69 6620  ptions.    elif 
-000130c0: 6973 696e 7374 616e 6365 2870 6f6c 6c5f  isinstance(poll_
-000130d0: 6f70 7469 6f6e 735b 305d 2c20 7479 7065  options[0], type
-000130e0: 732e 506f 6c6c 4f70 7469 6f6e 293a 0a20  s.PollOption):. 
-000130f0: 2020 2020 2020 2072 6574 7572 6e20 5b6f         return [o
-00013100: 7074 696f 6e2e 7465 7874 2066 6f72 206f  ption.text for o
-00013110: 7074 696f 6e20 696e 2070 6f6c 6c5f 6f70  ption in poll_op
-00013120: 7469 6f6e 735d 0a20 2020 2065 6c73 653a  tions].    else:
-00013130: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013140: 706f 6c6c 5f6f 7074 696f 6e73 0a0a 0a61  poll_options...a
-00013150: 7379 6e63 2064 6566 2063 6f6e 7665 7274  sync def convert
-00013160: 5f69 6e70 7574 5f6d 6564 6961 286d 6564  _input_media(med
-00013170: 6961 293a 0a20 2020 2069 6620 6973 696e  ia):.    if isin
-00013180: 7374 616e 6365 286d 6564 6961 2c20 7479  stance(media, ty
-00013190: 7065 732e 496e 7075 744d 6564 6961 293a  pes.InputMedia):
-000131a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000131b0: 6d65 6469 612e 636f 6e76 6572 745f 696e  media.convert_in
-000131c0: 7075 745f 6d65 6469 6128 290a 2020 2020  put_media().    
-000131d0: 7265 7475 726e 204e 6f6e 652c 204e 6f6e  return None, Non
-000131e0: 650a 0a0a 6173 796e 6320 6465 6620 636f  e...async def co
-000131f0: 6e76 6572 745f 696e 7075 745f 6d65 6469  nvert_input_medi
-00013200: 615f 6172 7261 7928 6172 7261 7929 3a0a  a_array(array):.
-00013210: 2020 2020 6d65 6469 6120 3d20 5b5d 0a20      media = []. 
-00013220: 2020 2066 696c 6573 203d 207b 7d0a 2020     files = {}.  
-00013230: 2020 666f 7220 696e 7075 745f 6d65 6469    for input_medi
-00013240: 6120 696e 2061 7272 6179 3a0a 2020 2020  a in array:.    
-00013250: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00013260: 6528 696e 7075 745f 6d65 6469 612c 2074  e(input_media, t
-00013270: 7970 6573 2e49 6e70 7574 4d65 6469 6129  ypes.InputMedia)
-00013280: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
-00013290: 6469 615f 6469 6374 203d 2069 6e70 7574  dia_dict = input
-000132a0: 5f6d 6564 6961 2e74 6f5f 6469 6374 2829  _media.to_dict()
-000132b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000132c0: 6d65 6469 615f 6469 6374 5b27 6d65 6469  media_dict['medi
-000132d0: 6127 5d2e 7374 6172 7473 7769 7468 2827  a'].startswith('
-000132e0: 6174 7461 6368 3a2f 2f27 293a 0a20 2020  attach://'):.   
-000132f0: 2020 2020 2020 2020 2020 2020 206b 6579               key
-00013300: 203d 206d 6564 6961 5f64 6963 745b 276d   = media_dict['m
-00013310: 6564 6961 275d 2e72 6570 6c61 6365 2827  edia'].replace('
-00013320: 6174 7461 6368 3a2f 2f27 2c20 2727 290a  attach://', '').
-00013330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013340: 6669 6c65 735b 6b65 795d 203d 2069 6e70  files[key] = inp
-00013350: 7574 5f6d 6564 6961 2e6d 6564 6961 0a20  ut_media.media. 
-00013360: 2020 2020 2020 2020 2020 206d 6564 6961             media
-00013370: 2e61 7070 656e 6428 6d65 6469 615f 6469  .append(media_di
-00013380: 6374 290a 2020 2020 7265 7475 726e 206a  ct).    return j
-00013390: 736f 6e2e 6475 6d70 7328 6d65 6469 6129  son.dumps(media)
-000133a0: 2c20 6669 6c65 730a 0a0a 6173 796e 6320  , files...async 
-000133b0: 6465 6620 5f6e 6f5f 656e 636f 6465 2866  def _no_encode(f
-000133c0: 756e 6329 3a0a 2020 2020 6465 6620 7772  unc):.    def wr
-000133d0: 6170 7065 7228 6b65 792c 2076 616c 293a  apper(key, val):
-000133e0: 0a20 2020 2020 2020 2069 6620 6b65 7920  .        if key 
-000133f0: 3d3d 2027 6669 6c65 6e61 6d65 273a 0a20  == 'filename':. 
-00013400: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013410: 6e20 7527 7b30 7d3d 7b31 7d27 2e66 6f72  n u'{0}={1}'.for
-00013420: 6d61 7428 6b65 792c 2076 616c 290a 2020  mat(key, val).  
-00013430: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00013440: 2020 2020 2020 2020 7265 7475 726e 2066          return f
-00013450: 756e 6328 6b65 792c 2076 616c 290a 0a20  unc(key, val).. 
-00013460: 2020 2072 6574 7572 6e20 7772 6170 7065     return wrappe
-00013470: 720a 0a61 7379 6e63 2064 6566 2073 746f  r..async def sto
-00013480: 705f 706f 6c6c 2874 6f6b 656e 2c20 6368  p_poll(token, ch
-00013490: 6174 5f69 642c 206d 6573 7361 6765 5f69  at_id, message_i
-000134a0: 642c 2072 6570 6c79 5f6d 6172 6b75 703d  d, reply_markup=
-000134b0: 4e6f 6e65 293a 0a20 2020 206d 6574 686f  None):.    metho
-000134c0: 645f 7572 6c20 3d20 7227 7374 6f70 506f  d_url = r'stopPo
-000134d0: 6c6c 270a 2020 2020 7061 796c 6f61 6420  ll'.    payload 
-000134e0: 3d20 7b27 6368 6174 5f69 6427 3a20 7374  = {'chat_id': st
-000134f0: 7228 6368 6174 5f69 6429 2c20 276d 6573  r(chat_id), 'mes
-00013500: 7361 6765 5f69 6427 3a20 6d65 7373 6167  sage_id': messag
-00013510: 655f 6964 7d0a 2020 2020 6966 2072 6570  e_id}.    if rep
-00013520: 6c79 5f6d 6172 6b75 703a 0a20 2020 2020  ly_markup:.     
-00013530: 2020 2070 6179 6c6f 6164 5b27 7265 706c     payload['repl
-00013540: 795f 6d61 726b 7570 275d 203d 2061 7761  y_markup'] = awa
-00013550: 6974 205f 636f 6e76 6572 745f 6d61 726b  it _convert_mark
-00013560: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
-00013570: 0a20 2020 2072 6574 7572 6e20 6177 6169  .    return awai
-00013580: 7420 5f70 726f 6365 7373 5f72 6571 7565  t _process_reque
-00013590: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
-000135a0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
-000135b0: 6c6f 6164 290a 0a23 2065 7863 6570 7469  load)..# excepti
-000135c0: 6f6e 730a 636c 6173 7320 4170 6945 7863  ons.class ApiExc
-000135d0: 6570 7469 6f6e 2845 7863 6570 7469 6f6e  eption(Exception
-000135e0: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
-000135f0: 6869 7320 636c 6173 7320 7265 7072 6573  his class repres
-00013600: 656e 7473 2061 2062 6173 6520 4578 6365  ents a base Exce
-00013610: 7074 696f 6e20 7468 726f 776e 2077 6865  ption thrown whe
-00013620: 6e20 6120 6361 6c6c 2074 6f20 7468 6520  n a call to the 
-00013630: 5465 6c65 6772 616d 2041 5049 2066 6169  Telegram API fai
-00013640: 6c73 2e0a 2020 2020 496e 2061 6464 6974  ls..    In addit
-00013650: 696f 6e20 746f 2061 6e20 696e 666f 726d  ion to an inform
-00013660: 6174 6976 6520 6d65 7373 6167 652c 2069  ative message, i
-00013670: 7420 6861 7320 6120 6066 756e 6374 696f  t has a `functio
-00013680: 6e5f 6e61 6d65 6020 616e 6420 6120 6072  n_name` and a `r
-00013690: 6573 756c 7460 2061 7474 7269 6275 7465  esult` attribute
-000136a0: 2c20 7768 6963 6820 7265 7370 6563 7469  , which respecti
-000136b0: 7665 6c79 0a20 2020 2063 6f6e 7461 696e  vely.    contain
-000136c0: 2074 6865 206e 616d 6520 6f66 2074 6865   the name of the
-000136d0: 2066 6169 6c65 6420 6675 6e63 7469 6f6e   failed function
-000136e0: 2061 6e64 2074 6865 2072 6574 7572 6e65   and the returne
-000136f0: 6420 7265 7375 6c74 2074 6861 7420 6d61  d result that ma
-00013700: 6465 2074 6865 2066 756e 6374 696f 6e20  de the function 
-00013710: 746f 2062 6520 636f 6e73 6964 6572 6564  to be considered
-00013720: 2020 6173 0a20 2020 2066 6169 6c65 642e    as.    failed.
-00013730: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
-00013740: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00013750: 206d 7367 2c20 6675 6e63 7469 6f6e 5f6e   msg, function_n
-00013760: 616d 652c 2072 6573 756c 7429 3a0a 2020  ame, result):.  
-00013770: 2020 2020 2020 7375 7065 7228 4170 6945        super(ApiE
-00013780: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
-00013790: 5f5f 696e 6974 5f5f 2822 4120 7265 7175  __init__("A requ
-000137a0: 6573 7420 746f 2074 6865 2054 656c 6567  est to the Teleg
-000137b0: 7261 6d20 4150 4920 7761 7320 756e 7375  ram API was unsu
-000137c0: 6363 6573 7366 756c 2e20 7b30 7d22 2e66  ccessful. {0}".f
-000137d0: 6f72 6d61 7428 6d73 6729 290a 2020 2020  ormat(msg)).    
-000137e0: 2020 2020 7365 6c66 2e66 756e 6374 696f      self.functio
-000137f0: 6e5f 6e61 6d65 203d 2066 756e 6374 696f  n_name = functio
-00013800: 6e5f 6e61 6d65 0a20 2020 2020 2020 2073  n_name.        s
-00013810: 656c 662e 7265 7375 6c74 203d 2072 6573  elf.result = res
-00013820: 756c 740a 2020 2020 0a63 6c61 7373 2041  ult.    .class A
-00013830: 7069 4854 5450 4578 6365 7074 696f 6e28  piHTTPException(
-00013840: 4170 6945 7863 6570 7469 6f6e 293a 0a20  ApiException):. 
-00013850: 2020 2022 2222 0a20 2020 2054 6869 7320     """.    This 
-00013860: 636c 6173 7320 7265 7072 6573 656e 7473  class represents
-00013870: 2061 6e20 4578 6365 7074 696f 6e20 7468   an Exception th
-00013880: 726f 776e 2077 6865 6e20 6120 6361 6c6c  rown when a call
-00013890: 2074 6f20 7468 6520 0a20 2020 2054 656c   to the .    Tel
-000138a0: 6567 7261 6d20 4150 4920 7365 7276 6572  egram API server
-000138b0: 2072 6574 7572 6e73 2048 5454 5020 636f   returns HTTP co
-000138c0: 6465 2074 6861 7420 6973 206e 6f74 2032  de that is not 2
-000138d0: 3030 2e0a 2020 2020 2222 220a 2020 2020  00..    """.    
-000138e0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-000138f0: 662c 2066 756e 6374 696f 6e5f 6e61 6d65  f, function_name
-00013900: 2c20 7265 7375 6c74 293a 0a20 2020 2020  , result):.     
-00013910: 2020 2073 7570 6572 2841 7069 4854 5450     super(ApiHTTP
-00013920: 4578 6365 7074 696f 6e2c 2073 656c 6629  Exception, self)
-00013930: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
-00013940: 2020 2020 2020 2022 5468 6520 7365 7276         "The serv
-00013950: 6572 2072 6574 7572 6e65 6420 4854 5450  er returned HTTP
-00013960: 207b 307d 207b 317d 2e20 5265 7370 6f6e   {0} {1}. Respon
-00013970: 7365 2062 6f64 793a 5c6e 5b7b 327d 5d22  se body:\n[{2}]"
-00013980: 205c 0a20 2020 2020 2020 2020 2020 202e   \.            .
-00013990: 666f 726d 6174 2872 6573 756c 742e 7374  format(result.st
-000139a0: 6174 7573 5f63 6f64 652c 2072 6573 756c  atus_code, resul
-000139b0: 742e 7265 6173 6f6e 2c20 7265 7375 6c74  t.reason, result
-000139c0: 292c 0a20 2020 2020 2020 2020 2020 2066  ),.            f
-000139d0: 756e 6374 696f 6e5f 6e61 6d65 2c0a 2020  unction_name,.  
-000139e0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-000139f0: 290a 2020 2020 0a63 6c61 7373 2041 7069  ).    .class Api
-00013a00: 496e 7661 6c69 644a 534f 4e45 7863 6570  InvalidJSONExcep
-00013a10: 7469 6f6e 2841 7069 4578 6365 7074 696f  tion(ApiExceptio
-00013a20: 6e29 3a0a 2020 2020 2222 220a 2020 2020  n):.    """.    
-00013a30: 5468 6973 2063 6c61 7373 2072 6570 7265  This class repre
-00013a40: 7365 6e74 7320 616e 2045 7863 6570 7469  sents an Excepti
-00013a50: 6f6e 2074 6872 6f77 6e20 7768 656e 2061  on thrown when a
-00013a60: 2063 616c 6c20 746f 2074 6865 200a 2020   call to the .  
-00013a70: 2020 5465 6c65 6772 616d 2041 5049 2073    Telegram API s
-00013a80: 6572 7665 7220 7265 7475 726e 7320 696e  erver returns in
-00013a90: 7661 6c69 6420 6a73 6f6e 2e0a 2020 2020  valid json..    
-00013aa0: 2222 220a 2020 2020 6465 6620 5f5f 696e  """.    def __in
-00013ab0: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
-00013ac0: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
-00013ad0: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
-00013ae0: 2841 7069 496e 7661 6c69 644a 534f 4e45  (ApiInvalidJSONE
-00013af0: 7863 6570 7469 6f6e 2c20 7365 6c66 292e  xception, self).
-00013b00: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00013b10: 2020 2020 2020 2254 6865 2073 6572 7665        "The serve
-00013b20: 7220 7265 7475 726e 6564 2061 6e20 696e  r returned an in
-00013b30: 7661 6c69 6420 4a53 4f4e 2072 6573 706f  valid JSON respo
-00013b40: 6e73 652e 2052 6573 706f 6e73 6520 626f  nse. Response bo
-00013b50: 6479 3a5c 6e5b 7b30 7d5d 2220 5c0a 2020  dy:\n[{0}]" \.  
-00013b60: 2020 2020 2020 2020 2020 2e66 6f72 6d61            .forma
-00013b70: 7428 7265 7375 6c74 292c 0a20 2020 2020  t(result),.     
-00013b80: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-00013b90: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-00013ba0: 2020 7265 7375 6c74 290a 2020 2020 0a63    result).    .c
-00013bb0: 6c61 7373 2041 7069 5465 6c65 6772 616d  lass ApiTelegram
-00013bc0: 4578 6365 7074 696f 6e28 4170 6945 7863  Exception(ApiExc
-00013bd0: 6570 7469 6f6e 293a 0a20 2020 2022 2222  eption):.    """
-00013be0: 0a20 2020 2054 6869 7320 636c 6173 7320  .    This class 
-00013bf0: 7265 7072 6573 656e 7473 2061 6e20 4578  represents an Ex
-00013c00: 6365 7074 696f 6e20 7468 726f 776e 2077  ception thrown w
-00013c10: 6865 6e20 6120 5465 6c65 6772 616d 2041  hen a Telegram A
-00013c20: 5049 2072 6574 7572 6e73 2065 7272 6f72  PI returns error
-00013c30: 2063 6f64 652e 0a20 2020 2022 2222 0a20   code..    """. 
-00013c40: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00013c50: 7365 6c66 2c20 6675 6e63 7469 6f6e 5f6e  self, function_n
-00013c60: 616d 652c 2072 6573 756c 742c 2072 6573  ame, result, res
-00013c70: 756c 745f 6a73 6f6e 293a 0a20 2020 2020  ult_json):.     
-00013c80: 2020 2073 7570 6572 2841 7069 5465 6c65     super(ApiTele
-00013c90: 6772 616d 4578 6365 7074 696f 6e2c 2073  gramException, s
-00013ca0: 656c 6629 2e5f 5f69 6e69 745f 5f28 0a20  elf).__init__(. 
-00013cb0: 2020 2020 2020 2020 2020 2022 4572 726f             "Erro
-00013cc0: 7220 636f 6465 3a20 7b30 7d2e 2044 6573  r code: {0}. Des
-00013cd0: 6372 6970 7469 6f6e 3a20 7b31 7d22 205c  cription: {1}" \
-00013ce0: 0a20 2020 2020 2020 2020 2020 202e 666f  .            .fo
-00013cf0: 726d 6174 2872 6573 756c 745f 6a73 6f6e  rmat(result_json
-00013d00: 5b27 6572 726f 725f 636f 6465 275d 2c20  ['error_code'], 
-00013d10: 7265 7375 6c74 5f6a 736f 6e5b 2764 6573  result_json['des
-00013d20: 6372 6970 7469 6f6e 275d 292c 0a20 2020  cription']),.   
-00013d30: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-00013d40: 6e5f 6e61 6d65 2c0a 2020 2020 2020 2020  n_name,.        
-00013d50: 2020 2020 7265 7375 6c74 290a 2020 2020      result).    
-00013d60: 2020 2020 7365 6c66 2e72 6573 756c 745f      self.result_
-00013d70: 6a73 6f6e 203d 2072 6573 756c 745f 6a73  json = result_js
-00013d80: 6f6e 0a20 2020 2020 2020 2073 656c 662e  on.        self.
-00013d90: 6572 726f 725f 636f 6465 203d 2072 6573  error_code = res
-00013da0: 756c 745f 6a73 6f6e 5b27 6572 726f 725f  ult_json['error_
-00013db0: 636f 6465 275d 0a20 2020 2020 2020 2073  code'].        s
-00013dc0: 656c 662e 6465 7363 7269 7074 696f 6e20  elf.description 
-00013dd0: 3d20 7265 7375 6c74 5f6a 736f 6e5b 2764  = result_json['d
-00013de0: 6573 6372 6970 7469 6f6e 275d 0a0a 636c  escription']..cl
-00013df0: 6173 7320 5265 7175 6573 7454 696d 656f  ass RequestTimeo
-00013e00: 7574 2845 7863 6570 7469 6f6e 293a 0a20  ut(Exception):. 
-00013e10: 2020 2022 2222 0a20 2020 2054 6869 7320     """.    This 
-00013e20: 636c 6173 7320 7265 7072 6573 656e 7473  class represents
-00013e30: 2061 2072 6571 7565 7374 2074 696d 656f   a request timeo
-00013e40: 7574 2e0a 2020 2020 2222 220a 2020 2020  ut..    """.    
-00013e50: 7061 7373 0a                             pass.
+0000d9b0: 6861 6e6e 656c 7573 6572 6e61 6d65 290d  hannelusername).
+0000d9c0: 0a20 2020 203a 7061 7261 6d20 6d65 7373  .    :param mess
+0000d9d0: 6167 655f 6964 3a20 284f 7074 696f 6e61  age_id: (Optiona
+0000d9e0: 6c2c 2072 6571 7569 7265 6420 6966 2069  l, required if i
+0000d9f0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000da00: 2069 7320 6e6f 7420 7370 6563 6966 6965   is not specifie
+0000da10: 6429 2055 6e69 7175 6520 6964 656e 7469  d) Unique identi
+0000da20: 6669 6572 206f 6620 7468 6520 7365 6e74  fier of the sent
+0000da30: 206d 6573 7361 6765 0d0a 2020 2020 3a70   message..    :p
+0000da40: 6172 616d 2069 6e6c 696e 655f 6d65 7373  aram inline_mess
+0000da50: 6167 655f 6964 3a20 284f 7074 696f 6e61  age_id: (Optiona
+0000da60: 6c2c 2072 6571 7569 7265 6420 6966 2063  l, required if c
+0000da70: 6861 745f 6964 2061 6e64 206d 6573 7361  hat_id and messa
+0000da80: 6765 5f69 6420 6172 6520 6e6f 7420 7370  ge_id are not sp
+0000da90: 6563 6966 6965 6429 2049 6465 6e74 6966  ecified) Identif
+0000daa0: 6965 7220 6f66 2074 6865 2069 6e6c 696e  ier of the inlin
+0000dab0: 6520 6d65 7373 6167 650d 0a20 2020 203a  e message..    :
+0000dac0: 7265 7475 726e 3a0d 0a20 2020 2022 2222  return:..    """
+0000dad0: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000dae0: 203d 2072 2773 6574 4761 6d65 5363 6f72   = r'setGameScor
+0000daf0: 6527 0d0a 2020 2020 7061 796c 6f61 6420  e'..    payload 
+0000db00: 3d20 7b27 7573 6572 5f69 6427 3a20 7573  = {'user_id': us
+0000db10: 6572 5f69 642c 2027 7363 6f72 6527 3a20  er_id, 'score': 
+0000db20: 7363 6f72 657d 0d0a 2020 2020 6966 2066  score}..    if f
+0000db30: 6f72 6365 2069 7320 6e6f 7420 4e6f 6e65  orce is not None
+0000db40: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000db50: 6164 5b27 666f 7263 6527 5d20 3d20 666f  ad['force'] = fo
+0000db60: 7263 650d 0a20 2020 2069 6620 6368 6174  rce..    if chat
+0000db70: 5f69 643a 0d0a 2020 2020 2020 2020 7061  _id:..        pa
+0000db80: 796c 6f61 645b 2763 6861 745f 6964 275d  yload['chat_id']
+0000db90: 203d 2063 6861 745f 6964 0d0a 2020 2020   = chat_id..    
+0000dba0: 6966 206d 6573 7361 6765 5f69 643a 0d0a  if message_id:..
+0000dbb0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000dbc0: 276d 6573 7361 6765 5f69 6427 5d20 3d20  'message_id'] = 
+0000dbd0: 6d65 7373 6167 655f 6964 0d0a 2020 2020  message_id..    
+0000dbe0: 6966 2069 6e6c 696e 655f 6d65 7373 6167  if inline_messag
+0000dbf0: 655f 6964 3a0d 0a20 2020 2020 2020 2070  e_id:..        p
+0000dc00: 6179 6c6f 6164 5b27 696e 6c69 6e65 5f6d  ayload['inline_m
+0000dc10: 6573 7361 6765 5f69 6427 5d20 3d20 696e  essage_id'] = in
+0000dc20: 6c69 6e65 5f6d 6573 7361 6765 5f69 640d  line_message_id.
+0000dc30: 0a20 2020 2069 6620 6469 7361 626c 655f  .    if disable_
+0000dc40: 6564 6974 5f6d 6573 7361 6765 2069 7320  edit_message is 
+0000dc50: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0000dc60: 2020 2070 6179 6c6f 6164 5b27 6469 7361     payload['disa
+0000dc70: 626c 655f 6564 6974 5f6d 6573 7361 6765  ble_edit_message
+0000dc80: 275d 203d 2064 6973 6162 6c65 5f65 6469  '] = disable_edi
+0000dc90: 745f 6d65 7373 6167 650d 0a20 2020 2072  t_message..    r
+0000dca0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+0000dcb0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+0000dcc0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+0000dcd0: 796c 6f61 6429 0d0a 0d0a 0d0a 2320 6874  yload)......# ht
+0000dce0: 7470 733a 2f2f 636f 7265 2e74 656c 6567  tps://core.teleg
+0000dcf0: 7261 6d2e 6f72 672f 626f 7473 2f61 7069  ram.org/bots/api
+0000dd00: 2367 6574 6761 6d65 6869 6768 7363 6f72  #getgamehighscor
+0000dd10: 6573 0d0a 6465 6620 6765 745f 6761 6d65  es..def get_game
+0000dd20: 5f68 6967 685f 7363 6f72 6573 2874 6f6b  _high_scores(tok
+0000dd30: 656e 2c20 7573 6572 5f69 642c 2063 6861  en, user_id, cha
+0000dd40: 745f 6964 3d4e 6f6e 652c 206d 6573 7361  t_id=None, messa
+0000dd50: 6765 5f69 643d 4e6f 6e65 2c20 696e 6c69  ge_id=None, inli
+0000dd60: 6e65 5f6d 6573 7361 6765 5f69 643d 4e6f  ne_message_id=No
+0000dd70: 6e65 293a 0d0a 2020 2020 2222 220d 0a20  ne):..    """.. 
+0000dd80: 2020 2055 7365 2074 6869 7320 6d65 7468     Use this meth
+0000dd90: 6f64 2074 6f20 6765 7420 6461 7461 2066  od to get data f
+0000dda0: 6f72 2068 6967 6820 7363 6f72 6520 7461  or high score ta
+0000ddb0: 626c 6573 2e20 5769 6c6c 2072 6574 7572  bles. Will retur
+0000ddc0: 6e20 7468 6520 7363 6f72 6520 6f66 2074  n the score of t
+0000ddd0: 6865 2073 7065 6369 6669 6564 2075 7365  he specified use
+0000dde0: 7220 616e 6420 7365 7665 7261 6c20 6f66  r and several of
+0000ddf0: 2068 6973 206e 6569 6768 626f 7273 2069   his neighbors i
+0000de00: 6e20 6120 6761 6d65 2e20 4f6e 2073 7563  n a game. On suc
+0000de10: 6365 7373 2c20 7265 7475 726e 7320 616e  cess, returns an
+0000de20: 2041 7272 6179 206f 6620 4761 6d65 4869   Array of GameHi
+0000de30: 6768 5363 6f72 6520 6f62 6a65 6374 732e  ghScore objects.
+0000de40: 0d0a 2020 2020 5468 6973 206d 6574 686f  ..    This metho
+0000de50: 6420 7769 6c6c 2063 7572 7265 6e74 6c79  d will currently
+0000de60: 2072 6574 7572 6e20 7363 6f72 6573 2066   return scores f
+0000de70: 6f72 2074 6865 2074 6172 6765 7420 7573  or the target us
+0000de80: 6572 2c20 706c 7573 2074 776f 206f 6620  er, plus two of 
+0000de90: 6869 7320 636c 6f73 6573 7420 6e65 6967  his closest neig
+0000dea0: 6862 6f72 7320 6f6e 2065 6163 6820 7369  hbors on each si
+0000deb0: 6465 2e20 5769 6c6c 2061 6c73 6f20 7265  de. Will also re
+0000dec0: 7475 726e 2074 6865 2074 6f70 2074 6872  turn the top thr
+0000ded0: 6565 2075 7365 7273 2069 6620 7468 6520  ee users if the 
+0000dee0: 7573 6572 2061 6e64 2068 6973 206e 6569  user and his nei
+0000def0: 6768 626f 7273 2061 7265 206e 6f74 2061  ghbors are not a
+0000df00: 6d6f 6e67 2074 6865 6d2e 2050 6c65 6173  mong them. Pleas
+0000df10: 6520 6e6f 7465 2074 6861 7420 7468 6973  e note that this
+0000df20: 2062 6568 6176 696f 7220 6973 2073 7562   behavior is sub
+0000df30: 6a65 6374 2074 6f20 6368 616e 6765 2e0d  ject to change..
+0000df40: 0a20 2020 203a 7061 7261 6d20 746f 6b65  .    :param toke
+0000df50: 6e3a 2042 6f74 2773 2074 6f6b 656e 2028  n: Bot's token (
+0000df60: 796f 7520 646f 6e27 7420 6e65 6564 2074  you don't need t
+0000df70: 6f20 6669 6c6c 2074 6869 7329 0d0a 2020  o fill this)..  
+0000df80: 2020 3a70 6172 616d 2075 7365 725f 6964    :param user_id
+0000df90: 3a20 5461 7267 6574 2075 7365 7220 6964  : Target user id
+0000dfa0: 0d0a 2020 2020 3a70 6172 616d 2063 6861  ..    :param cha
+0000dfb0: 745f 6964 3a20 284f 7074 696f 6e61 6c2c  t_id: (Optional,
+0000dfc0: 2072 6571 7569 7265 6420 6966 2069 6e6c   required if inl
+0000dfd0: 696e 655f 6d65 7373 6167 655f 6964 2069  ine_message_id i
+0000dfe0: 7320 6e6f 7420 7370 6563 6966 6965 6429  s not specified)
+0000dff0: 2055 6e69 7175 6520 6964 656e 7469 6669   Unique identifi
+0000e000: 6572 2066 6f72 2074 6865 2074 6172 6765  er for the targe
+0000e010: 7420 6368 6174 2028 6f72 2075 7365 726e  t chat (or usern
+0000e020: 616d 6520 6f66 2074 6865 2074 6172 6765  ame of the targe
+0000e030: 7420 6368 616e 6e65 6c20 696e 2074 6865  t channel in the
+0000e040: 2066 6f72 6d61 7420 4063 6861 6e6e 656c   format @channel
+0000e050: 7573 6572 6e61 6d65 290d 0a20 2020 203a  username)..    :
+0000e060: 7061 7261 6d20 6d65 7373 6167 655f 6964  param message_id
+0000e070: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
+0000e080: 7569 7265 6420 6966 2069 6e6c 696e 655f  uired if inline_
+0000e090: 6d65 7373 6167 655f 6964 2069 7320 6e6f  message_id is no
+0000e0a0: 7420 7370 6563 6966 6965 6429 2055 6e69  t specified) Uni
+0000e0b0: 7175 6520 6964 656e 7469 6669 6572 206f  que identifier o
+0000e0c0: 6620 7468 6520 7365 6e74 206d 6573 7361  f the sent messa
+0000e0d0: 6765 0d0a 2020 2020 3a70 6172 616d 2069  ge..    :param i
+0000e0e0: 6e6c 696e 655f 6d65 7373 6167 655f 6964  nline_message_id
+0000e0f0: 3a20 284f 7074 696f 6e61 6c2c 2072 6571  : (Optional, req
+0000e100: 7569 7265 6420 6966 2063 6861 745f 6964  uired if chat_id
+0000e110: 2061 6e64 206d 6573 7361 6765 5f69 6420   and message_id 
+0000e120: 6172 6520 6e6f 7420 7370 6563 6966 6965  are not specifie
+0000e130: 6429 2049 6465 6e74 6966 6965 7220 6f66  d) Identifier of
+0000e140: 2074 6865 2069 6e6c 696e 6520 6d65 7373   the inline mess
+0000e150: 6167 650d 0a20 2020 203a 7265 7475 726e  age..    :return
+0000e160: 3a0d 0a20 2020 2022 2222 0d0a 2020 2020  :..    """..    
+0000e170: 6d65 7468 6f64 5f75 726c 203d 2072 2767  method_url = r'g
+0000e180: 6574 4761 6d65 4869 6768 5363 6f72 6573  etGameHighScores
+0000e190: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000e1a0: 207b 2775 7365 725f 6964 273a 2075 7365   {'user_id': use
+0000e1b0: 725f 6964 7d0d 0a20 2020 2069 6620 6368  r_id}..    if ch
+0000e1c0: 6174 5f69 643a 0d0a 2020 2020 2020 2020  at_id:..        
+0000e1d0: 7061 796c 6f61 645b 2763 6861 745f 6964  payload['chat_id
+0000e1e0: 275d 203d 2063 6861 745f 6964 0d0a 2020  '] = chat_id..  
+0000e1f0: 2020 6966 206d 6573 7361 6765 5f69 643a    if message_id:
+0000e200: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+0000e210: 645b 276d 6573 7361 6765 5f69 6427 5d20  d['message_id'] 
+0000e220: 3d20 6d65 7373 6167 655f 6964 0d0a 2020  = message_id..  
+0000e230: 2020 6966 2069 6e6c 696e 655f 6d65 7373    if inline_mess
+0000e240: 6167 655f 6964 3a0d 0a20 2020 2020 2020  age_id:..       
+0000e250: 2070 6179 6c6f 6164 5b27 696e 6c69 6e65   payload['inline
+0000e260: 5f6d 6573 7361 6765 5f69 6427 5d20 3d20  _message_id'] = 
+0000e270: 696e 6c69 6e65 5f6d 6573 7361 6765 5f69  inline_message_i
+0000e280: 640d 0a20 2020 2072 6574 7572 6e20 5f6d  d..    return _m
+0000e290: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+0000e2a0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+0000e2b0: 6172 616d 733d 7061 796c 6f61 6429 0d0a  arams=payload)..
+0000e2c0: 0d0a 0d0a 2320 5061 796d 656e 7473 2028  ....# Payments (
+0000e2d0: 6874 7470 733a 2f2f 636f 7265 2e74 656c  https://core.tel
+0000e2e0: 6567 7261 6d2e 6f72 672f 626f 7473 2f61  egram.org/bots/a
+0000e2f0: 7069 2370 6179 6d65 6e74 7329 0d0a 0d0a  pi#payments)....
+0000e300: 6465 6620 7365 6e64 5f69 6e76 6f69 6365  def send_invoice
+0000e310: 280d 0a20 2020 2020 2020 2074 6f6b 656e  (..        token
+0000e320: 2c20 6368 6174 5f69 642c 2074 6974 6c65  , chat_id, title
+0000e330: 2c20 6465 7363 7269 7074 696f 6e2c 2069  , description, i
+0000e340: 6e76 6f69 6365 5f70 6179 6c6f 6164 2c20  nvoice_payload, 
+0000e350: 7072 6f76 6964 6572 5f74 6f6b 656e 2c20  provider_token, 
+0000e360: 6375 7272 656e 6379 2c20 7072 6963 6573  currency, prices
+0000e370: 2c0d 0a20 2020 2020 2020 2073 7461 7274  ,..        start
+0000e380: 5f70 6172 616d 6574 6572 203d 204e 6f6e  _parameter = Non
+0000e390: 652c 2070 686f 746f 5f75 726c 3d4e 6f6e  e, photo_url=Non
+0000e3a0: 652c 2070 686f 746f 5f73 697a 653d 4e6f  e, photo_size=No
+0000e3b0: 6e65 2c20 7068 6f74 6f5f 7769 6474 683d  ne, photo_width=
+0000e3c0: 4e6f 6e65 2c20 7068 6f74 6f5f 6865 6967  None, photo_heig
+0000e3d0: 6874 3d4e 6f6e 652c 0d0a 2020 2020 2020  ht=None,..      
+0000e3e0: 2020 6e65 6564 5f6e 616d 653d 4e6f 6e65    need_name=None
+0000e3f0: 2c20 6e65 6564 5f70 686f 6e65 5f6e 756d  , need_phone_num
+0000e400: 6265 723d 4e6f 6e65 2c20 6e65 6564 5f65  ber=None, need_e
+0000e410: 6d61 696c 3d4e 6f6e 652c 206e 6565 645f  mail=None, need_
+0000e420: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
+0000e430: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+0000e440: 7365 6e64 5f70 686f 6e65 5f6e 756d 6265  send_phone_numbe
+0000e450: 725f 746f 5f70 726f 7669 6465 7220 3d20  r_to_provider = 
+0000e460: 4e6f 6e65 2c20 7365 6e64 5f65 6d61 696c  None, send_email
+0000e470: 5f74 6f5f 7072 6f76 6964 6572 203d 204e  _to_provider = N
+0000e480: 6f6e 652c 2069 735f 666c 6578 6962 6c65  one, is_flexible
+0000e490: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+0000e4a0: 6469 7361 626c 655f 6e6f 7469 6669 6361  disable_notifica
+0000e4b0: 7469 6f6e 3d4e 6f6e 652c 2072 6570 6c79  tion=None, reply
+0000e4c0: 5f74 6f5f 6d65 7373 6167 655f 6964 3d4e  _to_message_id=N
+0000e4d0: 6f6e 652c 2072 6570 6c79 5f6d 6172 6b75  one, reply_marku
+0000e4e0: 703d 4e6f 6e65 2c20 7072 6f76 6964 6572  p=None, provider
+0000e4f0: 5f64 6174 613d 4e6f 6e65 2c0d 0a20 2020  _data=None,..   
+0000e500: 2020 2020 2074 696d 656f 7574 3d4e 6f6e       timeout=Non
+0000e510: 652c 2061 6c6c 6f77 5f73 656e 6469 6e67  e, allow_sending
+0000e520: 5f77 6974 686f 7574 5f72 6570 6c79 3d4e  _without_reply=N
+0000e530: 6f6e 652c 206d 6178 5f74 6970 5f61 6d6f  one, max_tip_amo
+0000e540: 756e 743d 4e6f 6e65 2c20 7375 6767 6573  unt=None, sugges
+0000e550: 7465 645f 7469 705f 616d 6f75 6e74 733d  ted_tip_amounts=
+0000e560: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2070  None,..        p
+0000e570: 726f 7465 6374 5f63 6f6e 7465 6e74 3d4e  rotect_content=N
+0000e580: 6f6e 652c 206d 6573 7361 6765 5f74 6872  one, message_thr
+0000e590: 6561 645f 6964 3d4e 6f6e 6529 3a0d 0a20  ead_id=None):.. 
+0000e5a0: 2020 2022 2222 0d0a 2020 2020 5573 6520     """..    Use 
+0000e5b0: 7468 6973 206d 6574 686f 6420 746f 2073  this method to s
+0000e5c0: 656e 6420 696e 766f 6963 6573 2e20 4f6e  end invoices. On
+0000e5d0: 2073 7563 6365 7373 2c20 7468 6520 7365   success, the se
+0000e5e0: 6e74 204d 6573 7361 6765 2069 7320 7265  nt Message is re
+0000e5f0: 7475 726e 6564 2e0d 0a20 2020 203a 7061  turned...    :pa
+0000e600: 7261 6d20 746f 6b65 6e3a 2042 6f74 2773  ram token: Bot's
+0000e610: 2074 6f6b 656e 2028 796f 7520 646f 6e27   token (you don'
+0000e620: 7420 6e65 6564 2074 6f20 6669 6c6c 2074  t need to fill t
+0000e630: 6869 7329 0d0a 2020 2020 3a70 6172 616d  his)..    :param
+0000e640: 2063 6861 745f 6964 3a20 556e 6971 7565   chat_id: Unique
+0000e650: 2069 6465 6e74 6966 6965 7220 666f 7220   identifier for 
+0000e660: 7468 6520 7461 7267 6574 2070 7269 7661  the target priva
+0000e670: 7465 2063 6861 740d 0a20 2020 203a 7061  te chat..    :pa
+0000e680: 7261 6d20 7469 746c 653a 2050 726f 6475  ram title: Produ
+0000e690: 6374 206e 616d 650d 0a20 2020 203a 7061  ct name..    :pa
+0000e6a0: 7261 6d20 6465 7363 7269 7074 696f 6e3a  ram description:
+0000e6b0: 2050 726f 6475 6374 2064 6573 6372 6970   Product descrip
+0000e6c0: 7469 6f6e 0d0a 2020 2020 3a70 6172 616d  tion..    :param
+0000e6d0: 2069 6e76 6f69 6365 5f70 6179 6c6f 6164   invoice_payload
+0000e6e0: 3a20 426f 742d 6465 6669 6e65 6420 696e  : Bot-defined in
+0000e6f0: 766f 6963 6520 7061 796c 6f61 642c 2031  voice payload, 1
+0000e700: 2d31 3238 2062 7974 6573 2e20 5468 6973  -128 bytes. This
+0000e710: 2077 696c 6c20 6e6f 7420 6265 2064 6973   will not be dis
+0000e720: 706c 6179 6564 2074 6f20 7468 6520 7573  played to the us
+0000e730: 6572 2c20 7573 6520 666f 7220 796f 7572  er, use for your
+0000e740: 2069 6e74 6572 6e61 6c20 7072 6f63 6573   internal proces
+0000e750: 7365 732e 0d0a 2020 2020 3a70 6172 616d  ses...    :param
+0000e760: 2070 726f 7669 6465 725f 746f 6b65 6e3a   provider_token:
+0000e770: 2050 6179 6d65 6e74 7320 7072 6f76 6964   Payments provid
+0000e780: 6572 2074 6f6b 656e 2c20 6f62 7461 696e  er token, obtain
+0000e790: 6564 2076 6961 2040 426f 7466 6174 6865  ed via @Botfathe
+0000e7a0: 720d 0a20 2020 203a 7061 7261 6d20 6375  r..    :param cu
+0000e7b0: 7272 656e 6379 3a20 5468 7265 652d 6c65  rrency: Three-le
+0000e7c0: 7474 6572 2049 534f 2034 3231 3720 6375  tter ISO 4217 cu
+0000e7d0: 7272 656e 6379 2063 6f64 652c 2073 6565  rrency code, see
+0000e7e0: 2068 7474 7073 3a2f 2f63 6f72 652e 7465   https://core.te
+0000e7f0: 6c65 6772 616d 2e6f 7267 2f62 6f74 732f  legram.org/bots/
+0000e800: 7061 796d 656e 7473 2373 7570 706f 7274  payments#support
+0000e810: 6564 2d63 7572 7265 6e63 6965 730d 0a20  ed-currencies.. 
+0000e820: 2020 203a 7061 7261 6d20 7072 6963 6573     :param prices
+0000e830: 3a20 5072 6963 6520 6272 6561 6b64 6f77  : Price breakdow
+0000e840: 6e2c 2061 206c 6973 7420 6f66 2063 6f6d  n, a list of com
+0000e850: 706f 6e65 6e74 7320 2865 2e67 2e20 7072  ponents (e.g. pr
+0000e860: 6f64 7563 7420 7072 6963 652c 2074 6178  oduct price, tax
+0000e870: 2c20 6469 7363 6f75 6e74 2c20 6465 6c69  , discount, deli
+0000e880: 7665 7279 2063 6f73 742c 2064 656c 6976  very cost, deliv
+0000e890: 6572 7920 7461 782c 2062 6f6e 7573 2c20  ery tax, bonus, 
+0000e8a0: 6574 632e 290d 0a20 2020 203a 7061 7261  etc.)..    :para
+0000e8b0: 6d20 7374 6172 745f 7061 7261 6d65 7465  m start_paramete
+0000e8c0: 723a 2055 6e69 7175 6520 6465 6570 2d6c  r: Unique deep-l
+0000e8d0: 696e 6b69 6e67 2070 6172 616d 6574 6572  inking parameter
+0000e8e0: 2074 6861 7420 6361 6e20 6265 2075 7365   that can be use
+0000e8f0: 6420 746f 2067 656e 6572 6174 6520 7468  d to generate th
+0000e900: 6973 2069 6e76 6f69 6365 2077 6865 6e20  is invoice when 
+0000e910: 7573 6564 2061 7320 6120 7374 6172 7420  used as a start 
+0000e920: 7061 7261 6d65 7465 720d 0a20 2020 203a  parameter..    :
+0000e930: 7061 7261 6d20 7068 6f74 6f5f 7572 6c3a  param photo_url:
+0000e940: 2055 524c 206f 6620 7468 6520 7072 6f64   URL of the prod
+0000e950: 7563 7420 7068 6f74 6f20 666f 7220 7468  uct photo for th
+0000e960: 6520 696e 766f 6963 652e 2043 616e 2062  e invoice. Can b
+0000e970: 6520 6120 7068 6f74 6f20 6f66 2074 6865  e a photo of the
+0000e980: 2067 6f6f 6473 206f 7220 6120 6d61 726b   goods or a mark
+0000e990: 6574 696e 6720 696d 6167 6520 666f 7220  eting image for 
+0000e9a0: 6120 7365 7276 6963 652e 2050 656f 706c  a service. Peopl
+0000e9b0: 6520 6c69 6b65 2069 7420 6265 7474 6572  e like it better
+0000e9c0: 2077 6865 6e20 7468 6579 2073 6565 2077   when they see w
+0000e9d0: 6861 7420 7468 6579 2061 7265 2070 6179  hat they are pay
+0000e9e0: 696e 6720 666f 722e 0d0a 2020 2020 3a70  ing for...    :p
+0000e9f0: 6172 616d 2070 686f 746f 5f73 697a 653a  aram photo_size:
+0000ea00: 2050 686f 746f 2073 697a 650d 0a20 2020   Photo size..   
+0000ea10: 203a 7061 7261 6d20 7068 6f74 6f5f 7769   :param photo_wi
+0000ea20: 6474 683a 2050 686f 746f 2077 6964 7468  dth: Photo width
+0000ea30: 0d0a 2020 2020 3a70 6172 616d 2070 686f  ..    :param pho
+0000ea40: 746f 5f68 6569 6768 743a 2050 686f 746f  to_height: Photo
+0000ea50: 2068 6569 6768 740d 0a20 2020 203a 7061   height..    :pa
+0000ea60: 7261 6d20 6e65 6564 5f6e 616d 653a 2050  ram need_name: P
+0000ea70: 6173 7320 5472 7565 2c20 6966 2079 6f75  ass True, if you
+0000ea80: 2072 6571 7569 7265 2074 6865 2075 7365   require the use
+0000ea90: 7227 7320 6675 6c6c 206e 616d 6520 746f  r's full name to
+0000eaa0: 2063 6f6d 706c 6574 6520 7468 6520 6f72   complete the or
+0000eab0: 6465 720d 0a20 2020 203a 7061 7261 6d20  der..    :param 
+0000eac0: 6e65 6564 5f70 686f 6e65 5f6e 756d 6265  need_phone_numbe
+0000ead0: 723a 2050 6173 7320 5472 7565 2c20 6966  r: Pass True, if
+0000eae0: 2079 6f75 2072 6571 7569 7265 2074 6865   you require the
+0000eaf0: 2075 7365 7227 7320 7068 6f6e 6520 6e75   user's phone nu
+0000eb00: 6d62 6572 2074 6f20 636f 6d70 6c65 7465  mber to complete
+0000eb10: 2074 6865 206f 7264 6572 0d0a 2020 2020   the order..    
+0000eb20: 3a70 6172 616d 206e 6565 645f 656d 6169  :param need_emai
+0000eb30: 6c3a 2050 6173 7320 5472 7565 2c20 6966  l: Pass True, if
+0000eb40: 2079 6f75 2072 6571 7569 7265 2074 6865   you require the
+0000eb50: 2075 7365 7227 7320 656d 6169 6c20 746f   user's email to
+0000eb60: 2063 6f6d 706c 6574 6520 7468 6520 6f72   complete the or
+0000eb70: 6465 720d 0a20 2020 203a 7061 7261 6d20  der..    :param 
+0000eb80: 6e65 6564 5f73 6869 7070 696e 675f 6164  need_shipping_ad
+0000eb90: 6472 6573 733a 2050 6173 7320 5472 7565  dress: Pass True
+0000eba0: 2c20 6966 2079 6f75 2072 6571 7569 7265  , if you require
+0000ebb0: 2074 6865 2075 7365 7227 7320 7368 6970   the user's ship
+0000ebc0: 7069 6e67 2061 6464 7265 7373 2074 6f20  ping address to 
+0000ebd0: 636f 6d70 6c65 7465 2074 6865 206f 7264  complete the ord
+0000ebe0: 6572 0d0a 2020 2020 3a70 6172 616d 2069  er..    :param i
+0000ebf0: 735f 666c 6578 6962 6c65 3a20 5061 7373  s_flexible: Pass
+0000ec00: 2054 7275 652c 2069 6620 7468 6520 6669   True, if the fi
+0000ec10: 6e61 6c20 7072 6963 6520 6465 7065 6e64  nal price depend
+0000ec20: 7320 6f6e 2074 6865 2073 6869 7070 696e  s on the shippin
+0000ec30: 6720 6d65 7468 6f64 0d0a 2020 2020 3a70  g method..    :p
+0000ec40: 6172 616d 2073 656e 645f 7068 6f6e 655f  aram send_phone_
+0000ec50: 6e75 6d62 6572 5f74 6f5f 7072 6f76 6964  number_to_provid
+0000ec60: 6572 3a20 5061 7373 2054 7275 652c 2069  er: Pass True, i
+0000ec70: 6620 7573 6572 2773 2070 686f 6e65 206e  f user's phone n
+0000ec80: 756d 6265 7220 7368 6f75 6c64 2062 6520  umber should be 
+0000ec90: 7365 6e74 2074 6f20 7072 6f76 6964 6572  sent to provider
+0000eca0: 0d0a 2020 2020 3a70 6172 616d 2073 656e  ..    :param sen
+0000ecb0: 645f 656d 6169 6c5f 746f 5f70 726f 7669  d_email_to_provi
+0000ecc0: 6465 723a 2050 6173 7320 5472 7565 2c20  der: Pass True, 
+0000ecd0: 6966 2075 7365 7227 7320 656d 6169 6c20  if user's email 
+0000ece0: 6164 6472 6573 7320 7368 6f75 6c64 2062  address should b
+0000ecf0: 6520 7365 6e74 2074 6f20 7072 6f76 6964  e sent to provid
+0000ed00: 6572 0d0a 2020 2020 3a70 6172 616d 2064  er..    :param d
+0000ed10: 6973 6162 6c65 5f6e 6f74 6966 6963 6174  isable_notificat
+0000ed20: 696f 6e3a 2053 656e 6473 2074 6865 206d  ion: Sends the m
+0000ed30: 6573 7361 6765 2073 696c 656e 746c 792e  essage silently.
+0000ed40: 2055 7365 7273 2077 696c 6c20 7265 6365   Users will rece
+0000ed50: 6976 6520 6120 6e6f 7469 6669 6361 7469  ive a notificati
+0000ed60: 6f6e 2077 6974 6820 6e6f 2073 6f75 6e64  on with no sound
+0000ed70: 2e0d 0a20 2020 203a 7061 7261 6d20 7265  ...    :param re
+0000ed80: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+0000ed90: 643a 2049 6620 7468 6520 6d65 7373 6167  d: If the messag
+0000eda0: 6520 6973 2061 2072 6570 6c79 2c20 4944  e is a reply, ID
+0000edb0: 206f 6620 7468 6520 6f72 6967 696e 616c   of the original
+0000edc0: 206d 6573 7361 6765 0d0a 2020 2020 3a70   message..    :p
+0000edd0: 6172 616d 2072 6570 6c79 5f6d 6172 6b75  aram reply_marku
+0000ede0: 703a 2041 204a 534f 4e2d 7365 7269 616c  p: A JSON-serial
+0000edf0: 697a 6564 206f 626a 6563 7420 666f 7220  ized object for 
+0000ee00: 616e 2069 6e6c 696e 6520 6b65 7962 6f61  an inline keyboa
+0000ee10: 7264 2e20 4966 2065 6d70 7479 2c20 6f6e  rd. If empty, on
+0000ee20: 6520 2750 6179 2074 6f74 616c 2070 7269  e 'Pay total pri
+0000ee30: 6365 2720 6275 7474 6f6e 2077 696c 6c20  ce' button will 
+0000ee40: 6265 2073 686f 776e 2e20 4966 206e 6f74  be shown. If not
+0000ee50: 2065 6d70 7479 2c20 7468 6520 6669 7273   empty, the firs
+0000ee60: 7420 6275 7474 6f6e 206d 7573 7420 6265  t button must be
+0000ee70: 2061 2050 6179 2062 7574 746f 6e0d 0a20   a Pay button.. 
+0000ee80: 2020 203a 7061 7261 6d20 7072 6f76 6964     :param provid
+0000ee90: 6572 5f64 6174 613a 2041 204a 534f 4e2d  er_data: A JSON-
+0000eea0: 7365 7269 616c 697a 6564 2064 6174 6120  serialized data 
+0000eeb0: 6162 6f75 7420 7468 6520 696e 766f 6963  about the invoic
+0000eec0: 652c 2077 6869 6368 2077 696c 6c20 6265  e, which will be
+0000eed0: 2073 6861 7265 6420 7769 7468 2074 6865   shared with the
+0000eee0: 2070 6179 6d65 6e74 2070 726f 7669 6465   payment provide
+0000eef0: 722e 2041 2064 6574 6169 6c65 6420 6465  r. A detailed de
+0000ef00: 7363 7269 7074 696f 6e20 6f66 2072 6571  scription of req
+0000ef10: 7569 7265 6420 6669 656c 6473 2073 686f  uired fields sho
+0000ef20: 756c 6420 6265 2070 726f 7669 6465 6420  uld be provided 
+0000ef30: 6279 2074 6865 2070 6179 6d65 6e74 2070  by the payment p
+0000ef40: 726f 7669 6465 722e 0d0a 2020 2020 3a70  rovider...    :p
+0000ef50: 6172 616d 2074 696d 656f 7574 3a0d 0a20  aram timeout:.. 
+0000ef60: 2020 203a 7061 7261 6d20 616c 6c6f 775f     :param allow_
+0000ef70: 7365 6e64 696e 675f 7769 7468 6f75 745f  sending_without_
+0000ef80: 7265 706c 793a 0d0a 2020 2020 3a70 6172  reply:..    :par
+0000ef90: 616d 206d 6178 5f74 6970 5f61 6d6f 756e  am max_tip_amoun
+0000efa0: 743a 2054 6865 206d 6178 696d 756d 2061  t: The maximum a
+0000efb0: 6363 6570 7465 6420 616d 6f75 6e74 2066  ccepted amount f
+0000efc0: 6f72 2074 6970 7320 696e 2074 6865 2073  or tips in the s
+0000efd0: 6d61 6c6c 6573 7420 756e 6974 7320 6f66  mallest units of
+0000efe0: 2074 6865 2063 7572 7265 6e63 790d 0a20   the currency.. 
+0000eff0: 2020 203a 7061 7261 6d20 7375 6767 6573     :param sugges
+0000f000: 7465 645f 7469 705f 616d 6f75 6e74 733a  ted_tip_amounts:
+0000f010: 2041 204a 534f 4e2d 7365 7269 616c 697a   A JSON-serializ
+0000f020: 6564 2061 7272 6179 206f 6620 7375 6767  ed array of sugg
+0000f030: 6573 7465 6420 616d 6f75 6e74 7320 6f66  ested amounts of
+0000f040: 2074 6970 7320 696e 2074 6865 2073 6d61   tips in the sma
+0000f050: 6c6c 6573 7420 756e 6974 7320 6f66 2074  llest units of t
+0000f060: 6865 2063 7572 7265 6e63 792e 0d0a 2020  he currency...  
+0000f070: 2020 2020 2020 4174 206d 6f73 7420 3420        At most 4 
+0000f080: 7375 6767 6573 7465 6420 7469 7020 616d  suggested tip am
+0000f090: 6f75 6e74 7320 6361 6e20 6265 2073 7065  ounts can be spe
+0000f0a0: 6369 6669 6564 2e20 5468 6520 7375 6767  cified. The sugg
+0000f0b0: 6573 7465 6420 7469 7020 616d 6f75 6e74  ested tip amount
+0000f0c0: 7320 6d75 7374 2062 6520 706f 7369 7469  s must be positi
+0000f0d0: 7665 2c20 7061 7373 6564 2069 6e20 6120  ve, passed in a 
+0000f0e0: 7374 7269 6374 6c79 2069 6e63 7265 6173  strictly increas
+0000f0f0: 6564 206f 7264 6572 2061 6e64 206d 7573  ed order and mus
+0000f100: 7420 6e6f 7420 6578 6365 6564 206d 6178  t not exceed max
+0000f110: 5f74 6970 5f61 6d6f 756e 742e 0d0a 2020  _tip_amount...  
+0000f120: 2020 3a70 6172 616d 2070 726f 7465 6374    :param protect
+0000f130: 5f63 6f6e 7465 6e74 3a0d 0a20 2020 203a  _content:..    :
+0000f140: 7265 7475 726e 3a0d 0a20 2020 2022 2222  return:..    """
+0000f150: 0d0a 2020 2020 6d65 7468 6f64 5f75 726c  ..    method_url
+0000f160: 203d 2072 2773 656e 6449 6e76 6f69 6365   = r'sendInvoice
+0000f170: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+0000f180: 207b 2763 6861 745f 6964 273a 2063 6861   {'chat_id': cha
+0000f190: 745f 6964 2c20 2774 6974 6c65 273a 2074  t_id, 'title': t
+0000f1a0: 6974 6c65 2c20 2764 6573 6372 6970 7469  itle, 'descripti
+0000f1b0: 6f6e 273a 2064 6573 6372 6970 7469 6f6e  on': description
+0000f1c0: 2c20 2770 6179 6c6f 6164 273a 2069 6e76  , 'payload': inv
+0000f1d0: 6f69 6365 5f70 6179 6c6f 6164 2c0d 0a20  oice_payload,.. 
+0000f1e0: 2020 2020 2020 2020 2020 2020 2020 2770                'p
+0000f1f0: 726f 7669 6465 725f 746f 6b65 6e27 3a20  rovider_token': 
+0000f200: 7072 6f76 6964 6572 5f74 6f6b 656e 2c20  provider_token, 
+0000f210: 2763 7572 7265 6e63 7927 3a20 6375 7272  'currency': curr
+0000f220: 656e 6379 2c0d 0a20 2020 2020 2020 2020  ency,..         
+0000f230: 2020 2020 2020 2770 7269 6365 7327 3a20        'prices': 
+0000f240: 5f63 6f6e 7665 7274 5f6c 6973 745f 6a73  _convert_list_js
+0000f250: 6f6e 5f73 6572 6961 6c69 7a61 626c 6528  on_serializable(
+0000f260: 7072 6963 6573 297d 0d0a 2020 2020 6966  prices)}..    if
+0000f270: 2073 7461 7274 5f70 6172 616d 6574 6572   start_parameter
+0000f280: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000f290: 6164 5b27 7374 6172 745f 7061 7261 6d65  ad['start_parame
+0000f2a0: 7465 7227 5d20 3d20 7374 6172 745f 7061  ter'] = start_pa
+0000f2b0: 7261 6d65 7465 720d 0a20 2020 2069 6620  rameter..    if 
+0000f2c0: 7068 6f74 6f5f 7572 6c3a 0d0a 2020 2020  photo_url:..    
+0000f2d0: 2020 2020 7061 796c 6f61 645b 2770 686f      payload['pho
+0000f2e0: 746f 5f75 726c 275d 203d 2070 686f 746f  to_url'] = photo
+0000f2f0: 5f75 726c 0d0a 2020 2020 6966 2070 686f  _url..    if pho
+0000f300: 746f 5f73 697a 653a 0d0a 2020 2020 2020  to_size:..      
+0000f310: 2020 7061 796c 6f61 645b 2770 686f 746f    payload['photo
+0000f320: 5f73 697a 6527 5d20 3d20 7068 6f74 6f5f  _size'] = photo_
+0000f330: 7369 7a65 0d0a 2020 2020 6966 2070 686f  size..    if pho
+0000f340: 746f 5f77 6964 7468 3a0d 0a20 2020 2020  to_width:..     
+0000f350: 2020 2070 6179 6c6f 6164 5b27 7068 6f74     payload['phot
+0000f360: 6f5f 7769 6474 6827 5d20 3d20 7068 6f74  o_width'] = phot
+0000f370: 6f5f 7769 6474 680d 0a20 2020 2069 6620  o_width..    if 
+0000f380: 7068 6f74 6f5f 6865 6967 6874 3a0d 0a20  photo_height:.. 
+0000f390: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000f3a0: 7068 6f74 6f5f 6865 6967 6874 275d 203d  photo_height'] =
+0000f3b0: 2070 686f 746f 5f68 6569 6768 740d 0a20   photo_height.. 
+0000f3c0: 2020 2069 6620 6e65 6564 5f6e 616d 6520     if need_name 
+0000f3d0: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+0000f3e0: 2020 2020 2020 7061 796c 6f61 645b 276e        payload['n
+0000f3f0: 6565 645f 6e61 6d65 275d 203d 206e 6565  eed_name'] = nee
+0000f400: 645f 6e61 6d65 0d0a 2020 2020 6966 206e  d_name..    if n
+0000f410: 6565 645f 7068 6f6e 655f 6e75 6d62 6572  eed_phone_number
+0000f420: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000f430: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+0000f440: 6e65 6564 5f70 686f 6e65 5f6e 756d 6265  need_phone_numbe
+0000f450: 7227 5d20 3d20 6e65 6564 5f70 686f 6e65  r'] = need_phone
+0000f460: 5f6e 756d 6265 720d 0a20 2020 2069 6620  _number..    if 
+0000f470: 6e65 6564 5f65 6d61 696c 2069 7320 6e6f  need_email is no
+0000f480: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+0000f490: 2070 6179 6c6f 6164 5b27 6e65 6564 5f65   payload['need_e
+0000f4a0: 6d61 696c 275d 203d 206e 6565 645f 656d  mail'] = need_em
+0000f4b0: 6169 6c0d 0a20 2020 2069 6620 6e65 6564  ail..    if need
+0000f4c0: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+0000f4d0: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+0000f4e0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000f4f0: 276e 6565 645f 7368 6970 7069 6e67 5f61  'need_shipping_a
+0000f500: 6464 7265 7373 275d 203d 206e 6565 645f  ddress'] = need_
+0000f510: 7368 6970 7069 6e67 5f61 6464 7265 7373  shipping_address
+0000f520: 0d0a 2020 2020 6966 2073 656e 645f 7068  ..    if send_ph
+0000f530: 6f6e 655f 6e75 6d62 6572 5f74 6f5f 7072  one_number_to_pr
+0000f540: 6f76 6964 6572 2069 7320 6e6f 7420 4e6f  ovider is not No
+0000f550: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+0000f560: 6c6f 6164 5b27 7365 6e64 5f70 686f 6e65  load['send_phone
+0000f570: 5f6e 756d 6265 725f 746f 5f70 726f 7669  _number_to_provi
+0000f580: 6465 7227 5d20 3d20 7365 6e64 5f70 686f  der'] = send_pho
+0000f590: 6e65 5f6e 756d 6265 725f 746f 5f70 726f  ne_number_to_pro
+0000f5a0: 7669 6465 720d 0a20 2020 2069 6620 7365  vider..    if se
+0000f5b0: 6e64 5f65 6d61 696c 5f74 6f5f 7072 6f76  nd_email_to_prov
+0000f5c0: 6964 6572 2069 7320 6e6f 7420 4e6f 6e65  ider is not None
+0000f5d0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000f5e0: 6164 5b27 7365 6e64 5f65 6d61 696c 5f74  ad['send_email_t
+0000f5f0: 6f5f 7072 6f76 6964 6572 275d 203d 2073  o_provider'] = s
+0000f600: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
+0000f610: 7669 6465 720d 0a20 2020 2069 6620 6973  vider..    if is
+0000f620: 5f66 6c65 7869 626c 6520 6973 206e 6f74  _flexible is not
+0000f630: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0000f640: 7061 796c 6f61 645b 2769 735f 666c 6578  payload['is_flex
+0000f650: 6962 6c65 275d 203d 2069 735f 666c 6578  ible'] = is_flex
+0000f660: 6962 6c65 0d0a 2020 2020 6966 2064 6973  ible..    if dis
+0000f670: 6162 6c65 5f6e 6f74 6966 6963 6174 696f  able_notificatio
+0000f680: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
+0000f690: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+0000f6a0: 2764 6973 6162 6c65 5f6e 6f74 6966 6963  'disable_notific
+0000f6b0: 6174 696f 6e27 5d20 3d20 6469 7361 626c  ation'] = disabl
+0000f6c0: 655f 6e6f 7469 6669 6361 7469 6f6e 0d0a  e_notification..
+0000f6d0: 2020 2020 6966 2072 6570 6c79 5f74 6f5f      if reply_to_
+0000f6e0: 6d65 7373 6167 655f 6964 3a0d 0a20 2020  message_id:..   
+0000f6f0: 2020 2020 2070 6179 6c6f 6164 5b27 7265       payload['re
+0000f700: 706c 795f 746f 5f6d 6573 7361 6765 5f69  ply_to_message_i
+0000f710: 6427 5d20 3d20 7265 706c 795f 746f 5f6d  d'] = reply_to_m
+0000f720: 6573 7361 6765 5f69 640d 0a20 2020 2069  essage_id..    i
+0000f730: 6620 7265 706c 795f 6d61 726b 7570 3a0d  f reply_markup:.
+0000f740: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+0000f750: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+0000f760: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+0000f770: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+0000f780: 0d0a 2020 2020 6966 2070 726f 7669 6465  ..    if provide
+0000f790: 725f 6461 7461 3a0d 0a20 2020 2020 2020  r_data:..       
+0000f7a0: 2070 6179 6c6f 6164 5b27 7072 6f76 6964   payload['provid
+0000f7b0: 6572 5f64 6174 6127 5d20 3d20 7072 6f76  er_data'] = prov
+0000f7c0: 6964 6572 5f64 6174 610d 0a20 2020 2069  ider_data..    i
+0000f7d0: 6620 7469 6d65 6f75 743a 0d0a 2020 2020  f timeout:..    
+0000f7e0: 2020 2020 7061 796c 6f61 645b 2774 696d      payload['tim
+0000f7f0: 656f 7574 275d 203d 2074 696d 656f 7574  eout'] = timeout
+0000f800: 0d0a 2020 2020 6966 2061 6c6c 6f77 5f73  ..    if allow_s
+0000f810: 656e 6469 6e67 5f77 6974 686f 7574 5f72  ending_without_r
+0000f820: 6570 6c79 2069 7320 6e6f 7420 4e6f 6e65  eply is not None
+0000f830: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+0000f840: 6164 5b27 616c 6c6f 775f 7365 6e64 696e  ad['allow_sendin
+0000f850: 675f 7769 7468 6f75 745f 7265 706c 7927  g_without_reply'
+0000f860: 5d20 3d20 616c 6c6f 775f 7365 6e64 696e  ] = allow_sendin
+0000f870: 675f 7769 7468 6f75 745f 7265 706c 790d  g_without_reply.
+0000f880: 0a20 2020 2069 6620 6d61 785f 7469 705f  .    if max_tip_
+0000f890: 616d 6f75 6e74 2069 7320 6e6f 7420 4e6f  amount is not No
+0000f8a0: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+0000f8b0: 6c6f 6164 5b27 6d61 785f 7469 705f 616d  load['max_tip_am
+0000f8c0: 6f75 6e74 275d 203d 206d 6178 5f74 6970  ount'] = max_tip
+0000f8d0: 5f61 6d6f 756e 740d 0a20 2020 2069 6620  _amount..    if 
+0000f8e0: 7375 6767 6573 7465 645f 7469 705f 616d  suggested_tip_am
+0000f8f0: 6f75 6e74 7320 6973 206e 6f74 204e 6f6e  ounts is not Non
+0000f900: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+0000f910: 6f61 645b 2773 7567 6765 7374 6564 5f74  oad['suggested_t
+0000f920: 6970 5f61 6d6f 756e 7473 275d 203d 206a  ip_amounts'] = j
+0000f930: 736f 6e2e 6475 6d70 7328 7375 6767 6573  son.dumps(sugges
+0000f940: 7465 645f 7469 705f 616d 6f75 6e74 7329  ted_tip_amounts)
+0000f950: 0d0a 2020 2020 6966 2070 726f 7465 6374  ..    if protect
+0000f960: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
+0000f970: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2070  None:..        p
+0000f980: 6179 6c6f 6164 5b27 7072 6f74 6563 745f  ayload['protect_
+0000f990: 636f 6e74 656e 7427 5d20 3d20 7072 6f74  content'] = prot
+0000f9a0: 6563 745f 636f 6e74 656e 740d 0a20 2020  ect_content..   
+0000f9b0: 2069 6620 6d65 7373 6167 655f 7468 7265   if message_thre
+0000f9c0: 6164 5f69 643a 0d0a 2020 2020 2020 2020  ad_id:..        
+0000f9d0: 7061 796c 6f61 645b 276d 6573 7361 6765  payload['message
+0000f9e0: 5f74 6872 6561 645f 6964 275d 203d 206d  _thread_id'] = m
+0000f9f0: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+0000fa00: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+0000fa10: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+0000fa20: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+0000fa30: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+0000fa40: 0a0d 0a64 6566 2061 6e73 7765 725f 7368  ...def answer_sh
+0000fa50: 6970 7069 6e67 5f71 7565 7279 2874 6f6b  ipping_query(tok
+0000fa60: 656e 2c20 7368 6970 7069 6e67 5f71 7565  en, shipping_que
+0000fa70: 7279 5f69 642c 206f 6b2c 2073 6869 7070  ry_id, ok, shipp
+0000fa80: 696e 675f 6f70 7469 6f6e 733d 4e6f 6e65  ing_options=None
+0000fa90: 2c20 6572 726f 725f 6d65 7373 6167 653d  , error_message=
+0000faa0: 4e6f 6e65 293a 0d0a 2020 2020 2222 220d  None):..    """.
+0000fab0: 0a20 2020 2049 6620 796f 7520 7365 6e74  .    If you sent
+0000fac0: 2061 6e20 696e 766f 6963 6520 7265 7175   an invoice requ
+0000fad0: 6573 7469 6e67 2061 2073 6869 7070 696e  esting a shippin
+0000fae0: 6720 6164 6472 6573 7320 616e 6420 7468  g address and th
+0000faf0: 6520 7061 7261 6d65 7465 7220 6973 5f66  e parameter is_f
+0000fb00: 6c65 7869 626c 6520 7761 7320 7370 6563  lexible was spec
+0000fb10: 6966 6965 642c 2074 6865 2042 6f74 2041  ified, the Bot A
+0000fb20: 5049 2077 696c 6c20 7365 6e64 2061 6e20  PI will send an 
+0000fb30: 5570 6461 7465 2077 6974 6820 6120 7368  Update with a sh
+0000fb40: 6970 7069 6e67 5f71 7565 7279 2066 6965  ipping_query fie
+0000fb50: 6c64 2074 6f20 7468 6520 626f 742e 2055  ld to the bot. U
+0000fb60: 7365 2074 6869 7320 6d65 7468 6f64 2074  se this method t
+0000fb70: 6f20 7265 706c 7920 746f 2073 6869 7070  o reply to shipp
+0000fb80: 696e 6720 7175 6572 6965 732e 204f 6e20  ing queries. On 
+0000fb90: 7375 6363 6573 732c 2054 7275 6520 6973  success, True is
+0000fba0: 2072 6574 7572 6e65 642e 0d0a 2020 2020   returned...    
+0000fbb0: 3a70 6172 616d 2074 6f6b 656e 3a20 426f  :param token: Bo
+0000fbc0: 7427 7320 746f 6b65 6e20 2879 6f75 2064  t's token (you d
+0000fbd0: 6f6e 2774 206e 6565 6420 746f 2066 696c  on't need to fil
+0000fbe0: 6c20 7468 6973 290d 0a20 2020 203a 7061  l this)..    :pa
+0000fbf0: 7261 6d20 7368 6970 7069 6e67 5f71 7565  ram shipping_que
+0000fc00: 7279 5f69 643a 2055 6e69 7175 6520 6964  ry_id: Unique id
+0000fc10: 656e 7469 6669 6572 2066 6f72 2074 6865  entifier for the
+0000fc20: 2071 7565 7279 2074 6f20 6265 2061 6e73   query to be ans
+0000fc30: 7765 7265 640d 0a20 2020 203a 7061 7261  wered..    :para
+0000fc40: 6d20 6f6b 3a20 5370 6563 6966 7920 5472  m ok: Specify Tr
+0000fc50: 7565 2069 6620 6465 6c69 7665 7279 2074  ue if delivery t
+0000fc60: 6f20 7468 6520 7370 6563 6966 6965 6420  o the specified 
+0000fc70: 6164 6472 6573 7320 6973 2070 6f73 7369  address is possi
+0000fc80: 626c 6520 616e 6420 4661 6c73 6520 6966  ble and False if
+0000fc90: 2074 6865 7265 2061 7265 2061 6e79 2070   there are any p
+0000fca0: 726f 626c 656d 7320 2866 6f72 2065 7861  roblems (for exa
+0000fcb0: 6d70 6c65 2c20 6966 2064 656c 6976 6572  mple, if deliver
+0000fcc0: 7920 746f 2074 6865 2073 7065 6369 6669  y to the specifi
+0000fcd0: 6564 2061 6464 7265 7373 2069 7320 6e6f  ed address is no
+0000fce0: 7420 706f 7373 6962 6c65 290d 0a20 2020  t possible)..   
+0000fcf0: 203a 7061 7261 6d20 7368 6970 7069 6e67   :param shipping
+0000fd00: 5f6f 7074 696f 6e73 3a20 5265 7175 6972  _options: Requir
+0000fd10: 6564 2069 6620 6f6b 2069 7320 5472 7565  ed if ok is True
+0000fd20: 2e20 4120 4a53 4f4e 2d73 6572 6961 6c69  . A JSON-seriali
+0000fd30: 7a65 6420 6172 7261 7920 6f66 2061 7661  zed array of ava
+0000fd40: 696c 6162 6c65 2073 6869 7070 696e 6720  ilable shipping 
+0000fd50: 6f70 7469 6f6e 732e 0d0a 2020 2020 3a70  options...    :p
+0000fd60: 6172 616d 2065 7272 6f72 5f6d 6573 7361  aram error_messa
+0000fd70: 6765 3a20 5265 7175 6972 6564 2069 6620  ge: Required if 
+0000fd80: 6f6b 2069 7320 4661 6c73 652e 2045 7272  ok is False. Err
+0000fd90: 6f72 206d 6573 7361 6765 2069 6e20 6875  or message in hu
+0000fda0: 6d61 6e20 7265 6164 6162 6c65 2066 6f72  man readable for
+0000fdb0: 6d20 7468 6174 2065 7870 6c61 696e 7320  m that explains 
+0000fdc0: 7768 7920 6974 2069 7320 696d 706f 7373  why it is imposs
+0000fdd0: 6962 6c65 2074 6f20 636f 6d70 6c65 7465  ible to complete
+0000fde0: 2074 6865 206f 7264 6572 2028 652e 672e   the order (e.g.
+0000fdf0: 2022 536f 7272 792c 2064 656c 6976 6572   "Sorry, deliver
+0000fe00: 7920 746f 2079 6f75 7220 6465 7369 7265  y to your desire
+0000fe10: 6420 6164 6472 6573 7320 6973 2075 6e61  d address is una
+0000fe20: 7661 696c 6162 6c65 2729 2e20 5465 6c65  vailable'). Tele
+0000fe30: 6772 616d 2077 696c 6c20 6469 7370 6c61  gram will displa
+0000fe40: 7920 7468 6973 206d 6573 7361 6765 2074  y this message t
+0000fe50: 6f20 7468 6520 7573 6572 2e0d 0a20 2020  o the user...   
+0000fe60: 203a 7265 7475 726e 3a0d 0a20 2020 2022   :return:..    "
+0000fe70: 2222 0d0a 2020 2020 6d65 7468 6f64 5f75  ""..    method_u
+0000fe80: 726c 203d 2027 616e 7377 6572 5368 6970  rl = 'answerShip
+0000fe90: 7069 6e67 5175 6572 7927 0d0a 2020 2020  pingQuery'..    
+0000fea0: 7061 796c 6f61 6420 3d20 7b27 7368 6970  payload = {'ship
+0000feb0: 7069 6e67 5f71 7565 7279 5f69 6427 3a20  ping_query_id': 
+0000fec0: 7368 6970 7069 6e67 5f71 7565 7279 5f69  shipping_query_i
+0000fed0: 642c 2027 6f6b 273a 206f 6b7d 0d0a 2020  d, 'ok': ok}..  
+0000fee0: 2020 6966 2073 6869 7070 696e 675f 6f70    if shipping_op
+0000fef0: 7469 6f6e 733a 0d0a 2020 2020 2020 2020  tions:..        
+0000ff00: 7061 796c 6f61 645b 2773 6869 7070 696e  payload['shippin
+0000ff10: 675f 6f70 7469 6f6e 7327 5d20 3d20 5f63  g_options'] = _c
+0000ff20: 6f6e 7665 7274 5f6c 6973 745f 6a73 6f6e  onvert_list_json
+0000ff30: 5f73 6572 6961 6c69 7a61 626c 6528 7368  _serializable(sh
+0000ff40: 6970 7069 6e67 5f6f 7074 696f 6e73 290d  ipping_options).
+0000ff50: 0a20 2020 2069 6620 6572 726f 725f 6d65  .    if error_me
+0000ff60: 7373 6167 653a 0d0a 2020 2020 2020 2020  ssage:..        
+0000ff70: 7061 796c 6f61 645b 2765 7272 6f72 5f6d  payload['error_m
+0000ff80: 6573 7361 6765 275d 203d 2065 7272 6f72  essage'] = error
+0000ff90: 5f6d 6573 7361 6765 0d0a 2020 2020 7265  _message..    re
+0000ffa0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+0000ffb0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+0000ffc0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+0000ffd0: 6c6f 6164 290d 0a0d 0a0d 0a64 6566 2061  load)......def a
+0000ffe0: 6e73 7765 725f 7072 655f 6368 6563 6b6f  nswer_pre_checko
+0000fff0: 7574 5f71 7565 7279 2874 6f6b 656e 2c20  ut_query(token, 
+00010000: 7072 655f 6368 6563 6b6f 7574 5f71 7565  pre_checkout_que
+00010010: 7279 5f69 642c 206f 6b2c 2065 7272 6f72  ry_id, ok, error
+00010020: 5f6d 6573 7361 6765 3d4e 6f6e 6529 3a0d  _message=None):.
+00010030: 0a20 2020 2022 2222 0d0a 2020 2020 4f6e  .    """..    On
+00010040: 6365 2074 6865 2075 7365 7220 6861 7320  ce the user has 
+00010050: 636f 6e66 6972 6d65 6420 7468 6569 7220  confirmed their 
+00010060: 7061 796d 656e 7420 616e 6420 7368 6970  payment and ship
+00010070: 7069 6e67 2064 6574 6169 6c73 2c20 7468  ping details, th
+00010080: 6520 426f 7420 4150 4920 7365 6e64 7320  e Bot API sends 
+00010090: 7468 6520 6669 6e61 6c20 636f 6e66 6972  the final confir
+000100a0: 6d61 7469 6f6e 2069 6e20 7468 6520 666f  mation in the fo
+000100b0: 726d 206f 6620 616e 2055 7064 6174 6520  rm of an Update 
+000100c0: 7769 7468 2074 6865 2066 6965 6c64 2070  with the field p
+000100d0: 7265 5f63 6865 636b 6f75 745f 7175 6572  re_checkout_quer
+000100e0: 792e 2055 7365 2074 6869 7320 6d65 7468  y. Use this meth
+000100f0: 6f64 2074 6f20 7265 7370 6f6e 6420 746f  od to respond to
+00010100: 2073 7563 6820 7072 652d 6368 6563 6b6f   such pre-checko
+00010110: 7574 2071 7565 7269 6573 2e20 4f6e 2073  ut queries. On s
+00010120: 7563 6365 7373 2c20 5472 7565 2069 7320  uccess, True is 
+00010130: 7265 7475 726e 6564 2e20 4e6f 7465 3a20  returned. Note: 
+00010140: 5468 6520 426f 7420 4150 4920 6d75 7374  The Bot API must
+00010150: 2072 6563 6569 7665 2061 6e20 616e 7377   receive an answ
+00010160: 6572 2077 6974 6869 6e20 3130 2073 6563  er within 10 sec
+00010170: 6f6e 6473 2061 6674 6572 2074 6865 2070  onds after the p
+00010180: 7265 2d63 6865 636b 6f75 7420 7175 6572  re-checkout quer
+00010190: 7920 7761 7320 7365 6e74 2e0d 0a20 2020  y was sent...   
+000101a0: 203a 7061 7261 6d20 746f 6b65 6e3a 2042   :param token: B
+000101b0: 6f74 2773 2074 6f6b 656e 2028 796f 7520  ot's token (you 
+000101c0: 646f 6e27 7420 6e65 6564 2074 6f20 6669  don't need to fi
+000101d0: 6c6c 2074 6869 7329 0d0a 2020 2020 3a70  ll this)..    :p
+000101e0: 6172 616d 2070 7265 5f63 6865 636b 6f75  aram pre_checkou
+000101f0: 745f 7175 6572 795f 6964 3a20 556e 6971  t_query_id: Uniq
+00010200: 7565 2069 6465 6e74 6966 6965 7220 666f  ue identifier fo
+00010210: 7220 7468 6520 7175 6572 7920 746f 2062  r the query to b
+00010220: 6520 616e 7377 6572 6564 0d0a 2020 2020  e answered..    
+00010230: 3a70 6172 616d 206f 6b3a 2053 7065 6369  :param ok: Speci
+00010240: 6679 2054 7275 6520 6966 2065 7665 7279  fy True if every
+00010250: 7468 696e 6720 6973 2061 6c72 6967 6874  thing is alright
+00010260: 2028 676f 6f64 7320 6172 6520 6176 6169   (goods are avai
+00010270: 6c61 626c 652c 2065 7463 2e29 2061 6e64  lable, etc.) and
+00010280: 2074 6865 2062 6f74 2069 7320 7265 6164   the bot is read
+00010290: 7920 746f 2070 726f 6365 6564 2077 6974  y to proceed wit
+000102a0: 6820 7468 6520 6f72 6465 722e 2055 7365  h the order. Use
+000102b0: 2046 616c 7365 2069 6620 7468 6572 6520   False if there 
+000102c0: 6172 6520 616e 7920 7072 6f62 6c65 6d73  are any problems
+000102d0: 2e0d 0a20 2020 203a 7061 7261 6d20 6572  ...    :param er
+000102e0: 726f 725f 6d65 7373 6167 653a 2052 6571  ror_message: Req
+000102f0: 7569 7265 6420 6966 206f 6b20 6973 2046  uired if ok is F
+00010300: 616c 7365 2e20 4572 726f 7220 6d65 7373  alse. Error mess
+00010310: 6167 6520 696e 2068 756d 616e 2072 6561  age in human rea
+00010320: 6461 626c 6520 666f 726d 2074 6861 7420  dable form that 
+00010330: 6578 706c 6169 6e73 2074 6865 2072 6561  explains the rea
+00010340: 736f 6e20 666f 7220 6661 696c 7572 6520  son for failure 
+00010350: 746f 2070 726f 6365 6564 2077 6974 6820  to proceed with 
+00010360: 7468 6520 6368 6563 6b6f 7574 2028 652e  the checkout (e.
+00010370: 672e 2022 536f 7272 792c 2073 6f6d 6562  g. "Sorry, someb
+00010380: 6f64 7920 6a75 7374 2062 6f75 6768 7420  ody just bought 
+00010390: 7468 6520 6c61 7374 206f 6620 6f75 7220  the last of our 
+000103a0: 616d 617a 696e 6720 626c 6163 6b20 542d  amazing black T-
+000103b0: 7368 6972 7473 2077 6869 6c65 2079 6f75  shirts while you
+000103c0: 2077 6572 6520 6275 7379 2066 696c 6c69   were busy filli
+000103d0: 6e67 206f 7574 2079 6f75 7220 7061 796d  ng out your paym
+000103e0: 656e 7420 6465 7461 696c 732e 2050 6c65  ent details. Ple
+000103f0: 6173 6520 6368 6f6f 7365 2061 2064 6966  ase choose a dif
+00010400: 6665 7265 6e74 2063 6f6c 6f72 206f 7220  ferent color or 
+00010410: 6761 726d 656e 7421 2229 2e20 5465 6c65  garment!"). Tele
+00010420: 6772 616d 2077 696c 6c20 6469 7370 6c61  gram will displa
+00010430: 7920 7468 6973 206d 6573 7361 6765 2074  y this message t
+00010440: 6f20 7468 6520 7573 6572 2e0d 0a20 2020  o the user...   
+00010450: 203a 7265 7475 726e 3a0d 0a20 2020 2022   :return:..    "
+00010460: 2222 0d0a 2020 2020 6d65 7468 6f64 5f75  ""..    method_u
+00010470: 726c 203d 2027 616e 7377 6572 5072 6543  rl = 'answerPreC
+00010480: 6865 636b 6f75 7451 7565 7279 270d 0a20  heckoutQuery'.. 
+00010490: 2020 2070 6179 6c6f 6164 203d 207b 2770     payload = {'p
+000104a0: 7265 5f63 6865 636b 6f75 745f 7175 6572  re_checkout_quer
+000104b0: 795f 6964 273a 2070 7265 5f63 6865 636b  y_id': pre_check
+000104c0: 6f75 745f 7175 6572 795f 6964 2c20 276f  out_query_id, 'o
+000104d0: 6b27 3a20 6f6b 7d0d 0a20 2020 2069 6620  k': ok}..    if 
+000104e0: 6572 726f 725f 6d65 7373 6167 653a 0d0a  error_message:..
+000104f0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00010500: 2765 7272 6f72 5f6d 6573 7361 6765 275d  'error_message']
+00010510: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
+00010520: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+00010530: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00010540: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00010550: 7261 6d73 3d70 6179 6c6f 6164 290d 0a0d  rams=payload)...
+00010560: 0a0d 0a23 2049 6e6c 696e 6551 7565 7279  ...# InlineQuery
+00010570: 0d0a 0d0a 6465 6620 616e 7377 6572 5f63  ....def answer_c
+00010580: 616c 6c62 6163 6b5f 7175 6572 7928 746f  allback_query(to
+00010590: 6b65 6e2c 2063 616c 6c62 6163 6b5f 7175  ken, callback_qu
+000105a0: 6572 795f 6964 2c20 7465 7874 3d4e 6f6e  ery_id, text=Non
+000105b0: 652c 2073 686f 775f 616c 6572 743d 4e6f  e, show_alert=No
+000105c0: 6e65 2c20 7572 6c3d 4e6f 6e65 2c20 6361  ne, url=None, ca
+000105d0: 6368 655f 7469 6d65 3d4e 6f6e 6529 3a0d  che_time=None):.
+000105e0: 0a20 2020 2022 2222 0d0a 2020 2020 5573  .    """..    Us
+000105f0: 6520 7468 6973 206d 6574 686f 6420 746f  e this method to
+00010600: 2073 656e 6420 616e 7377 6572 7320 746f   send answers to
+00010610: 2063 616c 6c62 6163 6b20 7175 6572 6965   callback querie
+00010620: 7320 7365 6e74 2066 726f 6d20 696e 6c69  s sent from inli
+00010630: 6e65 206b 6579 626f 6172 6473 2e20 5468  ne keyboards. Th
+00010640: 6520 616e 7377 6572 2077 696c 6c20 6265  e answer will be
+00010650: 2064 6973 706c 6179 6564 2074 6f20 7468   displayed to th
+00010660: 6520 7573 6572 2061 7320 6120 6e6f 7469  e user as a noti
+00010670: 6669 6361 7469 6f6e 2061 7420 7468 6520  fication at the 
+00010680: 746f 7020 6f66 2074 6865 2063 6861 7420  top of the chat 
+00010690: 7363 7265 656e 206f 7220 6173 2061 6e20  screen or as an 
+000106a0: 616c 6572 742e 204f 6e20 7375 6363 6573  alert. On succes
+000106b0: 732c 2054 7275 6520 6973 2072 6574 7572  s, True is retur
+000106c0: 6e65 642e 0d0a 2020 2020 416c 7465 726e  ned...    Altern
+000106d0: 6174 6976 656c 792c 2074 6865 2075 7365  atively, the use
+000106e0: 7220 6361 6e20 6265 2072 6564 6972 6563  r can be redirec
+000106f0: 7465 6420 746f 2074 6865 2073 7065 6369  ted to the speci
+00010700: 6669 6564 2047 616d 6520 5552 4c2e 2046  fied Game URL. F
+00010710: 6f72 2074 6869 7320 6f70 7469 6f6e 2074  or this option t
+00010720: 6f20 776f 726b 2c20 796f 7520 6d75 7374  o work, you must
+00010730: 2066 6972 7374 2063 7265 6174 6520 6120   first create a 
+00010740: 6761 6d65 2066 6f72 2079 6f75 7220 626f  game for your bo
+00010750: 7420 7669 6120 426f 7446 6174 6865 7220  t via BotFather 
+00010760: 616e 6420 6163 6365 7074 2074 6865 2074  and accept the t
+00010770: 6572 6d73 2e20 4f74 6865 7277 6973 652c  erms. Otherwise,
+00010780: 2079 6f75 206d 6179 2075 7365 206c 696e   you may use lin
+00010790: 6b73 206c 696b 6520 7465 6c65 6772 616d  ks like telegram
+000107a0: 2e6d 652f 796f 7572 5f62 6f74 3f73 7461  .me/your_bot?sta
+000107b0: 7274 3d58 5858 5820 7468 6174 206f 7065  rt=XXXX that ope
+000107c0: 6e20 796f 7572 2062 6f74 2077 6974 6820  n your bot with 
+000107d0: 6120 7061 7261 6d65 7465 722e 0d0a 2020  a parameter...  
+000107e0: 2020 3a70 6172 616d 2074 6f6b 656e 3a20    :param token: 
+000107f0: 426f 7427 7320 746f 6b65 6e20 2879 6f75  Bot's token (you
+00010800: 2064 6f6e 2774 206e 6565 6420 746f 2066   don't need to f
+00010810: 696c 6c20 7468 6973 290d 0a20 2020 203a  ill this)..    :
+00010820: 7061 7261 6d20 6361 6c6c 6261 636b 5f71  param callback_q
+00010830: 7565 7279 5f69 643a 2055 6e69 7175 6520  uery_id: Unique 
+00010840: 6964 656e 7469 6669 6572 2066 6f72 2074  identifier for t
+00010850: 6865 2071 7565 7279 2074 6f20 6265 2061  he query to be a
+00010860: 6e73 7765 7265 640d 0a20 2020 203a 7061  nswered..    :pa
+00010870: 7261 6d20 7465 7874 3a20 284f 7074 696f  ram text: (Optio
+00010880: 6e61 6c29 2054 6578 7420 6f66 2074 6865  nal) Text of the
+00010890: 206e 6f74 6966 6963 6174 696f 6e2e 2049   notification. I
+000108a0: 6620 6e6f 7420 7370 6563 6966 6965 642c  f not specified,
+000108b0: 206e 6f74 6869 6e67 2077 696c 6c20 6265   nothing will be
+000108c0: 2073 686f 776e 2074 6f20 7468 6520 7573   shown to the us
+000108d0: 6572 2c20 302d 3230 3020 6368 6172 6163  er, 0-200 charac
+000108e0: 7465 7273 0d0a 2020 2020 3a70 6172 616d  ters..    :param
+000108f0: 2073 686f 775f 616c 6572 743a 2028 4f70   show_alert: (Op
+00010900: 7469 6f6e 616c 2920 4966 2074 7275 652c  tional) If true,
+00010910: 2061 6e20 616c 6572 7420 7769 6c6c 2062   an alert will b
+00010920: 6520 7368 6f77 6e20 6279 2074 6865 2063  e shown by the c
+00010930: 6c69 656e 7420 696e 7374 6561 6420 6f66  lient instead of
+00010940: 2061 206e 6f74 6966 6963 6174 696f 6e20   a notification 
+00010950: 6174 2074 6865 2074 6f70 206f 6620 7468  at the top of th
+00010960: 6520 6368 6174 2073 6372 6565 6e2e 2044  e chat screen. D
+00010970: 6566 6175 6c74 7320 746f 2066 616c 7365  efaults to false
+00010980: 2e0d 0a20 2020 203a 7061 7261 6d20 7572  ...    :param ur
+00010990: 6c3a 2028 4f70 7469 6f6e 616c 2920 5552  l: (Optional) UR
+000109a0: 4c20 7468 6174 2077 696c 6c20 6265 206f  L that will be o
+000109b0: 7065 6e65 6420 6279 2074 6865 2075 7365  pened by the use
+000109c0: 7227 7320 636c 6965 6e74 2e20 4966 2079  r's client. If y
+000109d0: 6f75 2068 6176 6520 6372 6561 7465 6420  ou have created 
+000109e0: 6120 4761 6d65 2061 6e64 2061 6363 6570  a Game and accep
+000109f0: 7465 6420 7468 6520 636f 6e64 6974 696f  ted the conditio
+00010a00: 6e73 2076 6961 2040 426f 7466 6174 6865  ns via @Botfathe
+00010a10: 722c 2073 7065 6369 6679 2074 6865 2055  r, specify the U
+00010a20: 524c 2074 6861 7420 6f70 656e 7320 796f  RL that opens yo
+00010a30: 7572 2067 616d 6520 e280 9320 6e6f 7465  ur game ... note
+00010a40: 2074 6861 7420 7468 6973 2077 696c 6c20   that this will 
+00010a50: 6f6e 6c79 2077 6f72 6b20 6966 2074 6865  only work if the
+00010a60: 2071 7565 7279 2063 6f6d 6573 2066 726f   query comes fro
+00010a70: 6d20 6120 6361 6c6c 6261 636b 5f67 616d  m a callback_gam
+00010a80: 6520 6275 7474 6f6e 2e0d 0a20 2020 204f  e button...    O
+00010a90: 7468 6572 7769 7365 2c20 796f 7520 6d61  therwise, you ma
+00010aa0: 7920 7573 6520 6c69 6e6b 7320 6c69 6b65  y use links like
+00010ab0: 2074 656c 6567 7261 6d2e 6d65 2f79 6f75   telegram.me/you
+00010ac0: 725f 626f 743f 7374 6172 743d 5858 5858  r_bot?start=XXXX
+00010ad0: 2074 6861 7420 6f70 656e 2079 6f75 7220   that open your 
+00010ae0: 626f 7420 7769 7468 2061 2070 6172 616d  bot with a param
+00010af0: 6574 6572 2e0d 0a20 2020 203a 7061 7261  eter...    :para
+00010b00: 6d20 6361 6368 655f 7469 6d65 3a20 284f  m cache_time: (O
+00010b10: 7074 696f 6e61 6c29 2054 6865 206d 6178  ptional) The max
+00010b20: 696d 756d 2061 6d6f 756e 7420 6f66 2074  imum amount of t
+00010b30: 696d 6520 696e 2073 6563 6f6e 6473 2074  ime in seconds t
+00010b40: 6861 7420 7468 6520 7265 7375 6c74 206f  hat the result o
+00010b50: 6620 7468 6520 6361 6c6c 6261 636b 2071  f the callback q
+00010b60: 7565 7279 206d 6179 2062 6520 6361 6368  uery may be cach
+00010b70: 6564 2063 6c69 656e 742d 7369 6465 2e20  ed client-side. 
+00010b80: 5465 6c65 6772 616d 2061 7070 7320 7769  Telegram apps wi
+00010b90: 6c6c 2073 7570 706f 7274 2063 6163 6869  ll support cachi
+00010ba0: 6e67 2073 7461 7274 696e 6720 696e 2076  ng starting in v
+00010bb0: 6572 7369 6f6e 2033 2e31 342e 2044 6566  ersion 3.14. Def
+00010bc0: 6175 6c74 7320 746f 2030 2e0d 0a20 2020  aults to 0...   
+00010bd0: 203a 7265 7475 726e 3a0d 0a20 2020 2022   :return:..    "
+00010be0: 2222 0d0a 2020 2020 6d65 7468 6f64 5f75  ""..    method_u
+00010bf0: 726c 203d 2027 616e 7377 6572 4361 6c6c  rl = 'answerCall
+00010c00: 6261 636b 5175 6572 7927 0d0a 2020 2020  backQuery'..    
+00010c10: 7061 796c 6f61 6420 3d20 7b27 6361 6c6c  payload = {'call
+00010c20: 6261 636b 5f71 7565 7279 5f69 6427 3a20  back_query_id': 
+00010c30: 6361 6c6c 6261 636b 5f71 7565 7279 5f69  callback_query_i
+00010c40: 647d 0d0a 2020 2020 6966 2074 6578 743a  d}..    if text:
+00010c50: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00010c60: 645b 2774 6578 7427 5d20 3d20 7465 7874  d['text'] = text
+00010c70: 0d0a 2020 2020 6966 2073 686f 775f 616c  ..    if show_al
+00010c80: 6572 7420 6973 206e 6f74 204e 6f6e 653a  ert is not None:
+00010c90: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00010ca0: 645b 2773 686f 775f 616c 6572 7427 5d20  d['show_alert'] 
+00010cb0: 3d20 7368 6f77 5f61 6c65 7274 0d0a 2020  = show_alert..  
+00010cc0: 2020 6966 2075 726c 3a0d 0a20 2020 2020    if url:..     
+00010cd0: 2020 2070 6179 6c6f 6164 5b27 7572 6c27     payload['url'
+00010ce0: 5d20 3d20 7572 6c0d 0a20 2020 2069 6620  ] = url..    if 
+00010cf0: 6361 6368 655f 7469 6d65 2069 7320 6e6f  cache_time is no
+00010d00: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00010d10: 2070 6179 6c6f 6164 5b27 6361 6368 655f   payload['cache_
+00010d20: 7469 6d65 275d 203d 2063 6163 6865 5f74  time'] = cache_t
+00010d30: 696d 650d 0a20 2020 2072 6574 7572 6e20  ime..    return 
+00010d40: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00010d50: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00010d60: 2070 6172 616d 733d 7061 796c 6f61 642c   params=payload,
+00010d70: 206d 6574 686f 643d 2770 6f73 7427 290d   method='post').
+00010d80: 0a0d 0a0d 0a64 6566 2061 6e73 7765 725f  .....def answer_
+00010d90: 696e 6c69 6e65 5f71 7565 7279 2874 6f6b  inline_query(tok
+00010da0: 656e 2c20 696e 6c69 6e65 5f71 7565 7279  en, inline_query
+00010db0: 5f69 642c 2072 6573 756c 7473 2c20 6361  _id, results, ca
+00010dc0: 6368 655f 7469 6d65 3d4e 6f6e 652c 2069  che_time=None, i
+00010dd0: 735f 7065 7273 6f6e 616c 3d4e 6f6e 652c  s_personal=None,
+00010de0: 206e 6578 745f 6f66 6673 6574 3d4e 6f6e   next_offset=Non
+00010df0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00010e00: 2020 2020 2020 2020 2020 2020 7377 6974              swit
+00010e10: 6368 5f70 6d5f 7465 7874 3d4e 6f6e 652c  ch_pm_text=None,
+00010e20: 2073 7769 7463 685f 706d 5f70 6172 616d   switch_pm_param
+00010e30: 6574 6572 3d4e 6f6e 6529 3a0d 0a20 2020  eter=None):..   
+00010e40: 206d 6574 686f 645f 7572 6c20 3d20 2761   method_url = 'a
+00010e50: 6e73 7765 7249 6e6c 696e 6551 7565 7279  nswerInlineQuery
+00010e60: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+00010e70: 207b 2769 6e6c 696e 655f 7175 6572 795f   {'inline_query_
+00010e80: 6964 273a 2069 6e6c 696e 655f 7175 6572  id': inline_quer
+00010e90: 795f 6964 2c20 2772 6573 756c 7473 273a  y_id, 'results':
+00010ea0: 205f 636f 6e76 6572 745f 6c69 7374 5f6a   _convert_list_j
+00010eb0: 736f 6e5f 7365 7269 616c 697a 6162 6c65  son_serializable
+00010ec0: 2872 6573 756c 7473 297d 0d0a 2020 2020  (results)}..    
+00010ed0: 6966 2063 6163 6865 5f74 696d 6520 6973  if cache_time is
+00010ee0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00010ef0: 2020 2020 7061 796c 6f61 645b 2763 6163      payload['cac
+00010f00: 6865 5f74 696d 6527 5d20 3d20 6361 6368  he_time'] = cach
+00010f10: 655f 7469 6d65 0d0a 2020 2020 6966 2069  e_time..    if i
+00010f20: 735f 7065 7273 6f6e 616c 2069 7320 6e6f  s_personal is no
+00010f30: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00010f40: 2070 6179 6c6f 6164 5b27 6973 5f70 6572   payload['is_per
+00010f50: 736f 6e61 6c27 5d20 3d20 6973 5f70 6572  sonal'] = is_per
+00010f60: 736f 6e61 6c0d 0a20 2020 2069 6620 6e65  sonal..    if ne
+00010f70: 7874 5f6f 6666 7365 7420 6973 206e 6f74  xt_offset is not
+00010f80: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00010f90: 7061 796c 6f61 645b 276e 6578 745f 6f66  payload['next_of
+00010fa0: 6673 6574 275d 203d 206e 6578 745f 6f66  fset'] = next_of
+00010fb0: 6673 6574 0d0a 2020 2020 6966 2073 7769  fset..    if swi
+00010fc0: 7463 685f 706d 5f74 6578 743a 0d0a 2020  tch_pm_text:..  
+00010fd0: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
+00010fe0: 7769 7463 685f 706d 5f74 6578 7427 5d20  witch_pm_text'] 
+00010ff0: 3d20 7377 6974 6368 5f70 6d5f 7465 7874  = switch_pm_text
+00011000: 0d0a 2020 2020 6966 2073 7769 7463 685f  ..    if switch_
+00011010: 706d 5f70 6172 616d 6574 6572 3a0d 0a20  pm_parameter:.. 
+00011020: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00011030: 7377 6974 6368 5f70 6d5f 7061 7261 6d65  switch_pm_parame
+00011040: 7465 7227 5d20 3d20 7377 6974 6368 5f70  ter'] = switch_p
+00011050: 6d5f 7061 7261 6d65 7465 720d 0a20 2020  m_parameter..   
+00011060: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00011070: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00011080: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00011090: 7061 796c 6f61 642c 206d 6574 686f 643d  payload, method=
+000110a0: 2770 6f73 7427 290d 0a0d 0a0d 0a64 6566  'post')......def
+000110b0: 2067 6574 5f73 7469 636b 6572 5f73 6574   get_sticker_set
+000110c0: 2874 6f6b 656e 2c20 6e61 6d65 293a 0d0a  (token, name):..
+000110d0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000110e0: 2027 6765 7453 7469 636b 6572 5365 7427   'getStickerSet'
+000110f0: 0d0a 2020 2020 7265 7475 726e 205f 6d61  ..    return _ma
+00011100: 6b65 5f72 6571 7565 7374 2874 6f6b 656e  ke_request(token
+00011110: 2c20 6d65 7468 6f64 5f75 726c 2c20 7061  , method_url, pa
+00011120: 7261 6d73 3d7b 276e 616d 6527 3a20 6e61  rams={'name': na
+00011130: 6d65 7d29 0d0a 0d0a 6465 6620 6765 745f  me})....def get_
+00011140: 6375 7374 6f6d 5f65 6d6f 6a69 5f73 7469  custom_emoji_sti
+00011150: 636b 6572 7328 746f 6b65 6e2c 2063 7573  ckers(token, cus
+00011160: 746f 6d5f 656d 6f6a 695f 6964 7329 3a0d  tom_emoji_ids):.
+00011170: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00011180: 3d20 7227 6765 7443 7573 746f 6d45 6d6f  = r'getCustomEmo
+00011190: 6a69 5374 6963 6b65 7273 270d 0a20 2020  jiStickers'..   
+000111a0: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+000111b0: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+000111c0: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+000111d0: 7b27 6375 7374 6f6d 5f65 6d6f 6a69 5f69  {'custom_emoji_i
+000111e0: 6473 273a 2063 7573 746f 6d5f 656d 6f6a  ds': custom_emoj
+000111f0: 695f 6964 737d 290d 0a20 2020 200d 0a64  i_ids})..    ..d
+00011200: 6566 2075 706c 6f61 645f 7374 6963 6b65  ef upload_sticke
+00011210: 725f 6669 6c65 2874 6f6b 656e 2c20 7573  r_file(token, us
+00011220: 6572 5f69 642c 2070 6e67 5f73 7469 636b  er_id, png_stick
+00011230: 6572 293a 0d0a 2020 2020 6d65 7468 6f64  er):..    method
+00011240: 5f75 726c 203d 2027 7570 6c6f 6164 5374  _url = 'uploadSt
+00011250: 6963 6b65 7246 696c 6527 0d0a 2020 2020  ickerFile'..    
+00011260: 7061 796c 6f61 6420 3d20 7b27 7573 6572  payload = {'user
+00011270: 5f69 6427 3a20 7573 6572 5f69 647d 0d0a  _id': user_id}..
+00011280: 2020 2020 6669 6c65 7320 3d20 7b27 706e      files = {'pn
+00011290: 675f 7374 6963 6b65 7227 3a20 706e 675f  g_sticker': png_
+000112a0: 7374 6963 6b65 727d 0d0a 2020 2020 7265  sticker}..    re
+000112b0: 7475 726e 205f 6d61 6b65 5f72 6571 7565  turn _make_reque
+000112c0: 7374 2874 6f6b 656e 2c20 6d65 7468 6f64  st(token, method
+000112d0: 5f75 726c 2c20 7061 7261 6d73 3d70 6179  _url, params=pay
+000112e0: 6c6f 6164 2c20 6669 6c65 733d 6669 6c65  load, files=file
+000112f0: 732c 206d 6574 686f 643d 2770 6f73 7427  s, method='post'
+00011300: 290d 0a0d 0a0d 0a64 6566 2063 7265 6174  )......def creat
+00011310: 655f 6e65 775f 7374 6963 6b65 725f 7365  e_new_sticker_se
+00011320: 7428 0d0a 2020 2020 2020 2020 746f 6b65  t(..        toke
+00011330: 6e2c 2075 7365 725f 6964 2c20 6e61 6d65  n, user_id, name
+00011340: 2c20 7469 746c 652c 2065 6d6f 6a69 732c  , title, emojis,
+00011350: 2070 6e67 5f73 7469 636b 6572 2c20 7467   png_sticker, tg
+00011360: 735f 7374 6963 6b65 722c 0d0a 2020 2020  s_sticker,..    
+00011370: 2020 2020 6d61 736b 5f70 6f73 6974 696f      mask_positio
+00011380: 6e3d 4e6f 6e65 2c20 7765 626d 5f73 7469  n=None, webm_sti
+00011390: 636b 6572 3d4e 6f6e 652c 2073 7469 636b  cker=None, stick
+000113a0: 6572 5f74 7970 653d 4e6f 6e65 293a 0d0a  er_type=None):..
+000113b0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+000113c0: 2027 6372 6561 7465 4e65 7753 7469 636b   'createNewStick
+000113d0: 6572 5365 7427 0d0a 2020 2020 7061 796c  erSet'..    payl
+000113e0: 6f61 6420 3d20 7b27 7573 6572 5f69 6427  oad = {'user_id'
+000113f0: 3a20 7573 6572 5f69 642c 2027 6e61 6d65  : user_id, 'name
+00011400: 273a 206e 616d 652c 2027 7469 746c 6527  ': name, 'title'
+00011410: 3a20 7469 746c 652c 2027 656d 6f6a 6973  : title, 'emojis
+00011420: 273a 2065 6d6f 6a69 737d 0d0a 2020 2020  ': emojis}..    
+00011430: 6966 2070 6e67 5f73 7469 636b 6572 3a0d  if png_sticker:.
+00011440: 0a20 2020 2020 2020 2073 7479 7065 203d  .        stype =
+00011450: 2027 706e 675f 7374 6963 6b65 7227 0d0a   'png_sticker'..
+00011460: 2020 2020 656c 6966 2077 6562 6d5f 7374      elif webm_st
+00011470: 6963 6b65 723a 0d0a 2020 2020 2020 2020  icker:..        
+00011480: 7374 7970 6520 3d20 2777 6562 6d5f 7374  stype = 'webm_st
+00011490: 6963 6b65 7227 0d0a 2020 2020 656c 7365  icker'..    else
+000114a0: 3a0d 0a20 2020 2020 2020 2073 7479 7065  :..        stype
+000114b0: 203d 2027 7467 735f 7374 6963 6b65 7227   = 'tgs_sticker'
+000114c0: 0d0a 2020 2020 7374 6963 6b65 7220 3d20  ..    sticker = 
+000114d0: 706e 675f 7374 6963 6b65 7220 6f72 2074  png_sticker or t
+000114e0: 6773 5f73 7469 636b 6572 206f 7220 7765  gs_sticker or we
+000114f0: 626d 5f73 7469 636b 6572 0d0a 2020 2020  bm_sticker..    
+00011500: 6669 6c65 7320 3d20 4e6f 6e65 0d0a 2020  files = None..  
+00011510: 2020 6966 206e 6f74 2075 7469 6c2e 6973    if not util.is
+00011520: 5f73 7472 696e 6728 7374 6963 6b65 7229  _string(sticker)
+00011530: 3a0d 0a20 2020 2020 2020 2066 696c 6573  :..        files
+00011540: 203d 207b 7374 7970 653a 2073 7469 636b   = {stype: stick
+00011550: 6572 7d0d 0a20 2020 2065 6c73 653a 0d0a  er}..    else:..
+00011560: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00011570: 7374 7970 655d 203d 2073 7469 636b 6572  stype] = sticker
+00011580: 0d0a 2020 2020 6966 206d 6173 6b5f 706f  ..    if mask_po
+00011590: 7369 7469 6f6e 3a0d 0a20 2020 2020 2020  sition:..       
+000115a0: 2070 6179 6c6f 6164 5b27 6d61 736b 5f70   payload['mask_p
+000115b0: 6f73 6974 696f 6e27 5d20 3d20 6d61 736b  osition'] = mask
+000115c0: 5f70 6f73 6974 696f 6e2e 746f 5f6a 736f  _position.to_jso
+000115d0: 6e28 290d 0a20 2020 2069 6620 7765 626d  n()..    if webm
+000115e0: 5f73 7469 636b 6572 3a0d 0a20 2020 2020  _sticker:..     
+000115f0: 2020 2070 6179 6c6f 6164 5b27 7765 626d     payload['webm
+00011600: 5f73 7469 636b 6572 275d 203d 2077 6562  _sticker'] = web
+00011610: 6d5f 7374 6963 6b65 720d 0a20 2020 2069  m_sticker..    i
+00011620: 6620 7374 6963 6b65 725f 7479 7065 3a0d  f sticker_type:.
+00011630: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00011640: 5b27 7374 6963 6b65 725f 7479 7065 275d  ['sticker_type']
+00011650: 203d 2073 7469 636b 6572 5f74 7970 650d   = sticker_type.
+00011660: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+00011670: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00011680: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00011690: 616d 733d 7061 796c 6f61 642c 2066 696c  ams=payload, fil
+000116a0: 6573 3d66 696c 6573 2c20 6d65 7468 6f64  es=files, method
+000116b0: 3d27 706f 7374 2729 0d0a 0d0a 0d0a 6465  ='post')......de
+000116c0: 6620 6164 645f 7374 6963 6b65 725f 746f  f add_sticker_to
+000116d0: 5f73 6574 2874 6f6b 656e 2c20 7573 6572  _set(token, user
+000116e0: 5f69 642c 206e 616d 652c 2065 6d6f 6a69  _id, name, emoji
+000116f0: 732c 2070 6e67 5f73 7469 636b 6572 2c20  s, png_sticker, 
+00011700: 7467 735f 7374 6963 6b65 722c 206d 6173  tgs_sticker, mas
+00011710: 6b5f 706f 7369 7469 6f6e 2c20 7765 626d  k_position, webm
+00011720: 5f73 7469 636b 6572 293a 0d0a 2020 2020  _sticker):..    
+00011730: 6d65 7468 6f64 5f75 726c 203d 2027 6164  method_url = 'ad
+00011740: 6453 7469 636b 6572 546f 5365 7427 0d0a  dStickerToSet'..
+00011750: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+00011760: 7573 6572 5f69 6427 3a20 7573 6572 5f69  user_id': user_i
+00011770: 642c 2027 6e61 6d65 273a 206e 616d 652c  d, 'name': name,
+00011780: 2027 656d 6f6a 6973 273a 2065 6d6f 6a69   'emojis': emoji
+00011790: 737d 0d0a 2020 2020 6966 2070 6e67 5f73  s}..    if png_s
+000117a0: 7469 636b 6572 3a0d 0a20 2020 2020 2020  ticker:..       
+000117b0: 2073 7479 7065 203d 2027 706e 675f 7374   stype = 'png_st
+000117c0: 6963 6b65 7227 0d0a 2020 2020 656c 6966  icker'..    elif
+000117d0: 2077 6562 6d5f 7374 6963 6b65 723a 0d0a   webm_sticker:..
+000117e0: 2020 2020 2020 2020 7374 7970 6520 3d20          stype = 
+000117f0: 2777 6562 6d5f 7374 6963 6b65 7227 0d0a  'webm_sticker'..
+00011800: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00011810: 2020 2073 7479 7065 203d 2027 7467 735f     stype = 'tgs_
+00011820: 7374 6963 6b65 7227 0d0a 2020 2020 7374  sticker'..    st
+00011830: 6963 6b65 7220 3d20 706e 675f 7374 6963  icker = png_stic
+00011840: 6b65 7220 6f72 2074 6773 5f73 7469 636b  ker or tgs_stick
+00011850: 6572 206f 7220 7765 626d 5f73 7469 636b  er or webm_stick
+00011860: 6572 0d0a 2020 2020 6669 6c65 7320 3d20  er..    files = 
+00011870: 4e6f 6e65 0d0a 2020 2020 6966 206e 6f74  None..    if not
+00011880: 2075 7469 6c2e 6973 5f73 7472 696e 6728   util.is_string(
+00011890: 7374 6963 6b65 7229 3a0d 0a20 2020 2020  sticker):..     
+000118a0: 2020 2066 696c 6573 203d 207b 7374 7970     files = {styp
+000118b0: 653a 2073 7469 636b 6572 7d0d 0a20 2020  e: sticker}..   
+000118c0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000118d0: 7061 796c 6f61 645b 7374 7970 655d 203d  payload[stype] =
+000118e0: 2073 7469 636b 6572 0d0a 2020 2020 6966   sticker..    if
+000118f0: 206d 6173 6b5f 706f 7369 7469 6f6e 3a0d   mask_position:.
+00011900: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00011910: 5b27 6d61 736b 5f70 6f73 6974 696f 6e27  ['mask_position'
+00011920: 5d20 3d20 6d61 736b 5f70 6f73 6974 696f  ] = mask_positio
+00011930: 6e2e 746f 5f6a 736f 6e28 290d 0a20 2020  n.to_json()..   
+00011940: 2072 6574 7572 6e20 5f6d 616b 655f 7265   return _make_re
+00011950: 7175 6573 7428 746f 6b65 6e2c 206d 6574  quest(token, met
+00011960: 686f 645f 7572 6c2c 2070 6172 616d 733d  hod_url, params=
+00011970: 7061 796c 6f61 642c 2066 696c 6573 3d66  payload, files=f
+00011980: 696c 6573 2c20 6d65 7468 6f64 3d27 706f  iles, method='po
+00011990: 7374 2729 0d0a 0d0a 0d0a 6465 6620 7365  st')......def se
+000119a0: 745f 7374 6963 6b65 725f 706f 7369 7469  t_sticker_positi
+000119b0: 6f6e 5f69 6e5f 7365 7428 746f 6b65 6e2c  on_in_set(token,
+000119c0: 2073 7469 636b 6572 2c20 706f 7369 7469   sticker, positi
+000119d0: 6f6e 293a 0d0a 2020 2020 6d65 7468 6f64  on):..    method
+000119e0: 5f75 726c 203d 2027 7365 7453 7469 636b  _url = 'setStick
+000119f0: 6572 506f 7369 7469 6f6e 496e 5365 7427  erPositionInSet'
+00011a00: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+00011a10: 7b27 7374 6963 6b65 7227 3a20 7374 6963  {'sticker': stic
+00011a20: 6b65 722c 2027 706f 7369 7469 6f6e 273a  ker, 'position':
+00011a30: 2070 6f73 6974 696f 6e7d 0d0a 2020 2020   position}..    
+00011a40: 7265 7475 726e 205f 6d61 6b65 5f72 6571  return _make_req
+00011a50: 7565 7374 2874 6f6b 656e 2c20 6d65 7468  uest(token, meth
+00011a60: 6f64 5f75 726c 2c20 7061 7261 6d73 3d70  od_url, params=p
+00011a70: 6179 6c6f 6164 2c20 6d65 7468 6f64 3d27  ayload, method='
+00011a80: 706f 7374 2729 0d0a 0d0a 0d0a 6465 6620  post')......def 
+00011a90: 6465 6c65 7465 5f73 7469 636b 6572 5f66  delete_sticker_f
+00011aa0: 726f 6d5f 7365 7428 746f 6b65 6e2c 2073  rom_set(token, s
+00011ab0: 7469 636b 6572 293a 0d0a 2020 2020 6d65  ticker):..    me
+00011ac0: 7468 6f64 5f75 726c 203d 2027 6465 6c65  thod_url = 'dele
+00011ad0: 7465 5374 6963 6b65 7246 726f 6d53 6574  teStickerFromSet
+00011ae0: 270d 0a20 2020 2070 6179 6c6f 6164 203d  '..    payload =
+00011af0: 207b 2773 7469 636b 6572 273a 2073 7469   {'sticker': sti
+00011b00: 636b 6572 7d0d 0a20 2020 2072 6574 7572  cker}..    retur
+00011b10: 6e20 5f6d 616b 655f 7265 7175 6573 7428  n _make_request(
+00011b20: 746f 6b65 6e2c 206d 6574 686f 645f 7572  token, method_ur
+00011b30: 6c2c 2070 6172 616d 733d 7061 796c 6f61  l, params=payloa
+00011b40: 642c 206d 6574 686f 643d 2770 6f73 7427  d, method='post'
+00011b50: 290d 0a0d 0a0d 0a64 6566 2061 6e73 7765  )......def answe
+00011b60: 725f 7765 625f 6170 705f 7175 6572 7928  r_web_app_query(
+00011b70: 746f 6b65 6e2c 2077 6562 5f61 7070 5f71  token, web_app_q
+00011b80: 7565 7279 5f69 642c 2072 6573 756c 743a  uery_id, result:
+00011b90: 2074 7970 6573 2e49 6e6c 696e 6551 7565   types.InlineQue
+00011ba0: 7279 5265 7375 6c74 4261 7365 293a 0d0a  ryResultBase):..
+00011bb0: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00011bc0: 2027 616e 7377 6572 5765 6241 7070 5175   'answerWebAppQu
+00011bd0: 6572 7927 0d0a 2020 2020 7061 796c 6f61  ery'..    payloa
+00011be0: 6420 3d20 7b27 7765 625f 6170 705f 7175  d = {'web_app_qu
+00011bf0: 6572 795f 6964 273a 2077 6562 5f61 7070  ery_id': web_app
+00011c00: 5f71 7565 7279 5f69 642c 2027 7265 7375  _query_id, 'resu
+00011c10: 6c74 273a 2072 6573 756c 742e 746f 5f6a  lt': result.to_j
+00011c20: 736f 6e28 297d 0d0a 2020 2020 7265 7475  son()}..    retu
+00011c30: 726e 205f 6d61 6b65 5f72 6571 7565 7374  rn _make_request
+00011c40: 2874 6f6b 656e 2c20 6d65 7468 6f64 5f75  (token, method_u
+00011c50: 726c 2c20 7061 7261 6d73 3d70 6179 6c6f  rl, params=paylo
+00011c60: 6164 2c20 6d65 7468 6f64 3d27 706f 7374  ad, method='post
+00011c70: 2729 0d0a 0d0a 0d0a 6465 6620 6372 6561  ')......def crea
+00011c80: 7465 5f69 6e76 6f69 6365 5f6c 696e 6b28  te_invoice_link(
+00011c90: 746f 6b65 6e2c 2074 6974 6c65 2c20 6465  token, title, de
+00011ca0: 7363 7269 7074 696f 6e2c 2070 6179 6c6f  scription, paylo
+00011cb0: 6164 2c20 7072 6f76 6964 6572 5f74 6f6b  ad, provider_tok
+00011cc0: 656e 2c0d 0a20 2020 2020 2020 2020 2020  en,..           
+00011cd0: 2063 7572 7265 6e63 792c 2070 7269 6365   currency, price
+00011ce0: 732c 206d 6178 5f74 6970 5f61 6d6f 756e  s, max_tip_amoun
+00011cf0: 743d 4e6f 6e65 2c20 7375 6767 6573 7465  t=None, suggeste
+00011d00: 645f 7469 705f 616d 6f75 6e74 733d 4e6f  d_tip_amounts=No
+00011d10: 6e65 2c20 7072 6f76 6964 6572 5f64 6174  ne, provider_dat
+00011d20: 613d 4e6f 6e65 2c0d 0a20 2020 2020 2020  a=None,..       
+00011d30: 2020 2020 2070 686f 746f 5f75 726c 3d4e       photo_url=N
+00011d40: 6f6e 652c 2070 686f 746f 5f73 697a 653d  one, photo_size=
+00011d50: 4e6f 6e65 2c20 7068 6f74 6f5f 7769 6474  None, photo_widt
+00011d60: 683d 4e6f 6e65 2c20 7068 6f74 6f5f 6865  h=None, photo_he
+00011d70: 6967 6874 3d4e 6f6e 652c 206e 6565 645f  ight=None, need_
+00011d80: 6e61 6d65 3d4e 6f6e 652c 206e 6565 645f  name=None, need_
+00011d90: 7068 6f6e 655f 6e75 6d62 6572 3d4e 6f6e  phone_number=Non
+00011da0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00011db0: 6e65 6564 5f65 6d61 696c 3d4e 6f6e 652c  need_email=None,
+00011dc0: 206e 6565 645f 7368 6970 7069 6e67 5f61   need_shipping_a
+00011dd0: 6464 7265 7373 3d4e 6f6e 652c 2073 656e  ddress=None, sen
+00011de0: 645f 7068 6f6e 655f 6e75 6d62 6572 5f74  d_phone_number_t
+00011df0: 6f5f 7072 6f76 6964 6572 3d4e 6f6e 652c  o_provider=None,
+00011e00: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00011e10: 6e64 5f65 6d61 696c 5f74 6f5f 7072 6f76  nd_email_to_prov
+00011e20: 6964 6572 3d4e 6f6e 652c 2069 735f 666c  ider=None, is_fl
+00011e30: 6578 6962 6c65 3d4e 6f6e 6529 3a0d 0a20  exible=None):.. 
+00011e40: 2020 206d 6574 686f 645f 7572 6c20 3d20     method_url = 
+00011e50: 7227 6372 6561 7465 496e 766f 6963 654c  r'createInvoiceL
+00011e60: 696e 6b27 0d0a 2020 2020 7061 796c 6f61  ink'..    payloa
+00011e70: 6420 3d20 7b27 7469 746c 6527 3a20 7469  d = {'title': ti
+00011e80: 746c 652c 2027 6465 7363 7269 7074 696f  tle, 'descriptio
+00011e90: 6e27 3a20 6465 7363 7269 7074 696f 6e2c  n': description,
+00011ea0: 2027 7061 796c 6f61 6427 3a20 7061 796c   'payload': payl
+00011eb0: 6f61 642c 2027 7072 6f76 6964 6572 5f74  oad, 'provider_t
+00011ec0: 6f6b 656e 273a 2070 726f 7669 6465 725f  oken': provider_
+00011ed0: 746f 6b65 6e2c 0d0a 2020 2020 2020 2020  token,..        
+00011ee0: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
+00011ef0: 7927 3a20 6375 7272 656e 6379 2c20 2770  y': currency, 'p
+00011f00: 7269 6365 7327 3a20 5f63 6f6e 7665 7274  rices': _convert
+00011f10: 5f6c 6973 745f 6a73 6f6e 5f73 6572 6961  _list_json_seria
+00011f20: 6c69 7a61 626c 6528 7072 6963 6573 297d  lizable(prices)}
+00011f30: 0d0a 2020 2020 6966 206d 6178 5f74 6970  ..    if max_tip
+00011f40: 5f61 6d6f 756e 743a 0d0a 2020 2020 2020  _amount:..      
+00011f50: 2020 7061 796c 6f61 645b 276d 6178 5f74    payload['max_t
+00011f60: 6970 5f61 6d6f 756e 7427 5d20 3d20 6d61  ip_amount'] = ma
+00011f70: 785f 7469 705f 616d 6f75 6e74 0d0a 2020  x_tip_amount..  
+00011f80: 2020 6966 2073 7567 6765 7374 6564 5f74    if suggested_t
+00011f90: 6970 5f61 6d6f 756e 7473 3a0d 0a20 2020  ip_amounts:..   
+00011fa0: 2020 2020 2070 6179 6c6f 6164 5b27 7375       payload['su
+00011fb0: 6767 6573 7465 645f 7469 705f 616d 6f75  ggested_tip_amou
+00011fc0: 6e74 7327 5d20 3d20 6a73 6f6e 2e64 756d  nts'] = json.dum
+00011fd0: 7073 2873 7567 6765 7374 6564 5f74 6970  ps(suggested_tip
+00011fe0: 5f61 6d6f 756e 7473 290d 0a20 2020 2069  _amounts)..    i
+00011ff0: 6620 7072 6f76 6964 6572 5f64 6174 613a  f provider_data:
+00012000: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00012010: 645b 2770 726f 7669 6465 725f 6461 7461  d['provider_data
+00012020: 275d 203d 2070 726f 7669 6465 725f 6461  '] = provider_da
+00012030: 7461 0d0a 2020 2020 6966 2070 686f 746f  ta..    if photo
+00012040: 5f75 726c 3a0d 0a20 2020 2020 2020 2070  _url:..        p
+00012050: 6179 6c6f 6164 5b27 7068 6f74 6f5f 7572  ayload['photo_ur
+00012060: 6c27 5d20 3d20 7068 6f74 6f5f 7572 6c0d  l'] = photo_url.
+00012070: 0a20 2020 2069 6620 7068 6f74 6f5f 7369  .    if photo_si
+00012080: 7a65 3a0d 0a20 2020 2020 2020 2070 6179  ze:..        pay
+00012090: 6c6f 6164 5b27 7068 6f74 6f5f 7369 7a65  load['photo_size
+000120a0: 275d 203d 2070 686f 746f 5f73 697a 650d  '] = photo_size.
+000120b0: 0a20 2020 2069 6620 7068 6f74 6f5f 7769  .    if photo_wi
+000120c0: 6474 683a 0d0a 2020 2020 2020 2020 7061  dth:..        pa
+000120d0: 796c 6f61 645b 2770 686f 746f 5f77 6964  yload['photo_wid
+000120e0: 7468 275d 203d 2070 686f 746f 5f77 6964  th'] = photo_wid
+000120f0: 7468 0d0a 2020 2020 6966 2070 686f 746f  th..    if photo
+00012100: 5f68 6569 6768 743a 0d0a 2020 2020 2020  _height:..      
+00012110: 2020 7061 796c 6f61 645b 2770 686f 746f    payload['photo
+00012120: 5f68 6569 6768 7427 5d20 3d20 7068 6f74  _height'] = phot
+00012130: 6f5f 6865 6967 6874 0d0a 2020 2020 6966  o_height..    if
+00012140: 206e 6565 645f 6e61 6d65 2069 7320 6e6f   need_name is no
+00012150: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00012160: 2070 6179 6c6f 6164 5b27 6e65 6564 5f6e   payload['need_n
+00012170: 616d 6527 5d20 3d20 6e65 6564 5f6e 616d  ame'] = need_nam
+00012180: 650d 0a20 2020 2069 6620 6e65 6564 5f70  e..    if need_p
+00012190: 686f 6e65 5f6e 756d 6265 7220 6973 206e  hone_number is n
+000121a0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000121b0: 2020 7061 796c 6f61 645b 276e 6565 645f    payload['need_
+000121c0: 7068 6f6e 655f 6e75 6d62 6572 275d 203d  phone_number'] =
+000121d0: 206e 6565 645f 7068 6f6e 655f 6e75 6d62   need_phone_numb
+000121e0: 6572 0d0a 2020 2020 6966 206e 6565 645f  er..    if need_
+000121f0: 656d 6169 6c20 6973 206e 6f74 204e 6f6e  email is not Non
+00012200: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00012210: 6f61 645b 276e 6565 645f 656d 6169 6c27  oad['need_email'
+00012220: 5d20 3d20 6e65 6564 5f65 6d61 696c 0d0a  ] = need_email..
+00012230: 2020 2020 6966 206e 6565 645f 7368 6970      if need_ship
+00012240: 7069 6e67 5f61 6464 7265 7373 2069 7320  ping_address is 
+00012250: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00012260: 2020 2070 6179 6c6f 6164 5b27 6e65 6564     payload['need
+00012270: 5f73 6869 7070 696e 675f 6164 6472 6573  _shipping_addres
+00012280: 7327 5d20 3d20 6e65 6564 5f73 6869 7070  s'] = need_shipp
+00012290: 696e 675f 6164 6472 6573 730d 0a20 2020  ing_address..   
+000122a0: 2069 6620 7365 6e64 5f70 686f 6e65 5f6e   if send_phone_n
+000122b0: 756d 6265 725f 746f 5f70 726f 7669 6465  umber_to_provide
+000122c0: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+000122d0: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+000122e0: 2773 656e 645f 7068 6f6e 655f 6e75 6d62  'send_phone_numb
+000122f0: 6572 5f74 6f5f 7072 6f76 6964 6572 275d  er_to_provider']
+00012300: 203d 2073 656e 645f 7068 6f6e 655f 6e75   = send_phone_nu
+00012310: 6d62 6572 5f74 6f5f 7072 6f76 6964 6572  mber_to_provider
+00012320: 0d0a 2020 2020 6966 2073 656e 645f 656d  ..    if send_em
+00012330: 6169 6c5f 746f 5f70 726f 7669 6465 7220  ail_to_provider 
+00012340: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00012350: 2020 2020 2020 7061 796c 6f61 645b 2773        payload['s
+00012360: 656e 645f 656d 6169 6c5f 746f 5f70 726f  end_email_to_pro
+00012370: 7669 6465 7227 5d20 3d20 7365 6e64 5f65  vider'] = send_e
+00012380: 6d61 696c 5f74 6f5f 7072 6f76 6964 6572  mail_to_provider
+00012390: 0d0a 2020 2020 6966 2069 735f 666c 6578  ..    if is_flex
+000123a0: 6962 6c65 2069 7320 6e6f 7420 4e6f 6e65  ible is not None
+000123b0: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+000123c0: 6164 5b27 6973 5f66 6c65 7869 626c 6527  ad['is_flexible'
+000123d0: 5d20 3d20 6973 5f66 6c65 7869 626c 650d  ] = is_flexible.
+000123e0: 0a20 2020 2072 6574 7572 6e20 5f6d 616b  .    return _mak
+000123f0: 655f 7265 7175 6573 7428 746f 6b65 6e2c  e_request(token,
+00012400: 206d 6574 686f 645f 7572 6c2c 2070 6172   method_url, par
+00012410: 616d 733d 7061 796c 6f61 642c 206d 6574  ams=payload, met
+00012420: 686f 643d 2770 6f73 7427 290d 0a0d 0a0d  hod='post').....
+00012430: 0a23 206e 6f69 6e73 7065 6374 696f 6e20  .# noinspection 
+00012440: 5079 5368 6164 6f77 696e 6742 7569 6c74  PyShadowingBuilt
+00012450: 696e 730d 0a64 6566 2073 656e 645f 706f  ins..def send_po
+00012460: 6c6c 280d 0a20 2020 2020 2020 2074 6f6b  ll(..        tok
+00012470: 656e 2c20 6368 6174 5f69 642c 0d0a 2020  en, chat_id,..  
+00012480: 2020 2020 2020 7175 6573 7469 6f6e 2c20        question, 
+00012490: 6f70 7469 6f6e 732c 0d0a 2020 2020 2020  options,..      
+000124a0: 2020 6973 5f61 6e6f 6e79 6d6f 7573 203d    is_anonymous =
+000124b0: 204e 6f6e 652c 2074 7970 6520 3d20 4e6f   None, type = No
+000124c0: 6e65 2c20 616c 6c6f 7773 5f6d 756c 7469  ne, allows_multi
+000124d0: 706c 655f 616e 7377 6572 7320 3d20 4e6f  ple_answers = No
+000124e0: 6e65 2c20 636f 7272 6563 745f 6f70 7469  ne, correct_opti
+000124f0: 6f6e 5f69 6420 3d20 4e6f 6e65 2c0d 0a20  on_id = None,.. 
+00012500: 2020 2020 2020 2065 7870 6c61 6e61 7469         explanati
+00012510: 6f6e 203d 204e 6f6e 652c 2065 7870 6c61  on = None, expla
+00012520: 6e61 7469 6f6e 5f70 6172 7365 5f6d 6f64  nation_parse_mod
+00012530: 653d 4e6f 6e65 2c20 6f70 656e 5f70 6572  e=None, open_per
+00012540: 696f 6420 3d20 4e6f 6e65 2c20 636c 6f73  iod = None, clos
+00012550: 655f 6461 7465 203d 204e 6f6e 652c 2069  e_date = None, i
+00012560: 735f 636c 6f73 6564 203d 204e 6f6e 652c  s_closed = None,
+00012570: 0d0a 2020 2020 2020 2020 6469 7361 626c  ..        disabl
+00012580: 655f 6e6f 7469 6669 6361 7469 6f6e 3d46  e_notification=F
+00012590: 616c 7365 2c20 7265 706c 795f 746f 5f6d  alse, reply_to_m
+000125a0: 6573 7361 6765 5f69 643d 4e6f 6e65 2c20  essage_id=None, 
+000125b0: 616c 6c6f 775f 7365 6e64 696e 675f 7769  allow_sending_wi
+000125c0: 7468 6f75 745f 7265 706c 793d 4e6f 6e65  thout_reply=None
+000125d0: 2c0d 0a20 2020 2020 2020 2072 6570 6c79  ,..        reply
+000125e0: 5f6d 6172 6b75 703d 4e6f 6e65 2c20 7469  _markup=None, ti
+000125f0: 6d65 6f75 743d 4e6f 6e65 2c20 6578 706c  meout=None, expl
+00012600: 616e 6174 696f 6e5f 656e 7469 7469 6573  anation_entities
+00012610: 3d4e 6f6e 652c 2070 726f 7465 6374 5f63  =None, protect_c
+00012620: 6f6e 7465 6e74 3d4e 6f6e 652c 206d 6573  ontent=None, mes
+00012630: 7361 6765 5f74 6872 6561 645f 6964 3d4e  sage_thread_id=N
+00012640: 6f6e 6529 3a0d 0a20 2020 206d 6574 686f  one):..    metho
+00012650: 645f 7572 6c20 3d20 7227 7365 6e64 506f  d_url = r'sendPo
+00012660: 6c6c 270d 0a20 2020 2070 6179 6c6f 6164  ll'..    payload
+00012670: 203d 207b 0d0a 2020 2020 2020 2020 2763   = {..        'c
+00012680: 6861 745f 6964 273a 2073 7472 2863 6861  hat_id': str(cha
+00012690: 745f 6964 292c 0d0a 2020 2020 2020 2020  t_id),..        
+000126a0: 2771 7565 7374 696f 6e27 3a20 7175 6573  'question': ques
+000126b0: 7469 6f6e 2c0d 0a20 2020 2020 2020 2027  tion,..        '
+000126c0: 6f70 7469 6f6e 7327 3a20 6a73 6f6e 2e64  options': json.d
+000126d0: 756d 7073 285f 636f 6e76 6572 745f 706f  umps(_convert_po
+000126e0: 6c6c 5f6f 7074 696f 6e73 286f 7074 696f  ll_options(optio
+000126f0: 6e73 2929 7d0d 0a0d 0a20 2020 2069 6620  ns))}....    if 
+00012700: 6973 5f61 6e6f 6e79 6d6f 7573 2069 7320  is_anonymous is 
+00012710: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00012720: 2020 2070 6179 6c6f 6164 5b27 6973 5f61     payload['is_a
+00012730: 6e6f 6e79 6d6f 7573 275d 203d 2069 735f  nonymous'] = is_
+00012740: 616e 6f6e 796d 6f75 730d 0a20 2020 2069  anonymous..    i
+00012750: 6620 7479 7065 2069 7320 6e6f 7420 4e6f  f type is not No
+00012760: 6e65 3a0d 0a20 2020 2020 2020 2070 6179  ne:..        pay
+00012770: 6c6f 6164 5b27 7479 7065 275d 203d 2074  load['type'] = t
+00012780: 7970 650d 0a20 2020 2069 6620 616c 6c6f  ype..    if allo
+00012790: 7773 5f6d 756c 7469 706c 655f 616e 7377  ws_multiple_answ
+000127a0: 6572 7320 6973 206e 6f74 204e 6f6e 653a  ers is not None:
+000127b0: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+000127c0: 645b 2761 6c6c 6f77 735f 6d75 6c74 6970  d['allows_multip
+000127d0: 6c65 5f61 6e73 7765 7273 275d 203d 2061  le_answers'] = a
+000127e0: 6c6c 6f77 735f 6d75 6c74 6970 6c65 5f61  llows_multiple_a
+000127f0: 6e73 7765 7273 0d0a 2020 2020 6966 2063  nswers..    if c
+00012800: 6f72 7265 6374 5f6f 7074 696f 6e5f 6964  orrect_option_id
+00012810: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00012820: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00012830: 636f 7272 6563 745f 6f70 7469 6f6e 5f69  correct_option_i
+00012840: 6427 5d20 3d20 636f 7272 6563 745f 6f70  d'] = correct_op
+00012850: 7469 6f6e 5f69 640d 0a20 2020 2069 6620  tion_id..    if 
+00012860: 6578 706c 616e 6174 696f 6e20 6973 206e  explanation is n
+00012870: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00012880: 2020 7061 796c 6f61 645b 2765 7870 6c61    payload['expla
+00012890: 6e61 7469 6f6e 275d 203d 2065 7870 6c61  nation'] = expla
+000128a0: 6e61 7469 6f6e 0d0a 2020 2020 6966 2065  nation..    if e
+000128b0: 7870 6c61 6e61 7469 6f6e 5f70 6172 7365  xplanation_parse
+000128c0: 5f6d 6f64 6520 6973 206e 6f74 204e 6f6e  _mode is not Non
+000128d0: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+000128e0: 6f61 645b 2765 7870 6c61 6e61 7469 6f6e  oad['explanation
+000128f0: 5f70 6172 7365 5f6d 6f64 6527 5d20 3d20  _parse_mode'] = 
+00012900: 6578 706c 616e 6174 696f 6e5f 7061 7273  explanation_pars
+00012910: 655f 6d6f 6465 0d0a 2020 2020 6966 206f  e_mode..    if o
+00012920: 7065 6e5f 7065 7269 6f64 2069 7320 6e6f  pen_period is no
+00012930: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+00012940: 2070 6179 6c6f 6164 5b27 6f70 656e 5f70   payload['open_p
+00012950: 6572 696f 6427 5d20 3d20 6f70 656e 5f70  eriod'] = open_p
+00012960: 6572 696f 640d 0a20 2020 2069 6620 636c  eriod..    if cl
+00012970: 6f73 655f 6461 7465 2069 7320 6e6f 7420  ose_date is not 
+00012980: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2069  None:..        i
+00012990: 6620 6973 696e 7374 616e 6365 2863 6c6f  f isinstance(clo
+000129a0: 7365 5f64 6174 652c 2064 6174 6574 696d  se_date, datetim
+000129b0: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
+000129c0: 2070 6179 6c6f 6164 5b27 636c 6f73 655f   payload['close_
+000129d0: 6461 7465 275d 203d 2063 6c6f 7365 5f64  date'] = close_d
+000129e0: 6174 652e 7469 6d65 7374 616d 7028 290d  ate.timestamp().
+000129f0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00012a00: 2020 2020 2020 2020 2020 2020 7061 796c              payl
+00012a10: 6f61 645b 2763 6c6f 7365 5f64 6174 6527  oad['close_date'
+00012a20: 5d20 3d20 636c 6f73 655f 6461 7465 0d0a  ] = close_date..
+00012a30: 2020 2020 6966 2069 735f 636c 6f73 6564      if is_closed
+00012a40: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00012a50: 2020 2020 2020 2070 6179 6c6f 6164 5b27         payload['
+00012a60: 6973 5f63 6c6f 7365 6427 5d20 3d20 6973  is_closed'] = is
+00012a70: 5f63 6c6f 7365 640d 0a0d 0a20 2020 2069  _closed....    i
+00012a80: 6620 6469 7361 626c 655f 6e6f 7469 6669  f disable_notifi
+00012a90: 6361 7469 6f6e 3a0d 0a20 2020 2020 2020  cation:..       
+00012aa0: 2070 6179 6c6f 6164 5b27 6469 7361 626c   payload['disabl
+00012ab0: 655f 6e6f 7469 6669 6361 7469 6f6e 275d  e_notification']
+00012ac0: 203d 2064 6973 6162 6c65 5f6e 6f74 6966   = disable_notif
+00012ad0: 6963 6174 696f 6e0d 0a20 2020 2069 6620  ication..    if 
+00012ae0: 7265 706c 795f 746f 5f6d 6573 7361 6765  reply_to_message
+00012af0: 5f69 6420 6973 206e 6f74 204e 6f6e 653a  _id is not None:
+00012b00: 0d0a 2020 2020 2020 2020 7061 796c 6f61  ..        payloa
+00012b10: 645b 2772 6570 6c79 5f74 6f5f 6d65 7373  d['reply_to_mess
+00012b20: 6167 655f 6964 275d 203d 2072 6570 6c79  age_id'] = reply
+00012b30: 5f74 6f5f 6d65 7373 6167 655f 6964 0d0a  _to_message_id..
+00012b40: 2020 2020 6966 2061 6c6c 6f77 5f73 656e      if allow_sen
+00012b50: 6469 6e67 5f77 6974 686f 7574 5f72 6570  ding_without_rep
+00012b60: 6c79 2069 7320 6e6f 7420 4e6f 6e65 3a0d  ly is not None:.
+00012b70: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012b80: 5b27 616c 6c6f 775f 7365 6e64 696e 675f  ['allow_sending_
+00012b90: 7769 7468 6f75 745f 7265 706c 7927 5d20  without_reply'] 
+00012ba0: 3d20 616c 6c6f 775f 7365 6e64 696e 675f  = allow_sending_
+00012bb0: 7769 7468 6f75 745f 7265 706c 790d 0a20  without_reply.. 
+00012bc0: 2020 2069 6620 7265 706c 795f 6d61 726b     if reply_mark
+00012bd0: 7570 2069 7320 6e6f 7420 4e6f 6e65 3a0d  up is not None:.
+00012be0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012bf0: 5b27 7265 706c 795f 6d61 726b 7570 275d  ['reply_markup']
+00012c00: 203d 205f 636f 6e76 6572 745f 6d61 726b   = _convert_mark
+00012c10: 7570 2872 6570 6c79 5f6d 6172 6b75 7029  up(reply_markup)
+00012c20: 0d0a 2020 2020 6966 2074 696d 656f 7574  ..    if timeout
+00012c30: 3a0d 0a20 2020 2020 2020 2070 6179 6c6f  :..        paylo
+00012c40: 6164 5b27 7469 6d65 6f75 7427 5d20 3d20  ad['timeout'] = 
+00012c50: 7469 6d65 6f75 740d 0a20 2020 2069 6620  timeout..    if 
+00012c60: 6578 706c 616e 6174 696f 6e5f 656e 7469  explanation_enti
+00012c70: 7469 6573 3a0d 0a20 2020 2020 2020 2070  ties:..        p
+00012c80: 6179 6c6f 6164 5b27 6578 706c 616e 6174  ayload['explanat
+00012c90: 696f 6e5f 656e 7469 7469 6573 275d 203d  ion_entities'] =
+00012ca0: 206a 736f 6e2e 6475 6d70 7328 0d0a 2020   json.dumps(..  
+00012cb0: 2020 2020 2020 2020 2020 7479 7065 732e            types.
+00012cc0: 4d65 7373 6167 6545 6e74 6974 792e 746f  MessageEntity.to
+00012cd0: 5f6c 6973 745f 6f66 5f64 6963 7473 2865  _list_of_dicts(e
+00012ce0: 7870 6c61 6e61 7469 6f6e 5f65 6e74 6974  xplanation_entit
+00012cf0: 6965 7329 290d 0a20 2020 2069 6620 7072  ies))..    if pr
+00012d00: 6f74 6563 745f 636f 6e74 656e 743a 0d0a  otect_content:..
+00012d10: 2020 2020 2020 2020 7061 796c 6f61 645b          payload[
+00012d20: 2770 726f 7465 6374 5f63 6f6e 7465 6e74  'protect_content
+00012d30: 275d 203d 2070 726f 7465 6374 5f63 6f6e  '] = protect_con
+00012d40: 7465 6e74 0d0a 2020 2020 6966 206d 6573  tent..    if mes
+00012d50: 7361 6765 5f74 6872 6561 645f 6964 3a0d  sage_thread_id:.
+00012d60: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012d70: 5b27 6d65 7373 6167 655f 7468 7265 6164  ['message_thread
+00012d80: 5f69 6427 5d20 3d20 6d65 7373 6167 655f  _id'] = message_
+00012d90: 7468 7265 6164 5f69 640d 0a20 2020 2072  thread_id..    r
+00012da0: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00012db0: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012dc0: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012dd0: 796c 6f61 6429 0d0a 0d0a 6465 6620 6372  yload)....def cr
+00012de0: 6561 7465 5f66 6f72 756d 5f74 6f70 6963  eate_forum_topic
+00012df0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+00012e00: 206e 616d 652c 2069 636f 6e5f 636f 6c6f   name, icon_colo
+00012e10: 723d 4e6f 6e65 2c20 6963 6f6e 5f63 7573  r=None, icon_cus
+00012e20: 746f 6d5f 656d 6f6a 695f 6964 3d4e 6f6e  tom_emoji_id=Non
+00012e30: 6529 3a0d 0a20 2020 206d 6574 686f 645f  e):..    method_
+00012e40: 7572 6c20 3d20 7227 6372 6561 7465 466f  url = r'createFo
+00012e50: 7275 6d54 6f70 6963 270d 0a20 2020 2070  rumTopic'..    p
+00012e60: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+00012e70: 6964 273a 2063 6861 745f 6964 2c20 276e  id': chat_id, 'n
+00012e80: 616d 6527 3a20 6e61 6d65 7d0d 0a20 2020  ame': name}..   
+00012e90: 2069 6620 6963 6f6e 5f63 6f6c 6f72 3a0d   if icon_color:.
+00012ea0: 0a20 2020 2020 2020 2070 6179 6c6f 6164  .        payload
+00012eb0: 5b27 6963 6f6e 5f63 6f6c 6f72 275d 203d  ['icon_color'] =
+00012ec0: 2069 636f 6e5f 636f 6c6f 720d 0a20 2020   icon_color..   
+00012ed0: 2069 6620 6963 6f6e 5f63 7573 746f 6d5f   if icon_custom_
+00012ee0: 656d 6f6a 695f 6964 3a0d 0a20 2020 2020  emoji_id:..     
+00012ef0: 2020 2070 6179 6c6f 6164 5b27 6963 6f6e     payload['icon
+00012f00: 5f63 7573 746f 6d5f 656d 6f6a 695f 6964  _custom_emoji_id
+00012f10: 275d 203d 2069 636f 6e5f 6375 7374 6f6d  '] = icon_custom
+00012f20: 5f65 6d6f 6a69 5f69 640d 0a20 2020 2072  _emoji_id..    r
+00012f30: 6574 7572 6e20 5f6d 616b 655f 7265 7175  eturn _make_requ
+00012f40: 6573 7428 746f 6b65 6e2c 206d 6574 686f  est(token, metho
+00012f50: 645f 7572 6c2c 2070 6172 616d 733d 7061  d_url, params=pa
+00012f60: 796c 6f61 6429 0d0a 0d0a 6465 6620 6564  yload)....def ed
+00012f70: 6974 5f66 6f72 756d 5f74 6f70 6963 2874  it_forum_topic(t
+00012f80: 6f6b 656e 2c20 6368 6174 5f69 642c 206d  oken, chat_id, m
+00012f90: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00012fa0: 2c20 6e61 6d65 3d4e 6f6e 652c 2069 636f  , name=None, ico
+00012fb0: 6e5f 6375 7374 6f6d 5f65 6d6f 6a69 5f69  n_custom_emoji_i
+00012fc0: 643d 4e6f 6e65 293a 0d0a 2020 2020 6d65  d=None):..    me
+00012fd0: 7468 6f64 5f75 726c 203d 2072 2765 6469  thod_url = r'edi
+00012fe0: 7446 6f72 756d 546f 7069 6327 0d0a 2020  tForumTopic'..  
+00012ff0: 2020 7061 796c 6f61 6420 3d20 7b27 6368    payload = {'ch
+00013000: 6174 5f69 6427 3a20 6368 6174 5f69 642c  at_id': chat_id,
+00013010: 2027 6d65 7373 6167 655f 7468 7265 6164   'message_thread
+00013020: 5f69 6427 3a20 6d65 7373 6167 655f 7468  _id': message_th
+00013030: 7265 6164 5f69 647d 0d0a 2020 2020 6966  read_id}..    if
+00013040: 206e 616d 6520 6973 206e 6f74 204e 6f6e   name is not Non
+00013050: 653a 0d0a 2020 2020 2020 2020 7061 796c  e:..        payl
+00013060: 6f61 645b 276e 616d 6527 5d20 3d20 6e61  oad['name'] = na
+00013070: 6d65 0d0a 2020 2020 6966 2069 636f 6e5f  me..    if icon_
+00013080: 6375 7374 6f6d 5f65 6d6f 6a69 5f69 6420  custom_emoji_id 
+00013090: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+000130a0: 2020 2020 2020 7061 796c 6f61 645b 2769        payload['i
+000130b0: 636f 6e5f 6375 7374 6f6d 5f65 6d6f 6a69  con_custom_emoji
+000130c0: 5f69 6427 5d20 3d20 6963 6f6e 5f63 7573  _id'] = icon_cus
+000130d0: 746f 6d5f 656d 6f6a 695f 6964 0d0a 2020  tom_emoji_id..  
+000130e0: 2020 7265 7475 726e 205f 6d61 6b65 5f72    return _make_r
+000130f0: 6571 7565 7374 2874 6f6b 656e 2c20 6d65  equest(token, me
+00013100: 7468 6f64 5f75 726c 2c20 7061 7261 6d73  thod_url, params
+00013110: 3d70 6179 6c6f 6164 290d 0a0d 0a64 6566  =payload)....def
+00013120: 2063 6c6f 7365 5f66 6f72 756d 5f74 6f70   close_forum_top
+00013130: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00013140: 642c 206d 6573 7361 6765 5f74 6872 6561  d, message_threa
+00013150: 645f 6964 293a 0d0a 2020 2020 6d65 7468  d_id):..    meth
+00013160: 6f64 5f75 726c 203d 2072 2763 6c6f 7365  od_url = r'close
+00013170: 466f 7275 6d54 6f70 6963 270d 0a20 2020  ForumTopic'..   
+00013180: 2070 6179 6c6f 6164 203d 207b 2763 6861   payload = {'cha
+00013190: 745f 6964 273a 2063 6861 745f 6964 2c20  t_id': chat_id, 
+000131a0: 276d 6573 7361 6765 5f74 6872 6561 645f  'message_thread_
+000131b0: 6964 273a 206d 6573 7361 6765 5f74 6872  id': message_thr
+000131c0: 6561 645f 6964 7d0d 0a20 2020 2072 6574  ead_id}..    ret
+000131d0: 7572 6e20 5f6d 616b 655f 7265 7175 6573  urn _make_reques
+000131e0: 7428 746f 6b65 6e2c 206d 6574 686f 645f  t(token, method_
+000131f0: 7572 6c2c 2070 6172 616d 733d 7061 796c  url, params=payl
+00013200: 6f61 6429 0d0a 0d0a 6465 6620 7265 6f70  oad)....def reop
+00013210: 656e 5f66 6f72 756d 5f74 6f70 6963 2874  en_forum_topic(t
+00013220: 6f6b 656e 2c20 6368 6174 5f69 642c 206d  oken, chat_id, m
+00013230: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+00013240: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00013250: 726c 203d 2072 2772 656f 7065 6e46 6f72  rl = r'reopenFor
+00013260: 756d 546f 7069 6327 0d0a 2020 2020 7061  umTopic'..    pa
+00013270: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00013280: 6427 3a20 6368 6174 5f69 642c 2027 6d65  d': chat_id, 'me
+00013290: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+000132a0: 3a20 6d65 7373 6167 655f 7468 7265 6164  : message_thread
+000132b0: 5f69 647d 0d0a 2020 2020 7265 7475 726e  _id}..    return
+000132c0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000132d0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000132e0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+000132f0: 290d 0a0d 0a64 6566 2064 656c 6574 655f  )....def delete_
+00013300: 666f 7275 6d5f 746f 7069 6328 746f 6b65  forum_topic(toke
+00013310: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
+00013320: 6167 655f 7468 7265 6164 5f69 6429 3a0d  age_thread_id):.
+00013330: 0a20 2020 206d 6574 686f 645f 7572 6c20  .    method_url 
+00013340: 3d20 7227 6465 6c65 7465 466f 7275 6d54  = r'deleteForumT
+00013350: 6f70 6963 270d 0a20 2020 2070 6179 6c6f  opic'..    paylo
+00013360: 6164 203d 207b 2763 6861 745f 6964 273a  ad = {'chat_id':
+00013370: 2063 6861 745f 6964 2c20 276d 6573 7361   chat_id, 'messa
+00013380: 6765 5f74 6872 6561 645f 6964 273a 206d  ge_thread_id': m
+00013390: 6573 7361 6765 5f74 6872 6561 645f 6964  essage_thread_id
+000133a0: 7d0d 0a20 2020 2072 6574 7572 6e20 5f6d  }..    return _m
+000133b0: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+000133c0: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000133d0: 6172 616d 733d 7061 796c 6f61 6429 0d0a  arams=payload)..
+000133e0: 0d0a 6465 6620 756e 7069 6e5f 616c 6c5f  ..def unpin_all_
+000133f0: 666f 7275 6d5f 746f 7069 635f 6d65 7373  forum_topic_mess
+00013400: 6167 6573 2874 6f6b 656e 2c20 6368 6174  ages(token, chat
+00013410: 5f69 642c 206d 6573 7361 6765 5f74 6872  _id, message_thr
+00013420: 6561 645f 6964 293a 0d0a 2020 2020 6d65  ead_id):..    me
+00013430: 7468 6f64 5f75 726c 203d 2072 2775 6e70  thod_url = r'unp
+00013440: 696e 416c 6c46 6f72 756d 546f 7069 634d  inAllForumTopicM
+00013450: 6573 7361 6765 7327 0d0a 2020 2020 7061  essages'..    pa
+00013460: 796c 6f61 6420 3d20 7b27 6368 6174 5f69  yload = {'chat_i
+00013470: 6427 3a20 6368 6174 5f69 642c 2027 6d65  d': chat_id, 'me
+00013480: 7373 6167 655f 7468 7265 6164 5f69 6427  ssage_thread_id'
+00013490: 3a20 6d65 7373 6167 655f 7468 7265 6164  : message_thread
+000134a0: 5f69 647d 0d0a 2020 2020 7265 7475 726e  _id}..    return
+000134b0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000134c0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000134d0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+000134e0: 290d 0a0d 0a64 6566 2067 6574 5f66 6f72  )....def get_for
+000134f0: 756d 5f74 6f70 6963 5f69 636f 6e5f 7374  um_topic_icon_st
+00013500: 6963 6b65 7273 2874 6f6b 656e 293a 0d0a  ickers(token):..
+00013510: 2020 2020 6d65 7468 6f64 5f75 726c 203d      method_url =
+00013520: 2072 2767 6574 466f 7275 6d54 6f70 6963   r'getForumTopic
+00013530: 4963 6f6e 5374 6963 6b65 7273 270d 0a20  IconStickers'.. 
+00013540: 2020 2072 6574 7572 6e20 5f6d 616b 655f     return _make_
+00013550: 7265 7175 6573 7428 746f 6b65 6e2c 206d  request(token, m
+00013560: 6574 686f 645f 7572 6c29 0d0a 0d0a 6465  ethod_url)....de
+00013570: 6620 7374 6f70 5f70 6f6c 6c28 746f 6b65  f stop_poll(toke
+00013580: 6e2c 2063 6861 745f 6964 2c20 6d65 7373  n, chat_id, mess
+00013590: 6167 655f 6964 2c20 7265 706c 795f 6d61  age_id, reply_ma
+000135a0: 726b 7570 3d4e 6f6e 6529 3a0d 0a20 2020  rkup=None):..   
+000135b0: 206d 6574 686f 645f 7572 6c20 3d20 7227   method_url = r'
+000135c0: 7374 6f70 506f 6c6c 270d 0a20 2020 2070  stopPoll'..    p
+000135d0: 6179 6c6f 6164 203d 207b 2763 6861 745f  ayload = {'chat_
+000135e0: 6964 273a 2073 7472 2863 6861 745f 6964  id': str(chat_id
+000135f0: 292c 2027 6d65 7373 6167 655f 6964 273a  ), 'message_id':
+00013600: 206d 6573 7361 6765 5f69 647d 0d0a 2020   message_id}..  
+00013610: 2020 6966 2072 6570 6c79 5f6d 6172 6b75    if reply_marku
+00013620: 703a 0d0a 2020 2020 2020 2020 7061 796c  p:..        payl
+00013630: 6f61 645b 2772 6570 6c79 5f6d 6172 6b75  oad['reply_marku
+00013640: 7027 5d20 3d20 5f63 6f6e 7665 7274 5f6d  p'] = _convert_m
+00013650: 6172 6b75 7028 7265 706c 795f 6d61 726b  arkup(reply_mark
+00013660: 7570 290d 0a20 2020 2072 6574 7572 6e20  up)..    return 
+00013670: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00013680: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00013690: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+000136a0: 0d0a 0d0a 6465 6620 6564 6974 5f67 656e  ....def edit_gen
+000136b0: 6572 616c 5f66 6f72 756d 5f74 6f70 6963  eral_forum_topic
+000136c0: 2874 6f6b 656e 2c20 6368 6174 5f69 642c  (token, chat_id,
+000136d0: 206e 616d 6529 3a0d 0a20 2020 206d 6574   name):..    met
+000136e0: 686f 645f 7572 6c20 3d20 7227 6564 6974  hod_url = r'edit
+000136f0: 4765 6e65 7261 6c46 6f72 756d 546f 7069  GeneralForumTopi
+00013700: 6327 0d0a 2020 2020 7061 796c 6f61 6420  c'..    payload 
+00013710: 3d20 7b27 6368 6174 5f69 6427 3a20 6368  = {'chat_id': ch
+00013720: 6174 5f69 642c 2027 6e61 6d65 273a 206e  at_id, 'name': n
+00013730: 616d 657d 0d0a 2020 2020 7265 7475 726e  ame}..    return
+00013740: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+00013750: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+00013760: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+00013770: 290d 0a0d 0a64 6566 2063 6c6f 7365 5f67  )....def close_g
+00013780: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
+00013790: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+000137a0: 6429 3a0d 0a20 2020 206d 6574 686f 645f  d):..    method_
+000137b0: 7572 6c20 3d20 7227 636c 6f73 6547 656e  url = r'closeGen
+000137c0: 6572 616c 466f 7275 6d54 6f70 6963 270d  eralForumTopic'.
+000137d0: 0a20 2020 2070 6179 6c6f 6164 203d 207b  .    payload = {
+000137e0: 2763 6861 745f 6964 273a 2063 6861 745f  'chat_id': chat_
+000137f0: 6964 7d0d 0a20 2020 2072 6574 7572 6e20  id}..    return 
+00013800: 5f6d 616b 655f 7265 7175 6573 7428 746f  _make_request(to
+00013810: 6b65 6e2c 206d 6574 686f 645f 7572 6c2c  ken, method_url,
+00013820: 2070 6172 616d 733d 7061 796c 6f61 6429   params=payload)
+00013830: 0d0a 0d0a 6465 6620 7265 6f70 656e 5f67  ....def reopen_g
+00013840: 656e 6572 616c 5f66 6f72 756d 5f74 6f70  eneral_forum_top
+00013850: 6963 2874 6f6b 656e 2c20 6368 6174 5f69  ic(token, chat_i
+00013860: 6429 3a0d 0a20 2020 206d 6574 686f 645f  d):..    method_
+00013870: 7572 6c20 3d20 7227 7265 6f70 656e 4765  url = r'reopenGe
+00013880: 6e65 7261 6c46 6f72 756d 546f 7069 6327  neralForumTopic'
+00013890: 0d0a 2020 2020 7061 796c 6f61 6420 3d20  ..    payload = 
+000138a0: 7b27 6368 6174 5f69 6427 3a20 6368 6174  {'chat_id': chat
+000138b0: 5f69 647d 0d0a 2020 2020 7265 7475 726e  _id}..    return
+000138c0: 205f 6d61 6b65 5f72 6571 7565 7374 2874   _make_request(t
+000138d0: 6f6b 656e 2c20 6d65 7468 6f64 5f75 726c  oken, method_url
+000138e0: 2c20 7061 7261 6d73 3d70 6179 6c6f 6164  , params=payload
+000138f0: 290d 0a0d 0a64 6566 2068 6964 655f 6765  )....def hide_ge
+00013900: 6e65 7261 6c5f 666f 7275 6d5f 746f 7069  neral_forum_topi
+00013910: 6328 746f 6b65 6e2c 2063 6861 745f 6964  c(token, chat_id
+00013920: 293a 0d0a 2020 2020 6d65 7468 6f64 5f75  ):..    method_u
+00013930: 726c 203d 2072 2768 6964 6547 656e 6572  rl = r'hideGener
+00013940: 616c 466f 7275 6d54 6f70 6963 270d 0a20  alForumTopic'.. 
+00013950: 2020 2070 6179 6c6f 6164 203d 207b 2763     payload = {'c
+00013960: 6861 745f 6964 273a 2063 6861 745f 6964  hat_id': chat_id
+00013970: 7d0d 0a20 2020 2072 6574 7572 6e20 5f6d  }..    return _m
+00013980: 616b 655f 7265 7175 6573 7428 746f 6b65  ake_request(toke
+00013990: 6e2c 206d 6574 686f 645f 7572 6c2c 2070  n, method_url, p
+000139a0: 6172 616d 733d 7061 796c 6f61 6429 0d0a  arams=payload)..
+000139b0: 0d0a 6465 6620 756e 6869 6465 5f67 656e  ..def unhide_gen
+000139c0: 6572 616c 5f66 6f72 756d 5f74 6f70 6963  eral_forum_topic
+000139d0: 2874 6f6b 656e 2c20 6368 6174 5f69 6429  (token, chat_id)
+000139e0: 3a0d 0a20 2020 206d 6574 686f 645f 7572  :..    method_ur
+000139f0: 6c20 3d20 7227 756e 6869 6465 4765 6e65  l = r'unhideGene
+00013a00: 7261 6c46 6f72 756d 546f 7069 6327 0d0a  ralForumTopic'..
+00013a10: 2020 2020 7061 796c 6f61 6420 3d20 7b27      payload = {'
+00013a20: 6368 6174 5f69 6427 3a20 6368 6174 5f69  chat_id': chat_i
+00013a30: 647d 0d0a 2020 2020 7265 7475 726e 205f  d}..    return _
+00013a40: 6d61 6b65 5f72 6571 7565 7374 2874 6f6b  make_request(tok
+00013a50: 656e 2c20 6d65 7468 6f64 5f75 726c 2c20  en, method_url, 
+00013a60: 7061 7261 6d73 3d70 6179 6c6f 6164 290d  params=payload).
+00013a70: 0a0d 0a0d 0a64 6566 205f 636f 6e76 6572  .....def _conver
+00013a80: 745f 6c69 7374 5f6a 736f 6e5f 7365 7269  t_list_json_seri
+00013a90: 616c 697a 6162 6c65 2872 6573 756c 7473  alizable(results
+00013aa0: 293a 0d0a 2020 2020 7265 7420 3d20 2727  ):..    ret = ''
+00013ab0: 0d0a 2020 2020 666f 7220 7220 696e 2072  ..    for r in r
+00013ac0: 6573 756c 7473 3a0d 0a20 2020 2020 2020  esults:..       
+00013ad0: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
+00013ae0: 2c20 7479 7065 732e 4a73 6f6e 5365 7269  , types.JsonSeri
+00013af0: 616c 697a 6162 6c65 293a 0d0a 2020 2020  alizable):..    
+00013b00: 2020 2020 2020 2020 7265 7420 3d20 7265          ret = re
+00013b10: 7420 2b20 722e 746f 5f6a 736f 6e28 2920  t + r.to_json() 
+00013b20: 2b20 272c 270d 0a20 2020 2069 6620 6c65  + ','..    if le
+00013b30: 6e28 7265 7429 203e 2030 3a0d 0a20 2020  n(ret) > 0:..   
+00013b40: 2020 2020 2072 6574 203d 2072 6574 5b3a       ret = ret[:
+00013b50: 2d31 5d0d 0a20 2020 2072 6574 7572 6e20  -1]..    return 
+00013b60: 275b 2720 2b20 7265 7420 2b20 275d 270d  '[' + ret + ']'.
+00013b70: 0a0d 0a0d 0a64 6566 205f 636f 6e76 6572  .....def _conver
+00013b80: 745f 6d61 726b 7570 286d 6172 6b75 7029  t_markup(markup)
+00013b90: 3a0d 0a20 2020 2069 6620 6973 696e 7374  :..    if isinst
+00013ba0: 616e 6365 286d 6172 6b75 702c 2074 7970  ance(markup, typ
+00013bb0: 6573 2e4a 736f 6e53 6572 6961 6c69 7a61  es.JsonSerializa
+00013bc0: 626c 6529 3a0d 0a20 2020 2020 2020 2072  ble):..        r
+00013bd0: 6574 7572 6e20 6d61 726b 7570 2e74 6f5f  eturn markup.to_
+00013be0: 6a73 6f6e 2829 0d0a 2020 2020 7265 7475  json()..    retu
+00013bf0: 726e 206d 6172 6b75 700d 0a0d 0a0d 0a64  rn markup......d
+00013c00: 6566 205f 636f 6e76 6572 745f 656e 7469  ef _convert_enti
+00013c10: 7465 7328 656e 7469 7465 7329 3a0d 0a20  tes(entites):.. 
+00013c20: 2020 2069 6620 656e 7469 7465 7320 6973     if entites is
+00013c30: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00013c40: 7265 7475 726e 204e 6f6e 650d 0a20 2020  return None..   
+00013c50: 2065 6c69 6620 6c65 6e28 656e 7469 7465   elif len(entite
+00013c60: 7329 203d 3d20 303a 0d0a 2020 2020 2020  s) == 0:..      
+00013c70: 2020 7265 7475 726e 205b 5d0d 0a20 2020    return []..   
+00013c80: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00013c90: 2865 6e74 6974 6573 5b30 5d2c 2074 7970  (entites[0], typ
+00013ca0: 6573 2e4a 736f 6e53 6572 6961 6c69 7a61  es.JsonSerializa
+00013cb0: 626c 6529 3a0d 0a20 2020 2020 2020 2072  ble):..        r
+00013cc0: 6574 7572 6e20 5b65 6e74 6974 792e 746f  eturn [entity.to
+00013cd0: 5f6a 736f 6e28 2920 666f 7220 656e 7469  _json() for enti
+00013ce0: 7479 2069 6e20 656e 7469 7465 735d 0d0a  ty in entites]..
+00013cf0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00013d00: 2020 2072 6574 7572 6e20 656e 7469 7465     return entite
+00013d10: 730d 0a0d 0a0d 0a64 6566 205f 636f 6e76  s......def _conv
+00013d20: 6572 745f 706f 6c6c 5f6f 7074 696f 6e73  ert_poll_options
+00013d30: 2870 6f6c 6c5f 6f70 7469 6f6e 7329 3a0d  (poll_options):.
+00013d40: 0a20 2020 2069 6620 706f 6c6c 5f6f 7074  .    if poll_opt
+00013d50: 696f 6e73 2069 7320 4e6f 6e65 3a0d 0a20  ions is None:.. 
+00013d60: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00013d70: 6e65 0d0a 2020 2020 656c 6966 206c 656e  ne..    elif len
+00013d80: 2870 6f6c 6c5f 6f70 7469 6f6e 7329 203d  (poll_options) =
+00013d90: 3d20 303a 0d0a 2020 2020 2020 2020 7265  = 0:..        re
+00013da0: 7475 726e 205b 5d0d 0a20 2020 2065 6c69  turn []..    eli
+00013db0: 6620 6973 696e 7374 616e 6365 2870 6f6c  f isinstance(pol
+00013dc0: 6c5f 6f70 7469 6f6e 735b 305d 2c20 7374  l_options[0], st
+00013dd0: 7229 3a0d 0a20 2020 2020 2020 2023 2043  r):..        # C
+00013de0: 6f6d 7061 7469 6269 6c69 7479 206d 6f64  ompatibility mod
+00013df0: 6520 7769 7468 2070 7265 7669 6f75 7320  e with previous 
+00013e00: 6275 6720 7768 656e 206f 6e6c 7920 6c69  bug when only li
+00013e10: 7374 206f 6620 7374 7269 6e67 2077 6173  st of string was
+00013e20: 2061 6363 6570 7465 6420 6173 2070 6f6c   accepted as pol
+00013e30: 6c5f 6f70 7469 6f6e 730d 0a20 2020 2020  l_options..     
+00013e40: 2020 2072 6574 7572 6e20 706f 6c6c 5f6f     return poll_o
+00013e50: 7074 696f 6e73 0d0a 2020 2020 656c 6966  ptions..    elif
+00013e60: 2069 7369 6e73 7461 6e63 6528 706f 6c6c   isinstance(poll
+00013e70: 5f6f 7074 696f 6e73 5b30 5d2c 2074 7970  _options[0], typ
+00013e80: 6573 2e50 6f6c 6c4f 7074 696f 6e29 3a0d  es.PollOption):.
+00013e90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013ea0: 5b6f 7074 696f 6e2e 7465 7874 2066 6f72  [option.text for
+00013eb0: 206f 7074 696f 6e20 696e 2070 6f6c 6c5f   option in poll_
+00013ec0: 6f70 7469 6f6e 735d 0d0a 2020 2020 656c  options]..    el
+00013ed0: 7365 3a0d 0a20 2020 2020 2020 2072 6574  se:..        ret
+00013ee0: 7572 6e20 706f 6c6c 5f6f 7074 696f 6e73  urn poll_options
+00013ef0: 0d0a 0d0a 0d0a 6465 6620 636f 6e76 6572  ......def conver
+00013f00: 745f 696e 7075 745f 6d65 6469 6128 6d65  t_input_media(me
+00013f10: 6469 6129 3a0d 0a20 2020 2069 6620 6973  dia):..    if is
+00013f20: 696e 7374 616e 6365 286d 6564 6961 2c20  instance(media, 
+00013f30: 7479 7065 732e 496e 7075 744d 6564 6961  types.InputMedia
+00013f40: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
+00013f50: 726e 206d 6564 6961 2e63 6f6e 7665 7274  rn media.convert
+00013f60: 5f69 6e70 7574 5f6d 6564 6961 2829 0d0a  _input_media()..
+00013f70: 2020 2020 7265 7475 726e 204e 6f6e 652c      return None,
+00013f80: 204e 6f6e 650d 0a0d 0a0d 0a64 6566 2063   None......def c
+00013f90: 6f6e 7665 7274 5f69 6e70 7574 5f6d 6564  onvert_input_med
+00013fa0: 6961 5f61 7272 6179 2861 7272 6179 293a  ia_array(array):
+00013fb0: 0d0a 2020 2020 6d65 6469 6120 3d20 5b5d  ..    media = []
+00013fc0: 0d0a 2020 2020 6669 6c65 7320 3d20 7b7d  ..    files = {}
+00013fd0: 0d0a 2020 2020 666f 7220 696e 7075 745f  ..    for input_
+00013fe0: 6d65 6469 6120 696e 2061 7272 6179 3a0d  media in array:.
+00013ff0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00014000: 7374 616e 6365 2869 6e70 7574 5f6d 6564  stance(input_med
+00014010: 6961 2c20 7479 7065 732e 496e 7075 744d  ia, types.InputM
+00014020: 6564 6961 293a 0d0a 2020 2020 2020 2020  edia):..        
+00014030: 2020 2020 6d65 6469 615f 6469 6374 203d      media_dict =
+00014040: 2069 6e70 7574 5f6d 6564 6961 2e74 6f5f   input_media.to_
+00014050: 6469 6374 2829 0d0a 2020 2020 2020 2020  dict()..        
+00014060: 2020 2020 6966 206d 6564 6961 5f64 6963      if media_dic
+00014070: 745b 276d 6564 6961 275d 2e73 7461 7274  t['media'].start
+00014080: 7377 6974 6828 2761 7474 6163 683a 2f2f  swith('attach://
+00014090: 2729 3a0d 0a20 2020 2020 2020 2020 2020  '):..           
+000140a0: 2020 2020 206b 6579 203d 206d 6564 6961       key = media
+000140b0: 5f64 6963 745b 276d 6564 6961 275d 2e72  _dict['media'].r
+000140c0: 6570 6c61 6365 2827 6174 7461 6368 3a2f  eplace('attach:/
+000140d0: 2f27 2c20 2727 290d 0a20 2020 2020 2020  /', '')..       
+000140e0: 2020 2020 2020 2020 2066 696c 6573 5b6b           files[k
+000140f0: 6579 5d20 3d20 696e 7075 745f 6d65 6469  ey] = input_medi
+00014100: 612e 6d65 6469 610d 0a20 2020 2020 2020  a.media..       
+00014110: 2020 2020 206d 6564 6961 2e61 7070 656e       media.appen
+00014120: 6428 6d65 6469 615f 6469 6374 290d 0a20  d(media_dict).. 
+00014130: 2020 2072 6574 7572 6e20 6a73 6f6e 2e64     return json.d
+00014140: 756d 7073 286d 6564 6961 292c 2066 696c  umps(media), fil
+00014150: 6573 0d0a 0d0a 0d0a 6465 6620 5f6e 6f5f  es......def _no_
+00014160: 656e 636f 6465 2866 756e 6329 3a0d 0a20  encode(func):.. 
+00014170: 2020 2064 6566 2077 7261 7070 6572 286b     def wrapper(k
+00014180: 6579 2c20 7661 6c29 3a0d 0a20 2020 2020  ey, val):..     
+00014190: 2020 2069 6620 6b65 7920 3d3d 2027 6669     if key == 'fi
+000141a0: 6c65 6e61 6d65 273a 0d0a 2020 2020 2020  lename':..      
+000141b0: 2020 2020 2020 7265 7475 726e 2075 277b        return u'{
+000141c0: 307d 3d7b 317d 272e 666f 726d 6174 286b  0}={1}'.format(k
+000141d0: 6579 2c20 7661 6c29 0d0a 2020 2020 2020  ey, val)..      
+000141e0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000141f0: 2020 2020 2072 6574 7572 6e20 6675 6e63       return func
+00014200: 286b 6579 2c20 7661 6c29 0d0a 0d0a 2020  (key, val)....  
+00014210: 2020 7265 7475 726e 2077 7261 7070 6572    return wrapper
+00014220: 0d0a 0d0a 0d0a 636c 6173 7320 4170 6945  ......class ApiE
+00014230: 7863 6570 7469 6f6e 2845 7863 6570 7469  xception(Excepti
+00014240: 6f6e 293a 0d0a 2020 2020 2222 220d 0a20  on):..    """.. 
+00014250: 2020 2054 6869 7320 636c 6173 7320 7265     This class re
+00014260: 7072 6573 656e 7473 2061 2062 6173 6520  presents a base 
+00014270: 4578 6365 7074 696f 6e20 7468 726f 776e  Exception thrown
+00014280: 2077 6865 6e20 6120 6361 6c6c 2074 6f20   when a call to 
+00014290: 7468 6520 5465 6c65 6772 616d 2041 5049  the Telegram API
+000142a0: 2066 6169 6c73 2e0d 0a20 2020 2049 6e20   fails...    In 
+000142b0: 6164 6469 7469 6f6e 2074 6f20 616e 2069  addition to an i
+000142c0: 6e66 6f72 6d61 7469 7665 206d 6573 7361  nformative messa
+000142d0: 6765 2c20 6974 2068 6173 2061 2060 6675  ge, it has a `fu
+000142e0: 6e63 7469 6f6e 5f6e 616d 6560 2061 6e64  nction_name` and
+000142f0: 2061 2060 7265 7375 6c74 6020 6174 7472   a `result` attr
+00014300: 6962 7574 652c 2077 6869 6368 2072 6573  ibute, which res
+00014310: 7065 6374 6976 656c 790d 0a20 2020 2063  pectively..    c
+00014320: 6f6e 7461 696e 2074 6865 206e 616d 6520  ontain the name 
+00014330: 6f66 2074 6865 2066 6169 6c65 6420 6675  of the failed fu
+00014340: 6e63 7469 6f6e 2061 6e64 2074 6865 2072  nction and the r
+00014350: 6574 7572 6e65 6420 7265 7375 6c74 2074  eturned result t
+00014360: 6861 7420 6d61 6465 2074 6865 2066 756e  hat made the fun
+00014370: 6374 696f 6e20 746f 2062 6520 636f 6e73  ction to be cons
+00014380: 6964 6572 6564 2020 6173 0d0a 2020 2020  idered  as..    
+00014390: 6661 696c 6564 2e0d 0a20 2020 2022 2222  failed...    """
+000143a0: 0d0a 0d0a 2020 2020 6465 6620 5f5f 696e  ....    def __in
+000143b0: 6974 5f5f 2873 656c 662c 206d 7367 2c20  it__(self, msg, 
+000143c0: 6675 6e63 7469 6f6e 5f6e 616d 652c 2072  function_name, r
+000143d0: 6573 756c 7429 3a0d 0a20 2020 2020 2020  esult):..       
+000143e0: 2073 7570 6572 2841 7069 4578 6365 7074   super(ApiExcept
+000143f0: 696f 6e2c 2073 656c 6629 2e5f 5f69 6e69  ion, self).__ini
+00014400: 745f 5f28 2241 2072 6571 7565 7374 2074  t__("A request t
+00014410: 6f20 7468 6520 5465 6c65 6772 616d 2041  o the Telegram A
+00014420: 5049 2077 6173 2075 6e73 7563 6365 7373  PI was unsuccess
+00014430: 6675 6c2e 207b 307d 222e 666f 726d 6174  ful. {0}".format
+00014440: 286d 7367 2929 0d0a 2020 2020 2020 2020  (msg))..        
+00014450: 7365 6c66 2e66 756e 6374 696f 6e5f 6e61  self.function_na
+00014460: 6d65 203d 2066 756e 6374 696f 6e5f 6e61  me = function_na
+00014470: 6d65 0d0a 2020 2020 2020 2020 7365 6c66  me..        self
+00014480: 2e72 6573 756c 7420 3d20 7265 7375 6c74  .result = result
+00014490: 0d0a 0d0a 0d0a 636c 6173 7320 4170 6948  ......class ApiH
+000144a0: 5454 5045 7863 6570 7469 6f6e 2841 7069  TTPException(Api
+000144b0: 4578 6365 7074 696f 6e29 3a0d 0a20 2020  Exception):..   
+000144c0: 2022 2222 0d0a 2020 2020 5468 6973 2063   """..    This c
+000144d0: 6c61 7373 2072 6570 7265 7365 6e74 7320  lass represents 
+000144e0: 616e 2045 7863 6570 7469 6f6e 2074 6872  an Exception thr
+000144f0: 6f77 6e20 7768 656e 2061 2063 616c 6c20  own when a call 
+00014500: 746f 2074 6865 200d 0a20 2020 2054 656c  to the ..    Tel
+00014510: 6567 7261 6d20 4150 4920 7365 7276 6572  egram API server
+00014520: 2072 6574 7572 6e73 2048 5454 5020 636f   returns HTTP co
+00014530: 6465 2074 6861 7420 6973 206e 6f74 2032  de that is not 2
+00014540: 3030 2e0d 0a20 2020 2022 2222 0d0a 2020  00...    """..  
+00014550: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00014560: 656c 662c 2066 756e 6374 696f 6e5f 6e61  elf, function_na
+00014570: 6d65 2c20 7265 7375 6c74 293a 0d0a 2020  me, result):..  
+00014580: 2020 2020 2020 7375 7065 7228 4170 6948        super(ApiH
+00014590: 5454 5045 7863 6570 7469 6f6e 2c20 7365  TTPException, se
+000145a0: 6c66 292e 5f5f 696e 6974 5f5f 280d 0a20  lf).__init__(.. 
+000145b0: 2020 2020 2020 2020 2020 2022 5468 6520             "The 
+000145c0: 7365 7276 6572 2072 6574 7572 6e65 6420  server returned 
+000145d0: 4854 5450 207b 307d 207b 317d 2e20 5265  HTTP {0} {1}. Re
+000145e0: 7370 6f6e 7365 2062 6f64 793a 5c6e 5b7b  sponse body:\n[{
+000145f0: 327d 5d22 205c 0d0a 2020 2020 2020 2020  2}]" \..        
+00014600: 2020 2020 2e66 6f72 6d61 7428 7265 7375      .format(resu
+00014610: 6c74 2e73 7461 7475 735f 636f 6465 2c20  lt.status_code, 
+00014620: 7265 7375 6c74 2e72 6561 736f 6e2c 2072  result.reason, r
+00014630: 6573 756c 742e 7465 7874 2e65 6e63 6f64  esult.text.encod
+00014640: 6528 2775 7466 3827 2929 2c0d 0a20 2020  e('utf8')),..   
+00014650: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+00014660: 6e5f 6e61 6d65 2c0d 0a20 2020 2020 2020  n_name,..       
+00014670: 2020 2020 2072 6573 756c 7429 0d0a 0d0a       result)....
+00014680: 0d0a 636c 6173 7320 4170 6949 6e76 616c  ..class ApiInval
+00014690: 6964 4a53 4f4e 4578 6365 7074 696f 6e28  idJSONException(
+000146a0: 4170 6945 7863 6570 7469 6f6e 293a 0d0a  ApiException):..
+000146b0: 2020 2020 2222 220d 0a20 2020 2054 6869      """..    Thi
+000146c0: 7320 636c 6173 7320 7265 7072 6573 656e  s class represen
+000146d0: 7473 2061 6e20 4578 6365 7074 696f 6e20  ts an Exception 
+000146e0: 7468 726f 776e 2077 6865 6e20 6120 6361  thrown when a ca
+000146f0: 6c6c 2074 6f20 7468 6520 0d0a 2020 2020  ll to the ..    
+00014700: 5465 6c65 6772 616d 2041 5049 2073 6572  Telegram API ser
+00014710: 7665 7220 7265 7475 726e 7320 696e 7661  ver returns inva
+00014720: 6c69 6420 6a73 6f6e 2e0d 0a20 2020 2022  lid json...    "
+00014730: 2222 0d0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00014740: 6974 5f5f 2873 656c 662c 2066 756e 6374  it__(self, funct
+00014750: 696f 6e5f 6e61 6d65 2c20 7265 7375 6c74  ion_name, result
+00014760: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
+00014770: 7228 4170 6949 6e76 616c 6964 4a53 4f4e  r(ApiInvalidJSON
+00014780: 4578 6365 7074 696f 6e2c 2073 656c 6629  Exception, self)
+00014790: 2e5f 5f69 6e69 745f 5f28 0d0a 2020 2020  .__init__(..    
+000147a0: 2020 2020 2020 2020 2254 6865 2073 6572          "The ser
+000147b0: 7665 7220 7265 7475 726e 6564 2061 6e20  ver returned an 
+000147c0: 696e 7661 6c69 6420 4a53 4f4e 2072 6573  invalid JSON res
+000147d0: 706f 6e73 652e 2052 6573 706f 6e73 6520  ponse. Response 
+000147e0: 626f 6479 3a5c 6e5b 7b30 7d5d 2220 5c0d  body:\n[{0}]" \.
+000147f0: 0a20 2020 2020 2020 2020 2020 202e 666f  .            .fo
+00014800: 726d 6174 2872 6573 756c 742e 7465 7874  rmat(result.text
+00014810: 2e65 6e63 6f64 6528 2775 7466 3827 2929  .encode('utf8'))
+00014820: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
+00014830: 756e 6374 696f 6e5f 6e61 6d65 2c0d 0a20  unction_name,.. 
+00014840: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+00014850: 7429 0d0a 0d0a 0d0a 636c 6173 7320 4170  t)......class Ap
+00014860: 6954 656c 6567 7261 6d45 7863 6570 7469  iTelegramExcepti
+00014870: 6f6e 2841 7069 4578 6365 7074 696f 6e29  on(ApiException)
+00014880: 3a0d 0a20 2020 2022 2222 0d0a 2020 2020  :..    """..    
+00014890: 5468 6973 2063 6c61 7373 2072 6570 7265  This class repre
+000148a0: 7365 6e74 7320 616e 2045 7863 6570 7469  sents an Excepti
+000148b0: 6f6e 2074 6872 6f77 6e20 7768 656e 2061  on thrown when a
+000148c0: 2054 656c 6567 7261 6d20 4150 4920 7265   Telegram API re
+000148d0: 7475 726e 7320 6572 726f 7220 636f 6465  turns error code
+000148e0: 2e0d 0a20 2020 2022 2222 0d0a 2020 2020  ...    """..    
+000148f0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00014900: 662c 2066 756e 6374 696f 6e5f 6e61 6d65  f, function_name
+00014910: 2c20 7265 7375 6c74 2c20 7265 7375 6c74  , result, result
+00014920: 5f6a 736f 6e29 3a0d 0a20 2020 2020 2020  _json):..       
+00014930: 2073 7570 6572 2841 7069 5465 6c65 6772   super(ApiTelegr
+00014940: 616d 4578 6365 7074 696f 6e2c 2073 656c  amException, sel
+00014950: 6629 2e5f 5f69 6e69 745f 5f28 0d0a 2020  f).__init__(..  
+00014960: 2020 2020 2020 2020 2020 2245 7272 6f72            "Error
+00014970: 2063 6f64 653a 207b 307d 2e20 4465 7363   code: {0}. Desc
+00014980: 7269 7074 696f 6e3a 207b 317d 2220 5c0d  ription: {1}" \.
+00014990: 0a20 2020 2020 2020 2020 2020 202e 666f  .            .fo
+000149a0: 726d 6174 2872 6573 756c 745f 6a73 6f6e  rmat(result_json
+000149b0: 5b27 6572 726f 725f 636f 6465 275d 2c20  ['error_code'], 
+000149c0: 7265 7375 6c74 5f6a 736f 6e5b 2764 6573  result_json['des
+000149d0: 6372 6970 7469 6f6e 275d 292c 0d0a 2020  cription']),..  
+000149e0: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
+000149f0: 6f6e 5f6e 616d 652c 0d0a 2020 2020 2020  on_name,..      
+00014a00: 2020 2020 2020 7265 7375 6c74 290d 0a20        result).. 
+00014a10: 2020 2020 2020 2073 656c 662e 7265 7375         self.resu
+00014a20: 6c74 5f6a 736f 6e20 3d20 7265 7375 6c74  lt_json = result
+00014a30: 5f6a 736f 6e0d 0a20 2020 2020 2020 2073  _json..        s
+00014a40: 656c 662e 6572 726f 725f 636f 6465 203d  elf.error_code =
+00014a50: 2072 6573 756c 745f 6a73 6f6e 5b27 6572   result_json['er
+00014a60: 726f 725f 636f 6465 275d 0d0a 2020 2020  ror_code']..    
+00014a70: 2020 2020 7365 6c66 2e64 6573 6372 6970      self.descrip
+00014a80: 7469 6f6e 203d 2072 6573 756c 745f 6a73  tion = result_js
+00014a90: 6f6e 5b27 6465 7363 7269 7074 696f 6e27  on['description'
+00014aa0: 5d0d 0a                                  ]..
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/base_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/base_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/memory_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/memory_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/pickle_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/pickle_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/asyncio_storage/redis_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/asyncio_storage/redis_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/callback_data.py` & `pyTelegramBotAPI-4.9.0/telebot/callback_data.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/custom_filters.py` & `pyTelegramBotAPI-4.9.0/telebot/custom_filters.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/ext/aio/webhooks.py` & `pyTelegramBotAPI-4.9.0/telebot/ext/sync/webhooks.py`

 * *Files 24% similar despite different names*

```diff
@@ -1,122 +1,116 @@
-"""
-This file is used by AsyncTeleBot.run_webhooks() function.
-
-Fastapi and starlette(0.20.2+) libraries are required to run this script.
-"""
-
-# modules required for running this script
-fastapi_installed = True
-try:
-    import fastapi
-    from fastapi.responses import JSONResponse
-    from fastapi.requests import Request
-    from uvicorn import Server, Config
-except ImportError:
-    fastapi_installed = False
-
-import asyncio
-
-
-from telebot.types import Update
-
-
-from typing import Optional
-
-
-class AsyncWebhookListener:
-    def __init__(self, bot, 
-                secret_token: str, host: Optional[str]="127.0.0.1", 
-                port: Optional[int]=443,
-                ssl_context: Optional[tuple]=None,
-                url_path: Optional[str]=None,
-                ) -> None:
-        """
-        Aynchronous implementation of webhook listener
-        for asynchronous version of telebot.
-        Not supposed to be used manually by user.
-        Use AsyncTeleBot.run_webhooks() instead.
-
-        :param bot: AsyncTeleBot instance.
-        :type bot: telebot.async_telebot.AsyncTeleBot
-
-        :param secret_token: Telegram secret token
-        :type secret_token: str
-
-        :param host: Webhook host
-        :type host: str
-
-        :param port: Webhook port
-        :type port: int
-
-        :param ssl_context: SSL context
-        :type ssl_context: tuple
-
-        :param url_path: Webhook url path
-        :type url_path: str
-
-        :raises ImportError: If FastAPI or uvicorn is not installed.
-        :raises ImportError: If Starlette version is too old.
-
-        :return: None
-        """
-        self._check_dependencies()
-
-        self.app = fastapi.FastAPI()
-        self._secret_token = secret_token
-        self._bot = bot
-        self._port = port
-        self._host = host
-        self._ssl_context = ssl_context
-        self._url_path = url_path
-        self._prepare_endpoint_urls()
-
-
-    def _check_dependencies(self):
-        if not fastapi_installed:
-            raise ImportError('Fastapi or uvicorn is not installed. Please install it via pip.')
-            
-        import starlette
-        if starlette.__version__ < '0.20.2':
-            raise ImportError('Starlette version is too old. Please upgrade it: `pip3 install starlette -U`')
-        return
-
-    
-    def _prepare_endpoint_urls(self):
-        self.app.add_api_route(endpoint=self.process_update,path= self._url_path, methods=["POST"])
-
-
-    async def process_update(self, request: Request, update: dict):
-        """
-        Processes updates.
-
-        :meta private:
-        """
-        # header containsX-Telegram-Bot-Api-Secret-Token
-        if request.headers.get('X-Telegram-Bot-Api-Secret-Token') != self._secret_token:
-            # secret token didn't match
-            return JSONResponse(status_code=403, content={"error": "Forbidden"})
-        if request.headers.get('content-type') == 'application/json':
-            json_string = update
-            asyncio.create_task(self._bot.process_new_updates([Update.de_json(json_string)]))
-            return JSONResponse('', status_code=200)
-
-        return JSONResponse(status_code=403, content={"error": "Forbidden"})
-
-
-    async def run_app(self):
-        """
-        Run app with the given parameters to init.
-        Not supposed to be used manually by user.
-
-        :return: None
-        """
-
-        config = Config(app=self.app,
-            host=self._host,
-            port=self._port,
-            ssl_certfile=self._ssl_context[0],
-            ssl_keyfile=self._ssl_context[1]
-        )
-        server = Server(config)
-        await server.serve()
-        await self._bot.close_session()
+"""
+This file is used by TeleBot.run_webhooks() function.
+Fastapi is required to run this script.
+"""
+
+# modules required for running this script
+fastapi_installed = True
+
+try:
+    import fastapi
+    from fastapi.responses import JSONResponse
+    from fastapi.requests import Request
+    import uvicorn
+except ImportError:
+    fastapi_installed = False
+
+from telebot.types import Update
+
+from typing import Optional
+
+
+class SyncWebhookListener:
+    def __init__(self, bot, 
+                secret_token: str,
+                host: Optional[str]="127.0.0.1", 
+                port: Optional[int]=443,
+                ssl_context: Optional[tuple]=None,
+                url_path: Optional[str]=None,
+                ) -> None:
+        """
+        Synchronous implementation of webhook listener
+        for synchronous version of telebot.
+        Not supposed to be used manually by user.
+        Use TeleBot.run_webhooks() instead.
+
+        :param bot: TeleBot instance.
+        :type bot: telebot.TeleBot
+
+        :param secret_token: Telegram secret token
+        :type secret_token: str
+
+        :param host: Webhook host
+        :type host: str
+
+        :param port: Webhook port
+        :type port: int
+
+        :param ssl_context: SSL context
+        :type ssl_context: tuple
+
+        :param url_path: Webhook url path
+        :type url_path: str
+
+        :raises ImportError: If FastAPI or uvicorn is not installed.
+        :raises ImportError: If Starlette version is too old.
+
+        :return: None
+        """
+        self._check_dependencies()
+
+        self.app = fastapi.FastAPI()
+        self._secret_token = secret_token
+        self._bot = bot
+        self._port = port
+        self._host = host
+        self._ssl_context = ssl_context
+        self._url_path = url_path
+        self._prepare_endpoint_urls()
+
+
+    @staticmethod
+    def _check_dependencies():
+        if not fastapi_installed:
+            raise ImportError('Fastapi or uvicorn is not installed. Please install it via pip.')
+            
+        import starlette
+        if starlette.__version__ < '0.20.2':
+            raise ImportError('Starlette version is too old. Please upgrade it: `pip3 install starlette -U`')
+        return
+
+    
+    def _prepare_endpoint_urls(self):
+        self.app.add_api_route(endpoint=self.process_update,path= self._url_path, methods=["POST"])
+
+
+    def process_update(self, request: Request, update: dict):
+        """
+        Processes updates.
+
+        :meta private:
+        """
+        # header containsX-Telegram-Bot-Api-Secret-Token
+        if request.headers.get('X-Telegram-Bot-Api-Secret-Token') != self._secret_token:
+            # secret token didn't match
+            return JSONResponse(status_code=403, content={"error": "Forbidden"})
+        if request.headers.get('content-type') == 'application/json':
+            self._bot.process_new_updates([Update.de_json(update)])
+            return JSONResponse('', status_code=200)
+
+        return JSONResponse(status_code=403, content={"error": "Forbidden"})
+
+
+    def run_app(self):
+        """
+        Run app with the given parameters to init.
+        Not supposed to be used manually by user.
+
+        :return: None
+        """
+
+        uvicorn.run(app=self.app,
+            host=self._host,
+            port=self._port,
+            ssl_certfile=self._ssl_context[0],
+            ssl_keyfile=self._ssl_context[1]
+        )
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/formatting.py` & `pyTelegramBotAPI-4.9.0/telebot/formatting.py`

 * *Files 1% similar despite different names*

```diff
@@ -57,16 +57,16 @@
     :param content: The string of Markdown to escape.
     :type content: :obj:`str`
 
     :return: The escaped string.
     :rtype: :obj:`str`
     """
     
-    parse = re.sub(r"([_*\[\]()~`>\#\+\-=|\.!])", r"\\\1", content)
-    reparse = re.sub(r"\\\\([_*\[\]()~`>\#\+\-=|\.!])", r"\1", parse)
+    parse = re.sub(r"([_*\[\]()~`>\#\+\-=|\.!\{\}])", r"\\\1", content)
+    reparse = re.sub(r"\\\\([_*\[\]()~`>\#\+\-=|\.!\{\}])", r"\1", parse)
     return reparse 
 
 
 def mbold(content: str, escape: Optional[bool]=True) -> str:
     """
     Returns a Markdown-formatted bold string.
 
@@ -319,8 +319,8 @@
 
     :param url: The url of the image.
     :type url: :obj:`str`
     
     :return: The hidden url.
     :rtype: :obj:`str`
     """
-    return f'<a href="{url}">&#8288;</a>'
+    return f'<a href="{url}">&#8288;</a>'
```

### Comparing `pyTelegramBotAPI-4.8.0/telebot/storage/base_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/storage/base_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/storage/memory_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/storage/memory_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/storage/pickle_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/storage/pickle_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/storage/redis_storage.py` & `pyTelegramBotAPI-4.9.0/telebot/storage/redis_storage.py`

 * *Files identical despite different names*

### Comparing `pyTelegramBotAPI-4.8.0/telebot/util.py` & `pyTelegramBotAPI-4.9.0/telebot/util.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,715 +1,718 @@
-# -*- coding: utf-8 -*-
-import random
-import re
-import string
-import threading
-import traceback
-from typing import Any, Callable, List, Dict, Optional, Union
-import hmac
-from hashlib import sha256
-from urllib.parse import parse_qsl
-
-# noinspection PyPep8Naming
-import queue as Queue
-import logging
-
-from telebot import types
-
-try:
-    import ujson as json
-except ImportError:
-    import json
-
-try:
-    # noinspection PyPackageRequirements
-    from PIL import Image
-    from io import BytesIO
-
-    pil_imported = True
-except:
-    pil_imported = False
-
-MAX_MESSAGE_LENGTH = 4096
-
-logger = logging.getLogger('TeleBot')
-
-thread_local = threading.local()
-
-#: Contains all media content types.
-content_type_media = [
-    'text', 'audio', 'document', 'animation', 'game', 'photo', 'sticker', 'video', 'video_note', 'voice', 'contact',
-    'location', 'venue', 'dice', 'invoice', 'successful_payment', 'connected_website', 'poll', 'passport_data',
-    'web_app_data',
-]
-
-#: Contains all service content types such as `User joined the group`.
-content_type_service = [
-    'new_chat_members', 'left_chat_member', 'new_chat_title', 'new_chat_photo', 'delete_chat_photo', 'group_chat_created',
-    'supergroup_chat_created', 'channel_chat_created', 'migrate_to_chat_id', 'migrate_from_chat_id', 'pinned_message',
-    'proximity_alert_triggered', 'video_chat_scheduled', 'video_chat_started', 'video_chat_ended',
-    'video_chat_participants_invited', 'message_auto_delete_timer_changed', 'forum_topic_created', 'forum_topic_closed',
-    'forum_topic_reopened',
-]
-
-#: All update types, should be used for allowed_updates parameter in polling.
-update_types = [
-    "message", "edited_message", "channel_post", "edited_channel_post", "inline_query", "chosen_inline_result",
-    "callback_query", "shipping_query", "pre_checkout_query", "poll", "poll_answer", "my_chat_member", "chat_member",
-    "chat_join_request",
-]
-
-
-class WorkerThread(threading.Thread):
-    """
-    :meta private:
-    """
-    count = 0
-
-    def __init__(self, exception_callback=None, queue=None, name=None):
-        if not name:
-            name = "WorkerThread{0}".format(self.__class__.count + 1)
-            self.__class__.count += 1
-        if not queue:
-            queue = Queue.Queue()
-
-        threading.Thread.__init__(self, name=name)
-        self.queue = queue
-        self.daemon = True
-
-        self.received_task_event = threading.Event()
-        self.done_event = threading.Event()
-        self.exception_event = threading.Event()
-        self.continue_event = threading.Event()
-
-        self.exception_callback = exception_callback
-        self.exception_info = None
-        self._running = True
-        self.start()
-
-    def run(self):
-        while self._running:
-            try:
-                task, args, kwargs = self.queue.get(block=True, timeout=.5)
-                self.continue_event.clear()
-                self.received_task_event.clear()
-                self.done_event.clear()
-                self.exception_event.clear()
-                logger.debug("Received task")
-                self.received_task_event.set()
-
-                task(*args, **kwargs)
-                logger.debug("Task complete")
-                self.done_event.set()
-            except Queue.Empty:
-                pass
-            except Exception as e:
-                logger.debug(type(e).__name__ + " occurred, args=" + str(e.args) + "\n" + traceback.format_exc())
-                self.exception_info = e
-                self.exception_event.set()
-                if self.exception_callback:
-                    self.exception_callback(self, self.exception_info)
-                self.continue_event.wait()
-
-    def put(self, task, *args, **kwargs):
-        self.queue.put((task, args, kwargs))
-
-    def raise_exceptions(self):
-        if self.exception_event.is_set():
-            raise self.exception_info
-
-    def clear_exceptions(self):
-        self.exception_event.clear()
-        self.continue_event.set()
-
-    def stop(self):
-        self._running = False
-
-
-class ThreadPool:
-    """
-    :meta private:
-    """
-    def __init__(self, telebot, num_threads=2):
-        self.telebot = telebot
-        self.tasks = Queue.Queue()
-        self.workers = [WorkerThread(self.on_exception, self.tasks) for _ in range(num_threads)]
-        self.num_threads = num_threads
-
-        self.exception_event = threading.Event()
-        self.exception_info = None
-
-    def put(self, func, *args, **kwargs):
-        self.tasks.put((func, args, kwargs))
-
-    def on_exception(self, worker_thread, exc_info):
-        if self.telebot.exception_handler is not None:
-            handled = self.telebot.exception_handler.handle(exc_info)
-        else:
-            handled = False
-        if not handled:
-            self.exception_info = exc_info
-            self.exception_event.set()
-        worker_thread.continue_event.set()
-
-    def raise_exceptions(self):
-        if self.exception_event.is_set():
-            raise self.exception_info
-
-    def clear_exceptions(self):
-        self.exception_event.clear()
-
-    def close(self):
-        for worker in self.workers:
-            worker.stop()
-        for worker in self.workers:
-            worker.join()
-
-
-class AsyncTask:
-    """
-    :meta private:
-    """
-    def __init__(self, target, *args, **kwargs):
-        self.target = target
-        self.args = args
-        self.kwargs = kwargs
-
-        self.done = False
-        self.thread = threading.Thread(target=self._run)
-        self.thread.start()
-
-    def _run(self):
-        try:
-            self.result = self.target(*self.args, **self.kwargs)
-        except Exception as e:
-            self.result = e
-        self.done = True
-
-    def wait(self):
-        if not self.done:
-            self.thread.join()
-        if isinstance(self.result, BaseException):
-            raise self.result
-        else:
-            return self.result
-
-
-class CustomRequestResponse():
-    """
-    :meta private:
-    """
-    def __init__(self, json_text, status_code = 200, reason = ""):
-        self.status_code = status_code
-        self.text = json_text
-        self.reason = reason
-
-    def json(self):
-        return json.loads(self.text)
-
-
-def async_dec():
-    """
-    :meta private:
-    """
-    def decorator(fn):
-        def wrapper(*args, **kwargs):
-            return AsyncTask(fn, *args, **kwargs)
-
-        return wrapper
-
-    return decorator
-
-
-def is_string(var) -> bool:
-    """
-    Returns True if the given object is a string.
-    """
-    return isinstance(var, str)
-
-
-def is_dict(var) -> bool:
-    """
-    Returns True if the given object is a dictionary.
-
-    :param var: object to be checked
-    :type var: :obj:`object`
-
-    :return: True if the given object is a dictionary.
-    :rtype: :obj:`bool`
-    """
-    return isinstance(var, dict)
-
-
-def is_bytes(var) -> bool:
-    """
-    Returns True if the given object is a bytes object.
-
-    :param var: object to be checked
-    :type var: :obj:`object`
-
-    :return: True if the given object is a bytes object.
-    :rtype: :obj:`bool`
-    """
-    return isinstance(var, bytes)
-
-
-def is_pil_image(var) -> bool:
-    """
-    Returns True if the given object is a PIL.Image.Image object.
-
-    :param var: object to be checked
-    :type var: :obj:`object`
-
-    :return: True if the given object is a PIL.Image.Image object.
-    :rtype: :obj:`bool`
-    """
-    return pil_imported and isinstance(var, Image.Image)
-
-
-def pil_image_to_file(image, extension='JPEG', quality='web_low'):
-    if pil_imported:
-        photoBuffer = BytesIO()
-        image.convert('RGB').save(photoBuffer, extension, quality=quality)
-        photoBuffer.seek(0)
-
-        return photoBuffer
-    else:
-        raise RuntimeError('PIL module is not imported')
-
-
-def is_command(text: str) -> bool:
-    r"""
-    Checks if `text` is a command. Telegram chat commands start with the '/' character.
-    
-    :param text: Text to check.
-    :type text: :obj:`str`
-
-    :return: True if `text` is a command, else False.
-    :rtype: :obj:`bool`
-    """
-    if text is None: return False
-    return text.startswith('/')
-
-
-def extract_command(text: str) -> Union[str, None]:
-    """
-    Extracts the command from `text` (minus the '/') if `text` is a command (see is_command).
-    If `text` is not a command, this function returns None.
-
-    .. code-block:: python3
-        :caption: Examples:
-        
-        extract_command('/help'): 'help'
-        extract_command('/help@BotName'): 'help'
-        extract_command('/search black eyed peas'): 'search'
-        extract_command('Good day to you'): None
-
-    :param text: String to extract the command from
-    :type text: :obj:`str`
-
-    :return: the command if `text` is a command (according to is_command), else None.
-    :rtype: :obj:`str` or :obj:`None`
-    """
-    if text is None: return None
-    return text.split()[0].split('@')[0][1:] if is_command(text) else None
-
-
-def extract_arguments(text: str) -> str or None:
-    """
-    Returns the argument after the command.
-    
-    .. code-block:: python3
-        :caption: Examples:
-
-        extract_arguments("/get name"): 'name'
-        extract_arguments("/get"): ''
-        extract_arguments("/get@botName name"): 'name'
-    
-    :param text: String to extract the arguments from a command
-    :type text: :obj:`str`
-
-    :return: the arguments if `text` is a command (according to is_command), else None.
-    :rtype: :obj:`str` or :obj:`None`
-    """
-    regexp = re.compile(r"/\w*(@\w*)*\s*([\s\S]*)", re.IGNORECASE)
-    result = regexp.match(text)
-    return result.group(2) if is_command(text) else None
-
-
-def split_string(text: str, chars_per_string: int) -> List[str]:
-    """
-    Splits one string into multiple strings, with a maximum amount of `chars_per_string` characters per string.
-    This is very useful for splitting one giant message into multiples.
-
-    :param text: The text to split
-    :type text: :obj:`str`
-
-    :param chars_per_string: The number of characters per line the text is split into.
-    :type chars_per_string: :obj:`int`
-
-    :return: The splitted text as a list of strings.
-    :rtype: :obj:`list` of :obj:`str`
-    """
-    return [text[i:i + chars_per_string] for i in range(0, len(text), chars_per_string)]
-
-
-def smart_split(text: str, chars_per_string: int=MAX_MESSAGE_LENGTH) -> List[str]:
-    r"""
-    Splits one string into multiple strings, with a maximum amount of `chars_per_string` characters per string.
-    This is very useful for splitting one giant message into multiples.
-    If `chars_per_string` > 4096: `chars_per_string` = 4096.
-    Splits by '\n', '. ' or ' ' in exactly this priority.
-
-    :param text: The text to split
-    :type text: :obj:`str`
-
-    :param chars_per_string: The number of maximum characters per part the text is split to.
-    :type chars_per_string: :obj:`int`
-
-    :return: The splitted text as a list of strings.
-    :rtype: :obj:`list` of :obj:`str`
-    """
-
-    def _text_before_last(substr: str) -> str:
-        return substr.join(part.split(substr)[:-1]) + substr
-
-    if chars_per_string > MAX_MESSAGE_LENGTH: chars_per_string = MAX_MESSAGE_LENGTH
-
-    parts = []
-    while True:
-        if len(text) < chars_per_string:
-            parts.append(text)
-            return parts
-
-        part = text[:chars_per_string]
-
-        if "\n" in part: part = _text_before_last("\n")
-        elif ". " in part: part = _text_before_last(". ")
-        elif " " in part: part = _text_before_last(" ")
-
-        parts.append(part)
-        text = text[len(part):]
-
-
-def escape(text: str) -> str:
-    """
-    Replaces the following chars in `text` ('&' with '&amp;', '<' with '&lt;' and '>' with '&gt;').
-
-    :param text: the text to escape
-    :return: the escaped text
-    """
-    chars = {"&": "&amp;", "<": "&lt;", ">": "&gt;"}
-    for old, new in chars.items(): text = text.replace(old, new)
-    return text
-
-
-def user_link(user: types.User, include_id: bool=False) -> str:
-    """
-    Returns an HTML user link. This is useful for reports.
-    Attention: Don't forget to set parse_mode to 'HTML'!
-
-
-    .. code-block:: python3
-        :caption: Example:
-
-        bot.send_message(your_user_id, user_link(message.from_user) + ' started the bot!', parse_mode='HTML')
-
-    .. note::
-        You can use formatting.* for all other formatting options(bold, italic, links, and etc.)
-        This method is kept for backward compatibility, and it is recommended to use formatting.* for
-        more options.
-
-    :param user: the user (not the user_id)
-    :type user: :obj:`telebot.types.User`
-
-    :param include_id: include the user_id
-    :type include_id: :obj:`bool`
-
-    :return: HTML user link
-    :rtype: :obj:`str`
-    """
-    name = escape(user.first_name)
-    return (f"<a href='tg://user?id={user.id}'>{name}</a>"
-        + (f" (<pre>{user.id}</pre>)" if include_id else ""))
-
-
-def quick_markup(values: Dict[str, Dict[str, Any]], row_width: int=2) -> types.InlineKeyboardMarkup:
-    """
-    Returns a reply markup from a dict in this format: {'text': kwargs}
-    This is useful to avoid always typing 'btn1 = InlineKeyboardButton(...)' 'btn2 = InlineKeyboardButton(...)' 
-    
-    Example:
-
-    .. code-block:: python3
-        :caption: Using quick_markup:
-
-        quick_markup({
-            'Twitter': {'url': 'https://twitter.com'},
-            'Facebook': {'url': 'https://facebook.com'},
-            'Back': {'callback_data': 'whatever'}
-        }, row_width=2): 
-        # returns an InlineKeyboardMarkup with two buttons in a row, one leading to Twitter, the other to facebook
-        # and a back button below
-
-        # kwargs can be: 
-        {
-            'url': None, 
-            'callback_data': None, 
-            'switch_inline_query': None,
-            'switch_inline_query_current_chat': None,
-            'callback_game': None,
-            'pay': None,
-            'login_url': None,
-            'web_app': None
-        }
-    
-    :param values: a dict containing all buttons to create in this format: {text: kwargs} {str:}
-    :type values: :obj:`dict`
-
-    :param row_width: int row width
-    :type row_width: :obj:`int`
-
-    :return: InlineKeyboardMarkup
-    :rtype: :obj:`types.InlineKeyboardMarkup`
-    """
-    markup = types.InlineKeyboardMarkup(row_width=row_width)
-    buttons = [
-        types.InlineKeyboardButton(text=text, **kwargs)
-        for text, kwargs in values.items()
-    ]
-    markup.add(*buttons)
-    return markup
-
-
-# CREDITS TO http://stackoverflow.com/questions/12317940#answer-12320352
-def or_set(self):
-    """
-    :meta private:
-    """
-    self._set()
-    self.changed()
-
-
-def or_clear(self):
-    """
-    :meta private:
-    """
-    self._clear()
-    self.changed()
-
-
-def orify(e, changed_callback):
-    """
-    :meta private:
-    """
-    if not hasattr(e, "_set"):
-        e._set = e.set
-    if not hasattr(e, "_clear"):
-        e._clear = e.clear
-    e.changed = changed_callback
-    e.set = lambda: or_set(e)
-    e.clear = lambda: or_clear(e)
-
-
-def OrEvent(*events):
-    """
-    :meta private:
-    """
-    or_event = threading.Event()
-
-    def changed():
-        bools = [ev.is_set() for ev in events]
-        if any(bools):
-            or_event.set()
-        else:
-            or_event.clear()
-
-    def busy_wait():
-        while not or_event.is_set():
-            # noinspection PyProtectedMember
-            or_event._wait(3)
-
-    for e in events:
-        orify(e, changed)
-    or_event._wait = or_event.wait
-    or_event.wait = busy_wait
-    changed()
-    return or_event
-
-
-def per_thread(key, construct_value, reset=False):
-    """
-    :meta private:
-    """
-    if reset or not hasattr(thread_local, key):
-        value = construct_value()
-        setattr(thread_local, key, value)
-
-    return getattr(thread_local, key)
-
-
-def chunks(lst, n):
-    """Yield successive n-sized chunks from lst."""
-    # https://stackoverflow.com/a/312464/9935473
-    for i in range(0, len(lst), n):
-        yield lst[i:i + n]
-
-
-def generate_random_token() -> str:
-    """
-    Generates a random token consisting of letters and digits, 16 characters long.
-
-    :return: a random token
-    :rtype: :obj:`str`
-    """
-    return ''.join(random.sample(string.ascii_letters, 16))
-
-
-def deprecated(warn: bool=True, alternative: Optional[Callable]=None, deprecation_text=None):
-    """
-    Use this decorator to mark functions as deprecated.
-    When the function is used, an info (or warning if `warn` is True) is logged.
-
-    :meta private:
-    
-    :param warn: If True a warning is logged else an info
-    :type warn: :obj:`bool`
-
-    :param alternative: The new function to use instead
-    :type alternative: :obj:`Callable`
-
-    :param deprecation_text: Custom deprecation text
-    :type deprecation_text: :obj:`str`
-
-    :return: The decorated function
-    """
-    def decorator(function):
-        def wrapper(*args, **kwargs):
-            info = f"`{function.__name__}` is deprecated."
-            if alternative:
-                info += f" Use `{alternative.__name__}` instead"
-            if deprecation_text:
-                info += " " + deprecation_text
-            if not warn:
-                logger.info(info)
-            else:
-                logger.warning(info)
-            return function(*args, **kwargs)
-        return wrapper
-    return decorator
-
-
-# Cloud helpers
-def webhook_google_functions(bot, request):
-    """
-    A webhook endpoint for Google Cloud Functions FaaS.
-    
-    :param bot: The bot instance
-    :type bot: :obj:`telebot.TeleBot` or :obj:`telebot.async_telebot.AsyncTeleBot`
-
-    :param request: The request object
-    :type request: :obj:`flask.Request`
-
-    :return: The response object
-    """
-    if request.is_json:
-        try:
-            request_json = request.get_json()
-            update = types.Update.de_json(request_json)
-            bot.process_new_updates([update])
-            return ''
-        except Exception as e:
-            print(e)
-            return 'Bot FAIL', 400
-    else:
-        return 'Bot ON'
-
-
-def antiflood(function: Callable, *args, **kwargs):
-    """
-    Use this function inside loops in order to avoid getting TooManyRequests error.
-    Example:
-    
-    .. code-block:: python3
-    
-        from telebot.util import antiflood
-        for chat_id in chat_id_list:
-        msg = antiflood(bot.send_message, chat_id, text)
-        
-    :param function: The function to call
-    :type function: :obj:`Callable`
-
-    :param args: The arguments to pass to the function
-    :type args: :obj:`tuple`
-
-    :param kwargs: The keyword arguments to pass to the function
-    :type kwargs: :obj:`dict`
-
-    :return: None
-    """
-    from telebot.apihelper import ApiTelegramException
-    from time import sleep
-
-    try:
-        return function(*args, **kwargs)
-    except ApiTelegramException as ex:
-        if ex.error_code == 429:
-            sleep(ex.result_json['parameters']['retry_after'])
-            return function(*args, **kwargs)
-        else:
-            raise
-    
-    
-def parse_web_app_data(token: str, raw_init_data: str):
-    """
-    Parses web app data.
-
-    :param token: The bot token
-    :type token: :obj:`str`
-
-    :param raw_init_data: The raw init data
-    :type raw_init_data: :obj:`str`
-
-    :return: The parsed init data
-    """
-    is_valid = validate_web_app_data(token, raw_init_data)
-    if not is_valid:
-        return False
-
-    result = {}
-    for key, value in parse_qsl(raw_init_data):
-        try:
-            value = json.loads(value)
-        except json.JSONDecodeError:
-            result[key] = value
-        else:
-            result[key] = value
-    return result
-
-
-def validate_web_app_data(token: str, raw_init_data: str):
-    """
-    Validates web app data.
-
-    :param token: The bot token
-    :type token: :obj:`str`
-
-    :param raw_init_data: The raw init data
-    :type raw_init_data: :obj:`str`
-
-    :return: The parsed init data
-    """
-    try:
-        parsed_data = dict(parse_qsl(raw_init_data))
-    except ValueError:
-        return False
-    if "hash" not in parsed_data:
-        return False
-
-    init_data_hash = parsed_data.pop('hash')
-    data_check_string = "\n".join(f"{key}={value}" for key, value in sorted(parsed_data.items()))
-    secret_key = hmac.new(key=b"WebAppData", msg=token.encode(), digestmod=sha256)
-
-    return hmac.new(secret_key.digest(), data_check_string.encode(), sha256).hexdigest() == init_data_hash
-
-    
+# -*- coding: utf-8 -*-
+import random
+import re
+import string
+import threading
+import traceback
+from typing import Any, Callable, List, Dict, Optional, Union
+import hmac
+from hashlib import sha256
+from urllib.parse import parse_qsl
+
+# noinspection PyPep8Naming
+import queue as Queue
+import logging
+
+from telebot import types
+
+try:
+    import ujson as json
+except ImportError:
+    import json
+
+try:
+    # noinspection PyPackageRequirements
+    from PIL import Image
+    from io import BytesIO
+
+    pil_imported = True
+except:
+    pil_imported = False
+
+MAX_MESSAGE_LENGTH = 4096
+
+logger = logging.getLogger('TeleBot')
+
+thread_local = threading.local()
+
+#: Contains all media content types.
+content_type_media = [
+    'text', 'audio', 'document', 'animation', 'game', 'photo', 'sticker', 'video', 'video_note', 'voice', 'contact',
+    'location', 'venue', 'dice', 'invoice', 'successful_payment', 'connected_website', 'poll', 'passport_data',
+    'web_app_data',
+]
+
+#: Contains all service content types such as `User joined the group`.
+content_type_service = [
+    'new_chat_members', 'left_chat_member', 'new_chat_title', 'new_chat_photo', 'delete_chat_photo', 'group_chat_created',
+    'supergroup_chat_created', 'channel_chat_created', 'migrate_to_chat_id', 'migrate_from_chat_id', 'pinned_message',
+    'proximity_alert_triggered', 'video_chat_scheduled', 'video_chat_started', 'video_chat_ended',
+    'video_chat_participants_invited', 'message_auto_delete_timer_changed', 'forum_topic_created', 'forum_topic_closed',
+    'forum_topic_reopened',
+]
+
+#: All update types, should be used for allowed_updates parameter in polling.
+update_types = [
+    "message", "edited_message", "channel_post", "edited_channel_post", "inline_query", "chosen_inline_result",
+    "callback_query", "shipping_query", "pre_checkout_query", "poll", "poll_answer", "my_chat_member", "chat_member",
+    "chat_join_request",
+]
+
+
+class WorkerThread(threading.Thread):
+    """
+    :meta private:
+    """
+    count = 0
+
+    def __init__(self, exception_callback=None, queue=None, name=None):
+        if not name:
+            name = "WorkerThread{0}".format(self.__class__.count + 1)
+            self.__class__.count += 1
+        if not queue:
+            queue = Queue.Queue()
+
+        threading.Thread.__init__(self, name=name)
+        self.queue = queue
+        self.daemon = True
+
+        self.received_task_event = threading.Event()
+        self.done_event = threading.Event()
+        self.exception_event = threading.Event()
+        self.continue_event = threading.Event()
+
+        self.exception_callback = exception_callback
+        self.exception_info = None
+        self._running = True
+        self.start()
+
+    def run(self):
+        while self._running:
+            try:
+                task, args, kwargs = self.queue.get(block=True, timeout=.5)
+                self.continue_event.clear()
+                self.received_task_event.clear()
+                self.done_event.clear()
+                self.exception_event.clear()
+                logger.debug("Received task")
+                self.received_task_event.set()
+
+                task(*args, **kwargs)
+                logger.debug("Task complete")
+                self.done_event.set()
+            except Queue.Empty:
+                pass
+            except Exception as e:
+                logger.debug(type(e).__name__ + " occurred, args=" + str(e.args) + "\n" + traceback.format_exc())
+                self.exception_info = e
+                self.exception_event.set()
+                if self.exception_callback:
+                    self.exception_callback(self, self.exception_info)
+                self.continue_event.wait()
+
+    def put(self, task, *args, **kwargs):
+        self.queue.put((task, args, kwargs))
+
+    def raise_exceptions(self):
+        if self.exception_event.is_set():
+            raise self.exception_info
+
+    def clear_exceptions(self):
+        self.exception_event.clear()
+        self.continue_event.set()
+
+    def stop(self):
+        self._running = False
+
+
+class ThreadPool:
+    """
+    :meta private:
+    """
+    def __init__(self, telebot, num_threads=2):
+        self.telebot = telebot
+        self.tasks = Queue.Queue()
+        self.workers = [WorkerThread(self.on_exception, self.tasks) for _ in range(num_threads)]
+        self.num_threads = num_threads
+
+        self.exception_event = threading.Event()
+        self.exception_info = None
+
+    def put(self, func, *args, **kwargs):
+        self.tasks.put((func, args, kwargs))
+
+    def on_exception(self, worker_thread, exc_info):
+        if self.telebot.exception_handler is not None:
+            handled = self.telebot.exception_handler.handle(exc_info)
+        else:
+            handled = False
+        if not handled:
+            self.exception_info = exc_info
+            self.exception_event.set()
+        worker_thread.continue_event.set()
+
+    def raise_exceptions(self):
+        if self.exception_event.is_set():
+            raise self.exception_info
+
+    def clear_exceptions(self):
+        self.exception_event.clear()
+
+    def close(self):
+        for worker in self.workers:
+            worker.stop()
+        for worker in self.workers:
+            worker.join()
+
+
+class AsyncTask:
+    """
+    :meta private:
+    """
+    def __init__(self, target, *args, **kwargs):
+        self.target = target
+        self.args = args
+        self.kwargs = kwargs
+
+        self.done = False
+        self.thread = threading.Thread(target=self._run)
+        self.thread.start()
+
+    def _run(self):
+        try:
+            self.result = self.target(*self.args, **self.kwargs)
+        except Exception as e:
+            self.result = e
+        self.done = True
+
+    def wait(self):
+        if not self.done:
+            self.thread.join()
+        if isinstance(self.result, BaseException):
+            raise self.result
+        else:
+            return self.result
+
+
+class CustomRequestResponse():
+    """
+    :meta private:
+    """
+    def __init__(self, json_text, status_code = 200, reason = ""):
+        self.status_code = status_code
+        self.text = json_text
+        self.reason = reason
+
+    def json(self):
+        return json.loads(self.text)
+
+
+def async_dec():
+    """
+    :meta private:
+    """
+    def decorator(fn):
+        def wrapper(*args, **kwargs):
+            return AsyncTask(fn, *args, **kwargs)
+
+        return wrapper
+
+    return decorator
+
+
+def is_string(var) -> bool:
+    """
+    Returns True if the given object is a string.
+    """
+    return isinstance(var, str)
+
+
+def is_dict(var) -> bool:
+    """
+    Returns True if the given object is a dictionary.
+
+    :param var: object to be checked
+    :type var: :obj:`object`
+
+    :return: True if the given object is a dictionary.
+    :rtype: :obj:`bool`
+    """
+    return isinstance(var, dict)
+
+
+def is_bytes(var) -> bool:
+    """
+    Returns True if the given object is a bytes object.
+
+    :param var: object to be checked
+    :type var: :obj:`object`
+
+    :return: True if the given object is a bytes object.
+    :rtype: :obj:`bool`
+    """
+    return isinstance(var, bytes)
+
+
+def is_pil_image(var) -> bool:
+    """
+    Returns True if the given object is a PIL.Image.Image object.
+
+    :param var: object to be checked
+    :type var: :obj:`object`
+
+    :return: True if the given object is a PIL.Image.Image object.
+    :rtype: :obj:`bool`
+    """
+    return pil_imported and isinstance(var, Image.Image)
+
+
+def pil_image_to_file(image, extension='JPEG', quality='web_low'):
+    if pil_imported:
+        photoBuffer = BytesIO()
+        image.convert('RGB').save(photoBuffer, extension, quality=quality)
+        photoBuffer.seek(0)
+
+        return photoBuffer
+    else:
+        raise RuntimeError('PIL module is not imported')
+
+
+def is_command(text: str) -> bool:
+    r"""
+    Checks if `text` is a command. Telegram chat commands start with the '/' character.
+    
+    :param text: Text to check.
+    :type text: :obj:`str`
+
+    :return: True if `text` is a command, else False.
+    :rtype: :obj:`bool`
+    """
+    if text is None: return False
+    return text.startswith('/')
+
+
+def extract_command(text: str) -> Union[str, None]:
+    """
+    Extracts the command from `text` (minus the '/') if `text` is a command (see is_command).
+    If `text` is not a command, this function returns None.
+
+    .. code-block:: python3
+        :caption: Examples:
+        
+        extract_command('/help'): 'help'
+        extract_command('/help@BotName'): 'help'
+        extract_command('/search black eyed peas'): 'search'
+        extract_command('Good day to you'): None
+
+    :param text: String to extract the command from
+    :type text: :obj:`str`
+
+    :return: the command if `text` is a command (according to is_command), else None.
+    :rtype: :obj:`str` or :obj:`None`
+    """
+    if text is None: return None
+    return text.split()[0].split('@')[0][1:] if is_command(text) else None
+
+
+def extract_arguments(text: str) -> str or None:
+    """
+    Returns the argument after the command.
+    
+    .. code-block:: python3
+        :caption: Examples:
+
+        extract_arguments("/get name"): 'name'
+        extract_arguments("/get"): ''
+        extract_arguments("/get@botName name"): 'name'
+    
+    :param text: String to extract the arguments from a command
+    :type text: :obj:`str`
+
+    :return: the arguments if `text` is a command (according to is_command), else None.
+    :rtype: :obj:`str` or :obj:`None`
+    """
+    regexp = re.compile(r"/\w*(@\w*)*\s*([\s\S]*)", re.IGNORECASE)
+    result = regexp.match(text)
+    return result.group(2) if is_command(text) else None
+
+
+def split_string(text: str, chars_per_string: int) -> List[str]:
+    """
+    Splits one string into multiple strings, with a maximum amount of `chars_per_string` characters per string.
+    This is very useful for splitting one giant message into multiples.
+
+    :param text: The text to split
+    :type text: :obj:`str`
+
+    :param chars_per_string: The number of characters per line the text is split into.
+    :type chars_per_string: :obj:`int`
+
+    :return: The splitted text as a list of strings.
+    :rtype: :obj:`list` of :obj:`str`
+    """
+    return [text[i:i + chars_per_string] for i in range(0, len(text), chars_per_string)]
+
+
+def smart_split(text: str, chars_per_string: int=MAX_MESSAGE_LENGTH) -> List[str]:
+    r"""
+    Splits one string into multiple strings, with a maximum amount of `chars_per_string` characters per string.
+    This is very useful for splitting one giant message into multiples.
+    If `chars_per_string` > 4096: `chars_per_string` = 4096.
+    Splits by '\n', '. ' or ' ' in exactly this priority.
+
+    :param text: The text to split
+    :type text: :obj:`str`
+
+    :param chars_per_string: The number of maximum characters per part the text is split to.
+    :type chars_per_string: :obj:`int`
+
+    :return: The splitted text as a list of strings.
+    :rtype: :obj:`list` of :obj:`str`
+    """
+
+    def _text_before_last(substr: str) -> str:
+        return substr.join(part.split(substr)[:-1]) + substr
+
+    if chars_per_string > MAX_MESSAGE_LENGTH: chars_per_string = MAX_MESSAGE_LENGTH
+
+    parts = []
+    while True:
+        if len(text) < chars_per_string:
+            parts.append(text)
+            return parts
+
+        part = text[:chars_per_string]
+
+        if "\n" in part: part = _text_before_last("\n")
+        elif ". " in part: part = _text_before_last(". ")
+        elif " " in part: part = _text_before_last(" ")
+
+        parts.append(part)
+        text = text[len(part):]
+
+
+def escape(text: str) -> str:
+    """
+    Replaces the following chars in `text` ('&' with '&amp;', '<' with '&lt;' and '>' with '&gt;').
+
+    :param text: the text to escape
+    :return: the escaped text
+    """
+    chars = {"&": "&amp;", "<": "&lt;", ">": "&gt;"}
+    if text is None:
+        return None
+    for old, new in chars.items(): 
+        text = text.replace(old, new)
+    return text
+
+
+def user_link(user: types.User, include_id: bool=False) -> str:
+    """
+    Returns an HTML user link. This is useful for reports.
+    Attention: Don't forget to set parse_mode to 'HTML'!
+
+
+    .. code-block:: python3
+        :caption: Example:
+
+        bot.send_message(your_user_id, user_link(message.from_user) + ' started the bot!', parse_mode='HTML')
+
+    .. note::
+        You can use formatting.* for all other formatting options(bold, italic, links, and etc.)
+        This method is kept for backward compatibility, and it is recommended to use formatting.* for
+        more options.
+
+    :param user: the user (not the user_id)
+    :type user: :obj:`telebot.types.User`
+
+    :param include_id: include the user_id
+    :type include_id: :obj:`bool`
+
+    :return: HTML user link
+    :rtype: :obj:`str`
+    """
+    name = escape(user.first_name)
+    return (f"<a href='tg://user?id={user.id}'>{name}</a>"
+        + (f" (<pre>{user.id}</pre>)" if include_id else ""))
+
+
+def quick_markup(values: Dict[str, Dict[str, Any]], row_width: int=2) -> types.InlineKeyboardMarkup:
+    """
+    Returns a reply markup from a dict in this format: {'text': kwargs}
+    This is useful to avoid always typing 'btn1 = InlineKeyboardButton(...)' 'btn2 = InlineKeyboardButton(...)' 
+    
+    Example:
+
+    .. code-block:: python3
+        :caption: Using quick_markup:
+
+        quick_markup({
+            'Twitter': {'url': 'https://twitter.com'},
+            'Facebook': {'url': 'https://facebook.com'},
+            'Back': {'callback_data': 'whatever'}
+        }, row_width=2): 
+        # returns an InlineKeyboardMarkup with two buttons in a row, one leading to Twitter, the other to facebook
+        # and a back button below
+
+        # kwargs can be: 
+        {
+            'url': None, 
+            'callback_data': None, 
+            'switch_inline_query': None,
+            'switch_inline_query_current_chat': None,
+            'callback_game': None,
+            'pay': None,
+            'login_url': None,
+            'web_app': None
+        }
+    
+    :param values: a dict containing all buttons to create in this format: {text: kwargs} {str:}
+    :type values: :obj:`dict`
+
+    :param row_width: int row width
+    :type row_width: :obj:`int`
+
+    :return: InlineKeyboardMarkup
+    :rtype: :obj:`types.InlineKeyboardMarkup`
+    """
+    markup = types.InlineKeyboardMarkup(row_width=row_width)
+    buttons = [
+        types.InlineKeyboardButton(text=text, **kwargs)
+        for text, kwargs in values.items()
+    ]
+    markup.add(*buttons)
+    return markup
+
+
+# CREDITS TO http://stackoverflow.com/questions/12317940#answer-12320352
+def or_set(self):
+    """
+    :meta private:
+    """
+    self._set()
+    self.changed()
+
+
+def or_clear(self):
+    """
+    :meta private:
+    """
+    self._clear()
+    self.changed()
+
+
+def orify(e, changed_callback):
+    """
+    :meta private:
+    """
+    if not hasattr(e, "_set"):
+        e._set = e.set
+    if not hasattr(e, "_clear"):
+        e._clear = e.clear
+    e.changed = changed_callback
+    e.set = lambda: or_set(e)
+    e.clear = lambda: or_clear(e)
+
+
+def OrEvent(*events):
+    """
+    :meta private:
+    """
+    or_event = threading.Event()
+
+    def changed():
+        bools = [ev.is_set() for ev in events]
+        if any(bools):
+            or_event.set()
+        else:
+            or_event.clear()
+
+    def busy_wait():
+        while not or_event.is_set():
+            # noinspection PyProtectedMember
+            or_event._wait(3)
+
+    for e in events:
+        orify(e, changed)
+    or_event._wait = or_event.wait
+    or_event.wait = busy_wait
+    changed()
+    return or_event
+
+
+def per_thread(key, construct_value, reset=False):
+    """
+    :meta private:
+    """
+    if reset or not hasattr(thread_local, key):
+        value = construct_value()
+        setattr(thread_local, key, value)
+
+    return getattr(thread_local, key)
+
+
+def chunks(lst, n):
+    """Yield successive n-sized chunks from lst."""
+    # https://stackoverflow.com/a/312464/9935473
+    for i in range(0, len(lst), n):
+        yield lst[i:i + n]
+
+
+def generate_random_token() -> str:
+    """
+    Generates a random token consisting of letters and digits, 16 characters long.
+
+    :return: a random token
+    :rtype: :obj:`str`
+    """
+    return ''.join(random.sample(string.ascii_letters, 16))
+
+
+def deprecated(warn: bool=True, alternative: Optional[Callable]=None, deprecation_text=None):
+    """
+    Use this decorator to mark functions as deprecated.
+    When the function is used, an info (or warning if `warn` is True) is logged.
+
+    :meta private:
+    
+    :param warn: If True a warning is logged else an info
+    :type warn: :obj:`bool`
+
+    :param alternative: The new function to use instead
+    :type alternative: :obj:`Callable`
+
+    :param deprecation_text: Custom deprecation text
+    :type deprecation_text: :obj:`str`
+
+    :return: The decorated function
+    """
+    def decorator(function):
+        def wrapper(*args, **kwargs):
+            info = f"`{function.__name__}` is deprecated."
+            if alternative:
+                info += f" Use `{alternative.__name__}` instead"
+            if deprecation_text:
+                info += " " + deprecation_text
+            if not warn:
+                logger.info(info)
+            else:
+                logger.warning(info)
+            return function(*args, **kwargs)
+        return wrapper
+    return decorator
+
+
+# Cloud helpers
+def webhook_google_functions(bot, request):
+    """
+    A webhook endpoint for Google Cloud Functions FaaS.
+    
+    :param bot: The bot instance
+    :type bot: :obj:`telebot.TeleBot` or :obj:`telebot.async_telebot.AsyncTeleBot`
+
+    :param request: The request object
+    :type request: :obj:`flask.Request`
+
+    :return: The response object
+    """
+    if request.is_json:
+        try:
+            request_json = request.get_json()
+            update = types.Update.de_json(request_json)
+            bot.process_new_updates([update])
+            return ''
+        except Exception as e:
+            print(e)
+            return 'Bot FAIL', 400
+    else:
+        return 'Bot ON'
+
+
+def antiflood(function: Callable, *args, **kwargs):
+    """
+    Use this function inside loops in order to avoid getting TooManyRequests error.
+    Example:
+    
+    .. code-block:: python3
+    
+        from telebot.util import antiflood
+        for chat_id in chat_id_list:
+        msg = antiflood(bot.send_message, chat_id, text)
+        
+    :param function: The function to call
+    :type function: :obj:`Callable`
+
+    :param args: The arguments to pass to the function
+    :type args: :obj:`tuple`
+
+    :param kwargs: The keyword arguments to pass to the function
+    :type kwargs: :obj:`dict`
+
+    :return: None
+    """
+    from telebot.apihelper import ApiTelegramException
+    from time import sleep
+
+    try:
+        return function(*args, **kwargs)
+    except ApiTelegramException as ex:
+        if ex.error_code == 429:
+            sleep(ex.result_json['parameters']['retry_after'])
+            return function(*args, **kwargs)
+        else:
+            raise
+    
+    
+def parse_web_app_data(token: str, raw_init_data: str):
+    """
+    Parses web app data.
+
+    :param token: The bot token
+    :type token: :obj:`str`
+
+    :param raw_init_data: The raw init data
+    :type raw_init_data: :obj:`str`
+
+    :return: The parsed init data
+    """
+    is_valid = validate_web_app_data(token, raw_init_data)
+    if not is_valid:
+        return False
+
+    result = {}
+    for key, value in parse_qsl(raw_init_data):
+        try:
+            value = json.loads(value)
+        except json.JSONDecodeError:
+            result[key] = value
+        else:
+            result[key] = value
+    return result
+
+
+def validate_web_app_data(token: str, raw_init_data: str):
+    """
+    Validates web app data.
+
+    :param token: The bot token
+    :type token: :obj:`str`
+
+    :param raw_init_data: The raw init data
+    :type raw_init_data: :obj:`str`
+
+    :return: The parsed init data
+    """
+    try:
+        parsed_data = dict(parse_qsl(raw_init_data))
+    except ValueError:
+        return False
+    if "hash" not in parsed_data:
+        return False
+
+    init_data_hash = parsed_data.pop('hash')
+    data_check_string = "\n".join(f"{key}={value}" for key, value in sorted(parsed_data.items()))
+    secret_key = hmac.new(key=b"WebAppData", msg=token.encode(), digestmod=sha256)
+
+    return hmac.new(secret_key.digest(), data_check_string.encode(), sha256).hexdigest() == init_data_hash
+
+
```

