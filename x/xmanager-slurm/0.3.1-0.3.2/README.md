# Comparing `tmp/xmanager_slurm-0.3.1-py3-none-any.whl.zip` & `tmp/xmanager_slurm-0.3.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,40 @@
-Zip file size: 51843 bytes, number of entries: 38
+Zip file size: 51978 bytes, number of entries: 38
 -rw-r--r--  2.0 unx     1019 b- defN 16-Jan-01 00:00 xm_slurm/__init__.py
 -rw-r--r--  2.0 unx     9533 b- defN 16-Jan-01 00:00 xm_slurm/api.py
 -rw-r--r--  2.0 unx     4379 b- defN 16-Jan-01 00:00 xm_slurm/batching.py
 -rw-r--r--  2.0 unx     4955 b- defN 16-Jan-01 00:00 xm_slurm/config.py
 -rw-r--r--  2.0 unx       54 b- defN 16-Jan-01 00:00 xm_slurm/console.py
 -rw-r--r--  2.0 unx     1600 b- defN 16-Jan-01 00:00 xm_slurm/contrib/clusters/__init__.py
 -rw-r--r--  2.0 unx     5201 b- defN 16-Jan-01 00:00 xm_slurm/contrib/clusters/drac.py
--rw-r--r--  2.0 unx     5762 b- defN 16-Jan-01 00:00 xm_slurm/executables.py
+-rw-r--r--  2.0 unx     5959 b- defN 16-Jan-01 00:00 xm_slurm/executables.py
 -rw-r--r--  2.0 unx    17998 b- defN 16-Jan-01 00:00 xm_slurm/execution.py
 -rw-r--r--  2.0 unx     4723 b- defN 16-Jan-01 00:00 xm_slurm/executors.py
 -rw-r--r--  2.0 unx    25578 b- defN 16-Jan-01 00:00 xm_slurm/experiment.py
 -rw-r--r--  2.0 unx      482 b- defN 16-Jan-01 00:00 xm_slurm/job_blocks.py
--rw-r--r--  2.0 unx    11216 b- defN 16-Jan-01 00:00 xm_slurm/packageables.py
+-rw-r--r--  2.0 unx    11375 b- defN 16-Jan-01 00:00 xm_slurm/packageables.py
 -rw-r--r--  2.0 unx      233 b- defN 16-Jan-01 00:00 xm_slurm/packaging/__init__.py
 -rw-r--r--  2.0 unx     2474 b- defN 16-Jan-01 00:00 xm_slurm/packaging/docker/__init__.py
 -rw-r--r--  2.0 unx     3830 b- defN 16-Jan-01 00:00 xm_slurm/packaging/docker/abc.py
 -rw-r--r--  2.0 unx    21300 b- defN 16-Jan-01 00:00 xm_slurm/packaging/docker/cloud.py
 -rw-r--r--  2.0 unx     8008 b- defN 16-Jan-01 00:00 xm_slurm/packaging/docker/local.py
 -rw-r--r--  2.0 unx     1148 b- defN 16-Jan-01 00:00 xm_slurm/packaging/registry.py
 -rw-r--r--  2.0 unx     2033 b- defN 16-Jan-01 00:00 xm_slurm/packaging/router.py
 -rw-r--r--  2.0 unx     6219 b- defN 16-Jan-01 00:00 xm_slurm/packaging/utils.py
 -rw-r--r--  2.0 unx     4835 b- defN 16-Jan-01 00:00 xm_slurm/resources.py
 -rw-r--r--  2.0 unx     6653 b- defN 16-Jan-01 00:00 xm_slurm/status.py
--rw-r--r--  2.0 unx     1313 b- defN 16-Jan-01 00:00 xm_slurm/templates/docker/docker-bake.hcl.j2
+-rw-r--r--  2.0 unx     1498 b- defN 16-Jan-01 00:00 xm_slurm/templates/docker/docker-bake.hcl.j2
 -rw-r--r--  2.0 unx      716 b- defN 16-Jan-01 00:00 xm_slurm/templates/docker/mamba.Dockerfile
 -rw-r--r--  2.0 unx      748 b- defN 16-Jan-01 00:00 xm_slurm/templates/docker/pdm.Dockerfile
 -rw-r--r--  2.0 unx      738 b- defN 16-Jan-01 00:00 xm_slurm/templates/docker/python.Dockerfile
 -rw-r--r--  2.0 unx     1071 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/fragments/monitor.bash.j2
 -rw-r--r--  2.0 unx      814 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/fragments/proxy.bash.j2
 -rw-r--r--  2.0 unx      599 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/job-array.bash.j2
 -rw-r--r--  2.0 unx     1120 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/job-group.bash.j2
 -rw-r--r--  2.0 unx     1852 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/job.bash.j2
 -rw-r--r--  2.0 unx     3222 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/runtimes/apptainer.bash.j2
 -rw-r--r--  2.0 unx     1469 b- defN 16-Jan-01 00:00 xm_slurm/templates/slurm/runtimes/podman.bash.j2
 -rw-r--r--  2.0 unx     1930 b- defN 16-Jan-01 00:00 xm_slurm/utils.py
--rw-r--r--  2.0 unx      909 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.1.dist-info/METADATA
--rw-r--r--  2.0 unx       90 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.1.dist-info/WHEEL
-?rw-------  2.0 unx     3305 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.1.dist-info/RECORD
-38 files, 169129 bytes uncompressed, 46531 bytes compressed:  72.5%
+-rw-r--r--  2.0 unx      909 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       90 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.2.dist-info/WHEEL
+?rw-------  2.0 unx     3305 b- defN 16-Jan-01 00:00 xmanager_slurm-0.3.2.dist-info/RECORD
+38 files, 169670 bytes uncompressed, 46666 bytes compressed:  72.5%
```

## zipnote {}

```diff
@@ -99,17 +99,17 @@
 
 Filename: xm_slurm/templates/slurm/runtimes/podman.bash.j2
 Comment: 
 
 Filename: xm_slurm/utils.py
 Comment: 
 
-Filename: xmanager_slurm-0.3.1.dist-info/METADATA
+Filename: xmanager_slurm-0.3.2.dist-info/METADATA
 Comment: 
 
-Filename: xmanager_slurm-0.3.1.dist-info/WHEEL
+Filename: xmanager_slurm-0.3.2.dist-info/WHEEL
 Comment: 
 
-Filename: xmanager_slurm-0.3.1.dist-info/RECORD
+Filename: xmanager_slurm-0.3.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## xm_slurm/executables.py

```diff
@@ -10,14 +10,15 @@
 class Dockerfile(xm.ExecutableSpec):
     """A specification describing a Dockerfile to build.
 
     Args:
         dockerfile: The path to the Dockerfile.
         context: The path to the Docker context.
         target: The Docker build target.
+        ssh: A list of docker SSH sockets/keys.
         build_args: Build arguments to docker.
         cache_from: Where to pull the BuildKit cache from. See `--cache-from` in `docker build`.
         workdir: The working directory in container.
         labels: The container labels.
         platforms: The target platform.
     """
 
@@ -25,14 +26,17 @@
     dockerfile: pathlib.Path
     # Docker context
     context: pathlib.Path
 
     # Docker build target
     target: str | None = None
 
+    # SSH sockets/keys for the docker build step.
+    ssh: list[str] = dataclasses.field(default_factory=list)
+
     # Build arguments to docker
     build_args: Mapping[str, str] = dataclasses.field(default_factory=dict)
 
     # --cache-from field in BuildKit
     cache_from: Sequence[str] = dataclasses.field(default_factory=list)
 
     # Working directory in container
@@ -52,14 +56,15 @@
         return name
 
     def __hash__(self) -> int:
         return hash((
             self.dockerfile,
             self.context,
             self.target,
+            tuple(sorted(self.ssh)),
             tuple(sorted(self.build_args.items())),
             tuple(sorted(self.cache_from)),
             self.workdir,
             tuple(sorted(self.labels.items())),
             tuple(sorted(self.platforms)),
         ))
```

## xm_slurm/packageables.py

```diff
@@ -36,28 +36,30 @@
 
 def docker_container(
     *,
     executor_spec: xm.ExecutorSpec,
     dockerfile: pathlib.Path | None = None,
     context: pathlib.Path | None = None,
     target: str | None = None,
+    ssh: list[str] | None = None,
     build_args: Mapping[str, str] = immutabledict.immutabledict(),
     cache_from: str | Sequence[str] | None = None,
     labels: Mapping[str, str] = immutabledict.immutabledict(),
     workdir: pathlib.Path | None = None,
     args: xm.UserArgs | None = None,
     env_vars: Mapping[str, str] = immutabledict.immutabledict(),
 ) -> xm.Packageable:
     """Creates a Docker container packageable from a dockerfile.
 
     Args:
         executor_spec: The executor specification, where will the container be stored at.
         dockerfile: The path to the dockerfile.
         context: The path to the docker context.
         target: The docker build target.
+        ssh: A list of SSH sockets/keys for the docker build step.
         build_args: Build arguments to docker.
         cache_from: Where to pull the BuildKit cache from. See `--cache-from` in `docker build`.
         labels: The container labels.
         workdir: The working directory in container.
         args: The user arguments to pass to the executable.
         env_vars: The environment variables to pass to the executable.
 
@@ -65,27 +67,30 @@
     """
     if context is None:
         context = utils.find_project_root()
     context = context.resolve()
     if dockerfile is None:
         dockerfile = context / "Dockerfile"
     dockerfile = dockerfile.resolve()
+    if ssh is None:
+        ssh = []
     if cache_from is None and isinstance(executor_spec, SlurmSpec):
         cache_from = executor_spec.tag
     if cache_from is None:
         cache_from = []
     elif isinstance(cache_from, str):
         cache_from = [cache_from]
 
     return xm.Packageable(
         executor_spec=executor_spec,
         executable_spec=Dockerfile(
             dockerfile=dockerfile,
             context=context,
             target=target,
+            ssh=ssh,
             build_args=build_args,
             cache_from=cache_from,
             workdir=workdir,
             labels=labels,
         ),
         args=args,
         env_vars=env_vars,
```

## xm_slurm/templates/docker/docker-bake.hcl.j2

```diff
@@ -1,13 +1,20 @@
 {% for executable, executors in executables.items() %}
 target "{{ hash(executable) }}" {
     dockerfile-inline = <<EOF
 {{ executable.dockerfile.read_text() }}
 EOF
     context = "{{ executable.context }}"
+    {% if executable.ssh %}
+    ssh = [
+        {% for ssh_val in executable.ssh %}
+        "{{ ssh_val }}"{% if not loop.last %},{% endif %}
+        {% endfor %}
+    ]
+    {% endif %}
     {% if executable.target %}
     target = "{{ executable.target }}"
     {% endif %}
     pull = true
     tags = [
         {% for executor in executors %}
         "{{ executor.tag }}"{% if not loop.last %},{% endif %}
```

## Comparing `xmanager_slurm-0.3.1.dist-info/METADATA` & `xmanager_slurm-0.3.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: xmanager-slurm
-Version: 0.3.1
+Version: 0.3.2
 Summary: Slurm backend for XManager.
 Author-Email: Jesse Farebrother <jfarebro@cs.mcgill.ca>
 License: MIT
 Requires-Python: >=3.10
 Requires-Dist: xmanager>=0.4.0
 Requires-Dist: asyncssh>=2.13.2
 Requires-Dist: humanize>=4.8.0
```

## Comparing `xmanager_slurm-0.3.1.dist-info/RECORD` & `xmanager_slurm-0.3.2.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -1,38 +1,38 @@
 xm_slurm/__init__.py,sha256=J5FkaAXbcT7yWmcNgBq3mDLOmnNZW7c4WekSt7JVoFc,1019
 xm_slurm/api.py,sha256=LhAnNfP_M62FEbTSa-NgToxi0OA8kCrUx2czbxfpOjw,9533
 xm_slurm/batching.py,sha256=mGVvccehsC4dfjtg7QqrtxuoxYI_Fs8o1GLJIGVyvyo,4379
 xm_slurm/config.py,sha256=St2bdp2m2pajGxivmsRkmZrKd-inBKF7Hn6oezTT9zM,4955
 xm_slurm/console.py,sha256=UpMqeJ0C8i0pkue1AHnnyyX0bFJ9zZeJ7HBR6yhuA8A,54
 xm_slurm/contrib/clusters/__init__.py,sha256=BM9W2iJE3616uwAUdj1uqcXF70zunXlxWHEXgLdH2xs,1600
 xm_slurm/contrib/clusters/drac.py,sha256=Tl4Cv0DOHssJcnTU5c60w0Ye3dwlDZE4AkPtmew6-lQ,5201
-xm_slurm/executables.py,sha256=4SVn6obIvOKh54RXYccixUx993Xma0rLGanD3TfXNS4,5762
+xm_slurm/executables.py,sha256=G62nACUyki7Jwif3w6c6h3t88ebiv_w9ISYWeeAUVFo,5959
 xm_slurm/execution.py,sha256=EDckbWYtBoMAc0yWU-BitFWGPOkA-AxoQRFv7XdUNcA,17998
 xm_slurm/executors.py,sha256=vilogTjlxHLfZDms4aYOZWUW8w-2IdxU7xh-9vcW1Y0,4723
 xm_slurm/experiment.py,sha256=y5K-kZgavRk022IGXw5bg7beX4cnU1JtUOeP9824sRA,25578
 xm_slurm/job_blocks.py,sha256=1H1eZ5gbEGEoDYcoSh8S_gvp04MLXP7G128crDJlMYo,482
-xm_slurm/packageables.py,sha256=nzmkREacDPJXmo6D1mk4bKjUrLTjHj3rue-PoO_EATk,11216
+xm_slurm/packageables.py,sha256=mHG2ackEKh1Qg0HdIP72uDZt-9j4qvsW-l_WScdWMes,11375
 xm_slurm/packaging/__init__.py,sha256=dh307yLpUT9KN7rJ1e9fYC6hegGKfZcGboUq9nGpDVQ,233
 xm_slurm/packaging/docker/__init__.py,sha256=SQxaDtomYc4NwZ5lSoCiMoy2S2lRmc0sgwVMbENIatU,2474
 xm_slurm/packaging/docker/abc.py,sha256=f8XvUA_FusIpXI45PR5isA2msxM003ycW5mWbAyiKfk,3830
 xm_slurm/packaging/docker/cloud.py,sha256=8V3Hg_v_TLe6WoJkk3l6S-m7OgK2TNxwfK2glLSFN3o,21300
 xm_slurm/packaging/docker/local.py,sha256=-_elHmU-v0R3XucNMpYF98HCQcMV0x_RTvkt1jLnes4,8008
 xm_slurm/packaging/registry.py,sha256=GrdmQg9MgSo38OiqOzMKWSkQyBuyryOfc3zcdgZ4CUE,1148
 xm_slurm/packaging/router.py,sha256=6qjtsy4BoYgSaQzC_pQSHVHeWcphG_xWVsWgW6ALC7U,2033
 xm_slurm/packaging/utils.py,sha256=dCWAuUXT5COXGe1BQEW8luo5patxTeLSAGOWPR63iY8,6219
 xm_slurm/resources.py,sha256=FqAULBhchu6z66On3SRDOJvXfs0sLGfBvcMGUUB3jxU,4835
 xm_slurm/status.py,sha256=4BUBm-qwVWH_RJGzRxO8Eom5d92_cp8jydQVwqH8v6U,6653
-xm_slurm/templates/docker/docker-bake.hcl.j2,sha256=Ur9t9Yk_LfLPLvJvur47ZKFZmY07H-pJ76edQzAgYfU,1313
+xm_slurm/templates/docker/docker-bake.hcl.j2,sha256=ClsFpj91Mr1VfA8L6eqBG3HQz0Z8VenF6mEfmAhQgUo,1498
 xm_slurm/templates/docker/mamba.Dockerfile,sha256=vsOYkm-T33C2RanwbdjJIUjhPJ_H1NDBeEACguQJZ8c,716
 xm_slurm/templates/docker/pdm.Dockerfile,sha256=Yg5-lOXkNVJr0OER_yOnRvn9NlFLnt3RfdYfq4f0ilg,748
 xm_slurm/templates/docker/python.Dockerfile,sha256=O6lHesmsLz7cX-efVQpsafEVYmbHPyV73xA9WbBKGKg,738
 xm_slurm/templates/slurm/fragments/monitor.bash.j2,sha256=CxtbxOJzd0Un-ApDO6T8JHuKlSv6uwwBFMJPeGjCKnk,1071
 xm_slurm/templates/slurm/fragments/proxy.bash.j2,sha256=VJLglZo-Nvx9R-qe3rHTxr07CylTQ6Z9NwBzvIpAZrA,814
 xm_slurm/templates/slurm/job-array.bash.j2,sha256=d4twfV1PATGQwTIleFBUIGmMAIHH-F7RjBsdfaAIQko,599
 xm_slurm/templates/slurm/job-group.bash.j2,sha256=UkjfBE7jg9mepcUWaHZEAjkiXsIM1j_sLxLzxkteD-Y,1120
 xm_slurm/templates/slurm/job.bash.j2,sha256=EUeq3P2xqTIqlHi2SVhFBT7NL4lUj8okYUa3GnlaIIc,1852
 xm_slurm/templates/slurm/runtimes/apptainer.bash.j2,sha256=dMntzelhs8DqKyIpO9S6wzMfH2PDevmgvyjCW8Xc2dY,3222
 xm_slurm/templates/slurm/runtimes/podman.bash.j2,sha256=xKXYFvQvazMx0PgvmlRXR6eecoiBUl8y52dIzQtWkBE,1469
 xm_slurm/utils.py,sha256=PNd0vTn33UKm5LpC41TdO9QIFe21V5A0RbYEhQIMjrA,1930
-xmanager_slurm-0.3.1.dist-info/METADATA,sha256=uESSCwHQ0YvVRFwvqo3D-YIJQ9oW-tcufqTZoAruzto,909
-xmanager_slurm-0.3.1.dist-info/WHEEL,sha256=vnE8JVcI2Wz7GRKorsPArnBdnW2SWKWGow5gu5tHlRU,90
-xmanager_slurm-0.3.1.dist-info/RECORD,,
+xmanager_slurm-0.3.2.dist-info/METADATA,sha256=wQy1L_EjWG6foDa1iClRQT0-_iC6LMMh5E30_GHEePc,909
+xmanager_slurm-0.3.2.dist-info/WHEEL,sha256=vnE8JVcI2Wz7GRKorsPArnBdnW2SWKWGow5gu5tHlRU,90
+xmanager_slurm-0.3.2.dist-info/RECORD,,
```

